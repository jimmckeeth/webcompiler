rtl.module("System",[],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  this.LineEnding = "\n";
  this.sLineBreak = this.LineEnding;
  this.PathDelim = "/";
  this.AllowDirectorySeparators = rtl.createSet(47);
  this.AllowDriveSeparators = rtl.createSet(58);
  this.ExtensionSeparator = ".";
  this.MaxLongint = 0x7fffffff;
  this.Maxint = 2147483647;
  $lt = this.TTextLineBreakStyle = {"0": "tlbsLF", tlbsLF: 0, "1": "tlbsCRLF", tlbsCRLF: 1, "2": "tlbsCR", tlbsCR: 2};
  rtl.recNewT(this,"TGuid",function () {
    $lt1 = this;
    this.D1 = 0;
    this.D2 = 0;
    this.D3 = 0;
    this.$new = function () {
      var r = Object.create(this);
      r.D4 = rtl.arraySetLength(null,0,8);
      return r;
    };
    this.$eq = function (b) {
      return (this.D1 === b.D1) && (this.D2 === b.D2) && (this.D3 === b.D3) && rtl.arrayEq(this.D4,b.D4);
    };
    this.$assign = function (s) {
      this.D1 = s.D1;
      this.D2 = s.D2;
      this.D3 = s.D3;
      this.D4 = s.D4.slice(0);
      return this;
    };
  });
  rtl.createClass(this,"TObject",null,function () {
    $lt2 = this;
    this.$init = function () {
    };
    this.$final = function () {
    };
    this.Create = function () {
      return this;
    };
    this.Destroy = function () {
    };
    this.Free = function () {
      this.$destroy("Destroy");
    };
    this.ClassType = function () {
      return this;
    };
    this.InheritsFrom = function (aClass) {
      return (aClass!=null) && ((this==aClass) || aClass.isPrototypeOf(this));
    };
    this.FieldAddress = function (aName) {
      var Result = null;
      Result = null;
      if (aName === "") return Result;
      var aClass = this.$class;
      var ClassTI = null;
      var myName = aName.toLowerCase();
      var MemberTI = null;
      while (aClass !== null) {
        ClassTI = aClass.$rtti;
        for (var i = 0, $end2 = ClassTI.fields.length - 1; i <= $end2; i++) {
          MemberTI = ClassTI.getField(i);
          if (MemberTI.name.toLowerCase() === myName) {
             return MemberTI;
          };
        };
        aClass = aClass.$ancestor ? aClass.$ancestor : null;
      };
      return Result;
    };
    this.AfterConstruction = function () {
    };
    this.BeforeDestruction = function () {
    };
  });
  this.vtInteger = 0;
  this.vtExtended = 3;
  this.vtWideChar = 9;
  this.vtCurrency = 12;
  this.vtUnicodeString = 18;
  this.vtNativeInt = 19;
  rtl.recNewT(this,"TVarRec",function () {
    $lt3 = this;
    this.VType = 0;
    this.VJSValue = undefined;
    this.$eq = function (b) {
      return (this.VType === b.VType) && (this.VJSValue === b.VJSValue) && (this.VJSValue === b.VJSValue) && (this.VJSValue === b.VJSValue) && (this.VJSValue === b.VJSValue) && (this.VJSValue === b.VJSValue) && (this.VJSValue === b.VJSValue) && (this.VJSValue === b.VJSValue);
    };
    this.$assign = function (s) {
      this.VType = s.VType;
      this.VJSValue = s.VJSValue;
      this.VJSValue = s.VJSValue;
      this.VJSValue = s.VJSValue;
      this.VJSValue = s.VJSValue;
      this.VJSValue = s.VJSValue;
      this.VJSValue = s.VJSValue;
      this.VJSValue = s.VJSValue;
      return this;
    };
  });
  this.VarRecs = function () {
    var Result = [];
    var i = 0;
    var v = null;
    Result = [];
    while (i < arguments.length) {
      v = $lt3.$new();
      v.VType = rtl.trunc(arguments[i]);
      i += 1;
      v.VJSValue = arguments[i];
      i += 1;
      Result.push($lt3.$clone(v));
    };
    return Result;
  };
  this.FirstDotAtFileNameStartIsExtension = false;
  this.Frac = function (A) {
    return A % 1;
  };
  this.Random = function (Range) {
    return Math.floor(Math.random()*Range);
  };
  this.Trunc = function (A) {
    if (!Math.trunc) {
      Math.trunc = function(v) {
        v = +v;
        if (!isFinite(v)) return v;
        return (v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);
      };
    }
    $mod.Trunc = Math.trunc;
    return Math.trunc(A);
  };
  this.DefaultTextLineBreakStyle = 0;
  this.Int = function (A) {
    var Result = 0.0;
    Result = $mod.Trunc(A);
    return Result;
  };
  this.Copy = function (S, Index, Size) {
    if (Index<1) Index = 1;
    return (Size>0) ? S.substring(Index-1,Index+Size-1) : "";
  };
  this.Copy$1 = function (S, Index) {
    if (Index<1) Index = 1;
    return S.substr(Index-1);
  };
  this.Delete = function (S, Index, Size) {
    var h = "";
    if ((Index < 1) || (Index > S.get().length) || (Size <= 0)) return;
    h = S.get();
    S.set($mod.Copy(h,1,Index - 1) + $mod.Copy$1(h,Index + Size));
  };
  this.Pos = function (Search, InString) {
    return InString.indexOf(Search)+1;
  };
  this.Insert = function (Insertion, Target, Index) {
    var t = "";
    if (Insertion === "") return;
    t = Target.get();
    if (Index < 1) {
      Target.set(Insertion + t)}
     else if (Index > t.length) {
      Target.set(t + Insertion)}
     else Target.set($mod.Copy(t,1,Index - 1) + Insertion + $mod.Copy(t,Index,t.length));
  };
  this.upcase = function (c) {
    return c.toUpperCase();
  };
  this.val = function (S, NI, Code) {
    NI.set($impl.valint(S,-9007199254740991,9007199254740991,Code));
  };
  this.val$1 = function (S, NI, Code) {
    var x = 0.0;
    if (S === "") {
      Code.set(1);
      return;
    };
    x = Number(S);
    if (isNaN(x) || (x !== $mod.Int(x)) || (x < 0)) {
      Code.set(1)}
     else {
      Code.set(0);
      NI.set($mod.Trunc(x));
    };
  };
  this.val$6 = function (S, I, Code) {
    I.set($impl.valint(S,-2147483648,2147483647,Code));
  };
  this.val$8 = function (S, d, Code) {
    var x = 0.0;
    if (S === "") {
      Code.set(1);
      return;
    };
    x = Number(S);
    if (isNaN(x)) {
      Code.set(1)}
     else {
      Code.set(0);
      d.set(x);
    };
  };
  this.StringOfChar = function (c, l) {
    var Result = "";
    var i = 0;
    if ((l>0) && c.repeat) return c.repeat(l);
    Result = "";
    for (var $l = 1, $end = l; $l <= $end; $l++) {
      i = $l;
      Result = Result + c;
    };
    return Result;
  };
  this.Writeln = function () {
    var i = 0;
    var l = 0;
    var s = "";
    l = arguments.length - 1;
    if ($impl.WriteCallBack != null) {
      for (var $l = 0, $end = l; $l <= $end; $l++) {
        i = $l;
        $impl.WriteCallBack(arguments[i],i === l);
      };
    } else {
      s = $impl.WriteBuf;
      for (var $l1 = 0, $end1 = l; $l1 <= $end1; $l1++) {
        i = $l1;
        s = s + ("" + arguments[i]);
      };
      console.log(s);
      $impl.WriteBuf = "";
    };
  };
  this.SetWriteCallBack = function (H) {
    var Result = null;
    Result = $impl.WriteCallBack;
    $impl.WriteCallBack = H;
    return Result;
  };
  this.Assigned = function (V) {
    return (V!=undefined) && (V!=null) && (!rtl.isArray(V) || (V.length > 0));
  };
  $mod.$implcode = function () {
    $impl.WriteBuf = "";
    $impl.WriteCallBack = null;
    $impl.valint = function (S, MinVal, MaxVal, Code) {
      var Result = 0;
      var x = 0.0;
      if (S === "") {
        Code.set(1);
        return Result;
      };
      x = Number(S);
      if (isNaN(x)) {
        var $tmp = $mod.Copy(S,1,1);
        if ($tmp === "$") {
          x = Number("0x" + $mod.Copy$1(S,2))}
         else if ($tmp === "&") {
          x = Number("0o" + $mod.Copy$1(S,2))}
         else if ($tmp === "%") {
          x = Number("0b" + $mod.Copy$1(S,2))}
         else {
          Code.set(1);
          return Result;
        };
      };
      if (isNaN(x) || (x !== $mod.Int(x))) {
        Code.set(1)}
       else if ((x < MinVal) || (x > MaxVal)) {
        Code.set(2)}
       else {
        Result = $mod.Trunc(x);
        Code.set(0);
      };
      return Result;
    };
  };
  $mod.$init = function () {
    rtl.exitcode = 0;
  };
},[]);
rtl.module("RTLConsts",["System"],function () {
  "use strict";
  var $mod = this;
  $mod.$resourcestrings = {SArgumentMissing: {org: 'Missing argument in format "%s"'}, SInvalidFormat: {org: 'Invalid format specifier : "%s"'}, SInvalidArgIndex: {org: 'Invalid argument index in format: "%s"'}, SListCapacityError: {org: "List capacity (%s) exceeded."}, SListCountError: {org: "List count (%s) out of bounds."}, SListIndexError: {org: "List index (%s) out of bounds"}, SSortedListError: {org: "Operation not allowed on sorted list"}, SDuplicateString: {org: "String list does not allow duplicates"}, SErrFindNeedsSortedList: {org: "Cannot use find on unsorted list"}, SInvalidName: {org: 'Invalid component name: "%s"'}, SDuplicateName: {org: 'Duplicate component name: "%s"'}, SErrInvalidInteger: {org: 'Invalid integer value: "%s"'}};
});
rtl.module("Math",["System"],function () {
  "use strict";
  var $mod = this;
  var $lm = pas.System;
  var $lp = $lm.Trunc;
  this.IsInfinite = function (d) {
    return (d==Infinity) || (d==-Infinity);
  };
  this.Floor = function (A) {
    var Result = 0;
    Result = $lp(Math.floor(A));
    return Result;
  };
});
rtl.module("Types",["System"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  $lt = this.TDirection = {"0": "FromBeginning", FromBeginning: 0, "1": "FromEnd", FromEnd: 1};
  $lt1 = this.TDuplicates = {"0": "dupIgnore", dupIgnore: 0, "1": "dupAccept", dupAccept: 1, "2": "dupError", dupError: 2};
},["Math"]);
rtl.module("JS",["System","Types"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  this.$rtti.$DynArray("TJSStringDynArray",{eltype: rtl.string});
  this.JSDelete = function (Obj, PropName) {
    return delete Obj[PropName];
  };
  this.isBoolean = function (v) {
    return typeof(v) == 'boolean';
  };
  this.isInteger = function (v) {
    return Math.floor(v)===v;
  };
});
rtl.module("SysUtils",["System","RTLConsts","JS"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lm = pas.System;
  var $lt16 = $lm.TObject;
  var $lp = $lm.Writeln;
  var $lp1 = $lm.val;
  var $lp2 = $lm.Copy;
  var $lp3 = $lm.upcase;
  var $lp4 = $lm.StringOfChar;
  var $lp5 = $lm.Insert;
  var $lm1 = pas.RTLConsts;
  var $lp6 = $lm.VarRecs;
  var $lp7 = $lm.val$6;
  var $lp8 = $lm.Trunc;
  var $lp9 = $lm.Random;
  var $lp10 = $lm.Pos;
  var $lp11 = $lm.Delete;
  this.FreeAndNil = function (Obj) {
    var o = null;
    o = Obj.get();
    if (o === null) return;
    Obj.set(null);
    o.$destroy("Destroy");
  };
  this.FloatRecDigits = 19;
  rtl.recNewT(this,"TFloatRec",function () {
    $lt = this;
    this.Exponent = 0;
    this.Negative = false;
    this.$new = function () {
      var r = Object.create(this);
      r.Digits = rtl.arraySetLength(null,"\x00",19);
      return r;
    };
    this.$eq = function (b) {
      return (this.Exponent === b.Exponent) && (this.Negative === b.Negative) && rtl.arrayEq(this.Digits,b.Digits);
    };
    this.$assign = function (s) {
      this.Exponent = s.Exponent;
      this.Negative = s.Negative;
      this.Digits = s.Digits.slice(0);
      return this;
    };
  });
  rtl.recNewT(this,"TFormatSettings",function () {
    $lt1 = this;
    this.CurrencyDecimals = 0;
    this.CurrencyFormat = 0;
    this.CurrencyString = "";
    this.DateSeparator = "\x00";
    this.DecimalSeparator = "";
    this.LongDateFormat = "";
    this.LongTimeFormat = "";
    this.NegCurrFormat = 0;
    this.ShortDateFormat = "";
    this.ShortTimeFormat = "";
    this.ThousandSeparator = "";
    this.TimeAMString = "";
    this.TimePMString = "";
    this.TimeSeparator = "\x00";
    this.TwoDigitYearCenturyWindow = 0;
    this.InitLocaleHandler = null;
    this.$new = function () {
      var r = Object.create(this);
      r.DateTimeToStrFormat = rtl.arraySetLength(null,"",2);
      r.LongDayNames = rtl.arraySetLength(null,"",7);
      r.LongMonthNames = rtl.arraySetLength(null,"",12);
      r.ShortDayNames = rtl.arraySetLength(null,"",7);
      r.ShortMonthNames = rtl.arraySetLength(null,"",12);
      return r;
    };
    this.$eq = function (b) {
      return (this.CurrencyDecimals === b.CurrencyDecimals) && (this.CurrencyFormat === b.CurrencyFormat) && (this.CurrencyString === b.CurrencyString) && (this.DateSeparator === b.DateSeparator) && rtl.arrayEq(this.DateTimeToStrFormat,b.DateTimeToStrFormat) && (this.DecimalSeparator === b.DecimalSeparator) && (this.LongDateFormat === b.LongDateFormat) && rtl.arrayEq(this.LongDayNames,b.LongDayNames) && rtl.arrayEq(this.LongMonthNames,b.LongMonthNames) && (this.LongTimeFormat === b.LongTimeFormat) && (this.NegCurrFormat === b.NegCurrFormat) && (this.ShortDateFormat === b.ShortDateFormat) && rtl.arrayEq(this.ShortDayNames,b.ShortDayNames) && rtl.arrayEq(this.ShortMonthNames,b.ShortMonthNames) && (this.ShortTimeFormat === b.ShortTimeFormat) && (this.ThousandSeparator === b.ThousandSeparator) && (this.TimeAMString === b.TimeAMString) && (this.TimePMString === b.TimePMString) && (this.TimeSeparator === b.TimeSeparator) && (this.TwoDigitYearCenturyWindow === b.TwoDigitYearCenturyWindow);
    };
    this.$assign = function (s) {
      this.CurrencyDecimals = s.CurrencyDecimals;
      this.CurrencyFormat = s.CurrencyFormat;
      this.CurrencyString = s.CurrencyString;
      this.DateSeparator = s.DateSeparator;
      this.DateTimeToStrFormat = s.DateTimeToStrFormat.slice(0);
      this.DecimalSeparator = s.DecimalSeparator;
      this.LongDateFormat = s.LongDateFormat;
      this.LongDayNames = s.LongDayNames.slice(0);
      this.LongMonthNames = s.LongMonthNames.slice(0);
      this.LongTimeFormat = s.LongTimeFormat;
      this.NegCurrFormat = s.NegCurrFormat;
      this.ShortDateFormat = s.ShortDateFormat;
      this.ShortDayNames = s.ShortDayNames.slice(0);
      this.ShortMonthNames = s.ShortMonthNames.slice(0);
      this.ShortTimeFormat = s.ShortTimeFormat;
      this.ThousandSeparator = s.ThousandSeparator;
      this.TimeAMString = s.TimeAMString;
      this.TimePMString = s.TimePMString;
      this.TimeSeparator = s.TimeSeparator;
      this.TwoDigitYearCenturyWindow = s.TwoDigitYearCenturyWindow;
      return this;
    };
    this.GetJSLocale = function () {
      return Intl.DateTimeFormat().resolvedOptions().locale;
    };
    this.Create = function () {
      var Result = $lt1.$new();
      Result.$assign($lt1.Create$1($lt1.GetJSLocale()));
      return Result;
    };
    this.Create$1 = function (ALocale) {
      var Result = $lt1.$new();
      Result.LongDayNames = $impl.DefaultLongDayNames.slice(0);
      Result.ShortDayNames = $impl.DefaultShortDayNames.slice(0);
      Result.ShortMonthNames = $impl.DefaultShortMonthNames.slice(0);
      Result.LongMonthNames = $impl.DefaultLongMonthNames.slice(0);
      Result.DateTimeToStrFormat[0] = "c";
      Result.DateTimeToStrFormat[1] = "f";
      Result.DateSeparator = "-";
      Result.TimeSeparator = ":";
      Result.ShortDateFormat = "yyyy-mm-dd";
      Result.LongDateFormat = "ddd, yyyy-mm-dd";
      Result.ShortTimeFormat = "hh:nn";
      Result.LongTimeFormat = "hh:nn:ss";
      Result.DecimalSeparator = ".";
      Result.ThousandSeparator = ",";
      Result.TimeAMString = "AM";
      Result.TimePMString = "PM";
      Result.TwoDigitYearCenturyWindow = 50;
      Result.CurrencyFormat = 0;
      Result.NegCurrFormat = 0;
      Result.CurrencyDecimals = 2;
      Result.CurrencyString = "$";
      if ($lt1.InitLocaleHandler != null) $lt1.InitLocaleHandler($mod.UpperCase(ALocale),$lt1.$clone(Result));
      return Result;
    };
  },true);
  rtl.createClass(this,"Exception",$lt16,function () {
    $lt2 = this;
    this.LogMessageOnCreate = false;
    this.$init = function () {
      $lt16.$init.call(this);
      this.fMessage = "";
      this.FJSError = null;
    };
    this.$final = function () {
      this.FJSError = undefined;
      $lt16.$final.call(this);
    };
    this.Create$1 = function (Msg) {
      this.fMessage = Msg;
      this.FJSError = new Error();
      if (this.LogMessageOnCreate) $lp("Created exception ",this.$classname," with message: ",Msg);
      return this;
    };
    this.CreateFmt = function (Msg, Args) {
      this.Create$1($mod.Format(Msg,Args));
      return this;
    };
  });
  rtl.createClass(this,"EExternal",$lt2,function () {
    $lt3 = this;
  });
  rtl.createClass(this,"EMathError",$lt3,function () {
    $lt4 = this;
  });
  rtl.createClass(this,"EZeroDivide",$lt4,function () {
    $lt5 = this;
  });
  rtl.createClass(this,"EOverflow",$lt4,function () {
    $lt6 = this;
  });
  rtl.createClass(this,"EInvalidCast",$lt2,function () {
    $lt7 = this;
  });
  rtl.createClass(this,"EConvertError",$lt2,function () {
    $lt8 = this;
  });
  rtl.createClass(this,"EIntError",$lt3,function () {
    $lt9 = this;
  });
  rtl.createClass(this,"EDivByZero",$lt9,function () {
    $lt10 = this;
  });
  rtl.createClass(this,"ERangeError",$lt9,function () {
    $lt11 = this;
  });
  rtl.createClass(this,"EAbstractError",$lt2,function () {
    $lt12 = this;
  });
  this.LeftStr = function (S, Count) {
    return (Count>0) ? S.substr(0,Count) : "";
  };
  this.RightStr = function (S, Count) {
    var l = S.length;
    return (Count<1) ? "" : ( Count>=l ? S : S.substr(l-Count));
  };
  this.Trim = function (S) {
    return S.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,'').replace(/[\s\uFEFF\xA0\x00-\x1f]+$/,'');
  };
  this.TrimLeft = function (S) {
    return S.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,'');
  };
  this.TrimRight = function (S) {
    return S.replace(/[\s\uFEFF\xA0\x00-\x1f]+$/,'');
  };
  this.UpperCase = function (s) {
    return s.toUpperCase();
  };
  this.LowerCase = function (s) {
    return s.toLowerCase();
  };
  this.CompareStr = function (s1, s2) {
    var l1 = s1.length;
    var l2 = s2.length;
    if (l1<=l2){
      var s = s2.substr(0,l1);
      if (s1<s){ return -1;
      } else if (s1>s){ return 1;
      } else { return l1<l2 ? -1 : 0; };
    } else {
      var s = s1.substr(0,l2);
      if (s<s2){ return -1;
      } else { return 1; };
    };
  };
  this.CompareText = function (s1, s2) {
    var l1 = s1.toLowerCase();
    var l2 = s2.toLowerCase();
    if (l1>l2){ return 1;
    } else if (l1<l2){ return -1;
    } else { return 0; };
  };
  this.SameText = function (s1, s2) {
    return s1.toLowerCase() == s2.toLowerCase();
  };
  this.Format = function (Fmt, Args) {
    var Result = "";
    Result = $mod.Format$1(Fmt,Args,$mod.FormatSettings);
    return Result;
  };
  this.Format$1 = function (Fmt, Args, aSettings) {
    var Result = "";
    var ChPos = 0;
    var OldPos = 0;
    var ArgPos = 0;
    var DoArg = 0;
    var Len = 0;
    var Hs = "";
    var ToAdd = "";
    var Index = 0;
    var Width = 0;
    var Prec = 0;
    var Left = false;
    var Fchar = "\x00";
    var vq = 0;
    function ReadFormat() {
      var Result = "\x00";
      var Value = 0;
      function ReadInteger() {
        var Code = 0;
        var ArgN = 0;
        if (Value !== -1) return;
        OldPos = ChPos;
        while ((ChPos <= Len) && (Fmt.charAt(ChPos - 1) <= "9") && (Fmt.charAt(ChPos - 1) >= "0")) ChPos += 1;
        if (ChPos > Len) $impl.DoFormatError(1,Fmt);
        if (Fmt.charAt(ChPos - 1) === "*") {
          if (Index === 255) {
            ArgN = ArgPos}
           else {
            ArgN = Index;
            Index += 1;
          };
          if ((ChPos > OldPos) || (ArgN > (rtl.length(Args) - 1))) $impl.DoFormatError(1,Fmt);
          ArgPos = ArgN + 1;
          var $tmp = Args[ArgN].VType;
          if ($tmp === 0) {
            Value = Args[ArgN].VJSValue}
           else if ($tmp === 19) {
            Value = Args[ArgN].VJSValue}
           else {
            $impl.DoFormatError(1,Fmt);
          };
          ChPos += 1;
        } else {
          if (OldPos < ChPos) {
            $lp1($lp2(Fmt,OldPos,ChPos - OldPos),{get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }},{get: function () {
                return Code;
              }, set: function (v) {
                Code = v;
              }});
            if (Code > 0) $impl.DoFormatError(1,Fmt);
          } else Value = -1;
        };
      };
      function ReadIndex() {
        if (Fmt.charAt(ChPos - 1) !== ":") {
          ReadInteger()}
         else Value = 0;
        if (Fmt.charAt(ChPos - 1) === ":") {
          if (Value === -1) $impl.DoFormatError(2,Fmt);
          Index = Value;
          Value = -1;
          ChPos += 1;
        };
      };
      function ReadLeft() {
        if (Fmt.charAt(ChPos - 1) === "-") {
          Left = true;
          ChPos += 1;
        } else Left = false;
      };
      function ReadWidth() {
        ReadInteger();
        if (Value !== -1) {
          Width = Value;
          Value = -1;
        };
      };
      function ReadPrec() {
        if (Fmt.charAt(ChPos - 1) === ".") {
          ChPos += 1;
          ReadInteger();
          if (Value === -1) Value = 0;
          Prec = Value;
        };
      };
      Index = 255;
      Width = -1;
      Prec = -1;
      Value = -1;
      ChPos += 1;
      if (Fmt.charAt(ChPos - 1) === "%") {
        Result = "%";
        return Result;
      };
      ReadIndex();
      ReadLeft();
      ReadWidth();
      ReadPrec();
      Result = $lp3(Fmt.charAt(ChPos - 1));
      return Result;
    };
    function Checkarg(AT, err) {
      var Result = false;
      Result = false;
      if (Index === 255) {
        DoArg = ArgPos}
       else DoArg = Index;
      ArgPos = DoArg + 1;
      if ((DoArg > (rtl.length(Args) - 1)) || (Args[DoArg].VType !== AT)) {
        if (err) $impl.DoFormatError(3,Fmt);
        ArgPos -= 1;
        return Result;
      };
      Result = true;
      return Result;
    };
    Result = "";
    Len = Fmt.length;
    ChPos = 1;
    OldPos = 1;
    ArgPos = 0;
    while (ChPos <= Len) {
      while ((ChPos <= Len) && (Fmt.charAt(ChPos - 1) !== "%")) ChPos += 1;
      if (ChPos > OldPos) Result = Result + $lp2(Fmt,OldPos,ChPos - OldPos);
      if (ChPos < Len) {
        Fchar = ReadFormat();
        var $tmp = Fchar;
        if ($tmp === "D") {
          if (Checkarg(0,false)) {
            ToAdd = $mod.IntToStr(Args[DoArg].VJSValue)}
           else if (Checkarg(19,true)) ToAdd = $mod.IntToStr(Args[DoArg].VJSValue);
          Width = Math.abs(Width);
          Index = Prec - ToAdd.length;
          if (ToAdd.charAt(0) !== "-") {
            ToAdd = $lp4("0",Index) + ToAdd}
           else $lp5($lp4("0",Index + 1),{get: function () {
              return ToAdd;
            }, set: function (v) {
              ToAdd = v;
            }},2);
        } else if ($tmp === "U") {
          if (Checkarg(0,false)) {
            ToAdd = $mod.IntToStr(Args[DoArg].VJSValue >>> 0)}
           else if (Checkarg(19,true)) ToAdd = $mod.IntToStr(Args[DoArg].VJSValue);
          Width = Math.abs(Width);
          Index = Prec - ToAdd.length;
          ToAdd = $lp4("0",Index) + ToAdd;
        } else if ($tmp === "E") {
          if (Checkarg(12,false)) {
            ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue / 10000,2,3,Prec,aSettings)}
           else if (Checkarg(3,true)) ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue,2,3,Prec,aSettings);
        } else if ($tmp === "F") {
          if (Checkarg(12,false)) {
            ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue / 10000,0,9999,Prec,aSettings)}
           else if (Checkarg(3,true)) ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue,0,9999,Prec,aSettings);
        } else if ($tmp === "G") {
          if (Checkarg(12,false)) {
            ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue / 10000,1,Prec,3,aSettings)}
           else if (Checkarg(3,true)) ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue,1,Prec,3,aSettings);
        } else if ($tmp === "N") {
          if (Checkarg(12,false)) {
            ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue / 10000,3,9999,Prec,aSettings)}
           else if (Checkarg(3,true)) ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue,3,9999,Prec,aSettings);
        } else if ($tmp === "M") {
          if (Checkarg(12,false)) {
            ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue / 10000,4,9999,Prec,aSettings)}
           else if (Checkarg(3,true)) ToAdd = $mod.FloatToStrF$1(Args[DoArg].VJSValue,4,9999,Prec,aSettings);
        } else if ($tmp === "S") {
          if (Checkarg(18,false)) {
            Hs = Args[DoArg].VJSValue}
           else if (Checkarg(9,true)) Hs = Args[DoArg].VJSValue;
          Index = Hs.length;
          if ((Prec !== -1) && (Index > Prec)) Index = Prec;
          ToAdd = $lp2(Hs,1,Index);
        } else if ($tmp === "P") {
          if (Checkarg(0,false)) {
            ToAdd = $mod.IntToHex(Args[DoArg].VJSValue,8)}
           else if (Checkarg(0,true)) ToAdd = $mod.IntToHex(Args[DoArg].VJSValue,16);
        } else if ($tmp === "X") {
          if (Checkarg(0,false)) {
            vq = Args[DoArg].VJSValue;
            Index = 16;
          } else if (Checkarg(19,true)) {
            vq = Args[DoArg].VJSValue;
            Index = 31;
          };
          if (Prec > Index) {
            ToAdd = $mod.IntToHex(vq,Index)}
           else {
            Index = 1;
            while ((rtl.shl(1,Index * 4) <= vq) && (Index < 16)) Index += 1;
            if (Index > Prec) Prec = Index;
            ToAdd = $mod.IntToHex(vq,Prec);
          };
        } else if ($tmp === "%") ToAdd = "%";
        if (Width !== -1) if (ToAdd.length < Width) if (!Left) {
          ToAdd = $lp4(" ",Width - ToAdd.length) + ToAdd}
         else ToAdd = ToAdd + $lp4(" ",Width - ToAdd.length);
        Result = Result + ToAdd;
      };
      ChPos += 1;
      OldPos = ChPos;
    };
    return Result;
  };
  var Alpha = rtl.createSet(null,65,90,null,97,122,95);
  var AlphaNum = rtl.unionSet(Alpha,rtl.createSet(null,48,57));
  var Dot = ".";
  this.IsValidIdent = function (Ident, AllowDots, StrictDots) {
    var Result = false;
    var First = false;
    var I = 0;
    var Len = 0;
    Len = Ident.length;
    if (Len < 1) return false;
    First = true;
    Result = false;
    I = 1;
    while (I <= Len) {
      if (First) {
        if (!(Ident.charCodeAt(I - 1) in Alpha)) return Result;
        First = false;
      } else if (AllowDots && (Ident.charAt(I - 1) === Dot)) {
        if (StrictDots) {
          if (I >= Len) return Result;
          First = true;
        };
      } else if (!(Ident.charCodeAt(I - 1) in AlphaNum)) return Result;
      I = I + 1;
    };
    Result = true;
    return Result;
  };
  $lt13 = this.TStringReplaceFlag = {"0": "rfReplaceAll", rfReplaceAll: 0, "1": "rfIgnoreCase", rfIgnoreCase: 1};
  this.StringReplace = function (aOriginal, aSearch, aReplace, Flags) {
    var Result = "";
    var REFlags = "";
    var REString = "";
    REFlags = "";
    if (0 in Flags) REFlags = "g";
    if (1 in Flags) REFlags = REFlags + "i";
    REString = aSearch.replace(new RegExp($impl.RESpecials,"g"),"\\$1");
    Result = aOriginal.replace(new RegExp(REString,REFlags),aReplace);
    return Result;
  };
  this.QuoteString = function (aOriginal, AQuote) {
    var Result = "";
    Result = AQuote + $mod.StringReplace(aOriginal,AQuote,AQuote + AQuote,rtl.createSet(0)) + AQuote;
    return Result;
  };
  this.QuotedStr = function (s, QuoteChar) {
    var Result = "";
    Result = $mod.QuoteString(s,QuoteChar);
    return Result;
  };
  this.DeQuoteString = function (aQuoted, AQuote) {
    var Result = "";
    var i = 0;
    Result = aQuoted;
    if (Result.substring(0,1) !== AQuote) return Result;
    Result = Result.slice(1);
    i = 1;
    while (i <= Result.length) {
      if (Result.charAt(i - 1) === AQuote) {
        if ((i === Result.length) || (Result.charAt((i + 1) - 1) !== AQuote)) {
          Result = Result.slice(0,i - 1);
          return Result;
        } else Result = Result.slice(0,i - 1) + Result.slice(i);
      } else i += 1;
    };
    return Result;
  };
  this.IntToStr = function (Value) {
    var Result = "";
    Result = "" + Value;
    return Result;
  };
  this.TryStrToInt = function (S, res) {
    var Result = false;
    var NI = 0;
    Result = $mod.TryStrToInt$2(S,{get: function () {
        return NI;
      }, set: function (v) {
        NI = v;
      }});
    Result = Result && (-2147483648 <= NI) && (NI <= 2147483647);
    if (Result) res.set(NI);
    return Result;
  };
  this.TryStrToInt$2 = function (S, res) {
    var Result = false;
    Result = $impl.IntTryStrToInt(S,res,$mod.FormatSettings.DecimalSeparator);
    return Result;
  };
  this.StrToIntDef = function (S, aDef) {
    var Result = 0;
    var R = 0;
    if ($mod.TryStrToInt$2(S,{get: function () {
        return R;
      }, set: function (v) {
        R = v;
      }})) {
      Result = R}
     else Result = aDef;
    return Result;
  };
  this.StrToInt = function (S) {
    var Result = 0;
    var R = 0;
    if (!$mod.TryStrToInt$2(S,{get: function () {
        return R;
      }, set: function (v) {
        R = v;
      }})) throw $lt8.$create("CreateFmt",[rtl.getResStr($lm1,"SErrInvalidInteger"),$lp6(18,S)]);
    Result = R;
    return Result;
  };
  this.StrToInt64Def = function (S, ADefault) {
    var Result = 0;
    if (!$mod.TryStrToInt64(S,{get: function () {
        return Result;
      }, set: function (v) {
        Result = v;
      }})) Result = ADefault;
    return Result;
  };
  this.TryStrToInt64 = function (S, res) {
    var Result = false;
    var R = 0;
    Result = $mod.TryStrToInt$2(S,{get: function () {
        return R;
      }, set: function (v) {
        R = v;
      }});
    if (Result) res.set(R);
    return Result;
  };
  this.IntToHex = function (Value, Digits) {
    var Result = "";
    Result = "";
    if (Value < 0) if (Value<0) Value = 0xFFFFFFFF + Value + 1;
    Result=Value.toString(16);
    Result = $mod.UpperCase(Result);
    while (Result.length < Digits) Result = "0" + Result;
    return Result;
  };
  $lt14 = this.TFloatFormat = {"0": "ffFixed", ffFixed: 0, "1": "ffGeneral", ffGeneral: 1, "2": "ffExponent", ffExponent: 2, "3": "ffNumber", ffNumber: 3, "4": "ffCurrency", ffCurrency: 4};
  var Rounds = "123456789:";
  this.FloatToDecimal = function (Value, Precision, Decimals) {
    var Result = $lt.$new();
    var Buffer = "";
    var InfNan = "";
    var OutPos = 0;
    var error = 0;
    var N = 0;
    var L = 0;
    var C = 0;
    var GotNonZeroBeforeDot = false;
    var BeforeDot = false;
    Result.Negative = false;
    Result.Exponent = 0;
    for (C = 0; C <= 19; C++) Result.Digits[C] = "0";
    if (Value === 0) return Result;
    Buffer = rtl.floatToStr(Value,24);
    N = 1;
    L = Buffer.length;
    while (Buffer.charAt(N - 1) === " ") N += 1;
    Result.Negative = Buffer.charAt(N - 1) === "-";
    if (Result.Negative) {
      N += 1}
     else if (Buffer.charAt(N - 1) === "+") N += 1;
    if (L >= (N + 2)) {
      InfNan = $lp2(Buffer,N,3);
      if (InfNan === "Inf") {
        Result.Digits[0] = "\x00";
        Result.Exponent = 32767;
        return Result;
      };
      if (InfNan === "Nan") {
        Result.Digits[0] = "\x00";
        Result.Exponent = -32768;
        return Result;
      };
    };
    OutPos = 0;
    Result.Exponent = 0;
    BeforeDot = true;
    GotNonZeroBeforeDot = false;
    while ((L >= N) && (Buffer.charAt(N - 1) !== "E")) {
      if (Buffer.charAt(N - 1) === ".") {
        BeforeDot = false}
       else {
        if (BeforeDot) {
          Result.Exponent += 1;
          Result.Digits[OutPos] = Buffer.charAt(N - 1);
          if (Buffer.charAt(N - 1) !== "0") GotNonZeroBeforeDot = true;
        } else Result.Digits[OutPos] = Buffer.charAt(N - 1);
        OutPos += 1;
      };
      N += 1;
    };
    N += 1;
    if (N <= L) {
      $lp7($lp2(Buffer,N,(L - N) + 1),{get: function () {
          return C;
        }, set: function (v) {
          C = v;
        }},{get: function () {
          return error;
        }, set: function (v) {
          error = v;
        }});
      Result.Exponent += C;
    };
    N = OutPos;
    L = 19;
    while (N < L) {
      Result.Digits[N] = "0";
      N += 1;
    };
    if ((Decimals + Result.Exponent) < Precision) {
      N = Decimals + Result.Exponent}
     else N = Precision;
    if (N >= L) N = L - 1;
    if (N === 0) {
      if (Result.Digits[0] >= "5") {
        Result.Digits[0] = "1";
        Result.Digits[1] = "\x00";
        Result.Exponent += 1;
      } else Result.Digits[0] = "\x00";
    } else if (N > 0) {
      if (Result.Digits[N] >= "5") {
        do {
          Result.Digits[N] = "\x00";
          N -= 1;
          Result.Digits[N] = Rounds.charAt(($mod.StrToInt(Result.Digits[N]) + 1) - 1);
        } while (!((N === 0) || (Result.Digits[N] < ":")));
        if (Result.Digits[0] === ":") {
          Result.Digits[0] = "1";
          Result.Exponent += 1;
        };
      } else {
        Result.Digits[N] = "0";
        while ((N > -1) && (Result.Digits[N] === "0")) {
          Result.Digits[N] = "\x00";
          N -= 1;
        };
      };
    } else Result.Digits[0] = "\x00";
    if ((Result.Digits[0] === "\x00") && !GotNonZeroBeforeDot) {
      Result.Exponent = 0;
      Result.Negative = false;
    };
    return Result;
  };
  this.FloatToStr = function (Value) {
    var Result = "";
    Result = $mod.FloatToStr$1(Value,$mod.FormatSettings);
    return Result;
  };
  this.FloatToStr$1 = function (Value, aSettings) {
    var Result = "";
    Result = $mod.FloatToStrF$1(Value,1,15,0,aSettings);
    return Result;
  };
  this.FloatToStrF$1 = function (Value, format, Precision, Digits, aSettings) {
    var Result = "";
    var TS = "";
    var DS = "";
    DS = aSettings.DecimalSeparator;
    TS = aSettings.ThousandSeparator;
    var $tmp = format;
    if ($tmp === 1) {
      Result = $impl.FormatGeneralFloat(Value,Precision,DS)}
     else if ($tmp === 2) {
      Result = $impl.FormatExponentFloat(Value,Precision,Digits,DS)}
     else if ($tmp === 0) {
      Result = $impl.FormatFixedFloat(Value,Digits,DS)}
     else if ($tmp === 3) {
      Result = $impl.FormatNumberFloat(Value,Digits,DS,TS)}
     else if ($tmp === 4) Result = $impl.FormatNumberCurrency(Value * 10000,Digits,aSettings);
    if ((format !== 4) && (Result.length > 1) && (Result.charAt(0) === "-")) $impl.RemoveLeadingNegativeSign({get: function () {
        return Result;
      }, set: function (v) {
        Result = v;
      }},DS,TS);
    return Result;
  };
  this.FormatFloat = function (Fmt, aValue) {
    var Result = "";
    Result = $mod.FormatFloat$1(Fmt,aValue,$lt1.$clone($mod.FormatSettings));
    return Result;
  };
  var MaxPrecision = 18;
  this.FormatFloat$1 = function (Fmt, aValue, aSettings) {
    var Result = "";
    var E = 0.0;
    var FV = $lt.$new();
    var Section = "";
    var SectionLength = 0;
    var ThousandSep = false;
    var IsScientific = false;
    var DecimalPos = 0;
    var FirstDigit = 0;
    var LastDigit = 0;
    var RequestedDigits = 0;
    var ExpSize = 0;
    var Available = 0;
    var Current = 0;
    var PadZeroes = 0;
    var DistToDecimal = 0;
    function InitVars() {
      E = aValue;
      Section = "";
      SectionLength = 0;
      ThousandSep = false;
      IsScientific = false;
      DecimalPos = 0;
      FirstDigit = 2147483647;
      LastDigit = 0;
      RequestedDigits = 0;
      ExpSize = 0;
      Available = -1;
    };
    function ToResult(AChar) {
      Result = Result + AChar;
    };
    function AddToResult(AStr) {
      Result = Result + AStr;
    };
    function WriteDigit(ADigit) {
      if (ADigit === "\x00") return;
      DistToDecimal -= 1;
      if (DistToDecimal === -1) {
        AddToResult(aSettings.DecimalSeparator);
        ToResult(ADigit);
      } else {
        ToResult(ADigit);
        if (ThousandSep && ((DistToDecimal % 3) === 0) && (DistToDecimal > 1)) AddToResult(aSettings.ThousandSeparator);
      };
    };
    function GetDigit() {
      var Result = "\x00";
      Result = "\x00";
      if (Current <= Available) {
        Result = FV.Digits[Current];
        Current += 1;
      } else if (DistToDecimal <= LastDigit) {
        DistToDecimal -= 1}
       else Result = "0";
      return Result;
    };
    function CopyDigit() {
      if (PadZeroes === 0) {
        WriteDigit(GetDigit())}
       else if (PadZeroes < 0) {
        PadZeroes += 1;
        if (DistToDecimal <= FirstDigit) {
          WriteDigit("0")}
         else DistToDecimal -= 1;
      } else {
        while (PadZeroes > 0) {
          WriteDigit(GetDigit());
          PadZeroes -= 1;
        };
        WriteDigit(GetDigit());
      };
    };
    function GetSections(SP) {
      var Result = 0;
      var FL = 0;
      var i = 0;
      var C = "\x00";
      var Q = "\x00";
      var inQuote = false;
      Result = 1;
      SP.get()[1] = -1;
      SP.get()[2] = -1;
      SP.get()[3] = -1;
      inQuote = false;
      Q = "\x00";
      i = 1;
      FL = Fmt.length;
      while (i <= FL) {
        C = Fmt.charAt(i - 1);
        var $tmp = C;
        if ($tmp === ";") {
          if (!inQuote) {
            if (Result > 3) throw $lt2.$create("Create$1",["Invalid float format"]);
            SP.get()[Result] = i;
            Result += 1;
          };
        } else if (($tmp === '"') || ($tmp === "'")) {
          if (inQuote) {
            inQuote = C !== Q}
           else {
            inQuote = true;
            Q = C;
          };
        };
        i += 1;
      };
      if (SP.get()[Result] === -1) SP.get()[Result] = FL + 1;
      return Result;
    };
    function AnalyzeFormat() {
      var I = 0;
      var Len = 0;
      var Q = "\x00";
      var C = "\x00";
      var InQuote = false;
      Len = Section.length;
      I = 1;
      InQuote = false;
      Q = "\x00";
      while (I <= Len) {
        C = Section.charAt(I - 1);
        if (C.charCodeAt() in rtl.createSet(34,39)) {
          if (InQuote) {
            InQuote = C !== Q}
           else {
            InQuote = true;
            Q = C;
          };
        } else if (!InQuote) {
          var $tmp = C;
          if ($tmp === ".") {
            if (DecimalPos === 0) DecimalPos = RequestedDigits + 1}
           else if ($tmp === ",") {
            ThousandSep = aSettings.ThousandSeparator !== "\x00"}
           else if (($tmp === "e") || ($tmp === "E")) {
            I += 1;
            if (I < Len) {
              C = Section.charAt(I - 1);
              IsScientific = C.charCodeAt() in rtl.createSet(45,43);
              if (IsScientific) while ((I < Len) && (Section.charAt((I + 1) - 1) === "0")) {
                ExpSize += 1;
                I += 1;
              };
              if (ExpSize > 4) ExpSize = 4;
            };
          } else if ($tmp === "#") {
            RequestedDigits += 1}
           else if ($tmp === "0") {
            if (RequestedDigits < FirstDigit) FirstDigit = RequestedDigits + 1;
            RequestedDigits += 1;
            LastDigit = RequestedDigits + 1;
          };
        };
        I += 1;
      };
      if (DecimalPos === 0) DecimalPos = RequestedDigits + 1;
      LastDigit = DecimalPos - LastDigit;
      if (LastDigit > 0) LastDigit = 0;
      FirstDigit = DecimalPos - FirstDigit;
      if (FirstDigit < 0) FirstDigit = 0;
    };
    function ValueOutSideScope() {
      var Result = false;
      Result = ((FV.Exponent >= 18) && !IsScientific) || (FV.Exponent === 0x7FF) || (FV.Exponent === 0x800);
      return Result;
    };
    function CalcRunVars() {
      var D = 0;
      var P = 0;
      if (IsScientific) {
        P = RequestedDigits;
        D = 9999;
      } else {
        P = 18;
        D = (RequestedDigits - DecimalPos) + 1;
      };
      FV.$assign($mod.FloatToDecimal(aValue,P,D));
      DistToDecimal = DecimalPos - 1;
      if (IsScientific) {
        PadZeroes = 0}
       else {
        PadZeroes = FV.Exponent - (DecimalPos - 1);
        if (PadZeroes >= 0) DistToDecimal = FV.Exponent;
      };
      Available = -1;
      while ((Available < 18) && (FV.Digits[Available + 1] !== "\x00")) Available += 1;
    };
    function FormatExponent(ASign, aExponent) {
      var Result = "";
      Result = $mod.IntToStr(aExponent);
      Result = $lp4("0",ExpSize - Result.length) + Result;
      if (aExponent < 0) {
        Result = "-" + Result}
       else if ((aExponent > 0) && (ASign === "+")) Result = ASign + Result;
      return Result;
    };
    var I = 0;
    var S = 0;
    var C = "\x00";
    var Q = "\x00";
    var PA = [];
    var InLiteral = false;
    PA = rtl.arraySetLength(PA,0,4);
    Result = "";
    InitVars();
    if (E > 0) {
      S = 1}
     else if (E < 0) {
      S = 2}
     else S = 3;
    PA[0] = 0;
    I = GetSections({get: function () {
        return PA;
      }, set: function (v) {
        PA = v;
      }});
    if ((I < S) || ((PA[S] - PA[S - 1]) === 0)) S = 1;
    SectionLength = PA[S] - PA[S - 1] - 1;
    Section = $lp2(Fmt,PA[S - 1] + 1,SectionLength);
    Section = rtl.strSetLength(Section,SectionLength);
    AnalyzeFormat();
    CalcRunVars();
    if ((SectionLength === 0) || ValueOutSideScope()) {
      Section=E.toPrecision(15);
      Result = Section;
    };
    I = 1;
    Current = 0;
    Q = " ";
    InLiteral = false;
    if (FV.Negative && (S === 1)) ToResult("-");
    while (I <= SectionLength) {
      C = Section.charAt(I - 1);
      if (C.charCodeAt() in rtl.createSet(34,39)) {
        if (InLiteral) {
          InLiteral = C !== Q}
         else {
          InLiteral = true;
          Q = C;
        };
      } else if (InLiteral) {
        ToResult(C)}
       else {
        var $tmp = C;
        if (($tmp === "0") || ($tmp === "#")) {
          CopyDigit()}
         else if (($tmp === ".") || ($tmp === ",")) {}
        else if (($tmp === "e") || ($tmp === "E")) {
          ToResult(C);
          I += 1;
          if (I <= Section.length) {
            C = Section.charAt(I - 1);
            if (C.charCodeAt() in rtl.createSet(43,45)) {
              AddToResult(FormatExponent(C,(FV.Exponent - DecimalPos) + 1));
              while ((I < SectionLength) && (Section.charAt((I + 1) - 1) === "0")) I += 1;
            };
          };
        } else {
          ToResult(C);
        };
      };
      I += 1;
    };
    return Result;
  };
  this.TrueBoolStrs = [];
  this.FalseBoolStrs = [];
  this.BoolToStr = function (B, UseBoolStrs) {
    var Result = "";
    if (UseBoolStrs) {
      $impl.CheckBoolStrs();
      if (B) {
        Result = $mod.TrueBoolStrs[0]}
       else Result = $mod.FalseBoolStrs[0];
    } else if (B) {
      Result = "-1"}
     else Result = "0";
    return Result;
  };
  this.BoolToStr$1 = function (B, TrueS, FalseS) {
    var Result = "";
    if (B) {
      Result = TrueS}
     else Result = FalseS;
    return Result;
  };
  this.OnGetEnvironmentVariable = null;
  this.GetEnvironmentVariable = function (EnvVar) {
    var Result = "";
    if ($mod.OnGetEnvironmentVariable != null) {
      Result = $mod.OnGetEnvironmentVariable(EnvVar)}
     else Result = "";
    return Result;
  };
  rtl.recNewT(this,"TTimeStamp",function () {
    $lt15 = this;
    this.Time = 0;
    this.Date = 0;
    this.$eq = function (b) {
      return (this.Time === b.Time) && (this.Date === b.Date);
    };
    this.$assign = function (s) {
      this.Time = s.Time;
      this.Date = s.Date;
      return this;
    };
  });
  this.TimeSeparator = "\x00";
  this.DateSeparator = "\x00";
  this.ShortDateFormat = "";
  this.LongDateFormat = "";
  this.ShortTimeFormat = "";
  this.LongTimeFormat = "";
  this.DecimalSeparator = "";
  this.ThousandSeparator = "";
  this.TimeAMString = "";
  this.TimePMString = "";
  this.HoursPerDay = 24;
  this.MinsPerHour = 60;
  this.SecsPerMin = 60;
  this.MSecsPerSec = 1000;
  this.MinsPerDay = 24 * 60;
  this.SecsPerDay = 1440 * 60;
  this.MSecsPerDay = 86400 * 1000;
  this.MaxDateTime = 2958465.99999999;
  this.DateDelta = 693594;
  this.MonthDays$a$clone = function (a) {
    var b = [];
    b.length = 2;
    for (var c = 0; c < 2; c++) b[c] = a[c].slice(0);
    return b;
  };
  this.MonthDays = [[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];
  this.ShortMonthNames = rtl.arraySetLength(null,"",12);
  this.LongMonthNames = rtl.arraySetLength(null,"",12);
  this.ShortDayNames = rtl.arraySetLength(null,"",7);
  this.LongDayNames = rtl.arraySetLength(null,"",7);
  this.FormatSettings = $lt1.$new();
  this.JSDateToDateTime = function (aDate, asUTC) {
    var Result = 0.0;
    if (asUTC) {
      Result = $mod.EncodeDate(aDate.getUTCFullYear(),aDate.getUTCMonth() + 1,aDate.getUTCDate()) + $mod.EncodeTime(aDate.getUTCHours(),aDate.getUTCMinutes(),aDate.getUTCSeconds(),aDate.getUTCMilliseconds())}
     else Result = $mod.EncodeDate(aDate.getFullYear(),aDate.getMonth() + 1,aDate.getDate()) + $mod.EncodeTime(aDate.getHours(),aDate.getMinutes(),aDate.getSeconds(),aDate.getMilliseconds());
    return Result;
  };
  this.DateTimeToTimeStamp = function (DateTime) {
    var Result = $lt15.$new();
    var D = 0.0;
    D = DateTime * 86400000;
    if (D < 0) {
      D = D - 0.5}
     else D = D + 0.5;
    Result.Time = $lp8(Math.abs($lp8(D)) % 86400000);
    Result.Date = 693594 + rtl.trunc($lp8(D) / 86400000);
    return Result;
  };
  this.TryEncodeDate = function (Year, Month, Day, date) {
    var Result = false;
    var c = 0;
    var ya = 0;
    Result = (Year > 0) && (Year < 10000) && (Month >= 1) && (Month <= 12) && (Day > 0) && (Day <= $mod.MonthDays[+$mod.IsLeapYear(Year)][Month - 1]);
    if (Result) {
      if (Month > 2) {
        Month -= 3}
       else {
        Month += 9;
        Year -= 1;
      };
      c = rtl.trunc(Year / 100);
      ya = Year - (100 * c);
      date.set(((146097 * c) >>> 2) + ((1461 * ya) >>> 2) + rtl.trunc(((153 * Month) + 2) / 5) + Day);
      date.set(date.get() - 693900);
    };
    return Result;
  };
  this.TryEncodeTime = function (Hour, Min, Sec, MSec, Time) {
    var Result = false;
    Result = (Hour < 24) && (Min < 60) && (Sec < 60) && (MSec < 1000);
    if (Result) Time.set(((Hour * 3600000) + (Min * 60000) + (Sec * 1000) + MSec) / 86400000);
    return Result;
  };
  this.EncodeDate = function (Year, Month, Day) {
    var Result = 0.0;
    if (!$mod.TryEncodeDate(Year,Month,Day,{get: function () {
        return Result;
      }, set: function (v) {
        Result = v;
      }})) throw $lt8.$create("CreateFmt",["%s-%s-%s is not a valid date specification",$lp6(18,$mod.IntToStr(Year),18,$mod.IntToStr(Month),18,$mod.IntToStr(Day))]);
    return Result;
  };
  this.EncodeTime = function (Hour, Minute, Second, MilliSecond) {
    var Result = 0.0;
    if (!$mod.TryEncodeTime(Hour,Minute,Second,MilliSecond,{get: function () {
        return Result;
      }, set: function (v) {
        Result = v;
      }})) throw $lt8.$create("CreateFmt",["%s:%s:%s.%s is not a valid time specification",$lp6(18,$mod.IntToStr(Hour),18,$mod.IntToStr(Minute),18,$mod.IntToStr(Second),18,$mod.IntToStr(MilliSecond))]);
    return Result;
  };
  this.DecodeDate = function (date, Year, Month, Day) {
    var ly = 0;
    var ld = 0;
    var lm = 0;
    var j = 0;
    if (date <= -693594) {
      Year.set(0);
      Month.set(0);
      Day.set(0);
    } else {
      if (date > 0) {
        date = date + (1 / (86400000 * 2))}
       else date = date - (1 / (86400000 * 2));
      if (date > $mod.MaxDateTime) date = $mod.MaxDateTime;
      j = rtl.shl($lp8(date) + 693900,2) - 1;
      ly = rtl.trunc(j / 146097);
      j = j - (146097 * ly);
      ld = rtl.lw(j >>> 2);
      j = rtl.trunc((rtl.lw(ld << 2) + 3) / 1461);
      ld = rtl.lw(((rtl.lw(ld << 2) + 7) - (1461 * j)) >>> 2);
      lm = rtl.trunc(((5 * ld) - 3) / 153);
      ld = rtl.trunc((((5 * ld) + 2) - (153 * lm)) / 5);
      ly = (100 * ly) + j;
      if (lm < 10) {
        lm += 3}
       else {
        lm -= 9;
        ly += 1;
      };
      Year.set(ly);
      Month.set(lm);
      Day.set(ld);
    };
  };
  this.DecodeTime = function (Time, Hour, Minute, Second, MilliSecond) {
    var l = 0;
    l = $mod.DateTimeToTimeStamp(Time).Time;
    Hour.set(rtl.trunc(l / 3600000));
    l = l % 3600000;
    Minute.set(rtl.trunc(l / 60000));
    l = l % 60000;
    Second.set(rtl.trunc(l / 1000));
    l = l % 1000;
    MilliSecond.set(l);
  };
  this.Now = function () {
    var Result = 0.0;
    Result = $mod.JSDateToDateTime(new Date(),false);
    return Result;
  };
  this.IsLeapYear = function (Year) {
    var Result = false;
    Result = ((Year % 4) === 0) && (((Year % 100) !== 0) || ((Year % 400) === 0));
    return Result;
  };
  this.CurrencyFormat = 0;
  this.NegCurrFormat = 0;
  this.CurrencyDecimals = 0;
  this.CurrencyString = "";
  this.ChangeFileExt = function (FileName, Extension) {
    var Result = "";
    var i = 0;
    var EndSep = {};
    var SOF = false;
    i = FileName.length;
    EndSep = rtl.unionSet(rtl.unionSet($lm.AllowDirectorySeparators,$lm.AllowDriveSeparators),rtl.createSet($lm.ExtensionSeparator.charCodeAt()));
    while ((i > 0) && !(FileName.charCodeAt(i - 1) in EndSep)) i -= 1;
    if ((i === 0) || (FileName.charAt(i - 1) !== $lm.ExtensionSeparator)) {
      i = FileName.length + 1}
     else {
      SOF = (i === 1) || (FileName.charCodeAt(i - 1 - 1) in $lm.AllowDirectorySeparators);
      if (SOF && !$lm.FirstDotAtFileNameStartIsExtension) i = FileName.length + 1;
    };
    Result = $lp2(FileName,1,i - 1) + Extension;
    return Result;
  };
  this.ExtractFilePath = function (FileName) {
    var Result = "";
    var i = 0;
    var EndSep = {};
    i = FileName.length;
    EndSep = rtl.unionSet($lm.AllowDirectorySeparators,$lm.AllowDriveSeparators);
    while ((i > 0) && !$impl.CharInSet$1(FileName.charAt(i - 1),EndSep)) i -= 1;
    if (i > 0) {
      Result = $lp2(FileName,1,i)}
     else Result = "";
    return Result;
  };
  this.ExtractFileName = function (FileName) {
    var Result = "";
    var i = 0;
    var EndSep = {};
    i = FileName.length;
    EndSep = rtl.unionSet($lm.AllowDirectorySeparators,$lm.AllowDriveSeparators);
    while ((i > 0) && !$impl.CharInSet$1(FileName.charAt(i - 1),EndSep)) i -= 1;
    Result = $lp2(FileName,i + 1,2147483647);
    return Result;
  };
  this.ExtractFileExt = function (FileName) {
    var Result = "";
    var i = 0;
    var EndSep = {};
    var SOF = false;
    Result = "";
    i = FileName.length;
    EndSep = rtl.unionSet(rtl.unionSet($lm.AllowDirectorySeparators,$lm.AllowDriveSeparators),rtl.createSet($lm.ExtensionSeparator.charCodeAt()));
    while ((i > 0) && !$impl.CharInSet$1(FileName.charAt(i - 1),EndSep)) i -= 1;
    if ((i > 0) && (FileName.charAt(i - 1) === $lm.ExtensionSeparator)) {
      SOF = (i === 1) || (FileName.charCodeAt(i - 1 - 1) in $lm.AllowDirectorySeparators);
      if (!SOF || $lm.FirstDotAtFileNameStartIsExtension) Result = $lp2(FileName,i,2147483647);
    } else Result = "";
    return Result;
  };
  this.IncludeTrailingPathDelimiter = function (Path) {
    var Result = "";
    var l = 0;
    Result = Path;
    l = Result.length;
    if ((l === 0) || !$impl.CharInSet$1(Result.charAt(l - 1),$lm.AllowDirectorySeparators)) Result = Result + $lm.PathDelim;
    return Result;
  };
  this.TryStringToGUID = function (s, Guid) {
    var Result = false;
    var re = null;
    if (s.length !== 38) return false;
    re = new RegExp("^\\{[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\\}$");
    Result = re.test(s);
    if (!Result) {
      Guid.D1 = 0;
      return Result;
    };
    rtl.strToGUIDR(s,Guid);
    Result = true;
    return Result;
  };
  this.CreateGUID = function (GUID) {
    var Result = 0;
    function R(B) {
      var Result = 0;
      var v = 0;
      v = $lp9(256);
      while (B > 1) {
        v = (v * 256) + $lp9(256);
        B -= 1;
      };
      Result = v;
      return Result;
    };
    var I = 0;
    Result = 0;
    GUID.D1 = R(4);
    GUID.D2 = R(2);
    GUID.D3 = R(2);
    for (I = 0; I <= 7; I++) GUID.D4[I] = R(1);
    return Result;
  };
  $mod.$implcode = function () {
    $impl.DefaultShortMonthNames = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    $impl.DefaultLongMonthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
    $impl.DefaultShortDayNames = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    $impl.DefaultLongDayNames = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
    $impl.CharInSet$1 = function (Ch, CSet) {
      var Result = false;
      Result = Ch.charCodeAt() in CSet;
      return Result;
    };
    $impl.CheckBoolStrs = function () {
      if (rtl.length($mod.TrueBoolStrs) === 0) {
        $mod.TrueBoolStrs = rtl.arraySetLength($mod.TrueBoolStrs,"",1);
        $mod.TrueBoolStrs[0] = "True";
      };
      if (rtl.length($mod.FalseBoolStrs) === 0) {
        $mod.FalseBoolStrs = rtl.arraySetLength($mod.FalseBoolStrs,"",1);
        $mod.FalseBoolStrs[0] = "False";
      };
    };
    $impl.feInvalidFormat = 1;
    $impl.feMissingArgument = 2;
    $impl.feInvalidArgIndex = 3;
    $impl.DoFormatError = function (ErrCode, fmt) {
      var $tmp = ErrCode;
      if ($tmp === 1) {
        throw $lt8.$create("CreateFmt",[rtl.getResStr($lm1,"SInvalidFormat"),$lp6(18,fmt)])}
       else if ($tmp === 2) {
        throw $lt8.$create("CreateFmt",[rtl.getResStr($lm1,"SArgumentMissing"),$lp6(18,fmt)])}
       else if ($tmp === 3) throw $lt8.$create("CreateFmt",[rtl.getResStr($lm1,"SInvalidArgIndex"),$lp6(18,fmt)]);
    };
    $impl.maxdigits = 15;
    $impl.ReplaceDecimalSep = function (S, DS) {
      var Result = "";
      var P = 0;
      P = $lp10(".",S);
      if (P > 0) {
        Result = $lp2(S,1,P - 1) + DS + $lp2(S,P + 1,S.length - P)}
       else Result = S;
      return Result;
    };
    $impl.FormatGeneralFloat = function (Value, Precision, DS) {
      var Result = "";
      var P = 0;
      var PE = 0;
      var Q = 0;
      var Exponent = 0;
      if ((Precision === -1) || (Precision > 15)) Precision = 15;
      Result = rtl.floatToStr(Value,Precision + 7);
      Result = $mod.TrimLeft(Result);
      P = $lp10(".",Result);
      if (P === 0) return Result;
      PE = $lp10("E",Result);
      if (PE === 0) {
        Result = $impl.ReplaceDecimalSep(Result,DS);
        return Result;
      };
      Q = PE + 2;
      Exponent = 0;
      while (Q <= Result.length) {
        Exponent = ((Exponent * 10) + Result.charCodeAt(Q - 1)) - 48;
        Q += 1;
      };
      if (Result.charAt((PE + 1) - 1) === "-") Exponent = -Exponent;
      if (((P + Exponent) < PE) && (Exponent > -6)) {
        Result = rtl.strSetLength(Result,PE - 1);
        if (Exponent >= 0) {
          for (var $l = 0, $end = Exponent - 1; $l <= $end; $l++) {
            Q = $l;
            Result = rtl.setCharAt(Result,P - 1,Result.charAt((P + 1) - 1));
            P += 1;
          };
          Result = rtl.setCharAt(Result,P - 1,".");
          P = 1;
          if (Result.charAt(P - 1) === "-") P += 1;
          while ((Result.charAt(P - 1) === "0") && (P < Result.length) && ($lp2(Result,P + 1,DS.length) !== DS)) $lp11({get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},P,1);
        } else {
          $lp5($lp2("00000",1,-Exponent),{get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},P - 1);
          Result = rtl.setCharAt(Result,P - Exponent - 1,Result.charAt(P - Exponent - 1 - 1));
          Result = rtl.setCharAt(Result,P - 1,".");
          if (Exponent !== -1) Result = rtl.setCharAt(Result,P - Exponent - 1 - 1,"0");
        };
        Q = Result.length;
        while ((Q > 0) && (Result.charAt(Q - 1) === "0")) Q -= 1;
        if (Result.charAt(Q - 1) === ".") Q -= 1;
        if ((Q === 0) || ((Q === 1) && (Result.charAt(0) === "-"))) {
          Result = "0"}
         else Result = rtl.strSetLength(Result,Q);
      } else {
        while (Result.charAt(PE - 1 - 1) === "0") {
          $lp11({get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},PE - 1,1);
          PE -= 1;
        };
        if (Result.charAt(PE - 1 - 1) === DS) {
          $lp11({get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},PE - 1,1);
          PE -= 1;
        };
        if (Result.charAt((PE + 1) - 1) === "+") {
          $lp11({get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},PE + 1,1)}
         else PE += 1;
        while (Result.charAt((PE + 1) - 1) === "0") $lp11({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }},PE + 1,1);
      };
      Result = $impl.ReplaceDecimalSep(Result,DS);
      return Result;
    };
    $impl.FormatExponentFloat = function (Value, Precision, Digits, DS) {
      var Result = "";
      var P = 0;
      DS = $mod.FormatSettings.DecimalSeparator;
      if ((Precision === -1) || (Precision > 15)) Precision = 15;
      Result = rtl.floatToStr(Value,Precision + 7);
      while (Result.charAt(0) === " ") $lp11({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }},1,1);
      P = $lp10("E",Result);
      if (P === 0) {
        Result = $impl.ReplaceDecimalSep(Result,DS);
        return Result;
      };
      P += 2;
      if (Digits > 4) Digits = 4;
      Digits = (Result.length - P - Digits) + 1;
      if (Digits < 0) {
        $lp5($lp2("0000",1,-Digits),{get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }},P)}
       else while ((Digits > 0) && (Result.charAt(P - 1) === "0")) {
        $lp11({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }},P,1);
        if (P > Result.length) {
          $lp11({get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},P - 2,2);
          break;
        };
        Digits -= 1;
      };
      Result = $impl.ReplaceDecimalSep(Result,DS);
      return Result;
    };
    $impl.FormatFixedFloat = function (Value, Digits, DS) {
      var Result = "";
      if (Digits === -1) {
        Digits = 2}
       else if (Digits > 18) Digits = 18;
      Result = rtl.floatToStr(Value,0,Digits);
      if ((Result !== "") && (Result.charAt(0) === " ")) $lp11({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }},1,1);
      Result = $impl.ReplaceDecimalSep(Result,DS);
      return Result;
    };
    $impl.FormatNumberFloat = function (Value, Digits, DS, TS) {
      var Result = "";
      var P = 0;
      if (Digits === -1) {
        Digits = 2}
       else if (Digits > 15) Digits = 15;
      Result = rtl.floatToStr(Value,0,Digits);
      if ((Result !== "") && (Result.charAt(0) === " ")) $lp11({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }},1,1);
      P = $lp10(".",Result);
      if (P <= 0) P = Result.length + 1;
      Result = $impl.ReplaceDecimalSep(Result,DS);
      P -= 3;
      if ((TS !== "") && (TS !== "\x00")) while (P > 1) {
        if (Result.charAt(P - 1 - 1) !== "-") $lp5(TS,{get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }},P);
        P -= 3;
      };
      return Result;
    };
    $impl.RemoveLeadingNegativeSign = function (AValue, DS, aThousandSeparator) {
      var Result = false;
      var i = 0;
      var TS = "";
      var StartPos = 0;
      Result = false;
      StartPos = 2;
      TS = aThousandSeparator;
      for (var $l = StartPos, $end = AValue.get().length; $l <= $end; $l++) {
        i = $l;
        Result = (AValue.get().charCodeAt(i - 1) in rtl.createSet(48,DS.charCodeAt(),69,43)) || (AValue.get().charAt(i - 1) === TS);
        if (!Result) break;
      };
      if (Result && (AValue.get().charAt(0) === "-")) $lp11(AValue,1,1);
      return Result;
    };
    $impl.FormatNumberCurrency = function (Value, Digits, aSettings) {
      var Result = "";
      var Negative = false;
      var P = 0;
      var CS = "";
      var DS = "";
      var TS = "";
      DS = aSettings.DecimalSeparator;
      TS = aSettings.ThousandSeparator;
      CS = aSettings.CurrencyString;
      if (Digits === -1) {
        Digits = aSettings.CurrencyDecimals}
       else if (Digits > 18) Digits = 18;
      Result = rtl.floatToStr(Value / 10000,0,Digits);
      Negative = Result.charAt(0) === "-";
      if (Negative) $lp11({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }},1,1);
      P = $lp10(".",Result);
      if (TS !== "") {
        if (P !== 0) {
          Result = $impl.ReplaceDecimalSep(Result,DS)}
         else P = Result.length + 1;
        P -= 3;
        while (P > 1) {
          $lp5(TS,{get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},P);
          P -= 3;
        };
      };
      if (Negative) $impl.RemoveLeadingNegativeSign({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }},DS,TS);
      if (!Negative) {
        var $tmp = aSettings.CurrencyFormat;
        if ($tmp === 0) {
          Result = CS + Result}
         else if ($tmp === 1) {
          Result = Result + CS}
         else if ($tmp === 2) {
          Result = CS + " " + Result}
         else if ($tmp === 3) Result = Result + " " + CS;
      } else {
        var $tmp1 = aSettings.NegCurrFormat;
        if ($tmp1 === 0) {
          Result = "(" + CS + Result + ")"}
         else if ($tmp1 === 1) {
          Result = "-" + CS + Result}
         else if ($tmp1 === 2) {
          Result = CS + "-" + Result}
         else if ($tmp1 === 3) {
          Result = CS + Result + "-"}
         else if ($tmp1 === 4) {
          Result = "(" + Result + CS + ")"}
         else if ($tmp1 === 5) {
          Result = "-" + Result + CS}
         else if ($tmp1 === 6) {
          Result = Result + "-" + CS}
         else if ($tmp1 === 7) {
          Result = Result + CS + "-"}
         else if ($tmp1 === 8) {
          Result = "-" + Result + " " + CS}
         else if ($tmp1 === 9) {
          Result = "-" + CS + " " + Result}
         else if ($tmp1 === 10) {
          Result = Result + " " + CS + "-"}
         else if ($tmp1 === 11) {
          Result = CS + " " + Result + "-"}
         else if ($tmp1 === 12) {
          Result = CS + " " + "-" + Result}
         else if ($tmp1 === 13) {
          Result = Result + "-" + " " + CS}
         else if ($tmp1 === 14) {
          Result = "(" + CS + " " + Result + ")"}
         else if ($tmp1 === 15) Result = "(" + Result + " " + CS + ")";
      };
      return Result;
    };
    $impl.RESpecials = "([\\$\\+\\[\\]\\(\\)\\\\\\.\\*\\^\\?\\|])";
    $impl.IntTryStrToInt = function (S, res, aSep) {
      var Result = false;
      var Radix = 10;
      var N = "";
      var J = undefined;
      N = S;
      if (($lp10(aSep,N) !== 0) || ($lp10(".",N) !== 0)) return false;
      var $tmp = $lp2(N,1,1);
      if ($tmp === "$") {
        Radix = 16}
       else if ($tmp === "&") {
        Radix = 8}
       else if ($tmp === "%") Radix = 2;
      if ((Radix !== 16) && ($lp10("e",$mod.LowerCase(N)) !== 0)) return false;
      if (Radix !== 10) $lp11({get: function () {
          return N;
        }, set: function (v) {
          N = v;
        }},1,1);
      J = parseInt(N,Radix);
      Result = !isNaN(J);
      if (Result) res.set(rtl.trunc(J));
      return Result;
    };
    $impl.InitGlobalFormatSettings = function () {
      $mod.FormatSettings.$assign($lt1.Create());
      $mod.TimeSeparator = $mod.FormatSettings.TimeSeparator;
      $mod.DateSeparator = $mod.FormatSettings.DateSeparator;
      $mod.ShortDateFormat = $mod.FormatSettings.ShortDateFormat;
      $mod.LongDateFormat = $mod.FormatSettings.LongDateFormat;
      $mod.ShortTimeFormat = $mod.FormatSettings.ShortTimeFormat;
      $mod.LongTimeFormat = $mod.FormatSettings.LongTimeFormat;
      $mod.DecimalSeparator = $mod.FormatSettings.DecimalSeparator;
      $mod.ThousandSeparator = $mod.FormatSettings.ThousandSeparator;
      $mod.TimeAMString = $mod.FormatSettings.TimeAMString;
      $mod.TimePMString = $mod.FormatSettings.TimePMString;
      $mod.CurrencyFormat = $mod.FormatSettings.CurrencyFormat;
      $mod.NegCurrFormat = $mod.FormatSettings.NegCurrFormat;
      $mod.CurrencyDecimals = $mod.FormatSettings.CurrencyDecimals;
      $mod.CurrencyString = $mod.FormatSettings.CurrencyString;
    };
    $impl.DoClassRef = function (C) {
      if (C === null) ;
    };
  };
  $mod.$init = function () {
    (function () {
      $impl.InitGlobalFormatSettings();
    })();
    $impl.DoClassRef($lt7);
    $impl.DoClassRef($lt12);
    $impl.DoClassRef($lt11);
    $mod.ShortMonthNames = $impl.DefaultShortMonthNames.slice(0);
    $mod.LongMonthNames = $impl.DefaultLongMonthNames.slice(0);
    $mod.ShortDayNames = $impl.DefaultShortDayNames.slice(0);
    $mod.LongDayNames = $impl.DefaultLongDayNames.slice(0);
  };
},[]);
rtl.module("Classes",["System","RTLConsts","Types","SysUtils","JS"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lt19 = null;
  var $lt20 = null;
  var $lm = pas.SysUtils;
  var $lt21 = $lm.Exception;
  var $lm1 = pas.System;
  var $lt22 = $lm1.TObject;
  var $lm2 = pas.RTLConsts;
  var $lp = $lm1.VarRecs;
  var $lp1 = $lm1.Assigned;
  var $lp2 = $lm.FreeAndNil;
  var $lt23 = $lm.EConvertError;
  var $lp3 = $lm.IntToStr;
  var $lp4 = $lm.CompareText;
  var $lp5 = $lm.StringReplace;
  var $lp6 = $lm1.Copy;
  var $lp7 = $lm1.Pos;
  var $lp8 = $lm1.Random;
  var $lp9 = $lm.CompareStr;
  var $lp10 = $lm.IsValidIdent;
  rtl.createClass(this,"EListError",$lt21,function () {
    $lt = this;
  });
  rtl.createClass(this,"EStringListError",$lt,function () {
    $lt1 = this;
  });
  rtl.createClass(this,"EComponentError",$lt21,function () {
    $lt2 = this;
  });
  $lt3 = this.TListAssignOp = {"0": "laCopy", laCopy: 0, "1": "laAnd", laAnd: 1, "2": "laOr", laOr: 2, "3": "laXor", laXor: 3, "4": "laSrcUnique", laSrcUnique: 4, "5": "laDestUnique", laDestUnique: 5};
  rtl.createClass(this,"TFPList",$lt22,function () {
    $lt4 = this;
    this.$init = function () {
      $lt22.$init.call(this);
      this.FList = [];
      this.FCount = 0;
      this.FCapacity = 0;
    };
    this.$final = function () {
      this.FList = undefined;
      $lt22.$final.call(this);
    };
    this.CopyMove = function (aList) {
      var r = 0;
      this.Clear();
      for (var $l = 0, $end = aList.FCount - 1; $l <= $end; $l++) {
        r = $l;
        this.Add(aList.Get(r));
      };
    };
    this.MergeMove = function (aList) {
      var r = 0;
      for (var $l = 0, $end = aList.FCount - 1; $l <= $end; $l++) {
        r = $l;
        if (this.IndexOf(aList.Get(r)) < 0) this.Add(aList.Get(r));
      };
    };
    this.DoCopy = function (ListA, ListB) {
      if (ListB != null) {
        this.CopyMove(ListB)}
       else this.CopyMove(ListA);
    };
    this.DoSrcUnique = function (ListA, ListB) {
      var r = 0;
      if (ListB != null) {
        this.Clear();
        for (var $l = 0, $end = ListA.FCount - 1; $l <= $end; $l++) {
          r = $l;
          if (ListB.IndexOf(ListA.Get(r)) < 0) this.Add(ListA.Get(r));
        };
      } else {
        for (var $l1 = this.FCount - 1; $l1 >= 0; $l1--) {
          r = $l1;
          if (ListA.IndexOf(this.Get(r)) >= 0) this.Delete(r);
        };
      };
    };
    this.DoAnd = function (ListA, ListB) {
      var r = 0;
      if (ListB != null) {
        this.Clear();
        for (var $l = 0, $end = ListA.FCount - 1; $l <= $end; $l++) {
          r = $l;
          if (ListB.IndexOf(ListA.Get(r)) >= 0) this.Add(ListA.Get(r));
        };
      } else {
        for (var $l1 = this.FCount - 1; $l1 >= 0; $l1--) {
          r = $l1;
          if (ListA.IndexOf(this.Get(r)) < 0) this.Delete(r);
        };
      };
    };
    this.DoDestUnique = function (ListA, ListB) {
      var $Self = this;
      function MoveElements(Src, Dest) {
        var r = 0;
        $Self.Clear();
        for (var $l = 0, $end = Src.FCount - 1; $l <= $end; $l++) {
          r = $l;
          if (Dest.IndexOf(Src.Get(r)) < 0) $Self.Add(Src.Get(r));
        };
      };
      var Dest = null;
      if (ListB != null) {
        MoveElements(ListB,ListA)}
       else Dest = $lt4.$create("Create");
      try {
        Dest.CopyMove($Self);
        MoveElements(ListA,Dest);
      } finally {
        Dest.$destroy("Destroy");
      };
    };
    this.DoOr = function (ListA, ListB) {
      if (ListB != null) {
        this.CopyMove(ListA);
        this.MergeMove(ListB);
      } else this.MergeMove(ListA);
    };
    this.DoXOr = function (ListA, ListB) {
      var r = 0;
      var l = null;
      if (ListB != null) {
        this.Clear();
        for (var $l = 0, $end = ListA.FCount - 1; $l <= $end; $l++) {
          r = $l;
          if (ListB.IndexOf(ListA.Get(r)) < 0) this.Add(ListA.Get(r));
        };
        for (var $l1 = 0, $end1 = ListB.FCount - 1; $l1 <= $end1; $l1++) {
          r = $l1;
          if (ListA.IndexOf(ListB.Get(r)) < 0) this.Add(ListB.Get(r));
        };
      } else {
        l = $lt4.$create("Create");
        try {
          l.CopyMove(this);
          for (var $l2 = this.FCount - 1; $l2 >= 0; $l2--) {
            r = $l2;
            if (ListA.IndexOf(this.Get(r)) >= 0) this.Delete(r);
          };
          for (var $l3 = 0, $end2 = ListA.FCount - 1; $l3 <= $end2; $l3++) {
            r = $l3;
            if (l.IndexOf(ListA.Get(r)) < 0) this.Add(ListA.Get(r));
          };
        } finally {
          l.$destroy("Destroy");
        };
      };
    };
    this.Get = function (Index) {
      var Result = undefined;
      if ((Index < 0) || (Index >= this.FCount)) this.RaiseIndexError(Index);
      Result = this.FList[Index];
      return Result;
    };
    this.Put = function (Index, Item) {
      if ((Index < 0) || (Index >= this.FCount)) this.RaiseIndexError(Index);
      this.FList[Index] = Item;
    };
    this.SetCapacity = function (NewCapacity) {
      if (NewCapacity < this.FCount) this.$class.Error(rtl.getResStr($lm2,"SListCapacityError"),"" + NewCapacity);
      if (NewCapacity === this.FCapacity) return;
      this.FList = rtl.arraySetLength(this.FList,undefined,NewCapacity);
      this.FCapacity = NewCapacity;
    };
    this.SetCount = function (NewCount) {
      if (NewCount < 0) this.$class.Error(rtl.getResStr($lm2,"SListCountError"),"" + NewCount);
      if (NewCount > this.FCount) {
        if (NewCount > this.FCapacity) this.SetCapacity(NewCount);
      };
      this.FCount = NewCount;
    };
    this.RaiseIndexError = function (Index) {
      this.$class.Error(rtl.getResStr($lm2,"SListIndexError"),"" + Index);
    };
    this.Destroy = function () {
      this.Clear();
      $lt22.Destroy.call(this);
    };
    this.Add = function (Item) {
      var Result = 0;
      if (this.FCount === this.FCapacity) this.Expand();
      this.FList[this.FCount] = Item;
      Result = this.FCount;
      this.FCount += 1;
      return Result;
    };
    this.Clear = function () {
      if (rtl.length(this.FList) > 0) {
        this.SetCount(0);
        this.SetCapacity(0);
      };
    };
    this.Delete = function (Index) {
      if ((Index < 0) || (Index >= this.FCount)) this.$class.Error(rtl.getResStr($lm2,"SListIndexError"),"" + Index);
      this.FCount = this.FCount - 1;
      this.FList.splice(Index,1);
      this.FCapacity -= 1;
    };
    this.Error = function (Msg, Data) {
      throw $lt.$create("CreateFmt",[Msg,$lp(18,Data)]);
    };
    this.Expand = function () {
      var Result = null;
      var IncSize = 0;
      if (this.FCount < this.FCapacity) return this;
      IncSize = 4;
      if (this.FCapacity > 3) IncSize = IncSize + 4;
      if (this.FCapacity > 8) IncSize = IncSize + 8;
      if (this.FCapacity > 127) IncSize += this.FCapacity >>> 2;
      this.SetCapacity(this.FCapacity + IncSize);
      Result = this;
      return Result;
    };
    this.IndexOf = function (Item) {
      var Result = 0;
      var C = 0;
      Result = 0;
      C = this.FCount;
      while ((Result < C) && (this.FList[Result] != Item)) Result += 1;
      if (Result >= C) Result = -1;
      return Result;
    };
    this.IndexOfItem = function (Item, Direction) {
      var Result = 0;
      if (Direction === 0) {
        Result = this.IndexOf(Item)}
       else {
        Result = this.FCount - 1;
        while ((Result >= 0) && (this.FList[Result] != Item)) Result = Result - 1;
      };
      return Result;
    };
    this.Insert = function (Index, Item) {
      if ((Index < 0) || (Index > this.FCount)) this.$class.Error(rtl.getResStr($lm2,"SListIndexError"),"" + Index);
      this.FList.splice(Index,0,Item);
      this.FCapacity += 1;
      this.FCount += 1;
    };
    this.Last = function () {
      var Result = undefined;
      if (this.FCount === 0) {
        Result = null}
       else Result = this.Get(this.FCount - 1);
      return Result;
    };
    this.Move = function (CurIndex, NewIndex) {
      var Temp = undefined;
      if ((CurIndex < 0) || (CurIndex > (this.FCount - 1))) this.$class.Error(rtl.getResStr($lm2,"SListIndexError"),"" + CurIndex);
      if ((NewIndex < 0) || (NewIndex > (this.FCount - 1))) this.$class.Error(rtl.getResStr($lm2,"SListIndexError"),"" + NewIndex);
      if (CurIndex === NewIndex) return;
      Temp = this.FList[CurIndex];
      this.FList.splice(CurIndex,1);
      this.FList.splice(NewIndex,0,Temp);
    };
    this.Assign = function (ListA, AOperator, ListB) {
      var $tmp = AOperator;
      if ($tmp === 0) {
        this.DoCopy(ListA,ListB)}
       else if ($tmp === 4) {
        this.DoSrcUnique(ListA,ListB)}
       else if ($tmp === 1) {
        this.DoAnd(ListA,ListB)}
       else if ($tmp === 5) {
        this.DoDestUnique(ListA,ListB)}
       else if ($tmp === 2) {
        this.DoOr(ListA,ListB)}
       else if ($tmp === 3) this.DoXOr(ListA,ListB);
    };
    this.Remove = function (Item) {
      var Result = 0;
      Result = this.IndexOf(Item);
      if (Result !== -1) this.Delete(Result);
      return Result;
    };
    this.Sort = function (Compare) {
      var $Self = this;
      if (!(rtl.length(this.FList) > 0) || (this.FCount < 2)) return;
      $impl.QuickSort(rtl.arrayRef(this.FList),0,this.FCount - 1,function (Item1, Item2) {
        var Result = 0;
        Result = Compare(Item1,Item2);
        return Result;
      });
    };
  });
  $lt5 = this.TListNotification = {"0": "lnAdded", lnAdded: 0, "1": "lnExtracted", lnExtracted: 1, "2": "lnDeleted", lnDeleted: 2};
  rtl.createClass(this,"TList",$lt22,function () {
    $lt6 = this;
    this.$init = function () {
      $lt22.$init.call(this);
      this.FList = null;
    };
    this.$final = function () {
      this.FList = undefined;
      $lt22.$final.call(this);
    };
    this.Get = function (Index) {
      var Result = undefined;
      Result = this.FList.Get(Index);
      return Result;
    };
    this.Notify = function (aValue, Action) {
      if ($lp1(aValue)) ;
      if (Action === 1) ;
    };
    this.GetCount = function () {
      var Result = 0;
      Result = this.FList.FCount;
      return Result;
    };
    this.Create$1 = function () {
      $lt22.Create.call(this);
      this.FList = $lt4.$create("Create");
      return this;
    };
    this.Destroy = function () {
      if (this.FList != null) this.Clear();
      $lp2({p: this, get: function () {
          return this.p.FList;
        }, set: function (v) {
          this.p.FList = v;
        }});
    };
    this.Add = function (Item) {
      var Result = 0;
      Result = this.FList.Add(Item);
      if ($lp1(Item)) this.Notify(Item,0);
      return Result;
    };
    this.Clear = function () {
      while (this.FList.FCount > 0) this.Delete(this.GetCount() - 1);
    };
    this.Delete = function (Index) {
      var V = undefined;
      V = this.FList.Get(Index);
      this.FList.Delete(Index);
      if ($lp1(V)) this.Notify(V,2);
    };
  });
  rtl.createClass(this,"TPersistent",$lt22,function () {
    $lt7 = this;
    this.AssignError = function (Source) {
      var SourceName = "";
      if (Source !== null) {
        SourceName = Source.$classname}
       else SourceName = "Nil";
      throw $lt23.$create("Create$1",["Cannot assign a " + SourceName + " to a " + this.$classname + "."]);
    };
    this.AssignTo = function (Dest) {
      Dest.AssignError(this);
    };
    this.Assign = function (Source) {
      if (Source !== null) {
        Source.AssignTo(this)}
       else this.AssignError(null);
    };
  });
  rtl.createClass(this,"TStringsEnumerator",$lt22,function () {
    $lt8 = this;
    this.$init = function () {
      $lt22.$init.call(this);
      this.FStrings = null;
      this.FPosition = 0;
    };
    this.$final = function () {
      this.FStrings = undefined;
      $lt22.$final.call(this);
    };
    this.Create$1 = function (AStrings) {
      $lt22.Create.call(this);
      this.FStrings = AStrings;
      this.FPosition = -1;
      return this;
    };
    this.GetCurrent = function () {
      var Result = "";
      Result = this.FStrings.Get(this.FPosition);
      return Result;
    };
    this.MoveNext = function () {
      var Result = false;
      this.FPosition += 1;
      Result = this.FPosition < this.FStrings.GetCount();
      return Result;
    };
  });
  rtl.createClass(this,"TStrings",$lt7,function () {
    $lt9 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FSpecialCharsInited = false;
      this.FAlwaysQuote = false;
      this.FQuoteChar = "\x00";
      this.FDelimiter = "\x00";
      this.FNameValueSeparator = "\x00";
      this.FUpdateCount = 0;
      this.FLBS = 0;
      this.FSkipLastLineBreak = false;
      this.FStrictDelimiter = false;
      this.FLineBreak = "";
    };
    this.GetValue = function (Name) {
      var Result = "";
      var L = 0;
      var N = "";
      Result = "";
      L = this.IndexOfName(Name);
      if (L !== -1) this.GetNameValue(L,{get: function () {
          return N;
        }, set: function (v) {
          N = v;
        }},{get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }});
      return Result;
    };
    this.SetDelimiter = function (c) {
      this.CheckSpecialChars();
      this.FDelimiter = c;
    };
    this.SetNameValueSeparator = function (c) {
      this.CheckSpecialChars();
      this.FNameValueSeparator = c;
    };
    this.GetSkipLastLineBreak = function () {
      var Result = false;
      this.CheckSpecialChars();
      Result = this.FSkipLastLineBreak;
      return Result;
    };
    this.Error = function (Msg, Data) {
      throw $lt1.$create("CreateFmt",[Msg,$lp(18,$lp3(Data))]);
    };
    this.GetCapacity = function () {
      var Result = 0;
      Result = this.GetCount();
      return Result;
    };
    this.GetObject = function (Index) {
      var Result = null;
      if (Index === 0) ;
      Result = null;
      return Result;
    };
    this.GetTextStr = function () {
      var Result = "";
      var I = 0;
      var S = "";
      var NL = "";
      this.CheckSpecialChars();
      if (this.FLineBreak !== $lm1.sLineBreak) {
        NL = this.FLineBreak}
       else {
        var $tmp = this.FLBS;
        if ($tmp === 0) {
          NL = "\n"}
         else if ($tmp === 1) {
          NL = "\r\n"}
         else if ($tmp === 2) NL = "\r";
      };
      Result = "";
      for (var $l = 0, $end = this.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        S = this.Get(I);
        Result = Result + S;
        if ((I < (this.GetCount() - 1)) || !this.GetSkipLastLineBreak()) Result = Result + NL;
      };
      return Result;
    };
    this.PutObject = function (Index, AObject) {
      if (Index === 0) return;
      if (AObject === null) return;
    };
    this.SetUpdateState = function (Updating) {
      if (Updating) ;
    };
    this.DoCompareText = function (s1, s2) {
      var Result = 0;
      Result = $lp4(s1,s2);
      return Result;
    };
    this.SetDelimitedText = function (AValue) {
      var i = 0;
      var j = 0;
      var aNotFirst = false;
      this.CheckSpecialChars();
      this.BeginUpdate();
      i = 1;
      j = 1;
      aNotFirst = false;
      try {
        this.Clear();
        if (this.FStrictDelimiter) {
          while (i <= AValue.length) {
            if (aNotFirst && (i <= AValue.length) && (AValue.charAt(i - 1) === this.FDelimiter)) i += 1;
            if (i <= AValue.length) {
              if (AValue.charAt(i - 1) === this.FQuoteChar) {
                j = i + 1;
                while ((j <= AValue.length) && ((AValue.charAt(j - 1) !== this.FQuoteChar) || (((j + 1) <= AValue.length) && (AValue.charAt((j + 1) - 1) === this.FQuoteChar)))) {
                  if ((j <= AValue.length) && (AValue.charAt(j - 1) === this.FQuoteChar)) {
                    j += 2}
                   else j += 1;
                };
                this.Add($lp5($lp6(AValue,i + 1,j - i - 1),this.FQuoteChar + this.FQuoteChar,this.FQuoteChar,rtl.createSet(0)));
                i = j + 1;
              } else {
                j = i;
                while ((j <= AValue.length) && (AValue.charAt(j - 1) !== this.FDelimiter)) j += 1;
                this.Add($lp6(AValue,i,j - i));
                i = j;
              };
            } else {
              if (aNotFirst) this.Add("");
            };
            aNotFirst = true;
          };
        } else {
          while (i <= AValue.length) {
            if (aNotFirst && (i <= AValue.length) && (AValue.charAt(i - 1) === this.FDelimiter)) i += 1;
            while ((i <= AValue.length) && (AValue.charCodeAt(i - 1) <= 32)) i += 1;
            if (i <= AValue.length) {
              if (AValue.charAt(i - 1) === this.FQuoteChar) {
                j = i + 1;
                while ((j <= AValue.length) && ((AValue.charAt(j - 1) !== this.FQuoteChar) || (((j + 1) <= AValue.length) && (AValue.charAt((j + 1) - 1) === this.FQuoteChar)))) {
                  if ((j <= AValue.length) && (AValue.charAt(j - 1) === this.FQuoteChar)) {
                    j += 2}
                   else j += 1;
                };
                this.Add($lp5($lp6(AValue,i + 1,j - i - 1),this.FQuoteChar + this.FQuoteChar,this.FQuoteChar,rtl.createSet(0)));
                i = j + 1;
              } else {
                j = i;
                while ((j <= AValue.length) && (AValue.charCodeAt(j - 1) > 32) && (AValue.charAt(j - 1) !== this.FDelimiter)) j += 1;
                this.Add($lp6(AValue,i,j - i));
                i = j;
              };
            } else {
              if (aNotFirst) this.Add("");
            };
            while ((i <= AValue.length) && (AValue.charCodeAt(i - 1) <= 32)) i += 1;
            aNotFirst = true;
          };
        };
      } finally {
        this.EndUpdate();
      };
    };
    this.CheckSpecialChars = function () {
      if (!this.FSpecialCharsInited) {
        this.FQuoteChar = '"';
        this.FDelimiter = ",";
        this.FNameValueSeparator = "=";
        this.FLBS = $lm1.DefaultTextLineBreakStyle;
        this.FSpecialCharsInited = true;
        this.FLineBreak = $lm1.sLineBreak;
      };
    };
    this.Create$1 = function () {
      $lt22.Create.call(this);
      this.FAlwaysQuote = false;
      return this;
    };
    this.Destroy = function () {
      $lt22.Destroy.call(this);
    };
    this.Add = function (S) {
      var Result = 0;
      Result = this.GetCount();
      this.Insert(this.GetCount(),S);
      return Result;
    };
    this.AddObject = function (S, AObject) {
      var Result = 0;
      Result = this.Add(S);
      this.PutObject(Result,AObject);
      return Result;
    };
    this.AddStrings = function (TheStrings) {
      var Runner = 0;
      for (var $l = 0, $end = TheStrings.GetCount() - 1; $l <= $end; $l++) {
        Runner = $l;
        this.AddObject(TheStrings.Get(Runner),TheStrings.GetObject(Runner));
      };
    };
    this.Assign = function (Source) {
      var S = null;
      if ($lt9.isPrototypeOf(Source)) {
        S = Source;
        this.BeginUpdate();
        try {
          this.Clear();
          this.FSpecialCharsInited = S.FSpecialCharsInited;
          this.FQuoteChar = S.FQuoteChar;
          this.FDelimiter = S.FDelimiter;
          this.FNameValueSeparator = S.FNameValueSeparator;
          this.FLBS = S.FLBS;
          this.FLineBreak = S.FLineBreak;
          this.AddStrings(S);
        } finally {
          this.EndUpdate();
        };
      } else $lt7.Assign.call(this,Source);
    };
    this.BeginUpdate = function () {
      if (this.FUpdateCount === 0) this.SetUpdateState(true);
      this.FUpdateCount += 1;
    };
    this.EndUpdate = function () {
      if (this.FUpdateCount > 0) this.FUpdateCount -= 1;
      if (this.FUpdateCount === 0) this.SetUpdateState(false);
    };
    this.GetEnumerator = function () {
      var Result = null;
      Result = $lt8.$create("Create$1",[this]);
      return Result;
    };
    this.IndexOf = function (S) {
      var Result = 0;
      Result = 0;
      while ((Result < this.GetCount()) && (this.DoCompareText(this.Get(Result),S) !== 0)) Result = Result + 1;
      if (Result === this.GetCount()) Result = -1;
      return Result;
    };
    this.IndexOfName = function (Name) {
      var Result = 0;
      var len = 0;
      var S = "";
      this.CheckSpecialChars();
      Result = 0;
      while (Result < this.GetCount()) {
        S = this.Get(Result);
        len = $lp7(this.FNameValueSeparator,S) - 1;
        if ((len >= 0) && (this.DoCompareText(Name,$lp6(S,1,len)) === 0)) return Result;
        Result += 1;
      };
      Result = -1;
      return Result;
    };
    this.GetNameValue = function (Index, AName, AValue) {
      var L = 0;
      this.CheckSpecialChars();
      AValue.set(this.Get(Index));
      L = $lp7(this.FNameValueSeparator,AValue.get());
      if (L !== 0) {
        AName.set($lp6(AValue.get(),1,L - 1));
        AValue.set($lp6(AValue.get(),L + 1,AValue.get().length - L));
      } else AName.set("");
    };
  });
  rtl.recNewT(this,"TStringItem",function () {
    $lt10 = this;
    this.FString = "";
    this.FObject = null;
    this.$eq = function (b) {
      return (this.FString === b.FString) && (this.FObject === b.FObject);
    };
    this.$assign = function (s) {
      this.FString = s.FString;
      this.FObject = s.FObject;
      return this;
    };
  });
  $lt11 = this.TStringsSortStyle = {"0": "sslNone", sslNone: 0, "1": "sslUser", sslUser: 1, "2": "sslAuto", sslAuto: 2};
  rtl.createClass(this,"TStringList",$lt9,function () {
    $lt12 = this;
    this.$init = function () {
      $lt9.$init.call(this);
      this.FList = [];
      this.FCount = 0;
      this.FOnChange = null;
      this.FOnChanging = null;
      this.FDuplicates = 0;
      this.FCaseSensitive = false;
      this.FForceSort = false;
      this.FOwnsObjects = false;
      this.FSortStyle = 0;
    };
    this.$final = function () {
      this.FList = undefined;
      this.FOnChange = undefined;
      this.FOnChanging = undefined;
      $lt9.$final.call(this);
    };
    this.ExchangeItemsInt = function (Index1, Index2) {
      var S = "";
      var O = null;
      S = this.FList[Index1].FString;
      O = this.FList[Index1].FObject;
      this.FList[Index1].FString = this.FList[Index2].FString;
      this.FList[Index1].FObject = this.FList[Index2].FObject;
      this.FList[Index2].FString = S;
      this.FList[Index2].FObject = O;
    };
    this.GetSorted = function () {
      var Result = false;
      Result = this.FSortStyle in rtl.createSet(1,2);
      return Result;
    };
    this.Grow = function () {
      var NC = 0;
      NC = this.GetCapacity();
      if (NC >= 256) {
        NC = NC + rtl.trunc(NC / 4)}
       else if (NC === 0) {
        NC = 4}
       else NC = NC * 4;
      this.SetCapacity(NC);
    };
    this.InternalClear = function (FromIndex, ClearOnly) {
      var I = 0;
      if (FromIndex < this.FCount) {
        if (this.FOwnsObjects) {
          for (var $l = FromIndex, $end = this.FCount - 1; $l <= $end; $l++) {
            I = $l;
            this.FList[I].FString = "";
            $lp2({p: this.FList[I], get: function () {
                return this.p.FObject;
              }, set: function (v) {
                this.p.FObject = v;
              }});
          };
        } else {
          for (var $l1 = FromIndex, $end1 = this.FCount - 1; $l1 <= $end1; $l1++) {
            I = $l1;
            this.FList[I].FString = "";
          };
        };
        this.FCount = FromIndex;
      };
      if (!ClearOnly) this.SetCapacity(0);
    };
    this.QuickSort = function (L, R, CompareFn) {
      var Pivot = 0;
      var vL = 0;
      var vR = 0;
      if ((R - L) <= 1) {
        if (L < R) if (CompareFn(this,L,R) > 0) this.ExchangeItems(L,R);
        return;
      };
      vL = L;
      vR = R;
      Pivot = L + $lp8(R - L);
      while (vL < vR) {
        while ((vL < Pivot) && (CompareFn(this,vL,Pivot) <= 0)) vL += 1;
        while ((vR > Pivot) && (CompareFn(this,vR,Pivot) > 0)) vR -= 1;
        this.ExchangeItems(vL,vR);
        if (Pivot === vL) {
          Pivot = vR}
         else if (Pivot === vR) Pivot = vL;
      };
      if ((Pivot - 1) >= L) this.QuickSort(L,Pivot - 1,CompareFn);
      if ((Pivot + 1) <= R) this.QuickSort(Pivot + 1,R,CompareFn);
    };
    this.SetSorted = function (Value) {
      if (Value) {
        this.SetSortStyle(2)}
       else this.SetSortStyle(0);
    };
    this.SetSortStyle = function (AValue) {
      if (this.FSortStyle === AValue) return;
      if (AValue === 2) this.Sort();
      this.FSortStyle = AValue;
    };
    this.CheckIndex = function (AIndex) {
      if ((AIndex < 0) || (AIndex >= this.FCount)) this.Error(rtl.getResStr($lm2,"SListIndexError"),AIndex);
    };
    this.ExchangeItems = function (Index1, Index2) {
      this.ExchangeItemsInt(Index1,Index2);
    };
    this.Changed = function () {
      if (this.FUpdateCount === 0) {
        if (this.FOnChange != null) this.FOnChange(this);
      };
    };
    this.Changing = function () {
      if (this.FUpdateCount === 0) if (this.FOnChanging != null) this.FOnChanging(this);
    };
    this.Get = function (Index) {
      var Result = "";
      this.CheckIndex(Index);
      Result = this.FList[Index].FString;
      return Result;
    };
    this.GetCapacity = function () {
      var Result = 0;
      Result = rtl.length(this.FList);
      return Result;
    };
    this.GetCount = function () {
      var Result = 0;
      Result = this.FCount;
      return Result;
    };
    this.GetObject = function (Index) {
      var Result = null;
      this.CheckIndex(Index);
      Result = this.FList[Index].FObject;
      return Result;
    };
    this.PutObject = function (Index, AObject) {
      this.CheckIndex(Index);
      this.Changing();
      this.FList[Index].FObject = AObject;
      this.Changed();
    };
    this.SetCapacity = function (NewCapacity) {
      if (NewCapacity < 0) this.Error(rtl.getResStr($lm2,"SListCapacityError"),NewCapacity);
      if (NewCapacity !== this.GetCapacity()) this.FList = rtl.arraySetLength(this.FList,$lt10,NewCapacity);
    };
    this.SetUpdateState = function (Updating) {
      if (Updating) {
        this.Changing()}
       else this.Changed();
    };
    this.InsertItem = function (Index, S) {
      this.InsertItem$1(Index,S,null);
    };
    this.InsertItem$1 = function (Index, S, O) {
      var It = $lt10.$new();
      this.Changing();
      if (this.FCount === this.GetCapacity()) this.Grow();
      It.FString = S;
      It.FObject = O;
      this.FList.splice(Index,0,It);
      this.FCount += 1;
      this.Changed();
    };
    this.DoCompareText = function (s1, s2) {
      var Result = 0;
      if (this.FCaseSensitive) {
        Result = $lp9(s1,s2)}
       else Result = $lp4(s1,s2);
      return Result;
    };
    this.Destroy = function () {
      this.InternalClear(0,false);
      $lt9.Destroy.call(this);
    };
    this.Add = function (S) {
      var Result = 0;
      if (!(this.FSortStyle === 2)) {
        Result = this.FCount}
       else if (this.Find(S,{get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }})) {
        var $tmp = this.FDuplicates;
        if ($tmp === 0) {
          return Result}
         else if ($tmp === 2) this.Error(rtl.getResStr($lm2,"SDuplicateString"),0);
      };
      this.InsertItem(Result,S);
      return Result;
    };
    this.Clear = function () {
      if (this.FCount === 0) return;
      this.Changing();
      this.InternalClear(0,false);
      this.Changed();
    };
    this.Delete = function (Index) {
      this.CheckIndex(Index);
      this.Changing();
      if (this.FOwnsObjects) $lp2({p: this.FList[Index], get: function () {
          return this.p.FObject;
        }, set: function (v) {
          this.p.FObject = v;
        }});
      this.FList.splice(Index,1);
      this.FList[this.GetCount() - 1].FString = "";
      this.FList[this.GetCount() - 1].FObject = null;
      this.FCount -= 1;
      this.Changed();
    };
    this.Find = function (S, Index) {
      var Result = false;
      var L = 0;
      var R = 0;
      var I = 0;
      var CompareRes = 0;
      Result = false;
      Index.set(-1);
      if (!this.GetSorted()) throw $lt.$create("Create$1",[rtl.getResStr($lm2,"SErrFindNeedsSortedList")]);
      L = 0;
      R = this.GetCount() - 1;
      while (L <= R) {
        I = L + rtl.trunc((R - L) / 2);
        CompareRes = this.DoCompareText(S,this.FList[I].FString);
        if (CompareRes > 0) {
          L = I + 1}
         else {
          R = I - 1;
          if (CompareRes === 0) {
            Result = true;
            if (this.FDuplicates !== 1) L = I;
          };
        };
      };
      Index.set(L);
      return Result;
    };
    this.IndexOf = function (S) {
      var Result = 0;
      if (!this.GetSorted()) {
        Result = $lt9.IndexOf.call(this,S)}
       else if (!this.Find(S,{get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }})) Result = -1;
      return Result;
    };
    this.Insert = function (Index, S) {
      if (this.FSortStyle === 2) {
        this.Error(rtl.getResStr($lm2,"SSortedListError"),0)}
       else {
        if ((Index < 0) || (Index > this.FCount)) this.Error(rtl.getResStr($lm2,"SListIndexError"),Index);
        this.InsertItem(Index,S);
      };
    };
    this.Sort = function () {
      this.CustomSort($impl.StringListAnsiCompare);
    };
    this.CustomSort = function (CompareFn) {
      if ((this.FForceSort || !(this.FSortStyle === 2)) && (this.FCount > 1)) {
        this.Changing();
        this.QuickSort(0,this.FCount - 1,CompareFn);
        this.Changed();
      };
    };
  });
  rtl.createClass(this,"TCollectionItem",$lt7,function () {
    $lt13 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FCollection = null;
      this.FID = 0;
    };
    this.$final = function () {
      this.FCollection = undefined;
      $lt7.$final.call(this);
    };
    this.GetIndex = function () {
      var Result = 0;
      if (this.FCollection != null) {
        Result = this.FCollection.FItems.IndexOf(this)}
       else Result = -1;
      return Result;
    };
    this.SetCollection = function (Value) {
      if (Value !== this.FCollection) {
        if (this.FCollection != null) this.FCollection.RemoveItem(this);
        if (Value != null) Value.InsertItem(this);
      };
    };
    this.Changed = function (AllItems) {
      if ((this.FCollection !== null) && (this.FCollection.FUpdateCount === 0)) {
        if (AllItems) {
          this.FCollection.Update(null)}
         else this.FCollection.Update(this);
      };
    };
    this.SetIndex = function (Value) {
      var Temp = 0;
      Temp = this.GetIndex();
      if ((Temp > -1) && (Temp !== Value)) {
        this.FCollection.FItems.Move(Temp,Value);
        this.Changed(true);
      };
    };
    this.Create$1 = function (ACollection) {
      $lt22.Create.call(this);
      this.SetCollection(ACollection);
      return this;
    };
    this.Destroy = function () {
      this.SetCollection(null);
      $lt22.Destroy.call(this);
    };
  });
  $lt14 = this.TCollectionNotification = {"0": "cnAdded", cnAdded: 0, "1": "cnExtracting", cnExtracting: 1, "2": "cnDeleting", cnDeleting: 2};
  rtl.createClass(this,"TCollection",$lt7,function () {
    $lt15 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FItemClass = null;
      this.FItems = null;
      this.FUpdateCount = 0;
      this.FNextID = 0;
    };
    this.$final = function () {
      this.FItemClass = undefined;
      this.FItems = undefined;
      $lt7.$final.call(this);
    };
    this.GetCount = function () {
      var Result = 0;
      Result = this.FItems.FCount;
      return Result;
    };
    this.InsertItem = function (Item) {
      if (!this.FItemClass.isPrototypeOf(Item)) return;
      this.FItems.Add(Item);
      Item.FCollection = this;
      Item.FID = this.FNextID;
      this.FNextID += 1;
      this.SetItemName(Item);
      this.Notify(Item,0);
      this.Changed();
    };
    this.RemoveItem = function (Item) {
      var I = 0;
      this.Notify(Item,1);
      I = this.FItems.IndexOfItem(Item,1);
      if (I !== -1) this.FItems.Delete(I);
      Item.FCollection = null;
      this.Changed();
    };
    this.DoClear = function () {
      var Item = null;
      while (this.FItems.FCount > 0) {
        Item = rtl.getObject(this.FItems.Last());
        if (Item != null) Item.$destroy("Destroy");
      };
    };
    this.Changed = function () {
      if (this.FUpdateCount === 0) this.Update(null);
    };
    this.GetItem = function (Index) {
      var Result = null;
      Result = rtl.getObject(this.FItems.Get(Index));
      return Result;
    };
    this.SetItemName = function (Item) {
      if (Item === null) ;
    };
    this.Update = function (Item) {
      if (Item === null) ;
    };
    this.Notify = function (Item, Action) {
      if (Item === null) ;
      if (Action === 0) ;
    };
    this.Create$1 = function (AItemClass) {
      $lt22.Create.call(this);
      this.FItemClass = AItemClass;
      this.FItems = $lt4.$create("Create");
      return this;
    };
    this.Destroy = function () {
      this.FUpdateCount = 1;
      try {
        this.DoClear();
      } finally {
        this.FUpdateCount = 0;
      };
      if (this.FItems != null) this.FItems.$destroy("Destroy");
      $lt22.Destroy.call(this);
    };
    this.Add = function () {
      var Result = null;
      Result = this.FItemClass.$create("Create$1",[this]);
      return Result;
    };
    this.Assign = function (Source) {
      var I = 0;
      if ($lt15.isPrototypeOf(Source)) {
        this.Clear();
        for (var $l = 0, $end = Source.GetCount() - 1; $l <= $end; $l++) {
          I = $l;
          this.Add().Assign(Source.GetItem(I));
        };
        return;
      } else $lt7.Assign.call(this,Source);
    };
    this.BeginUpdate = function () {
      this.FUpdateCount += 1;
    };
    this.Clear = function () {
      if (this.FItems.FCount === 0) return;
      this.BeginUpdate();
      try {
        this.DoClear();
      } finally {
        this.EndUpdate();
      };
    };
    this.EndUpdate = function () {
      if (this.FUpdateCount > 0) this.FUpdateCount -= 1;
      if (this.FUpdateCount === 0) this.Changed();
    };
    this.Delete = function (Index) {
      var Item = null;
      Item = rtl.getObject(this.FItems.Get(Index));
      this.Notify(Item,2);
      if (Item != null) Item.$destroy("Destroy");
    };
    this.Insert = function (Index) {
      var Result = null;
      Result = this.Add();
      Result.SetIndex(Index);
      return Result;
    };
  });
  $lt16 = this.TOperation = {"0": "opInsert", opInsert: 0, "1": "opRemove", opRemove: 1};
  $lt17 = this.TComponentStateItem = {"0": "csLoading", csLoading: 0, "1": "csReading", csReading: 1, "2": "csWriting", csWriting: 2, "3": "csDestroying", csDestroying: 3, "4": "csDesigning", csDesigning: 4, "5": "csAncestor", csAncestor: 5, "6": "csUpdating", csUpdating: 6, "7": "csFixups", csFixups: 7, "8": "csFreeNotification", csFreeNotification: 8, "9": "csInline", csInline: 9, "10": "csDesignInstance", csDesignInstance: 10};
  $lt18 = this.TComponentStyleItem = {"0": "csInheritable", csInheritable: 0, "1": "csCheckPropAvail", csCheckPropAvail: 1, "2": "csSubComponent", csSubComponent: 2, "3": "csTransient", csTransient: 3};
  rtl.createClass(this,"TComponent",$lt7,function () {
    $lt19 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FOwner = null;
      this.FName = "";
      this.FTag = 0;
      this.FComponents = null;
      this.FFreeNotifies = null;
      this.FComponentState = {};
      this.FComponentStyle = {};
    };
    this.$final = function () {
      this.FOwner = undefined;
      this.FComponents = undefined;
      this.FFreeNotifies = undefined;
      this.FComponentState = undefined;
      this.FComponentStyle = undefined;
      $lt7.$final.call(this);
    };
    this.Insert = function (AComponent) {
      if (!(this.FComponents != null)) this.FComponents = $lt4.$create("Create");
      this.FComponents.Add(AComponent);
      AComponent.FOwner = this;
    };
    this.Remove = function (AComponent) {
      AComponent.FOwner = null;
      if (this.FComponents != null) {
        this.FComponents.Remove(AComponent);
        if (this.FComponents.FCount === 0) {
          this.FComponents.$destroy("Destroy");
          this.FComponents = null;
        };
      };
    };
    this.RemoveNotification = function (AComponent) {
      if (this.FFreeNotifies !== null) {
        this.FFreeNotifies.Remove(AComponent);
        if (this.FFreeNotifies.FCount === 0) {
          this.FFreeNotifies.$destroy("Destroy");
          this.FFreeNotifies = null;
          this.FComponentState = rtl.excludeSet(this.FComponentState,8);
        };
      };
    };
    this.SetReference = function (Enable) {
      var aField = null;
      var aValue = null;
      var aOwner = null;
      if (this.FName === "") return;
      if (this.FOwner != null) {
        aOwner = this.FOwner;
        aField = this.FOwner.$class.FieldAddress(this.FName);
        if (aField != null) {
          if (Enable) {
            aValue = this}
           else aValue = null;
          aOwner["" + aField["name"]] = aValue;
        };
      };
    };
    this.ChangeName = function (NewName) {
      this.FName = NewName;
    };
    this.Notification = function (AComponent, Operation) {
      var C = 0;
      if (Operation === 1) this.RemoveFreeNotification(AComponent);
      if (!(this.FComponents != null)) return;
      C = this.FComponents.FCount - 1;
      while (C >= 0) {
        rtl.getObject(this.FComponents.Get(C)).Notification(AComponent,Operation);
        C -= 1;
        if (C >= this.FComponents.FCount) C = this.FComponents.FCount - 1;
      };
    };
    this.SetDesigning = function (Value, SetChildren) {
      var Runner = 0;
      if (Value) {
        this.FComponentState = rtl.includeSet(this.FComponentState,4)}
       else this.FComponentState = rtl.excludeSet(this.FComponentState,4);
      if ((this.FComponents != null) && SetChildren) for (var $l = 0, $end = this.FComponents.FCount - 1; $l <= $end; $l++) {
        Runner = $l;
        rtl.getObject(this.FComponents.Get(Runner)).SetDesigning(Value,true);
      };
    };
    this.SetName = function (NewName) {
      if (this.FName === NewName) return;
      if ((NewName !== "") && !$lp10(NewName,false,false)) throw $lt2.$create("CreateFmt",[rtl.getResStr($lm2,"SInvalidName"),$lp(18,NewName)]);
      if (this.FOwner != null) {
        this.FOwner.ValidateRename(this,this.FName,NewName)}
       else this.ValidateRename(null,this.FName,NewName);
      this.SetReference(false);
      this.ChangeName(NewName);
      this.SetReference(true);
    };
    this.ValidateRename = function (AComponent, CurName, NewName) {
      if ((AComponent !== null) && ($lp4(CurName,NewName) !== 0) && (AComponent.FOwner === this) && (this.FindComponent(NewName) !== null)) throw $lt2.$create("CreateFmt",[rtl.getResStr($lm2,"SDuplicateName"),$lp(18,NewName)]);
      if ((4 in this.FComponentState) && (this.FOwner !== null)) this.FOwner.ValidateRename(AComponent,CurName,NewName);
    };
    this.ValidateContainer = function (AComponent) {
      AComponent.ValidateInsert(this);
    };
    this.ValidateInsert = function (AComponent) {
      if (AComponent === null) ;
    };
    this.Create$1 = function (AOwner) {
      this.FComponentStyle = rtl.createSet(0);
      if (AOwner != null) AOwner.InsertComponent(this);
      return this;
    };
    this.Destroy = function () {
      var I = 0;
      var C = null;
      this.Destroying();
      if (this.FFreeNotifies != null) {
        I = this.FFreeNotifies.FCount - 1;
        while (I >= 0) {
          C = rtl.getObject(this.FFreeNotifies.Get(I));
          this.FFreeNotifies.Delete(I);
          C.Notification(this,1);
          if (this.FFreeNotifies === null) {
            I = 0}
           else if (I > this.FFreeNotifies.FCount) I = this.FFreeNotifies.FCount;
          I -= 1;
        };
        $lp2({p: this, get: function () {
            return this.p.FFreeNotifies;
          }, set: function (v) {
            this.p.FFreeNotifies = v;
          }});
      };
      this.DestroyComponents();
      if (this.FOwner !== null) this.FOwner.RemoveComponent(this);
      $lt22.Destroy.call(this);
    };
    this.BeforeDestruction = function () {
      if (!(3 in this.FComponentState)) this.Destroying();
    };
    this.DestroyComponents = function () {
      var acomponent = null;
      while (this.FComponents != null) {
        acomponent = rtl.getObject(this.FComponents.Last());
        this.Remove(acomponent);
        acomponent.$destroy("Destroy");
      };
    };
    this.Destroying = function () {
      var Runner = 0;
      if (3 in this.FComponentState) return;
      this.FComponentState = rtl.includeSet(this.FComponentState,3);
      if (this.FComponents != null) for (var $l = 0, $end = this.FComponents.FCount - 1; $l <= $end; $l++) {
        Runner = $l;
        rtl.getObject(this.FComponents.Get(Runner)).Destroying();
      };
    };
    this.FindComponent = function (AName) {
      var Result = null;
      var I = 0;
      Result = null;
      if ((AName === "") || !(this.FComponents != null)) return Result;
      for (var $l = 0, $end = this.FComponents.FCount - 1; $l <= $end; $l++) {
        I = $l;
        if ($lp4(rtl.getObject(this.FComponents.Get(I)).FName,AName) === 0) {
          Result = rtl.getObject(this.FComponents.Get(I));
          return Result;
        };
      };
      return Result;
    };
    this.RemoveFreeNotification = function (AComponent) {
      this.RemoveNotification(AComponent);
      AComponent.RemoveNotification(this);
    };
    this.InsertComponent = function (AComponent) {
      AComponent.ValidateContainer(this);
      this.ValidateRename(AComponent,"",AComponent.FName);
      if (AComponent.FOwner !== null) AComponent.FOwner.RemoveComponent(AComponent);
      this.Insert(AComponent);
      if (4 in this.FComponentState) AComponent.SetDesigning(true,true);
      this.Notification(AComponent,0);
    };
    this.RemoveComponent = function (AComponent) {
      this.Notification(AComponent,1);
      this.Remove(AComponent);
      AComponent.SetDesigning(false,true);
      this.ValidateRename(AComponent,AComponent.FName,"");
    };
    var $r = this.$rtti;
    $r.addProperty("Name",6,rtl.string,"FName","SetName");
    $r.addProperty("Tag",0,rtl.nativeint,"FTag","FTag",4,{Default: 0});
  });
  rtl.createClass(this,"TLoadHelper",$lt22,function () {
    $lt20 = this;
  });
  this.SetLoadHelperClass = function (aClass) {
    var Result = null;
    Result = $impl.GlobalLoadHelper;
    $impl.GlobalLoadHelper = aClass;
    return Result;
  };
  $mod.$implcode = function () {
    $impl.GlobalLoadHelper = null;
    $impl.QuickSort = function (aList, L, R, Compare) {
      var I = 0;
      var J = 0;
      var PivotIdx = 0;
      var P = undefined;
      var Q = undefined;
      do {
        I = L;
        J = R;
        PivotIdx = L + ((R - L) >>> 1);
        P = aList[PivotIdx];
        do {
          while ((I < PivotIdx) && (Compare(P,aList[I]) > 0)) I += 1;
          while ((J > PivotIdx) && (Compare(P,aList[J]) < 0)) J -= 1;
          if (I < J) {
            Q = aList[I];
            aList[I] = aList[J];
            aList[J] = Q;
            if (PivotIdx === I) {
              PivotIdx = J;
              I += 1;
            } else if (PivotIdx === J) {
              PivotIdx = I;
              J -= 1;
            } else {
              I += 1;
              J -= 1;
            };
          };
        } while (!(I >= J));
        if ((PivotIdx - L) < (R - PivotIdx)) {
          if ((L + 1) < PivotIdx) $impl.QuickSort(rtl.arrayRef(aList),L,PivotIdx - 1,Compare);
          L = PivotIdx + 1;
        } else {
          if ((PivotIdx + 1) < R) $impl.QuickSort(rtl.arrayRef(aList),PivotIdx + 1,R,Compare);
          if ((L + 1) < PivotIdx) {
            R = PivotIdx - 1}
           else return;
        };
      } while (!(L >= R));
    };
    $impl.StringListAnsiCompare = function (List, Index1, Index) {
      var Result = 0;
      Result = List.DoCompareText(List.FList[Index1].FString,List.FList[Index].FString);
      return Result;
    };
    $impl.ClassList = null;
  };
  $mod.$init = function () {
    $impl.ClassList = new Object();
  };
},[]);
rtl.module("weborworker",["System","JS","Types"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
});
rtl.module("Web",["System","Types","JS","weborworker"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
});
rtl.module("contnrs",["System","SysUtils","Classes"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lm = pas.System;
  var $lt8 = $lm.TObject;
  var $lm1 = pas.Classes;
  var $lt9 = $lm1.TFPList;
  var $lt10 = $lm1.TList;
  var $lp = $lm.VarRecs;
  var $lm2 = pas.SysUtils;
  var $lp1 = $lm2.FreeAndNil;
  var $lt11 = $lm2.Exception;
  rtl.createClass(this,"TFPObjectList",$lt8,function () {
    $lt = this;
    this.$init = function () {
      $lt8.$init.call(this);
      this.FFreeObjects = false;
      this.FList = null;
    };
    this.$final = function () {
      this.FList = undefined;
      $lt8.$final.call(this);
    };
    this.GetCount = function () {
      var Result = 0;
      Result = this.FList.FCount;
      return Result;
    };
    this.GetItem = function (Index) {
      var Result = null;
      Result = rtl.getObject(this.FList.Get(Index));
      return Result;
    };
    this.SetItem = function (Index, AObject) {
      var O = null;
      if (this.FFreeObjects) {
        O = rtl.getObject(this.FList.Get(Index));
        this.FList.Put(Index,AObject);
        O = rtl.freeLoc(O);
      } else this.FList.Put(Index,AObject);
    };
    this.Create$1 = function () {
      $lt8.Create.call(this);
      this.FList = $lt9.$create("Create");
      this.FFreeObjects = true;
      return this;
    };
    this.Create$2 = function (FreeObjects) {
      this.Create$1();
      this.FFreeObjects = FreeObjects;
      return this;
    };
    this.Destroy = function () {
      if (this.FList !== null) {
        this.Clear();
        this.FList.$destroy("Destroy");
      };
      $lt8.Destroy.call(this);
    };
    this.Clear = function () {
      var i = 0;
      var O = null;
      if (this.FFreeObjects) for (var $l = this.FList.FCount - 1; $l >= 0; $l--) {
        i = $l;
        O = rtl.getObject(this.FList.Get(i));
        this.FList.Put(i,null);
        O = rtl.freeLoc(O);
      };
      this.FList.Clear();
    };
    this.Add = function (AObject) {
      var Result = 0;
      Result = this.FList.Add(AObject);
      return Result;
    };
  });
  rtl.createClass(this,"TObjectList",$lt10,function () {
    $lt1 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.FFreeObjects = false;
    };
    this.Notify = function (Ptr, Action) {
      var O = null;
      if (this.FFreeObjects) if (Action === 2) {
        O = rtl.getObject(Ptr);
        O = rtl.freeLoc(O);
      };
      $lt10.Notify.call(this,Ptr,Action);
    };
    this.GetItem = function (Index) {
      var Result = null;
      Result = rtl.getObject($lt10.Get.call(this,Index));
      return Result;
    };
    this.Create$3 = function (FreeObjects) {
      $lt10.Create$1.call(this);
      this.FFreeObjects = FreeObjects;
      return this;
    };
    this.Add$1 = function (AObject) {
      var Result = 0;
      Result = $lt10.Add.call(this,AObject);
      return Result;
    };
  });
  rtl.createClass(this,"THTCustomNode",$lt8,function () {
    $lt2 = this;
    this.$init = function () {
      $lt8.$init.call(this);
      this.FKey = "";
    };
    this.CreateWith = function (AString) {
      $lt8.Create.call(this);
      this.FKey = AString;
      return this;
    };
  });
  rtl.createClass(this,"TFPCustomHashTable",$lt8,function () {
    $lt3 = this;
    this.$init = function () {
      $lt8.$init.call(this);
      this.FHashTable = null;
      this.FHashFunction = null;
      this.FCount = 0;
      this.FHashTableSize = 0;
    };
    this.$final = function () {
      this.FHashTable = undefined;
      this.FHashFunction = undefined;
      $lt8.$final.call(this);
    };
    this.SetHashTableSize = function (Value) {
      var i = 0;
      var newSize = 0;
      if (Value !== this.FHashTableSize) {
        i = 0;
        while (($impl.PRIMELIST[i] < Value) && (i < 27)) i += 1;
        newSize = $impl.PRIMELIST[i];
        if (this.FCount === 0) {
          this.FHashTableSize = newSize;
          this.InitializeHashTable();
        } else this.ChangeTableSize(newSize);
      };
    };
    this.InitializeHashTable = function () {
      var i = 0;
      if (this.FHashTableSize > 0) for (var $l = 0, $end = this.FHashTableSize - 1; $l <= $end; $l++) {
        i = $l;
        this.FHashTable.Add(null);
      };
      this.FCount = 0;
    };
    this.Chain = function (index) {
      var Result = null;
      Result = this.FHashTable.GetItem(index);
      return Result;
    };
    this.FindChainForAdd = function (aKey) {
      var Result = null;
      var hashCode = 0;
      var i = 0;
      hashCode = this.FHashFunction(aKey,this.FHashTableSize);
      Result = this.Chain(hashCode);
      if (Result != null) {
        if (Result.GetCount() > 0) for (var $l = 0, $end = Result.GetCount() - 1; $l <= $end; $l++) {
          i = $l;
          if (Result.GetItem(i).FKey === aKey) throw $lt7.$create("CreateFmt",[rtl.getResStr($mod,"DuplicateMsg"),$lp(18,aKey)]);
        };
      } else {
        this.FHashTable.SetItem(hashCode,$lt.$create("Create$2",[true]));
        Result = this.Chain(hashCode);
      };
      this.FCount += 1;
      return Result;
    };
    this.Create$1 = function () {
      this.CreateWith(196613,$mod.RSHash);
      return this;
    };
    this.CreateWith = function (AHashTableSize, aHashFunc) {
      $lt8.Create.call(this);
      this.FHashTable = $lt.$create("Create$2",[true]);
      this.SetHashTableSize(AHashTableSize);
      this.FHashFunction = aHashFunc;
      return this;
    };
    this.Destroy = function () {
      rtl.free(this,"FHashTable");
      $lt8.Destroy.call(this);
    };
    this.ChangeTableSize = function (ANewSize) {
      var SavedTable = null;
      var List = null;
      var SavedTableSize = 0;
      var i = 0;
      var j = 0;
      var temp = null;
      SavedTable = this.FHashTable;
      SavedTableSize = this.FHashTableSize;
      this.FHashTableSize = ANewSize;
      this.FHashTable = $lt.$create("Create$2",[true]);
      this.InitializeHashTable();
      if (SavedTableSize > 0) for (var $l = 0, $end = SavedTableSize - 1; $l <= $end; $l++) {
        i = $l;
        List = SavedTable.GetItem(i);
        if (List != null) for (var $l1 = 0, $end1 = List.GetCount() - 1; $l1 <= $end1; $l1++) {
          j = $l1;
          temp = List.GetItem(j);
          this.AddNode(temp);
        };
      };
      SavedTable = rtl.freeLoc(SavedTable);
    };
    this.Find = function (aKey) {
      var Result = null;
      var hashCode = 0;
      var chn = null;
      var i = 0;
      hashCode = this.FHashFunction(aKey,this.FHashTableSize);
      chn = this.Chain(hashCode);
      if (chn != null) if (chn.GetCount() > 0) for (var $l = 0, $end = chn.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        if (chn.GetItem(i).FKey === aKey) return chn.GetItem(i);
      };
      Result = null;
      return Result;
    };
  });
  rtl.createClass(this,"THTObjectNode",$lt2,function () {
    $lt4 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.FData = null;
    };
    this.$final = function () {
      this.FData = undefined;
      $lt2.$final.call(this);
    };
  });
  rtl.createClass(this,"THTOwnedObjectNode",$lt4,function () {
    $lt5 = this;
    this.Destroy = function () {
      $lp1({p: this, get: function () {
          return this.p.FData;
        }, set: function (v) {
          this.p.FData = v;
        }});
      $lt8.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TFPObjectHashTable",$lt3,function () {
    $lt6 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FOwnsObjects = false;
    };
    this.CreateNewNode = function (aKey) {
      var Result = null;
      if (this.FOwnsObjects) {
        Result = $lt5.$create("CreateWith",[aKey])}
       else Result = $lt4.$create("CreateWith",[aKey]);
      return Result;
    };
    this.AddNode = function (ANode) {
      this.Add(ANode.FKey,ANode.FData);
    };
    this.Create$2 = function (AOwnsObjects) {
      $lt3.Create$1.call(this);
      this.FOwnsObjects = AOwnsObjects;
      return this;
    };
    this.Add = function (aKey, AItem) {
      var chn = null;
      var NewNode = null;
      chn = this.FindChainForAdd(aKey);
      NewNode = this.CreateNewNode(aKey);
      NewNode.FData = AItem;
      chn.Add(NewNode);
    };
  });
  rtl.createClass(this,"EDuplicate",$lt11,function () {
    $lt7 = this;
  });
  var b = 378551;
  this.RSHash = function (S, TableSize) {
    var Result = 0;
    var a = 0;
    var i = 0;
    a = 63689;
    Result = 0;
    if (S.length > 0) for (var $l = 1, $end = S.length; $l <= $end; $l++) {
      i = $l;
      Result = (Result * a) + S.charCodeAt(i - 1);
      a = a * 378551;
    };
    Result = rtl.lw(Result & 0x7FFFFFFF) % TableSize;
    return Result;
  };
  $mod.$implcode = function () {
    $impl.NPRIMES = 28;
    $impl.PRIMELIST = [53,97,193,389,769,1543,3079,6151,12289,24593,49157,98317,196613,393241,786433,1572869,3145739,6291469,12582917,25165843,50331653,100663319,201326611,402653189,805306457,1610612741,3221225473,4294967291];
    $mod.$resourcestrings = {DuplicateMsg: {org: "An item with key %0:s already exists"}};
  };
},["JS"]);
rtl.module("fpjson",["System","JS","RTLConsts","Types","SysUtils","Classes","contnrs"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lm = pas.System;
  var $lt15 = $lm.TObject;
  var $lp = $lm.StringOfChar;
  var $lp1 = $lm.Delete;
  var $lm1 = pas.SysUtils;
  var $lp2 = $lm1.FloatToStr$1;
  var $lp3 = $lm1.IntToStr;
  var $lp4 = $lm1.BoolToStr$1;
  var $lm2 = pas.contnrs;
  var $lt16 = $lm2.TFPObjectList;
  var $lp5 = $lm1.FreeAndNil;
  var $lp6 = $lm.VarRecs;
  var $lm3 = pas.RTLConsts;
  var $lp7 = $lm.Copy$1;
  var $lp8 = $lm1.CompareText;
  var $lt17 = $lm1.Exception;
  var $lt18 = $lm1.TFormatSettings;
  var $lm4 = pas.JS;
  var $lp9 = $lm4.isBoolean;
  var $lp10 = $lm4.isInteger;
  $lt = this.TJSONtype = {"0": "jtUnknown", jtUnknown: 0, "1": "jtNumber", jtNumber: 1, "2": "jtString", jtString: 2, "3": "jtBoolean", jtBoolean: 3, "4": "jtNull", jtNull: 4, "5": "jtArray", jtArray: 5, "6": "jtObject", jtObject: 6};
  $lt1 = this.TJSONInstanceType = {"0": "jitUnknown", jitUnknown: 0, "1": "jitNumberInteger", jitNumberInteger: 1, "2": "jitNumberNativeInt", jitNumberNativeInt: 2, "3": "jitNumberFloat", jitNumberFloat: 3, "4": "jitString", jitString: 4, "5": "jitBoolean", jitBoolean: 5, "6": "jitNull", jitNull: 6, "7": "jitArray", jitArray: 7, "8": "jitObject", jitObject: 8};
  $lt2 = this.TFormatOption = {"0": "foSingleLineArray", foSingleLineArray: 0, "1": "foSingleLineObject", foSingleLineObject: 1, "2": "foDoNotQuoteMembers", foDoNotQuoteMembers: 2, "3": "foUseTabchar", foUseTabchar: 3, "4": "foSkipWhiteSpace", foSkipWhiteSpace: 4, "5": "foSkipWhiteSpaceOnlyLeading", foSkipWhiteSpaceOnlyLeading: 5, "6": "foForceLF", foForceLF: 6, "7": "foFormatFloat", foFormatFloat: 7};
  this.DefaultIndentSize = 2;
  this.DefaultFormat = {};
  rtl.createClass(this,"TJSONData",$lt15,function () {
    $lt3 = this;
    this.ElementSeps = [", ",","];
    this.FCompressedJSON = false;
    this.FElementSep = "";
    rtl.recNewT(this,"TFormatJSONContext",function () {
      $lt4 = this;
      this.S = "";
      this.IndentSize = 0;
      this.$new = function () {
        var r = Object.create(this);
        r.Options = {};
        r.CachedIndents = [];
        return r;
      };
      this.$eq = function (b) {
        return rtl.eqSet(this.Options,b.Options) && (this.S === b.S) && (this.IndentSize === b.IndentSize) && (this.CachedIndents === b.CachedIndents);
      };
      this.$assign = function (s) {
        this.Options = rtl.refSet(s.Options);
        this.S = s.S;
        this.IndentSize = s.IndentSize;
        this.CachedIndents = rtl.arrayRef(s.CachedIndents);
        return this;
      };
      this.Append = function (Piece) {
        this.S = this.S + Piece;
      };
      this.AppendIndent = function (I) {
        if ((I <= 0) || (this.IndentSize <= 0)) return;
        if ((I >= rtl.length(this.CachedIndents)) || (this.CachedIndents[I] === "")) this.CreateCachedIndent(I);
        this.Append(this.CachedIndents[I]);
      };
      this.CreateCachedIndent = function (I) {
        var C = "\x00";
        if (I >= rtl.length(this.CachedIndents)) this.CachedIndents = rtl.arraySetLength(this.CachedIndents,"",16 + I + Math.floor(I / 4) + Math.floor(I / 8));
        C = " ";
        if (3 in this.Options) C = "\t";
        this.CachedIndents[I] = $lp(C,I * this.IndentSize);
      };
    });
    this.DetermineElementSeparators = function () {
      $lt3.FElementSep = this.ElementSeps[+this.FCompressedJSON];
    };
    this.DoError = function (Msg) {
      throw $lt14.$create("Create$1",[Msg]);
    };
    this.DoError$1 = function (Fmt, Args) {
      throw $lt14.$create("CreateFmt",[Fmt,Args]);
    };
    this.GetItem = function (Index) {
      var Result = null;
      Result = null;
      if (Index > 0) ;
      return Result;
    };
    this.DoFormatJSON = function (Ctx, CurrentIndent) {
      if (CurrentIndent === 0) ;
      Ctx.Append(this.GetAsJSON());
    };
    this.GetCount = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.JSONType = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.Create$1 = function () {
      this.Clear();
      return this;
    };
    this.DumpJSON = function (S) {
      var $Self = this;
      function W(T) {
        if (T === "") return;
        S.push(T);
      };
      var I = 0;
      var O = null;
      var $tmp = this.$class.JSONType();
      if ($tmp === 6) {
        O = $Self;
        W("{");
        for (var $l = 0, $end = O.GetCount() - 1; $l <= $end; $l++) {
          I = $l;
          if (I > 0) W(",");
          W('"');
          W($mod.StringToJSONString(O.GetNameOf(I),false));
          W('":');
          O.GetItem(I).DumpJSON(S);
        };
        W("}");
      } else if ($tmp === 5) {
        W("[");
        for (var $l1 = 0, $end1 = this.GetCount() - 1; $l1 <= $end1; $l1++) {
          I = $l1;
          if (I > 0) W(",");
          this.GetItem(I).DumpJSON(S);
        };
        W("]");
      } else {
        W(this.GetAsJSON());
      };
    };
    this.FormatJSON = function (Options, Indentsize) {
      var Result = "";
      var Ctx = $lt4.$new();
      Ctx.Options = rtl.refSet(Options);
      Ctx.IndentSize = Indentsize;
      this.DoFormatJSON(Ctx,0);
      Result = Ctx.S;
      return Result;
    };
  });
  rtl.createClass(this,"TJSONNumber",$lt3,function () {
    $lt5 = this;
    this.JSONType = function () {
      var Result = 0;
      Result = 1;
      return Result;
    };
  });
  rtl.createClass(this,"TJSONFloatNumber",$lt5,function () {
    $lt6 = this;
    this.$init = function () {
      $lt5.$init.call(this);
      this.FValue = 0.0;
    };
    this.GetAsJSON = function () {
      var Result = "";
      Result = this.GetAsString();
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      Result = rtl.floatToStr(this.FValue);
      if ((Result !== "") && (Result.charAt(0) === " ")) $lp1({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }},1,1);
      return Result;
    };
    this.DoFormatJSON = function (Ctx, CurrentIndent) {
      if (7 in Ctx.Options) {
        Ctx.Append($lp2(this.FValue,$impl.JSONFormatSettings))}
       else Ctx.Append(this.GetAsJSON());
      if (CurrentIndent === 0) ;
    };
    this.Create$2 = function (AValue) {
      this.FValue = AValue;
      return this;
    };
    this.Clear = function () {
      this.FValue = 0;
    };
  });
  rtl.createClass(this,"TJSONIntegerNumber",$lt5,function () {
    $lt7 = this;
    this.$init = function () {
      $lt5.$init.call(this);
      this.FValue = 0;
    };
    this.GetAsJSON = function () {
      var Result = "";
      Result = this.GetAsString();
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      Result = $lp3(this.FValue);
      return Result;
    };
    this.Create$2 = function (AValue) {
      this.FValue = AValue;
      return this;
    };
    this.Clear = function () {
      this.FValue = 0;
    };
  });
  rtl.createClass(this,"TJSONNativeIntNumber",$lt5,function () {
    $lt8 = this;
    this.$init = function () {
      $lt5.$init.call(this);
      this.FValue = 0;
    };
    this.GetAsJSON = function () {
      var Result = "";
      Result = this.GetAsString();
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      Result = $lp3(this.FValue);
      return Result;
    };
    this.Create$2 = function (AValue) {
      this.FValue = AValue;
      return this;
    };
    this.Clear = function () {
      this.FValue = 0;
    };
  });
  rtl.createClass(this,"TJSONString",$lt3,function () {
    $lt9 = this;
    this.StrictEscaping = false;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FValue = "";
    };
    this.GetAsJSON = function () {
      var Result = "";
      Result = '"' + $mod.StringToJSONString(this.FValue,this.StrictEscaping) + '"';
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      Result = this.FValue;
      return Result;
    };
    this.Create$2 = function (AValue) {
      this.FValue = AValue;
      return this;
    };
    this.JSONType = function () {
      var Result = 0;
      Result = 2;
      return Result;
    };
    this.Clear = function () {
      this.FValue = "";
    };
  });
  rtl.createClass(this,"TJSONBoolean",$lt3,function () {
    $lt10 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FValue = false;
    };
    this.GetAsJSON = function () {
      var Result = "";
      if (this.FValue) {
        Result = "true"}
       else Result = "false";
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      Result = $lp4(this.FValue,"true","false");
      return Result;
    };
    this.Create$2 = function (AValue) {
      this.FValue = AValue;
      return this;
    };
    this.JSONType = function () {
      var Result = 0;
      Result = 3;
      return Result;
    };
    this.Clear = function () {
      this.FValue = false;
    };
  });
  rtl.createClass(this,"TJSONNull",$lt3,function () {
    $lt11 = this;
    this.Converterror = function (From) {
      if (From) {
        this.$class.DoError(rtl.getResStr($mod,"SErrCannotConvertFromNull"))}
       else this.$class.DoError(rtl.getResStr($mod,"SErrCannotConvertToNull"));
    };
    this.GetAsJSON = function () {
      var Result = "";
      Result = "null";
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      this.Converterror(true);
      Result = "";
      return Result;
    };
    this.JSONType = function () {
      var Result = 0;
      Result = 4;
      return Result;
    };
    this.Clear = function () {
    };
  });
  rtl.createClass(this,"TJSONArray",$lt3,function () {
    $lt12 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FList = null;
    };
    this.$final = function () {
      this.FList = undefined;
      $lt3.$final.call(this);
    };
    this.Converterror = function (From) {
      if (From) {
        this.$class.DoError(rtl.getResStr($mod,"SErrCannotConvertFromArray"))}
       else this.$class.DoError(rtl.getResStr($mod,"SErrCannotConvertToArray"));
    };
    this.GetAsJSON = function () {
      var Result = "";
      var I = 0;
      var Sep = "";
      var D = null;
      var V = "";
      Sep = $lt3.FElementSep;
      Result = "[";
      for (var $l = 0, $end = this.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        D = this.GetItem(I);
        if (D !== null) {
          V = D.GetAsJSON()}
         else V = "null";
        Result = Result + V;
        if (I < (this.GetCount() - 1)) Result = Result + Sep;
      };
      Result = Result + "]";
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      this.Converterror(true);
      Result = "";
      return Result;
    };
    this.GetCount = function () {
      var Result = 0;
      Result = this.FList.GetCount();
      return Result;
    };
    this.GetItem = function (Index) {
      var Result = null;
      Result = rtl.as(this.FList.GetItem(Index),$lt3);
      return Result;
    };
    this.DoFormatJSON = function (Ctx, CurrentIndent) {
      var I = 0;
      var MultiLine = false;
      var SkipWhiteSpace = false;
      var LB = "";
      Ctx.Append("[");
      MultiLine = !(0 in Ctx.Options);
      if (6 in Ctx.Options) {
        LB = "\n"}
       else LB = $lm.sLineBreak;
      SkipWhiteSpace = 4 in Ctx.Options;
      if (MultiLine) Ctx.Append(LB);
      for (var $l = 0, $end = this.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        if (MultiLine) Ctx.AppendIndent(CurrentIndent + 1);
        if (this.GetItem(I) === null) {
          Ctx.Append("null")}
         else this.GetItem(I).DoFormatJSON(Ctx,CurrentIndent + 1);
        if (I < (this.GetCount() - 1)) Ctx.Append(this.ElementSeps[+(SkipWhiteSpace || MultiLine)]);
        if (MultiLine) Ctx.Append(LB);
      };
      if (MultiLine) Ctx.AppendIndent(CurrentIndent);
      Ctx.Append("]");
    };
    this.Create$2 = function () {
      this.FList = $lt16.$create("Create$2",[true]);
      return this;
    };
    this.Destroy = function () {
      $lp5({p: this, get: function () {
          return this.p.FList;
        }, set: function (v) {
          this.p.FList = v;
        }});
      $lt15.Destroy.call(this);
    };
    this.JSONType = function () {
      var Result = 0;
      Result = 5;
      return Result;
    };
    this.Clear = function () {
      this.FList.Clear();
    };
    this.Add = function (Item) {
      var Result = 0;
      Result = this.FList.Add(Item);
      return Result;
    };
    this.Add$3 = function (S) {
      var Result = 0;
      Result = this.Add($mod.CreateJSON$5(S));
      return Result;
    };
  });
  rtl.createClass(this,"TJSONObject",$lt3,function () {
    $lt13 = this;
    this.ElementStart = ['"',""];
    this.SpacedQuoted = ['" : '," : "];
    this.UnSpacedQuoted = ['":',":"];
    this.ObjStartSeps = ["{ ","{"];
    this.ObjEndSeps = [" }","}"];
    this.FUnquotedMemberNames = false;
    this.FObjStartSep = "";
    this.FObjEndSep = "";
    this.FElementEnd = "";
    this.FElementStart = "";
    this.$init = function () {
      $lt3.$init.call(this);
      this.FCount = 0;
      this.FHash = null;
      this.FNames = [];
    };
    this.$final = function () {
      this.FHash = undefined;
      this.FNames = undefined;
      $lt3.$final.call(this);
    };
    this.DoAdd = function (AName, AValue, FreeOnError) {
      var Result = 0;
      if (this.FHash.hasOwnProperty("%" + AName)) {
        if (FreeOnError) $lp5({get: function () {
            return AValue;
          }, set: function (v) {
            AValue = v;
          }});
        this.$class.DoError$1(rtl.getResStr($mod,"SErrDuplicateValue"),$lp6(18,AName));
      };
      this.FHash["%" + AName] = AValue;
      this.FNames = [];
      this.FCount += 1;
      Result = this.FCount;
      return Result;
    };
    this.DetermineElementQuotes = function () {
      $lt13.FObjStartSep = this.ObjStartSeps[+$lt3.FCompressedJSON];
      $lt13.FObjEndSep = this.ObjEndSeps[+$lt3.FCompressedJSON];
      if ($lt3.FCompressedJSON) {
        $lt13.FElementEnd = this.UnSpacedQuoted[+this.FUnquotedMemberNames]}
       else $lt13.FElementEnd = this.SpacedQuoted[+this.FUnquotedMemberNames];
      $lt13.FElementStart = this.ElementStart[+this.FUnquotedMemberNames];
    };
    this.GetElements = function (AName) {
      var Result = null;
      if (this.FHash.hasOwnProperty("%" + AName)) {
        Result = rtl.getObject(this.FHash["%" + AName])}
       else this.$class.DoError$1(rtl.getResStr($mod,"SErrNonexistentElement"),$lp6(18,AName));
      return Result;
    };
    this.GetNameOf = function (Index) {
      var Result = "";
      if (rtl.length(this.FNames) === 0) this.FNames = Object.getOwnPropertyNames(this.FHash);
      if ((Index < 0) || (Index >= this.FCount)) this.$class.DoError$1(rtl.getResStr($lm3,"SListIndexError"),$lp6(0,Index));
      Result = $lp7(this.FNames[Index],2);
      return Result;
    };
    this.Converterror = function (From) {
      if (From) {
        this.$class.DoError(rtl.getResStr($mod,"SErrCannotConvertFromObject"))}
       else this.$class.DoError(rtl.getResStr($mod,"SErrCannotConvertToObject"));
    };
    this.GetAsJSON = function () {
      var Result = "";
      var I = 0;
      var Sep = "";
      var V = "";
      var D = null;
      Sep = $lt3.FElementSep;
      Result = "";
      for (var $l = 0, $end = this.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        if (Result !== "") Result = Result + Sep;
        D = this.GetItem(I);
        if (D != null) {
          V = this.GetItem(I).GetAsJSON()}
         else V = "null";
        Result = Result + this.FElementStart + $mod.StringToJSONString(this.GetNameOf(I),false) + this.FElementEnd + V;
      };
      if (Result !== "") {
        Result = this.FObjStartSep + Result + this.FObjEndSep}
       else Result = "{}";
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      this.Converterror(true);
      Result = "";
      return Result;
    };
    this.GetCount = function () {
      var Result = 0;
      Result = this.FCount;
      return Result;
    };
    this.GetItem = function (Index) {
      var Result = null;
      Result = this.GetElements(this.GetNameOf(Index));
      return Result;
    };
    this.DoFormatJSON = function (Ctx, CurrentIndent) {
      var i = 0;
      var MultiLine = false;
      var UseQuotes = false;
      var SkipWhiteSpace = false;
      var SkipWhiteSpaceOnlyLeading = false;
      var NSep = "";
      var Sep = "";
      var D = null;
      var LB = "";
      UseQuotes = !(2 in Ctx.Options);
      MultiLine = !(1 in Ctx.Options);
      if (6 in Ctx.Options) {
        LB = "\n"}
       else LB = $lm.sLineBreak;
      SkipWhiteSpace = 4 in Ctx.Options;
      SkipWhiteSpaceOnlyLeading = 5 in Ctx.Options;
      if (SkipWhiteSpace) {
        if (SkipWhiteSpaceOnlyLeading) {
          NSep = ": "}
         else NSep = ":";
      } else NSep = " : ";
      if (MultiLine) {
        Sep = "," + LB;
      } else if (SkipWhiteSpace) {
        Sep = ","}
       else Sep = ", ";
      if (this.GetCount() === 0) {
        Ctx.Append("{}");
        return;
      };
      if (MultiLine) {
        Ctx.Append("{");
        Ctx.Append(LB);
      } else Ctx.Append(this.ObjStartSeps[+SkipWhiteSpace]);
      for (var $l = 0, $end = this.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        if (i > 0) Ctx.Append(Sep);
        if (MultiLine) Ctx.AppendIndent(CurrentIndent + 1);
        if (UseQuotes) Ctx.Append('"');
        Ctx.Append($mod.StringToJSONString(this.GetNameOf(i),false));
        if (UseQuotes) Ctx.Append('"');
        Ctx.Append(NSep);
        D = this.GetItem(i);
        if (D === null) {
          Ctx.Append("null")}
         else D.DoFormatJSON(Ctx,CurrentIndent + 1);
      };
      if (MultiLine) {
        Ctx.Append(LB);
        Ctx.AppendIndent(CurrentIndent);
        Ctx.Append("}");
      } else Ctx.Append(this.ObjEndSeps[+SkipWhiteSpace]);
    };
    this.Create$2 = function () {
      this.FHash = new Object();
      return this;
    };
    this.Create$3 = function (Elements) {
      var I = 0;
      var AName = "";
      var J = null;
      this.Create$2();
      if (((rtl.length(Elements) - 1 - 0) % 2) === 0) this.$class.DoError(rtl.getResStr($mod,"SErrOddNumber"));
      I = 0;
      while (I <= (rtl.length(Elements) - 1)) {
        if (rtl.isString(Elements[I])) {
          AName = "" + Elements[I]}
         else this.$class.DoError$1(rtl.getResStr($mod,"SErrNameMustBeString"),$lp6(0,I + 1));
        if (AName === "") this.$class.DoError$1(rtl.getResStr($mod,"SErrNameMustBeString"),$lp6(0,I + 1));
        I += 1;
        J = $impl.VarRecToJSON(Elements[I],"Object");
        this.Add(AName,J);
        I += 1;
      };
      return this;
    };
    this.Destroy = function () {
      this.FHash = null;
      $lt15.Destroy.call(this);
    };
    this.JSONType = function () {
      var Result = 0;
      Result = 6;
      return Result;
    };
    this.IndexOfName = function (AName, CaseInsensitive) {
      var Result = 0;
      if (rtl.length(this.FNames) === 0) this.FNames = Object.getOwnPropertyNames(this.FHash);
      Result = this.FNames.indexOf("%" + AName);
      if ((Result < 0) && CaseInsensitive) {
        Result = this.GetCount() - 1;
        while ((Result >= 0) && ($lp8(this.GetNameOf(Result),AName) !== 0)) Result -= 1;
      };
      return Result;
    };
    this.Clear = function () {
      this.FCount = 0;
      this.FHash = new Object();
      this.FNames = [];
    };
    this.Add = function (AName, AValue) {
      var Result = 0;
      Result = this.DoAdd(AName,AValue,false);
      return Result;
    };
    this.Add$3 = function (AName, AValue) {
      var Result = 0;
      Result = this.DoAdd(AName,$mod.CreateJSON$5(AValue),true);
      return Result;
    };
    this.Add$5 = function (AName, Avalue) {
      var Result = 0;
      Result = this.DoAdd(AName,$mod.CreateJSON$2(Avalue),true);
      return Result;
    };
    this.Add$7 = function (AName, AValue) {
      var Result = 0;
      Result = this.DoAdd(AName,AValue,false);
      return Result;
    };
  });
  rtl.createClass(this,"EJSON",$lt17,function () {
    $lt14 = this;
  });
  this.StringToJSONString = function (S, Strict) {
    var Result = "";
    Result = JSON.stringify(S);
    if (Strict) Result = Result.replaceAll("/","\\\\\\/");
    return Result;
  };
  this.CreateJSON = function () {
    var Result = null;
    Result = $impl.DefaultJSONInstanceTypes[6].$create("Create$1");
    return Result;
  };
  this.CreateJSON$1 = function (Data) {
    var Result = null;
    Result = $impl.DefaultJSONInstanceTypes[5].$create("Create$2",[Data]);
    return Result;
  };
  this.CreateJSON$2 = function (Data) {
    var Result = null;
    Result = $impl.DefaultJSONInstanceTypes[1].$create("Create$2",[Data]);
    return Result;
  };
  this.CreateJSON$3 = function (Data) {
    var Result = null;
    Result = $impl.DefaultJSONInstanceTypes[2].$create("Create$2",[Data]);
    return Result;
  };
  this.CreateJSON$4 = function (Data) {
    var Result = null;
    Result = $impl.DefaultJSONInstanceTypes[3].$create("Create$2",[Data]);
    return Result;
  };
  this.CreateJSON$5 = function (Data) {
    var Result = null;
    Result = $impl.DefaultJSONInstanceTypes[4].$create("Create$2",[Data]);
    return Result;
  };
  $mod.$implcode = function () {
    $impl.JSONFormatSettings = $lt18.$clone({CurrencyFormat: 1, NegCurrFormat: 5, ThousandSeparator: ",", DecimalSeparator: ".", CurrencyDecimals: 2, DateSeparator: "-", TimeSeparator: ":", ListSeparator: ",", CurrencyString: "$", ShortDateFormat: "d/m/y", LongDateFormat: 'dd" "mmmm" "yyyy', TimeAMString: "AM", TimePMString: "PM", ShortTimeFormat: "hh:nn", LongTimeFormat: "hh:nn:ss", ShortMonthNames: ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"], LongMonthNames: ["January","February","March","April","May","June","July","August","September","October","November","December"], ShortDayNames: ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"], LongDayNames: ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"], TwoDigitYearCenturyWindow: 50, DateTimeToStrFormat: rtl.arraySetLength(null,"",2)});
    $impl.DefaultJSONInstanceTypes = [$lt3,$lt7,$lt8,$lt6,$lt9,$lt10,$lt11,$lt12,$lt13];
    $impl.VarRecToJSON = function (Element, SourceType) {
      var Result = null;
      var i = 0;
      var VObject = null;
      Result = null;
      if (Element == null) {
        Result = $mod.CreateJSON()}
       else if ($lp9(Element)) {
        Result = $mod.CreateJSON$1(!(Element == false))}
       else if (rtl.isString(Element)) {
        Result = $mod.CreateJSON$5("" + Element)}
       else if (rtl.isNumber(Element)) {
        if ($lp10(Element)) {
          i = rtl.trunc(Element);
          if ((i >= -2147483648) && (i <= 2147483647)) {
            Result = $mod.CreateJSON$2(rtl.trunc(Element))}
           else Result = $mod.CreateJSON$3(rtl.trunc(Element));
        } else Result = $mod.CreateJSON$4(rtl.getNumber(Element));
      } else if (rtl.isObject(Element) && rtl.isExt(Element,$lt15,1)) {
        VObject = rtl.getObject(Element);
        if ($lt3.isPrototypeOf(VObject)) {
          Result = VObject}
         else $lt3.DoError$1(rtl.getResStr($mod,"SErrNotJSONData"),$lp6(18,VObject.$classname,18,SourceType));
      } else $lt3.DoError$1(rtl.getResStr($mod,"SErrUnknownTypeInConstructor"),$lp6(18,SourceType,18,typeof(Element)));
      return Result;
    };
    $mod.$resourcestrings = {SErrCannotConvertFromNull: {org: "Cannot convert data from Null value"}, SErrCannotConvertToNull: {org: "Cannot convert data to Null value"}, SErrCannotConvertFromArray: {org: "Cannot convert data from array value"}, SErrCannotConvertToArray: {org: "Cannot convert data to array value"}, SErrCannotConvertFromObject: {org: "Cannot convert data from object value"}, SErrCannotConvertToObject: {org: "Cannot convert data to object value"}, SErrUnknownTypeInConstructor: {org: "Unknown type in JSON%s constructor: %d"}, SErrNotJSONData: {org: "Cannot add object of type %s to TJSON%s"}, SErrOddNumber: {org: "TJSONObject must be constructed with name,value pairs"}, SErrNameMustBeString: {org: "TJSONObject constructor element name at pos %d is not a string"}, SErrNonexistentElement: {org: 'Unknown object member: "%s"'}, SErrDuplicateValue: {org: 'Duplicate object member: "%s"'}};
  };
  $mod.$init = function () {
    $lt3.DetermineElementSeparators();
    $lt13.DetermineElementQuotes();
  };
},[]);
rtl.module("strutils",["System","SysUtils","Types"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lm = pas.System;
  var $lp = $lm.Copy;
  var $lp1 = $lm.upcase;
  var $lp2 = $lm.StringOfChar;
  this.LeftStr = function (AText, ACount) {
    var Result = "";
    Result = $lp(AText,1,ACount);
    return Result;
  };
  this.Soundex = function (AText, ALength) {
    var Result = "";
    var S = "\x00";
    var PS = "\x00";
    var I = 0;
    var L = 0;
    Result = "";
    PS = "\x00";
    if (AText.length > 0) {
      Result = $lp1(AText.charAt(0));
      I = 2;
      L = AText.length;
      while ((I <= L) && (Result.length < ALength)) {
        S = $impl.SScore.charAt(AText.charCodeAt(I - 1) - 1);
        if (!(S.charCodeAt() in rtl.createSet(48,105,PS.charCodeAt()))) Result = Result + S;
        if (S !== "i") PS = S;
        I += 1;
      };
    };
    L = Result.length;
    if (L < ALength) Result = Result + $lp2("0",ALength - L);
    return Result;
  };
  this.SoundexSimilar = function (AText, AOther, ALength) {
    var Result = false;
    Result = $mod.Soundex(AText,ALength) === $mod.Soundex(AOther,ALength);
    return Result;
  };
  this.SoundexSimilar$1 = function (AText, AOther) {
    var Result = false;
    Result = $mod.SoundexSimilar(AText,AOther,4);
    return Result;
  };
  this.SoundexProc = function (AText, AOther) {
    var Result = false;
    Result = $mod.SoundexSimilar$1(AText,AOther);
    return Result;
  };
  this.AnsiResemblesProc = null;
  this.ResemblesProc = null;
  $mod.$implcode = function () {
    $impl.SScore = "00000000000000000000000000000000" + "00000000000000000000000000000000" + "0123012i02245501262301i2i2" + "000000" + "0123012i02245501262301i2i2" + "00000000000000000000000000000000" + "00000000000000000000000000000000" + "00000000000000000000000000000000" + "00000000000000000000000000000000" + "00000";
  };
  $mod.$init = function () {
    $mod.AnsiResemblesProc = $mod.SoundexProc;
    $mod.ResemblesProc = $mod.SoundexProc;
  };
},["JS"]);
rtl.module("PScanner",["System","JS","SysUtils","Classes","Types"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lt19 = null;
  var $lt20 = null;
  var $lt21 = null;
  var $lt22 = null;
  var $lt23 = null;
  var $lt24 = null;
  var $lt25 = null;
  var $lt26 = null;
  var $lt27 = null;
  var $lm = pas.System;
  var $lt28 = $lm.TObject;
  var $lp = $lm.Copy;
  var $lm1 = pas.SysUtils;
  var $lp1 = $lm1.IncludeTrailingPathDelimiter;
  var $lm2 = pas.Classes;
  var $lt29 = $lm2.TStringList;
  var $lp2 = $lm.val;
  var $lp3 = $lm.val$8;
  var $lp4 = $lm1.LowerCase;
  var $lp5 = $lm1.IntToStr;
  var $lp6 = $lm.VarRecs;
  var $lp7 = $lm1.SameText;
  var $lp8 = $lm1.StrToInt64Def;
  var $lp9 = $lm1.FloatToStr;
  var $lt30 = $lm1.EDivByZero;
  var $lt31 = $lm1.EZeroDivide;
  var $lt32 = $lm1.EMathError;
  var $lt33 = $lm1.EIntError;
  var $lt34 = $lm1.Exception;
  var $lp10 = $lm1.UpperCase;
  var $lp11 = $lm1.Trim;
  var $lp12 = $lm.Pos;
  var $lp13 = $lm1.CompareText;
  var $lp14 = $lm1.IsValidIdent;
  var $lp15 = $lm1.Format;
  var $lm3 = null;
  var $lp16 = null;
  var $lp17 = $lm.Delete;
  var $lp18 = $lm.upcase;
  var $lp19 = $lm1.BoolToStr$1;
  var $lp20 = $lm1.TryStrToInt;
  var $lp21 = $lm1.ExtractFilePath;
  var $lp22 = $lm1.ExtractFileExt;
  var $lp23 = $lm1.ChangeFileExt;
  var $lp24 = $lm1.ExtractFileName;
  var $lp25 = $lm1.TrimRight;
  var $lp26 = $lm1.TrimLeft;
  var $lp27 = $lm1.StrToIntDef;
  var $lp28 = $lm1.FreeAndNil;
  var $lt35 = $lm2.TFPList;
  var $lm4 = pas.JS;
  var $lp29 = $lm4.isBoolean;
  var $lp30 = $lm1.BoolToStr;
  var $lp31 = $lm4.isInteger;
  this.nErrInvalidCharacter = 1001;
  this.nErrOpenString = 1002;
  this.nErrIncludeFileNotFound = 1003;
  this.nErrIfXXXNestingLimitReached = 1004;
  this.nErrInvalidPPElse = 1005;
  this.nErrInvalidPPEndif = 1006;
  this.nLogOpeningFile = 1007;
  this.nLogLineNumber = 1008;
  this.nLogIFDefAccepted = 1009;
  this.nLogIFDefRejected = 1010;
  this.nLogIFNDefAccepted = 1011;
  this.nLogIFNDefRejected = 1012;
  this.nLogIFAccepted = 1013;
  this.nLogIFRejected = 1014;
  this.nLogIFOptAccepted = 1015;
  this.nLogIFOptRejected = 1016;
  this.nLogELSEIFAccepted = 1017;
  this.nLogELSEIFRejected = 1018;
  this.nErrInvalidMode = 1019;
  this.nErrInvalidModeSwitch = 1020;
  this.nErrXExpectedButYFound = 1021;
  this.nErrRangeCheck = 1022;
  this.nErrDivByZero = 1023;
  this.nErrOperandAndOperatorMismatch = 1024;
  this.nUserDefined = 1025;
  this.nLogMacroDefined = 1026;
  this.nLogMacroUnDefined = 1027;
  this.nWarnIllegalCompilerDirectiveX = 1028;
  this.nIllegalStateForWarnDirective = 1027;
  this.nErrIncludeLimitReached = 1028;
  this.nMisplacedGlobalCompilerSwitch = 1029;
  this.nLogMacroXSetToY = 1030;
  this.nInvalidDispatchFieldName = 1031;
  this.nErrWrongSwitchToggle = 1032;
  this.nNoResourceSupport = 1033;
  this.nResourceFileNotFound = 1034;
  this.nErrInvalidMultiLineLineEnding = 1035;
  this.nWarnIgnoringLinkLib = 1036;
  this.nErrInvalidIndent = 1037;
  this.nErrMultilineNonWhiteSpaceBeforeClosing = 1038;
  $lt = this.TMessageType = {"0": "mtFatal", mtFatal: 0, "1": "mtError", mtError: 1, "2": "mtWarning", mtWarning: 2, "3": "mtNote", mtNote: 3, "4": "mtHint", mtHint: 4, "5": "mtInfo", mtInfo: 5, "6": "mtDebug", mtDebug: 6};
  $lt1 = this.TToken = {"0": "tkEOF", tkEOF: 0, "1": "tkWhitespace", tkWhitespace: 1, "2": "tkComment", tkComment: 2, "3": "tkIdentifier", tkIdentifier: 3, "4": "tkString", tkString: 4, "5": "tkStringMultiLine", tkStringMultiLine: 5, "6": "tkNumber", tkNumber: 6, "7": "tkChar", tkChar: 7, "8": "tkBraceOpen", tkBraceOpen: 8, "9": "tkBraceClose", tkBraceClose: 9, "10": "tkMul", tkMul: 10, "11": "tkPlus", tkPlus: 11, "12": "tkComma", tkComma: 12, "13": "tkMinus", tkMinus: 13, "14": "tkDot", tkDot: 14, "15": "tkDivision", tkDivision: 15, "16": "tkColon", tkColon: 16, "17": "tkSemicolon", tkSemicolon: 17, "18": "tkLessThan", tkLessThan: 18, "19": "tkEqual", tkEqual: 19, "20": "tkGreaterThan", tkGreaterThan: 20, "21": "tkAt", tkAt: 21, "22": "tkSquaredBraceOpen", tkSquaredBraceOpen: 22, "23": "tkSquaredBraceClose", tkSquaredBraceClose: 23, "24": "tkCaret", tkCaret: 24, "25": "tkBackslash", tkBackslash: 25, "26": "tkDotDot", tkDotDot: 26, "27": "tkAssign", tkAssign: 27, "28": "tkNotEqual", tkNotEqual: 28, "29": "tkLessEqualThan", tkLessEqualThan: 29, "30": "tkGreaterEqualThan", tkGreaterEqualThan: 30, "31": "tkPower", tkPower: 31, "32": "tkSymmetricalDifference", tkSymmetricalDifference: 32, "33": "tkAssignPlus", tkAssignPlus: 33, "34": "tkAssignMinus", tkAssignMinus: 34, "35": "tkAssignMul", tkAssignMul: 35, "36": "tkAssignDivision", tkAssignDivision: 36, "37": "tkAtAt", tkAtAt: 37, "38": "tkDotDotDot", tkDotDotDot: 38, "39": "tkabsolute", tkabsolute: 39, "40": "tkand", tkand: 40, "41": "tkarray", tkarray: 41, "42": "tkas", tkas: 42, "43": "tkasm", tkasm: 43, "44": "tkbegin", tkbegin: 44, "45": "tkbitpacked", tkbitpacked: 45, "46": "tkcase", tkcase: 46, "47": "tkclass", tkclass: 47, "48": "tkconst", tkconst: 48, "49": "tkconstref", tkconstref: 49, "50": "tkconstructor", tkconstructor: 50, "51": "tkcontains", tkcontains: 51, "52": "tkdestructor", tkdestructor: 52, "53": "tkdispinterface", tkdispinterface: 53, "54": "tkdiv", tkdiv: 54, "55": "tkdo", tkdo: 55, "56": "tkdownto", tkdownto: 56, "57": "tkelse", tkelse: 57, "58": "tkend", tkend: 58, "59": "tkexcept", tkexcept: 59, "60": "tkexports", tkexports: 60, "61": "tkfalse", tkfalse: 61, "62": "tkfile", tkfile: 62, "63": "tkfinalization", tkfinalization: 63, "64": "tkfinally", tkfinally: 64, "65": "tkfor", tkfor: 65, "66": "tkfunction", tkfunction: 66, "67": "tkgeneric", tkgeneric: 67, "68": "tkgoto", tkgoto: 68, "69": "tkif", tkif: 69, "70": "tkimplementation", tkimplementation: 70, "71": "tkin", tkin: 71, "72": "tkinherited", tkinherited: 72, "73": "tkinitialization", tkinitialization: 73, "74": "tkinline", tkinline: 74, "75": "tkinterface", tkinterface: 75, "76": "tkis", tkis: 76, "77": "tklabel", tklabel: 77, "78": "tklibrary", tklibrary: 78, "79": "tkmod", tkmod: 79, "80": "tknil", tknil: 80, "81": "tknot", tknot: 81, "82": "tkobjccategory", tkobjccategory: 82, "83": "tkobjcclass", tkobjcclass: 83, "84": "tkobjcprotocol", tkobjcprotocol: 84, "85": "tkobject", tkobject: 85, "86": "tkof", tkof: 86, "87": "tkoperator", tkoperator: 87, "88": "tkor", tkor: 88, "89": "tkotherwise", tkotherwise: 89, "90": "tkpacked", tkpacked: 90, "91": "tkPackage", tkPackage: 91, "92": "tkprocedure", tkprocedure: 92, "93": "tkprogram", tkprogram: 93, "94": "tkproperty", tkproperty: 94, "95": "tkraise", tkraise: 95, "96": "tkrecord", tkrecord: 96, "97": "tkrepeat", tkrepeat: 97, "98": "tkrequires", tkrequires: 98, "99": "tkResourceString", tkResourceString: 99, "100": "tkself", tkself: 100, "101": "tkset", tkset: 101, "102": "tkshl", tkshl: 102, "103": "tkshr", tkshr: 103, "104": "tkspecialize", tkspecialize: 104, "105": "tkthen", tkthen: 105, "106": "tkthreadvar", tkthreadvar: 106, "107": "tkto", tkto: 107, "108": "tktrue", tktrue: 108, "109": "tktry", tktry: 109, "110": "tktype", tktype: 110, "111": "tkunit", tkunit: 111, "112": "tkuntil", tkuntil: 112, "113": "tkuses", tkuses: 113, "114": "tkvar", tkvar: 114, "115": "tkwhile", tkwhile: 115, "116": "tkwith", tkwith: 116, "117": "tkxor", tkxor: 117, "118": "tkLineEnding", tkLineEnding: 118, "119": "tkTab", tkTab: 119};
  $lt2 = this.TModeSwitch = {"0": "msNone", msNone: 0, "1": "msFpc", msFpc: 1, "2": "msObjfpc", msObjfpc: 2, "3": "msDelphi", msDelphi: 3, "4": "msDelphiUnicode", msDelphiUnicode: 4, "5": "msTP7", msTP7: 5, "6": "msMac", msMac: 6, "7": "msIso", msIso: 7, "8": "msExtpas", msExtpas: 8, "9": "msGPC", msGPC: 9, "10": "msClass", msClass: 10, "11": "msObjpas", msObjpas: 11, "12": "msResult", msResult: 12, "13": "msStringPchar", msStringPchar: 13, "14": "msCVarSupport", msCVarSupport: 14, "15": "msNestedComment", msNestedComment: 15, "16": "msTPProcVar", msTPProcVar: 16, "17": "msMacProcVar", msMacProcVar: 17, "18": "msRepeatForward", msRepeatForward: 18, "19": "msPointer2Procedure", msPointer2Procedure: 19, "20": "msAutoDeref", msAutoDeref: 20, "21": "msInitFinal", msInitFinal: 21, "22": "msDefaultAnsistring", msDefaultAnsistring: 22, "23": "msOut", msOut: 23, "24": "msDefaultPara", msDefaultPara: 24, "25": "msHintDirective", msHintDirective: 25, "26": "msDuplicateNames", msDuplicateNames: 26, "27": "msProperty", msProperty: 27, "28": "msDefaultInline", msDefaultInline: 28, "29": "msExcept", msExcept: 29, "30": "msObjectiveC1", msObjectiveC1: 30, "31": "msObjectiveC2", msObjectiveC2: 31, "32": "msNestedProcVars", msNestedProcVars: 32, "33": "msNonLocalGoto", msNonLocalGoto: 33, "34": "msAdvancedRecords", msAdvancedRecords: 34, "35": "msISOLikeUnaryMinus", msISOLikeUnaryMinus: 35, "36": "msSystemCodePage", msSystemCodePage: 36, "37": "msFinalFields", msFinalFields: 37, "38": "msDefaultUnicodestring", msDefaultUnicodestring: 38, "39": "msTypeHelpers", msTypeHelpers: 39, "40": "msCBlocks", msCBlocks: 40, "41": "msISOLikeIO", msISOLikeIO: 41, "42": "msISOLikeProgramsPara", msISOLikeProgramsPara: 42, "43": "msISOLikeMod", msISOLikeMod: 43, "44": "msArrayOperators", msArrayOperators: 44, "45": "msMultiHelpers", msMultiHelpers: 45, "46": "msArray2DynArray", msArray2DynArray: 46, "47": "msPrefixedAttributes", msPrefixedAttributes: 47, "48": "msUnderscoreIsSeparator", msUnderscoreIsSeparator: 48, "49": "msImplicitFunctionSpec", msImplicitFunctionSpec: 49, "50": "msFunctionReferences", msFunctionReferences: 50, "51": "msAnonymousFunctions", msAnonymousFunctions: 51, "52": "msExternalClass", msExternalClass: 52, "53": "msOmitRTTI", msOmitRTTI: 53, "54": "msMultiLineStrings", msMultiLineStrings: 54, "55": "msDelphiMultiLineStrings", msDelphiMultiLineStrings: 55, "56": "msInlineVars", msInlineVars: 56};
  $lt3 = this.TBoolSwitch = {"0": "bsNone", bsNone: 0, "1": "bsAlign", bsAlign: 1, "2": "bsBoolEval", bsBoolEval: 2, "3": "bsAssertions", bsAssertions: 3, "4": "bsDebugInfo", bsDebugInfo: 4, "5": "bsExtension", bsExtension: 5, "6": "bsImportedData", bsImportedData: 6, "7": "bsLongStrings", bsLongStrings: 7, "8": "bsIOChecks", bsIOChecks: 8, "9": "bsWriteableConst", bsWriteableConst: 9, "10": "bsLocalSymbols", bsLocalSymbols: 10, "11": "bsTypeInfo", bsTypeInfo: 11, "12": "bsOptimization", bsOptimization: 12, "13": "bsOpenStrings", bsOpenStrings: 13, "14": "bsOverflowChecks", bsOverflowChecks: 14, "15": "bsRangeChecks", bsRangeChecks: 15, "16": "bsTypedAddress", bsTypedAddress: 16, "17": "bsSafeDivide", bsSafeDivide: 17, "18": "bsVarStringChecks", bsVarStringChecks: 18, "19": "bsStackframes", bsStackframes: 19, "20": "bsExtendedSyntax", bsExtendedSyntax: 20, "21": "bsReferenceInfo", bsReferenceInfo: 21, "22": "bsHints", bsHints: 22, "23": "bsNotes", bsNotes: 23, "24": "bsWarnings", bsWarnings: 24, "25": "bsMacro", bsMacro: 25, "26": "bsScopedEnums", bsScopedEnums: 26, "27": "bsObjectChecks", bsObjectChecks: 27, "28": "bsPointerMath", bsPointerMath: 28, "29": "bsGoto", bsGoto: 29};
  this.LetterToBoolSwitch = [1,2,3,4,5,0,6,7,8,9,0,10,11,0,12,13,14,15,0,16,17,18,19,20,21,0];
  this.bsAll = rtl.createSet(null,$lt3.bsNone,$lt3.bsGoto);
  this.bsFPCMode = rtl.createSet(28,9);
  this.bsObjFPCMode = rtl.createSet(28,9);
  this.bsDelphiMode = rtl.createSet(9,29);
  this.bsDelphiUnicodeMode = rtl.createSet(9,29);
  this.bsMacPasMode = rtl.createSet(28,9);
  $lt4 = this.TValueSwitch = {"0": "vsInterfaces", vsInterfaces: 0, "1": "vsDispatchField", vsDispatchField: 1, "2": "vsDispatchStrField", vsDispatchStrField: 2};
  this.vsAllValueSwitches = rtl.createSet(null,$lt4.vsInterfaces,$lt4.vsDispatchStrField);
  this.DefaultValueSwitches = ["com","Msg","MsgStr"];
  this.DefaultMaxIncludeStackDepth = 20;
  $lt5 = this.TWarnMsgState = {"0": "wmsDefault", wmsDefault: 0, "1": "wmsOn", wmsOn: 1, "2": "wmsOff", wmsOff: 2, "3": "wmsError", wmsError: 3};
  $lt6 = this.TTokenOption = {"0": "toForceCaret", toForceCaret: 0, "1": "toOperatorToken", toOperatorToken: 1};
  rtl.createClass(this,"TMacroDef",$lt28,function () {
    $lt7 = this;
    this.$init = function () {
      $lt28.$init.call(this);
      this.FName = "";
      this.FValue = "";
    };
    this.Create$1 = function (AName, AValue) {
      this.FName = AName;
      this.FValue = AValue;
      return this;
    };
  });
  $lt8 = this.TEOLStyle = {"0": "elPlatform", elPlatform: 0, "1": "elSource", elSource: 1, "2": "elLF", elLF: 2, "3": "elCR", elCR: 3, "4": "elCRLF", elCRLF: 4};
  rtl.createClass(this,"TLineReader",$lt28,function () {
    $lt9 = this;
    this.$init = function () {
      $lt28.$init.call(this);
      this.FFilename = "";
      this.EOLStyle = 0;
    };
    this.Create$1 = function (AFilename) {
      this.FFilename = AFilename;
      if ($lm.LineEnding === "\r") {
        this.EOLStyle = 3}
       else if ($lm.LineEnding === "\r\n") {
        this.EOLStyle = 4}
       else this.EOLStyle = 2;
      return this;
    };
    this.LastEOLStyle = function () {
      var Result = 0;
      Result = this.EOLStyle;
      return Result;
    };
  });
  rtl.createClass(this,"TStreamLineReader",$lt9,function () {
    $lt10 = this;
    this.$init = function () {
      $lt9.$init.call(this);
      this.FContent = "";
      this.FPos = 0;
    };
    this.InitFromString = function (s) {
      this.FContent = s;
      this.FPos = 0;
    };
    this.IsEOF = function () {
      var Result = false;
      Result = this.FPos >= this.FContent.length;
      return Result;
    };
    this.ReadLine = function () {
      var Result = "";
      var LPos = 0;
      var EOL = false;
      if (this.IsEOF()) return "";
      LPos = this.FPos + 1;
      do {
        this.FPos += 1;
        EOL = this.FContent.charCodeAt(this.FPos - 1) in rtl.createSet(10,13);
      } while (!(this.IsEOF() || EOL));
      if (EOL) {
        if (this.FContent.charAt(this.FPos - 1) === "\n") {
          this.EOLStyle = 2}
         else this.EOLStyle = 3;
        Result = $lp(this.FContent,LPos,this.FPos - LPos);
      } else Result = $lp(this.FContent,LPos,(this.FPos - LPos) + 1);
      if (!this.IsEOF() && (this.FContent.charAt(this.FPos - 1) === "\r") && (this.FContent.charAt((this.FPos + 1) - 1) === "\n")) {
        this.FPos += 1;
        this.EOLStyle = 4;
      };
      return Result;
    };
  });
  rtl.createClass(this,"TStringStreamLineReader",$lt10,function () {
    $lt11 = this;
    this.Create$2 = function (AFilename, ASource) {
      $lt9.Create$1.call(this,AFilename);
      this.InitFromString(ASource);
      return this;
    };
  });
  rtl.createClass(this,"TMacroReader",$lt11,function () {
    $lt12 = this;
    this.$init = function () {
      $lt11.$init.call(this);
      this.FCurCol = 0;
      this.FCurRow = 0;
    };
  });
  rtl.createClass(this,"TBaseFileResolver",$lt28,function () {
    $lt13 = this;
    this.$init = function () {
      $lt28.$init.call(this);
      this.FBaseDirectory = "";
      this.FMode = 0;
      this.FModuleDirectory = "";
      this.FResourcePaths = null;
      this.FIncludePaths = null;
    };
    this.$final = function () {
      this.FResourcePaths = undefined;
      this.FIncludePaths = undefined;
      $lt28.$final.call(this);
    };
    this.SetBaseDirectory = function (AValue) {
      AValue = $lp1(AValue);
      if (this.FBaseDirectory === AValue) return;
      this.FBaseDirectory = AValue;
    };
    this.Create$1 = function () {
      $lt28.Create.call(this);
      this.FIncludePaths = $lt29.$create("Create$1");
      this.FResourcePaths = $lt29.$create("Create$1");
      this.FMode = 1;
      return this;
    };
    this.Destroy = function () {
      rtl.free(this,"FResourcePaths");
      rtl.free(this,"FIncludePaths");
      $lt28.Destroy.call(this);
    };
  });
  this.CondDirectiveBool = ["0","1"];
  this.MACDirectiveBool = ["FALSE","TRUE"];
  rtl.createClass(this,"TCondDirectiveEvaluator",$lt28,function () {
    $lt14 = this;
    $lt15 = this.TPrecedenceLevel = {"0": "ceplFirst", ceplFirst: 0, "1": "ceplSecond", ceplSecond: 1, "2": "ceplThird", ceplThird: 2, "3": "ceplFourth", ceplFourth: 3};
    rtl.recNewT(this,"TStackItem",function () {
      $lt16 = this;
      this.Level = 0;
      this.Operathor = 0;
      this.Operand = "";
      this.OperandPos = 0;
      this.$eq = function (b) {
        return (this.Level === b.Level) && (this.Operathor === b.Operathor) && (this.Operand === b.Operand) && (this.OperandPos === b.OperandPos);
      };
      this.$assign = function (s) {
        this.Level = s.Level;
        this.Operathor = s.Operathor;
        this.Operand = s.Operand;
        this.OperandPos = s.OperandPos;
        return this;
      };
    });
    this.$init = function () {
      $lt28.$init.call(this);
      this.FOnEvalFunction = null;
      this.FOnEvalVariable = null;
      this.FOnLog = null;
      this.FTokenStart = 0;
      this.FTokenEnd = 0;
      this.FToken = 0;
      this.FStack = [];
      this.FStackTop = 0;
      this.Expression = "";
      this.MsgCurLine = 0;
      this.MsgNumber = 0;
      this.MsgType = 0;
      this.MsgPattern = "";
      this.isMac = false;
    };
    this.$final = function () {
      this.FOnEvalFunction = undefined;
      this.FOnEvalVariable = undefined;
      this.FOnLog = undefined;
      this.FStack = undefined;
      $lt28.$final.call(this);
    };
    this.IsFalse = function (Value) {
      var Result = false;
      Result = Value === $mod.CondDirectiveBool[0];
      if (!Result && this.isMac) Result = Value === $mod.MACDirectiveBool[0];
      return Result;
    };
    this.IsTrue = function (Value) {
      var Result = false;
      Result = Value !== $mod.CondDirectiveBool[0];
      if (Result && this.isMac) Result = Value !== $mod.MACDirectiveBool[0];
      return Result;
    };
    this.IsInteger = function (Value, i) {
      var Result = false;
      var Code = 0;
      $lp2(Value,i,{get: function () {
          return Code;
        }, set: function (v) {
          Code = v;
        }});
      Result = Code === 0;
      return Result;
    };
    this.IsExtended = function (Value, e) {
      var Result = false;
      var Code = 0;
      $lp3(Value,e,{get: function () {
          return Code;
        }, set: function (v) {
          Code = v;
        }});
      Result = Code === 0;
      return Result;
    };
    var IdentChars = rtl.createSet(null,97,122,null,65,90,95,null,48,57);
    var AllSpaces = rtl.createSet(9,10,13,32);
    var Digits = rtl.createSet(null,48,57);
    var HexDigits = rtl.createSet(null,48,57);
    this.NextToken = function () {
      var $Self = this;
      function ReadIdentifier() {
        var Result = 0;
        Result = 3;
        var $tmp = $lp4($lp($Self.Expression,$Self.FTokenStart,$Self.FTokenEnd - $Self.FTokenStart));
        if ($tmp === "or") {
          Result = 88}
         else if ($tmp === "not") {
          Result = 81}
         else if ($tmp === "and") {
          Result = 40}
         else if ($tmp === "xor") {
          Result = 117}
         else if ($tmp === "shl") {
          Result = 102}
         else if ($tmp === "shr") {
          Result = 103}
         else if ($tmp === "mod") {
          Result = 79}
         else if ($tmp === "div") Result = 54;
        return Result;
      };
      var l = 0;
      var Src = "";
      this.FTokenStart = this.FTokenEnd;
      Src = this.Expression;
      l = Src.length;
      while ((this.FTokenStart <= l) && (Src.charCodeAt(this.FTokenStart - 1) in AllSpaces)) this.FTokenStart += 1;
      if (this.FTokenStart > l) {
        this.FToken = 0;
        this.FTokenEnd = this.FTokenStart;
        return;
      };
      this.FTokenEnd = this.FTokenStart;
      var $tmp = Src.charAt(this.FTokenEnd - 1);
      if ((($tmp >= "a") && ($tmp <= "z")) || (($tmp >= "A") && ($tmp <= "Z")) || ($tmp === "_")) {
        this.FTokenEnd += 1;
        while ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in IdentChars)) this.FTokenEnd += 1;
        this.FToken = ReadIdentifier();
      } else if (($tmp >= "0") && ($tmp <= "9")) {
        this.FToken = 6;
        this.FTokenEnd += 1;
        while ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in Digits)) this.FTokenEnd += 1;
        if ((this.FTokenEnd <= l) && (Src.charAt(this.FTokenEnd - 1) === ".") && ((this.FTokenEnd === l) || (Src.charAt((this.FTokenEnd + 1) - 1) !== "."))) {
          this.FTokenEnd += 1;
          while ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in Digits)) this.FTokenEnd += 1;
        };
        if ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in rtl.createSet(101,69))) {
          this.FTokenEnd += 1;
          if ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in rtl.createSet(45,43))) this.FTokenEnd += 1;
          while ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in Digits)) this.FTokenEnd += 1;
        };
      } else if ($tmp === "$") {
        this.FToken = 6;
        this.FTokenEnd += 1;
        while ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in HexDigits)) this.FTokenEnd += 1;
      } else if ($tmp === "%") {
        this.FToken = 6;
        while ((this.FTokenEnd <= l) && (Src.charCodeAt(this.FTokenEnd - 1) in rtl.createSet(48,49))) this.FTokenEnd += 1;
      } else if ($tmp === "(") {
        this.FToken = 8;
        this.FTokenEnd += 1;
      } else if ($tmp === ")") {
        this.FToken = 9;
        this.FTokenEnd += 1;
      } else if ($tmp === "=") {
        this.FToken = 19;
        this.FTokenEnd += 1;
      } else if ($tmp === "<") {
        this.FTokenEnd += 1;
        var $tmp1 = $lp(Src,this.FTokenEnd,1);
        if ($tmp1 === "=") {
          this.FToken = 29;
          this.FTokenEnd += 1;
        } else if ($tmp1 === "<") {
          this.FToken = 102;
          this.FTokenEnd += 1;
        } else if ($tmp1 === ">") {
          this.FToken = 28;
          this.FTokenEnd += 1;
        } else {
          this.FToken = 18;
        };
      } else if ($tmp === ">") {
        this.FTokenEnd += 1;
        var $tmp2 = $lp(Src,this.FTokenEnd,1);
        if ($tmp2 === "=") {
          this.FToken = 30;
          this.FTokenEnd += 1;
        } else if ($tmp2 === ">") {
          this.FToken = 103;
          this.FTokenEnd += 1;
        } else {
          this.FToken = 20;
        };
      } else if ($tmp === "+") {
        this.FToken = 11;
        this.FTokenEnd += 1;
      } else if ($tmp === "-") {
        this.FToken = 13;
        this.FTokenEnd += 1;
      } else if ($tmp === "*") {
        this.FToken = 10;
        this.FTokenEnd += 1;
      } else if ($tmp === "/") {
        this.FToken = 15;
        this.FTokenEnd += 1;
      } else if ($tmp === "'") {
        this.FToken = 4;
        do {
          this.FTokenEnd += 1;
          if (this.FTokenEnd > l) this.Log(1,1002,rtl.getResStr($mod,"SErrOpenString"),[],0);
          var $tmp3 = Src.charAt(this.FTokenEnd - 1);
          if ($tmp3 === "'") {
            this.FTokenEnd += 1;
            if ((this.FTokenEnd > l) || (Src.charAt(this.FTokenEnd - 1) !== "'")) break;
          } else if (($tmp3 === "\n") || ($tmp3 === "\r")) this.Log(1,1002,rtl.getResStr($mod,"SErrOpenString"),[],0);
        } while (!false);
      } else {
        this.FToken = 0;
      };
    };
    this.Log = function (aMsgType, aMsgNumber, aMsgFmt, Args, MsgPos) {
      if (MsgPos < 1) MsgPos = this.FTokenEnd;
      this.MsgType = aMsgType;
      this.MsgNumber = aMsgNumber;
      this.MsgPattern = aMsgFmt;
      if (this.FOnLog != null) {
        this.FOnLog(this,Args);
        if (!(aMsgType in rtl.createSet(1,0))) return;
      };
      throw $lt17.$create("CreateFmt",[this.MsgPattern + " at pos " + $lp5(MsgPos) + " line " + $lp5(this.MsgCurLine),Args]);
    };
    this.LogXExpectedButTokenFound = function (X, ErrorPos) {
      var S = "";
      S = X;
      this.Log(1,1021,rtl.getResStr($mod,"SErrXExpectedButYFound"),$lp6(18,S,18,$mod.TokenInfos[this.FToken]),ErrorPos);
    };
    this.ReadOperand = function (Skip) {
      var $Self = this;
      function IsMacNoArgFunction(aName) {
        var Result = false;
        Result = $lp7(aName,"DEFINED") || $lp7(aName,"UNDEFINED");
        return Result;
      };
      var i = 0;
      var e = 0.0;
      var S = "";
      var aName = "";
      var Param = "";
      var Code = 0;
      var NameStartP = 0;
      var p = 0;
      var Lvl = 0;
      var $tmp = this.FToken;
      if ($tmp === 81) {
        this.NextToken();
        this.ReadOperand(Skip);
        if (!Skip) this.FStack[this.FStackTop].Operand = $mod.CondDirectiveBool[+this.IsFalse(this.FStack[this.FStackTop].Operand)];
      } else if ($tmp === 13) {
        this.NextToken();
        this.ReadOperand(Skip);
        if (!Skip) {
          i = $lp8(this.FStack[this.FStackTop].Operand,0);
          this.FStack[this.FStackTop].Operand = $lp5(-i);
        };
      } else if ($tmp === 11) {
        this.NextToken();
        this.ReadOperand(Skip);
        if (!Skip) {
          i = $lp8(this.FStack[this.FStackTop].Operand,0);
          this.FStack[this.FStackTop].Operand = $lp5(i);
        };
      } else if ($tmp === 6) {
        if (!Skip) {
          S = this.GetTokenString();
          $lp2(S,{get: function () {
              return i;
            }, set: function (v) {
              i = v;
            }},{get: function () {
              return Code;
            }, set: function (v) {
              Code = v;
            }});
          if (Code === 0) {
            this.Push($lp5(i),this.FTokenStart);
          } else {
            $lp3(S,{get: function () {
                return e;
              }, set: function (v) {
                e = v;
              }},{get: function () {
                return Code;
              }, set: function (v) {
                Code = v;
              }});
            if (Code > 0) this.Log(1,1022,rtl.getResStr($mod,"SErrRangeCheck"),[],0);
            if (e === 0) ;
            this.Push(S,this.FTokenStart);
          };
        };
        this.NextToken();
      } else if ($tmp === 4) {
        if (!Skip) this.Push(this.GetStringLiteralValue(),this.FTokenStart);
        this.NextToken();
      } else if ($tmp === 3) {
        if (Skip) {
          aName = this.GetTokenString();
          this.NextToken();
          if (this.FToken === 8) {
            this.NextToken();
            if (this.FToken === 3) this.NextToken();
            if (this.FToken !== 9) this.LogXExpectedButTokenFound(")",0);
            this.NextToken();
          } else if (this.isMac && IsMacNoArgFunction(aName)) {
            this.NextToken();
          };
        } else {
          aName = this.GetTokenString();
          p = this.FTokenStart;
          this.NextToken();
          if (this.FToken === 8) {
            NameStartP = this.FTokenStart;
            this.NextToken();
            Param = "";
            if (this.FToken === 3) {
              Param = this.GetTokenString();
              this.NextToken();
            };
            if (this.FToken !== 9) this.LogXExpectedButTokenFound(")",0);
            if (!this.FOnEvalFunction($Self,aName,Param,{get: function () {
                return S;
              }, set: function (v) {
                S = v;
              }})) {
              this.FTokenStart = NameStartP;
              this.FTokenEnd = this.FTokenStart + aName.length;
              this.LogXExpectedButTokenFound("function",0);
            };
            this.Push(S,p);
            this.NextToken();
          } else if (this.isMac && IsMacNoArgFunction(aName)) {
            if (this.FToken !== 3) this.LogXExpectedButTokenFound("identifier",0);
            aName = this.GetTokenString();
            this.Push($mod.CondDirectiveBool[+this.FOnEvalVariable($Self,aName,{get: function () {
                return S;
              }, set: function (v) {
                S = v;
              }})],p);
            this.NextToken();
          } else {
            if (this.FOnEvalVariable($Self,aName,{get: function () {
                return S;
              }, set: function (v) {
                S = v;
              }})) {
              this.Push(S,p)}
             else {
              this.Push($mod.CondDirectiveBool[0],p);
            };
          };
        }}
       else if ($tmp === 8) {
        this.NextToken();
        if (Skip) {
          Lvl = 1;
          do {
            var $tmp1 = this.FToken;
            if ($tmp1 === 0) {
              this.LogXExpectedButTokenFound(")",0)}
             else if ($tmp1 === 8) {
              Lvl += 1}
             else if ($tmp1 === 9) {
              Lvl -= 1;
              if (Lvl === 0) break;
            };
            this.NextToken();
          } while (!false);
        } else {
          this.ReadExpression();
          if (this.FToken !== 9) this.LogXExpectedButTokenFound(")",0);
        };
        this.NextToken();
      } else {
        this.LogXExpectedButTokenFound("identifier",0);
      };
    };
    this.ReadExpression = function () {
      var $Self = this;
      var OldStackTop = 0;
      function ReadBinary(Level, NewOperator) {
        $Self.ResolveStack(OldStackTop,Level,NewOperator);
        $Self.NextToken();
        $Self.ReadOperand(false);
      };
      OldStackTop = this.FStackTop;
      this.ReadOperand(false);
      do {
        var $tmp = this.FToken;
        if (($tmp === 0) || ($tmp === 9)) {
          this.ResolveStack(OldStackTop,$lt15.ceplFourth,0);
          return;
        } else if ($tmp === 40) {
          this.ResolveStack(OldStackTop,1,40);
          this.NextToken();
          if ((this.FStackTop === (OldStackTop + 1)) && this.IsFalse(this.FStack[this.FStackTop].Operand)) {
            do {
              this.ReadOperand(true);
              if (this.FToken !== 40) break;
              this.NextToken();
            } while (!false);
            this.FStack[this.FStackTop].Operathor = 0;
          } else this.ReadOperand(false);
        } else if (($tmp === 10) || ($tmp === 15) || ($tmp === 54) || ($tmp === 79) || ($tmp === 102) || ($tmp === 103)) {
          ReadBinary(1,this.FToken)}
         else if ($tmp === 88) {
          this.ResolveStack(OldStackTop,2,88);
          this.NextToken();
          if ((this.FStackTop === (OldStackTop + 1)) && this.IsTrue(this.FStack[this.FStackTop].Operand)) {
            do {
              this.ReadOperand(true);
              if (!(this.FToken in rtl.createSet(40,88))) break;
              this.NextToken();
            } while (!false);
            this.FStack[this.FStackTop].Operathor = 0;
          } else this.ReadOperand(false);
        } else if (($tmp === 11) || ($tmp === 13) || ($tmp === 117)) {
          ReadBinary(2,this.FToken)}
         else if (($tmp === 19) || ($tmp === 28) || ($tmp === 18) || ($tmp === 20) || ($tmp === 29) || ($tmp === 30)) {
          ReadBinary(3,this.FToken)}
         else {
          this.LogXExpectedButTokenFound("operator",0);
        };
      } while (!false);
    };
    this.ResolveStack = function (MinStackLvl, Level, NewOperator) {
      var A = "";
      var B = "";
      var R = "";
      var Op = 0;
      var AInt = 0;
      var BInt = 0;
      var AFloat = 0.0;
      var BFloat = 0.0;
      var BPos = 0;
      while ((this.FStackTop > (MinStackLvl + 1)) && (this.FStack[this.FStackTop - 1].Level <= Level)) {
        B = this.FStack[this.FStackTop].Operand;
        BPos = this.FStack[this.FStackTop].OperandPos;
        this.FStackTop -= 1;
        Op = this.FStack[this.FStackTop].Operathor;
        A = this.FStack[this.FStackTop].Operand;
        try {
          var $tmp = Op;
          if ($tmp === 40) {
            R = $mod.CondDirectiveBool[+(this.IsTrue(A) && this.IsTrue(B))]}
           else if ($tmp === 88) {
            R = $mod.CondDirectiveBool[+(this.IsTrue(A) || this.IsTrue(B))]}
           else if ($tmp === 117) {
            R = $mod.CondDirectiveBool[+(this.IsTrue(A) ^ this.IsTrue(B))]}
           else if (($tmp === 10) || ($tmp === 54) || ($tmp === 79) || ($tmp === 102) || ($tmp === 103) || ($tmp === 11) || ($tmp === 13)) {
            if (this.IsInteger(A,{get: function () {
                return AInt;
              }, set: function (v) {
                AInt = v;
              }})) {
              if (this.IsInteger(B,{get: function () {
                  return BInt;
                }, set: function (v) {
                  BInt = v;
                }})) {
                var $tmp1 = Op;
                if ($tmp1 === 10) {
                  R = $lp5(AInt * BInt)}
                 else if ($tmp1 === 54) {
                  R = $lp5(rtl.trunc(AInt / BInt))}
                 else if ($tmp1 === 79) {
                  R = $lp5(AInt % BInt)}
                 else if ($tmp1 === 102) {
                  R = $lp5(rtl.shl(AInt,BInt))}
                 else if ($tmp1 === 103) {
                  R = $lp5(rtl.shr(AInt,BInt))}
                 else if ($tmp1 === 11) {
                  R = $lp5(AInt + BInt)}
                 else if ($tmp1 === 13) R = $lp5(AInt - BInt);
              } else if (this.IsExtended(B,{get: function () {
                  return BFloat;
                }, set: function (v) {
                  BFloat = v;
                }})) {
                var $tmp2 = Op;
                if ($tmp2 === 10) {
                  R = $lp9(AInt * BFloat)}
                 else if ($tmp2 === 11) {
                  R = $lp9(AInt + BFloat)}
                 else if ($tmp2 === 13) {
                  R = $lp9(AInt - BFloat)}
                 else {
                  this.LogXExpectedButTokenFound("integer",BPos);
                };
              } else this.LogXExpectedButTokenFound("integer",BPos);
            } else if (this.IsExtended(A,{get: function () {
                return AFloat;
              }, set: function (v) {
                AFloat = v;
              }})) {
              if (this.IsExtended(B,{get: function () {
                  return BFloat;
                }, set: function (v) {
                  BFloat = v;
                }})) {
                var $tmp3 = Op;
                if ($tmp3 === 10) {
                  R = $lp9(AFloat * BFloat)}
                 else if ($tmp3 === 11) {
                  R = $lp9(AFloat + BFloat)}
                 else if ($tmp3 === 13) {
                  R = $lp9(AFloat - BFloat)}
                 else {
                  this.LogXExpectedButTokenFound("float",BPos);
                };
              } else this.LogXExpectedButTokenFound("float",BPos);
            } else this.Log(1,1024,rtl.getResStr($mod,"SErrOperandAndOperatorMismatch"),[],0)}
           else if ($tmp === 15) {
            if (this.IsExtended(A,{get: function () {
                return AFloat;
              }, set: function (v) {
                AFloat = v;
              }})) {
              if (this.IsExtended(B,{get: function () {
                  return BFloat;
                }, set: function (v) {
                  BFloat = v;
                }})) {
                R = $lp9(AFloat / BFloat)}
               else this.LogXExpectedButTokenFound("float",BPos);
            } else this.Log(1,1024,rtl.getResStr($mod,"SErrOperandAndOperatorMismatch"),[],0)}
           else if (($tmp === 19) || ($tmp === 28) || ($tmp === 18) || ($tmp === 20) || ($tmp === 29) || ($tmp === 30)) {
            if (this.IsInteger(A,{get: function () {
                return AInt;
              }, set: function (v) {
                AInt = v;
              }}) && this.IsInteger(B,{get: function () {
                return BInt;
              }, set: function (v) {
                BInt = v;
              }})) {
              var $tmp4 = Op;
              if ($tmp4 === 19) {
                R = $mod.CondDirectiveBool[+(AInt === BInt)]}
               else if ($tmp4 === 28) {
                R = $mod.CondDirectiveBool[+(AInt !== BInt)]}
               else if ($tmp4 === 18) {
                R = $mod.CondDirectiveBool[+(AInt < BInt)]}
               else if ($tmp4 === 20) {
                R = $mod.CondDirectiveBool[+(AInt > BInt)]}
               else if ($tmp4 === 29) {
                R = $mod.CondDirectiveBool[+(AInt <= BInt)]}
               else if ($tmp4 === 30) R = $mod.CondDirectiveBool[+(AInt >= BInt)];
            } else if (this.IsExtended(A,{get: function () {
                return AFloat;
              }, set: function (v) {
                AFloat = v;
              }}) && this.IsExtended(B,{get: function () {
                return BFloat;
              }, set: function (v) {
                BFloat = v;
              }})) {
              var $tmp5 = Op;
              if ($tmp5 === 19) {
                R = $mod.CondDirectiveBool[+(AFloat === BFloat)]}
               else if ($tmp5 === 28) {
                R = $mod.CondDirectiveBool[+(AFloat !== BFloat)]}
               else if ($tmp5 === 18) {
                R = $mod.CondDirectiveBool[+(AFloat < BFloat)]}
               else if ($tmp5 === 20) {
                R = $mod.CondDirectiveBool[+(AFloat > BFloat)]}
               else if ($tmp5 === 29) {
                R = $mod.CondDirectiveBool[+(AFloat <= BFloat)]}
               else if ($tmp5 === 30) R = $mod.CondDirectiveBool[+(AFloat >= BFloat)];
            } else {
              var $tmp6 = Op;
              if ($tmp6 === 19) {
                R = $mod.CondDirectiveBool[+(A === B)]}
               else if ($tmp6 === 28) {
                R = $mod.CondDirectiveBool[+(A !== B)]}
               else if ($tmp6 === 18) {
                R = $mod.CondDirectiveBool[+(A < B)]}
               else if ($tmp6 === 20) {
                R = $mod.CondDirectiveBool[+(A > B)]}
               else if ($tmp6 === 29) {
                R = $mod.CondDirectiveBool[+(A <= B)]}
               else if ($tmp6 === 30) R = $mod.CondDirectiveBool[+(A >= B)];
            };
          } else {
            this.Log(1,1024,rtl.getResStr($mod,"SErrOperandAndOperatorMismatch"),[],0);
          };
        } catch ($e) {
          if ($lt30.isPrototypeOf($e)) {
            var E = $e;
            this.Log(1,1023,rtl.getResStr($mod,"SErrDivByZero"),[],0);
          } else if ($lt31.isPrototypeOf($e)) {
            var E = $e;
            this.Log(1,1023,rtl.getResStr($mod,"SErrDivByZero"),[],0);
          } else if ($lt32.isPrototypeOf($e)) {
            var E = $e;
            this.Log(1,1022,rtl.getResStr($mod,"SErrRangeCheck") + " " + E.fMessage,[],0);
          } else if ($lt33.isPrototypeOf($e)) {
            var E = $e;
            this.Log(1,1022,rtl.getResStr($mod,"SErrRangeCheck") + " " + E.fMessage,[],0);
          } else throw $e
        };
        this.FStack[this.FStackTop].Operand = R;
        this.FStack[this.FStackTop].OperandPos = BPos;
      };
      this.FStack[this.FStackTop].Operathor = NewOperator;
      this.FStack[this.FStackTop].Level = Level;
    };
    this.GetTokenString = function () {
      var Result = "";
      Result = $lp(this.Expression,this.FTokenStart,this.FTokenEnd - this.FTokenStart);
      return Result;
    };
    this.GetStringLiteralValue = function () {
      var Result = "";
      var Src = "";
      var p = 0;
      var l = 0;
      var StartP = 0;
      var c = "\x00";
      Result = "";
      p = this.FTokenStart;
      Src = this.Expression;
      l = Src.length;
      do {
        if ((p > l) || !(Src.charCodeAt(p - 1) in rtl.createSet(39,96))) {
          this.Log(1,1001,rtl.getResStr($mod,"SErrInvalidCharacter"),$lp6(18,"#0"),0)}
         else {
          c = Src.charAt(p - 1);
          p += 1;
          StartP = p;
          do {
            if (p > l) {
              this.Log(1,1001,rtl.getResStr($mod,"SErrInvalidCharacter"),$lp6(18,"#0"),0)}
             else if (Src.charAt(p - 1) === c) {
              break}
             else if ((c === "'") && (Src.charCodeAt(p - 1) in rtl.createSet(10,13))) {
              this.Log(1,1001,rtl.getResStr($mod,"SErrInvalidCharacter"),$lp6(18,"#" + $lp5(Src.charCodeAt(p - 1))),0)}
             else p += 1;
          } while (!false);
          if (p > StartP) Result = Result + $lp(this.Expression,StartP,p - StartP);
          p += 1;
        };
      } while (!false);
      return Result;
    };
    this.Push = function (AnOperand, OperandPosition) {
      this.FStackTop += 1;
      if (this.FStackTop >= rtl.length(this.FStack)) this.FStack = rtl.arraySetLength(this.FStack,$lt16,(rtl.length(this.FStack) * 2) + 4);
      var $with = this.FStack[this.FStackTop];
      $with.Operand = AnOperand;
      $with.OperandPos = OperandPosition;
      $with.Operathor = 0;
      $with.Level = 3;
    };
    this.Create$1 = function (aIsMac) {
      this.isMac = aIsMac;
      return this;
    };
    this.Destroy = function () {
      $lt28.Destroy.call(this);
    };
    this.Eval = function (Expr) {
      var Result = false;
      this.Expression = Expr;
      this.MsgType = 5;
      this.MsgNumber = 0;
      this.MsgPattern = "";
      if (Expr === "") return false;
      this.FTokenStart = 1;
      this.FTokenEnd = this.FTokenStart;
      this.FStackTop = -1;
      this.NextToken();
      this.ReadExpression();
      Result = this.IsTrue(this.FStack[0].Operand);
      return Result;
    };
  });
  rtl.createClass(this,"EScannerError",$lt34,function () {
    $lt17 = this;
  });
  rtl.createClass(this,"EFileNotFoundError",$lt34,function () {
    $lt18 = this;
  });
  $lt19 = this.TPascalScannerPPSkipMode = {"0": "ppSkipNone", ppSkipNone: 0, "1": "ppSkipIfBranch", ppSkipIfBranch: 1, "2": "ppSkipElseBranch", ppSkipElseBranch: 2, "3": "ppSkipAll", ppSkipAll: 3};
  $lt20 = this.TPOption = {"0": "po_delphi", po_delphi: 0, "1": "po_KeepScannerError", po_KeepScannerError: 1, "2": "po_CAssignments", po_CAssignments: 2, "3": "po_ResolveStandardTypes", po_ResolveStandardTypes: 3, "4": "po_AsmWhole", po_AsmWhole: 4, "5": "po_NoOverloadedProcs", po_NoOverloadedProcs: 5, "6": "po_KeepClassForward", po_KeepClassForward: 6, "7": "po_ArrayRangeExpr", po_ArrayRangeExpr: 7, "8": "po_SelfToken", po_SelfToken: 8, "9": "po_CheckModeSwitches", po_CheckModeSwitches: 9, "10": "po_CheckCondFunction", po_CheckCondFunction: 10, "11": "po_StopOnErrorDirective", po_StopOnErrorDirective: 11, "12": "po_ExtConstWithoutExpr", po_ExtConstWithoutExpr: 12, "13": "po_StopOnUnitInterface", po_StopOnUnitInterface: 13, "14": "po_IgnoreUnknownResource", po_IgnoreUnknownResource: 14, "15": "po_AsyncProcs", po_AsyncProcs: 15, "16": "po_DisableResources", po_DisableResources: 16, "17": "po_AsmPascalComments", po_AsmPascalComments: 17, "18": "po_AllowMem", po_AllowMem: 18, "19": "po_WarnResourceNotFound", po_WarnResourceNotFound: 19, "20": "po_CheckDirectiveRTTI", po_CheckDirectiveRTTI: 20};
  rtl.recNewT(this,"TPasSourcePos",function () {
    $lt21 = this;
    this.FileName = "";
    this.Row = 0;
    this.Column = 0;
    this.$eq = function (b) {
      return (this.FileName === b.FileName) && (this.Row === b.Row) && (this.Column === b.Column);
    };
    this.$assign = function (s) {
      this.FileName = s.FileName;
      this.Row = s.Row;
      this.Column = s.Column;
      return this;
    };
  });
  this.DefPasSourcePos = $lt21.$clone({FileName: "", Row: 0, Column: 0});
  $lt22 = this.TPScannerLogEvent = {"0": "sleFile", sleFile: 0, "1": "sleLineNumber", sleLineNumber: 1, "2": "sleConditionals", sleConditionals: 2, "3": "sleDirective", sleDirective: 3};
  rtl.createClass(this,"TPascalScanner",$lt28,function () {
    $lt23 = this;
    rtl.recNewT(this,"TResourceHandlerRecord",function () {
      $lt24 = this;
      this.Ext = "";
      this.Handler = null;
      this.$eq = function (b) {
        return (this.Ext === b.Ext) && rtl.eqCallback(this.Handler,b.Handler);
      };
      this.$assign = function (s) {
        this.Ext = s.Ext;
        this.Handler = s.Handler;
        return this;
      };
    });
    rtl.recNewT(this,"TDirectiveHandlerRecord",function () {
      $lt25 = this;
      this.Directive = "";
      this.Handler = null;
      this.$eq = function (b) {
        return (this.Directive === b.Directive) && rtl.eqCallback(this.Handler,b.Handler);
      };
      this.$assign = function (s) {
        this.Directive = s.Directive;
        this.Handler = s.Handler;
        return this;
      };
    });
    rtl.recNewT(this,"TWarnMsgNumberState",function () {
      $lt26 = this;
      this.Number = 0;
      this.State = 0;
      this.$eq = function (b) {
        return (this.Number === b.Number) && (this.State === b.State);
      };
      this.$assign = function (s) {
        this.Number = s.Number;
        this.State = s.State;
        return this;
      };
    });
    this.$init = function () {
      $lt28.$init.call(this);
      this.FAllowedBoolSwitches = {};
      this.FAllowedModeSwitches = {};
      this.FAllowedValueSwitches = {};
      this.FConditionEval = null;
      this.FCurModulename = "";
      this.FCurrentBoolSwitches = {};
      this.FCurrentModeSwitches = {};
      this.FCurrentValueSwitches = rtl.arraySetLength(null,"",3);
      this.FCurtokenEscaped = false;
      this.FCurTokenPos = $lt21.$new();
      this.FLastMsg = "";
      this.FLastMsgArgs = [];
      this.FLastMsgNumber = 0;
      this.FLastMsgPattern = "";
      this.FLastMsgType = 0;
      this.FFileResolver = null;
      this.FCurSourceFile = null;
      this.FCurFilename = "";
      this.FCurRow = 0;
      this.FCurColumnOffset = 0;
      this.FCurToken = 0;
      this.FCurTokenString = "";
      this.FCurLine = "";
      this.FMaxIncludeStackDepth = 0;
      this.FModuleRow = 0;
      this.FMacros = null;
      this.FDefines = null;
      this.FMultilineStringsEOLStyle = 0;
      this.FMultilineStringsTrimLeft = 0;
      this.FNonTokens = {};
      this.FOnComment = null;
      this.FOnDirective = null;
      this.FOnDirectiveForConditionals = false;
      this.FOnEvalFunction = null;
      this.FOnEvalVariable = null;
      this.FOnFormatPath = null;
      this.FOnLinkLib = null;
      this.FOnModeChanged = null;
      this.FOnWarnDirective = null;
      this.FOptions = {};
      this.FLogEvents = {};
      this.FOnLog = null;
      this.FPreviousToken = 0;
      this.FReadOnlyBoolSwitches = {};
      this.FReadOnlyModeSwitches = {};
      this.FReadOnlyValueSwitches = {};
      this.FSkipComments = false;
      this.FSkipGlobalSwitches = false;
      this.FSkipWhiteSpace = false;
      this.FTokenOptions = {};
      this.FTokenPos = 0;
      this.FIncludeStack = null;
      this.FFiles = null;
      this.FWarnMsgStates = [];
      this.FResourceHandlers = [];
      this.FDirectiveHandles = [];
      this.PPSkipMode = 0;
      this.PPIsSkipping = false;
      this.PPSkipStackIndex = 0;
      this.PPSkipModeStack = rtl.arraySetLength(null,0,256);
      this.PPIsSkippingStack = rtl.arraySetLength(null,false,256);
    };
    this.$final = function () {
      this.FAllowedBoolSwitches = undefined;
      this.FAllowedModeSwitches = undefined;
      this.FAllowedValueSwitches = undefined;
      this.FConditionEval = undefined;
      this.FCurrentBoolSwitches = undefined;
      this.FCurrentModeSwitches = undefined;
      this.FCurrentValueSwitches = undefined;
      this.FCurTokenPos = undefined;
      this.FLastMsgArgs = undefined;
      this.FFileResolver = undefined;
      this.FCurSourceFile = undefined;
      this.FMacros = undefined;
      this.FDefines = undefined;
      this.FNonTokens = undefined;
      this.FOnComment = undefined;
      this.FOnDirective = undefined;
      this.FOnEvalFunction = undefined;
      this.FOnEvalVariable = undefined;
      this.FOnFormatPath = undefined;
      this.FOnLinkLib = undefined;
      this.FOnModeChanged = undefined;
      this.FOnWarnDirective = undefined;
      this.FOptions = undefined;
      this.FLogEvents = undefined;
      this.FOnLog = undefined;
      this.FReadOnlyBoolSwitches = undefined;
      this.FReadOnlyModeSwitches = undefined;
      this.FReadOnlyValueSwitches = undefined;
      this.FTokenOptions = undefined;
      this.FIncludeStack = undefined;
      this.FFiles = undefined;
      this.FWarnMsgStates = undefined;
      this.FResourceHandlers = undefined;
      this.FDirectiveHandles = undefined;
      this.PPSkipModeStack = undefined;
      this.PPIsSkippingStack = undefined;
      $lt28.$final.call(this);
    };
    this.HandleTextBlock = function (AParam) {
      var S = 0;
      var P = 0;
      var Parm = "";
      Parm = $lp10($lp11(AParam));
      P = $lp12(" ",Parm);
      if (P > 1) Parm = $lp(Parm,1,P - 1);
      var $tmp = Parm;
      if ($tmp === "CR") {
        S = 3}
       else if ($tmp === "LF") {
        S = 2}
       else if ($tmp === "CRLF") {
        S = 4}
       else if ($tmp === "NATIVE") {
        S = 0}
       else {
        this.Error(1035,rtl.getResStr($mod,"SErrInvalidMultiLineLineEnding"));
      };
      this.FMultilineStringsEOLStyle = S;
    };
    this.GetCurColumn = function () {
      var Result = 0;
      if (this.FTokenPos > 0) {
        Result = (this.FTokenPos - 1) + this.FCurColumnOffset}
       else Result = this.FCurColumnOffset;
      return Result;
    };
    this.GetCurrentValueSwitch = function (V) {
      var Result = "";
      Result = this.FCurrentValueSwitches[V];
      return Result;
    };
    this.GetForceCaret = function () {
      var Result = false;
      Result = 0 in this.FTokenOptions;
      return Result;
    };
    this.GetMacrosOn = function () {
      var Result = false;
      Result = 25 in this.FCurrentBoolSwitches;
      return Result;
    };
    this.GetTokenString = function () {
      var Result = "";
      Result = this.FCurTokenString;
      return Result;
    };
    this.IndexOfWarnMsgState = function (number, InsertPos) {
      var Result = 0;
      var l = 0;
      var r = 0;
      var m = 0;
      var CurNumber = 0;
      l = 0;
      r = rtl.length(this.FWarnMsgStates) - 1;
      m = 0;
      while (l <= r) {
        m = rtl.trunc((l + r) / 2);
        CurNumber = this.FWarnMsgStates[m].Number;
        if (number > CurNumber) {
          l = m + 1}
         else if (number < CurNumber) {
          r = m - 1}
         else return m;
      };
      if (!InsertPos) return -1;
      if (rtl.length(this.FWarnMsgStates) === 0) return 0;
      if ((m < rtl.length(this.FWarnMsgStates)) && (this.FWarnMsgStates[m].Number <= number)) m += 1;
      Result = m;
      return Result;
    };
    this.OnCondEvalFunction = function (Sender, Name, Param, Value) {
      var Result = false;
      if ($lp13(Name,"defined") === 0) {
        if (!$lp14(Param,false,false)) Sender.Log(1,1021,rtl.getResStr($mod,"SErrXExpectedButYFound"),$lp6(18,"identifier",18,Param),0);
        Value.set($mod.CondDirectiveBool[+this.IsDefined(Param)]);
        return true;
      } else if ($lp13(Name,"undefined") === 0) {
        if (!$lp14(Param,false,false)) Sender.Log(1,1021,rtl.getResStr($mod,"SErrXExpectedButYFound"),$lp6(18,"identifier",18,Param),0);
        Value.set($mod.CondDirectiveBool[+!this.IsDefined(Param)]);
        return true;
      } else if ($lp13(Name,"option") === 0) {
        if ((Param.length !== 1) || !(Param.charCodeAt(0) in rtl.createSet(null,97,122,null,65,90))) Sender.Log(1,1021,rtl.getResStr($mod,"SErrXExpectedButYFound"),$lp6(18,"letter",18,Param),0);
        Value.set($mod.CondDirectiveBool[+this.IfOpt(Param.charAt(0))]);
        return true;
      };
      if (this.FOnEvalFunction != null) {
        Result = this.FOnEvalFunction(Sender,Name,Param,Value);
        if (!(10 in this.FOptions)) {
          Value.set("0");
          Result = true;
        };
        return Result;
      };
      if (10 in this.FOptions) {
        Value.set("");
        Result = false;
      } else {
        Value.set("0");
        Result = true;
      };
      return Result;
    };
    this.OnCondEvalLog = function (Sender, Args) {
      var Msg = "";
      if (Sender.MsgType <= 1) {
        this.SetCurMsg(Sender.MsgType,Sender.MsgNumber,Sender.MsgPattern,Args);
        Msg = $lp15("%s(%d,%d) : %s",$lp6(18,this.FormatPath(this.FCurFilename),0,this.FCurRow,0,this.GetCurColumn(),18,this.FLastMsg));
        throw $lt17.$create("Create$1",[Msg]);
      } else this.DoLog$1(Sender.MsgType,Sender.MsgNumber,Sender.MsgPattern,Args,true);
    };
    this.OnCondEvalVar = function (Sender, Name, Value) {
      var Result = false;
      var i = 0;
      var M = null;
      if (this.FDefines.IndexOf(Name) >= 0) {
        Value.set("1");
        return true;
      };
      i = this.FMacros.IndexOf(Name);
      if (i >= 0) {
        M = rtl.as(this.FMacros.GetObject(i),$lt7);
        Value.set(M.FValue);
        return true;
      };
      if (this.FOnEvalVariable != null) {
        Result = this.FOnEvalVariable(Sender,Name,Value);
        return Result;
      };
      Value.set("");
      Result = false;
      return Result;
    };
    this.SetAllowedBoolSwitches = function (AValue) {
      if (rtl.eqSet(this.FAllowedBoolSwitches,AValue)) return;
      this.FAllowedBoolSwitches = rtl.refSet(AValue);
    };
    this.SetAllowedModeSwitches = function (AValue) {
      if (rtl.eqSet(this.FAllowedModeSwitches,AValue)) return;
      this.FAllowedModeSwitches = rtl.refSet(AValue);
      this.SetCurrentModeSwitches(rtl.intersectSet(this.FCurrentModeSwitches,this.FAllowedModeSwitches));
    };
    this.SetAllowedValueSwitches = function (AValue) {
      if (rtl.eqSet(this.FAllowedValueSwitches,AValue)) return;
      this.FAllowedValueSwitches = rtl.refSet(AValue);
    };
    this.SetOptions = function (AValue) {
      var isModeSwitch = false;
      if (rtl.eqSet(this.FOptions,AValue)) return;
      isModeSwitch = (0 in AValue) !== (0 in this.FOptions);
      this.FOptions = rtl.refSet(AValue);
      if (isModeSwitch) if (0 in this.FOptions) {
        this.SetCurrentModeSwitches(rtl.refSet($mod.DelphiModeSwitches))}
       else this.SetCurrentModeSwitches(rtl.refSet($mod.FPCModeSwitches));
    };
    this.SetReadOnlyBoolSwitches = function (AValue) {
      if (rtl.eqSet(this.FReadOnlyBoolSwitches,AValue)) return;
      this.FReadOnlyBoolSwitches = rtl.refSet(AValue);
    };
    this.SetReadOnlyModeSwitches = function (AValue) {
      if (rtl.eqSet(this.FReadOnlyModeSwitches,AValue)) return;
      this.FReadOnlyModeSwitches = rtl.refSet(AValue);
      this.FAllowedModeSwitches = rtl.unionSet(this.FAllowedModeSwitches,this.FReadOnlyModeSwitches);
      this.FCurrentModeSwitches = rtl.unionSet(this.FCurrentModeSwitches,this.FReadOnlyModeSwitches);
    };
    this.SetReadOnlyValueSwitches = function (AValue) {
      if (rtl.eqSet(this.FReadOnlyValueSwitches,AValue)) return;
      this.FReadOnlyValueSwitches = rtl.refSet(AValue);
    };
    this.IndexOfResourceHandler = function (aExt) {
      var Result = 0;
      Result = rtl.length(this.FResourceHandlers) - 1;
      while ((Result >= 0) && (this.FResourceHandlers[Result].Ext !== aExt)) Result -= 1;
      return Result;
    };
    this.FindResourceHandler = function (aExt) {
      var Result = null;
      var Idx = 0;
      Idx = this.IndexOfResourceHandler(aExt);
      if (Idx === -1) {
        Result = null}
       else Result = this.FResourceHandlers[Idx].Handler;
      return Result;
    };
    this.IndexOfDirectiveHandle = function (aDirective, ForInsert) {
      var Result = 0;
      var l = 0;
      var r = 0;
      var m = 0;
      var cmp = 0;
      l = 0;
      r = rtl.length(this.FDirectiveHandles) - 1;
      m = 0;
      while (l <= r) {
        m = rtl.trunc((l + r) / 2);
        cmp = $lp13(aDirective,this.FDirectiveHandles[m].Directive);
        if (cmp > 0) {
          l = m + 1}
         else if (cmp < 0) {
          r = m - 1}
         else return m;
      };
      if (!ForInsert) return -1;
      Result = m;
      if (rtl.length(this.FDirectiveHandles) === 0) return Result;
      if (cmp > 0) Result += 1;
      return Result;
    };
    this.ReadIdentifier = function (AParam) {
      var Result = "";
      var p = 0;
      var l = 0;
      p = 1;
      l = AParam.length;
      while ((p <= l) && (AParam.charCodeAt(p - 1) in $impl.IdentChars)) p += 1;
      Result = $lp16(AParam,p - 1);
      return Result;
    };
    this.FetchLine = function () {
      var Result = false;
      if (this.FCurSourceFile.IsEOF()) {
        if (this.FTokenPos > 0) {
          this.FCurLine = "";
          this.FTokenPos = -1;
          this.FCurRow += 1;
          this.FModuleRow += 1;
          this.FCurColumnOffset = 1;
        };
        Result = false;
      } else {
        this.FCurLine = this.FCurSourceFile.ReadLine();
        this.FTokenPos = 1;
        Result = true;
        this.FCurRow += 1;
        this.FModuleRow += 1;
        this.FCurColumnOffset = 1;
        if ($lt12.isPrototypeOf(this.FCurSourceFile) && (this.FCurRow === 1)) {
          this.FCurRow = this.FCurSourceFile.FCurRow;
          this.FCurColumnOffset = this.FCurSourceFile.FCurCol;
        };
        if (this.LogEvent(1) && (((this.FCurRow % 100) === 0) || this.FCurSourceFile.IsEOF())) this.DoLog$1(5,1008,rtl.getResStr($mod,"SLogLineNumber"),$lp6(0,this.FCurRow),true);
      };
      return Result;
    };
    this.AddFile = function (aFilename) {
      var i = 0;
      for (var $l = 0, $end = this.FFiles.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        if (this.FFiles.Get(i) === aFilename) return;
      };
      this.FFiles.Add(aFilename);
    };
    this.GetMacroName = function (Param) {
      var Result = "";
      var p = 0;
      Result = $lp11(Param);
      p = 1;
      while ((p <= Result.length) && (Result.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,null,48,57,95))) p += 1;
      Result = rtl.strSetLength(Result,p - 1);
      Result = $lp10(Result);
      return Result;
    };
    this.SetCurMsg = function (MsgType, MsgNumber, Fmt, Args) {
      this.FLastMsgType = MsgType;
      this.FLastMsgNumber = MsgNumber;
      this.FLastMsgPattern = Fmt;
      this.FLastMsg = $mod.SafeFormat(Fmt,Args);
      $mod.CreateMsgArgs({p: this, get: function () {
          return this.p.FLastMsgArgs;
        }, set: function (v) {
          this.p.FLastMsgArgs = v;
        }},Args);
    };
    this.DoLog$1 = function (MsgType, MsgNumber, Fmt, Args, SkipSourceInfo) {
      var Msg = "";
      if (this.IgnoreMsgType(MsgType)) return;
      this.SetCurMsg(MsgType,MsgNumber,Fmt,Args);
      if (this.FOnLog != null) {
        Msg = $mod.MessageTypeNames[MsgType] + ": ";
        if (SkipSourceInfo) {
          Msg = Msg + this.FLastMsg}
         else Msg = Msg + $lp15("%s(%d,%d) : %s",$lp6(18,this.FormatPath(this.FCurFilename),0,this.FCurRow,0,this.GetCurColumn(),18,this.FLastMsg));
        this.FOnLog(this,Msg);
      };
    };
    this.ErrorAt = function (MsgNumber, Msg, aRow, ACol) {
      this.SetCurMsg(1,MsgNumber,Msg,[]);
      throw $lt17.$create("CreateFmt",["%s(%d,%d) Error: %s",$lp6(18,this.FormatPath(this.FCurFilename),0,aRow,0,ACol,18,this.FLastMsg)]);
    };
    this.Error = function (MsgNumber, Msg) {
      this.ErrorAt(MsgNumber,Msg,this.FCurRow,this.GetCurColumn());
    };
    this.Error$1 = function (MsgNumber, Fmt, Args) {
      this.SetCurMsg(1,MsgNumber,Fmt,Args);
      throw $lt17.$create("CreateFmt",["%s(%d,%d) Error: %s",$lp6(18,this.FormatPath(this.FCurFilename),0,this.FCurRow,0,this.GetCurColumn(),18,this.FLastMsg)]);
    };
    this.PushSkipMode = function () {
      if (this.PPSkipStackIndex === 255) this.Error(1004,rtl.getResStr($mod,"SErrIfXXXNestingLimitReached"));
      this.PPSkipModeStack[this.PPSkipStackIndex] = this.PPSkipMode;
      this.PPIsSkippingStack[this.PPSkipStackIndex] = this.PPIsSkipping;
      this.PPSkipStackIndex += 1;
    };
    this.GetMultiLineStringLineEnd = function (aReader) {
      var Result = "";
      var aLF = "";
      var aStyle = 0;
      aStyle = this.FMultilineStringsEOLStyle;
      if (aStyle === 1) aStyle = aReader.LastEOLStyle();
      var $tmp = aStyle;
      if ($tmp === 3) {
        aLF = "\r"}
       else if ($tmp === 4) {
        aLF = "\r\n"}
       else if ($tmp === 2) {
        aLF = "\n"}
       else if ($tmp === 0) {
        aLF = $lm.sLineBreak}
       else {
        aLF = "\n";
      };
      Result = aLF;
      return Result;
    };
    this.MakeLibAlias = function (LibFileName) {
      var Result = "";
      var p = 0;
      var l = 0;
      var d = 0;
      l = LibFileName.length;
      p = l;
      d = 0;
      while ((p > 0) && !(LibFileName.charAt(p - 1) === "/")) {
        if ((LibFileName.charAt(p - 1) === ".") && (d === 0)) d = p;
        p -= 1;
      };
      if (d === 0) d = l + 1;
      Result = $lp4($lp(LibFileName,p + 1,d - p - 1));
      for (var $l = 1, $end = Result.length; $l <= $end; $l++) {
        p = $l;
        if (!(Result.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,null,48,57,95))) Result = rtl.setCharAt(Result,p - 1,"_");
      };
      return Result;
    };
    this.HandleDirective = function (ADirectiveText) {
      var $Self = this;
      var Result = 0;
      var Directive = "";
      var Param = "";
      var P = 0;
      var IsFlowControl = false;
      var Handled = false;
      function DoBoolDirective(bs) {
        if (bs in $Self.FAllowedBoolSwitches) {
          Handled = true;
          $Self.HandleBoolDirective(bs,Param);
        } else Handled = false;
      };
      Result = 2;
      P = $lp12(" ",ADirectiveText);
      if (P === 0) {
        P = $lp12("\t",ADirectiveText);
        if (P === 0) P = ADirectiveText.length + 1;
      };
      Directive = $lp(ADirectiveText,2,P - 2);
      Param = ADirectiveText;
      $lp17({get: function () {
          return Param;
        }, set: function (v) {
          Param = v;
        }},1,P);
      Handled = true;
      IsFlowControl = true;
      var $tmp = $lp10(Directive);
      if ($tmp === "IFDEF") {
        this.HandleIFDEF(Param)}
       else if ($tmp === "IFNDEF") {
        this.HandleIFNDEF(Param)}
       else if ($tmp === "IFOPT") {
        this.HandleIFOPT(Param)}
       else if (($tmp === "IFC") || ($tmp === "IF")) {
        this.HandleIF(Param,$lp10(Directive) === "IFC")}
       else if (($tmp === "ELIFC") || ($tmp === "ELSEIF")) {
        this.HandleELSEIF(Param,$lp10(Directive) === "ELIFC")}
       else if (($tmp === "ELSEC") || ($tmp === "ELSE")) {
        this.HandleELSE(Param)}
       else if (($tmp === "ENDC") || ($tmp === "ENDIF")) {
        this.HandleENDIF(Param)}
       else if ($tmp === "IFEND") {
        this.HandleENDIF(Param)}
       else {
        if (this.PPIsSkipping) return Result;
        IsFlowControl = false;
        Handled = false;
        if ((Directive.length === 2) && (Directive.charCodeAt(0) in rtl.createSet(null,97,122,null,65,90)) && (Directive.charCodeAt(1) in rtl.createSet(45,43))) {
          Handled = true;
          Result = this.HandleLetterDirective(Directive.charAt(0),Directive.charAt(1) === "+");
        };
        if (!Handled) {
          Handled = true;
          Param = $lp11(Param);
          var $tmp1 = $lp10(Directive);
          if ($tmp1 === "ASSERTIONS") {
            DoBoolDirective(3)}
           else if (($tmp1 === "DEFINE") || ($tmp1 === "DEFINEC") || ($tmp1 === "SETC")) {
            this.HandleDefine(Param)}
           else if ($tmp1 === "GOTO") {
            DoBoolDirective(29)}
           else if ($tmp1 === "DISPATCHFIELD") {
            this.HandleDispatchField(Param,1)}
           else if ($tmp1 === "DISPATCHSTRFIELD") {
            this.HandleDispatchField(Param,2)}
           else if ($tmp1 === "ERROR") {
            this.HandleError(Param)}
           else if ($tmp1 === "HINT") {
            this.DoLog$1(4,1025,rtl.getResStr($mod,"SUserDefined"),$lp6(18,Param),false)}
           else if ($tmp1 === "HINTS") {
            DoBoolDirective(22)}
           else if (($tmp1 === "I") || ($tmp1 === "INCLUDE")) {
            Result = this.HandleInclude(Param)}
           else if (($tmp1 === "INCLUDESTRING") || ($tmp1 === "INCLUDESTRINGFILE")) {
            this.HandleIncludeString(Param);
            Result = 4;
          } else if ($tmp1 === "INTERFACES") {
            this.HandleInterfaces(Param)}
           else if ($tmp1 === "LONGSTRINGS") {
            DoBoolDirective(7)}
           else if ($tmp1 === "LINKLIB") {
            this.HandleLinkLib(Param)}
           else if ($tmp1 === "MACRO") {
            DoBoolDirective(25)}
           else if ($tmp1 === "MESSAGE") {
            this.HandleMessageDirective(Param)}
           else if ($tmp1 === "MODE") {
            this.HandleMode(Param)}
           else if ($tmp1 === "MODESWITCH") {
            this.HandleModeSwitch(Param)}
           else if ($tmp1 === "MULTILINESTRINGLINEENDING") {
            this.HandleMultilineStringLineEnding(Param)}
           else if ($tmp1 === "MULTILINESTRINGTRIMLEFT") {
            this.HandleMultilineStringTrimLeft(Param)}
           else if ($tmp1 === "NOTE") {
            this.DoLog$1(3,1025,rtl.getResStr($mod,"SUserDefined"),$lp6(18,Param),false)}
           else if ($tmp1 === "NOTES") {
            DoBoolDirective(23)}
           else if ($tmp1 === "OBJECTCHECKS") {
            DoBoolDirective(27)}
           else if ($tmp1 === "OPTIMIZATION") {
            this.HandleOptimizations(Param)}
           else if (($tmp1 === "OVERFLOWCHECKS") || ($tmp1 === "OV")) {
            DoBoolDirective(14)}
           else if ($tmp1 === "POINTERMATH") {
            DoBoolDirective(28)}
           else if ($tmp1 === "R") {
            if (!(16 in this.FOptions)) this.HandleResource(Param)}
           else if ($tmp1 === "RANGECHECKS") {
            DoBoolDirective(15)}
           else if ($tmp1 === "SCOPEDENUMS") {
            DoBoolDirective(26)}
           else if ($tmp1 === "TEXTBLOCK") {
            this.HandleTextBlock(Param)}
           else if ($tmp1 === "TYPEDADDRESS") {
            DoBoolDirective(16)}
           else if ($tmp1 === "TYPEINFO") {
            DoBoolDirective(11)}
           else if ($tmp1 === "UNDEF") {
            this.HandleUnDefine(Param)}
           else if ($tmp1 === "WARN") {
            this.HandleWarn(Param)}
           else if ($tmp1 === "WARNING") {
            this.DoLog$1(2,1025,rtl.getResStr($mod,"SUserDefined"),$lp6(18,Param),false)}
           else if ($tmp1 === "WARNINGS") {
            DoBoolDirective(24)}
           else if ($tmp1 === "WRITEABLECONST") {
            DoBoolDirective(9)}
           else if (($tmp1 === "ALIGN") || ($tmp1 === "CALLING") || ($tmp1 === "INLINE") || ($tmp1 === "PACKRECORDS") || ($tmp1 === "PACKENUM")) {}
          else {
            Handled = false;
          };
        };
      };
      if (!IsFlowControl || this.FOnDirectiveForConditionals) this.DoHandleDirective($Self,Directive,Param,{get: function () {
          return Handled;
        }, set: function (v) {
          Handled = v;
        }});
      if (!(Handled || IsFlowControl)) if (this.LogEvent(3)) this.DoLog$1(2,1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,Directive),false);
      return Result;
    };
    this.HandleLetterDirective = function (Letter, Enable) {
      var Result = 0;
      var bs = 0;
      Result = 2;
      Letter = $lp18(Letter);
      bs = $mod.LetterToBoolSwitch[Letter.charCodeAt() - 65];
      if (bs === 0) this.DoLog$1(2,1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(9,Letter),false);
      if (!(bs in this.FAllowedBoolSwitches)) {
        this.DoLog$1(2,1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(9,Letter),false);
      };
      if ((bs in this.FCurrentBoolSwitches) !== Enable) {
        if (bs in this.FReadOnlyBoolSwitches) {
          this.DoLog$1(2,1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,Letter + $lp19(Enable,"+","-")),false);
          return Result;
        };
        if (Enable) {
          this.AddDefine($mod.LetterSwitchNames[Letter.charCodeAt() - 65],false);
          this.FCurrentBoolSwitches = rtl.includeSet(this.FCurrentBoolSwitches,bs);
        } else {
          this.UnDefine($mod.LetterSwitchNames[Letter.charCodeAt() - 65],false);
          this.FCurrentBoolSwitches = rtl.excludeSet(this.FCurrentBoolSwitches,bs);
        };
      };
      return Result;
    };
    this.HandleBoolDirective = function (bs, Param) {
      var NewValue = false;
      if ($lp13(Param,"on") === 0) {
        NewValue = true}
       else if ($lp13(Param,"off") === 0) {
        NewValue = false}
       else {
        NewValue = true;
        this.Error$1(1021,rtl.getResStr($mod,"SErrXExpectedButYFound"),$lp6(18,"on",18,Param));
      };
      if ((bs in this.FCurrentBoolSwitches) === NewValue) return;
      if (bs in this.FReadOnlyBoolSwitches) {
        this.DoLog$1(2,1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,$mod.BoolSwitchNames[bs]),false)}
       else if (NewValue) {
        this.SetCurrentBoolSwitches(rtl.unionSet(this.FCurrentBoolSwitches,rtl.createSet(bs)))}
       else this.SetCurrentBoolSwitches(rtl.diffSet(this.FCurrentBoolSwitches,rtl.createSet(bs)));
    };
    this.DoHandleComment = function (Sender, aComment) {
      if (this.FOnComment != null) this.FOnComment(Sender,aComment);
    };
    this.DoHandleDirective = function (Sender, Directive, Param, Handled) {
      var i = 0;
      i = this.IndexOfDirectiveHandle(Directive,false);
      if (i >= 0) this.FDirectiveHandles[i].Handler(Sender,Directive,Param,Handled);
      if (this.FOnDirective != null) {
        this.FOnDirective(Sender,Directive,Param,Handled);
        if (Handled.get()) return;
      };
    };
    this.HandleMultilineStringTrimLeft = function (AParam) {
      var S = "";
      var i = 0;
      S = $lp10($lp11(AParam));
      var $tmp = $lp10(S);
      if ($tmp === "ALL") {
        i = -2}
       else if ($tmp === "AUTO") {
        i = -1}
       else if ($tmp === "NONE") {
        i = 0}
       else {
        if (!$lp20(S,{get: function () {
            return i;
          }, set: function (v) {
            i = v;
          }})) i = 0;
      };
      this.FMultilineStringsTrimLeft = i;
    };
    this.HandleMultilineStringLineEnding = function (AParam) {
      var S = 0;
      var $tmp = $lp10($lp11(AParam));
      if ($tmp === "CR") {
        S = 3}
       else if ($tmp === "LF") {
        S = 2}
       else if ($tmp === "CRLF") {
        S = 4}
       else if ($tmp === "SOURCE") {
        S = 1}
       else if ($tmp === "PLATFORM") {
        S = 0}
       else {
        this.Error(1035,rtl.getResStr($mod,"SErrInvalidMultiLineLineEnding"));
      };
      this.FMultilineStringsEOLStyle = S;
    };
    this.HandleMultilineComment = function () {
      var $Self = this;
      var Result = 0;
      var TokenStart = 0;
      var s = "";
      var l = 0;
      var SectionLength = 0;
      var NestingLevel = 0;
      function FetchLocalLine() {
        var Result = false;
        Result = $Self.FetchLine();
        if (!Result) return Result;
        s = $Self.FCurLine;
        l = s.length;
        return Result;
      };
      this.FTokenPos += 1;
      TokenStart = this.FTokenPos;
      this.FCurTokenString = "";
      s = this.FCurLine;
      l = this.FCurLine.length;
      NestingLevel = 0;
      do {
        if (this.FTokenPos > l) {
          SectionLength = this.FTokenPos - TokenStart;
          this.FCurTokenString = this.FCurTokenString + $lp(s,TokenStart,SectionLength) + $lm.LineEnding;
          if (!FetchLocalLine()) {
            Result = 0;
            this.FCurToken = Result;
            return Result;
          };
          TokenStart = this.FTokenPos;
        } else if (s.charAt(this.FTokenPos - 1) === "}") {
          NestingLevel -= 1;
          if (NestingLevel < 0) break;
          this.FTokenPos += 1;
        } else if ((s.charAt(this.FTokenPos - 1) === "{") && (15 in this.FCurrentModeSwitches)) {
          this.FTokenPos += 1;
          NestingLevel += 1;
        } else this.FTokenPos += 1;
      } while (!false);
      SectionLength = this.FTokenPos - TokenStart;
      this.FCurTokenString = this.FCurTokenString + $lp(s,TokenStart,SectionLength);
      this.FTokenPos += 1;
      Result = 2;
      if ((this.GetTokenString().length > 0) && (this.GetTokenString().charAt(0) === "$")) {
        Result = this.HandleDirective(this.GetTokenString())}
       else this.DoHandleComment($Self,this.GetTokenString());
      return Result;
    };
    this.HandleMultilineCommentOldStyle = function () {
      var $Self = this;
      var Result = 0;
      var TokenStart = 0;
      var s = "";
      var l = 0;
      var SectionLength = 0;
      var NestingLevel = 0;
      function FetchLocalLine() {
        var Result = false;
        Result = $Self.FetchLine();
        if (!Result) return Result;
        s = $Self.FCurLine;
        l = s.length;
        return Result;
      };
      this.FTokenPos += 1;
      TokenStart = this.FTokenPos;
      this.FCurTokenString = "";
      NestingLevel = 0;
      do {
        if (this.FTokenPos > l) {
          SectionLength = this.FTokenPos - TokenStart;
          this.FCurTokenString = this.FCurTokenString + $lp(this.FCurLine,TokenStart,SectionLength) + $lm.LineEnding;
          if (!FetchLocalLine()) {
            Result = 0;
            this.FCurToken = Result;
            return Result;
          };
          TokenStart = this.FTokenPos;
        } else if ((this.FTokenPos < l) && (s.charAt(this.FTokenPos - 1) === "*") && (s.charAt((this.FTokenPos + 1) - 1) === ")")) {
          NestingLevel -= 1;
          if (NestingLevel < 0) break;
          this.FTokenPos += 2;
        } else if ((15 in this.FCurrentModeSwitches) && (this.FTokenPos < l) && (s.charAt(this.FTokenPos - 1) === "(") && (s.charAt((this.FTokenPos + 1) - 1) === "*")) {
          this.FTokenPos += 2;
          NestingLevel += 1;
        } else this.FTokenPos += 1;
      } while (!false);
      SectionLength = this.FTokenPos - TokenStart;
      this.FCurTokenString = this.FCurTokenString + $lp(this.FCurLine,TokenStart,SectionLength);
      this.FTokenPos += 2;
      Result = 2;
      if ($lp(this.GetTokenString(),1,1) === "$") {
        Result = this.HandleDirective(this.GetTokenString())}
       else this.DoHandleComment($Self,this.GetTokenString());
      return Result;
    };
    this.HandleIFDEF = function (AParam) {
      var aName = "";
      this.PushSkipMode();
      if (this.PPIsSkipping) {
        this.PPSkipMode = 3}
       else {
        aName = this.ReadIdentifier(AParam);
        if (this.IsDefined(aName)) {
          this.PPSkipMode = 2}
         else {
          this.PPSkipMode = 1;
          this.PPIsSkipping = true;
        };
        if (this.LogEvent(2)) if (this.PPSkipMode === 2) {
          this.DoLog$1(5,1009,rtl.getResStr($mod,"SLogIFDefAccepted"),$lp6(18,aName),false)}
         else this.DoLog$1(5,1010,rtl.getResStr($mod,"SLogIFDefRejected"),$lp6(18,aName),false);
      };
    };
    this.HandleIFNDEF = function (AParam) {
      var aName = "";
      this.PushSkipMode();
      if (this.PPIsSkipping) {
        this.PPSkipMode = 3}
       else {
        aName = this.ReadIdentifier(AParam);
        if (this.IsDefined(aName)) {
          this.PPSkipMode = 1;
          this.PPIsSkipping = true;
        } else this.PPSkipMode = 2;
        if (this.LogEvent(2)) if (this.PPSkipMode === 2) {
          this.DoLog$1(5,1011,rtl.getResStr($mod,"SLogIFNDefAccepted"),$lp6(18,aName),false)}
         else this.DoLog$1(5,1012,rtl.getResStr($mod,"SLogIFNDefRejected"),$lp6(18,aName),false);
      };
    };
    this.HandleIFOPT = function (AParam) {
      this.PushSkipMode();
      if (this.PPIsSkipping) {
        this.PPSkipMode = 3}
       else {
        if ((AParam.length !== 2) || !(AParam.charCodeAt(0) in rtl.createSet(null,97,122,null,65,90)) || !(AParam.charCodeAt(1) in rtl.createSet(43,45))) this.Error$1(1021,rtl.getResStr($mod,"SErrXExpectedButYFound"),$lp6(18,"letter[+|-]",18,AParam));
        if (this.IfOpt(AParam.charAt(0)) === (AParam.charAt(1) === "+")) {
          this.PPSkipMode = 2}
         else {
          this.PPSkipMode = 1;
          this.PPIsSkipping = true;
        };
        if (this.LogEvent(2)) if (this.PPSkipMode === 2) {
          this.DoLog$1(5,1015,rtl.getResStr($mod,"SLogIFOptAccepted"),$lp6(18,AParam),false)}
         else this.DoLog$1(5,1016,rtl.getResStr($mod,"SLogIFOptRejected"),$lp6(18,AParam),false);
      };
    };
    this.HandleIF = function (AParam, aIsMac) {
      this.PushSkipMode();
      if (this.PPIsSkipping) {
        this.PPSkipMode = 3}
       else {
        this.FConditionEval.MsgCurLine = this.FCurTokenPos.Row;
        this.FConditionEval.isMac = aIsMac;
        if (this.FConditionEval.Eval(AParam)) {
          this.PPSkipMode = 2}
         else {
          this.PPSkipMode = 1;
          this.PPIsSkipping = true;
        };
        if (this.LogEvent(2)) if (this.PPSkipMode === 2) {
          this.DoLog$1(5,1013,rtl.getResStr($mod,"SLogIFAccepted"),$lp6(18,AParam),false)}
         else this.DoLog$1(5,1014,rtl.getResStr($mod,"SLogIFRejected"),$lp6(18,AParam),false);
      };
    };
    this.HandleELSEIF = function (AParam, aIsMac) {
      if (this.PPSkipStackIndex === 0) this.Error(1005,rtl.getResStr($mod,"SErrInvalidPPElse"));
      if (this.PPSkipMode === 1) {
        this.FConditionEval.isMac = aIsMac;
        if (this.FConditionEval.Eval(AParam)) {
          this.PPSkipMode = 2;
          this.PPIsSkipping = false;
        } else this.PPIsSkipping = true;
        if (this.LogEvent(2)) if (this.PPSkipMode === 2) {
          this.DoLog$1(5,1017,rtl.getResStr($mod,"SLogELSEIFAccepted"),$lp6(18,AParam),false)}
         else this.DoLog$1(5,1018,rtl.getResStr($mod,"SLogELSEIFRejected"),$lp6(18,AParam),false);
      } else if (this.PPSkipMode === 2) {
        this.PPIsSkipping = true;
      };
    };
    this.HandleELSE = function (AParam) {
      if (AParam === "") ;
      if (this.PPSkipStackIndex === 0) this.Error(1005,rtl.getResStr($mod,"SErrInvalidPPElse"));
      if (this.PPSkipMode === 1) {
        this.PPIsSkipping = false}
       else if (this.PPSkipMode === 2) this.PPIsSkipping = true;
    };
    this.HandleENDIF = function (AParam) {
      if (AParam === "") ;
      if (this.PPSkipStackIndex === 0) this.Error(1006,rtl.getResStr($mod,"SErrInvalidPPEndif"));
      this.PPSkipStackIndex -= 1;
      this.PPSkipMode = this.PPSkipModeStack[this.PPSkipStackIndex];
      this.PPIsSkipping = this.PPIsSkippingStack[this.PPSkipStackIndex];
    };
    this.HandleDefine = function (Param) {
      var Index = 0;
      var MName = "";
      var MValue = "";
      Index = $lp12(":=",Param);
      if (Index === 0) {
        this.AddDefine(this.GetMacroName(Param),false)}
       else {
        MValue = Param;
        MName = $lp10($lp11($lp(MValue,1,Index - 1)));
        $lp17({get: function () {
            return MValue;
          }, set: function (v) {
            MValue = v;
          }},1,Index + 1);
        this.AddMacro(MName,$lp11(MValue),false);
      };
    };
    this.HandleDispatchField = function (Param, vs) {
      var NewValue = "";
      if (!(vs in this.FAllowedValueSwitches)) this.Error$1(1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,$mod.ValueSwitchNames[vs]));
      NewValue = this.ReadIdentifier(Param);
      if (NewValue === "-") {
        NewValue = ""}
       else if (!$lp14(NewValue,false,false)) this.DoLog$1(2,1031,rtl.getResStr($mod,"SInvalidDispatchFieldName"),[],false);
      if ($lp7(NewValue,this.GetCurrentValueSwitch(vs))) return;
      if (vs in this.FReadOnlyValueSwitches) {
        this.Error$1(1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,$mod.ValueSwitchNames[vs]));
        return;
      };
      this.SetCurrentValueSwitch(vs,NewValue);
    };
    this.HandleError = function (Param) {
      if (11 in this.FOptions) {
        this.Error$1(1025,rtl.getResStr($mod,"SUserDefined"),$lp6(18,Param))}
       else this.DoLog$1(2,1025,rtl.getResStr($mod,"SUserDefined") + " error",$lp6(18,Param),false);
    };
    this.HandleMessageDirective = function (Param) {
      var p = 0;
      var Kind = "";
      var MsgType = 0;
      if (Param === "") return;
      p = 1;
      while ((p <= Param.length) && (Param.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90))) p += 1;
      Kind = $lp16(Param,p - 1);
      MsgType = 4;
      var $tmp = $lp10(Kind);
      if ($tmp === "HINT") {
        MsgType = 4}
       else if ($tmp === "NOTE") {
        MsgType = 3}
       else if ($tmp === "WARN") {
        MsgType = 2}
       else if ($tmp === "ERROR") {
        MsgType = 1}
       else if ($tmp === "FATAL") {
        MsgType = 0}
       else {
        p = 1;
      };
      while ((p <= Param.length) && (Param.charCodeAt(p - 1) in rtl.createSet(32,9))) p += 1;
      $lp17({get: function () {
          return Param;
        }, set: function (v) {
          Param = v;
        }},1,p - 1);
      if (MsgType in rtl.createSet(0,1)) {
        this.HandleError(Param)}
       else this.DoLog$1(MsgType,1025,rtl.getResStr($mod,"SUserDefined"),$lp6(18,Param),false);
    };
    this.HandleIncludeFile = function (Param) {
      var NewSourceFile = null;
      var aFileName = "";
      Param = $lp11(Param);
      if (Param.length > 1) {
        if (Param.charAt(0) === "'") {
          if (Param.charAt(Param.length - 1) !== "'") this.Error$1(1002,rtl.getResStr($mod,"SErrOpenString"),[]);
          Param = $lp(Param,2,Param.length - 2);
        };
      };
      NewSourceFile = this.FFileResolver.FindIncludeFile(Param);
      if (!(NewSourceFile != null)) this.Error$1(1003,rtl.getResStr($mod,"SErrIncludeFileNotFound"),$lp6(18,Param));
      this.PushStackItem();
      this.FCurSourceFile = NewSourceFile;
      this.FCurFilename = Param;
      if ($lt9.isPrototypeOf(this.FCurSourceFile)) {
        aFileName = this.FCurSourceFile.FFilename;
        this.FFileResolver.SetBaseDirectory($lp21(aFileName));
        this.FCurFilename = aFileName;
      };
      this.AddFile(this.FCurFilename);
      if (this.LogEvent(0)) this.DoLog$1(5,1007,rtl.getResStr($mod,"SLogOpeningFile"),$lp6(18,this.FormatPath(this.FCurFilename)),true);
    };
    this.HandleIncludeString = function (Param) {
      var NewSourceFile = null;
      var aString = "";
      var aLine = "";
      Param = $lp11(Param);
      if (Param.length > 1) {
        if (Param.charAt(0) === "'") {
          if (Param.charAt(Param.length - 1) !== "'") this.Error$1(1002,rtl.getResStr($mod,"SErrOpenString"),[]);
          Param = $lp(Param,2,Param.length - 2);
        };
      };
      NewSourceFile = this.FFileResolver.FindIncludeFile(Param);
      if (!(NewSourceFile != null)) this.Error$1(1003,rtl.getResStr($mod,"SErrIncludeFileNotFound"),$lp6(18,Param));
      try {
        aString = "";
        while (!NewSourceFile.IsEOF()) {
          aLine = NewSourceFile.ReadLine();
          if (aString !== "") aString = aString + this.GetMultiLineStringLineEnd(NewSourceFile);
          aString = aString + aLine;
        };
      } finally {
        NewSourceFile = rtl.freeLoc(NewSourceFile);
      };
      this.FCurTokenString = "'" + aString + "'";
      this.FCurToken = 4;
    };
    this.HandleResource = function (Param) {
      var Ext = "";
      var aFullFileName = "";
      var aFilename = "";
      var aOptions = "";
      var P = 0;
      var H = null;
      var OptList = null;
      aFilename = "";
      aOptions = "";
      P = $lp12(";",Param);
      if (P === 0) {
        aFilename = $lp11(Param)}
       else {
        aFilename = $lp11($lp(Param,1,P - 1));
        aOptions = $lp(Param,P + 1,Param.length - P);
      };
      Ext = $lp22(aFilename);
      if ($lp23(aFilename,"") === "*") aFilename = $lp23($lp24(this.FCurFilename),Ext);
      aFullFileName = this.FFileResolver.FindResourceFileName(aFilename);
      if (aFullFileName === "") if (19 in this.FOptions) {
        this.DoLog$1(2,1034,rtl.getResStr($mod,"SErrResourceFileNotFound"),$lp6(18,aFilename),false)}
       else this.Error$1(1034,rtl.getResStr($mod,"SErrResourceFileNotFound"),$lp6(18,aFilename));
      if (Ext !== "") Ext = $lp(Ext,2,Ext.length - 1);
      H = this.FindResourceHandler($lp4(Ext));
      if (H === null) H = this.FindResourceHandler("*");
      if (H === null) {
        if (!(14 in this.FOptions)) this.Error$1(1033,rtl.getResStr($mod,"SNoResourceSupport"),$lp6(18,Ext));
        return;
      };
      OptList = $lt29.$create("Create$1");
      try {
        OptList.SetNameValueSeparator(":");
        OptList.SetDelimiter(";");
        OptList.FStrictDelimiter = true;
        OptList.SetDelimitedText(aOptions);
        H(this,aFullFileName,OptList);
      } finally {
        OptList = rtl.freeLoc(OptList);
      };
    };
    this.HandleLinkLib = function (Param) {
      var $Self = this;
      var P = 0;
      var L = 0;
      var LibFileName = "";
      var LibAlias = "";
      var LibOptions = "";
      var IsHandled = false;
      function NextWord() {
        var Result = "";
        var lp = 0;
        lp = P;
        while ((lp <= L) && !(Param.charCodeAt(lp - 1) in rtl.createSet(32,9,10,13))) lp += 1;
        Result = $lp(Param,P,lp - P);
        P = lp;
        return Result;
      };
      function DoSkipwhitespace() {
        while ((P <= L) && (Param.charCodeAt(P - 1) in rtl.createSet(32,9,10,13))) P += 1;
      };
      Param = $lp11(Param);
      L = Param.length;
      P = 1;
      LibFileName = NextWord();
      DoSkipwhitespace();
      if (P <= L) {
        LibAlias = NextWord()}
       else LibAlias = this.MakeLibAlias(LibFileName);
      LibOptions = $lp11($lp(Param,P,(L - P) + 1));
      IsHandled = false;
      if (this.FOnLinkLib != null) this.FOnLinkLib($Self,LibFileName,LibAlias,LibOptions,{get: function () {
          return IsHandled;
        }, set: function (v) {
          IsHandled = v;
        }});
      if (!IsHandled) this.DoLog$1(3,1036,rtl.getResStr($mod,"SWarnIgnoringLinkLib"),$lp6(18,LibFileName,18,LibAlias,18,LibOptions),false);
    };
    this.HandleOptimizations = function (Param) {
      var p = 0;
      var StartP = 0;
      var l = 0;
      var OptName = "";
      var Value = "";
      p = 1;
      l = Param.length;
      while (p <= l) {
        while ((p <= l) && (Param.charCodeAt(p - 1) in rtl.createSet(32,9,10,13))) p += 1;
        StartP = p;
        while ((p <= l) && (Param.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,null,48,57,95))) p += 1;
        if (p === StartP) this.Error$1(1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,"optimization"));
        OptName = $lp(Param,StartP,p - StartP);
        if ($lp4($lp16(OptName,2)) === "no") {
          $lp17({get: function () {
              return OptName;
            }, set: function (v) {
              OptName = v;
            }},1,2);
          this.DoHandleOptimization(OptName,"-");
          return;
        };
        while ((p <= l) && (Param.charCodeAt(p - 1) in rtl.createSet(32,9,10,13))) p += 1;
        StartP = p;
        while ((p <= l) && (Param.charAt(p - 1) !== ",")) p += 1;
        Value = $lp25($lp(Param,StartP,p - StartP));
        this.DoHandleOptimization(OptName,Value);
        p += 1;
      };
    };
    this.DoHandleOptimization = function (OptName, OptValue) {
      if (OptName === "") ;
      if (OptValue === "") ;
    };
    this.HandleUnDefine = function (Param) {
      this.UnDefine(this.GetMacroName(Param),false);
    };
    this.HandleInclude = function (Param) {
      var Result = 0;
      Result = 2;
      if ((Param !== "") && (Param.charAt(0) === "%")) {
        this.FCurTokenString = "'" + Param + "'";
        this.FCurToken = 4;
        Result = this.FCurToken;
      } else this.HandleIncludeFile(Param);
      return Result;
    };
    this.HandleMode = function (Param) {
      var $Self = this;
      function SetMode(LangMode, NewModeSwitches, IsDelphi, AddBoolSwitches, RemoveBoolSwitches, UseOtherwise) {
        var Handled = false;
        if (!(LangMode in $Self.FAllowedModeSwitches)) $Self.Error$1(1019,rtl.getResStr($mod,"SErrInvalidMode"),$lp6(18,Param));
        Handled = false;
        if ($Self.FOnModeChanged != null) $Self.FOnModeChanged($Self,LangMode,true,{get: function () {
            return Handled;
          }, set: function (v) {
            Handled = v;
          }});
        if (!Handled) {
          $Self.SetCurrentModeSwitches(rtl.intersectSet(rtl.unionSet(NewModeSwitches,$Self.FReadOnlyModeSwitches),$Self.FAllowedModeSwitches));
          $Self.SetCurrentBoolSwitches(rtl.diffSet(rtl.unionSet($Self.FCurrentBoolSwitches,rtl.intersectSet(AddBoolSwitches,$Self.FAllowedBoolSwitches)),rtl.intersectSet(RemoveBoolSwitches,$Self.FAllowedBoolSwitches)));
          if (IsDelphi) {
            $Self.FOptions = rtl.unionSet($Self.FOptions,rtl.createSet(0))}
           else $Self.FOptions = rtl.diffSet($Self.FOptions,rtl.createSet(0));
          if (UseOtherwise) {
            $Self.UnsetNonToken(89)}
           else $Self.SetNonToken(89);
        };
        Handled = false;
        $Self.FFileResolver.FMode = LangMode;
        if ($Self.FOnModeChanged != null) $Self.FOnModeChanged($Self,LangMode,false,{get: function () {
            return Handled;
          }, set: function (v) {
            Handled = v;
          }});
      };
      var P = "";
      if (this.FSkipGlobalSwitches) {
        this.DoLog$1(2,1029,rtl.getResStr($mod,"SMisplacedGlobalCompilerSwitch"),[],false);
        return;
      };
      P = $lp11($lp10(Param));
      var $tmp = P;
      if (($tmp === "FPC") || ($tmp === "DEFAULT")) {
        SetMode(1,$mod.FPCModeSwitches,false,$mod.bsFPCMode,{},true);
        this.SetNonToken(83);
        this.SetNonToken(84);
        this.SetNonToken(82);
      } else if ($tmp === "OBJFPC") {
        SetMode(2,$mod.OBJFPCModeSwitches,true,$mod.bsObjFPCMode,{},true);
        this.UnsetNonToken(67);
        this.UnsetNonToken(104);
        this.SetNonToken(83);
        this.SetNonToken(84);
        this.SetNonToken(82);
      } else if ($tmp === "DELPHI") {
        SetMode(3,$mod.DelphiModeSwitches,true,$mod.bsDelphiMode,rtl.createSet(28),true);
        this.SetNonToken(67);
        this.SetNonToken(104);
        this.SetNonToken(83);
        this.SetNonToken(84);
        this.SetNonToken(82);
      } else if ($tmp === "DELPHIUNICODE") {
        SetMode(4,$mod.DelphiUnicodeModeSwitches,true,$mod.bsDelphiUnicodeMode,rtl.createSet(28),true);
        this.SetNonToken(67);
        this.SetNonToken(104);
        this.SetNonToken(83);
        this.SetNonToken(84);
        this.SetNonToken(82);
      } else if ($tmp === "TP") {
        SetMode(5,$mod.TPModeSwitches,false,{},{},true)}
       else if ($tmp === "MACPAS") {
        SetMode(6,$mod.MacModeSwitches,false,$mod.bsMacPasMode,{},true)}
       else if ($tmp === "ISO") {
        SetMode(7,$mod.ISOModeSwitches,false,{},{},false)}
       else if ($tmp === "EXTENDEDPASCAL") {
        SetMode(8,$mod.ExtPasModeSwitches,false,{},{},true)}
       else if ($tmp === "GPC") {
        SetMode(9,$mod.GPCModeSwitches,false,{},{},true)}
       else {
        this.Error$1(1019,rtl.getResStr($mod,"SErrInvalidMode"),$lp6(18,Param));
      };
    };
    this.HandleModeSwitch = function (Param) {
      var MS = 0;
      var MSN = "";
      var PM = "";
      var p = 0;
      var Enable = false;
      Enable = false;
      PM = Param;
      p = 1;
      while ((p <= PM.length) && (PM.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,95,null,48,57))) p += 1;
      MSN = $lp16(PM,p - 1);
      $lp17({get: function () {
          return PM;
        }, set: function (v) {
          PM = v;
        }},1,p - 1);
      MS = $mod.StrToModeSwitch(MSN);
      if ((MS === 0) || !(MS in this.FAllowedModeSwitches)) {
        if (9 in this.FOptions) {
          this.Error$1(1020,rtl.getResStr($mod,"SErrInvalidModeSwitch"),$lp6(18,MSN))}
         else this.DoLog$1(2,1020,rtl.getResStr($mod,"SErrInvalidModeSwitch"),$lp6(18,MSN),false);
        return;
      };
      if (PM === "") {
        Enable = true}
       else {
        var $tmp = PM.charAt(0);
        if (($tmp === "+") || ($tmp === "-")) {
          Enable = PM.charAt(0) === "+";
          p = 2;
          if ((p <= PM.length) && !(PM.charCodeAt(p - 1) in rtl.createSet(32,9))) this.Error$1(1032,rtl.getResStr($mod,"SErrWrongSwitchToggle"),[]);
        } else if (($tmp === " ") || ($tmp === "\t")) {
          PM = $lp26(PM);
          if (PM !== "") {
            p = 1;
            while ((p <= PM.length) && (PM.charCodeAt(p - 1) in rtl.createSet(null,65,90))) p += 1;
            if ((p <= PM.length) && !(PM.charCodeAt(p - 1) in rtl.createSet(32,9))) this.Error$1(1032,rtl.getResStr($mod,"SErrWrongSwitchToggle"),[]);
            PM = $lp16(PM,p - 1);
            if (PM === "ON") {
              Enable = true}
             else if (PM === "OFF") {
              Enable = false}
             else this.Error$1(1032,rtl.getResStr($mod,"SErrWrongSwitchToggle"),[]);
          };
        } else {
          this.Error$1(1032,rtl.getResStr($mod,"SErrWrongSwitchToggle"),[]);
        };
      };
      if ((MS in this.FCurrentModeSwitches) === Enable) return;
      if (MS in this.FReadOnlyModeSwitches) {
        this.DoLog$1(2,1020,rtl.getResStr($mod,"SErrInvalidModeSwitch"),$lp6(18,MSN),false);
        return;
      };
      if (Enable) {
        this.SetCurrentModeSwitches(rtl.unionSet(this.FCurrentModeSwitches,rtl.createSet(MS)))}
       else this.SetCurrentModeSwitches(rtl.diffSet(this.FCurrentModeSwitches,rtl.createSet(MS)));
    };
    this.HandleMacro = function (AIndex) {
      var Result = 0;
      var M = null;
      var ML = null;
      var OldRow = 0;
      var OldCol = 0;
      OldRow = this.FCurRow;
      OldCol = this.GetCurColumn();
      this.PushStackItem();
      M = rtl.as(this.FMacros.GetObject(AIndex),$lt7);
      ML = $lt12.$create("Create$2",[this.FCurFilename,M.FValue]);
      ML.FCurRow = OldRow;
      ML.FCurCol = OldCol - M.FName.length;
      this.FCurSourceFile = ML;
      Result = this.DoFetchToken();
      return Result;
    };
    this.HandleInterfaces = function (Param) {
      var s = "";
      var NewValue = "";
      var p = 0;
      if (!(0 in this.FAllowedValueSwitches)) this.Error$1(1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,"interfaces"));
      s = $lp10(Param);
      p = $lp12(" ",s);
      if (p > 0) s = $lp16(s,p - 1);
      var $tmp = s;
      if (($tmp === "COM") || ($tmp === "DEFAULT")) {
        NewValue = "COM"}
       else if ($tmp === "CORBA") {
        NewValue = "CORBA"}
       else {
        this.Error$1(1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,"interfaces " + s));
        return;
      };
      if ($lp7(NewValue,this.GetCurrentValueSwitch(0))) return;
      if (0 in this.FReadOnlyValueSwitches) {
        this.Error$1(1028,rtl.getResStr($mod,"SWarnIllegalCompilerDirectiveX"),$lp6(18,"interfaces"));
        return;
      };
      this.SetCurrentValueSwitch(0,NewValue);
    };
    this.HandleWarn = function (Param) {
      var p = 0;
      var StartPos = 0;
      var Identifier = "";
      var Value = "";
      p = 1;
      while ((p <= Param.length) && (Param.charCodeAt(p - 1) in rtl.createSet(32,9))) p += 1;
      StartPos = p;
      while ((p <= Param.length) && (Param.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,null,48,57,95))) p += 1;
      Identifier = $lp(Param,StartPos,p - StartPos);
      while ((p <= Param.length) && (Param.charCodeAt(p - 1) in rtl.createSet(32,9))) p += 1;
      StartPos = p;
      while ((p <= Param.length) && (Param.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,95))) p += 1;
      Value = $lp(Param,StartPos,p - StartPos);
      this.HandleWarnIdentifier(Identifier,Value);
    };
    this.HandleWarnIdentifier = function (Identifier, Value) {
      var number = 0;
      var State = 0;
      var Handled = false;
      if (Identifier === "") this.Error$1(1027,rtl.getResStr($mod,"SIllegalStateForWarnDirective"),$lp6(18,""));
      if (Value === "") {
        this.DoLog$1(2,1027,rtl.getResStr($mod,"SIllegalStateForWarnDirective"),$lp6(18,""),false);
        return;
      };
      var $tmp = $lp4(Value);
      if ($tmp === "on") {
        State = 1}
       else if ($tmp === "off") {
        State = 2}
       else if ($tmp === "default") {
        State = 0}
       else if ($tmp === "error") {
        State = 3}
       else {
        this.DoLog$1(2,1027,rtl.getResStr($mod,"SIllegalStateForWarnDirective"),$lp6(18,Value),false);
        return;
      };
      if (this.FOnWarnDirective != null) {
        Handled = false;
        this.FOnWarnDirective(this,Identifier,State,{get: function () {
            return Handled;
          }, set: function (v) {
            Handled = v;
          }});
        if (Handled) return;
      };
      if (Identifier.charCodeAt(0) in rtl.createSet(null,48,57)) {
        number = $lp27(Identifier,-1);
        if (number < 0) {
          this.DoLog$1(2,1027,rtl.getResStr($mod,"SIllegalStateForWarnDirective"),$lp6(18,Identifier),false);
          return;
        };
        this.SetWarnMsgState(number,State);
      };
    };
    this.PushStackItem = function () {
      var SI = null;
      if (this.FIncludeStack.FCount >= this.FMaxIncludeStackDepth) this.Error(1028,rtl.getResStr($mod,"SErrIncludeLimitReached"));
      SI = $lt27.$create("Create");
      SI.SourceFile = this.FCurSourceFile;
      SI.Filename = this.FCurFilename;
      SI.Token = this.FCurToken;
      SI.TokenString = this.GetTokenString();
      SI.Line = this.FCurLine;
      SI.Row = this.FCurRow;
      SI.ColumnOffset = this.FCurColumnOffset;
      SI.TokenPos = this.FTokenPos;
      this.FIncludeStack.Add(SI);
      this.FTokenPos = -1;
      this.FCurRow = 0;
      this.FCurColumnOffset = 1;
    };
    this.PopStackItem = function () {
      var IncludeStackItem = null;
      IncludeStackItem = rtl.getObject(this.FIncludeStack.Get(this.FIncludeStack.FCount - 1));
      this.FIncludeStack.Delete(this.FIncludeStack.FCount - 1);
      this.FCurSourceFile.$destroy("Destroy");
      this.FCurSourceFile = IncludeStackItem.SourceFile;
      this.FCurFilename = IncludeStackItem.Filename;
      this.FFileResolver.SetBaseDirectory($lp21(this.FCurFilename));
      this.FCurToken = IncludeStackItem.Token;
      this.FCurTokenString = IncludeStackItem.TokenString;
      this.FCurLine = IncludeStackItem.Line;
      this.FCurRow = IncludeStackItem.Row;
      this.FCurColumnOffset = IncludeStackItem.ColumnOffset;
      this.FTokenPos = IncludeStackItem.TokenPos;
      IncludeStackItem = rtl.freeLoc(IncludeStackItem);
    };
    this.DoFetchTextToken = function () {
      var Result = 0;
      var TokenStart = 0;
      var StartP = 0;
      var SectionLength = 0;
      var s = "";
      var l = 0;
      Result = 0;
      this.FCurTokenString = "";
      s = this.FCurLine;
      l = s.length;
      StartP = this.FTokenPos;
      do {
        if (this.FTokenPos > l) break;
        var $tmp = s.charAt(this.FTokenPos - 1);
        if ($tmp === "^") {
          this.FTokenPos += 1;
          if ((this.FTokenPos < l) && (s.charCodeAt(this.FTokenPos - 1) in $impl.Letters)) this.FTokenPos += 1;
          if (Result === 0) {
            Result = 7}
           else Result = 4;
        } else if ($tmp === "#") {
          this.FTokenPos += 1;
          if ((this.FTokenPos < l) && (s.charAt(this.FTokenPos - 1) === "$")) {
            this.FTokenPos += 1;
            do {
              this.FTokenPos += 1;
            } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in $impl.HexDigits)));
          } else do {
            this.FTokenPos += 1;
          } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in $impl.Digits)));
          if (Result === 0) {
            Result = 7}
           else Result = 4;
        } else if ($tmp === "'") {
          TokenStart = this.FTokenPos;
          this.FTokenPos += 1;
          while (true) {
            if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "'")) if ((this.FTokenPos < l) && (s.charAt((this.FTokenPos + 1) - 1) === "'")) {
              this.FTokenPos += 1;
              if (Result === 0) {
                Result = 7}
               else Result = 4;
            } else break;
            if (this.FTokenPos > l) this.Error(1002,rtl.getResStr($mod,"SErrOpenString"));
            this.FTokenPos += 1;
          };
          this.FTokenPos += 1;
          if ((Result === 0) && ((this.FTokenPos - TokenStart) === 3)) {
            Result = 7}
           else Result = 4;
        } else {
          break;
        };
      } while (!false);
      SectionLength = this.FTokenPos - StartP;
      this.FCurTokenString = this.FCurTokenString + $lp(this.FCurLine,StartP,SectionLength);
      return Result;
    };
    this.DoFetchMultilineTextToken = function () {
      var $Self = this;
      var Result = 0;
      var StartPos = 0;
      var TokenStart = 0;
      var s = "";
      var l = 0;
      var Apostroph = "";
      var CurLF = "";
      function Add(S) {
        $Self.FCurTokenString = $Self.FCurTokenString + S;
      };
      function AddToCurString(addLF) {
        var i = 0;
        if (TokenStart === 1) {
          i = $Self.FMultilineStringsTrimLeft;
          if (i === -1) i = StartPos + 1;
          if (i > 0) {
            while (($Self.FCurLine.charCodeAt(TokenStart - 1) in rtl.createSet(32,9)) && (TokenStart <= $Self.FTokenPos) && (i > 0)) {
              TokenStart += 1;
              i -= 1;
            };
          } else if (i === -2) {
            while (($Self.FCurLine.charCodeAt(TokenStart - 1) in rtl.createSet(32,9)) && (TokenStart <= $Self.FTokenPos)) TokenStart += 1;
          };
        };
        Add($lp($Self.FCurLine,TokenStart,$Self.FTokenPos - TokenStart));
        if (addLF) {
          Add(CurLF);
        };
      };
      function AddApostroph() {
        Add(Apostroph);
      };
      Result = 0;
      this.FCurTokenString = "";
      s = this.FCurLine;
      l = s.length;
      StartPos = this.FTokenPos;
      Apostroph = "'";
      CurLF = this.GetMultiLineStringLineEnd(this.FCurSourceFile);
      do {
        if (this.FTokenPos > l) break;
        var $tmp = s.charAt(this.FTokenPos - 1);
        if ($tmp === "^") {
          TokenStart = this.FTokenPos;
          this.FTokenPos += 1;
          if ((this.FTokenPos < l) && (s.charCodeAt(this.FTokenPos - 1) in $impl.Letters)) this.FTokenPos += 1;
          Add($lp(this.FCurLine,TokenStart,this.FTokenPos - TokenStart));
          if (Result === 0) {
            Result = 7}
           else Result = 4;
        } else if ($tmp === "#") {
          TokenStart = this.FTokenPos;
          this.FTokenPos += 1;
          if ((this.FTokenPos < l) && (s.charAt(this.FTokenPos - 1) === "$")) {
            this.FTokenPos += 1;
            do {
              this.FTokenPos += 1;
            } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in $impl.HexDigits)));
          } else do {
            this.FTokenPos += 1;
          } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in $impl.Digits)));
          Add($lp(this.FCurLine,TokenStart,this.FTokenPos - TokenStart));
          if (Result === 0) {
            Result = 7}
           else Result = 4;
        } else if ($tmp === "`") {
          AddApostroph();
          this.FTokenPos += 1;
          TokenStart = this.FTokenPos;
          while (true) {
            if (this.FTokenPos > l) {
              AddToCurString(true);
              if (!$Self.FetchLine()) {
                this.Error(1002,rtl.getResStr($mod,"SErrOpenString"));
              };
              s = this.FCurLine;
              l = s.length;
              TokenStart = this.FTokenPos;
            } else {
              var $tmp1 = s.charAt(this.FTokenPos - 1);
              if ($tmp1 === "`") {
                if ((this.FTokenPos < l) && (s.charAt((this.FTokenPos + 1) - 1) === "`")) {
                  this.FTokenPos += 1;
                  AddToCurString(false);
                  this.FTokenPos += 1;
                  TokenStart = this.FTokenPos;
                  continue;
                } else {
                  AddToCurString(false);
                  AddApostroph();
                  break;
                }}
               else if ($tmp1 === "'") {
                this.FTokenPos += 1;
                AddToCurString(false);
                AddApostroph();
                TokenStart = this.FTokenPos;
                if (this.FTokenPos > l) this.FTokenPos -= 1;
              };
              this.FTokenPos += 1;
            };
          };
          this.FTokenPos += 1;
          Result = 4;
        } else {
          break;
        };
      } while (!false);
      return Result;
    };
    this.DoFetchDelphiMultiLineTextToken = function (QuoteLen) {
      var $Self = this;
      var Result = 0;
      var s = "";
      var CurLF = "";
      var Lines = [];
      var l = 0;
      var I = 0;
      var SpaceCount = 0;
      var QuoteCount = 0;
      var WhiteSpaces = 0;
      var CurLineCount = 0;
      var Cnt = 0;
      var HasNonWhiteSpace = false;
      function AddToLines() {
        var L = 0;
        L = rtl.length(Lines);
        if (CurLineCount === L) Lines = rtl.arraySetLength(Lines,"",(L * 2) + 10);
        Lines[CurLineCount] = $Self.FCurLine;
        CurLineCount += 1;
      };
      function LocalFetchLine() {
        var Result = false;
        Result = $Self.FetchLine();
        if (!Result) $Self.Error(1002,rtl.getResStr($mod,"SErrOpenString"));
        s = $Self.FCurLine;
        l = s.length;
        return Result;
      };
      Lines = [];
      CurLineCount = 0;
      Result = 0;
      this.FCurTokenString = "";
      do {
        QuoteCount = 0;
        WhiteSpaces = 0;
        if (!LocalFetchLine()) return 0;
        while ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === " ")) {
          this.FTokenPos += 1;
          WhiteSpaces += 1;
        };
        HasNonWhiteSpace = false;
        do {
          if (this.FTokenPos > l) break;
          var $tmp = s.charAt(this.FTokenPos - 1);
          if ($tmp === $impl.SingleQuote) {
            do {
              this.FTokenPos += 1;
              QuoteCount += 1;
            } while (!((this.FTokenPos > l) || (s.charAt(this.FTokenPos - 1) !== $impl.SingleQuote) || (QuoteCount === QuoteLen)));
            if (QuoteCount === QuoteLen) {
              if (HasNonWhiteSpace) this.Error(1038,rtl.getResStr($mod,"SErrMultilineNonWhiteSpaceBeforeClosing"));
              break;
            };
            HasNonWhiteSpace = true;
          } else {
            HasNonWhiteSpace = true;
            this.FTokenPos += 1;
          };
        } while (!false);
        if (QuoteCount !== QuoteLen) {
          AddToLines()}
         else break;
      } while (!false);
      CurLF = this.GetMultiLineStringLineEnd(this.FCurSourceFile);
      Cnt = 0;
      for (var $l = 0, $end = CurLineCount - 1; $l <= $end; $l++) {
        I = $l;
        s = Lines[I];
        SpaceCount = 0;
        l = s.length;
        while ((SpaceCount < l) && (s.charAt((SpaceCount + 1) - 1) === " ")) SpaceCount += 1;
        if (SpaceCount === l) {
          s = "";
        } else if (SpaceCount < WhiteSpaces) {
          this.ErrorAt(1037,rtl.getResStr($mod,"SErrInvalidIndent"),(this.FCurRow - CurLineCount) + I,SpaceCount)}
         else s = $lp(s,WhiteSpaces + 1,l);
        Lines[I] = s;
        if (I > 0) Cnt += CurLF.length;
        Cnt += s.length;
      };
      Cnt = 0;
      for (var $l1 = 0, $end1 = CurLineCount - 1; $l1 <= $end1; $l1++) {
        I = $l1;
        s = Lines[I];
        l = s.length;
        if (l > 0) {
          this.FCurTokenString = this.FCurTokenString + s;
        };
        if (I < (CurLineCount - 1)) {
          this.FCurTokenString = this.FCurTokenString + CurLF;
        };
      };
      Result = 5;
      return Result;
    };
    this.DoFetchToken = function () {
      var $Self = this;
      var Result = 0;
      var TokenStart = 0;
      var i = 0;
      var QuoteLen = 0;
      var SectionLength = 0;
      var Index = 0;
      var s = "";
      var l = 0;
      function FetchCurTokenString() {
        $Self.FCurTokenString = $lp($Self.FCurLine,TokenStart,SectionLength);
      };
      function FetchLocalLine() {
        var Result = false;
        Result = $Self.FetchLine();
        if (!Result) return Result;
        s = $Self.FCurLine;
        l = s.length;
        return Result;
      };
      function IsDelphiMultiLine(Quotelen) {
        var Result = false;
        var P = 0;
        P = $Self.FTokenPos;
        Quotelen.set(0);
        while (P <= l) {
          Quotelen.set(Quotelen.get() + 1);
          if (s.charAt(P - 1) !== $impl.SingleQuote) return false;
          P += 1;
        };
        Result = (P > l) && (Quotelen.get() > 2) && ((Quotelen.get() % 2) === 1);
        return Result;
      };
      this.FCurtokenEscaped = false;
      TokenStart = 0;
      Result = 118;
      if (this.FTokenPos < 1) if (!this.FetchLine()) {
        Result = 0;
        this.FCurToken = Result;
        this.FCurTokenString = "";
        return Result;
      };
      this.FCurTokenString = "";
      this.FCurTokenPos.FileName = this.FCurFilename;
      this.FCurTokenPos.Row = this.FCurRow;
      this.FCurTokenPos.Column = this.GetCurColumn();
      s = this.FCurLine;
      l = s.length;
      if (this.FTokenPos > l) {
        this.FetchLine();
        Result = 118;
        this.FCurToken = Result;
        return Result;
      };
      var $tmp = s.charAt(this.FTokenPos - 1);
      if ($tmp === " ") {
        Result = 1;
        do {
          this.FTokenPos += 1;
          if (this.FTokenPos > l) if (!FetchLocalLine()) {
            this.FCurToken = Result;
            return Result;
          };
        } while (s.charAt(this.FTokenPos - 1) === " ");
      } else if ($tmp === "\t") {
        Result = 119;
        do {
          this.FTokenPos += 1;
          if (this.FTokenPos > l) if (!FetchLocalLine()) {
            this.FCurToken = Result;
            return Result;
          };
        } while (s.charAt(this.FTokenPos - 1) === "\t");
      } else if ($tmp === "#") {
        Result = this.DoFetchTextToken()}
       else if ($tmp === "'") {
        if ((55 in this.FCurrentModeSwitches) && IsDelphiMultiLine({get: function () {
            return QuoteLen;
          }, set: function (v) {
            QuoteLen = v;
          }})) {
          Result = this.DoFetchDelphiMultiLineTextToken(QuoteLen)}
         else Result = this.DoFetchTextToken()}
       else if ($tmp === "`") {
        if (!(54 in this.FCurrentModeSwitches)) this.Error$1(1001,rtl.getResStr($mod,"SErrInvalidCharacter"),$lp6(9,s.charAt(this.FTokenPos - 1)));
        Result = this.DoFetchMultilineTextToken();
      } else if ($tmp === "&") {
        TokenStart = this.FTokenPos;
        do {
          this.FTokenPos += 1;
        } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in rtl.createSet(null,48,55))));
        SectionLength = this.FTokenPos - TokenStart;
        if ((SectionLength === 1) && (s.charCodeAt(this.FTokenPos - 1) in $impl.IdentChars)) {
          this.DoFetchToken();
          Result = 3;
          this.FCurtokenEscaped = true;
        } else {
          FetchCurTokenString();
          Result = 6;
        };
      } else if ($tmp === "$") {
        TokenStart = this.FTokenPos;
        do {
          this.FTokenPos += 1;
        } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in $impl.HexDigits)));
        SectionLength = this.FTokenPos - TokenStart;
        FetchCurTokenString();
        Result = 6;
      } else if ($tmp === "%") {
        TokenStart = this.FTokenPos;
        do {
          this.FTokenPos += 1;
        } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in rtl.createSet(48,49))));
        SectionLength = this.FTokenPos - TokenStart;
        FetchCurTokenString();
        Result = 6;
      } else if ($tmp === "(") {
        this.FTokenPos += 1;
        if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === ".")) {
          this.FTokenPos += 1;
          Result = 22;
        } else if ((this.FTokenPos > l) || (s.charAt(this.FTokenPos - 1) !== "*")) {
          Result = 8}
         else Result = this.HandleMultilineCommentOldStyle();
      } else if ($tmp === ")") {
        this.FTokenPos += 1;
        Result = 9;
      } else if ($tmp === "*") {
        Result = 10;
        this.FTokenPos += 1;
        if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "*")) {
          this.FTokenPos += 1;
          Result = 31;
        } else if (2 in this.FOptions) {
          if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "=")) {
            this.FTokenPos += 1;
            Result = 35;
          };
        };
      } else if ($tmp === "+") {
        Result = 11;
        this.FTokenPos += 1;
        if (2 in this.FOptions) {
          if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "=")) {
            this.FTokenPos += 1;
            Result = 33;
          };
        };
      } else if ($tmp === ",") {
        this.FTokenPos += 1;
        Result = 12;
      } else if ($tmp === "-") {
        Result = 13;
        this.FTokenPos += 1;
        if (2 in this.FOptions) {
          if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "=")) {
            this.FTokenPos += 1;
            Result = 34;
          };
        };
      } else if ($tmp === ".") {
        this.FTokenPos += 1;
        if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === ")")) {
          this.FTokenPos += 1;
          Result = 23;
        } else if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === ".")) {
          this.FTokenPos += 1;
          if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === ".")) {
            this.FTokenPos += 1;
            Result = 38;
          } else Result = 26;
        } else Result = 14;
      } else if ($tmp === "/") {
        Result = 15;
        this.FTokenPos += 1;
        if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "/")) {
          this.FTokenPos += 1;
          TokenStart = this.FTokenPos;
          this.FCurTokenString = "";
          while ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) !== "\x00")) this.FTokenPos += 1;
          SectionLength = this.FTokenPos - TokenStart;
          FetchCurTokenString();
          if ($lt12.isPrototypeOf(this.FCurSourceFile)) {
            do {
              i = this.FetchToken();
            } while (!(i !== 118));
            FetchLocalLine();
          };
          Result = 2;
        } else if (2 in this.FOptions) {
          if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "=")) {
            this.FTokenPos += 1;
            Result = 36;
          };
        };
      } else if (($tmp >= "0") && ($tmp <= "9")) {
        TokenStart = this.FTokenPos;
        do {
          this.FTokenPos += 1;
        } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in $impl.Digits)));
        if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === ".") && ((this.FTokenPos === l) || ((s.charAt((this.FTokenPos + 1) - 1) !== ".") && (s.charAt((this.FTokenPos + 1) - 1) !== ")")))) {
          this.FTokenPos += 1;
          while ((this.FTokenPos <= l) && (s.charCodeAt(this.FTokenPos - 1) in $impl.Digits)) this.FTokenPos += 1;
        };
        if ((this.FTokenPos <= l) && (s.charCodeAt(this.FTokenPos - 1) in rtl.createSet(101,69))) {
          this.FTokenPos += 1;
          if ((this.FTokenPos <= l) && (s.charCodeAt(this.FTokenPos - 1) in rtl.createSet(45,43))) this.FTokenPos += 1;
          while ((this.FTokenPos <= l) && (s.charCodeAt(this.FTokenPos - 1) in $impl.Digits)) this.FTokenPos += 1;
        };
        SectionLength = this.FTokenPos - TokenStart;
        FetchCurTokenString();
        Result = 6;
      } else if ($tmp === ":") {
        this.FTokenPos += 1;
        if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "=")) {
          this.FTokenPos += 1;
          Result = 27;
        } else Result = 16;
      } else if ($tmp === ";") {
        this.FTokenPos += 1;
        Result = 17;
      } else if ($tmp === "<") {
        this.FTokenPos += 1;
        if (this.FTokenPos > l) {
          Result = 18}
         else {
          var $tmp1 = s.charAt(this.FTokenPos - 1);
          if ($tmp1 === ">") {
            this.FTokenPos += 1;
            Result = 28;
          } else if ($tmp1 === "=") {
            this.FTokenPos += 1;
            Result = 29;
          } else if ($tmp1 === "<") {
            this.FTokenPos += 1;
            Result = 102;
          } else {
            Result = 18;
          };
        };
      } else if ($tmp === "=") {
        this.FTokenPos += 1;
        Result = 19;
      } else if ($tmp === ">") {
        this.FTokenPos += 1;
        if (this.FTokenPos > l) {
          Result = 20}
         else {
          var $tmp2 = s.charAt(this.FTokenPos - 1);
          if ($tmp2 === "=") {
            this.FTokenPos += 1;
            Result = 30;
          } else if ($tmp2 === "<") {
            this.FTokenPos += 1;
            Result = 32;
          } else if ($tmp2 === ">") {
            this.FTokenPos += 1;
            Result = 103;
          } else {
            Result = 20;
          };
        };
      } else if ($tmp === "@") {
        this.FTokenPos += 1;
        Result = 21;
        if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "@")) {
          this.FTokenPos += 1;
          Result = 37;
        };
      } else if ($tmp === "[") {
        this.FTokenPos += 1;
        Result = 22;
      } else if ($tmp === "]") {
        this.FTokenPos += 1;
        Result = 23;
      } else if ($tmp === "^") {
        if (this.GetForceCaret() || this.PPIsSkipping || (this.FPreviousToken in rtl.createSet(0,119,118,2,3,80,87,9,23,24))) {
          this.FTokenPos += 1;
          Result = 24;
        } else Result = this.DoFetchTextToken();
      } else if ($tmp === "\\") {
        this.FTokenPos += 1;
        Result = 25;
      } else if ($tmp === "{") {
        Result = this.HandleMultilineComment();
      } else if ((($tmp >= "A") && ($tmp <= "Z")) || (($tmp >= "a") && ($tmp <= "z")) || ($tmp === "_")) {
        TokenStart = this.FTokenPos;
        do {
          this.FTokenPos += 1;
        } while (!((this.FTokenPos > l) || !(s.charCodeAt(this.FTokenPos - 1) in $impl.IdentChars)));
        SectionLength = this.FTokenPos - TokenStart;
        FetchCurTokenString();
        Result = 3;
        for (i = 39; i <= 117; i++) {
          if ($lp13(this.GetTokenString(),$mod.TokenInfos[i]) === 0) {
            Result = i;
            break;
          };
        };
        if ((Result !== 3) && (Result in this.FNonTokens)) Result = 3;
        this.FCurToken = Result;
        if (this.GetMacrosOn()) {
          Index = this.FMacros.IndexOf(this.GetTokenString());
          if (Index >= 0) Result = this.HandleMacro(Index);
        };
      } else {
        if (this.PPIsSkipping) {
          this.FTokenPos += 1}
         else this.Error$1(1001,rtl.getResStr($mod,"SErrInvalidCharacter"),$lp6(9,s.charAt(this.FTokenPos - 1)));
      };
      this.FCurToken = Result;
      return Result;
    };
    this.ClearFiles = function () {
      while (this.FIncludeStack.FCount > 1) {
        rtl.getObject(this.FIncludeStack.Get(1)).$destroy("Destroy");
        this.FIncludeStack.Delete(1);
      };
      this.FIncludeStack.Clear();
      $lp28({p: this, get: function () {
          return this.p.FCurSourceFile;
        }, set: function (v) {
          this.p.FCurSourceFile = v;
        }});
      this.FFiles.Clear();
      this.FModuleRow = 0;
    };
    this.ClearMacros = function () {
      var I = 0;
      for (var $l = 0, $end = this.FMacros.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        this.FMacros.GetObject(I).$destroy("Destroy");
      };
      this.FMacros.Clear();
    };
    this.SetCurToken = function (AValue) {
      this.FCurToken = AValue;
    };
    this.SetCurTokenString = function (AValue) {
      this.FCurTokenString = AValue;
    };
    this.SetCurrentBoolSwitches = function (AValue) {
      var OldBS = {};
      var Removed = {};
      var Added = {};
      if (rtl.eqSet(this.FCurrentBoolSwitches,AValue)) return;
      OldBS = rtl.refSet(this.FCurrentBoolSwitches);
      this.FCurrentBoolSwitches = rtl.refSet(AValue);
      Removed = rtl.diffSet(OldBS,this.FCurrentBoolSwitches);
      Added = rtl.diffSet(this.FCurrentBoolSwitches,OldBS);
      if (29 in Added) {
        this.UnsetNonToken(77);
        this.UnsetNonToken(68);
      };
      if (29 in Removed) {
        this.SetNonToken(77);
        this.SetNonToken(68);
      };
    };
    this.SetCurrentModeSwitches = function (AValue) {
      var Old = {};
      var AddedMS = {};
      var RemovedMS = {};
      AValue = rtl.intersectSet(AValue,this.FAllowedModeSwitches);
      if (rtl.eqSet(this.FCurrentModeSwitches,AValue)) return;
      Old = rtl.refSet(this.FCurrentModeSwitches);
      this.FCurrentModeSwitches = rtl.refSet(AValue);
      AddedMS = rtl.diffSet(this.FCurrentModeSwitches,Old);
      RemovedMS = rtl.diffSet(Old,this.FCurrentModeSwitches);
      if (38 in AddedMS) {
        this.AddDefine("UNICODE",false);
        this.AddDefine("FPC_UNICODESTRINGS",false);
      } else if (38 in RemovedMS) {
        this.UnDefine("UNICODE",false);
        this.UnDefine("FPC_UNICODESTRINGS",false);
      };
      if (22 in AddedMS) {
        this.AddDefine($mod.LetterSwitchNames[7],true);
        this.FCurrentBoolSwitches = rtl.includeSet(this.FCurrentBoolSwitches,7);
      } else if (22 in RemovedMS) {
        this.UnDefine($mod.LetterSwitchNames[7],true);
        this.FCurrentBoolSwitches = rtl.excludeSet(this.FCurrentBoolSwitches,7);
      };
      if (rtl.eqSet(rtl.intersectSet(rtl.createSet(30,31),this.FCurrentModeSwitches),{})) {
        this.SetNonToken(83);
        this.SetNonToken(84);
        this.SetNonToken(82);
      } else {
        this.UnsetNonToken(83);
        this.UnsetNonToken(84);
        this.UnsetNonToken(82);
      };
    };
    this.SetCurrentValueSwitch = function (V, AValue) {
      if (!(V in this.FAllowedValueSwitches)) return;
      if (this.FCurrentValueSwitches[V] === AValue) return;
      this.FCurrentValueSwitches[V] = AValue;
    };
    this.SetWarnMsgState = function (number, State) {
      var i = 0;
      var Item = $lt26.$new();
      i = this.IndexOfWarnMsgState(number,true);
      if ((i < rtl.length(this.FWarnMsgStates)) && (this.FWarnMsgStates[i].Number === number)) {
        if (State === 0) {
          this.FWarnMsgStates.splice(i,1)}
         else this.FWarnMsgStates[i].State = State;
      } else if (State !== 0) {
        Item.Number = number;
        Item.State = State;
        this.FWarnMsgStates = rtl.arrayInsert(Item,this.FWarnMsgStates,i);
      };
    };
    this.GetWarnMsgState = function (number) {
      var Result = 0;
      var i = 0;
      i = this.IndexOfWarnMsgState(number,false);
      if (i < 0) {
        Result = 0}
       else Result = this.FWarnMsgStates[i].State;
      return Result;
    };
    this.LogEvent = function (E) {
      var Result = false;
      Result = E in this.FLogEvents;
      return Result;
    };
    this.Create$1 = function (AFileResolver) {
      var $Self = this;
      function CS() {
        var Result = null;
        Result = $lt29.$create("Create$1");
        Result.SetSorted(true);
        Result.FDuplicates = 2;
        return Result;
      };
      var vs = 0;
      $lt28.Create.call(this);
      this.FFileResolver = AFileResolver;
      this.FFiles = $lt29.$create("Create$1");
      this.FIncludeStack = $lt35.$create("Create");
      this.FDefines = CS();
      this.FMacros = CS();
      this.FMaxIncludeStackDepth = 20;
      this.FCurrentModeSwitches = rtl.refSet($mod.FPCModeSwitches);
      this.FAllowedModeSwitches = rtl.refSet($mod.msAllModeSwitches);
      this.FCurrentBoolSwitches = rtl.refSet($mod.bsFPCMode);
      this.FAllowedBoolSwitches = rtl.refSet($mod.bsAll);
      this.FAllowedValueSwitches = rtl.refSet($mod.vsAllValueSwitches);
      for (var $l = 0; $l <= 2; $l++) {
        vs = $l;
        this.FCurrentValueSwitches[vs] = $mod.DefaultValueSwitches[vs];
      };
      this.FConditionEval = $lt14.$create("Create$1",[false]);
      this.FConditionEval.FOnLog = rtl.createCallback($Self,"OnCondEvalLog");
      this.FConditionEval.FOnEvalVariable = rtl.createCallback($Self,"OnCondEvalVar");
      this.FConditionEval.FOnEvalFunction = rtl.createCallback($Self,"OnCondEvalFunction");
      return this;
    };
    this.Destroy = function () {
      while (this.FIncludeStack.FCount > 0) this.PopStackItem();
      $lp28({p: this, get: function () {
          return this.p.FConditionEval;
        }, set: function (v) {
          this.p.FConditionEval = v;
        }});
      this.ClearMacros();
      $lp28({p: this, get: function () {
          return this.p.FMacros;
        }, set: function (v) {
          this.p.FMacros = v;
        }});
      $lp28({p: this, get: function () {
          return this.p.FDefines;
        }, set: function (v) {
          this.p.FDefines = v;
        }});
      this.ClearFiles();
      $lp28({p: this, get: function () {
          return this.p.FFiles;
        }, set: function (v) {
          this.p.FFiles = v;
        }});
      $lp28({p: this, get: function () {
          return this.p.FIncludeStack;
        }, set: function (v) {
          this.p.FIncludeStack = v;
        }});
      $lt28.Destroy.call(this);
    };
    this.RegisterResourceHandler = function (aExtension, aHandler) {
      var Idx = 0;
      if (aExtension === "") return;
      if (aExtension.charAt(0) === ".") aExtension = $lp(aExtension,2,aExtension.length - 1);
      Idx = this.IndexOfResourceHandler($lp4(aExtension));
      if (Idx === -1) {
        Idx = rtl.length(this.FResourceHandlers);
        this.FResourceHandlers = rtl.arraySetLength(this.FResourceHandlers,$lt24,Idx + 1);
        this.FResourceHandlers[Idx].Ext = $lp4(aExtension);
      };
      this.FResourceHandlers[Idx].Handler = aHandler;
    };
    this.RegisterDirectiveHandler = function (aDirective, aHandler) {
      var i = 0;
      var Item = $lt25.$new();
      if (aDirective === "") return;
      i = this.IndexOfDirectiveHandle(aDirective,true);
      if ((i < rtl.length(this.FDirectiveHandles)) && ($lp13(aDirective,this.FDirectiveHandles[i].Directive) === 0)) {
        this.FDirectiveHandles[i].Directive = aDirective;
        this.FDirectiveHandles[i].Handler = aHandler;
      } else {
        Item.Directive = aDirective;
        Item.Handler = aHandler;
        this.FDirectiveHandles = rtl.arrayInsert(Item,this.FDirectiveHandles,i);
      };
    };
    this.OpenFile = function (AFilename) {
      this.ClearFiles();
      this.FCurSourceFile = this.FFileResolver.FindSourceFile(AFilename);
      this.FCurFilename = AFilename;
      this.AddFile(this.FCurFilename);
      if (this.LogEvent(0)) this.DoLog$1(5,1007,rtl.getResStr($mod,"SLogOpeningFile"),$lp6(18,this.FormatPath(AFilename)),true);
    };
    this.FinishedModule = function () {
      if ((1 in this.FLogEvents) && !this.FCurSourceFile.IsEOF() && ((this.FCurRow % 100) > 0)) this.DoLog$1(5,1008,rtl.getResStr($mod,"SLogLineNumber"),$lp6(0,this.FCurRow),true);
    };
    this.FormatPath = function (aFilename) {
      var Result = "";
      if (this.FOnFormatPath != null) {
        Result = this.FOnFormatPath(aFilename)}
       else Result = aFilename;
      return Result;
    };
    this.FormatSrcPos = function (p) {
      var Result = "";
      Result = this.FormatPath(p.FileName) + "(" + $lp5(p.Row);
      if (p.Column > 0) Result = Result + "," + $lp5(p.Column);
      Result = Result + ")";
      return Result;
    };
    this.FormatCurrentSrcPos = function () {
      var Result = "";
      Result = this.FormatSrcPos(this.CurSourcePos());
      return Result;
    };
    this.DisablePackageTokens = function () {
      this.FNonTokens = rtl.unionSet(this.FNonTokens,rtl.createSet(51,91,98));
    };
    this.SetNonToken = function (aToken) {
      this.FNonTokens = rtl.includeSet(this.FNonTokens,aToken);
    };
    this.UnsetNonToken = function (aToken) {
      this.FNonTokens = rtl.excludeSet(this.FNonTokens,aToken);
    };
    this.SetTokenOption = function (aOption) {
      this.FTokenOptions = rtl.includeSet(this.FTokenOptions,aOption);
    };
    this.UnSetTokenOption = function (aOption) {
      this.FTokenOptions = rtl.excludeSet(this.FTokenOptions,aOption);
    };
    this.CheckToken = function (aToken, ATokenString) {
      var Result = 0;
      Result = aToken;
      if ((aToken === 3) && ($lp13(ATokenString,"operator") === 0)) if (1 in this.FTokenOptions) Result = 87;
      return Result;
    };
    this.FetchToken = function () {
      var Result = 0;
      if (!(this.FCurToken in rtl.createSet(1,118))) this.FPreviousToken = this.FCurToken;
      while (true) {
        Result = this.DoFetchToken();
        var $tmp = this.FCurToken;
        if ($tmp === 0) {
          if (this.FIncludeStack.FCount > 0) {
            this.PopStackItem();
            Result = this.FCurToken;
          } else break;
        } else if (($tmp === 1) || ($tmp === 118)) {
          if (!(this.FSkipWhiteSpace || this.PPIsSkipping)) break}
         else if ($tmp === 2) {
          if (!(this.FSkipComments || this.PPIsSkipping)) break}
         else if ($tmp === 100) {
          if (!(8 in this.FOptions)) {
            this.FCurToken = 3;
            Result = this.FCurToken;
          };
          if (!(this.FSkipComments || this.PPIsSkipping)) break;
        } else if ($tmp === 87) {
          if (!(1 in this.FTokenOptions)) {
            this.FCurToken = 3;
            Result = this.FCurToken;
          };
          if (!(this.FSkipComments || this.PPIsSkipping)) break;
        } else {
          if (!this.PPIsSkipping) break;
        };
      };
      return Result;
    };
    this.ReadNonPascalTillEndToken = function (StopAtLineEnd) {
      var $Self = this;
      var Result = 0;
      var StartPos = 0;
      var s = "";
      var l = 0;
      function Add() {
        var AddLen = 0;
        AddLen = $Self.FTokenPos - StartPos;
        if (AddLen === 0) {
          $Self.FCurTokenString = ""}
         else {
          $Self.FCurTokenString = $Self.FCurTokenString + $lp($Self.FCurLine,StartPos,AddLen);
          StartPos = $Self.FTokenPos;
        };
      };
      function DoEndOfLine() {
        var Result$1 = false;
        Add();
        if (StopAtLineEnd) {
          Result = 118;
          $Self.FCurToken = 118;
          $Self.FetchLine();
          return true;
        };
        if (!$Self.FetchLine()) {
          Result = 0;
          $Self.FCurToken = 0;
          return true;
        };
        s = $Self.FCurLine;
        l = s.length;
        StartPos = $Self.FTokenPos;
        Result$1 = false;
        return Result$1;
      };
      Result = 0;
      this.FCurTokenString = "";
      StartPos = this.FTokenPos;
      s = this.FCurLine;
      l = s.length;
      do {
        if (this.FTokenPos > l) if (DoEndOfLine()) return Result;
        var $tmp = s.charAt(this.FTokenPos - 1);
        if ($tmp === "{") {
          if (17 in this.FOptions) {
            Result = this.HandleMultilineComment();
            break;
          } else this.FTokenPos += 1;
        } else if ($tmp === "'") {
          this.FTokenPos += 1;
          do {
            if (this.FTokenPos > l) this.Error(1002,rtl.getResStr($mod,"SErrOpenString"));
            var $tmp1 = s.charAt(this.FTokenPos - 1);
            if ($tmp1 === "'") {
              this.FTokenPos += 1;
              break;
            } else if (($tmp1 === "\n") || ($tmp1 === "\r")) {
              break;
            } else {
              this.FTokenPos += 1;
            };
          } while (!false);
        } else if ($tmp === '"') {
          this.FTokenPos += 1;
          do {
            if (this.FTokenPos > l) this.Error(1002,rtl.getResStr($mod,"SErrOpenString"));
            var $tmp2 = s.charAt(this.FTokenPos - 1);
            if ($tmp2 === '"') {
              this.FTokenPos += 1;
              break;
            } else if (($tmp2 === "\n") || ($tmp2 === "\r")) {
              break;
            } else {
              this.FTokenPos += 1;
            };
          } while (!false);
        } else if ($tmp === "/") {
          this.FTokenPos += 1;
          if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "/")) {
            do {
              this.FTokenPos += 1;
            } while (!((this.FTokenPos > l) || (s.charCodeAt(this.FTokenPos - 1) in rtl.createSet(10,13))));
          };
        } else if (($tmp === "@") || (($tmp >= "0") && ($tmp <= "9")) || (($tmp >= "A") && ($tmp <= "Z")) || (($tmp >= "a") && ($tmp <= "z")) || ($tmp === "_")) {
          if (($lp(s,this.FTokenPos,3).toLowerCase() === "end") && (((this.FTokenPos + 3) > l) || !(s.charCodeAt((this.FTokenPos + 3) - 1) in $impl.IdentChars))) {
            Add();
            if (this.FCurTokenString !== "") {
              Result = 1;
              this.FCurToken = Result;
              return Result;
            };
            if (this.PPIsSkipping) {
              Result = 1}
             else Result = 58;
            this.FCurTokenString = $lp(s,this.FTokenPos,3);
            this.FTokenPos += 3;
            this.FCurToken = Result;
            return Result;
          } else {
            if ((this.FTokenPos <= l) && (s.charAt(this.FTokenPos - 1) === "@")) this.FTokenPos += 1;
            while ((this.FTokenPos <= l) && (s.charCodeAt(this.FTokenPos - 1) in $impl.IdentChars)) this.FTokenPos += 1;
          };
        } else {
          this.FTokenPos += 1;
        };
      } while (!false);
      return Result;
    };
    this.AddDefine = function (aName, Quiet) {
      var Result = false;
      if (this.FDefines.IndexOf(aName) >= 0) return false;
      Result = true;
      this.FDefines.Add(aName);
      if (!Quiet && this.LogEvent(2)) this.DoLog$1(5,1026,rtl.getResStr($mod,"SLogMacroDefined"),$lp6(18,aName),false);
      return Result;
    };
    this.RemoveDefine = function (aName, Quiet) {
      var Result = false;
      var I = 0;
      I = this.FDefines.IndexOf(aName);
      if (I < 0) return false;
      Result = true;
      this.FDefines.Delete(I);
      if (!Quiet && this.LogEvent(2)) this.DoLog$1(5,1027,rtl.getResStr($mod,"SLogMacroUnDefined"),$lp6(18,aName),false);
      return Result;
    };
    this.UnDefine = function (aName, Quiet) {
      var Result = false;
      Result = this.RemoveDefine(aName,Quiet);
      if (this.RemoveMacro(aName,Quiet)) Result = true;
      return Result;
    };
    this.IsDefined = function (aName) {
      var Result = false;
      Result = (this.FDefines.IndexOf(aName) >= 0) || (this.FMacros.IndexOf(aName) >= 0);
      return Result;
    };
    this.IfOpt = function (Letter) {
      var Result = false;
      Letter = $lp18(Letter);
      Result = (Letter.charCodeAt() in rtl.createSet(null,65,90)) && ($mod.LetterSwitchNames[Letter.charCodeAt() - 65] !== "") && this.IsDefined($mod.LetterSwitchNames[Letter.charCodeAt() - 65]);
      return Result;
    };
    this.AddMacro = function (aName, aValue, Quiet) {
      var Result = false;
      var Index = 0;
      Index = this.FMacros.IndexOf(aName);
      if (Index === -1) {
        this.FMacros.AddObject(aName,$lt7.$create("Create$1",[aName,aValue]))}
       else {
        if (this.FMacros.GetObject(Index).FValue === aValue) return false;
        this.FMacros.GetObject(Index).FValue = aValue;
      };
      Result = true;
      if (!Quiet && this.LogEvent(2)) this.DoLog$1(5,1030,rtl.getResStr($mod,"SLogMacroXSetToY"),$lp6(18,aName,18,aValue),false);
      return Result;
    };
    this.RemoveMacro = function (aName, Quiet) {
      var Result = false;
      var Index = 0;
      Index = this.FMacros.IndexOf(aName);
      if (Index < 0) return false;
      Result = true;
      this.FMacros.GetObject(Index).$destroy("Destroy");
      this.FMacros.Delete(Index);
      if (!Quiet && this.LogEvent(2)) this.DoLog$1(5,1027,rtl.getResStr($mod,"SLogMacroUnDefined"),$lp6(18,aName),false);
      return Result;
    };
    this.CurSourcePos = function () {
      var Result = $lt21.$new();
      Result.FileName = this.FCurFilename;
      Result.Row = this.FCurRow;
      Result.Column = this.GetCurColumn();
      return Result;
    };
    this.SetForceCaret = function (AValue) {
      var Result = false;
      Result = 0 in this.FTokenOptions;
      if (AValue) {
        this.FTokenOptions = rtl.includeSet(this.FTokenOptions,0)}
       else this.FTokenOptions = rtl.excludeSet(this.FTokenOptions,0);
      return Result;
    };
    this.IgnoreMsgType = function (MsgType) {
      var Result = false;
      Result = false;
      var $tmp = MsgType;
      if ($tmp === 2) {
        if (!(24 in this.FCurrentBoolSwitches)) return true}
       else if ($tmp === 3) {
        if (!(23 in this.FCurrentBoolSwitches)) return true}
       else if ($tmp === 4) if (!(22 in this.FCurrentBoolSwitches)) return true;
      return Result;
    };
  });
  this.TokenInfos = ["EOF","Whitespace","Comment","Identifier","String","StringMultiLine","Number","Character","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","]","^","\\","..",":=","<>","<=",">=","**","><","+=","-=","*=","/=","@@","...","absolute","and","array","as","asm","begin","bitpacked","case","class","const","constref","constructor","contains","destructor","dispinterface","div","do","downto","else","end","except","exports","false","file","finalization","finally","for","function","generic","goto","if","implementation","in","inherited","initialization","inline","interface","is","label","library","mod","nil","not","objccategory","objcclass","objcprotocol","object","of","operator","or","otherwise","packed","package","procedure","program","property","raise","record","repeat","requires","resourcestring","self","set","shl","shr","specialize","then","threadvar","to","true","try","type","unit","until","uses","var","while","with","xor","LineEnding","Tab"];
  this.SModeSwitchNames = ["","","","","","","","","","","CLASS","OBJPAS","RESULT","PCHARTOSTRING","CVAR","NESTEDCOMMENTS","CLASSICPROCVARS","MACPROCVARS","REPEATFORWARD","POINTERTOPROCVAR","AUTODEREF","INITFINAL","ANSISTRINGS","OUT","DEFAULTPARAMETERS","HINTDIRECTIVE","DUPLICATELOCALS","PROPERTIES","ALLOWINLINE","EXCEPTIONS","OBJECTIVEC1","OBJECTIVEC2","NESTEDPROCVARS","NONLOCALGOTO","ADVANCEDRECORDS","ISOUNARYMINUS","SYSTEMCODEPAGE","FINALFIELDS","UNICODESTRINGS","TYPEHELPERS","CBLOCKS","ISOIO","ISOPROGRAMPARAS","ISOMOD","ARRAYOPERATORS","MULTIHELPERS","ARRAY2DYNARRAYS","PREFIXEDATTRIBUTES","UNDERSCOREISSEPARARTOR","IMPLICITFUNCTIONSPECIALIZATION","FUNCTIONREFERENCES","ANONYMOUSFUNCTIONS","EXTERNALCLASS","OMITRTTI","MULTILINESTRINGS","DELPHIMULTILINESTRINGS","INLINEVARS"];
  this.LetterSwitchNames = ["ALIGN","BOOLEVAL","ASSERTIONS","DEBUGINFO","EXTENSION","","IMPORTEDDATA","LONGSTRINGS","IOCHECKS","WRITEABLECONST","","LOCALSYMBOLS","TYPEINFO","","OPTIMIZATION","OPENSTRINGS","OVERFLOWCHECKS","RANGECHECKS","","TYPEDADDRESS","SAFEDIVIDE","VARSTRINGCHECKS","STACKFRAMES","EXTENDEDSYNTAX","REFERENCEINFO",""];
  this.BoolSwitchNames = ["None","Align","BoolEval","Assertions","DebugInfo","Extension","ImportedData","LongStrings","IOChecks","WriteableConst","LocalSymbols","TypeInfo","Optimization","OpenStrings","OverflowChecks","RangeChecks","TypedAddress","SafeDivide","VarStringChecks","Stackframes","ExtendedSyntax","ReferenceInfo","Hints","Notes","Warnings","Macro","ScopedEnums","ObjectChecks","PointerMath","Goto"];
  this.ValueSwitchNames = ["Interfaces","DispatchField","DispatchStrField"];
  this.MessageTypeNames = ["Fatal","Error","Warning","Note","Hint","Info","Debug"];
  this.msAllModeSwitches = rtl.createSet(null,$lt2.msNone,$lt2.msInlineVars);
  this.AllLanguageModes = rtl.createSet(null,1,9);
  this.DelphiModeSwitches = rtl.createSet(3,10,11,12,13,19,20,16,21,22,23,24,26,25,27,28,29,34,39,47,44,49,50,51,55,56);
  this.DelphiUnicodeModeSwitches = rtl.unionSet(this.DelphiModeSwitches,rtl.createSet(36,38));
  this.FPCModeSwitches = rtl.createSet(1,13,15,18,14,21,25,27,28);
  this.OBJFPCModeSwitches = rtl.createSet(2,10,11,12,13,15,18,14,21,23,24,25,27,28,29);
  this.TPModeSwitches = rtl.createSet(5,16,26);
  this.GPCModeSwitches = rtl.createSet(9,16);
  this.MacModeSwitches = rtl.createSet(6,14,17,32,33,35,28);
  this.ISOModeSwitches = rtl.createSet(7,16,26,32,33,35,41,42,43);
  this.ExtPasModeSwitches = rtl.createSet(8,16,26,32,33,35,41,42,43);
  this.StrToModeSwitch = function (aName) {
    var Result = 0;
    var ms = 0;
    aName = $lp10(aName);
    if (aName === "") return 0;
    for (var $l = 0; $l <= 56; $l++) {
      ms = $l;
      if ($mod.SModeSwitchNames[ms] === aName) return ms;
    };
    Result = 0;
    return Result;
  };
  this.FilenameIsAbsolute = function (TheFilename) {
    var Result = false;
    Result = $mod.FilenameIsUnixAbsolute(TheFilename);
    return Result;
  };
  this.FilenameIsUnixAbsolute = function (TheFilename) {
    var Result = false;
    Result = (TheFilename !== "") && (TheFilename.charAt(0) === "/");
    return Result;
  };
  this.ExtractFilenameOnly = function (AFileName) {
    var Result = "";
    Result = $lp23($lp24(AFileName),"");
    return Result;
  };
  this.CreateMsgArgs = function (MsgArgs, Args) {
    var i = 0;
    var v = undefined;
    MsgArgs.set(rtl.arraySetLength(MsgArgs.get(),"",(rtl.length(Args) - 1 - 0) + 1));
    for (var $l = 0, $end = rtl.length(Args) - 1; $l <= $end; $l++) {
      i = $l;
      v = Args[i];
      if ($lp29(v)) {
        MsgArgs.get()[i] = $lp30(!(v == false),false)}
       else if (rtl.isString(v)) {
        MsgArgs.get()[i] = "" + v}
       else if (rtl.isNumber(v)) {
        if ($lp31(v)) {
          MsgArgs.get()[i] = "" + rtl.trunc(v)}
         else MsgArgs.get()[i] = rtl.floatToStr(rtl.getNumber(v));
      } else MsgArgs.get()[i] = "";
    };
  };
  this.SafeFormat = function (Fmt, Args) {
    var Result = "";
    var MsgArgs = [];
    var i = 0;
    try {
      Result = $lp15(Fmt,Args);
    } catch ($e) {
      Result = "";
      MsgArgs = [];
      $mod.CreateMsgArgs({get: function () {
          return MsgArgs;
        }, set: function (v) {
          MsgArgs = v;
        }},Args);
      for (var $l = 0, $end = rtl.length(MsgArgs) - 1; $l <= $end; $l++) {
        i = $l;
        if (i > 0) Result = Result + ",";
        Result = Result + MsgArgs[i];
      };
      Result = "{" + Fmt + "}[" + Result + "]";
    };
    return Result;
  };
  $mod.$resourcestrings = {SErrInvalidCharacter: {org: "Invalid character '%s'"}, SErrOpenString: {org: "string exceeds end of line"}, SErrIncludeFileNotFound: {org: "Could not find include file '%s'"}, SErrResourceFileNotFound: {org: "Could not find resource file '%s'"}, SErrIfXXXNestingLimitReached: {org: "Nesting of $IFxxx too deep"}, SErrInvalidPPElse: {org: "$ELSE without matching $IFxxx"}, SErrInvalidPPEndif: {org: "$ENDIF without matching $IFxxx"}, SLogOpeningFile: {org: 'Opening source file "%s".'}, SLogLineNumber: {org: "Reading line %d."}, SLogIFDefAccepted: {org: "IFDEF %s found, accepting."}, SLogIFDefRejected: {org: "IFDEF %s found, rejecting."}, SLogIFNDefAccepted: {org: "IFNDEF %s found, accepting."}, SLogIFNDefRejected: {org: "IFNDEF %s found, rejecting."}, SLogIFAccepted: {org: "IF %s found, accepting."}, SLogIFRejected: {org: "IF %s found, rejecting."}, SLogIFOptAccepted: {org: "IFOpt %s found, accepting."}, SLogIFOptRejected: {org: "IFOpt %s found, rejecting."}, SLogELSEIFAccepted: {org: "ELSEIF %s found, accepting."}, SLogELSEIFRejected: {org: "ELSEIF %s found, rejecting."}, SErrInvalidMode: {org: 'Invalid mode: "%s"'}, SErrInvalidModeSwitch: {org: 'Invalid mode switch: "%s"'}, SErrXExpectedButYFound: {org: '"%s" expected, but "%s" found'}, SErrRangeCheck: {org: "range check failed"}, SErrDivByZero: {org: "division by zero"}, SErrOperandAndOperatorMismatch: {org: "operand and operator mismatch"}, SUserDefined: {org: 'User defined: "%s"'}, SLogMacroDefined: {org: "Macro defined: %s"}, SLogMacroUnDefined: {org: "Macro undefined: %s"}, SWarnIllegalCompilerDirectiveX: {org: 'Illegal compiler directive "%s"'}, SIllegalStateForWarnDirective: {org: 'Illegal state "%s" for $WARN directive'}, SErrIncludeLimitReached: {org: "Include file limit reached"}, SMisplacedGlobalCompilerSwitch: {org: "Misplaced global compiler switch, ignored"}, SLogMacroXSetToY: {org: "Macro %s set to %s"}, SInvalidDispatchFieldName: {org: "Invalid Dispatch field name"}, SErrWrongSwitchToggle: {org: "Wrong switch toggle, use ON/OFF or +/-"}, SNoResourceSupport: {org: 'No support for resources of type "%s"'}, SErrInvalidMultiLineLineEnding: {org: "Invalid multilinestring line ending type: use one of CR/LF/CRLF/SOURCE/PLATFORM"}, SWarnIgnoringLinkLib: {org: "Ignoring LINKLIB directive %s -> %s (Options: %s)"}, SErrInvalidIndent: {org: " Inconsistent indent characters"}, SErrMultilineNonWhiteSpaceBeforeClosing: {org: "There should be no white-space characters before closing quotes of the text block"}};
  $mod.$implcode = function () {
    $lm3 = pas.strutils;
    $lp16 = $lm3.LeftStr;
    $impl.IdentChars = rtl.createSet(null,48,57,null,65,90,null,97,122,95);
    $impl.Digits = rtl.createSet(null,48,57);
    $impl.Letters = rtl.createSet(null,97,122,null,65,90);
    $impl.HexDigits = rtl.createSet(null,48,57,null,97,102,null,65,70);
    $impl.SingleQuote = "'";
    rtl.createClass($impl,"TIncludeStackItem",$lt28,function () {
      $lt27 = this;
      this.$init = function () {
        $lt28.$init.call(this);
        this.SourceFile = null;
        this.Filename = "";
        this.Token = 0;
        this.TokenString = "";
        this.Line = "";
        this.Row = 0;
        this.ColumnOffset = 0;
        this.TokenPos = 0;
      };
      this.$final = function () {
        this.SourceFile = undefined;
        $lt28.$final.call(this);
      };
    });
  };
},["strutils"]);
rtl.module("Pas2JSFS",["System","Classes","SysUtils","PScanner","fpjson"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lm = pas.SysUtils;
  var $lt7 = $lm.Exception;
  var $lm1 = pas.PScanner;
  var $lt8 = $lm1.TLineReader;
  var $lm2 = pas.System;
  var $lp = $lm2.Copy;
  var $lt9 = $lm2.TObject;
  var $lp1 = $lm.CompareText;
  var $lt10 = $lm1.TBaseFileResolver;
  this.nUsingPath = 104;
  this.sUsingPath = 'Using %s: "%s"';
  this.nFolderNotFound = 105;
  this.sFolderNotFound = "%s not found: %s";
  this.nDuplicateFileFound = 205;
  this.sDuplicateFileFound = 'Duplicate file found: "%s" and "%s"';
  this.nCustomJSFileNotFound = 206;
  rtl.createClass(this,"EPas2jsFS",$lt7,function () {
    $lt = this;
  });
  rtl.createClass(this,"TSourceLineReader",$lt8,function () {
    $lt1 = this;
    this.$init = function () {
      $lt8.$init.call(this);
      this.FIsEOF = false;
      this.FLineNumber = 0;
      this.FSource = "";
      this.FSrcPos = 0;
    };
    this.IncLineNumber = function () {
      this.FLineNumber += 1;
    };
    this.Create$2 = function (aFileName, aSource) {
      $lt8.Create$1.call(this,aFileName);
      this.FSource = aSource;
      this.FSrcPos = 1;
      this.FIsEOF = this.FSource === "";
      return this;
    };
    this.IsEOF = function () {
      var Result = false;
      Result = this.FIsEOF;
      return Result;
    };
    this.ReadLine = function () {
      var $Self = this;
      var Result = "";
      var S = "";
      var p = 0;
      var SrcLen = 0;
      function GetLine() {
        var l = 0;
        l = p - $Self.FSrcPos;
        Result = $lp(S,$Self.FSrcPos,l);
        $Self.FSrcPos = p;
        $Self.IncLineNumber();
      };
      if (this.FIsEOF) return "";
      S = this.FSource;
      SrcLen = S.length;
      p = this.FSrcPos;
      while (p <= SrcLen) {
        var $tmp = S.charAt(p - 1);
        if (($tmp === "\n") || ($tmp === "\r")) {
          GetLine();
          p += 1;
          if ((p <= SrcLen) && (S.charCodeAt(p - 1) in rtl.createSet(10,13)) && (S.charAt(p - 1) !== S.charAt(p - 1 - 1))) p += 1;
          if (p > SrcLen) this.FIsEOF = true;
          this.FSrcPos = p;
          return Result;
        } else {
          p += 1;
        };
      };
      this.FIsEOF = true;
      GetLine();
      return Result;
    };
  });
  $lt2 = this.TP2jsFSOption = {"0": "caoShowFullFilenames", caoShowFullFilenames: 0, "1": "caoShowTriedUsedFiles", caoShowTriedUsedFiles: 1, "2": "caoSearchLikeFPC", caoSearchLikeFPC: 2, "3": "caoStrictFileCase", caoStrictFileCase: 3};
  $lt3 = this.TKeyCompareType = {"0": "kcFilename", kcFilename: 0, "1": "kcUnitName", kcUnitName: 1};
  rtl.createClass(this,"TPas2JSFS",$lt9,function () {
    $lt4 = this;
    this.$init = function () {
      $lt9.$init.call(this);
      this.FOptions = {};
      this.FReadLineCounter = 0;
      this.FDefaultOutputPath = "";
      this.FUnitOutputPath = "";
    };
    this.$final = function () {
      this.FOptions = undefined;
      $lt9.$final.call(this);
    };
    this.SetOptionFromIndex = function (AIndex, AValue) {
      this.SetOption(AIndex,AValue);
    };
    this.SetOption = function (Flag, Enable) {
      if (Enable) {
        this.FOptions = rtl.includeSet(this.FOptions,Flag)}
       else this.FOptions = rtl.excludeSet(this.FOptions,Flag);
    };
    this.SameFileName = function (File1, File2) {
      var Result = false;
      Result = $lp1(File1,File2) === 0;
      return Result;
    };
    this.File1IsNewer = function (File1, File2) {
      var Result = false;
      Result = false;
      if (File1 === File2) ;
      return Result;
    };
    this.ExpandDirectory = function (Filename) {
      var Result = "";
      Result = Filename;
      return Result;
    };
    this.ExpandFileName = function (Filename) {
      var Result = "";
      Result = Filename;
      return Result;
    };
    this.FormatPath = function (aFileName) {
      var Result = "";
      Result = aFileName;
      return Result;
    };
    this.DirectoryExists = function (aDirectory) {
      var Result = false;
      Result = aDirectory === "";
      return Result;
    };
    this.TryCreateRelativePath = function (Filename, BaseDirectory, UsePointDirectory, AlwaysRequireSharedBaseFolder, RelPath) {
      var Result = false;
      Result = true;
      RelPath.set(Filename);
      if ((BaseDirectory === "") || UsePointDirectory || AlwaysRequireSharedBaseFolder) ;
      return Result;
    };
    this.WriteFoldersAndSearchPaths = function () {
    };
    this.CreateResolver = function () {
      var Result = null;
      Result = $lt6.$create("Create$2",[this]);
      return Result;
    };
    this.AddForeignUnitPath = function (aValue, FromCmdLine) {
      var Result = "";
      Result = "";
      if ((aValue === "") || FromCmdLine) ;
      return Result;
    };
    this.HandleOptionPaths = function (C, aValue, FromCmdLine) {
      var Result = "";
      Result = "Invalid parameter: -F" + C + aValue;
      if (FromCmdLine) ;
      return Result;
    };
    this.Create$1 = function () {
      this.FOptions = rtl.refSet($mod.DefaultPas2jsFSOptions);
      return this;
    };
    this.Reset = function () {
      this.FReadLineCounter = 0;
      this.FUnitOutputPath = "";
      this.FDefaultOutputPath = "";
    };
    this.IncReadLineCounter = function () {
      this.FReadLineCounter += 1;
    };
  });
  rtl.createClass(this,"TPas2jsFile",$lt9,function () {
    $lt5 = this;
    this.$init = function () {
      $lt9.$init.call(this);
      this.FFilename = "";
      this.FFS = null;
      this.FSource = "";
    };
    this.$final = function () {
      this.FFS = undefined;
      $lt9.$final.call(this);
    };
    this.SetSource = function (aSource) {
      this.FSource = aSource;
    };
    this.Create$1 = function (aFS, aFilename) {
      this.FFS = aFS;
      this.FFilename = aFilename;
      return this;
    };
  });
  rtl.createClass(this,"TPas2jsFSResolver",$lt10,function () {
    $lt6 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.FFS = null;
    };
    this.$final = function () {
      this.FFS = undefined;
      $lt10.$final.call(this);
    };
    this.Create$2 = function (aFS) {
      $lt10.Create$1.call(this);
      this.FFS = aFS;
      return this;
    };
    this.FindResourceFileName = function (aFilename) {
      var Result = "";
      Result = this.FFS.FindResourceFileName(aFilename,this.FBaseDirectory);
      return Result;
    };
    this.FindIncludeFile = function (aFilename) {
      var Result = null;
      var Filename = "";
      Result = null;
      Filename = this.FFS.FindIncludeFileName(aFilename,this.FBaseDirectory,this.FModuleDirectory,this.FMode);
      if (Filename === "") return Result;
      try {
        Result = this.FindSourceFile(Filename);
      } catch ($e) {
      };
      return Result;
    };
    this.FindSourceFile = function (aFilename) {
      var Result = null;
      var CurFilename = "";
      CurFilename = this.FFS.FindSourceFileName(aFilename);
      Result = this.FFS.LoadFile(CurFilename,false).CreateLineReader(false);
      return Result;
    };
  });
  this.p2jsfcoCaption = ["Show full filenames","Show tried/used files","Search files like FPC","Strict file case"];
  this.DefaultPas2jsFSOptions = {};
});
rtl.module("webfilecache",["System","Classes","SysUtils","JS","Web","fpjson","Pas2JSFS","PScanner","contnrs"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lm = pas.System;
  var $lt7 = $lm.TObject;
  var $lm1 = pas.contnrs;
  var $lt8 = $lm1.TFPObjectHashTable;
  var $lm2 = pas.SysUtils;
  var $lp = $lm2.FreeAndNil;
  var $lm3 = pas.PScanner;
  var $lt9 = $lm3.EFileNotFoundError;
  var $lm4 = pas.Pas2JSFS;
  var $lt10 = $lm4.TPas2jsFile;
  var $lt11 = $lm4.TSourceLineReader;
  var $lt12 = $lm4.TPas2JSFS;
  var $lp1 = $lm2.LowerCase;
  var $lp2 = $lm2.ExtractFileName;
  var $lp3 = $lm.Writeln;
  var $lp4 = $lm2.IncludeTrailingPathDelimiter;
  var $lt13 = $lm4.TPas2jsFSResolver;
  rtl.createClass(this,"TWebFileContent",$lt7,function () {
    $lt = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FContents = "";
      this.FFileName = "";
      this.FModified = false;
    };
    this.SetContents = function (AValue) {
      if (this.FContents === AValue) return;
      this.FContents = AValue;
      this.FModified = true;
    };
    this.Create$1 = function (aFileName, aContents) {
      this.FContents = aContents;
      this.FFileName = aFileName;
      return this;
    };
  });
  rtl.createClass(this,"TWebFilesCache",$lt7,function () {
    $lt1 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FFiles = null;
    };
    this.$final = function () {
      this.FFiles = undefined;
      $lt7.$final.call(this);
    };
    this.FindFile = function (aFileName) {
      var Result = null;
      var N = null;
      N = this.FFiles.Find(aFileName);
      if (N === null) {
        Result = null}
       else Result = N.FData;
      return Result;
    };
    this.Create$1 = function () {
      this.FFiles = $lt8.$create("Create$2",[true]);
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FFiles;
        }, set: function (v) {
          this.p.FFiles = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.HasFile = function (aFileName) {
      var Result = false;
      Result = this.FindFile(aFileName) !== null;
      return Result;
    };
    this.GetFileContent = function (aFileName) {
      var Result = "";
      var W = null;
      W = this.FindFile(aFileName);
      if (W != null) {
        Result = W.FContents}
       else throw $lt9.$create("Create$1",["No such file " + aFileName]);
      return Result;
    };
    this.SetFileContent = function (aFileName, aContent) {
      var Result = false;
      var W = null;
      W = this.FindFile(aFileName);
      Result = W != null;
      if (Result) {
        W.SetContents(aContent)}
       else this.FFiles.Add(aFileName,$lt.$create("Create$1",[aFileName,aContent]));
      return Result;
    };
  });
  rtl.createClass(this,"TPas2jsWebFile",$lt10,function () {
    $lt2 = this;
    this.CreateLineReader = function (RaiseOnError) {
      var Result = null;
      if (this.Load(RaiseOnError,false)) {
        Result = $lt3.$create("Create$2",[this.FFilename,this.FSource]);
        Result.FFS = this.FFS;
      } else Result = null;
      return Result;
    };
    this.Load = function (RaiseOnError, Binary) {
      var Result = false;
      Result = false;
      var $with = rtl.as(this.FFS,$lt5).FCache;
      if ($with.HasFile(this.FFilename)) {
        this.SetSource($with.GetFileContent(this.FFilename));
        Result = true;
      };
      if (!Result) if (RaiseOnError) throw $lt9.$create("Create$1",["File not loaded " + this.FFilename]);
      return Result;
    };
  });
  rtl.createClass(this,"TWebSourceLineReader",$lt11,function () {
    $lt3 = this;
    this.$init = function () {
      $lt11.$init.call(this);
      this.FFS = null;
    };
    this.$final = function () {
      this.FFS = undefined;
      $lt11.$final.call(this);
    };
    this.IncLineNumber = function () {
      if (this.FFS !== null) this.FFS.IncReadLineCounter();
      $lt11.IncLineNumber.call(this);
    };
  });
  rtl.createClass(this,"TLoadFileRequest",$lt7,function () {
    $lt4 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FFS = null;
      this.FFileName = "";
      this.FXML = null;
      this.FOnLoaded = null;
    };
    this.$final = function () {
      this.FFS = undefined;
      this.FXML = undefined;
      this.FOnLoaded = undefined;
      $lt7.$final.call(this);
    };
    this.DoChange = function () {
      var Err = "";
      var $tmp = this.FXML.readyState;
      if ($tmp === 0) {}
      else if ($tmp === 1) {}
      else if ($tmp === 2) {}
      else if ($tmp === 3) {}
      else if ($tmp === 4) {
        if (rtl.trunc(this.FXML.status / 100) === 2) {
          Err = "";
          this.FFS.SetFileContent(this.FFileName,this.FXML.responseText);
        } else Err = "Error loading file: " + this.FXML.statusText;
        if (this.FOnLoaded != null) this.FOnLoaded(this.FFS,this.FFileName,Err);
        if (this.FFS.FOnLoadedFile != null) this.FFS.FOnLoadedFile(this.FFS,this.FFileName,Err);
        this.Free();
      };
    };
    this.Create$1 = function (aFS, aFileName, aOnLoaded) {
      this.FFS = aFS;
      this.FOnLoaded = aOnLoaded;
      this.FFileName = aFileName;
      return this;
    };
    this.DoLoad = function (aURL) {
      this.FXML = new XMLHttpRequest();
      this.FXML.onreadystatechange = rtl.createSafeCallback(this,"DoChange");
      this.FXML.open("GET",aURL);
      this.FXML.send();
    };
  });
  rtl.createClass(this,"TPas2jsWebFS",$lt12,function () {
    $lt5 = this;
    this.$init = function () {
      $lt12.$init.call(this);
      this.FCache = null;
      this.FLoadBaseURL = "";
      this.FOnLoadedFile = null;
    };
    this.$final = function () {
      this.FCache = undefined;
      this.FOnLoadedFile = undefined;
      $lt12.$final.call(this);
    };
    this.NormalizeFileName = function (aFileName) {
      var Result = "";
      Result = $lp1($lp2(aFileName));
      return Result;
    };
    this.FindSourceFileName = function (aFilename) {
      var Result = "";
      Result = this.$class.NormalizeFileName(aFilename);
      if (!this.FCache.HasFile(Result)) Result = "";
      return Result;
    };
    this.Create$1 = function () {
      $lt12.Create$1.call(this);
      this.FCache = $lt1.$create("Create$1");
      return this;
    };
    this.CreateResolver = function () {
      var Result = null;
      Result = $lt6.$create("Create$2",[this]);
      return Result;
    };
    this.FileExists = function (aFileName) {
      var Result = false;
      Result = this.FCache.HasFile(this.$class.NormalizeFileName(aFileName));
      return Result;
    };
    this.FindCustomJSFileName = function (aFilename) {
      var Result = "";
      Result = this.$class.NormalizeFileName(aFilename);
      if (!this.FCache.HasFile(Result)) Result = "";
      return Result;
    };
    this.FindIncludeFileName = function (aFilename, SrcDir, ModuleDir, Mode) {
      var Result = "";
      Result = this.$class.NormalizeFileName(aFilename);
      if (!this.FCache.HasFile(Result)) Result = "";
      return Result;
    };
    this.FindUnitFileName = function (aUnitname, InFilename, ModuleDir, IsForeign) {
      var Result = "";
      Result = this.$class.NormalizeFileName(aUnitname + ".pas");
      IsForeign.set(false);
      return Result;
    };
    this.FindUnitJSFileName = function (aUnitFilename) {
      var Result = "";
      Result = this.$class.NormalizeFileName(aUnitFilename);
      return Result;
    };
    this.LoadFile = function (Filename, Binary) {
      var Result = null;
      Result = $lt2.$create("Create$1",[this,Filename]);
      Result.Load(true,false);
      return Result;
    };
    this.SaveToFile = function (ms, Filename) {
      var aContent = "";
      var i = 0;
      var v = undefined;
      aContent = "";
      for (var $l = 0, $end = ms.length - 1; $l <= $end; $l++) {
        i = $l;
        v = ms[i];
        $lp3("Char ",i,"(",v,") : ",String.fromCharCode(v));
        aContent = aContent + String.fromCharCode(ms[i]);
      };
      this.SetFileContent(Filename,aContent);
    };
    this.SetFileContent = function (aFileName, aContents) {
      var Result = false;
      Result = this.FCache.SetFileContent(this.$class.NormalizeFileName(aFileName),aContents);
      return Result;
    };
    this.GetFileContent = function (aFileName) {
      var Result = "";
      Result = this.FCache.GetFileContent(this.$class.NormalizeFileName(aFileName));
      return Result;
    };
    this.LoadFile$2 = function (aFileName, OnLoaded) {
      var Result = false;
      var FN = "";
      var aURL = "";
      var LF = null;
      FN = this.$class.NormalizeFileName(aFileName);
      Result = !this.FCache.HasFile(FN);
      if (!Result) {
        if (OnLoaded != null) OnLoaded(this,aFileName,"");
      } else {
        aURL = $lp4(this.FLoadBaseURL) + FN;
        LF = $lt4.$create("Create$1",[this,aFileName,OnLoaded]);
        LF.DoLoad(aURL);
      };
      return Result;
    };
    this.LoadFiles$1 = function (aList, OnLoaded) {
      var Result = 0;
      var i = 0;
      Result = 0;
      for (var $l = 0, $end = rtl.length(aList) - 1; $l <= $end; $l++) {
        i = $l;
        if (this.LoadFile$2(aList[i],OnLoaded)) Result += 1;
      };
      return Result;
    };
  });
  rtl.createClass(this,"TPas2jsWebResolver",$lt13,function () {
    $lt6 = this;
  });
});
rtl.module("PasTree",["System","SysUtils","Classes"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lt19 = null;
  var $lt20 = null;
  var $lt21 = null;
  var $lt22 = null;
  var $lt23 = null;
  var $lt24 = null;
  var $lt25 = null;
  var $lt26 = null;
  var $lt27 = null;
  var $lt28 = null;
  var $lt29 = null;
  var $lt30 = null;
  var $lt31 = null;
  var $lt32 = null;
  var $lt33 = null;
  var $lt34 = null;
  var $lt35 = null;
  var $lt36 = null;
  var $lt37 = null;
  var $lt38 = null;
  var $lt39 = null;
  var $lt40 = null;
  var $lt41 = null;
  var $lt42 = null;
  var $lt43 = null;
  var $lt44 = null;
  var $lt45 = null;
  var $lt46 = null;
  var $lt47 = null;
  var $lt48 = null;
  var $lt49 = null;
  var $lt50 = null;
  var $lt51 = null;
  var $lt52 = null;
  var $lt53 = null;
  var $lt54 = null;
  var $lt55 = null;
  var $lt56 = null;
  var $lt57 = null;
  var $lt58 = null;
  var $lt59 = null;
  var $lt60 = null;
  var $lt61 = null;
  var $lt62 = null;
  var $lt63 = null;
  var $lt64 = null;
  var $lt65 = null;
  var $lt66 = null;
  var $lt67 = null;
  var $lt68 = null;
  var $lt69 = null;
  var $lt70 = null;
  var $lt71 = null;
  var $lt72 = null;
  var $lt73 = null;
  var $lt74 = null;
  var $lt75 = null;
  var $lt76 = null;
  var $lt77 = null;
  var $lt78 = null;
  var $lt79 = null;
  var $lt80 = null;
  var $lt81 = null;
  var $lt82 = null;
  var $lt83 = null;
  var $lt84 = null;
  var $lt85 = null;
  var $lt86 = null;
  var $lt87 = null;
  var $lt88 = null;
  var $lt89 = null;
  var $lt90 = null;
  var $lt91 = null;
  var $lt92 = null;
  var $lt93 = null;
  var $lt94 = null;
  var $lt95 = null;
  var $lt96 = null;
  var $lt97 = null;
  var $lt98 = null;
  var $lt99 = null;
  var $lt100 = null;
  var $lt101 = null;
  var $lt102 = null;
  var $lt103 = null;
  var $lt104 = null;
  var $lt105 = null;
  var $lt106 = null;
  var $lt107 = null;
  var $lt108 = null;
  var $lt109 = null;
  var $lt110 = null;
  var $lt111 = null;
  var $lt112 = null;
  var $lt113 = null;
  var $lt114 = null;
  var $lt115 = null;
  var $lt116 = null;
  var $lt117 = null;
  var $lt118 = null;
  var $lt119 = null;
  var $lt120 = null;
  var $lt121 = null;
  var $lt122 = null;
  var $lt123 = null;
  var $lt124 = null;
  var $lt125 = null;
  var $lt126 = null;
  var $lt127 = null;
  var $lt128 = null;
  var $lt129 = null;
  var $lm = pas.SysUtils;
  var $lt130 = $lm.Exception;
  var $lm1 = pas.System;
  var $lt131 = $lm1.TObject;
  var $lp = $lm1.Pos;
  var $lp1 = $lm.LowerCase;
  var $lm2 = pas.Classes;
  var $lt132 = $lm2.TFPList;
  var $lp2 = $lm.FreeAndNil;
  var $lp3 = $lm.SameText;
  var $lt133 = $lm2.TStringList;
  var $lp4 = $lm.IntToStr;
  var $lp5 = $lm.CompareText;
  rtl.createClass(this,"EPasTree",$lt130,function () {
    $lt = this;
  });
  rtl.createClass(this,"TPasElementBase",$lt131,function () {
    $lt1 = this;
    this.$init = function () {
      $lt131.$init.call(this);
      this.FData = null;
    };
    this.$final = function () {
      this.FData = undefined;
      $lt131.$final.call(this);
    };
  });
  $lt2 = this.TPasMemberVisibility = {"0": "visDefault", visDefault: 0, "1": "visPrivate", visPrivate: 1, "2": "visProtected", visProtected: 2, "3": "visPublic", visPublic: 3, "4": "visPublished", visPublished: 4, "5": "visAutomated", visAutomated: 5, "6": "visStrictPrivate", visStrictPrivate: 6, "7": "visStrictProtected", visStrictProtected: 7, "8": "visRequired", visRequired: 8, "9": "visOptional", visOptional: 9};
  $lt3 = this.TCallingConvention = {"0": "ccDefault", ccDefault: 0, "1": "ccRegister", ccRegister: 1, "2": "ccPascal", ccPascal: 2, "3": "ccCDecl", ccCDecl: 3, "4": "ccStdCall", ccStdCall: 4, "5": "ccOldFPCCall", ccOldFPCCall: 5, "6": "ccSafeCall", ccSafeCall: 6, "7": "ccSysCall", ccSysCall: 7, "8": "ccMWPascal", ccMWPascal: 8, "9": "ccHardFloat", ccHardFloat: 9, "10": "ccSysV_ABI_Default", ccSysV_ABI_Default: 10, "11": "ccSysV_ABI_CDecl", ccSysV_ABI_CDecl: 11, "12": "ccMS_ABI_Default", ccMS_ABI_Default: 12, "13": "ccMS_ABI_CDecl", ccMS_ABI_CDecl: 13, "14": "ccVectorCall", ccVectorCall: 14, "15": "ccWinApi", ccWinApi: 15};
  $lt4 = this.TProcTypeModifier = {"0": "ptmOfObject", ptmOfObject: 0, "1": "ptmIsNested", ptmIsNested: 1, "2": "ptmStatic", ptmStatic: 2, "3": "ptmVarargs", ptmVarargs: 3, "4": "ptmReferenceTo", ptmReferenceTo: 4, "5": "ptmAsync", ptmAsync: 5, "6": "ptmFar", ptmFar: 6, "7": "ptmCblock", ptmCblock: 7};
  $lt5 = this.TPackMode = {"0": "pmNone", pmNone: 0, "1": "pmPacked", pmPacked: 1, "2": "pmBitPacked", pmBitPacked: 2};
  $lt6 = this.TPasMemberHint = {"0": "hDeprecated", hDeprecated: 0, "1": "hLibrary", hLibrary: 1, "2": "hPlatform", hPlatform: 2, "3": "hExperimental", hExperimental: 3, "4": "hUnimplemented", hUnimplemented: 4};
  rtl.createClass(this,"TPasElement",$lt1,function () {
    $lt7 = this;
    this.FLastPasElementId = 0;
    this.$init = function () {
      $lt1.$init.call(this);
      this.FDocComment = "";
      this.FName = "";
      this.FParent = null;
      this.FHints = {};
      this.FHintMessage = "";
      this.FPasElementId = 0;
      this.SourceFilename = "";
      this.SourceLinenumber = 0;
      this.SourceEndLinenumber = 0;
      this.Visibility = 0;
    };
    this.$final = function () {
      this.FParent = undefined;
      this.FHints = undefined;
      $lt1.$final.call(this);
    };
    this.SetParent = function (AValue) {
      this.FParent = AValue;
    };
    this.Create$1 = function (AName, AParent) {
      $lt131.Create.call(this);
      this.FName = AName;
      this.FParent = AParent;
      $lt7.FLastPasElementId += 1;
      this.FPasElementId = this.FLastPasElementId;
      return this;
    };
    this.Destroy = function () {
      this.FParent = null;
      $lt131.Destroy.call(this);
    };
    var KW = ";absolute;and;array;asm;begin;case;const;constructor;destructor;div;do;" + "downto;else;end;file;for;function;goto;if;implementation;in;inherited;" + "inline;interface;label;mod;nil;not;object;of;on;operator;or;packed;" + "procedure;program;record;reintroduce;repeat;self;set;shl;shr;TPasTreeString;then;" + "to;type;unit;until;uses;var;while;with;xor;dispose;exit;false;new;true;" + "as;class;dispinterface;except;exports;finalization;finally;initialization;" + "inline;is;library;on;out;packed;property;raise;resourcestring;threadvar;try;" + "private;published;length;setlength;";
    this.IsKeyWord = function (S) {
      var Result = false;
      Result = $lp(";" + $lp1(S) + ";",KW) !== 0;
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      aMethodCall(this,Arg);
    };
    this.ForEachChildCall = function (aMethodCall, Arg, Child, CheckParent) {
      if (Child === null) return;
      if (CheckParent && !Child.HasParent(this)) return;
      Child.ForEachCall(aMethodCall,Arg);
    };
    this.SafeName = function () {
      var Result = "";
      Result = this.FName;
      if (this.$class.IsKeyWord(Result)) Result = "&" + Result;
      return Result;
    };
    this.FullPath = function () {
      var Result = "";
      var p = null;
      Result = "";
      p = this.FParent;
      while ((p != null) && !p.$class.InheritsFrom($lt22)) {
        if ((p.FName !== "") && !$lt78.isPrototypeOf(p)) if (Result.length > 0) {
          Result = p.FName + "." + Result}
         else Result = p.FName;
        p = p.FParent;
      };
      return Result;
    };
    this.ParentPath = function () {
      var Result = "";
      var p = null;
      Result = "";
      p = this.FParent;
      while (p != null) {
        if ((p.FName !== "") && !$lt78.isPrototypeOf(p)) if (Result.length > 0) {
          Result = p.FName + "." + Result}
         else Result = p.FName;
        p = p.FParent;
      };
      return Result;
    };
    this.FullName = function () {
      var Result = "";
      Result = this.FullPath();
      if (Result !== "") {
        Result = Result + "." + this.FName}
       else Result = this.FName;
      return Result;
    };
    this.PathName = function () {
      var Result = "";
      Result = this.ParentPath();
      if (Result !== "") {
        Result = Result + "." + this.FName}
       else Result = this.FName;
      return Result;
    };
    this.GetModule = function () {
      var Result = null;
      var p = null;
      if ($lt34.isPrototypeOf(this)) {
        Result = null}
       else {
        p = this;
        while ((p !== null) && !$lt30.isPrototypeOf(p)) p = p.FParent;
        Result = p;
      };
      return Result;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeElement");
      return Result;
    };
    this.HasParent = function (aParent) {
      var Result = false;
      var El = null;
      El = this.FParent;
      while (El !== null) {
        if (El === aParent) return true;
        El = El.FParent;
      };
      Result = false;
      return Result;
    };
  });
  $lt8 = this.TPasExprKind = {"0": "pekIdent", pekIdent: 0, "1": "pekNumber", pekNumber: 1, "2": "pekString", pekString: 2, "3": "pekStringMultiLine", pekStringMultiLine: 3, "4": "pekSet", pekSet: 4, "5": "pekNil", pekNil: 5, "6": "pekBoolConst", pekBoolConst: 6, "7": "pekRange", pekRange: 7, "8": "pekUnary", pekUnary: 8, "9": "pekBinary", pekBinary: 9, "10": "pekFuncParams", pekFuncParams: 10, "11": "pekArrayParams", pekArrayParams: 11, "12": "pekListOfExp", pekListOfExp: 12, "13": "pekInherited", pekInherited: 13, "14": "pekSelf", pekSelf: 14, "15": "pekSpecialize", pekSpecialize: 15, "16": "pekProcedure", pekProcedure: 16};
  $lt9 = this.TExprOpCode = {"0": "eopNone", eopNone: 0, "1": "eopAdd", eopAdd: 1, "2": "eopSubtract", eopSubtract: 2, "3": "eopMultiply", eopMultiply: 3, "4": "eopDivide", eopDivide: 4, "5": "eopDiv", eopDiv: 5, "6": "eopMod", eopMod: 6, "7": "eopPower", eopPower: 7, "8": "eopShr", eopShr: 8, "9": "eopShl", eopShl: 9, "10": "eopNot", eopNot: 10, "11": "eopAnd", eopAnd: 11, "12": "eopOr", eopOr: 12, "13": "eopXor", eopXor: 13, "14": "eopEqual", eopEqual: 14, "15": "eopNotEqual", eopNotEqual: 15, "16": "eopLessThan", eopLessThan: 16, "17": "eopGreaterThan", eopGreaterThan: 17, "18": "eopLessthanEqual", eopLessthanEqual: 18, "19": "eopGreaterThanEqual", eopGreaterThanEqual: 19, "20": "eopIn", eopIn: 20, "21": "eopIs", eopIs: 21, "22": "eopAs", eopAs: 22, "23": "eopSymmetricaldifference", eopSymmetricaldifference: 23, "24": "eopAddress", eopAddress: 24, "25": "eopDeref", eopDeref: 25, "26": "eopMemAddress", eopMemAddress: 26, "27": "eopSubIdent", eopSubIdent: 27};
  rtl.createClass(this,"TPasExpr",$lt7,function () {
    $lt10 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Kind = 0;
      this.OpCode = 0;
      this.Format1 = null;
      this.Format2 = null;
    };
    this.$final = function () {
      this.Format1 = undefined;
      this.Format2 = undefined;
      $lt7.$final.call(this);
    };
    this.Create$2 = function (AParent, AKind, AOpCode) {
      $lt7.Create$1.call(this,this.$classname,AParent);
      this.Kind = AKind;
      this.OpCode = AOpCode;
      return this;
    };
  });
  rtl.createClass(this,"TUnaryExpr",$lt10,function () {
    $lt11 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Operand = null;
    };
    this.$final = function () {
      this.Operand = undefined;
      $lt10.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Operand,false);
    };
  });
  rtl.createClass(this,"TBinaryExpr",$lt10,function () {
    $lt12 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Left = null;
      this.Right = null;
    };
    this.$final = function () {
      this.Left = undefined;
      this.Right = undefined;
      $lt10.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Left,false);
      this.ForEachChildCall(aMethodCall,Arg,this.Right,false);
    };
    this.IsRightSubIdent = function (El) {
      var Result = false;
      var Bin = null;
      if ((El === null) || !$lt12.isPrototypeOf(El.FParent)) return false;
      Bin = El.FParent;
      Result = (Bin.Right === El) && (Bin.OpCode === 27);
      return Result;
    };
  });
  rtl.createClass(this,"TPrimitiveExpr",$lt10,function () {
    $lt13 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Value = "";
    };
    this.Create$3 = function (AParent, AKind, AValue) {
      $lt10.Create$2.call(this,AParent,AKind,0);
      this.Value = AValue;
      return this;
    };
  });
  rtl.createClass(this,"TBoolConstExpr",$lt10,function () {
    $lt14 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Value = false;
    };
  });
  rtl.createClass(this,"TNilExpr",$lt10,function () {
    $lt15 = this;
  });
  rtl.createClass(this,"TInheritedExpr",$lt10,function () {
    $lt16 = this;
  });
  rtl.createClass(this,"TSelfExpr",$lt10,function () {
    $lt17 = this;
  });
  rtl.createClass(this,"TParamsExpr",$lt10,function () {
    $lt18 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Value = null;
      this.Params = [];
    };
    this.$final = function () {
      this.Value = undefined;
      this.Params = undefined;
      $lt10.$final.call(this);
    };
    this.AddParam = function (xp) {
      var i = 0;
      i = rtl.length(this.Params);
      this.Params = rtl.arraySetLength(this.Params,null,i + 1);
      this.Params[i] = xp;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Value,false);
      for (var $l = 0, $end = rtl.length(this.Params) - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,this.Params[i],false);
      };
    };
  });
  rtl.recNewT(this,"TRecordValuesItem",function () {
    $lt19 = this;
    this.Name = "";
    this.NameExp = null;
    this.ValueExp = null;
    this.$eq = function (b) {
      return (this.Name === b.Name) && (this.NameExp === b.NameExp) && (this.ValueExp === b.ValueExp);
    };
    this.$assign = function (s) {
      this.Name = s.Name;
      this.NameExp = s.NameExp;
      this.ValueExp = s.ValueExp;
      return this;
    };
  });
  rtl.createClass(this,"TRecordValues",$lt10,function () {
    $lt20 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Fields = [];
    };
    this.$final = function () {
      this.Fields = undefined;
      $lt10.$final.call(this);
    };
    this.Destroy = function () {
      this.Fields = [];
      $lt7.Destroy.call(this);
    };
    this.AddField = function (AName, Value) {
      var i = 0;
      i = rtl.length(this.Fields);
      this.Fields = rtl.arraySetLength(this.Fields,$lt19,i + 1);
      this.Fields[i].Name = AName.Value;
      this.Fields[i].NameExp = AName;
      AName.SetParent(this);
      this.Fields[i].ValueExp = Value;
      Value.SetParent(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = rtl.length(this.Fields) - 1; $l <= $end; $l++) {
        i = $l;
        var $with = this.Fields[i];
        if ($with.NameExp !== null) this.ForEachChildCall(aMethodCall,Arg,$with.NameExp,false);
        if ($with.ValueExp !== null) this.ForEachChildCall(aMethodCall,Arg,$with.ValueExp,false);
      };
    };
  });
  rtl.createClass(this,"TArrayValues",$lt10,function () {
    $lt21 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Values = [];
    };
    this.$final = function () {
      this.Values = undefined;
      $lt10.$final.call(this);
    };
    this.Destroy = function () {
      this.Values = [];
      $lt7.Destroy.call(this);
    };
    this.AddValues = function (AValue) {
      var i = 0;
      i = rtl.length(this.Values);
      this.Values = rtl.arraySetLength(this.Values,null,i + 1);
      this.Values[i] = AValue;
      AValue.SetParent(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = rtl.length(this.Values) - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,this.Values[i],false);
      };
    };
  });
  rtl.createClass(this,"TPasDeclarations",$lt7,function () {
    $lt22 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Declarations = null;
      this.Attributes = null;
      this.Classes = null;
      this.Consts = null;
      this.ExportSymbols = null;
      this.Functions = null;
      this.Properties = null;
      this.ResStrings = null;
      this.Labels = null;
      this.Types = null;
      this.Variables = null;
    };
    this.$final = function () {
      this.Declarations = undefined;
      this.Attributes = undefined;
      this.Classes = undefined;
      this.Consts = undefined;
      this.ExportSymbols = undefined;
      this.Functions = undefined;
      this.Properties = undefined;
      this.ResStrings = undefined;
      this.Labels = undefined;
      this.Types = undefined;
      this.Variables = undefined;
      $lt7.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Declarations = $lt132.$create("Create");
      this.Attributes = $lt132.$create("Create");
      this.Classes = $lt132.$create("Create");
      this.Consts = $lt132.$create("Create");
      this.ExportSymbols = $lt132.$create("Create");
      this.Functions = $lt132.$create("Create");
      this.Properties = $lt132.$create("Create");
      this.ResStrings = $lt132.$create("Create");
      this.Types = $lt132.$create("Create");
      this.Labels = $lt132.$create("Create");
      this.Variables = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Variables;
        }, set: function (v) {
          this.p.Variables = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Types;
        }, set: function (v) {
          this.p.Types = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.ResStrings;
        }, set: function (v) {
          this.p.ResStrings = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Properties;
        }, set: function (v) {
          this.p.Properties = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Functions;
        }, set: function (v) {
          this.p.Functions = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.ExportSymbols;
        }, set: function (v) {
          this.p.ExportSymbols = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Consts;
        }, set: function (v) {
          this.p.Consts = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Classes;
        }, set: function (v) {
          this.p.Classes = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Attributes;
        }, set: function (v) {
          this.p.Attributes = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Labels;
        }, set: function (v) {
          this.p.Labels = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Declarations;
        }, set: function (v) {
          this.p.Declarations = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeSection");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Declarations.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Declarations.Get(i)),false);
      };
    };
  });
  rtl.createClass(this,"TPasUsesUnit",$lt7,function () {
    $lt23 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Expr = null;
      this.InFilename = null;
      this.Module = null;
    };
    this.$final = function () {
      this.Expr = undefined;
      this.InFilename = undefined;
      this.Module = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeUsesUnit");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Expr,false);
      this.ForEachChildCall(aMethodCall,Arg,this.InFilename,false);
      this.ForEachChildCall(aMethodCall,Arg,this.Module,true);
    };
  });
  rtl.createClass(this,"TPasSection",$lt22,function () {
    $lt24 = this;
    this.$init = function () {
      $lt22.$init.call(this);
      this.UsesList = null;
      this.UsesClause = [];
      this.PendingUsedIntf = null;
    };
    this.$final = function () {
      this.UsesList = undefined;
      this.UsesClause = undefined;
      this.PendingUsedIntf = undefined;
      $lt22.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt22.Create$1.call(this,AName,AParent);
      this.UsesList = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.UsesList;
        }, set: function (v) {
          this.p.UsesList = v;
        }});
      $lt22.Destroy.call(this);
    };
    this.AddUnitToUsesList = function (AUnitName, aName, InFilename, aModule, UsesUnit) {
      var Result = null;
      var l = 0;
      if ((InFilename !== null) && (InFilename.Kind !== 2)) throw $lt.$create("Create$1",["Wrong In expression for " + AUnitName]);
      if (aModule === null) aModule = $lt69.$create("Create$1",[AUnitName,this]);
      l = rtl.length(this.UsesClause);
      this.UsesClause = rtl.arraySetLength(this.UsesClause,null,l + 1);
      if (UsesUnit === null) {
        UsesUnit = $lt23.$create("Create$1",[AUnitName,this]);
        if (aName !== null) {
          UsesUnit.SourceFilename = aName.SourceFilename;
          UsesUnit.SourceLinenumber = aName.SourceLinenumber;
        };
      };
      this.UsesClause[l] = UsesUnit;
      UsesUnit.Expr = aName;
      UsesUnit.InFilename = InFilename;
      UsesUnit.Module = aModule;
      Result = UsesUnit;
      this.UsesList.Add(aModule);
      return Result;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeSection");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt22.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = rtl.length(this.UsesClause) - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,this.UsesClause[i],false);
      };
    };
  });
  rtl.createClass(this,"TInterfaceSection",$lt24,function () {
    $lt25 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeInterfaceSection");
      return Result;
    };
  });
  rtl.createClass(this,"TImplementationSection",$lt24,function () {
    $lt26 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeImplementationSection");
      return Result;
    };
  });
  rtl.createClass(this,"TProgramSection",$lt26,function () {
    $lt27 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeProgramSection");
      return Result;
    };
  });
  rtl.createClass(this,"TLibrarySection",$lt26,function () {
    $lt28 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeLibrarySection");
      return Result;
    };
  });
  rtl.createClass(this,"TPasPackageSection",$lt25,function () {
    $lt29 = this;
    this.$init = function () {
      $lt25.$init.call(this);
      this.Requires = null;
    };
    this.$final = function () {
      this.Requires = undefined;
      $lt25.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt24.Create$1.call(this,AName,AParent);
      this.Requires = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Requires;
        }, set: function (v) {
          this.p.Requires = v;
        }});
      $lt24.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreePackageSection");
      return Result;
    };
  });
  rtl.createClass(this,"TPasModule",$lt7,function () {
    $lt30 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.InterfaceSection = null;
      this.ImplementationSection = null;
      this.InitializationSection = null;
      this.FinalizationSection = null;
      this.PackageName = "";
      this.Filename = "";
    };
    this.$final = function () {
      this.InterfaceSection = undefined;
      this.ImplementationSection = undefined;
      this.InitializationSection = undefined;
      this.FinalizationSection = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeModule");
      return Result;
    };
    this.GetDeclaration = function (full) {
      var Result = "";
      Result = "Unit " + this.SafeName();
      if (full) ;
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.InterfaceSection,false);
      this.ForEachChildCall(aMethodCall,Arg,this.ImplementationSection,false);
      this.ForEachChildCall(aMethodCall,Arg,this.InitializationSection,false);
      this.ForEachChildCall(aMethodCall,Arg,this.FinalizationSection,false);
    };
  });
  rtl.createClass(this,"TPasUnitModule",$lt30,function () {
    $lt31 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeUnit");
      return Result;
    };
  });
  rtl.createClass(this,"TPasProgram",$lt30,function () {
    $lt32 = this;
    this.$init = function () {
      $lt30.$init.call(this);
      this.ProgramSection = null;
      this.InputFile = "";
      this.OutPutFile = "";
    };
    this.$final = function () {
      this.ProgramSection = undefined;
      $lt30.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = $lt30.ElementTypeName.call(this);
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.ProgramSection,false);
      $lt30.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasLibrary",$lt30,function () {
    $lt33 = this;
    this.$init = function () {
      $lt30.$init.call(this);
      this.LibrarySection = null;
    };
    this.$final = function () {
      this.LibrarySection = undefined;
      $lt30.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = $lt30.ElementTypeName.call(this);
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.LibrarySection,false);
      $lt30.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasPackage",$lt7,function () {
    $lt34 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Modules = null;
    };
    this.$final = function () {
      this.Modules = undefined;
      $lt7.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      if ((AName.length > 0) && (AName.charAt(0) !== "#")) {
        $lt7.Create$1.call(this,"#" + AName,AParent)}
       else $lt7.Create$1.call(this,AName,AParent);
      this.Modules = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Modules;
        }, set: function (v) {
          this.p.Modules = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreePackage");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Modules.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Modules.Get(i)),true);
      };
    };
  });
  rtl.createClass(this,"TPasRequiredPackage",$lt7,function () {
    $lt35 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeRequiredPackage");
      return Result;
    };
  });
  rtl.createClass(this,"TPasDynamicPackage",$lt30,function () {
    $lt36 = this;
    this.$init = function () {
      $lt30.$init.call(this);
      this.PackageSection = null;
    };
    this.$final = function () {
      this.PackageSection = undefined;
      $lt30.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.PackageSection = $lt29.$create("Create$1",[AName,this]);
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.PackageSection;
        }, set: function (v) {
          this.p.PackageSection = v;
        }});
      $lt7.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasResString",$lt7,function () {
    $lt37 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Expr = null;
    };
    this.$final = function () {
      this.Expr = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeResString");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Expr,false);
    };
  });
  rtl.createClass(this,"TPasType",$lt7,function () {
    $lt38 = this;
    this.SafeName = function () {
      var Result = "";
      if ($lp3(this.FName,"TPasTreeString")) {
        Result = this.FName}
       else Result = $lt7.SafeName.call(this);
      return Result;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeType");
      return Result;
    };
  });
  rtl.createClass(this,"TPasAliasType",$lt38,function () {
    $lt39 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.DestType = null;
      this.SubType = null;
      this.Expr = null;
      this.CodepageExpr = null;
    };
    this.$final = function () {
      this.DestType = undefined;
      this.SubType = undefined;
      this.Expr = undefined;
      this.CodepageExpr = undefined;
      $lt38.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeAliasType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.DestType,true);
      this.ForEachChildCall(aMethodCall,Arg,this.Expr,false);
    };
  });
  rtl.createClass(this,"TPasPointerType",$lt38,function () {
    $lt40 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.DestType = null;
    };
    this.$final = function () {
      this.DestType = undefined;
      $lt38.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreePointerType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.DestType,true);
    };
  });
  rtl.createClass(this,"TPasTypeAliasType",$lt39,function () {
    $lt41 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeTypeAliasType");
      return Result;
    };
  });
  rtl.createClass(this,"TPasGenericTemplateType",$lt38,function () {
    $lt42 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.TypeConstraint = "";
      this.Constraints = [];
    };
    this.$final = function () {
      this.Constraints = undefined;
      $lt38.$final.call(this);
    };
    this.Destroy = function () {
      $lt7.Destroy.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = rtl.length(this.Constraints) - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,this.Constraints[i],false);
      };
    };
    this.AddConstraint = function (El) {
      var l = 0;
      l = rtl.length(this.Constraints);
      this.Constraints = rtl.arraySetLength(this.Constraints,null,l + 1);
      this.Constraints[l] = El;
    };
  });
  rtl.createClass(this,"TPasGenericType",$lt38,function () {
    $lt43 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.GenericTemplateTypes = null;
    };
    this.$final = function () {
      this.GenericTemplateTypes = undefined;
      $lt38.$final.call(this);
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.GenericTemplateTypes;
        }, set: function (v) {
          this.p.GenericTemplateTypes = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      if (this.GenericTemplateTypes !== null) for (var $l = 0, $end = this.GenericTemplateTypes.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.GenericTemplateTypes.Get(i)),false);
      };
    };
    this.SetGenericTemplates = function (AList) {
      var I = 0;
      var El = null;
      if (this.GenericTemplateTypes === null) this.GenericTemplateTypes = $lt132.$create("Create");
      for (var $l = 0, $end = AList.FCount - 1; $l <= $end; $l++) {
        I = $l;
        El = rtl.getObject(AList.Get(I));
        El.SetParent(this);
        this.GenericTemplateTypes.Add(El);
      };
      AList.Clear();
    };
  });
  rtl.createClass(this,"TPasSpecializeType",$lt39,function () {
    $lt44 = this;
    this.$init = function () {
      $lt39.$init.call(this);
      this.Params = null;
    };
    this.$final = function () {
      this.Params = undefined;
      $lt39.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Params = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Params;
        }, set: function (v) {
          this.p.Params = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeSpecializedType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt39.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Params.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Params.Get(i)),true);
      };
    };
  });
  rtl.createClass(this,"TInlineSpecializeExpr",$lt10,function () {
    $lt45 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.NameExpr = null;
      this.Params = null;
    };
    this.$final = function () {
      this.NameExpr = undefined;
      this.Params = undefined;
      $lt10.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      if (AName === "") ;
      $lt10.Create$2.call(this,AParent,15,0);
      this.Params = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Params;
        }, set: function (v) {
          this.p.Params = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeSpecializedExpr");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.NameExpr,false);
      for (var $l = 0, $end = this.Params.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Params.Get(i)),true);
      };
    };
  });
  rtl.createClass(this,"TPasClassOfType",$lt39,function () {
    $lt46 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeClassOfType");
      return Result;
    };
  });
  rtl.createClass(this,"TPasRangeType",$lt38,function () {
    $lt47 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.RangeExpr = null;
    };
    this.$final = function () {
      this.RangeExpr = undefined;
      $lt38.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeRangeType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.RangeExpr,false);
    };
  });
  rtl.createClass(this,"TPasArrayType",$lt43,function () {
    $lt48 = this;
    this.$init = function () {
      $lt43.$init.call(this);
      this.IndexRange = "";
      this.Ranges = [];
      this.PackMode = 0;
      this.ElType = null;
    };
    this.$final = function () {
      this.Ranges = undefined;
      this.ElType = undefined;
      $lt43.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeArrayType");
      return Result;
    };
    this.AddRange = function (Range) {
      var i = 0;
      i = rtl.length(this.Ranges);
      this.Ranges = rtl.arraySetLength(this.Ranges,null,i + 1);
      this.Ranges[i] = Range;
    };
  });
  rtl.createClass(this,"TPasFileType",$lt38,function () {
    $lt49 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.ElType = null;
    };
    this.$final = function () {
      this.ElType = undefined;
      $lt38.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeFileType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.ElType,true);
    };
  });
  rtl.createClass(this,"TPasEnumValue",$lt7,function () {
    $lt50 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Value = null;
    };
    this.$final = function () {
      this.Value = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeEnumValue");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Value,false);
    };
  });
  rtl.createClass(this,"TPasEnumType",$lt38,function () {
    $lt51 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.Values = null;
    };
    this.$final = function () {
      this.Values = undefined;
      $lt38.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Values = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Values;
        }, set: function (v) {
          this.p.Values = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeEnumType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Values.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Values.Get(i)),false);
      };
    };
  });
  rtl.createClass(this,"TPasSetType",$lt38,function () {
    $lt52 = this;
    this.$init = function () {
      $lt38.$init.call(this);
      this.EnumType = null;
      this.IsPacked = false;
    };
    this.$final = function () {
      this.EnumType = undefined;
      $lt38.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeSetType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.EnumType,true);
    };
  });
  rtl.createClass(this,"TPasVariant",$lt7,function () {
    $lt53 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Values = null;
      this.Members = null;
    };
    this.$final = function () {
      this.Values = undefined;
      this.Members = undefined;
      $lt7.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Values = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Values;
        }, set: function (v) {
          this.p.Values = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Values.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Values.Get(i)),false);
      };
      this.ForEachChildCall(aMethodCall,Arg,this.Members,false);
    };
  });
  rtl.createClass(this,"TPasMembersType",$lt43,function () {
    $lt54 = this;
    $lt55 = this.TRTTIVisibilitySection = {"0": "vcPrivate", vcPrivate: 0, "1": "vcProtected", vcProtected: 1, "2": "vcPublic", vcPublic: 2, "3": "vcPublished", vcPublished: 3};
    rtl.recNewT(this,"TRTTIVisibility",function () {
      $lt56 = this;
      this.Explicit = false;
      this.$new = function () {
        var r = Object.create(this);
        r.Fields = {};
        r.Methods = {};
        r.Properties = {};
        return r;
      };
      this.$eq = function (b) {
        return (this.Explicit === b.Explicit) && rtl.eqSet(this.Fields,b.Fields) && rtl.eqSet(this.Methods,b.Methods) && rtl.eqSet(this.Properties,b.Properties);
      };
      this.$assign = function (s) {
        this.Explicit = s.Explicit;
        this.Fields = rtl.refSet(s.Fields);
        this.Methods = rtl.refSet(s.Methods);
        this.Properties = rtl.refSet(s.Properties);
        return this;
      };
    });
    this.VisibilityToExtRTTI = [2,0,1,2,3,2,0,1,2,2];
    this.$init = function () {
      $lt43.$init.call(this);
      this.PackMode = 0;
      this.Members = null;
      this.RTTIVisibility = $lt56.$new();
    };
    this.$final = function () {
      this.Members = undefined;
      this.RTTIVisibility = undefined;
      $lt43.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.PackMode = 0;
      this.Members = $lt132.$create("Create");
      this.GenericTemplateTypes = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.GenericTemplateTypes;
        }, set: function (v) {
          this.p.GenericTemplateTypes = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Members;
        }, set: function (v) {
          this.p.Members = v;
        }});
      $lt43.Destroy.call(this);
    };
    this.IsPacked = function () {
      var Result = false;
      Result = this.PackMode !== 0;
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt43.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Members.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Members.Get(i)),false);
      };
    };
    this.HasExtRTTI = function (El) {
      var Result = false;
      var C = null;
      if (El.Visibility === 4) return true;
      C = El.$class.ClassType();
      if (C === $lt72) {
        if (this.VisibilityToExtRTTI[El.Visibility] in this.RTTIVisibility.Fields) return true;
      } else if (C === $lt75) {
        if (this.VisibilityToExtRTTI[El.Visibility] in this.RTTIVisibility.Properties) return true;
      } else if (C.InheritsFrom($lt82)) {
        if (this.VisibilityToExtRTTI[El.Visibility] in this.RTTIVisibility.Methods) return true;
      };
      Result = false;
      return Result;
    };
  });
  rtl.createClass(this,"TPasRecordType",$lt54,function () {
    $lt57 = this;
    this.$init = function () {
      $lt54.$init.call(this);
      this.VariantEl = null;
      this.Variants = null;
    };
    this.$final = function () {
      this.VariantEl = undefined;
      this.Variants = undefined;
      $lt54.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt54.Create$1.call(this,AName,AParent);
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Variants;
        }, set: function (v) {
          this.p.Variants = v;
        }});
      $lt54.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeRecordType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt54.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.VariantEl,true);
      if (this.Variants !== null) for (var $l = 0, $end = this.Variants.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Variants.Get(i)),false);
      };
    };
  });
  $lt58 = this.TPasObjKind = {"0": "okObject", okObject: 0, "1": "okClass", okClass: 1, "2": "okInterface", okInterface: 2, "3": "okClassHelper", okClassHelper: 3, "4": "okRecordHelper", okRecordHelper: 4, "5": "okTypeHelper", okTypeHelper: 5, "6": "okDispInterface", okDispInterface: 6, "7": "okObjcClass", okObjcClass: 7, "8": "okObjcCategory", okObjcCategory: 8, "9": "okObjcProtocol", okObjcProtocol: 9};
  this.okWithFields = rtl.createSet(0,1,7,8);
  this.okAllHelpers = rtl.createSet(3,4,5);
  this.okWithClassFields = rtl.unionSet(this.okWithFields,this.okAllHelpers);
  $lt59 = this.TPasClassInterfaceType = {"0": "citCom", citCom: 0, "1": "citCorba", citCorba: 1};
  rtl.createClass(this,"TPasClassType",$lt54,function () {
    $lt60 = this;
    this.$init = function () {
      $lt54.$init.call(this);
      this.ObjKind = 0;
      this.AncestorType = null;
      this.HelperForType = null;
      this.IsForward = false;
      this.IsExternal = false;
      this.IsShortDefinition = false;
      this.GUIDExpr = null;
      this.Modifiers = null;
      this.Interfaces = null;
      this.ExternalNameSpace = "";
      this.ExternalName = "";
      this.InterfaceType = 0;
    };
    this.$final = function () {
      this.AncestorType = undefined;
      this.HelperForType = undefined;
      this.GUIDExpr = undefined;
      this.Modifiers = undefined;
      this.Interfaces = undefined;
      $lt54.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt54.Create$1.call(this,AName,AParent);
      this.IsShortDefinition = false;
      this.Modifiers = $lt133.$create("Create$1");
      this.Interfaces = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Interfaces;
        }, set: function (v) {
          this.p.Interfaces = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.Modifiers;
        }, set: function (v) {
          this.p.Modifiers = v;
        }});
      $lt54.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      var $tmp = this.ObjKind;
      if ($tmp === 0) {
        Result = rtl.getResStr($mod,"SPasTreeObjectType")}
       else if ($tmp === 1) {
        Result = rtl.getResStr($mod,"SPasTreeClassType")}
       else if ($tmp === 2) {
        Result = rtl.getResStr($mod,"SPasTreeInterfaceType")}
       else if ($tmp === 3) {
        Result = rtl.getResStr($mod,"SPasClassHelperType")}
       else if ($tmp === 4) {
        Result = rtl.getResStr($mod,"SPasRecordHelperType")}
       else if ($tmp === 5) {
        Result = rtl.getResStr($mod,"SPasTypeHelperType")}
       else {
        Result = "ObjKind(" + $lp4(this.ObjKind) + ")";
      };
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt54.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.AncestorType,true);
      for (var $l = 0, $end = this.Interfaces.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Interfaces.Get(i)),true);
      };
      this.ForEachChildCall(aMethodCall,Arg,this.HelperForType,true);
      this.ForEachChildCall(aMethodCall,Arg,this.GUIDExpr,false);
    };
    this.FindMember = function (MemberClass, MemberName) {
      var Result = null;
      var I = 0;
      Result = null;
      I = 0;
      while ((Result === null) && (I < this.Members.FCount)) {
        Result = rtl.getObject(this.Members.Get(I));
        if ((Result.$class.ClassType() !== MemberClass) || ($lp5(Result.FName,MemberName) !== 0)) Result = null;
        I += 1;
      };
      return Result;
    };
    this.IsAbstract = function () {
      var Result = false;
      Result = this.HasModifier("abstract");
      return Result;
    };
    this.HasModifier = function (aModifier) {
      var Result = false;
      var i = 0;
      for (var $l = 0, $end = this.Modifiers.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        if ($lp5(aModifier,this.Modifiers.Get(i)) === 0) return true;
      };
      Result = false;
      return Result;
    };
  });
  $lt61 = this.TArgumentAccess = {"0": "argDefault", argDefault: 0, "1": "argConst", argConst: 1, "2": "argVar", argVar: 2, "3": "argOut", argOut: 3, "4": "argConstRef", argConstRef: 4};
  rtl.createClass(this,"TPasAttributes",$lt7,function () {
    $lt62 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Calls = [];
    };
    this.$final = function () {
      this.Calls = undefined;
      $lt7.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = rtl.length(this.Calls) - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,this.Calls[i],false);
      };
    };
    this.AddCall = function (Expr) {
      var i = 0;
      i = rtl.length(this.Calls);
      this.Calls = rtl.arraySetLength(this.Calls,null,i + 1);
      this.Calls[i] = Expr;
    };
  });
  rtl.createClass(this,"TPasArgument",$lt7,function () {
    $lt63 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Access = 0;
      this.Attributes = null;
      this.ArgType = null;
      this.ValueExpr = null;
    };
    this.$final = function () {
      this.Attributes = undefined;
      this.ArgType = undefined;
      this.ValueExpr = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeArgument");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.Attributes,true);
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.ArgType,true);
      this.ForEachChildCall(aMethodCall,Arg,this.ValueExpr,true);
    };
  });
  rtl.createClass(this,"TPasProcedureType",$lt43,function () {
    $lt64 = this;
    this.$init = function () {
      $lt43.$init.call(this);
      this.Args = null;
      this.CallingConvention = 0;
      this.Modifiers = {};
      this.VarArgsType = null;
    };
    this.$final = function () {
      this.Args = undefined;
      this.Modifiers = undefined;
      this.VarArgsType = undefined;
      $lt43.$final.call(this);
    };
    this.GetIsAsync = function () {
      var Result = false;
      Result = 5 in this.Modifiers;
      return Result;
    };
    this.GetIsNested = function () {
      var Result = false;
      Result = 1 in this.Modifiers;
      return Result;
    };
    this.GetIsOfObject = function () {
      var Result = false;
      Result = 0 in this.Modifiers;
      return Result;
    };
    this.GetIsReference = function () {
      var Result = false;
      Result = 4 in this.Modifiers;
      return Result;
    };
    this.SetIsNested = function (AValue) {
      if (AValue) {
        this.Modifiers = rtl.includeSet(this.Modifiers,1)}
       else this.Modifiers = rtl.excludeSet(this.Modifiers,1);
    };
    this.SetIsOfObject = function (AValue) {
      if (AValue) {
        this.Modifiers = rtl.includeSet(this.Modifiers,0)}
       else this.Modifiers = rtl.excludeSet(this.Modifiers,0);
    };
    this.SetIsReference = function (AValue) {
      if (AValue) {
        this.Modifiers = rtl.includeSet(this.Modifiers,4)}
       else this.Modifiers = rtl.excludeSet(this.Modifiers,4);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Args = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Args;
        }, set: function (v) {
          this.p.Args = v;
        }});
      $lt43.Destroy.call(this);
    };
    this.TypeName = function () {
      var Result = "";
      Result = "procedure";
      return Result;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeProcedureType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt43.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Args.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Args.Get(i)),false);
      };
      this.ForEachChildCall(aMethodCall,Arg,this.VarArgsType,false);
    };
  });
  rtl.createClass(this,"TPasResultElement",$lt7,function () {
    $lt65 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.ResultType = null;
    };
    this.$final = function () {
      this.ResultType = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeResultElement");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.ResultType,true);
    };
  });
  rtl.createClass(this,"TPasFunctionType",$lt64,function () {
    $lt66 = this;
    this.$init = function () {
      $lt64.$init.call(this);
      this.ResultEl = null;
    };
    this.$final = function () {
      this.ResultEl = undefined;
      $lt64.$final.call(this);
    };
    this.TypeName = function () {
      var Result = "";
      Result = "function";
      return Result;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeFunctionType");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt64.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.ResultEl,false);
    };
  });
  rtl.createClass(this,"TPasUnresolvedSymbolRef",$lt38,function () {
    $lt67 = this;
  });
  rtl.createClass(this,"TPasUnresolvedTypeRef",$lt67,function () {
    $lt68 = this;
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,null);
      if (AParent === null) ;
      return this;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeUnresolvedTypeRef");
      return Result;
    };
  });
  rtl.createClass(this,"TPasUnresolvedUnitRef",$lt67,function () {
    $lt69 = this;
    this.$init = function () {
      $lt67.$init.call(this);
      this.FileName = "";
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeUnit");
      return Result;
    };
  });
  rtl.createClass(this,"TPasStringType",$lt68,function () {
    $lt70 = this;
    this.$init = function () {
      $lt68.$init.call(this);
      this.LengthExpr = "";
      this.CodePageExpr = "";
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasStringType");
      return Result;
    };
  });
  $lt71 = this.TVariableModifier = {"0": "vmCVar", vmCVar: 0, "1": "vmExternal", vmExternal: 1, "2": "vmPublic", vmPublic: 2, "3": "vmExport", vmExport: 3, "4": "vmClass", vmClass: 4, "5": "vmStatic", vmStatic: 5, "6": "vmfar", vmfar: 6};
  rtl.createClass(this,"TPasVariable",$lt7,function () {
    $lt72 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.VarType = null;
      this.VarModifiers = {};
      this.LibraryName = null;
      this.ExportName = null;
      this.Modifiers = "";
      this.AbsoluteLocation = "";
      this.AbsoluteExpr = null;
      this.Expr = null;
    };
    this.$final = function () {
      this.VarType = undefined;
      this.VarModifiers = undefined;
      this.LibraryName = undefined;
      this.ExportName = undefined;
      this.AbsoluteExpr = undefined;
      this.Expr = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeVariable");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.VarType,true);
      this.ForEachChildCall(aMethodCall,Arg,this.Expr,false);
      this.ForEachChildCall(aMethodCall,Arg,this.LibraryName,false);
      this.ForEachChildCall(aMethodCall,Arg,this.ExportName,false);
      this.ForEachChildCall(aMethodCall,Arg,this.AbsoluteExpr,false);
    };
  });
  rtl.createClass(this,"TPasExportSymbol",$lt7,function () {
    $lt73 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.NameExpr = null;
      this.ExportName = null;
      this.ExportIndex = null;
    };
    this.$final = function () {
      this.NameExpr = undefined;
      this.ExportName = undefined;
      this.ExportIndex = undefined;
      $lt7.$final.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = "Export";
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.NameExpr,false);
      this.ForEachChildCall(aMethodCall,Arg,this.ExportName,false);
      this.ForEachChildCall(aMethodCall,Arg,this.ExportIndex,false);
    };
  });
  rtl.createClass(this,"TPasConst",$lt72,function () {
    $lt74 = this;
    this.$init = function () {
      $lt72.$init.call(this);
      this.IsConst = false;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeConst");
      return Result;
    };
  });
  rtl.createClass(this,"TPasProperty",$lt72,function () {
    $lt75 = this;
    this.$init = function () {
      $lt72.$init.call(this);
      this.FArgs = null;
      this.IndexExpr = null;
      this.ReadAccessor = null;
      this.WriteAccessor = null;
      this.DispIDExpr = null;
      this.Implements = [];
      this.StoredAccessor = null;
      this.DefaultExpr = null;
      this.ReadAccessorName = "";
      this.WriteAccessorName = "";
      this.ImplementsName = "";
      this.StoredAccessorName = "";
      this.DispIDReadOnly = false;
      this.IsDefault = false;
      this.IsNodefault = false;
    };
    this.$final = function () {
      this.FArgs = undefined;
      this.IndexExpr = undefined;
      this.ReadAccessor = undefined;
      this.WriteAccessor = undefined;
      this.DispIDExpr = undefined;
      this.Implements = undefined;
      this.StoredAccessor = undefined;
      this.DefaultExpr = undefined;
      $lt72.$final.call(this);
    };
    this.GetIsClass = function () {
      var Result = false;
      Result = 4 in this.VarModifiers;
      return Result;
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.FArgs = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.FArgs;
        }, set: function (v) {
          this.p.FArgs = v;
        }});
      this.Implements = rtl.arraySetLength(this.Implements,null,0);
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeProperty");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt72.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.IndexExpr,false);
      for (var $l = 0, $end = this.FArgs.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.FArgs.Get(i)),false);
      };
      this.ForEachChildCall(aMethodCall,Arg,this.ReadAccessor,false);
      this.ForEachChildCall(aMethodCall,Arg,this.WriteAccessor,false);
      for (var $l1 = 0, $end1 = rtl.length(this.Implements) - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        this.ForEachChildCall(aMethodCall,Arg,this.Implements[i],false);
      };
      this.ForEachChildCall(aMethodCall,Arg,this.StoredAccessor,false);
      this.ForEachChildCall(aMethodCall,Arg,this.DefaultExpr,false);
    };
  });
  $lt76 = this.TProcType = {"0": "ptProcedure", ptProcedure: 0, "1": "ptFunction", ptFunction: 1, "2": "ptOperator", ptOperator: 2, "3": "ptClassOperator", ptClassOperator: 3, "4": "ptConstructor", ptConstructor: 4, "5": "ptDestructor", ptDestructor: 5, "6": "ptClassProcedure", ptClassProcedure: 6, "7": "ptClassFunction", ptClassFunction: 7, "8": "ptClassConstructor", ptClassConstructor: 8, "9": "ptClassDestructor", ptClassDestructor: 9, "10": "ptAnonymousProcedure", ptAnonymousProcedure: 10, "11": "ptAnonymousFunction", ptAnonymousFunction: 11};
  rtl.createClass(this,"TPasProcedureBase",$lt7,function () {
    $lt77 = this;
  });
  rtl.createClass(this,"TPasOverloadedProc",$lt77,function () {
    $lt78 = this;
    this.$init = function () {
      $lt77.$init.call(this);
      this.Overloads = null;
    };
    this.$final = function () {
      this.Overloads = undefined;
      $lt77.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Overloads = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Overloads;
        }, set: function (v) {
          this.p.Overloads = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeOverloadedProcedure");
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Overloads.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Overloads.Get(i)),false);
      };
    };
  });
  $lt79 = this.TProcedureModifier = {"0": "pmVirtual", pmVirtual: 0, "1": "pmDynamic", pmDynamic: 1, "2": "pmAbstract", pmAbstract: 2, "3": "pmOverride", pmOverride: 3, "4": "pmExport", pmExport: 4, "5": "pmOverload", pmOverload: 5, "6": "pmMessage", pmMessage: 6, "7": "pmReintroduce", pmReintroduce: 7, "8": "pmInline", pmInline: 8, "9": "pmAssembler", pmAssembler: 9, "10": "pmPublic", pmPublic: 10, "11": "pmCompilerProc", pmCompilerProc: 11, "12": "pmExternal", pmExternal: 12, "13": "pmForward", pmForward: 13, "14": "pmDispId", pmDispId: 14, "15": "pmNoReturn", pmNoReturn: 15, "16": "pmFar", pmFar: 16, "17": "pmFinal", pmFinal: 17, "18": "pmDiscardResult", pmDiscardResult: 18, "19": "pmNoStackFrame", pmNoStackFrame: 19, "20": "pmsection", pmsection: 20, "21": "pmRtlProc", pmRtlProc: 21, "22": "pmInternProc", pmInternProc: 22, "23": "pmWeakExternal", pmWeakExternal: 23};
  $lt80 = this.TProcedureMessageType = {"0": "pmtNone", pmtNone: 0, "1": "pmtInteger", pmtInteger: 1, "2": "pmtString", pmtString: 2};
  rtl.createClass(this,"TProcedureNamePart",$lt131,function () {
    $lt81 = this;
    this.$init = function () {
      $lt131.$init.call(this);
      this.Name = "";
      this.Templates = null;
    };
    this.$final = function () {
      this.Templates = undefined;
      $lt131.$final.call(this);
    };
  });
  rtl.createClass(this,"TPasProcedure",$lt77,function () {
    $lt82 = this;
    this.$init = function () {
      $lt77.$init.call(this);
      this.FModifiers = {};
      this.FMessageName = "";
      this.FMessageType = 0;
      this.PublicName = null;
      this.LibrarySymbolIndex = null;
      this.LibrarySymbolName = null;
      this.LibraryExpr = null;
      this.DispIDExpr = null;
      this.MessageExpr = null;
      this.CompProcID = "";
      this.AliasName = "";
      this.ProcType = null;
      this.Body = null;
      this.NameParts = null;
    };
    this.$final = function () {
      this.FModifiers = undefined;
      this.PublicName = undefined;
      this.LibrarySymbolIndex = undefined;
      this.LibrarySymbolName = undefined;
      this.LibraryExpr = undefined;
      this.DispIDExpr = undefined;
      this.MessageExpr = undefined;
      this.ProcType = undefined;
      this.Body = undefined;
      this.NameParts = undefined;
      $lt77.$final.call(this);
    };
    this.GetCallingConvention = function () {
      var Result = 0;
      Result = 0;
      if (this.ProcType != null) Result = this.ProcType.CallingConvention;
      return Result;
    };
    this.Destroy = function () {
      $mod.FreeProcNameParts({p: this, get: function () {
          return this.p.NameParts;
        }, set: function (v) {
          this.p.NameParts = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeProcedure");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "procedure";
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      var j = 0;
      var Templates = null;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      if (this.NameParts !== null) for (var $l = 0, $end = this.NameParts.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Templates = rtl.getObject(this.NameParts.Get(i)).Templates;
        if (Templates !== null) for (var $l1 = 0, $end1 = Templates.FCount - 1; $l1 <= $end1; $l1++) {
          j = $l1;
          this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(Templates.Get(j)),false);
        };
      };
      this.ForEachChildCall(aMethodCall,Arg,this.ProcType,false);
      this.ForEachChildCall(aMethodCall,Arg,this.PublicName,false);
      this.ForEachChildCall(aMethodCall,Arg,this.LibraryExpr,false);
      this.ForEachChildCall(aMethodCall,Arg,this.LibrarySymbolName,false);
      this.ForEachChildCall(aMethodCall,Arg,this.MessageExpr,false);
      this.ForEachChildCall(aMethodCall,Arg,this.Body,false);
    };
    this.AddModifier = function (AModifier) {
      this.FModifiers = rtl.includeSet(this.FModifiers,AModifier);
    };
    this.CanParseImplementation = function () {
      var Result = false;
      Result = !this.HasNoImplementation() && ($lt26.isPrototypeOf(this.FParent) || $lt97.isPrototypeOf(this.FParent));
      return Result;
    };
    this.HasNoImplementation = function () {
      var Result = false;
      Result = this.IsExternal() || this.IsForward() || this.IsInternProc();
      return Result;
    };
    this.IsVirtual = function () {
      var Result = false;
      Result = 0 in this.FModifiers;
      return Result;
    };
    this.IsDynamic = function () {
      var Result = false;
      Result = 1 in this.FModifiers;
      return Result;
    };
    this.IsAbstract = function () {
      var Result = false;
      Result = 2 in this.FModifiers;
      return Result;
    };
    this.IsOverride = function () {
      var Result = false;
      Result = 3 in this.FModifiers;
      return Result;
    };
    this.IsExported = function () {
      var Result = false;
      Result = 4 in this.FModifiers;
      return Result;
    };
    this.IsExternal = function () {
      var Result = false;
      Result = 12 in this.FModifiers;
      return Result;
    };
    this.IsOverload = function () {
      var Result = false;
      Result = 5 in this.FModifiers;
      return Result;
    };
    this.IsMessage = function () {
      var Result = false;
      Result = 6 in this.FModifiers;
      return Result;
    };
    this.IsReintroduced = function () {
      var Result = false;
      Result = 7 in this.FModifiers;
      return Result;
    };
    this.IsStatic = function () {
      var Result = false;
      Result = 2 in this.ProcType.Modifiers;
      return Result;
    };
    this.IsForward = function () {
      var Result = false;
      Result = 13 in this.FModifiers;
      return Result;
    };
    this.IsInternProc = function () {
      var Result = false;
      Result = 22 in this.FModifiers;
      return Result;
    };
    this.IsAssembler = function () {
      var Result = false;
      Result = 9 in this.FModifiers;
      return Result;
    };
    this.IsAsync = function () {
      var Result = false;
      Result = this.ProcType.GetIsAsync();
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.SetNameParts = function (Parts) {
      var i = 0;
      var j = 0;
      var El = null;
      if (this.NameParts !== null) $mod.FreeProcNameParts({p: this, get: function () {
          return this.p.NameParts;
        }, set: function (v) {
          this.p.NameParts = v;
        }});
      this.NameParts = $lt132.$create("Create");
      this.NameParts.Assign(Parts,0,null);
      Parts.Clear();
      for (var $l = 0, $end = this.NameParts.FCount - 1; $l <= $end; $l++) {
        i = $l;
        var $with = rtl.getObject(this.NameParts.Get(i));
        if ($with.Templates !== null) for (var $l1 = 0, $end1 = $with.Templates.FCount - 1; $l1 <= $end1; $l1++) {
          j = $l1;
          El = rtl.getObject($with.Templates.Get(j));
          El.SetParent(this);
        };
      };
    };
  });
  rtl.createClass(this,"TPasFunction",$lt82,function () {
    $lt83 = this;
    this.GetFT = function () {
      var Result = null;
      Result = rtl.as(this.ProcType,$lt66);
      return Result;
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeFunction");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "function";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 1;
      return Result;
    };
  });
  $lt84 = this.TOperatorType = {"0": "otUnknown", otUnknown: 0, "1": "otImplicit", otImplicit: 1, "2": "otExplicit", otExplicit: 2, "3": "otMul", otMul: 3, "4": "otPlus", otPlus: 4, "5": "otMinus", otMinus: 5, "6": "otDivision", otDivision: 6, "7": "otLessThan", otLessThan: 7, "8": "otEqual", otEqual: 8, "9": "otGreaterThan", otGreaterThan: 9, "10": "otAssign", otAssign: 10, "11": "otNotEqual", otNotEqual: 11, "12": "otLessEqualThan", otLessEqualThan: 12, "13": "otGreaterEqualThan", otGreaterEqualThan: 13, "14": "otPower", otPower: 14, "15": "otSymmetricalDifference", otSymmetricalDifference: 15, "16": "otInc", otInc: 16, "17": "otDec", otDec: 17, "18": "otMod", otMod: 18, "19": "otNegative", otNegative: 19, "20": "otPositive", otPositive: 20, "21": "otBitWiseOr", otBitWiseOr: 21, "22": "otDiv", otDiv: 22, "23": "otLeftShift", otLeftShift: 23, "24": "otLogicalOr", otLogicalOr: 24, "25": "otBitwiseAnd", otBitwiseAnd: 25, "26": "otbitwiseXor", otbitwiseXor: 26, "27": "otLogicalAnd", otLogicalAnd: 27, "28": "otLogicalNot", otLogicalNot: 28, "29": "otLogicalXor", otLogicalXor: 29, "30": "otRightShift", otRightShift: 30, "31": "otEnumerator", otEnumerator: 31, "32": "otIn", otIn: 32, "33": "otInitialize", otInitialize: 33, "34": "otFinalize", otFinalize: 34, "35": "otAddRef", otAddRef: 35, "36": "otCopy", otCopy: 36};
  rtl.createClass(this,"TPasOperator",$lt83,function () {
    $lt85 = this;
    this.$init = function () {
      $lt83.$init.call(this);
      this.FOperatorType = 0;
      this.FTokenBased = false;
    };
    this.NameSuffix = function () {
      var Result = "";
      var I = 0;
      Result = "(";
      if ((this.ProcType != null) && (this.ProcType.Args != null)) for (var $l = 0, $end = this.ProcType.Args.FCount - 1; $l <= $end; $l++) {
        I = $l;
        if (I > 0) Result = Result + ",";
        Result = Result + rtl.getObject(this.ProcType.Args.Get(I)).ArgType.FName;
      };
      Result = Result + ")";
      if ((this.ProcType != null) && (this.ProcType.ResultEl != null) && (this.ProcType.ResultEl.ResultType != null)) Result = Result + ":" + this.ProcType.ResultEl.ResultType.FName;
      return Result;
    };
    this.TokenToOperatorType = function (S) {
      var Result = 0;
      Result = $lt84.otCopy;
      while ((Result > 0) && ($lp5(S,$mod.OperatorTokens[Result]) !== 0)) Result = Result - 1;
      return Result;
    };
    this.NameToOperatorType = function (S) {
      var Result = 0;
      Result = $lt84.otCopy;
      while ((Result > 0) && ($lp5(S,$mod.OperatorNames[Result]) !== 0)) Result = Result - 1;
      return Result;
    };
    this.CorrectName = function () {
      this.FName = $mod.OperatorNames[this.FOperatorType] + this.NameSuffix();
    };
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeOperator");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "operator";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 2;
      return Result;
    };
  });
  rtl.createClass(this,"TPasClassOperator",$lt85,function () {
    $lt86 = this;
    this.TypeName = function () {
      var Result = "";
      Result = "class operator";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 3;
      return Result;
    };
  });
  rtl.createClass(this,"TPasConstructor",$lt82,function () {
    $lt87 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeConstructor");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "constructor";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 4;
      return Result;
    };
  });
  rtl.createClass(this,"TPasClassConstructor",$lt87,function () {
    $lt88 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeClassConstructor");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "class " + $lt87.TypeName.call(this);
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 8;
      return Result;
    };
  });
  rtl.createClass(this,"TPasDestructor",$lt82,function () {
    $lt89 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeDestructor");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "destructor";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 5;
      return Result;
    };
  });
  rtl.createClass(this,"TPasClassDestructor",$lt89,function () {
    $lt90 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeClassDestructor");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "destructor";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 9;
      return Result;
    };
  });
  rtl.createClass(this,"TPasClassProcedure",$lt82,function () {
    $lt91 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeClassProcedure");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "class procedure";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 6;
      return Result;
    };
  });
  rtl.createClass(this,"TPasClassFunction",$lt83,function () {
    $lt92 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeClassFunction");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "class function";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 7;
      return Result;
    };
  });
  rtl.createClass(this,"TPasAnonymousProcedure",$lt82,function () {
    $lt93 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeAnonymousProcedure");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "anonymous procedure";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 10;
      return Result;
    };
  });
  rtl.createClass(this,"TPasAnonymousFunction",$lt93,function () {
    $lt94 = this;
    this.ElementTypeName = function () {
      var Result = "";
      Result = rtl.getResStr($mod,"SPasTreeAnonymousFunction");
      return Result;
    };
    this.TypeName = function () {
      var Result = "";
      Result = "anonymous function";
      return Result;
    };
    this.GetProcTypeEnum = function () {
      var Result = 0;
      Result = 11;
      return Result;
    };
  });
  rtl.createClass(this,"TProcedureExpr",$lt10,function () {
    $lt95 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.Proc = null;
    };
    this.$final = function () {
      this.Proc = undefined;
      $lt10.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Proc,false);
    };
  });
  rtl.createClass(this,"TPasMethodResolution",$lt7,function () {
    $lt96 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.ProcClass = null;
      this.InterfaceName = null;
      this.InterfaceProc = null;
      this.ImplementationProc = null;
    };
    this.$final = function () {
      this.ProcClass = undefined;
      this.InterfaceName = undefined;
      this.InterfaceProc = undefined;
      this.ImplementationProc = undefined;
      $lt7.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.InterfaceName,false);
      this.ForEachChildCall(aMethodCall,Arg,this.InterfaceProc,false);
      this.ForEachChildCall(aMethodCall,Arg,this.ImplementationProc,false);
    };
  });
  rtl.createClass(this,"TProcedureBody",$lt22,function () {
    $lt97 = this;
    this.$init = function () {
      $lt22.$init.call(this);
      this.Body = null;
    };
    this.$final = function () {
      this.Body = undefined;
      $lt22.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt22.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Body,false);
    };
  });
  rtl.createClass(this,"TPasImplElement",$lt7,function () {
    $lt98 = this;
  });
  rtl.createClass(this,"TPasImplCommandBase",$lt98,function () {
    $lt99 = this;
    this.$init = function () {
      $lt98.$init.call(this);
      this.SemicolonAtEOL = false;
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.SemicolonAtEOL = true;
      return this;
    };
  });
  rtl.createClass(this,"TPasImplCommand",$lt99,function () {
    $lt100 = this;
    this.$init = function () {
      $lt99.$init.call(this);
      this.Command = "";
    };
  });
  rtl.createClass(this,"TPasLabels",$lt98,function () {
    $lt101 = this;
    this.$init = function () {
      $lt98.$init.call(this);
      this.Labels = null;
    };
    this.$final = function () {
      this.Labels = undefined;
      $lt98.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Labels = $lt133.$create("Create$1");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Labels;
        }, set: function (v) {
          this.p.Labels = v;
        }});
      $lt7.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasImplBlock",$lt98,function () {
    $lt102 = this;
    this.$init = function () {
      $lt98.$init.call(this);
      this.Elements = null;
    };
    this.$final = function () {
      this.Elements = undefined;
      $lt98.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt7.Create$1.call(this,AName,AParent);
      this.Elements = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Elements;
        }, set: function (v) {
          this.p.Elements = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.AddElement = function (Element) {
      this.Elements.Add(Element);
    };
    this.CloseOnSemicolon = function () {
      var Result = false;
      Result = false;
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      $lt7.ForEachCall.call(this,aMethodCall,Arg);
      for (var $l = 0, $end = this.Elements.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Elements.Get(i)),false);
      };
    };
  });
  rtl.createClass(this,"TPasImplStatement",$lt102,function () {
    $lt103 = this;
    this.CloseOnSemicolon = function () {
      var Result = false;
      Result = true;
      return Result;
    };
  });
  rtl.createClass(this,"TPasImplBeginBlock",$lt102,function () {
    $lt104 = this;
  });
  rtl.createClass(this,"TInitializationSection",$lt102,function () {
    $lt105 = this;
  });
  rtl.createClass(this,"TFinalizationSection",$lt102,function () {
    $lt106 = this;
  });
  rtl.createClass(this,"TPasImplAsmStatement",$lt103,function () {
    $lt107 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.FModifierTokens = null;
      this.FTokens = null;
    };
    this.$final = function () {
      this.FModifierTokens = undefined;
      this.FTokens = undefined;
      $lt103.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt102.Create$1.call(this,AName,AParent);
      this.FTokens = $lt133.$create("Create$1");
      this.FModifierTokens = $lt133.$create("Create$1");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.FTokens;
        }, set: function (v) {
          this.p.FTokens = v;
        }});
      $lp2({p: this, get: function () {
          return this.p.FModifierTokens;
        }, set: function (v) {
          this.p.FModifierTokens = v;
        }});
      $lt102.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasImplRepeatUntil",$lt102,function () {
    $lt108 = this;
    this.$init = function () {
      $lt102.$init.call(this);
      this.ConditionExpr = null;
    };
    this.$final = function () {
      this.ConditionExpr = undefined;
      $lt102.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.ConditionExpr,false);
    };
  });
  rtl.createClass(this,"TPasImplIfElse",$lt102,function () {
    $lt109 = this;
    this.$init = function () {
      $lt102.$init.call(this);
      this.ConditionExpr = null;
      this.IfBranch = null;
      this.ElseBranch = null;
    };
    this.$final = function () {
      this.ConditionExpr = undefined;
      this.IfBranch = undefined;
      this.ElseBranch = undefined;
      $lt102.$final.call(this);
    };
    this.AddElement = function (Element) {
      $lt102.AddElement.call(this,Element);
      if (this.IfBranch === null) {
        this.IfBranch = Element;
      } else if (this.ElseBranch === null) {
        this.ElseBranch = Element;
      } else throw $lt.$create("Create$1",["TPasImplIfElse.AddElement if and else already set - please report this bug"]);
    };
    this.CloseOnSemicolon = function () {
      var Result = false;
      Result = this.ElseBranch !== null;
      return Result;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.ConditionExpr,false);
      if (this.Elements.IndexOf(this.IfBranch) < 0) this.ForEachChildCall(aMethodCall,Arg,this.IfBranch,false);
      if (this.Elements.IndexOf(this.ElseBranch) < 0) this.ForEachChildCall(aMethodCall,Arg,this.ElseBranch,false);
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasImplWhileDo",$lt103,function () {
    $lt110 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.ConditionExpr = null;
      this.Body = null;
    };
    this.$final = function () {
      this.ConditionExpr = undefined;
      this.Body = undefined;
      $lt103.$final.call(this);
    };
    this.AddElement = function (Element) {
      $lt102.AddElement.call(this,Element);
      if (this.Body === null) {
        this.Body = Element;
      } else throw $lt.$create("Create$1",["TPasImplWhileDo.AddElement body already set"]);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.ConditionExpr,false);
      if (this.Elements.IndexOf(this.Body) < 0) this.ForEachChildCall(aMethodCall,Arg,this.Body,false);
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasImplWithDo",$lt103,function () {
    $lt111 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.Expressions = null;
      this.Body = null;
    };
    this.$final = function () {
      this.Expressions = undefined;
      this.Body = undefined;
      $lt103.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt102.Create$1.call(this,AName,AParent);
      this.Expressions = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Expressions;
        }, set: function (v) {
          this.p.Expressions = v;
        }});
      $lt102.Destroy.call(this);
    };
    this.AddElement = function (Element) {
      $lt102.AddElement.call(this,Element);
      if (this.Body === null) {
        this.Body = Element;
      } else throw $lt.$create("Create$1",["TPasImplWithDo.AddElement body already set"]);
    };
    this.AddExpression = function (Expression) {
      this.Expressions.Add(Expression);
      if (Expression.FParent === null) Expression.SetParent(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      for (var $l = 0, $end = this.Expressions.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Expressions.Get(i)),false);
      };
      if (this.Elements.IndexOf(this.Body) < 0) this.ForEachChildCall(aMethodCall,Arg,this.Body,false);
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasInlineVarDeclStatement",$lt103,function () {
    $lt112 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.Declarations = null;
    };
    this.$final = function () {
      this.Declarations = undefined;
      $lt103.$final.call(this);
    };
    this.Create$1 = function (aName, aParent) {
      $lt102.Create$1.call(this,aName,aParent);
      this.Declarations = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lt102.Destroy.call(this);
      $lp2({p: this, get: function () {
          return this.p.Declarations;
        }, set: function (v) {
          this.p.Declarations = v;
        }});
    };
  });
  rtl.createClass(this,"TPasImplCaseOf",$lt102,function () {
    $lt113 = this;
    this.$init = function () {
      $lt102.$init.call(this);
      this.CaseExpr = null;
      this.ElseBranch = null;
    };
    this.$final = function () {
      this.CaseExpr = undefined;
      this.ElseBranch = undefined;
      $lt102.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.CaseExpr,false);
      if (this.Elements.IndexOf(this.ElseBranch) < 0) this.ForEachChildCall(aMethodCall,Arg,this.ElseBranch,false);
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasImplCaseStatement",$lt103,function () {
    $lt114 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.Expressions = null;
      this.Body = null;
    };
    this.$final = function () {
      this.Expressions = undefined;
      this.Body = undefined;
      $lt103.$final.call(this);
    };
    this.Create$1 = function (AName, AParent) {
      $lt102.Create$1.call(this,AName,AParent);
      this.Expressions = $lt132.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp2({p: this, get: function () {
          return this.p.Expressions;
        }, set: function (v) {
          this.p.Expressions = v;
        }});
      $lt102.Destroy.call(this);
    };
    this.AddElement = function (Element) {
      $lt102.AddElement.call(this,Element);
      if (this.Body === null) {
        this.Body = Element;
      } else throw $lt.$create("Create$1",["TPasImplCaseStatement.AddElement body already set"]);
    };
    this.AddExpression = function (Expr) {
      this.Expressions.Add(Expr);
      Expr.SetParent(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      var i = 0;
      for (var $l = 0, $end = this.Expressions.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ForEachChildCall(aMethodCall,Arg,rtl.getObject(this.Expressions.Get(i)),false);
      };
      if (this.Elements.IndexOf(this.Body) < 0) this.ForEachChildCall(aMethodCall,Arg,this.Body,false);
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasImplCaseElse",$lt102,function () {
    $lt115 = this;
  });
  $lt116 = this.TLoopType = {"0": "ltNormal", ltNormal: 0, "1": "ltDown", ltDown: 1, "2": "ltIn", ltIn: 2};
  rtl.createClass(this,"TPasImplForLoop",$lt103,function () {
    $lt117 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.VariableName = null;
      this.LoopType = 0;
      this.StartExpr = null;
      this.EndExpr = null;
      this.Variable = null;
      this.VarType = null;
      this.ImplicitTyped = false;
      this.Body = null;
    };
    this.$final = function () {
      this.VariableName = undefined;
      this.StartExpr = undefined;
      this.EndExpr = undefined;
      this.Variable = undefined;
      this.VarType = undefined;
      this.Body = undefined;
      $lt103.$final.call(this);
    };
    this.AddElement = function (Element) {
      $lt102.AddElement.call(this,Element);
      if (this.Body === null) {
        this.Body = Element;
      } else throw $lt.$create("Create$1",["TPasImplForLoop.AddElement body already set - please report this bug"]);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.VariableName,false);
      this.ForEachChildCall(aMethodCall,Arg,this.Variable,false);
      this.ForEachChildCall(aMethodCall,Arg,this.StartExpr,false);
      this.ForEachChildCall(aMethodCall,Arg,this.EndExpr,false);
      if (this.Elements.IndexOf(this.Body) < 0) this.ForEachChildCall(aMethodCall,Arg,this.Body,false);
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
    };
    this.Down = function () {
      var Result = false;
      Result = this.LoopType === 1;
      return Result;
    };
  });
  $lt118 = this.TAssignKind = {"0": "akDefault", akDefault: 0, "1": "akAdd", akAdd: 1, "2": "akMinus", akMinus: 2, "3": "akMul", akMul: 3, "4": "akDivision", akDivision: 4};
  rtl.createClass(this,"TPasImplAssign",$lt103,function () {
    $lt119 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.Left = null;
      this.Right = null;
      this.Kind = 0;
    };
    this.$final = function () {
      this.Left = undefined;
      this.Right = undefined;
      $lt103.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Left,false);
      this.ForEachChildCall(aMethodCall,Arg,this.Right,false);
    };
  });
  rtl.createClass(this,"TPasImplSimple",$lt103,function () {
    $lt120 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.Expr = null;
    };
    this.$final = function () {
      this.Expr = undefined;
      $lt103.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.Expr,false);
    };
  });
  rtl.createClass(this,"TPasImplTry",$lt102,function () {
    $lt121 = this;
    this.$init = function () {
      $lt102.$init.call(this);
      this.FinallyExcept = null;
      this.ElseBranch = null;
    };
    this.$final = function () {
      this.FinallyExcept = undefined;
      this.ElseBranch = undefined;
      $lt102.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.FinallyExcept,false);
      this.ForEachChildCall(aMethodCall,Arg,this.ElseBranch,false);
    };
  });
  rtl.createClass(this,"TPasImplTryHandler",$lt102,function () {
    $lt122 = this;
  });
  rtl.createClass(this,"TPasImplTryFinally",$lt122,function () {
    $lt123 = this;
  });
  rtl.createClass(this,"TPasImplTryExcept",$lt122,function () {
    $lt124 = this;
  });
  rtl.createClass(this,"TPasImplTryExceptElse",$lt122,function () {
    $lt125 = this;
  });
  rtl.createClass(this,"TPasImplExceptOn",$lt103,function () {
    $lt126 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.VarEl = null;
      this.TypeEl = null;
      this.Body = null;
    };
    this.$final = function () {
      this.VarEl = undefined;
      this.TypeEl = undefined;
      this.Body = undefined;
      $lt103.$final.call(this);
    };
    this.AddElement = function (Element) {
      $lt102.AddElement.call(this,Element);
      if (this.Body === null) this.Body = Element;
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      this.ForEachChildCall(aMethodCall,Arg,this.VarEl,false);
      this.ForEachChildCall(aMethodCall,Arg,this.TypeEl,true);
      if (this.Elements.IndexOf(this.Body) < 0) this.ForEachChildCall(aMethodCall,Arg,this.Body,false);
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
    };
  });
  rtl.createClass(this,"TPasImplRaise",$lt103,function () {
    $lt127 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.ExceptObject = null;
      this.ExceptAddr = null;
    };
    this.$final = function () {
      this.ExceptObject = undefined;
      this.ExceptAddr = undefined;
      $lt103.$final.call(this);
    };
    this.ForEachCall = function (aMethodCall, Arg) {
      $lt102.ForEachCall.call(this,aMethodCall,Arg);
      this.ForEachChildCall(aMethodCall,Arg,this.ExceptObject,false);
      this.ForEachChildCall(aMethodCall,Arg,this.ExceptAddr,false);
    };
  });
  rtl.createClass(this,"TPasImplLabelMark",$lt98,function () {
    $lt128 = this;
    this.$init = function () {
      $lt98.$init.call(this);
      this.LabelId = "";
    };
  });
  rtl.createClass(this,"TPasImplGoto",$lt103,function () {
    $lt129 = this;
    this.$init = function () {
      $lt103.$init.call(this);
      this.LabelName = "";
    };
  });
  this.AccessNames = ["","const ","var ","out ","constref "];
  this.AccessDescriptions = ["default","const","var","out","constref"];
  this.VisibilityNames = ["default","private","protected","public","published","automated","strict private","strict protected","required","optional"];
  this.ObjKindNames = ["object","class","interface","class helper","record helper","type helper","dispinterface","ObjcClass","ObjcCategory","ObjcProtocol"];
  this.InterfaceTypeNames = ["COM","Corba"];
  this.ExprKindNames = ["Ident","Number","String","StringMultiLine","Set","Nil","BoolConst","Range","Unary","Binary","FuncParams","ArrayParams","ListOfExp","Inherited","Self","Specialize","Procedure"];
  this.OpcodeStrings = ["","+","-","*","/","div","mod","**","shr","shl","not","and","or","xor","=","<>","<",">","<=",">=","in","is","as","><","@","^","@@","."];
  this.OperatorTokens = ["","","","*","+","-","/","<","=",">",":=","<>","<=",">=","**","><","Inc","Dec","mod","-","+","Or","div","shl","or","and","xor","and","not","xor","shr","enumerator","in","","","",""];
  this.OperatorNames = ["","implicit","explicit","multiply","add","subtract","divide","lessthan","equal","greaterthan","assign","notequal","lessthanorequal","greaterthanorequal","power","symmetricaldifference","inc","dec","modulus","negative","positive","bitwiseor","intdivide","leftshift","logicalor","bitwiseand","bitwisexor","logicaland","logicalnot","logicalxor","rightshift","enumerator","in","initialize","finalize","addref","copy"];
  this.AssignKindNames = [":=","+=","-=","*=","/="];
  this.cCallingConventions = ["","Register","Pascal","cdecl","stdcall","OldFPCCall","safecall","SysCall","MWPascal","HardFloat","SysV_ABI_Default","SysV_ABI_CDecl","MS_ABI_Default","MS_ABI_CDecl","VectorCall","WinApi"];
  this.ProcTypeModifiers = ["of Object","is nested","static","varargs","reference to","async","far","cblock"];
  this.ModifierNames = ["virtual","dynamic","abstract","override","export","overload","message","reintroduce","inline","assembler","public","compilerproc","external","forward","dispid","noreturn","far","final","discardresult","nostackframe","section","rtlproc","internproc","weakexternal"];
  this.VariableModifierNames = ["cvar","external","public","export","class","static","far"];
  this.FreeProcNameParts = function (NameParts) {
    var i = 0;
    var p = null;
    if (NameParts.get() === null) return;
    for (var $l = 0, $end = NameParts.get().FCount - 1; $l <= $end; $l++) {
      i = $l;
      p = rtl.getObject(NameParts.get().Get(i));
      rtl.free(p,"Templates");
      p = rtl.freeLoc(p);
    };
    NameParts.set(rtl.freeLoc(NameParts.get()));
    NameParts.set(null);
  };
  $mod.$resourcestrings = {SPasTreeElement: {org: "generic element"}, SPasTreeSection: {org: "unit section"}, SPasTreeProgramSection: {org: "program section"}, SPasTreeLibrarySection: {org: "library section"}, SPasTreePackageSection: {org: "package section"}, SPasTreeInterfaceSection: {org: "interface section"}, SPasTreeImplementationSection: {org: "implementation section"}, SPasTreeRequiredPackage: {org: "Required package"}, SPasTreeUsesUnit: {org: "uses unit"}, SPasTreeModule: {org: "module"}, SPasTreeUnit: {org: "unit"}, SPasTreePackage: {org: "package"}, SPasTreeResString: {org: "resource string"}, SPasTreeType: {org: "generic type"}, SPasTreePointerType: {org: "pointer type"}, SPasTreeAliasType: {org: "alias type"}, SPasTreeTypeAliasType: {org: '"type" alias type'}, SPasTreeClassOfType: {org: '"class of" type'}, SPasTreeRangeType: {org: "range type"}, SPasTreeArrayType: {org: "array type"}, SPasTreeFileType: {org: "file type"}, SPasTreeEnumValue: {org: "enumeration value"}, SPasTreeEnumType: {org: "enumeration type"}, SPasTreeSetType: {org: "set type"}, SPasTreeRecordType: {org: "record type"}, SPasStringType: {org: "string type"}, SPasTreeObjectType: {org: "object"}, SPasTreeClassType: {org: "class"}, SPasTreeInterfaceType: {org: "interface"}, SPasTreeSpecializedType: {org: "specialized class type"}, SPasTreeSpecializedExpr: {org: "specialize expr"}, SPasClassHelperType: {org: "class helper type"}, SPasRecordHelperType: {org: "record helper type"}, SPasTypeHelperType: {org: "type helper type"}, SPasTreeArgument: {org: "argument"}, SPasTreeProcedureType: {org: "procedure type"}, SPasTreeResultElement: {org: "function result"}, SPasTreeFunctionType: {org: "function type"}, SPasTreeUnresolvedTypeRef: {org: "unresolved type reference"}, SPasTreeVariable: {org: "variable"}, SPasTreeConst: {org: "constant"}, SPasTreeProperty: {org: "property"}, SPasTreeOverloadedProcedure: {org: "overloaded procedure"}, SPasTreeProcedure: {org: "procedure"}, SPasTreeFunction: {org: "function"}, SPasTreeOperator: {org: "operator"}, SPasTreeClassProcedure: {org: "class procedure"}, SPasTreeClassFunction: {org: "class function"}, SPasTreeClassConstructor: {org: "class constructor"}, SPasTreeClassDestructor: {org: "class destructor"}, SPasTreeConstructor: {org: "constructor"}, SPasTreeDestructor: {org: "destructor"}, SPasTreeAnonymousProcedure: {org: "anonymous procedure"}, SPasTreeAnonymousFunction: {org: "anonymous function"}};
});
rtl.module("PasResolveEval",["System","SysUtils","Classes","Math","PasTree","PScanner"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lm = pas.PasTree;
  var $lt19 = $lm.TPasElementBase;
  var $lm1 = pas.System;
  var $lt20 = $lm1.TObject;
  var $lm2 = pas.SysUtils;
  var $lp = $lm2.IntToStr;
  var $lp1 = $lm1.Frac;
  var $lp2 = $lm1.Trunc;
  var $lt21 = $lm.TPasEnumType;
  var $lt22 = $lm2.Exception;
  var $lt23 = $lm.TPasEnumValue;
  var $lm3 = pas.PScanner;
  var $lp3 = $lm3.SafeFormat;
  var $lp4 = $lm1.VarRecs;
  var $lt24 = $lm.TBinaryExpr;
  var $lt25 = $lm2.EOverflow;
  var $lt26 = $lm2.ERangeError;
  var $lp5 = $lm1.Copy;
  var $lt27 = $lm.TPrimitiveExpr;
  var $lp6 = $lm1.val;
  var $lp7 = $lm1.Pos;
  var $lp8 = $lm1.val$1;
  var $lp9 = $lm1.val$8;
  var $lt28 = $lm.TNilExpr;
  var $lt29 = $lm.TBoolConstExpr;
  var $lt30 = $lm.TUnaryExpr;
  var $lt31 = $lm.TParamsExpr;
  var $lt32 = $lm.TArrayValues;
  var $lt33 = $lm.TPasProcedure;
  var $lt34 = $lm.TPasImplBlock;
  var $lp10 = $lm1.StringOfChar;
  var $lt35 = $lm.TPasArrayType;
  var $lp11 = $lm2.Format;
  var $lt36 = $lm.TPasElement;
  var $lt37 = $lm.TPasGenericType;
  var $lp12 = $lm2.IsValidIdent;
  this.nIdentifierNotFound = 3001;
  this.nNotYetImplemented = 3002;
  this.nIllegalQualifier = 3003;
  this.nSyntaxErrorExpectedButFound = 3004;
  this.nWrongNumberOfParametersForCallTo = 3005;
  this.nIncompatibleTypeArgNo = 3006;
  this.nIncompatibleTypeArgNoVarParamMustMatchExactly = 3007;
  this.nVariableIdentifierExpected = 3008;
  this.nDuplicateIdentifier = 3009;
  this.nXExpectedButYFound = 3010;
  this.nAncestorCycleDetected = 3011;
  this.nCantUseForwardDeclarationAsAncestor = 3012;
  this.nCantDetermineWhichOverloadedFunctionToCall = 3013;
  this.nForwardTypeNotResolved = 3014;
  this.nForwardProcNotResolved = 3015;
  this.nInvalidXModifierY = 3016;
  this.nAbstractMethodsMustNotHaveImplementation = 3017;
  this.nCallingConventionMismatch = 3018;
  this.nResultTypeMismatchExpectedButFound = 3019;
  this.nFunctionHeaderMismatchForwardVarName = 3020;
  this.nFunctionHidesIdentifier_NonVirtualMethod = 3021;
  this.nNoMethodInAncestorToOverride = 3022;
  this.nInheritedOnlyWorksInMethods = 3023;
  this.nInheritedNeedsAncestor = 3024;
  this.nNoPropertyFoundToOverride = 3025;
  this.nExprTypeMustBeClassOrRecordTypeGot = 3026;
  this.nPropertyNotWritable = 3027;
  this.nIncompatibleTypesGotExpected = 3028;
  this.nTypesAreNotRelatedXY = 3029;
  this.nAbstractMethodsCannotBeCalledDirectly = 3030;
  this.nMissingParameterX = 3031;
  this.nInstanceMemberXInaccessible = 3032;
  this.nInOperatorExpectsSetElementButGot = 3033;
  this.nWrongNumberOfParametersForTypeCast = 3034;
  this.nIllegalTypeConversionTo = 3035;
  this.nConstantExpressionExpected = 3036;
  this.nLeftSideOfIsOperatorExpectsAClassButGot = 3037;
  this.nNotReadable = 3038;
  this.nClassPropertyAccessorMustBeStatic = 3039;
  this.nClassPropertyAccessorMustNotBeStatic = 3040;
  this.nOnlyOneDefaultPropertyIsAllowed = 3041;
  this.nWrongNumberOfParametersForArray = 3042;
  this.nCantAssignValuesToAnAddress = 3043;
  this.nIllegalExpression = 3044;
  this.nCantAccessXMember = 3045;
  this.nMustBeInsideALoop = 3046;
  this.nExpectXArrayElementsButFoundY = 3047;
  this.nCannotCreateADescendantOfTheSealedXY = 3048;
  this.nAncestorIsNotExternal = 3049;
  this.nPropertyMustHaveReadOrWrite = 3050;
  this.nExternalClassInstanceCannotAccessStaticX = 3051;
  this.nXModifierMismatchY = 3052;
  this.nSymbolCannotBePublished = 3053;
  this.nCannotTypecastAType = 3054;
  this.nTypeIdentifierExpected = 3055;
  this.nCannotNestAnonymousX = 3056;
  this.nFoundCallCandidateX = 3057;
  this.nTextAfterFinalIgnored = 3058;
  this.nNoMemberIsProvidedToAccessProperty = 3059;
  this.nTheUseOfXisNotAllowedInARecord = 3060;
  this.nParameterlessConstructorsNotAllowedInRecords = 3061;
  this.nMultipleXinTypeYNameZCAandB = 3062;
  this.nXCannotHaveParameters = 3063;
  this.nRangeCheckError = 3064;
  this.nHighRangeLimitLTLowRangeLimit = 3065;
  this.nRangeCheckEvaluatingConstantsVMinMax = 3066;
  this.nOverflowInArithmeticOperation = 3068;
  this.nDivByZero = 3069;
  this.nRangeCheckInSetConstructor = 3070;
  this.nIncompatibleTypesGotParametersExpected = 3071;
  this.nAddingIndexSpecifierRequiresNewX = 3072;
  this.nCantFindUnitX = 3073;
  this.nCannotFindEnumeratorForType = 3074;
  this.nPreviousDeclMissesOverload = 3075;
  this.nOverloadedProcMissesOverload = 3076;
  this.nMethodHidesMethodOfBaseType = 3077;
  this.nContextExpectedXButFoundY = 3078;
  this.nContextXInvalidY = 3079;
  this.nIdentifierXIsNotAnInstanceField = 3080;
  this.nXIsNotSupported = 3081;
  this.nOperatorIsNotOverloadedAOpB = 3082;
  this.nIllegalQualifierAfter = 3084;
  this.nIllegalQualifierInFrontOf = 3085;
  this.nClassXNotFoundInThisModule = 3087;
  this.nClassMethodsMustBeStaticInX = 3088;
  this.nCannotMixMethodResolutionAndDelegationAtX = 3089;
  this.nImplementsDoesNotSupportArrayProperty = 3101;
  this.nImplementsDoesNotSupportIndex = 3102;
  this.nImplementsUsedOnUnimplIntf = 3103;
  this.nDuplicateImplementsForIntf = 3103;
  this.nImplPropMustHaveReadSpec = 3104;
  this.nDoesNotImplementInterface = 3105;
  this.nTypeCycleFound = 3106;
  this.nTypeXIsNotYetCompletelyDefined = 3107;
  this.nDuplicateCaseValueXatY = 3108;
  this.nMissingFieldsX = 3109;
  this.nCantAssignValuesToConstVariable = 3110;
  this.nIllegalAssignmentToForLoopVar = 3111;
  this.nFunctionHidesIdentifier_NonProc = 3112;
  this.nTypeXCannotBeExtendedByATypeHelper = 3113;
  this.nTypeXCannotBeExtendedByARecordHelper = 3114;
  this.nDerivedXMustExtendASubClassY = 3115;
  this.nDefaultPropertyNotAllowedInHelperForX = 3116;
  this.nHelpersCannotBeUsedAsTypes = 3117;
  this.nMessageHandlersInvalidParams = 3118;
  this.nWrongTypeXInArrayConstructor = 3120;
  this.nUnknownCustomAttributeX = 3121;
  this.nAttributeIgnoredBecauseAbstractX = 3122;
  this.nCreatingAnInstanceOfAbstractClassY = 3123;
  this.nIllegalExpressionAfterX = 3124;
  this.nMethodHidesNonVirtualMethodExactly = 3125;
  this.nDuplicatePublishedMethodXAtY = 3126;
  this.nConstraintXSpecifiedMoreThanOnce = 3127;
  this.nConstraintXAndConstraintYCannotBeTogether = 3128;
  this.nXIsNotAValidConstraint = 3129;
  this.nWrongNumberOfParametersForGenericX = 3130;
  this.nGenericsWithoutSpecializationAsType = 3131;
  this.nDeclOfXDiffersFromPrevAtY = 3132;
  this.nTypeParamXIsMissingConstraintY = 3133;
  this.nTypeParamXIsNotCompatibleWithY = 3134;
  this.nTypeParamXMustSupportIntfY = 3135;
  this.nTypeParamsNotAllowedOnX = 3136;
  this.nXMethodsCannotHaveTypeParams = 3137;
  this.nImplMustNotRepeatConstraints = 3138;
  this.nCouldNotInferTypeArgXForMethodY = 3139;
  this.nInferredTypeXFromDiffArgsMismatchFromMethodY = 3140;
  this.nParamOfThisTypeCannotHaveDefVal = 3141;
  this.nClassTypesAreNotRelatedXY = 3142;
  this.nDirectiveXNotAllowedHere = 3143;
  this.nAwaitWithoutPromise = 3144;
  this.nSymbolCannotBeExportedFromALibrary = 3145;
  this.nForLoopControlVarMustBeSimpleLocalVar = 3146;
  this.nIllegalCharConst = 3147;
  this.nVirtualMethodXHasLowerVisibility = 3250;
  this.nConstructingClassXWithAbstractMethodY = 4046;
  this.nNoMatchingImplForIntfMethodXFound = 5042;
  this.nSymbolXIsDeprecated = 5043;
  this.nSymbolXBelongsToALibrary = 5065;
  this.nSymbolXIsDeprecatedY = 5066;
  this.nSymbolXIsNotPortable = 5076;
  this.nSymbolXIsNotImplemented = 5078;
  this.nSymbolXIsExperimental = 5079;
  rtl.createClass(this,"TResolveData",$lt19,function () {
    $lt = this;
    this.$init = function () {
      $lt19.$init.call(this);
      this.FElement = null;
      this.Owner = null;
      this.Next = null;
    };
    this.$final = function () {
      this.FElement = undefined;
      this.Owner = undefined;
      this.Next = undefined;
      $lt19.$final.call(this);
    };
    this.SetElement = function (AValue) {
      if (this.FElement === AValue) return;
      this.FElement = AValue;
    };
    this.Create$1 = function () {
      return this;
    };
    this.Destroy = function () {
      this.SetElement(null);
      this.Owner = null;
      this.Next = null;
      $lt20.Destroy.call(this);
    };
  });
  this.HighIntAsUInt = 9007199254740991;
  this.MinSafeIntCurrency = -922337203685477;
  this.MaxSafeIntCurrency = 922337203685477;
  this.MinSafeIntSingle = -16777216;
  this.MaxSafeIntSingle = 16777216;
  this.MinSafeIntDouble = -0x1fffffffffffff;
  this.MaxSafeIntDouble = 0x1fffffffffffff;
  $lt1 = this.TREVKind = {"0": "revkNone", revkNone: 0, "1": "revkCustom", revkCustom: 1, "2": "revkNil", revkNil: 2, "3": "revkBool", revkBool: 3, "4": "revkInt", revkInt: 4, "5": "revkUInt", revkUInt: 5, "6": "revkFloat", revkFloat: 6, "7": "revkCurrency", revkCurrency: 7, "8": "revkUnicodeString", revkUnicodeString: 8, "9": "revkEnum", revkEnum: 9, "10": "revkRangeInt", revkRangeInt: 10, "11": "revkRangeUInt", revkRangeUInt: 11, "12": "revkSetOfInt", revkSetOfInt: 12, "13": "revkExternal", revkExternal: 13};
  this.revkAllStrings = rtl.createSet(8);
  rtl.createClass(this,"TResEvalValue",$lt,function () {
    $lt2 = this;
    this.$init = function () {
      $lt.$init.call(this);
      this.Kind = 0;
      this.IdentEl = null;
    };
    this.$final = function () {
      this.IdentEl = undefined;
      $lt.$final.call(this);
    };
    this.CreateKind = function (aKind) {
      this.Create$1();
      this.Kind = aKind;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = this.$class.ClassType().$create("Create$1");
      Result.Kind = this.Kind;
      Result.IdentEl = this.IdentEl;
      return Result;
    };
    this.AsDebugString = function () {
      var Result = "";
      Result = $lt1[this.Kind];
      Result = Result + "=" + this.AsString();
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      var $tmp = this.Kind;
      if ($tmp === 0) {
        Result = "<None>"}
       else if ($tmp === 2) {
        Result = "nil"}
       else {
        Result = $lt1[this.Kind];
      };
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalBool",$lt2,function () {
    $lt3 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.B = false;
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 3;
      return this;
    };
    this.CreateValue = function (aValue) {
      this.Create$1();
      this.B = aValue;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.B = this.B;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      if (this.B) {
        Result = "true"}
       else Result = "false";
      return Result;
    };
  });
  $lt4 = this.TResEvalTypedInt = {"0": "reitNone", reitNone: 0, "1": "reitByte", reitByte: 1, "2": "reitShortInt", reitShortInt: 2, "3": "reitWord", reitWord: 3, "4": "reitSmallInt", reitSmallInt: 4, "5": "reitUIntSingle", reitUIntSingle: 5, "6": "reitIntSingle", reitIntSingle: 6, "7": "reitLongWord", reitLongWord: 7, "8": "reitLongInt", reitLongInt: 8, "9": "reitUIntDouble", reitUIntDouble: 9, "10": "reitIntDouble", reitIntDouble: 10};
  this.reitDefaults = rtl.createSet(0,1,2,3,4,7,8);
  this.reitAllSigned = rtl.createSet(0,2,4,6,8,10);
  this.reitLow = [-9007199254740991,0,-128,0,-32768,0,-16777216,0,-2147483648,0,-9007199254740991];
  rtl.createClass(this,"TResEvalInt",$lt2,function () {
    $lt5 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.Int = 0;
      this.Typed = 0;
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 4;
      return this;
    };
    this.CreateValue = function (aValue) {
      this.Create$1();
      this.Int = aValue;
      return this;
    };
    this.CreateValue$1 = function (aValue, aTyped) {
      this.Create$1();
      this.Int = aValue;
      this.Typed = aTyped;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.Int = this.Int;
      Result.Typed = this.Typed;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = $lp(this.Int);
      return Result;
    };
    this.AsDebugString = function () {
      var Result = "";
      if (this.Typed === 0) {
        Result = $lt2.AsDebugString.call(this)}
       else {
        Result = $lt1[this.Kind];
        var $tmp = this.Typed;
        if ($tmp === 1) {
          Result = Result + ":byte"}
         else if ($tmp === 2) {
          Result = Result + ":shortint"}
         else if ($tmp === 3) {
          Result = Result + ":word"}
         else if ($tmp === 4) {
          Result = Result + ":smallint"}
         else if ($tmp === 5) {
          Result = Result + ":uintsingle"}
         else if ($tmp === 6) {
          Result = Result + ":intsingle"}
         else if ($tmp === 7) {
          Result = Result + ":longword"}
         else if ($tmp === 8) {
          Result = Result + ":longint"}
         else if ($tmp === 9) {
          Result = Result + ":uintdouble"}
         else if ($tmp === 10) Result = Result + ":intdouble";
        Result = Result + "=" + this.AsString();
      };
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalUInt",$lt2,function () {
    $lt6 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.UInt = 0;
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 5;
      return this;
    };
    this.CreateValue = function (aValue) {
      this.Create$1();
      this.UInt = aValue;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.UInt = this.UInt;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = $lp(this.UInt);
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalFloat",$lt2,function () {
    $lt7 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.FloatValue = 0.0;
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 6;
      return this;
    };
    this.CreateValue = function (aValue) {
      this.Create$1();
      this.FloatValue = aValue;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.FloatValue = this.FloatValue;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = rtl.floatToStr(this.FloatValue);
      return Result;
    };
    this.IsInt = function (Int) {
      var Result = false;
      Int.set(0);
      if ($lp1(this.FloatValue) !== 0) return false;
      if (this.FloatValue < -9007199254740991) return false;
      if (this.FloatValue > 9007199254740991) return false;
      Int.set($lp2(this.FloatValue));
      Result = true;
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalCurrency",$lt2,function () {
    $lt8 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.Value = 0;
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 7;
      return this;
    };
    this.CreateValue = function (aValue) {
      this.Create$1();
      this.Value = aValue;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.Value = this.Value;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = rtl.floatToStr(this.Value / 10000);
      return Result;
    };
    this.IsInt = function (Int) {
      var Result = false;
      var i = 0;
      i = this.AsInt();
      Result = (i % 10000) === 0;
      Int.set(rtl.trunc(i / 10000));
      return Result;
    };
    this.AsInt = function () {
      var Result = 0;
      Result = rtl.trunc(this.Value / 10000);
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalUTF16",$lt2,function () {
    $lt9 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.S = "";
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 8;
      return this;
    };
    this.CreateValue = function (aValue) {
      this.Create$1();
      this.S = aValue;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.S = this.S;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = $mod.UnicodeStrToCaption(this.S,60);
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalEnum",$lt2,function () {
    $lt10 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.Index = 0;
      this.ElType = null;
    };
    this.$final = function () {
      this.ElType = undefined;
      $lt2.$final.call(this);
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 9;
      return this;
    };
    this.CreateValue = function (aValue, aIdentEl) {
      this.Create$1();
      this.Index = aValue;
      this.IdentEl = aIdentEl;
      this.ElType = rtl.as(this.IdentEl.FParent,$lt21);
      if (this.ElType === null) throw $lt22.$create("Create$1",[""]);
      return this;
    };
    this.GetEnumValue = function () {
      var Result = null;
      Result = null;
      if (this.ElType !== null) if ((this.Index >= 0) && (this.Index < this.ElType.Values.FCount)) Result = rtl.as(rtl.getObject(this.ElType.Values.Get(this.Index)),$lt23);
      return Result;
    };
    this.GetEnumName = function () {
      var Result = "";
      var V = null;
      V = this.GetEnumValue();
      if (V !== null) {
        Result = V.FName}
       else Result = "";
      return Result;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.Index = this.Index;
      Result.ElType = this.ElType;
      return Result;
    };
    this.AsDebugString = function () {
      var Result = "";
      Result = $lt1[this.Kind];
      Result = Result + "=" + this.AsString() + "=" + $lp(this.Index);
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      if (this.IdentEl !== null) {
        Result = this.IdentEl.FName;
        if (Result !== "") return Result;
      };
      Result = this.GetEnumName();
      if (Result !== "") return Result;
      Result = this.ElType.FName + "(" + $lp(this.Index) + ")";
      return Result;
    };
  });
  $lt11 = this.TRESetElKind = {"0": "revskNone", revskNone: 0, "1": "revskEnum", revskEnum: 1, "2": "revskInt", revskInt: 2, "3": "revskChar", revskChar: 3, "4": "revskBool", revskBool: 4};
  rtl.createClass(this,"TResEvalRangeInt",$lt2,function () {
    $lt12 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.ElKind = 0;
      this.RangeStart = 0;
      this.RangeEnd = 0;
      this.ElType = null;
    };
    this.$final = function () {
      this.ElType = undefined;
      $lt2.$final.call(this);
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 10;
      return this;
    };
    this.CreateValue = function (aElKind, aElType, aRangeStart, aRangeEnd) {
      this.Create$1();
      this.ElKind = aElKind;
      this.ElType = aElType;
      this.RangeStart = aRangeStart;
      this.RangeEnd = aRangeEnd;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.ElKind = this.ElKind;
      Result.RangeStart = this.RangeStart;
      Result.RangeEnd = this.RangeEnd;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = this.ElementAsString(this.RangeStart) + ".." + this.ElementAsString(this.RangeEnd);
      return Result;
    };
    this.AsDebugString = function () {
      var Result = "";
      var s = "";
      Result = $lt1[this.Kind];
      s = $lt11[this.ElKind];
      Result = Result + "/" + s + ":" + $mod.GetObjName(this.ElType) + "=" + this.AsString();
      return Result;
    };
    this.ElementAsString = function (El) {
      var Result = "";
      var EnumValue = null;
      var EnumType = null;
      var $tmp = this.ElKind;
      if ($tmp === 4) {
        if (El === 0) {
          Result = "false"}
         else Result = "true"}
       else if ($tmp === 1) {
        EnumType = rtl.as(this.ElType,$lt21);
        if ((El >= 0) && (El < EnumType.Values.FCount)) {
          EnumValue = rtl.getObject(EnumType.Values.Get(El));
          Result = EnumValue.FName;
        } else Result = this.ElType.FName + "(" + $lp(El) + ")";
      } else if ($tmp === 2) {
        Result = $lp(El)}
       else if ($tmp === 3) if (((El >= 32) && (El <= 38)) || ((El >= 40) && (El <= 126))) {
        Result = "'" + String.fromCharCode(El) + "'"}
       else Result = "#" + $lp(El);
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalRangeUInt",$lt2,function () {
    $lt13 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.RangeStart = 0;
      this.RangeEnd = 0;
    };
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 10;
      return this;
    };
    this.CreateValue = function (aRangeStart, aRangeEnd) {
      this.Create$1();
      this.RangeStart = aRangeStart;
      this.RangeEnd = aRangeEnd;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      Result.RangeStart = this.RangeStart;
      Result.RangeEnd = this.RangeEnd;
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = $lp(this.RangeStart) + ".." + $lp(this.RangeEnd);
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalSet",$lt12,function () {
    $lt14 = this;
    rtl.recNewT(this,"TItem",function () {
      $lt15 = this;
      this.RangeStart = 0;
      this.RangeEnd = 0;
      this.$eq = function (b) {
        return (this.RangeStart === b.RangeStart) && (this.RangeEnd === b.RangeEnd);
      };
      this.$assign = function (s) {
        this.RangeStart = s.RangeStart;
        this.RangeEnd = s.RangeEnd;
        return this;
      };
    });
    this.$init = function () {
      $lt12.$init.call(this);
      this.Ranges = [];
    };
    this.$final = function () {
      this.Ranges = undefined;
      $lt12.$final.call(this);
    };
    this.Create$1 = function () {
      $lt12.Create$1.call(this);
      this.Kind = 12;
      return this;
    };
    this.CreateEmpty = function (aElKind, aElType) {
      this.Create$1();
      this.ElKind = aElKind;
      this.ElType = aElType;
      return this;
    };
    this.CreateEmptySameKind = function (aSet) {
      this.Create$1();
      this.IdentEl = aSet.IdentEl;
      this.ElKind = aSet.ElKind;
      this.ElType = aSet.ElType;
      return this;
    };
    this.CreateValue = function (aElKind, aElType, aRangeStart, aRangeEnd) {
      $lt12.CreateValue.call(this,aElKind,aElType,aRangeStart,aRangeEnd);
      this.Add(aRangeStart,aRangeEnd);
      return this;
    };
    this.Clone = function () {
      var Result = null;
      var RS = null;
      var i = 0;
      Result = $lt12.Clone.call(this);
      RS = Result;
      RS.ElKind = this.ElKind;
      RS.ElType = this.ElType;
      RS.Ranges = rtl.arraySetLength(RS.Ranges,$lt15,rtl.length(this.Ranges));
      for (var $l = 0, $end = rtl.length(this.Ranges) - 1; $l <= $end; $l++) {
        i = $l;
        RS.Ranges[i].$assign(this.Ranges[i]);
      };
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      var i = 0;
      Result = "[";
      for (var $l = 0, $end = rtl.length(this.Ranges) - 1; $l <= $end; $l++) {
        i = $l;
        if (i > 0) Result = Result + ",";
        Result = Result + this.ElementAsString(this.Ranges[i].RangeStart);
        if (this.Ranges[i].RangeStart !== this.Ranges[i].RangeEnd) Result = Result + ".." + this.ElementAsString(this.Ranges[i].RangeEnd);
      };
      Result = Result + "]";
      return Result;
    };
    this.Add = function (aRangeStart, aRangeEnd) {
      var $Self = this;
      var Result = false;
      function Insert(Item, Items, Index) {
        var i = 0;
        Items.set(rtl.arraySetLength(Items.get(),$lt15,rtl.length(Items.get()) + 1));
        for (var $l = rtl.length(Items.get()) - 1, $end = Index + 1; $l >= $end; $l--) {
          i = $l;
          Items.get()[i].$assign(Items.get()[i - 1]);
        };
        Items.get()[Index].$assign(Item);
      };
      function Delete(Items, Start, Size) {
        var i = 0;
        if (Size === 0) return;
        for (var $l = Start + Size, $end = rtl.length(Items.get()) - 1; $l <= $end; $l++) {
          i = $l;
          Items.get()[i - Size].$assign(Items.get()[i]);
        };
        Items.set(rtl.arraySetLength(Items.get(),$lt15,rtl.length(Items.get()) - Size));
      };
      var StartIndex = 0;
      var l = 0;
      var EndIndex = 0;
      var Item = $lt15.$new();
      Result = false;
      if (aRangeStart > aRangeEnd) throw $lt22.$create("Create$1",[""]);
      if (this.ElKind === 0) throw $lt22.$create("Create$1",[""]);
      l = rtl.length(this.Ranges);
      if (l === 0) {
        this.RangeStart = aRangeStart;
        this.RangeEnd = aRangeEnd;
        this.Ranges = rtl.arraySetLength(this.Ranges,$lt15,1);
        this.Ranges[0].RangeStart = aRangeStart;
        this.Ranges[0].RangeEnd = aRangeEnd;
        return true;
      };
      if (this.RangeStart > aRangeStart) this.RangeStart = aRangeStart;
      if (this.RangeEnd < aRangeEnd) this.RangeEnd = aRangeEnd;
      StartIndex = this.IndexOfRange(aRangeStart,true);
      if ((StartIndex > 0) && (this.Ranges[StartIndex - 1].RangeEnd === (aRangeStart - 1))) StartIndex -= 1;
      if (StartIndex === l) {
        Item.RangeStart = aRangeStart;
        Item.RangeEnd = aRangeEnd;
        Insert(Item,{p: this, get: function () {
            return this.p.Ranges;
          }, set: function (v) {
            this.p.Ranges = v;
          }},StartIndex);
        Result = true;
      } else {
        EndIndex = this.IndexOfRange(aRangeEnd,true);
        if (EndIndex > StartIndex) if ((EndIndex === l) || (this.Ranges[EndIndex].RangeStart > (aRangeEnd + 1))) EndIndex -= 1;
        if (StartIndex > EndIndex) throw $lt22.$create("Create$1",[""]);
        if (StartIndex === EndIndex) {
          if (this.Ranges[StartIndex].RangeStart > aRangeEnd) {
            if (this.Ranges[StartIndex].RangeStart > (aRangeEnd + 1)) {
              Item.RangeStart = aRangeStart;
              Item.RangeEnd = aRangeEnd;
              Insert(Item,{p: this, get: function () {
                  return this.p.Ranges;
                }, set: function (v) {
                  this.p.Ranges = v;
                }},StartIndex);
              Result = true;
            } else {
              this.Ranges[StartIndex].RangeStart = aRangeStart;
              Result = true;
            };
          } else if (this.Ranges[StartIndex].RangeEnd < aRangeStart) {
            if ((this.Ranges[StartIndex].RangeEnd + 1) < aRangeStart) {
              Item.RangeStart = aRangeStart;
              Item.RangeEnd = aRangeEnd;
              Insert(Item,{p: this, get: function () {
                  return this.p.Ranges;
                }, set: function (v) {
                  this.p.Ranges = v;
                }},StartIndex + 1);
              Result = true;
            } else {
              this.Ranges[StartIndex].RangeEnd = aRangeEnd;
              Result = true;
            };
          } else {
            Result = false;
            if (this.Ranges[StartIndex].RangeStart > aRangeStart) this.Ranges[StartIndex].RangeStart = aRangeStart;
            if (this.Ranges[StartIndex].RangeEnd < aRangeEnd) this.Ranges[StartIndex].RangeEnd = aRangeEnd;
          };
        } else {
          Result = false;
          if (this.Ranges[StartIndex].RangeStart > aRangeStart) this.Ranges[StartIndex].RangeStart = aRangeStart;
          if (aRangeEnd < this.Ranges[EndIndex].RangeEnd) aRangeEnd = this.Ranges[EndIndex].RangeEnd;
          this.Ranges[StartIndex].RangeEnd = aRangeEnd;
          Delete({p: this, get: function () {
              return this.p.Ranges;
            }, set: function (v) {
              this.p.Ranges = v;
            }},StartIndex + 1,EndIndex - StartIndex);
        };
      };
      return Result;
    };
    this.IndexOfRange = function (Index, FindInsertPos) {
      var Result = 0;
      var l = 0;
      var r = 0;
      var m = 0;
      l = 0;
      r = rtl.length(this.Ranges) - 1;
      while (l <= r) {
        m = rtl.trunc((l + r) / 2);
        if (this.Ranges[m].RangeStart > Index) {
          r = m - 1}
         else if (this.Ranges[m].RangeEnd < Index) {
          l = m + 1}
         else return m;
      };
      if (!FindInsertPos) return -1;
      if (rtl.length(this.Ranges) === 0) {
        return 0}
       else if (l > m) {
        return l}
       else return m;
      Result = -1;
      return Result;
    };
    this.Intersects = function (aRangeStart, aRangeEnd) {
      var Result = 0;
      var Index = 0;
      Index = this.IndexOfRange(aRangeStart,true);
      if ((Index === rtl.length(this.Ranges)) || (this.Ranges[Index].RangeStart > aRangeEnd)) {
        Result = -1}
       else Result = Index;
      return Result;
    };
  });
  rtl.createClass(this,"TResEvalExternal",$lt2,function () {
    $lt16 = this;
    this.Create$1 = function () {
      $lt.Create$1.call(this);
      this.Kind = 13;
      return this;
    };
    this.Clone = function () {
      var Result = null;
      Result = $lt2.Clone.call(this);
      return Result;
    };
    this.AsString = function () {
      var Result = "";
      Result = $lt2.AsString.call(this);
      return Result;
    };
  });
  $lt17 = this.TResEvalFlag = {"0": "refConst", refConst: 0, "1": "refConstExt", refConstExt: 1, "2": "refAutoConst", refAutoConst: 2, "3": "refAutoConstExt", refAutoConstExt: 3};
  rtl.createClass(this,"TResExprEvaluator",$lt20,function () {
    $lt18 = this;
    this.$init = function () {
      $lt20.$init.call(this);
      this.FAllowedInts = {};
      this.FOnEvalIdentifier = null;
      this.FOnEvalParams = null;
      this.FOnLog = null;
      this.FOnRangeCheckEl = null;
    };
    this.$final = function () {
      this.FAllowedInts = undefined;
      this.FOnEvalIdentifier = undefined;
      this.FOnEvalParams = undefined;
      this.FOnLog = undefined;
      this.FOnRangeCheckEl = undefined;
      $lt20.$final.call(this);
    };
    this.LogMsg = function (id, MsgType, MsgNumber, Fmt, Args, PosEl) {
      this.FOnLog(this,id,MsgType,MsgNumber,Fmt,Args,PosEl);
    };
    this.RaiseMsg = function (Id, MsgNumber, Fmt, Args, ErrorPosEl) {
      this.LogMsg(Id,1,MsgNumber,Fmt,Args,ErrorPosEl);
      throw $lt22.$create("Create$1",["[" + $lp(Id) + "] (" + $lp(MsgNumber) + ") " + $lp3(Fmt,Args)]);
    };
    this.RaiseNotYetImplemented = function (id, El, Msg) {
      var s = "";
      s = rtl.getResStr($mod,"sNotYetImplemented") + " [" + $lp(id) + "]";
      if (Msg !== "") s = s + " " + Msg;
      this.RaiseMsg(id,3002,s,$lp4(18,$mod.GetObjName(El)),El);
    };
    this.RaiseInternalError = function (id, Msg) {
      throw $lt22.$create("Create$1",["Internal error: [" + $lp(id) + "] " + Msg]);
    };
    this.RaiseConstantExprExp = function (id, ErrorEl) {
      this.RaiseMsg(id,3036,rtl.getResStr($mod,"sConstantExpressionExpected"),[],ErrorEl);
    };
    this.RaiseRangeCheck = function (id, ErrorEl) {
      this.RaiseMsg(id,3064,rtl.getResStr($mod,"sRangeCheckError"),[],ErrorEl);
    };
    this.RaiseOverflowArithmetic = function (id, ErrorEl) {
      this.RaiseMsg(id,3068,rtl.getResStr($mod,"sOverflowInArithmeticOperation"),[],ErrorEl);
    };
    this.RaiseDivByZero = function (id, ErrorEl) {
      this.RaiseMsg(id,3069,rtl.getResStr($mod,"sDivByZero"),[],ErrorEl);
    };
    this.EvalUnaryExpr = function (Expr, Flags) {
      var Result = null;
      var Int = 0;
      var UInt = 0;
      Result = this.Eval(Expr.Operand,rtl.refSet(Flags));
      if (Result === null) return Result;
      var $tmp = Expr.OpCode;
      if ($tmp === 1) {}
      else if ($tmp === 2) {
        var $tmp1 = Result.Kind;
        if ($tmp1 === 4) {
          Int = Result.Int;
          if (Int === 0) return Result;
          if (Result.FElement !== null) Result = Result.Clone();
          if (Result.Typed in $mod.reitAllSigned) {
            if (Int === $mod.reitLow[Result.Typed]) {
              if (Result.Typed !== 0) {
                Result.Typed = 0}
               else {
                $mod.ReleaseEvalValue({get: function () {
                    return Result;
                  }, set: function (v) {
                    Result = v;
                  }});
                Result = $lt7.$create("CreateValue",[- -9007199254740991]);
                return Result;
              };
            };
          } else {
            Result.Typed = 0;
          };
          Result.Int = -Int;
        } else if ($tmp1 === 5) {
          UInt = Result.UInt;
          if (UInt === 0) return Result;
          if (UInt <= 9007199254740991) {
            $mod.ReleaseEvalValue({get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }});
            Result = $lt5.$create("CreateValue",[-UInt]);
          } else {
            $mod.ReleaseEvalValue({get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }});
            Result = $lt7.$create("CreateValue",[-UInt]);
          };
        } else if ($tmp1 === 6) {
          if (Result.FloatValue === 0) return Result;
          if (Result.FElement !== null) Result = Result.Clone();
          Result.FloatValue = -Result.FloatValue;
        } else if ($tmp1 === 7) {
          if (Result.Value === 0) return Result;
          if (Result.FElement !== null) Result = Result.Clone();
          Result.Value = -Result.Value;
        } else if ($tmp1 === 13) {
          return Result}
         else {
          if (Result.FElement === null) Result = rtl.freeLoc(Result);
          this.RaiseNotYetImplemented(20170518230738,Expr,"");
        };
      } else if ($tmp === 10) {
        var $tmp2 = Result.Kind;
        if ($tmp2 === 3) {
          if (Result.FElement !== null) Result = Result.Clone();
          Result.B = !Result.B;
        } else if ($tmp2 === 4) {
          if (Result.FElement !== null) Result = Result.Clone();
          var $tmp3 = Result.Typed;
          if ($tmp3 === 1) {
            Result.Int = ~(Result.Int & 255)}
           else if ($tmp3 === 2) {
            Result.Int = ~(((Result.Int & 255) << 24) >> 24)}
           else if ($tmp3 === 3) {
            Result.Int = ~(Result.Int & 65535)}
           else if ($tmp3 === 4) {
            Result.Int = ~(((Result.Int & 65535) << 16) >> 16)}
           else if ($tmp3 === 5) {
            Result.Int = ~Result.Int & 0x3fffff}
           else if ($tmp3 === 6) {
            Result.Int = ~Result.Int & 0x7fffff}
           else if ($tmp3 === 7) {
            Result.Int = rtl.lw(~(Result.Int >>> 0))}
           else if ($tmp3 === 8) {
            Result.Int = ~(Result.Int & 0xFFFFFFFF)}
           else if ($tmp3 === 9) {
            Result.Int = rtl.and(~Result.Int,0xfffffffffffff)}
           else if ($tmp3 === 10) {}
          else {
            Result.Int = ~Result.Int;
          };
        } else if ($tmp2 === 5) {
          if (Result.FElement !== null) Result = Result.Clone();
          Result.UInt = ~Result.UInt;
        } else if ($tmp2 === 13) {
          return Result}
         else {
          if (Result.FElement === null) Result = rtl.freeLoc(Result);
          this.RaiseNotYetImplemented(20170518232804,Expr,"");
        };
      } else if ($tmp === 24) {
        if (Result.FElement === null) Result = rtl.freeLoc(Result);
        Result = $lt2.$create("CreateKind",[2]);
      } else {
        this.RaiseNotYetImplemented(20170518232823,Expr,"operator=" + $lm.OpcodeStrings[Expr.OpCode]);
      };
      return Result;
    };
    this.EvalBinaryExpr = function (Expr, Flags) {
      var Result = null;
      var LeftValue = null;
      var RightValue = null;
      var Left = null;
      var SubBin = null;
      Result = null;
      if ((Expr.Kind === 9) && (Expr.OpCode === 27)) {
        Result = this.Eval(Expr.Right,rtl.refSet(Flags));
        return Result;
      };
      LeftValue = null;
      RightValue = null;
      try {
        if (Expr.OpCode === 1) {
          Left = Expr.Left;
          while (Left.$class.ClassType() === $lt24) {
            SubBin = Left;
            if (SubBin.OpCode !== 1) break;
            Left = SubBin.Left;
          };
          LeftValue = this.Eval(Left,rtl.refSet(Flags));
          while (LeftValue !== null) {
            SubBin = Left.FParent;
            RightValue = this.Eval(SubBin.Right,rtl.refSet(Flags));
            if (RightValue === null) return Result;
            if (LeftValue.Kind === 13) {
              if (rtl.eqSet(rtl.intersectSet(rtl.createSet(0,1),Flags),rtl.createSet(0))) this.RaiseConstantExprExp(20210321205928,Expr.Left);
              Result = LeftValue;
              LeftValue = null;
              return Result;
            };
            if (RightValue.Kind === 13) {
              if (rtl.eqSet(rtl.intersectSet(rtl.createSet(0,1),Flags),rtl.createSet(0))) this.RaiseConstantExprExp(20210321205948,Expr.Right);
              Result = RightValue;
              RightValue = null;
              return Result;
            };
            Result = this.EvalBinaryAddExpr(SubBin,LeftValue,RightValue);
            $mod.ReleaseEvalValue({get: function () {
                return LeftValue;
              }, set: function (v) {
                LeftValue = v;
              }});
            $mod.ReleaseEvalValue({get: function () {
                return RightValue;
              }, set: function (v) {
                RightValue = v;
              }});
            if (SubBin === Expr) return Result;
            LeftValue = Result;
            Result = null;
            Left = SubBin;
          };
          return Result;
        };
        LeftValue = this.Eval(Expr.Left,rtl.refSet(Flags));
        if (LeftValue === null) return Result;
        RightValue = this.Eval(Expr.Right,rtl.refSet(Flags));
        if (RightValue === null) return Result;
        if (LeftValue.Kind === 13) {
          if (rtl.eqSet(rtl.intersectSet(rtl.createSet(0,1),Flags),rtl.createSet(0))) this.RaiseConstantExprExp(20181024134508,Expr.Left);
          Result = LeftValue;
          LeftValue = null;
          return Result;
        };
        if (RightValue.Kind === 13) {
          if (rtl.eqSet(rtl.intersectSet(rtl.createSet(0,1),Flags),rtl.createSet(0))) this.RaiseConstantExprExp(20181024134545,Expr.Right);
          Result = RightValue;
          RightValue = null;
          return Result;
        };
        var $tmp = Expr.Kind;
        if ($tmp === 7) {
          Result = this.EvalBinaryRangeExpr(Expr,LeftValue,RightValue)}
         else if ($tmp === 9) {
          var $tmp1 = Expr.OpCode;
          if ($tmp1 === 1) {
            Result = this.EvalBinaryAddExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 2) {
            Result = this.EvalBinarySubExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 3) {
            Result = this.EvalBinaryMulExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 4) {
            Result = this.EvalBinaryDivideExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 5) {
            Result = this.EvalBinaryDivExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 6) {
            Result = this.EvalBinaryModExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 7) {
            Result = this.EvalBinaryPowerExpr(Expr,LeftValue,RightValue)}
           else if (($tmp1 === 9) || ($tmp1 === 8)) {
            Result = this.EvalBinaryShiftExpr(Expr,LeftValue,RightValue)}
           else if (($tmp1 === 11) || ($tmp1 === 12) || ($tmp1 === 13)) {
            Result = this.EvalBinaryBoolOpExpr(Expr,LeftValue,RightValue)}
           else if (($tmp1 === 14) || ($tmp1 === 15)) {
            Result = this.EvalBinaryNEqualExpr(Expr,LeftValue,RightValue)}
           else if (($tmp1 === 16) || ($tmp1 === 17) || ($tmp1 === 18) || ($tmp1 === 19)) {
            Result = this.EvalBinaryLessGreaterExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 20) {
            Result = this.EvalBinaryInExpr(Expr,LeftValue,RightValue)}
           else if ($tmp1 === 23) {
            Result = this.EvalBinarySymmetricaldifferenceExpr(Expr,LeftValue,RightValue)}
           else {
            this.RaiseNotYetImplemented(20170530100823,Expr,"");
          };
        } else {
          this.RaiseNotYetImplemented(20170530100827,Expr,"");
        };
      } finally {
        $mod.ReleaseEvalValue({get: function () {
            return LeftValue;
          }, set: function (v) {
            LeftValue = v;
          }});
        $mod.ReleaseEvalValue({get: function () {
            return RightValue;
          }, set: function (v) {
            RightValue = v;
          }});
      };
      return Result;
    };
    this.EvalBinaryRangeExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var LeftInt = 0;
      var RightInt = 0;
      var $tmp = LeftValue.Kind;
      if ($tmp === 3) {
        if (RightValue.Kind !== 3) {
          this.RaiseRangeCheck(20170714133017,Expr.Right)}
         else {
          LeftInt = LeftValue.B + 0;
          RightInt = RightValue.B + 0;
          if (LeftInt > RightInt) this.RaiseMsg(20170714133540,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
          Result = $lt12.$create("CreateValue",[4,null,LeftInt,RightInt]);
          return Result;
        }}
       else if ($tmp === 4) {
        if (RightValue.Kind === 4) {
          LeftInt = LeftValue.Int;
          RightInt = RightValue.Int;
          if (LeftInt > RightInt) this.RaiseMsg(20170518222939,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
          Result = $lt12.$create("CreateValue",[2,null,LeftInt,RightInt]);
          return Result;
        } else if (RightValue.Kind === 5) {
          if (RightValue.UInt <= 9007199254740991) {
            if (LeftValue.Int > RightValue.UInt) this.RaiseMsg(20170519000235,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
            Result = $lt12.$create("CreateValue",[2,null,LeftValue.Int,RightValue.UInt]);
            return Result;
          } else if (LeftValue.Int < 0) {
            this.RaiseRangeCheck(20170522151629,Expr.Right)}
           else if (LeftValue.Int > RightValue.UInt) this.RaiseMsg(20170522151708,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
          Result = $lt13.$create("CreateValue",[LeftValue.Int,RightValue.UInt]);
          return Result;
        } else this.RaiseRangeCheck(20170518222812,Expr.Right)}
       else if ($tmp === 5) {
        if (RightValue.Kind === 4) {
          if (LeftValue.UInt > 9007199254740991) {
            if (RightValue.Int < 0) {
              this.RaiseRangeCheck(20170522152608,Expr.Right)}
             else if (LeftValue.UInt > RightValue.Int) this.RaiseMsg(20170522152648,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
            Result = $lt13.$create("CreateValue",[LeftValue.UInt,RightValue.Int]);
            return Result;
          } else if (LeftValue.UInt > RightValue.Int) this.RaiseMsg(20170522152804,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
          Result = $lt12.$create("CreateValue",[2,null,LeftValue.UInt,RightValue.Int]);
          return Result;
        } else if (RightValue.Kind === 5) {
          if (LeftValue.UInt > RightValue.UInt) this.RaiseMsg(20170519000240,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
          Result = $lt13.$create("CreateValue",[LeftValue.UInt,RightValue.UInt]);
          return Result;
        } else this.RaiseRangeCheck(20170522123106,Expr.Right)}
       else if ($tmp === 9) {
        if (RightValue.Kind !== 9) {
          this.RaiseRangeCheck(20170522153003,Expr.Right)}
         else if (LeftValue.ElType !== RightValue.ElType) {
          this.RaiseRangeCheck(20170522123241,Expr.Right);
        } else if (LeftValue.Index > RightValue.Index) {
          this.RaiseMsg(20170522123320,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right)}
         else {
          Result = $lt12.$create("CreateValue",[1,rtl.as(LeftValue.ElType,$lt21),LeftValue.Index,RightValue.Index]);
          return Result;
        }}
       else if ($tmp === 8) {
        LeftInt = this.StringToOrd(LeftValue,Expr.Left);
        if (RightValue.Kind in $mod.revkAllStrings) {
          RightInt = this.StringToOrd(RightValue,Expr.Right);
          if (LeftInt > RightInt) this.RaiseMsg(20170523151508,3065,rtl.getResStr($mod,"sHighRangeLimitLTLowRangeLimit"),[],Expr.Right);
          Result = $lt12.$create("CreateValue",[3,null,LeftInt,RightInt]);
          return Result;
        } else this.RaiseRangeCheck(20170522123106,Expr.Right);
      };
      return Result;
    };
    this.EvalBinaryAddExpr = function (Expr, LeftValue, RightValue) {
      var $Self = this;
      var Result = null;
      function IntAddUInt(i, u) {
        var Int = 0;
        var UInt = 0;
        if (i >= 0) {
          UInt = i + u;
          Result = $Self.CreateResEvalInt(UInt);
        } else if (u <= 9007199254740991) {
          Int = i + u;
          Result = $lt5.$create("CreateValue",[Int]);
        } else $Self.RaiseRangeCheck(20170601140523,Expr);
      };
      var Int = 0;
      var UInt = 0;
      var Flo = 0.0;
      var aCurrency = 0;
      var LeftSet = null;
      var RightSet = null;
      var i = 0;
      Result = null;
      try {
        var $tmp = LeftValue.Kind;
        if ($tmp === 4) {
          Int = rtl.rc(LeftValue.Int,-9007199254740991,9007199254740991);
          var $tmp1 = RightValue.Kind;
          if ($tmp1 === 4) {
            if ((Int > 0) && (RightValue.Int > 0)) {
              UInt = rtl.rc(rtl.oc(rtl.rc(Int,0,9007199254740991) + rtl.rc(RightValue.Int,0,9007199254740991)),0,9007199254740991);
              Result = this.CreateResEvalInt(UInt);
            } else {
              Int = rtl.rc(rtl.oc(Int + RightValue.Int),-9007199254740991,9007199254740991);
              Result = $lt5.$create("CreateValue",[Int]);
            }}
           else if ($tmp1 === 5) {
            IntAddUInt(Int,RightValue.UInt)}
           else if ($tmp1 === 6) {
            Result = $lt7.$create("CreateValue",[rtl.oc(Int + RightValue.FloatValue)])}
           else if ($tmp1 === 7) {
            Result = $lt8.$create("CreateValue",[rtl.oc((Int * 10000) + RightValue.Value)])}
           else {
            this.RaiseNotYetImplemented(20170525115537,Expr,"");
          };
        } else if ($tmp === 5) {
          UInt = rtl.rc(LeftValue.UInt,0,9007199254740991);
          var $tmp2 = RightValue.Kind;
          if ($tmp2 === 4) {
            IntAddUInt(UInt,RightValue.Int)}
           else if ($tmp2 === 5) {
            UInt = rtl.rc(rtl.oc(UInt + RightValue.UInt),0,9007199254740991);
            Result = $lt6.$create("CreateValue",[UInt]);
          } else if ($tmp2 === 6) {
            Result = $lt7.$create("CreateValue",[rtl.oc(UInt + RightValue.FloatValue)])}
           else if ($tmp2 === 7) {
            Result = $lt8.$create("CreateValue",[rtl.oc((UInt * 10000) + RightValue.Value)])}
           else {
            this.RaiseNotYetImplemented(20170601141031,Expr,"");
          };
        } else if ($tmp === 6) {
          Flo = LeftValue.FloatValue;
          var $tmp3 = RightValue.Kind;
          if ($tmp3 === 4) {
            Result = $lt7.$create("CreateValue",[rtl.oc(Flo + RightValue.Int)])}
           else if ($tmp3 === 5) {
            Result = $lt7.$create("CreateValue",[rtl.oc(Flo + RightValue.UInt)])}
           else if ($tmp3 === 6) {
            Result = $lt7.$create("CreateValue",[Flo + RightValue.FloatValue])}
           else if ($tmp3 === 7) {
            Result = $lt8.$create("CreateValue",[rtl.oc((Flo * 10000) + RightValue.Value)])}
           else {
            this.RaiseNotYetImplemented(20170711145637,Expr,"");
          };
        } else if ($tmp === 7) {
          aCurrency = rtl.rc(LeftValue.Value,-922337203685477,922337203685477);
          var $tmp4 = RightValue.Kind;
          if ($tmp4 === 4) {
            Result = $lt7.$create("CreateValue",[rtl.oc(aCurrency + (RightValue.Int * 10000)) / 10000])}
           else if ($tmp4 === 5) {
            Result = $lt7.$create("CreateValue",[rtl.oc(aCurrency + (RightValue.UInt * 10000)) / 10000])}
           else if ($tmp4 === 6) {
            Result = $lt7.$create("CreateValue",[rtl.oc(aCurrency + (RightValue.FloatValue * 10000)) / 10000])}
           else if ($tmp4 === 7) {
            Result = $lt8.$create("CreateValue",[rtl.oc(aCurrency + RightValue.Value)])}
           else {
            this.RaiseNotYetImplemented(20180421163819,Expr,"");
          };
        } else if ($tmp === 8) {
          Result = this.EvalStringAddExpr(Expr,Expr.Left,Expr.Right,LeftValue,RightValue)}
         else if ($tmp === 12) {
          var $tmp5 = RightValue.Kind;
          if ($tmp5 === 12) {
            LeftSet = LeftValue;
            RightSet = RightValue;
            if (LeftSet.ElKind === 0) {
              Result = RightSet.Clone()}
             else if (RightSet.ElKind === 0) {
              Result = LeftSet.Clone()}
             else {
              Result = RightSet.Clone();
              for (var $l = 0, $end = rtl.oc(rtl.length(LeftSet.Ranges) - 1); $l <= $end; $l++) {
                i = $l;
                Int = rtl.rc(rtl.rcArrR(LeftSet.Ranges,i).RangeStart,-9007199254740991,9007199254740991);
                while (Int <= rtl.rcArrR(LeftSet.Ranges,i).RangeEnd) {
                  Result.Add(Int,Int);
                  Int += 1;
                };
              };
            };
          } else {
            this.RaiseNotYetImplemented(20170714114055,Expr,"");
          };
        } else {
          this.RaiseNotYetImplemented(20170525115548,Expr,"");
        };
      } catch ($e) {
        if ($lt25.isPrototypeOf($e)) {
          this.RaiseOverflowArithmetic(20170601140130,Expr)}
         else if ($lt26.isPrototypeOf($e)) {
          this.RaiseRangeCheck(20170601140132,Expr)}
         else throw $e
      };
      return Result;
    };
    this.EvalBinarySubExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var Int = 0;
      var UInt = 0;
      var Flo = 0.0;
      var aCurrency = 0;
      var LeftSet = null;
      var RightSet = null;
      var i = 0;
      Result = null;
      var $tmp = LeftValue.Kind;
      if ($tmp === 4) {
        Int = rtl.rc(LeftValue.Int,-9007199254740991,9007199254740991);
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 4) {
          try {
            Int = rtl.rc(Int - RightValue.Int,-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              if ((Int > 0) && (RightValue.Int < 0)) {
                UInt = rtl.rc(rtl.rc(Int,0,9007199254740991) + rtl.rc(-RightValue.Int,0,9007199254740991),0,9007199254740991);
                Result = this.CreateResEvalInt(UInt);
              } else this.RaiseOverflowArithmetic(20170525230247,Expr);
            } else throw $e
          }}
         else if ($tmp1 === 5) {
          try {
            Int = rtl.rc(Int - RightValue.UInt,-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151201,Expr);
            } else throw $e
          }}
         else if ($tmp1 === 6) {
          try {
            Flo = Int - RightValue.FloatValue;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151313,Expr);
            } else throw $e
          }}
         else if ($tmp1 === 7) {
          try {
            aCurrency = rtl.rc(rtl.rc(Int * 10000,-922337203685477,922337203685477) - RightValue.Value,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164011,Expr);
            } else throw $e
          }}
         else {
          this.RaiseNotYetImplemented(20170525230028,Expr,"");
        };
      } else if ($tmp === 5) {
        UInt = rtl.rc(LeftValue.UInt,0,9007199254740991);
        var $tmp2 = RightValue.Kind;
        if ($tmp2 === 4) {
          try {
            UInt = rtl.rc(UInt - RightValue.Int,0,9007199254740991);
            Result = $lt6.$create("CreateValue",[UInt]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151405,Expr);
            } else throw $e
          }}
         else if ($tmp2 === 5) {
          try {
            UInt = rtl.rc(UInt - RightValue.UInt,0,9007199254740991);
            Result = $lt6.$create("CreateValue",[UInt]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151419,Expr);
            } else throw $e
          }}
         else if ($tmp2 === 6) {
          try {
            Flo = UInt - RightValue.FloatValue;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151428,Expr);
            } else throw $e
          }}
         else if ($tmp2 === 7) {
          try {
            aCurrency = rtl.rc(rtl.rc(UInt * 10000,-922337203685477,922337203685477) - RightValue.Value,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164005,Expr);
            } else throw $e
          }}
         else {
          this.RaiseNotYetImplemented(20170711151435,Expr,"");
        };
      } else if ($tmp === 6) {
        Flo = LeftValue.FloatValue;
        var $tmp3 = RightValue.Kind;
        if ($tmp3 === 4) {
          try {
            Flo = Flo - RightValue.Int;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151519,Expr);
            } else throw $e
          }}
         else if ($tmp3 === 5) {
          try {
            Flo = Flo - RightValue.UInt;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151538,Expr);
            } else throw $e
          }}
         else if ($tmp3 === 6) {
          try {
            Flo = Flo - RightValue.FloatValue;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711151552,Expr);
            } else throw $e
          }}
         else if ($tmp3 === 7) {
          try {
            aCurrency = rtl.rc((Flo * 10000) - RightValue.Value,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164054,Expr);
            } else throw $e
          }}
         else {
          this.RaiseNotYetImplemented(20170711151600,Expr,"");
        };
      } else if ($tmp === 7) {
        aCurrency = rtl.rc(LeftValue.Value,-922337203685477,922337203685477);
        var $tmp4 = RightValue.Kind;
        if ($tmp4 === 4) {
          try {
            aCurrency = rtl.rc(aCurrency - (RightValue.Int * 10000),-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164200,Expr);
            } else throw $e
          }}
         else if ($tmp4 === 5) {
          try {
            aCurrency = rtl.rc(aCurrency - (RightValue.UInt * 10000),-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164218,Expr);
            } else throw $e
          }}
         else if ($tmp4 === 6) {
          try {
            aCurrency = rtl.rc(aCurrency - (RightValue.FloatValue * 10000),-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164250,Expr);
            } else throw $e
          }}
         else if ($tmp4 === 7) {
          try {
            aCurrency = rtl.rc(aCurrency - RightValue.Value,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164258,Expr);
            } else throw $e
          }}
         else {
          this.RaiseNotYetImplemented(20180421164312,Expr,"");
        };
      } else if ($tmp === 12) {
        var $tmp5 = RightValue.Kind;
        if ($tmp5 === 12) {
          LeftSet = LeftValue;
          RightSet = RightValue;
          if (LeftSet.ElKind === 0) {
            Result = $lt14.$create("CreateEmptySameKind",[RightSet])}
           else {
            Result = $lt14.$create("CreateEmptySameKind",[LeftSet]);
            for (var $l = 0, $end = rtl.length(LeftSet.Ranges) - 1; $l <= $end; $l++) {
              i = $l;
              Int = rtl.rc(rtl.rcArrR(LeftSet.Ranges,i).RangeStart,-9007199254740991,9007199254740991);
              while (Int <= rtl.rcArrR(LeftSet.Ranges,i).RangeEnd) {
                if (RightSet.IndexOfRange(Int,false) < 0) Result.Add(Int,Int);
                Int += 1;
              };
            };
          };
        } else {
          this.RaiseNotYetImplemented(20170714114101,Expr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170525225946,Expr,"");
      };
      return Result;
    };
    this.EvalBinaryMulExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var Int = 0;
      var UInt = 0;
      var Flo = 0.0;
      var aCurrency = 0;
      var LeftSet = null;
      var RightSet = null;
      var i = 0;
      Result = null;
      var $tmp = LeftValue.Kind;
      if ($tmp === 4) {
        Int = rtl.rc(LeftValue.Int,-9007199254740991,9007199254740991);
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 4) {
          try {
            Int = rtl.rc(Int * RightValue.Int,-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              if ((Int > 0) && (RightValue.Int > 0)) {
                try {
                  UInt = rtl.rc(rtl.rc(Int,0,9007199254740991) * rtl.rc(RightValue.Int,0,9007199254740991),0,9007199254740991);
                  Result = this.CreateResEvalInt(UInt);
                } catch ($e) {
                  if ($lt25.isPrototypeOf($e)) {
                    var E = $e;
                    this.RaiseOverflowArithmetic(20170530101616,Expr);
                  } else throw $e
                }}
               else this.RaiseOverflowArithmetic(20170525230247,Expr);
            } else throw $e
          }}
         else if ($tmp1 === 5) {
          try {
            Int = rtl.rc(Int * RightValue.UInt,-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170711164445,Expr);
          }}
         else if ($tmp1 === 6) {
          try {
            Flo = Int * RightValue.FloatValue;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170711164541,Expr);
          }}
         else if ($tmp1 === 7) {
          try {
            aCurrency = rtl.rc(Int * RightValue.Value,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421164426,Expr);
          }}
         else {
          this.RaiseNotYetImplemented(20170525230028,Expr,"");
        };
      } else if ($tmp === 5) {
        UInt = rtl.rc(LeftValue.UInt,0,9007199254740991);
        var $tmp2 = RightValue.Kind;
        if ($tmp2 === 4) {
          if (RightValue.Int >= 0) {
            try {
              UInt = rtl.rc(UInt * RightValue.Int,0,9007199254740991);
              Result = $lt6.$create("CreateValue",[UInt]);
            } catch ($e) {
              if ($lt25.isPrototypeOf($e)) {
                var E = $e;
                this.RaiseOverflowArithmetic(20170711164714,Expr);
              } else throw $e
            }}
           else try {
            Int = rtl.rc(UInt * RightValue.Int,-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711164736,Expr);
            } else throw $e
          }}
         else if ($tmp2 === 5) {
          try {
            UInt = rtl.rc(UInt * RightValue.UInt,0,9007199254740991);
            Result = $lt6.$create("CreateValue",[UInt]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170711164751,Expr);
          }}
         else if ($tmp2 === 6) {
          try {
            Flo = UInt * RightValue.FloatValue;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170711164800,Expr);
          }}
         else if ($tmp2 === 7) {
          try {
            aCurrency = rtl.rc(UInt * RightValue.Value,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421164500,Expr);
          }}
         else {
          this.RaiseNotYetImplemented(20170711164810,Expr,"");
        };
      } else if ($tmp === 6) {
        Flo = LeftValue.FloatValue;
        var $tmp3 = RightValue.Kind;
        if ($tmp3 === 4) {
          try {
            Flo = Flo * RightValue.Int;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20170711164920,Expr);
            } else throw $e
          }}
         else if ($tmp3 === 5) {
          try {
            Flo = Flo * RightValue.UInt;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170711164940,Expr);
          }}
         else if ($tmp3 === 6) {
          try {
            Flo = Flo * RightValue.FloatValue;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170711164955,Expr);
          }}
         else if ($tmp3 === 7) {
          try {
            Flo = (Flo * RightValue.Value) / 10000;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421164542,Expr);
          }}
         else {
          this.RaiseNotYetImplemented(20170711165004,Expr,"");
        };
      } else if ($tmp === 7) {
        aCurrency = rtl.rc(LeftValue.Value,-922337203685477,922337203685477);
        var $tmp4 = RightValue.Kind;
        if ($tmp4 === 4) {
          try {
            aCurrency = rtl.rc(aCurrency * RightValue.Int,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            if ($lt25.isPrototypeOf($e)) {
              var E = $e;
              this.RaiseOverflowArithmetic(20180421164636,Expr);
            } else throw $e
          }}
         else if ($tmp4 === 5) {
          try {
            aCurrency = rtl.rc(aCurrency * RightValue.UInt,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421164654,Expr);
          }}
         else if ($tmp4 === 6) {
          try {
            Flo = (aCurrency * RightValue.FloatValue) / 10000;
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421164718,Expr);
          }}
         else if ($tmp4 === 7) {
          try {
            aCurrency = rtl.rc((aCurrency * RightValue.Value) / 10000,-922337203685477,922337203685477);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421164806,Expr);
          }}
         else {
          this.RaiseNotYetImplemented(20180421164817,Expr,"");
        };
      } else if ($tmp === 12) {
        var $tmp5 = RightValue.Kind;
        if ($tmp5 === 12) {
          LeftSet = LeftValue;
          RightSet = RightValue;
          if (LeftSet.ElKind === 0) {
            Result = $lt14.$create("CreateEmptySameKind",[RightSet])}
           else {
            Result = $lt14.$create("CreateEmptySameKind",[LeftSet]);
            for (var $l = 0, $end = rtl.length(LeftSet.Ranges) - 1; $l <= $end; $l++) {
              i = $l;
              Int = rtl.rc(rtl.rcArrR(LeftSet.Ranges,i).RangeStart,-9007199254740991,9007199254740991);
              while (Int <= rtl.rcArrR(LeftSet.Ranges,i).RangeEnd) {
                if (RightSet.IndexOfRange(Int,false) >= 0) Result.Add(Int,Int);
                Int += 1;
              };
            };
          };
        } else {
          this.RaiseNotYetImplemented(20170714110420,Expr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170525225946,Expr,"");
      };
      return Result;
    };
    this.EvalBinaryDivideExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var Int = 0;
      var UInt = 0;
      var Flo = 0.0;
      var aCurrency = 0;
      Result = null;
      Flo = 0.0;
      var $tmp = LeftValue.Kind;
      if ($tmp === 4) {
        Int = rtl.rc(LeftValue.Int,-9007199254740991,9007199254740991);
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 4) {
          if (RightValue.Int === 0) {
            Flo = this.DivideByZero(Math.sign(Int),Math.sign(RightValue.Int))}
           else Flo = Int / RightValue.Int;
        } else if ($tmp1 === 5) {
          if (RightValue.UInt === 0) {
            Flo = this.DivideByZero(Math.sign(Int),$mod.Sign(RightValue.UInt))}
           else Flo = Int / RightValue.UInt}
         else if ($tmp1 === 6) {
          try {
            Flo = Int / RightValue.FloatValue;
          } catch ($e) {
            Flo = this.DivideByZero(Math.sign(Int),Math.sign(RightValue.FloatValue));
          }}
         else if ($tmp1 === 7) {
          try {
            aCurrency = rtl.rc(rtl.trunc(rtl.trunc(Int / RightValue.Value) * 10000),-922337203685477,922337203685477);
          } catch ($e) {
            this.RaiseMsg(20180421164915,3069,rtl.getResStr($mod,"sDivByZero"),[],Expr);
          };
          Result = $lt8.$create("CreateValue",[aCurrency]);
          return Result;
        } else {
          this.RaiseNotYetImplemented(20170711144057,Expr,"");
        };
      } else if ($tmp === 5) {
        UInt = rtl.rc(LeftValue.UInt,0,9007199254740991);
        var $tmp2 = RightValue.Kind;
        if ($tmp2 === 4) {
          if (RightValue.Int === 0) {
            Flo = this.DivideByZero($mod.Sign(UInt),Math.sign(RightValue.Int))}
           else Flo = UInt / RightValue.Int}
         else if ($tmp2 === 5) {
          if (RightValue.UInt === 0) {
            Flo = this.DivideByZero($mod.Sign(UInt),$mod.Sign(RightValue.UInt))}
           else Flo = UInt / RightValue.UInt}
         else if ($tmp2 === 6) {
          try {
            Flo = UInt / RightValue.FloatValue;
          } catch ($e) {
            Flo = this.DivideByZero($mod.Sign(UInt),Math.sign(RightValue.FloatValue));
          }}
         else if ($tmp2 === 7) {
          try {
            aCurrency = rtl.rc(rtl.trunc(rtl.trunc(UInt / RightValue.Value) * 10000),-922337203685477,922337203685477);
          } catch ($e) {
            this.RaiseMsg(20180421164959,3069,rtl.getResStr($mod,"sDivByZero"),[],Expr);
          };
          Result = $lt8.$create("CreateValue",[aCurrency]);
          return Result;
        } else {
          this.RaiseNotYetImplemented(20170711144239,Expr,"");
        };
      } else if ($tmp === 6) {
        Flo = LeftValue.FloatValue;
        var $tmp3 = RightValue.Kind;
        if ($tmp3 === 4) {
          if (RightValue.Int === 0) {
            Flo = this.DivideByZero(Math.sign(Flo),Math.sign(RightValue.Int))}
           else Flo = Flo / RightValue.Int}
         else if ($tmp3 === 5) {
          if (RightValue.UInt === 0) {
            Flo = this.DivideByZero(Math.sign(Flo),$mod.Sign(RightValue.UInt))}
           else Flo = Flo / RightValue.UInt}
         else if ($tmp3 === 6) {
          try {
            Flo = Flo / RightValue.FloatValue;
          } catch ($e) {
            Flo = this.DivideByZero(Math.sign(Flo),Math.sign(RightValue.FloatValue));
          }}
         else if ($tmp3 === 7) {
          try {
            aCurrency = rtl.rc(rtl.trunc(Flo / RightValue.Value),-922337203685477,922337203685477);
          } catch ($e) {
            this.RaiseMsg(20180421165058,3069,rtl.getResStr($mod,"sDivByZero"),[],Expr);
          };
          Result = $lt8.$create("CreateValue",[aCurrency]);
        } else {
          this.RaiseNotYetImplemented(20170711145050,Expr,"");
        };
      } else if ($tmp === 7) {
        aCurrency = rtl.rc(LeftValue.Value,-922337203685477,922337203685477);
        var $tmp4 = RightValue.Kind;
        if ($tmp4 === 4) {
          if (RightValue.Int === 0) {
            this.RaiseMsg(20210515133307,3069,rtl.getResStr($mod,"sDivByZero"),[],Expr)}
           else aCurrency = rtl.rc(rtl.trunc(aCurrency / RightValue.Int),-922337203685477,922337203685477)}
         else if ($tmp4 === 5) {
          if (RightValue.UInt === 0) {
            this.RaiseMsg(20210515133318,3069,rtl.getResStr($mod,"sDivByZero"),[],Expr)}
           else aCurrency = rtl.rc(rtl.trunc(aCurrency / RightValue.UInt),-922337203685477,922337203685477)}
         else if ($tmp4 === 6) {
          try {
            aCurrency = rtl.rc(rtl.trunc(aCurrency / RightValue.FloatValue),-922337203685477,922337203685477);
          } catch ($e) {
            this.RaiseMsg(20180421165237,3069,rtl.getResStr($mod,"sDivByZero"),[],Expr);
          }}
         else if ($tmp4 === 7) {
          try {
            aCurrency = rtl.rc(rtl.trunc((aCurrency / RightValue.Value) * 10000),-922337203685477,922337203685477);
          } catch ($e) {
            this.RaiseMsg(20180421165252,3069,rtl.getResStr($mod,"sDivByZero"),[],Expr);
          }}
         else {
          this.RaiseNotYetImplemented(20180421165301,Expr,"");
        };
        Result = $lt8.$create("CreateValue",[aCurrency]);
        return Result;
      } else {
        this.RaiseNotYetImplemented(20170530102352,Expr,"");
      };
      Result = $lt7.$create("CreateValue",[Flo]);
      return Result;
    };
    this.EvalBinaryDivExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var Int = 0;
      var UInt = 0;
      Result = null;
      var $tmp = LeftValue.Kind;
      if ($tmp === 4) {
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 4) {
          if (RightValue.Int === 0) {
            this.RaiseDivByZero(20170530102619,Expr)}
           else {
            Int = rtl.rc(rtl.trunc(LeftValue.Int / RightValue.Int),-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          }}
         else if ($tmp1 === 5) {
          if (RightValue.UInt === 0) {
            this.RaiseDivByZero(20170530102745,Expr)}
           else {
            if (RightValue.UInt > 9007199254740991) {
              Int = 0}
             else Int = rtl.rc(rtl.trunc(LeftValue.Int / RightValue.UInt),-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          }}
         else {
          this.RaiseNotYetImplemented(20170530102403,Expr,"");
        };
      } else if ($tmp === 5) {
        var $tmp2 = RightValue.Kind;
        if ($tmp2 === 4) {
          if (RightValue.Int === 0) {
            this.RaiseDivByZero(20170530103026,Expr)}
           else if (LeftValue.UInt <= 9007199254740991) {
            Int = rtl.rc(rtl.trunc(LeftValue.UInt / RightValue.Int),-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          } else if (RightValue.Int > 0) {
            UInt = rtl.rc(rtl.trunc(LeftValue.UInt / rtl.rc(RightValue.Int,0,9007199254740991)),0,9007199254740991);
            Result = this.CreateResEvalInt(UInt);
          } else this.RaiseOverflowArithmetic(20170530104315,Expr)}
         else if ($tmp2 === 5) {
          if (RightValue.Int === 0) {
            this.RaiseDivByZero(20170530103026,Expr)}
           else {
            UInt = rtl.rc(rtl.trunc(LeftValue.UInt / RightValue.UInt),0,9007199254740991);
            Result = this.CreateResEvalInt(UInt);
          }}
         else {
          this.RaiseNotYetImplemented(20170530102403,Expr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170530102352,Expr,"");
      };
      return Result;
    };
    this.EvalBinaryModExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var Int = 0;
      var UInt = 0;
      Result = null;
      var $tmp = LeftValue.Kind;
      if ($tmp === 4) {
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 4) {
          if (RightValue.Int === 0) {
            this.RaiseDivByZero(20170530104638,Expr)}
           else {
            Int = rtl.rc(LeftValue.Int % RightValue.Int,-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          }}
         else if ($tmp1 === 5) {
          if (RightValue.UInt === 0) {
            this.RaiseDivByZero(20170530104758,Expr)}
           else {
            if (LeftValue.Int < 0) {
              UInt = rtl.rc(rtl.rc(-LeftValue.Int,0,9007199254740991) % RightValue.UInt,0,9007199254740991)}
             else UInt = rtl.rc(rtl.rc(LeftValue.Int,0,9007199254740991) % RightValue.UInt,0,9007199254740991);
            Result = this.CreateResEvalInt(UInt);
          }}
         else {
          this.RaiseNotYetImplemented(20170530110057,Expr,"");
        };
      } else if ($tmp === 5) {
        var $tmp2 = RightValue.Kind;
        if ($tmp2 === 4) {
          if (RightValue.Int === 0) {
            this.RaiseDivByZero(20170530110110,Expr)}
           else if (LeftValue.UInt <= 9007199254740991) {
            Int = rtl.rc(LeftValue.UInt % RightValue.Int,-9007199254740991,9007199254740991);
            Result = $lt5.$create("CreateValue",[Int]);
          } else if (RightValue.Int > 0) {
            UInt = rtl.rc(LeftValue.UInt % rtl.rc(RightValue.Int,0,9007199254740991),0,9007199254740991);
            Result = this.CreateResEvalInt(UInt);
          } else this.RaiseOverflowArithmetic(20170530110602,Expr)}
         else if ($tmp2 === 5) {
          if (RightValue.Int === 0) {
            this.RaiseDivByZero(20170530110609,Expr)}
           else {
            UInt = rtl.rc(LeftValue.UInt % RightValue.UInt,0,9007199254740991);
            Result = this.CreateResEvalInt(UInt);
          }}
         else {
          this.RaiseNotYetImplemented(20170530110633,Expr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170530110644,Expr,"");
      };
      return Result;
    };
    this.EvalBinaryPowerExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var Int = 0;
      var Flo = 0.0;
      var aCurrency = 0;
      Result = null;
      var $tmp = LeftValue.Kind;
      if ($tmp === 4) {
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 4) {
          try {
            Int = $lp2(Math.pow(LeftValue.Int,RightValue.Int));
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170530210533,Expr);
          }}
         else if ($tmp1 === 5) {
          try {
            Int = $lp2(Math.pow(LeftValue.Int,RightValue.UInt));
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170530211028,Expr);
          }}
         else if ($tmp1 === 6) {
          try {
            Flo = Math.pow(LeftValue.Int,RightValue.FloatValue);
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170816154223,Expr);
          }}
         else if ($tmp1 === 7) {
          try {
            Flo = Math.pow(LeftValue.Int,RightValue.Value / 10000);
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421165906,Expr);
          }}
         else {
          this.RaiseNotYetImplemented(20170530205640,Expr,"");
        };
      } else if ($tmp === 5) {
        var $tmp2 = RightValue.Kind;
        if ($tmp2 === 4) {
          try {
            Int = $lp2(Math.pow(LeftValue.UInt,RightValue.Int));
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170530211102,Expr);
          }}
         else if ($tmp2 === 5) {
          try {
            Int = $lp2(Math.pow(LeftValue.UInt,RightValue.UInt));
            Result = $lt5.$create("CreateValue",[Int]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170530211121,Expr);
          }}
         else if ($tmp2 === 6) {
          try {
            Flo = Math.pow(LeftValue.UInt,RightValue.FloatValue);
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170816154241,Expr);
          }}
         else if ($tmp2 === 7) {
          try {
            Flo = Math.pow(LeftValue.UInt,RightValue.Value / 10000);
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421165948,Expr);
          }}
         else {
          this.RaiseNotYetImplemented(20170530211140,Expr,"");
        };
      } else if ($tmp === 6) {
        var $tmp3 = RightValue.Kind;
        if ($tmp3 === 4) {
          try {
            Flo = Math.pow(LeftValue.FloatValue,RightValue.Int);
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170816153950,Expr);
          }}
         else if ($tmp3 === 5) {
          try {
            Flo = Math.pow(LeftValue.FloatValue,RightValue.UInt);
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170816154012,Expr);
          }}
         else if ($tmp3 === 6) {
          try {
            Flo = Math.pow(LeftValue.FloatValue,RightValue.FloatValue);
            Result = $lt7.$create("CreateValue",[Flo]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20170816154012,Expr);
          }}
         else if ($tmp3 === 7) try {
          Flo = Math.pow(LeftValue.FloatValue,RightValue.Value / 10000);
          Result = $lt7.$create("CreateValue",[Flo]);
        } catch ($e) {
          this.RaiseOverflowArithmetic(20180421170016,Expr);
        };
      } else if ($tmp === 7) {
        var $tmp4 = RightValue.Kind;
        if ($tmp4 === 4) {
          try {
            aCurrency = rtl.trunc(Math.pow(LeftValue.Value / 10000,RightValue.Int) * 10000);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421170235,Expr);
          }}
         else if ($tmp4 === 5) {
          try {
            aCurrency = rtl.trunc(Math.pow(LeftValue.Value / 10000,RightValue.UInt) * 10000);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421170240,Expr);
          }}
         else if ($tmp4 === 6) {
          try {
            aCurrency = rtl.trunc(Math.pow(LeftValue.Value / 10000,RightValue.FloatValue) * 10000);
            Result = $lt8.$create("CreateValue",[aCurrency]);
          } catch ($e) {
            this.RaiseOverflowArithmetic(20180421170254,Expr);
          }}
         else if ($tmp4 === 7) try {
          aCurrency = rtl.trunc(Math.pow(LeftValue.Value / 10000,RightValue.Value / 10000) * 10000);
          Result = $lt8.$create("CreateValue",[aCurrency]);
        } catch ($e) {
          this.RaiseOverflowArithmetic(20180421170311,Expr);
        };
      } else {
        this.RaiseNotYetImplemented(20170816153813,Expr,"");
      };
      return Result;
    };
    this.EvalBinaryShiftExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var Int = 0;
      var UInt = 0;
      var ShiftLeft = false;
      Result = null;
      ShiftLeft = Expr.OpCode === 9;
      var $tmp = LeftValue.Kind;
      if ($tmp === 4) {
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 4) {
          if ((RightValue.Int < 0) || (RightValue.Int > 63)) this.EmitRangeCheckConst$1(20170530203840,$lp(RightValue.Int),0,63,Expr,2);
          if (ShiftLeft) {
            Int = rtl.rc(rtl.shl(LeftValue.Int,rtl.rc(RightValue.Int,0,255)),-9007199254740991,9007199254740991)}
           else Int = rtl.rc(rtl.shr(LeftValue.Int,rtl.rc(RightValue.Int,0,255)),-9007199254740991,9007199254740991);
          Result = $lt5.$create("CreateValue",[Int]);
        } else if ($tmp1 === 5) {
          if (RightValue.UInt > 63) this.EmitRangeCheckConst$1(20170530203840,$lp(RightValue.UInt),0,63,Expr,2);
          if (ShiftLeft) {
            Int = rtl.rc(rtl.shl(LeftValue.Int,rtl.rc(RightValue.UInt,0,255)),-9007199254740991,9007199254740991)}
           else Int = rtl.rc(rtl.shr(LeftValue.Int,rtl.rc(RightValue.UInt,0,255)),-9007199254740991,9007199254740991);
          Result = $lt5.$create("CreateValue",[Int]);
        } else {
          this.RaiseNotYetImplemented(20170530205332,Expr,"");
        };
      } else if ($tmp === 5) {
        var $tmp2 = RightValue.Kind;
        if ($tmp2 === 4) {
          if ((RightValue.Int < 0) || (RightValue.Int > 63)) this.EmitRangeCheckConst$1(20170530205414,$lp(RightValue.Int),0,63,Expr,2);
          if (ShiftLeft) {
            UInt = rtl.rc(rtl.shl(LeftValue.UInt,rtl.rc(RightValue.Int,0,255)),0,9007199254740991)}
           else UInt = rtl.rc(rtl.shr(LeftValue.UInt,rtl.rc(RightValue.Int,0,255)),0,9007199254740991);
          Result = this.CreateResEvalInt(UInt);
        } else if ($tmp2 === 5) {
          if (RightValue.UInt > 63) this.EmitRangeCheckConst$1(20170530205601,$lp(RightValue.UInt),0,63,Expr,2);
          if (ShiftLeft) {
            UInt = rtl.rc(rtl.shl(LeftValue.UInt,rtl.rc(RightValue.UInt,0,255)),0,9007199254740991)}
           else UInt = rtl.rc(rtl.shr(LeftValue.UInt,rtl.rc(RightValue.UInt,0,255)),0,9007199254740991);
          Result = this.CreateResEvalInt(UInt);
        } else {
          this.RaiseNotYetImplemented(20170530205640,Expr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170530205646,Expr,"");
      };
      return Result;
    };
    this.EvalBinaryBoolOpExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      Result = null;
      var $tmp = LeftValue.Kind;
      if ($tmp === 3) {
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 3) {
          Result = $lt3.$create("Create$1");
          var $tmp2 = Expr.OpCode;
          if ($tmp2 === 11) {
            Result.B = LeftValue.B && RightValue.B}
           else if ($tmp2 === 12) {
            Result.B = LeftValue.B || RightValue.B}
           else if ($tmp2 === 13) Result.B = LeftValue.B ^ RightValue.B;
        } else {
          this.RaiseNotYetImplemented(20170531011502,Expr,"");
        };
      } else if ($tmp === 4) {
        var $tmp3 = RightValue.Kind;
        if ($tmp3 === 4) {
          Result = $lt5.$create("Create$1");
          var $tmp4 = Expr.OpCode;
          if ($tmp4 === 11) {
            Result.Int = rtl.rc(rtl.and(LeftValue.Int,RightValue.Int),-9007199254740991,9007199254740991)}
           else if ($tmp4 === 12) {
            Result.Int = rtl.rc(rtl.or(LeftValue.Int,RightValue.Int),-9007199254740991,9007199254740991)}
           else if ($tmp4 === 13) Result.Int = rtl.rc(rtl.xor(LeftValue.Int,RightValue.Int),-9007199254740991,9007199254740991);
        } else {
          this.RaiseNotYetImplemented(20170530211140,Expr,"");
        };
      } else if ($tmp === 5) {
        var $tmp5 = RightValue.Kind;
        if ($tmp5 === 5) {
          Result = $lt6.$create("Create$1");
          var $tmp6 = Expr.OpCode;
          if ($tmp6 === 11) {
            Result.UInt = rtl.rc(rtl.and(LeftValue.UInt,RightValue.UInt),0,9007199254740991)}
           else if ($tmp6 === 12) {
            Result.UInt = rtl.rc(rtl.or(LeftValue.UInt,RightValue.UInt),0,9007199254740991)}
           else if ($tmp6 === 13) Result.UInt = rtl.rc(rtl.xor(LeftValue.UInt,RightValue.UInt),0,9007199254740991);
        } else {
          this.RaiseNotYetImplemented(20170530211140,Expr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170530205938,Expr,"");
      };
      return Result;
    };
    this.EvalBinaryNEqualExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var UInt = 0;
      var LeftSet = null;
      var RightSet = null;
      var i = 0;
      Result = $lt3.$create("Create$1");
      try {
        var $tmp = LeftValue.Kind;
        if ($tmp === 3) {
          var $tmp1 = RightValue.Kind;
          if ($tmp1 === 3) {
            Result.B = LeftValue.B === RightValue.B}
           else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170531011937,Expr,"");
          };
        } else if ($tmp === 4) {
          var $tmp2 = RightValue.Kind;
          if ($tmp2 === 4) {
            Result.B = LeftValue.Int === RightValue.Int}
           else if ($tmp2 === 5) {
            Result.B = LeftValue.Int === RightValue.UInt}
           else if ($tmp2 === 6) {
            Result.B = LeftValue.Int === RightValue.FloatValue}
           else if ($tmp2 === 7) {
            Result.B = (LeftValue.Int * 10000) === RightValue.Value}
           else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170531012412,Expr,"");
          };
        } else if ($tmp === 5) {
          UInt = LeftValue.UInt;
          var $tmp3 = RightValue.Kind;
          if ($tmp3 === 4) {
            Result.B = (UInt <= 9007199254740991) && (UInt === RightValue.Int)}
           else if ($tmp3 === 5) {
            Result.B = UInt === RightValue.UInt}
           else if ($tmp3 === 6) {
            Result.B = UInt === RightValue.FloatValue}
           else if ($tmp3 === 7) {
            Result.B = (UInt * 10000) === RightValue.Value}
           else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170601122803,Expr,"");
          };
        } else if ($tmp === 6) {
          var $tmp4 = RightValue.Kind;
          if ($tmp4 === 4) {
            Result.B = LeftValue.FloatValue === RightValue.Int}
           else if ($tmp4 === 5) {
            Result.B = LeftValue.FloatValue === RightValue.UInt}
           else if ($tmp4 === 6) {
            Result.B = LeftValue.FloatValue === RightValue.FloatValue}
           else if ($tmp4 === 7) {
            Result.B = (LeftValue.FloatValue * 10000) === RightValue.Value}
           else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170601122806,Expr,"");
          };
        } else if ($tmp === 7) {
          var $tmp5 = RightValue.Kind;
          if ($tmp5 === 4) {
            Result.B = LeftValue.Value === (RightValue.Int * 10000)}
           else if ($tmp5 === 5) {
            Result.B = LeftValue.Value === (RightValue.UInt * 10000)}
           else if ($tmp5 === 6) {
            Result.B = LeftValue.Value === (RightValue.FloatValue * 10000)}
           else if ($tmp5 === 7) {
            Result.B = LeftValue.Value === RightValue.Value}
           else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20180421165438,Expr,"");
          };
        } else if ($tmp === 8) {
          var $tmp6 = RightValue.Kind;
          if ($tmp6 === 8) {
            Result.B = LeftValue.S === RightValue.S}
           else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170711175409,Expr,"");
          };
        } else if ($tmp === 12) {
          var $tmp7 = RightValue.Kind;
          if ($tmp7 === 12) {
            LeftSet = LeftValue;
            RightSet = RightValue;
            if (LeftSet.ElKind === 0) {
              Result.B = rtl.length(RightSet.Ranges) === 0}
             else if (RightSet.ElKind === 0) {
              Result.B = rtl.length(LeftSet.Ranges) === 0}
             else if (rtl.length(LeftSet.Ranges) !== rtl.length(RightSet.Ranges)) {
              Result.B = false}
             else {
              Result.B = true;
              for (var $l = 0, $end = rtl.length(LeftSet.Ranges) - 1; $l <= $end; $l++) {
                i = $l;
                if ((LeftSet.Ranges[i].RangeStart !== RightSet.Ranges[i].RangeStart) || (LeftSet.Ranges[i].RangeEnd !== RightSet.Ranges[i].RangeEnd)) {
                  Result.B = false;
                  break;
                };
              };
            };
          } else {
            this.RaiseNotYetImplemented(20170714120756,Expr,"");
          };
        } else {
          Result = rtl.freeLoc(Result);
          this.RaiseNotYetImplemented(20170531011931,Expr,"");
        };
      } catch ($e) {
        if ($lt25.isPrototypeOf($e)) {
          this.RaiseOverflowArithmetic(20170601132729,Expr)}
         else if ($lt26.isPrototypeOf($e)) {
          this.RaiseRangeCheck(20170601132740,Expr)}
         else throw $e
      };
      if (Expr.OpCode === 15) Result.B = !Result.B;
      return Result;
    };
    this.EvalBinaryLessGreaterExpr = function (Expr, LeftValue, RightValue) {
      var $Self = this;
      var Result = null;
      function CmpUnicode(LeftUnicode, RightUnicode) {
        var $tmp = Expr.OpCode;
        if ($tmp === 16) {
          Result.B = LeftUnicode < RightUnicode}
         else if ($tmp === 17) {
          Result.B = LeftUnicode > RightUnicode}
         else if ($tmp === 18) {
          Result.B = LeftUnicode <= RightUnicode}
         else if ($tmp === 19) Result.B = LeftUnicode >= RightUnicode;
      };
      var LeftSet = null;
      var RightSet = null;
      var i = 0;
      var Int = 0;
      Result = $lt3.$create("Create$1");
      try {
        var $tmp = LeftValue.Kind;
        if ($tmp === 4) {
          var $tmp1 = RightValue.Kind;
          if ($tmp1 === 4) {
            var $tmp2 = Expr.OpCode;
            if ($tmp2 === 16) {
              Result.B = LeftValue.Int < RightValue.Int}
             else if ($tmp2 === 17) {
              Result.B = LeftValue.Int > RightValue.Int}
             else if ($tmp2 === 18) {
              Result.B = LeftValue.Int <= RightValue.Int}
             else if ($tmp2 === 19) Result.B = LeftValue.Int >= RightValue.Int;
          } else if ($tmp1 === 5) {
            var $tmp3 = Expr.OpCode;
            if ($tmp3 === 16) {
              Result.B = LeftValue.Int < RightValue.UInt}
             else if ($tmp3 === 17) {
              Result.B = LeftValue.Int > RightValue.UInt}
             else if ($tmp3 === 18) {
              Result.B = LeftValue.Int <= RightValue.UInt}
             else if ($tmp3 === 19) Result.B = LeftValue.Int >= RightValue.UInt;
          } else if ($tmp1 === 6) {
            var $tmp4 = Expr.OpCode;
            if ($tmp4 === 16) {
              Result.B = LeftValue.Int < RightValue.FloatValue}
             else if ($tmp4 === 17) {
              Result.B = LeftValue.Int > RightValue.FloatValue}
             else if ($tmp4 === 18) {
              Result.B = LeftValue.Int <= RightValue.FloatValue}
             else if ($tmp4 === 19) Result.B = LeftValue.Int >= RightValue.FloatValue;
          } else if ($tmp1 === 7) {
            var $tmp5 = Expr.OpCode;
            if ($tmp5 === 16) {
              Result.B = (LeftValue.Int * 10000) < RightValue.Value}
             else if ($tmp5 === 17) {
              Result.B = (LeftValue.Int * 10000) > RightValue.Value}
             else if ($tmp5 === 18) {
              Result.B = (LeftValue.Int * 10000) <= RightValue.Value}
             else if ($tmp5 === 19) Result.B = (LeftValue.Int * 10000) >= RightValue.Value;
          } else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170601122512,Expr,"");
          };
        } else if ($tmp === 5) {
          var $tmp6 = RightValue.Kind;
          if ($tmp6 === 4) {
            var $tmp7 = Expr.OpCode;
            if ($tmp7 === 16) {
              Result.B = LeftValue.UInt < RightValue.Int}
             else if ($tmp7 === 17) {
              Result.B = LeftValue.UInt > RightValue.Int}
             else if ($tmp7 === 18) {
              Result.B = LeftValue.UInt <= RightValue.Int}
             else if ($tmp7 === 19) Result.B = LeftValue.UInt >= RightValue.Int;
          } else if ($tmp6 === 5) {
            var $tmp8 = Expr.OpCode;
            if ($tmp8 === 16) {
              Result.B = LeftValue.UInt < RightValue.UInt}
             else if ($tmp8 === 17) {
              Result.B = LeftValue.UInt > RightValue.UInt}
             else if ($tmp8 === 18) {
              Result.B = LeftValue.UInt <= RightValue.UInt}
             else if ($tmp8 === 19) Result.B = LeftValue.UInt >= RightValue.UInt;
          } else if ($tmp6 === 6) {
            var $tmp9 = Expr.OpCode;
            if ($tmp9 === 16) {
              Result.B = LeftValue.UInt < RightValue.FloatValue}
             else if ($tmp9 === 17) {
              Result.B = LeftValue.UInt > RightValue.FloatValue}
             else if ($tmp9 === 18) {
              Result.B = LeftValue.UInt <= RightValue.FloatValue}
             else if ($tmp9 === 19) Result.B = LeftValue.UInt >= RightValue.FloatValue;
          } else if ($tmp6 === 7) {
            var $tmp10 = Expr.OpCode;
            if ($tmp10 === 16) {
              Result.B = (LeftValue.UInt * 10000) < RightValue.Value}
             else if ($tmp10 === 17) {
              Result.B = (LeftValue.UInt * 10000) > RightValue.Value}
             else if ($tmp10 === 18) {
              Result.B = (LeftValue.UInt * 10000) <= RightValue.Value}
             else if ($tmp10 === 19) Result.B = (LeftValue.UInt * 10000) >= RightValue.Value;
          } else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170601133222,Expr,"");
          };
        } else if ($tmp === 6) {
          var $tmp11 = RightValue.Kind;
          if ($tmp11 === 4) {
            var $tmp12 = Expr.OpCode;
            if ($tmp12 === 16) {
              Result.B = LeftValue.FloatValue < RightValue.Int}
             else if ($tmp12 === 17) {
              Result.B = LeftValue.FloatValue > RightValue.Int}
             else if ($tmp12 === 18) {
              Result.B = LeftValue.FloatValue <= RightValue.Int}
             else if ($tmp12 === 19) Result.B = LeftValue.FloatValue >= RightValue.Int;
          } else if ($tmp11 === 5) {
            var $tmp13 = Expr.OpCode;
            if ($tmp13 === 16) {
              Result.B = LeftValue.FloatValue < RightValue.UInt}
             else if ($tmp13 === 17) {
              Result.B = LeftValue.FloatValue > RightValue.UInt}
             else if ($tmp13 === 18) {
              Result.B = LeftValue.FloatValue <= RightValue.UInt}
             else if ($tmp13 === 19) Result.B = LeftValue.FloatValue >= RightValue.UInt;
          } else if ($tmp11 === 6) {
            var $tmp14 = Expr.OpCode;
            if ($tmp14 === 16) {
              Result.B = LeftValue.FloatValue < RightValue.FloatValue}
             else if ($tmp14 === 17) {
              Result.B = LeftValue.FloatValue > RightValue.FloatValue}
             else if ($tmp14 === 18) {
              Result.B = LeftValue.FloatValue <= RightValue.FloatValue}
             else if ($tmp14 === 19) Result.B = LeftValue.FloatValue >= RightValue.FloatValue;
          } else if ($tmp11 === 7) {
            var $tmp15 = Expr.OpCode;
            if ($tmp15 === 16) {
              Result.B = (LeftValue.FloatValue * 10000) < RightValue.Value}
             else if ($tmp15 === 17) {
              Result.B = (LeftValue.FloatValue * 10000) > RightValue.Value}
             else if ($tmp15 === 18) {
              Result.B = (LeftValue.FloatValue * 10000) <= RightValue.Value}
             else if ($tmp15 === 19) Result.B = (LeftValue.FloatValue * 10000) >= RightValue.Value;
          } else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170601133421,Expr,"");
          };
        } else if ($tmp === 7) {
          var $tmp16 = RightValue.Kind;
          if ($tmp16 === 4) {
            var $tmp17 = Expr.OpCode;
            if ($tmp17 === 16) {
              Result.B = LeftValue.Value < (RightValue.Int * 10000)}
             else if ($tmp17 === 17) {
              Result.B = LeftValue.Value > (RightValue.Int * 10000)}
             else if ($tmp17 === 18) {
              Result.B = LeftValue.Value <= (RightValue.Int * 10000)}
             else if ($tmp17 === 19) Result.B = LeftValue.Value >= (RightValue.Int * 10000);
          } else if ($tmp16 === 5) {
            var $tmp18 = Expr.OpCode;
            if ($tmp18 === 16) {
              Result.B = LeftValue.Value < (RightValue.UInt * 10000)}
             else if ($tmp18 === 17) {
              Result.B = LeftValue.Value > (RightValue.UInt * 10000)}
             else if ($tmp18 === 18) {
              Result.B = LeftValue.Value <= (RightValue.UInt * 10000)}
             else if ($tmp18 === 19) Result.B = LeftValue.Value >= (RightValue.UInt * 10000);
          } else if ($tmp16 === 6) {
            var $tmp19 = Expr.OpCode;
            if ($tmp19 === 16) {
              Result.B = LeftValue.Value < (RightValue.FloatValue * 10000)}
             else if ($tmp19 === 17) {
              Result.B = LeftValue.Value > (RightValue.FloatValue * 10000)}
             else if ($tmp19 === 18) {
              Result.B = LeftValue.Value <= (RightValue.FloatValue * 10000)}
             else if ($tmp19 === 19) Result.B = LeftValue.Value >= (RightValue.FloatValue * 10000);
          } else if ($tmp16 === 7) {
            var $tmp20 = Expr.OpCode;
            if ($tmp20 === 16) {
              Result.B = LeftValue.Value < RightValue.Value}
             else if ($tmp20 === 17) {
              Result.B = LeftValue.Value > RightValue.Value}
             else if ($tmp20 === 18) {
              Result.B = LeftValue.Value <= RightValue.Value}
             else if ($tmp20 === 19) Result.B = LeftValue.Value >= RightValue.Value;
          } else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20180421165752,Expr,"");
          };
        } else if ($tmp === 8) {
          var $tmp21 = RightValue.Kind;
          if ($tmp21 === 8) {
            CmpUnicode(LeftValue.S,RightValue.S)}
           else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170711210730,Expr,"");
          };
        } else if ($tmp === 12) {
          var $tmp22 = RightValue.Kind;
          if ($tmp22 === 12) {
            LeftSet = LeftValue;
            RightSet = RightValue;
            var $tmp23 = Expr.OpCode;
            if ($tmp23 === 19) {
              Result.B = true;
              for (var $l = 0, $end = rtl.oc(rtl.length(RightSet.Ranges) - 1); $l <= $end; $l++) {
                i = $l;
                Int = rtl.rc(rtl.rcArrR(RightSet.Ranges,i).RangeStart,-9007199254740991,9007199254740991);
                while (Int <= rtl.rcArrR(RightSet.Ranges,i).RangeEnd) {
                  if (LeftSet.IndexOfRange(Int,false) < 0) {
                    Result.B = false;
                    break;
                  };
                  Int += 1;
                };
              };
            } else if ($tmp23 === 18) {
              Result.B = true;
              for (var $l1 = 0, $end1 = rtl.oc(rtl.length(LeftSet.Ranges) - 1); $l1 <= $end1; $l1++) {
                i = $l1;
                Int = rtl.rc(rtl.rcArrR(LeftSet.Ranges,i).RangeStart,-9007199254740991,9007199254740991);
                while (Int <= rtl.rcArrR(LeftSet.Ranges,i).RangeEnd) {
                  if (RightSet.IndexOfRange(Int,false) < 0) {
                    Result.B = false;
                    break;
                  };
                  Int += 1;
                };
              };
            } else {
              Result = rtl.freeLoc(Result);
              this.RaiseNotYetImplemented(20170714122121,Expr,"");
            };
          } else {
            Result = rtl.freeLoc(Result);
            this.RaiseNotYetImplemented(20170714121925,Expr,"");
          };
        } else {
          Result = rtl.freeLoc(Result);
          this.RaiseNotYetImplemented(20170601122529,Expr,"");
        };
      } catch ($e) {
        if ($lt25.isPrototypeOf($e)) {
          this.RaiseOverflowArithmetic(20170601132956,Expr)}
         else if ($lt26.isPrototypeOf($e)) {
          this.RaiseRangeCheck(20170601132958,Expr)}
         else throw $e
      };
      return Result;
    };
    this.EvalBinaryInExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var RightSet = null;
      var Int = 0;
      Result = null;
      var $tmp = RightValue.Kind;
      if ($tmp === 12) {
        RightSet = RightValue;
        var $tmp1 = LeftValue.Kind;
        if ($tmp1 === 3) {
          Int = rtl.rc(LeftValue.B + 0,-9007199254740991,9007199254740991)}
         else if ($tmp1 === 4) {
          Int = rtl.rc(LeftValue.Int,-9007199254740991,9007199254740991)}
         else if ($tmp1 === 5) {
          if (LeftValue.UInt > 9007199254740991) {
            this.RaiseMsg(20170714123700,3064,rtl.getResStr($mod,"sRangeCheckError"),[],Expr)}
           else Int = rtl.rc(LeftValue.UInt,-9007199254740991,9007199254740991)}
         else if ($tmp1 === 8) {
          Int = rtl.rc(this.StringToOrd(LeftValue,Expr),-9007199254740991,9007199254740991)}
         else if ($tmp1 === 9) {
          Int = rtl.rc(LeftValue.Index,-9007199254740991,9007199254740991)}
         else {
          this.RaiseNotYetImplemented(20170714123412,Expr,"");
        };
        Result = $lt3.$create("CreateValue",[RightSet.IndexOfRange(Int,false) >= 0]);
      } else {
        this.RaiseNotYetImplemented(20170714123409,Expr,"");
      };
      return Result;
    };
    this.EvalBinarySymmetricaldifferenceExpr = function (Expr, LeftValue, RightValue) {
      var Result = null;
      var LeftSet = null;
      var RightSet = null;
      var i = 0;
      var Int = 0;
      var $tmp = LeftValue.Kind;
      if ($tmp === 12) {
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 12) {
          LeftSet = LeftValue;
          RightSet = RightValue;
          if (LeftSet.ElKind === 0) {
            Result = RightSet.Clone()}
           else {
            Result = $lt14.$create("CreateEmptySameKind",[LeftSet]);
            for (var $l = 0, $end = rtl.oc(rtl.length(LeftSet.Ranges) - 1); $l <= $end; $l++) {
              i = $l;
              Int = rtl.rc(rtl.rcArrR(LeftSet.Ranges,i).RangeStart,-9007199254740991,9007199254740991);
              while (Int <= rtl.rcArrR(LeftSet.Ranges,i).RangeEnd) {
                if (RightSet.IndexOfRange(Int,false) < 0) Result.Add(Int,Int);
                Int += 1;
              };
            };
            for (var $l1 = 0, $end1 = rtl.oc(rtl.length(RightSet.Ranges) - 1); $l1 <= $end1; $l1++) {
              i = $l1;
              Int = rtl.rc(rtl.rcArrR(RightSet.Ranges,i).RangeStart,-9007199254740991,9007199254740991);
              while (Int <= rtl.rcArrR(RightSet.Ranges,i).RangeEnd) {
                if (LeftSet.IndexOfRange(Int,false) < 0) Result.Add(Int,Int);
                Int += 1;
              };
            };
          };
        } else {
          this.RaiseNotYetImplemented(20170714114144,Expr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170714114119,Expr,"");
      };
      return Result;
    };
    this.EvalParamsExpr = function (Expr, Flags) {
      var Result = null;
      Result = this.FOnEvalParams(this,Expr,rtl.refSet(Flags));
      if (Result !== null) return Result;
      var $tmp = Expr.Kind;
      if ($tmp === 11) {
        Result = this.EvalArrayParamsExpr(Expr,rtl.refSet(Flags))}
       else if ($tmp === 4) Result = this.EvalSetParamsExpr(Expr,rtl.refSet(Flags));
      if (Result === null) {
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(0,1),Flags),{})) this.RaiseConstantExprExp(20170713124038,Expr);
        return Result;
      };
      return Result;
    };
    this.EvalArrayParamsExpr = function (Expr, Flags) {
      var Result = null;
      var ArrayValue = null;
      var IndexValue = null;
      var Int = 0;
      var Param0 = null;
      var MaxIndex = 0;
      Result = null;
      ArrayValue = this.Eval(Expr.Value,rtl.refSet(Flags));
      if (ArrayValue === null) {
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(0,1),Flags),{})) this.RaiseConstantExprExp(20170711181321,Expr.Value);
        return Result;
      };
      IndexValue = null;
      try {
        var $tmp = ArrayValue.Kind;
        if ($tmp === 8) {
          Param0 = Expr.Params[0];
          IndexValue = this.Eval(Param0,rtl.refSet(Flags));
          if (IndexValue === null) {
            if (rtl.neSet(rtl.intersectSet(rtl.createSet(0,1),Flags),{})) this.RaiseConstantExprExp(20170711181603,Param0);
            return Result;
          };
          var $tmp1 = IndexValue.Kind;
          if ($tmp1 === 4) {
            Int = rtl.rc(IndexValue.Int,-9007199254740991,9007199254740991)}
           else if ($tmp1 === 5) {
            if (IndexValue.UInt > 9007199254740991) {
              this.RaiseRangeCheck(20170711182006,Param0)}
             else Int = rtl.rc(IndexValue.UInt,-9007199254740991,9007199254740991)}
           else {
            this.RaiseNotYetImplemented(20170711182100,Expr,"");
          };
          MaxIndex = rtl.rc(ArrayValue.S.length,-2147483648,2147483647);
          if ((Int < 1) || (Int > MaxIndex)) this.EmitRangeCheckConst(20170711183058,$lp(Int),"1",$lp(MaxIndex),Param0,1);
          Result = $lt9.$create("CreateValue",[rtl.rcCharAt(ArrayValue.S,Int - 1)]);
          return Result;
        } else {
          this.RaiseNotYetImplemented(20170711181507,Expr,"");
        };
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(0,1),Flags),{})) this.RaiseConstantExprExp(20170522173150,Expr);
      } finally {
        $mod.ReleaseEvalValue({get: function () {
            return ArrayValue;
          }, set: function (v) {
            ArrayValue = v;
          }});
        $mod.ReleaseEvalValue({get: function () {
            return IndexValue;
          }, set: function (v) {
            IndexValue = v;
          }});
      };
      return Result;
    };
    this.EvalSetParamsExpr = function (Expr, Flags) {
      var Result = null;
      Result = this.EvalSetExpr(Expr,Expr.Params,rtl.refSet(Flags));
      return Result;
    };
    this.EvalSetExpr = function (Expr, ExprArray, Flags) {
      var Result = null;
      var i = 0;
      var RangeStart = 0;
      var RangeEnd = 0;
      var Value = null;
      var ok = false;
      var OnlyConstElements = false;
      var El = null;
      Result = $lt14.$create("Create$1");
      if (Expr === null) ;
      Value = null;
      OnlyConstElements = true;
      ok = false;
      try {
        for (var $l = 0, $end = rtl.oc(rtl.length(ExprArray) - 1); $l <= $end; $l++) {
          i = $l;
          El = rtl.rcArrR(ExprArray,i);
          Value = this.Eval(El,rtl.refSet(Flags));
          if (Value === null) {
            OnlyConstElements = false;
            continue;
          };
          var $tmp = Value.Kind;
          if ($tmp === 3) {
            if (Result.ElKind === 0) {
              Result.ElKind = 4}
             else if (Result.ElKind !== 4) this.RaiseNotYetImplemented(20170714132843,El,"");
            RangeStart = rtl.rc(Value.B + 0,-9007199254740991,9007199254740991);
            RangeEnd = rtl.rc(RangeStart,-9007199254740991,9007199254740991);
          } else if ($tmp === 4) {
            if (Result.ElKind === 0) {
              Result.ElKind = 2}
             else if (Result.ElKind !== 2) this.RaiseNotYetImplemented(20170713201208,El,"");
            RangeStart = rtl.rc(Value.Int,-9007199254740991,9007199254740991);
            RangeEnd = rtl.rc(RangeStart,-9007199254740991,9007199254740991);
          } else if ($tmp === 5) {
            if (Result.ElKind === 0) {
              Result.ElKind = 2}
             else if (Result.ElKind !== 2) {
              this.RaiseNotYetImplemented(20170713201230,El,"")}
             else if (Value.UInt > 9007199254740991) this.EmitRangeCheckConst(20170713201306,Value.AsString(),"0",$lp(9007199254740991),El,1);
            RangeStart = rtl.rc(Value.UInt,-9007199254740991,9007199254740991);
            RangeEnd = rtl.rc(RangeStart,-9007199254740991,9007199254740991);
          } else if ($tmp === 8) {
            if (Result.ElKind === 0) {
              Result.ElKind = 3}
             else if (Result.ElKind !== 3) this.RaiseNotYetImplemented(20170713201516,El,"");
            if (Value.S.length !== 1) {
              $mod.ReleaseEvalValue({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }});
              return Result;
            };
            RangeStart = rtl.rc(Value.S.charCodeAt(1 - 1),-9007199254740991,9007199254740991);
            RangeEnd = rtl.rc(RangeStart,-9007199254740991,9007199254740991);
          } else if ($tmp === 9) {
            if (Result.ElKind === 0) {
              Result.ElKind = 1;
              Result.ElType = rtl.as(Value.IdentEl.FParent,$lt21);
            } else if (Result.ElKind !== 1) {
              this.RaiseNotYetImplemented(20170713143559,El,"")}
             else if (Result.ElType !== Value.ElType) this.RaiseNotYetImplemented(20170713201021,El,"");
            RangeStart = rtl.rc(Value.Index,-9007199254740991,9007199254740991);
            RangeEnd = rtl.rc(RangeStart,-9007199254740991,9007199254740991);
          } else if ($tmp === 10) {
            if (Result.ElKind === 0) {
              Result.ElKind = rtl.rc(Value.ElKind,0,4);
              if (Result.ElKind === 1) Result.ElType = Value.ElType;
            } else if (Result.ElKind !== Value.ElKind) this.RaiseNotYetImplemented(20170714101910,El,"");
            RangeStart = rtl.rc(Value.RangeStart,-9007199254740991,9007199254740991);
            RangeEnd = rtl.rc(Value.RangeEnd,-9007199254740991,9007199254740991);
          } else if ($tmp === 11) {
            if (Result.ElKind === 0) {
              Result.ElKind = 2}
             else if (Result.ElKind !== 2) {
              this.RaiseNotYetImplemented(20170713202934,El,"")}
             else if (Value.RangeEnd > 9007199254740991) this.EmitRangeCheckConst(20170713203034,Value.AsString(),"0",$lp(9007199254740991),El,1);
            RangeStart = rtl.rc(Value.RangeStart,-9007199254740991,9007199254740991);
            RangeEnd = rtl.rc(Value.RangeEnd,-9007199254740991,9007199254740991);
          } else {
            this.RaiseNotYetImplemented(20170713143422,El,"");
          };
          if (Result.Intersects(RangeStart,RangeEnd) >= 0) {
            this.RaiseMsg(20170714141326,3070,rtl.getResStr($mod,"sRangeCheckInSetConstructor"),[],El);
          };
          Result.Add(RangeStart,RangeEnd);
          $mod.ReleaseEvalValue({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
        };
        ok = OnlyConstElements;
      } finally {
        $mod.ReleaseEvalValue({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        if (!ok) $mod.ReleaseEvalValue({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }});
      };
      return Result;
    };
    this.EvalArrayValuesExpr = function (Expr, Flags) {
      var Result = null;
      Result = this.EvalSetExpr(Expr,Expr.Values,rtl.refSet(Flags));
      return Result;
    };
    this.EvalPrimitiveExprString = function (Expr) {
      var $Self = this;
      var Result = null;
      var Value = null;
      function rangeError(id) {
        Value = rtl.freeLoc(Value);
        $Self.RaiseRangeCheck(id,Expr);
      };
      function AddSrc(h) {
        if (h === "") return;
        Value.S = Value.S + h;
      };
      function AddHash(u) {
        Value.S = Value.S + String.fromCharCode(u);
      };
      function ReadHash(S, p, l) {
        var Result = 0;
        var StartP = 0;
        var u = 0;
        var c = "\x00";
        Result = p;
        Result += 1;
        if (Result > l) $Self.RaiseInternalError(20181016121354,"");
        if (S.charAt(Result - 1) === "$") {
          Result += 1;
          StartP = Result;
          u = 0;
          while (Result <= l) {
            c = S.charAt(Result - 1);
            var $tmp = c;
            if (($tmp >= "0") && ($tmp <= "9")) {
              u = (u * 16) + ((c.charCodeAt() - 48) >>> 0)}
             else if (($tmp >= "a") && ($tmp <= "f")) {
              u = (u * 16) + ((c.charCodeAt() - 97) >>> 0) + 10}
             else if (($tmp >= "A") && ($tmp <= "F")) {
              u = (u * 16) + ((c.charCodeAt() - 65) >>> 0) + 10}
             else {
              break;
            };
            if (u > 0x10FFFF) rangeError(20170523115712);
            Result += 1;
          };
        } else {
          StartP = Result;
          u = 0;
          while (Result <= l) {
            c = S.charAt(Result - 1);
            var $tmp1 = c;
            if (($tmp1 >= "0") && ($tmp1 <= "9")) {
              u = (u * 10) + ((c.charCodeAt() - 48) >>> 0)}
             else {
              break;
            };
            if (u > 0xffff) rangeError(20170523123137);
            Result += 1;
          };
        };
        if (Result === StartP) $Self.RaiseInternalError(20170523123806,"");
        if (u > 0xffff) {
          u -= 0x10000;
          AddHash(0xD800 + rtl.lw(u >>> 10));
          AddHash(0xDC00 + (u & 0x3ff));
        } else AddHash(u);
        return Result;
      };
      var p = 0;
      var StartP = 0;
      var l = 0;
      var c = "\x00";
      var S = "";
      Result = null;
      S = Expr.Value;
      l = S.length;
      if (l === 0) this.RaiseInternalError(20170523113809,"");
      Value = $lt9.$create("Create$1");
      try {
        p = 1;
        while (p <= l) {
          var $tmp = S.charAt(p - 1);
          if ($tmp === "'") {
            p += 1;
            StartP = p;
            do {
              if (p > l) this.RaiseInternalError(20170523113938,"");
              c = S.charAt(p - 1);
              var $tmp1 = c;
              if ($tmp1 === "'") {
                if (p > StartP) AddSrc($lp5(S,StartP,p - StartP));
                p += 1;
                StartP = p;
                if ((p > l) || (S.charAt(p - 1) !== "'")) break;
                AddSrc("'");
                p += 1;
                StartP = p;
              } else {
                p += 1;
              };
            } while (!false);
            if (p > StartP) AddSrc($lp5(S,StartP,p - StartP));
          } else if ($tmp === "#") {
            p = ReadHash(S,p,l)}
           else if ($tmp === "^") {
            p += 1;
            if (p > l) this.RaiseInternalError(20181016121520,"");
            c = S.charAt(p - 1);
            var $tmp2 = c;
            if (($tmp2 >= "a") && ($tmp2 <= "z")) {
              AddHash((c.charCodeAt() - 97) + 1)}
             else if (($tmp2 >= "A") && ($tmp2 <= "Z")) {
              AddHash((c.charCodeAt() - 65) + 1)}
             else {
              this.RaiseInternalError(20170523123809,"");
            };
            p += 1;
          } else {
            this.RaiseNotYetImplemented(20170523123815,Expr,"ord=" + $lp(S.charCodeAt(p - 1)));
          };
        };
        Result = Value;
        Value = null;
      } finally {
        Value = rtl.freeLoc(Value);
      };
      return Result;
    };
    this.EvalPrimitiveExprStringMultiLine = function (Expr) {
      var Result = null;
      Result = $lt9.$create("CreateValue",[Expr.Value]);
      return Result;
    };
    this.PredBool = function (Value, ErrorEl) {
      if (Value.B === false) this.EmitRangeCheckConst(20170624140251,Value.AsString(),"true","true",ErrorEl,2);
      Value.B = !Value.B;
    };
    this.SuccBool = function (Value, ErrorEl) {
      if (Value.B === true) this.EmitRangeCheckConst(20170624142316,Value.AsString(),"false","false",ErrorEl,2);
      Value.B = !Value.B;
    };
    this.PredInt = function (Value, ErrorEl) {
      if (Value.Int === -9007199254740991) {
        this.EmitRangeCheckConst(20170624142511,$lp(Value.Int),$lp(-9007199254740991 + 1),$lp(9007199254740991),ErrorEl,2);
        Value.Int = 9007199254740991;
      } else Value.Int -= 1;
    };
    this.SuccInt = function (Value, ErrorEl) {
      if (Value.Int === 9007199254740991) {
        this.EmitRangeCheckConst(20170624142920,$lp(Value.Int),$lp(-9007199254740991),$lp(9007199254740991 - 1),ErrorEl,2);
        Value.Int = -9007199254740991;
      } else Value.Int += 1;
    };
    this.PredUInt = function (Value, ErrorEl) {
      if (Value.UInt === 0) {
        this.EmitRangeCheckConst(20170624143122,$lp(Value.UInt),$lp(0 + 1),$lp(9007199254740991),ErrorEl,2);
        Value.UInt = 9007199254740991;
      } else Value.UInt -= 1;
    };
    this.SuccUInt = function (Value, ErrorEl) {
      if (Value.UInt === 9007199254740991) {
        this.EmitRangeCheckConst(20170624142921,$lp(Value.UInt),$lp(0),$lp(9007199254740991 - 1),ErrorEl,2);
        Value.UInt = 0;
      } else Value.UInt += 1;
    };
    this.PredUnicodeString = function (Value, ErrorEl) {
      if (Value.S.length !== 1) this.RaiseRangeCheck(20170624150703,ErrorEl);
      if (Value.S.charAt(0) === "\x00") {
        this.EmitRangeCheckConst(20170624150710,Value.AsString(),"#1","#65535",ErrorEl,2);
        Value.S = "\uFFFF";
      } else Value.S = String.fromCharCode(Value.S.charAt(0).charCodeAt() - 1);
    };
    this.SuccUnicodeString = function (Value, ErrorEl) {
      if (Value.S.length !== 1) this.RaiseRangeCheck(20170624150849,ErrorEl);
      if (Value.S.charAt(0) === "\uFFFF") {
        this.EmitRangeCheckConst(20170624150910,Value.AsString(),"#0","#65534",ErrorEl,2);
        Value.S = "\x00";
      } else Value.S = String.fromCharCode(Value.S.charAt(0).charCodeAt() + 1);
    };
    this.PredEnum = function (Value, ErrorEl) {
      var EnumType = null;
      EnumType = rtl.as(Value.ElType,$lt21);
      if (EnumType === null) this.RaiseInternalError(20170821174038,$mod.dbgs$1(Value));
      if (Value.Index <= 0) {
        this.EmitRangeCheckConst(20170624144332,Value.AsString(),rtl.getObject(EnumType.Values.Get(Math.min(1,EnumType.Values.FCount - 1))).FName,rtl.getObject(EnumType.Values.Get(EnumType.Values.FCount - 1)).FName,ErrorEl,2);
        Value.Index = EnumType.Values.FCount - 1;
      } else Value.Index -= 1;
      Value.IdentEl = rtl.getObject(EnumType.Values.Get(Value.Index));
    };
    this.SuccEnum = function (Value, ErrorEl) {
      var EnumType = null;
      EnumType = rtl.as(Value.ElType,$lt21);
      if (EnumType === null) this.RaiseInternalError(20170821174058,$mod.dbgs$1(Value));
      if (Value.Index >= (EnumType.Values.FCount - 1)) {
        this.EmitRangeCheckConst(20170624145013,Value.AsString(),rtl.getObject(EnumType.Values.Get(0)).FName,rtl.getObject(EnumType.Values.Get(Math.max(0,EnumType.Values.FCount - 2))).FName,ErrorEl,2);
        Value.Index = 0;
      } else Value.Index += 1;
      Value.IdentEl = rtl.getObject(EnumType.Values.Get(Value.Index));
    };
    this.DivideByZero = function (LeftSign, RightSign) {
      var Result = 0.0;
      if (LeftSign === 0) {
        Result = 0.0}
       else if ((LeftSign < 0) !== (RightSign < 0)) {
        Result = -Infinity}
       else Result = Infinity;
      return Result;
    };
    this.CreateResEvalInt = function (UInt) {
      var Result = null;
      if (UInt <= 9007199254740991) {
        Result = $lt5.$create("CreateValue",[UInt])}
       else Result = $lt6.$create("CreateValue",[UInt]);
      return Result;
    };
    this.Create$1 = function () {
      $lt20.Create.call(this);
      this.FAllowedInts = rtl.refSet($mod.reitDefaults);
      return this;
    };
    this.Eval = function (Expr, Flags) {
      var Result = null;
      var C = null;
      var Code = 0;
      var Int = 0;
      var UInt = 0;
      var Flo = 0.0;
      Result = null;
      if ($lt2.isPrototypeOf(Expr.FData)) {
        Result = Expr.FData;
        return Result;
      };
      if (2 in Flags) {
        Flags = rtl.excludeSet(Flags,2);
        if (this.IsConst(Expr)) Flags = rtl.includeSet(Flags,0);
      };
      if (3 in Flags) {
        Flags = rtl.excludeSet(Flags,3);
        if (this.IsConst(Expr)) Flags = rtl.includeSet(Flags,1);
      };
      C = Expr.$class.ClassType();
      if (C === $lt27) {
        var $tmp = Expr.Kind;
        if ($tmp === 0) {
          Result = this.FOnEvalIdentifier(this,Expr,rtl.refSet(Flags));
        } else if ($tmp === 1) {
          $lp6(Expr.Value,{get: function () {
              return Int;
            }, set: function (v) {
              Int = v;
            }},{get: function () {
              return Code;
            }, set: function (v) {
              Code = v;
            }});
          if (Code === 0) {
            if ((Int < 0) && ($lp7("-",Expr.Value) < 1)) {}
            else {
              Result = $lt5.$create("CreateValue",[Int]);
              return Result;
            };
          };
          $lp8(Expr.Value,{get: function () {
              return UInt;
            }, set: function (v) {
              UInt = v;
            }},{get: function () {
              return Code;
            }, set: function (v) {
              Code = v;
            }});
          if (Code === 0) {
            Result = $lt6.$create("CreateValue",[UInt]);
            return Result;
          };
          $lp9(Expr.Value,{get: function () {
              return Flo;
            }, set: function (v) {
              Flo = v;
            }},{get: function () {
              return Code;
            }, set: function (v) {
              Code = v;
            }});
          if (Code === 0) {
            Result = $lt7.$create("CreateValue",[Flo]);
            return Result;
          };
          this.RaiseRangeCheck(20170518202252,Expr);
        } else if ($tmp === 2) {
          Result = this.EvalPrimitiveExprString(Expr);
          return Result;
        } else if ($tmp === 3) {
          Result = this.EvalPrimitiveExprStringMultiLine(Expr);
          return Result;
        } else {
          this.RaiseNotYetImplemented(20170518200951,Expr,"");
        };
      } else if (C === $lt28) {
        Result = $lt2.$create("CreateKind",[2])}
       else if (C === $lt29) {
        Result = $lt3.$create("CreateValue",[Expr.Value])}
       else if (C === $lt30) {
        Result = this.EvalUnaryExpr(Expr,rtl.refSet(Flags))}
       else if (C === $lt24) {
        Result = this.EvalBinaryExpr(Expr,rtl.refSet(Flags))}
       else if (C === $lt31) {
        Result = this.EvalParamsExpr(Expr,rtl.refSet(Flags))}
       else if (C === $lt32) {
        Result = this.EvalArrayValuesExpr(Expr,rtl.refSet(Flags))}
       else if (rtl.neSet(rtl.intersectSet(rtl.createSet(0,1),Flags),{})) this.RaiseConstantExprExp(20170518213800,Expr);
      return Result;
    };
    this.IsInRange = function (Expr, RangeExpr, EmitHints) {
      var Result = false;
      var Value = null;
      var RangeValue = null;
      Value = this.Eval(Expr,rtl.createSet(2));
      if (Value === null) return true;
      RangeValue = null;
      try {
        RangeValue = this.Eval(RangeExpr,{});
        if (RangeValue === null) this.RaiseNotYetImplemented(20170522171226,RangeExpr,"");
        Result = this.IsInRange$1(Value,Expr,RangeValue,RangeExpr,EmitHints);
      } finally {
        $mod.ReleaseEvalValue({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        $mod.ReleaseEvalValue({get: function () {
            return RangeValue;
          }, set: function (v) {
            RangeValue = v;
          }});
      };
      return Result;
    };
    this.IsInRange$1 = function (Value, ValueExpr, RangeValue, RangeExpr, EmitHints) {
      var Result = false;
      var RgInt = null;
      var RgUInt = null;
      var CharIndex = 0;
      Result = false;
      var $tmp = RangeValue.Kind;
      if ($tmp === 10) {
        RgInt = RangeValue;
        var $tmp1 = RgInt.ElKind;
        if ($tmp1 === 4) {
          if (Value.Kind === 3) {
            return true}
           else this.RaiseNotYetImplemented(20170522220104,ValueExpr,"")}
         else if ($tmp1 === 1) {
          if (Value.Kind !== 9) {
            this.RaiseInternalError(20170522172754,"")}
           else if (Value.ElType !== RgInt.ElType) {
            this.RaiseInternalError(20170522174028,"")}
           else if ((Value.Index < RgInt.RangeStart) || (Value.Index > RgInt.RangeEnd)) {
            if (EmitHints) this.EmitRangeCheckConst(20170522174406,Value.AsString(),RgInt.ElementAsString(RgInt.RangeStart),RgInt.ElementAsString(RgInt.RangeEnd),ValueExpr,2);
            return false;
          } else return true;
        } else if ($tmp1 === 2) {
          if (Value.Kind === 4) {
            if ((Value.Int < RgInt.RangeStart) || (Value.Int > RgInt.RangeEnd)) {
              if (EmitHints) this.EmitRangeCheckConst(20170522174958,Value.AsString(),RgInt.ElementAsString(RgInt.RangeStart),RgInt.ElementAsString(RgInt.RangeEnd),ValueExpr,2);
              return false;
            } else return true;
          } else if (Value.Kind === 5) {
            if ((Value.UInt > 9007199254740991) || (Value.UInt < RgInt.RangeStart) || (Value.UInt > RgInt.RangeEnd)) {
              if (EmitHints) this.EmitRangeCheckConst(20170522215852,Value.AsString(),RgInt.ElementAsString(RgInt.RangeStart),RgInt.ElementAsString(RgInt.RangeEnd),ValueExpr,2);
              return false;
            } else return true;
          } else {
            this.RaiseNotYetImplemented(20170522215906,ValueExpr,"");
          }}
         else if ($tmp1 === 3) {
          if (Value.Kind in $mod.revkAllStrings) {
            CharIndex = this.StringToOrd(Value,ValueExpr);
            if ((CharIndex < RgInt.RangeStart) || (CharIndex > RgInt.RangeEnd)) {
              if (EmitHints) this.EmitRangeCheckConst(20170522221709,Value.AsString(),RgInt.ElementAsString(RgInt.RangeStart),RgInt.ElementAsString(RgInt.RangeEnd),ValueExpr,2);
              return false;
            } else return true;
          } else this.RaiseNotYetImplemented(20170522220210,ValueExpr,"")}
         else {
          this.RaiseInternalError(20170522172630,"");
        };
      } else if ($tmp === 11) {
        if (Value.Kind === 4) {
          RgUInt = RangeValue;
          if ((Value.Int < 0) || (Value.Int < RgUInt.RangeStart) || (Value.Int > RgUInt.RangeEnd)) {
            if (EmitHints) this.EmitRangeCheckConst(20170522172250,Value.AsString(),$lp(RgUInt.RangeStart),$lp(RgUInt.RangeEnd),ValueExpr,2);
            return false;
          } else return true;
        } else if (Value.Kind === 5) {
          RgUInt = RangeValue;
          if ((Value.UInt < RgUInt.RangeStart) || (Value.UInt > RgUInt.RangeEnd)) {
            if (EmitHints) this.EmitRangeCheckConst(20170522172544,$lp(Value.UInt),$lp(RgUInt.RangeStart),$lp(RgUInt.RangeEnd),ValueExpr,2);
            return false;
          } else return true;
        } else {
          this.RaiseNotYetImplemented(20170522171551,ValueExpr,"");
        }}
       else {
        this.RaiseNotYetImplemented(20170522171307,RangeExpr,"");
      };
      return Result;
    };
    this.IsSetCompatible = function (Value, ValueExpr, RangeValue, EmitHints) {
      var Result = false;
      var RightSet = null;
      var LeftRange = null;
      var MinVal = 0;
      var MaxVal = 0;
      Result = true;
      var $tmp = Value.Kind;
      if ($tmp === 12) {
        RightSet = Value;
        if (RightSet.ElKind === 0) return true;
        var $tmp1 = RangeValue.Kind;
        if ($tmp1 === 10) {
          LeftRange = RangeValue;
          if ((LeftRange.ElKind !== RightSet.ElKind) || (LeftRange.ElType !== RightSet.ElType)) {
            this.RaiseNotYetImplemented(20170714201425,ValueExpr,"");
          };
          if (rtl.length(RightSet.Ranges) === 0) return true;
          MinVal = RightSet.Ranges[0].RangeStart;
          MaxVal = RightSet.Ranges[rtl.length(RightSet.Ranges) - 1].RangeEnd;
          if (MinVal < LeftRange.RangeStart) if (EmitHints) {
            this.EmitRangeCheckConst(20170714202813,RightSet.ElementAsString(MinVal),LeftRange.ElementAsString(LeftRange.RangeStart),LeftRange.ElementAsString(LeftRange.RangeEnd),ValueExpr,1)}
           else return false;
          if (MaxVal > LeftRange.RangeEnd) if (EmitHints) {
            this.EmitRangeCheckConst(20170714203134,RightSet.ElementAsString(MaxVal),LeftRange.ElementAsString(LeftRange.RangeStart),LeftRange.ElementAsString(LeftRange.RangeEnd),ValueExpr,1)}
           else return false;
        } else {
          this.RaiseNotYetImplemented(20170714201121,ValueExpr,"");
        };
      } else {
        this.RaiseNotYetImplemented(20170714195815,ValueExpr,"");
      };
      return Result;
    };
    this.IsConst = function (Expr) {
      var Result = false;
      var El = null;
      var C = null;
      El = Expr;
      while (El !== null) {
        C = El.$class.ClassType();
        if (C.InheritsFrom($lt33)) return true;
        if (C.InheritsFrom($lt34)) return false;
        El = El.FParent;
      };
      Result = true;
      return Result;
    };
    this.IsSimpleExpr = function (Expr) {
      var Result = false;
      var C = null;
      C = Expr.$class.ClassType();
      Result = (C === $lt28) || (C === $lt29) || (C === $lt27);
      return Result;
    };
    this.EmitRangeCheckConst = function (id, aValue, MinVal, MaxVal, PosEl, MsgType) {
      if (this.FOnRangeCheckEl != null) this.FOnRangeCheckEl(this,PosEl,{get: function () {
          return MsgType;
        }, set: function (v) {
          MsgType = v;
        }});
      this.LogMsg(id,MsgType,3066,rtl.getResStr($mod,"sRangeCheckEvaluatingConstantsVMinMax"),$lp4(18,aValue,18,MinVal,18,MaxVal),PosEl);
    };
    this.EmitRangeCheckConst$1 = function (id, aValue, MinVal, MaxVal, PosEl, MsgType) {
      this.EmitRangeCheckConst(id,aValue,$lp(MinVal),$lp(MaxVal),PosEl,MsgType);
    };
    this.ChrValue = function (Value, ErrorEl) {
      var Result = null;
      var Int = 0;
      Result = null;
      var $tmp = Value.Kind;
      if (($tmp === 4) || ($tmp === 5)) {
        if (Value.Kind === 5) {
          if (Value.UInt > 0xffff) {
            this.EmitRangeCheckConst$1(20170711195605,Value.AsString(),0,0xffff,ErrorEl,1)}
           else Int = Value.UInt;
        } else Int = Value.Int;
        if ((Int < 0) || (Int > 0xffff)) this.EmitRangeCheckConst$1(20170711195747,Value.AsString(),0,0xffff,ErrorEl,1);
        Result = $lt9.$create("CreateValue",[String.fromCharCode(Int)]);
      } else {
        this.RaiseNotYetImplemented(20170711195440,ErrorEl,"");
      };
      return Result;
    };
    this.OrdValue = function (Value, ErrorEl) {
      var Result = null;
      var v = 0;
      Result = null;
      v = 0;
      var $tmp = Value.Kind;
      if ($tmp === 3) {
        if (Value.B) {
          v = 1}
         else v = 0}
       else if (($tmp === 4) || ($tmp === 5)) {
        return Value}
       else if ($tmp === 8) {
        v = this.StringToOrd(Value,ErrorEl)}
       else if ($tmp === 9) {
        v = Value.Index}
       else {
        this.RaiseNotYetImplemented(20170624155932,ErrorEl,"");
      };
      if (v > 0xffff) return Result;
      Result = $lt5.$create("CreateValue",[v]);
      return Result;
    };
    var Invalid = 0x12345678;
    this.StringToOrd = function (Value, PosEl) {
      var Result = 0;
      var U = "";
      var $tmp = Value.Kind;
      if ($tmp === 8) {
        U = Value.S;
        if (U.length !== 1) {
          if (PosEl !== null) {
            this.RaiseMsg(20170522221358,3010,rtl.getResStr($mod,"sXExpectedButYFound"),$lp4(18,"AnsiChar",18,"string"),PosEl)}
           else return 305419896;
        } else Result = U.charCodeAt(1 - 1);
      } else {
        this.RaiseNotYetImplemented(20170522220959,PosEl,"");
      };
      return Result;
    };
    this.PredValue = function (Value, ErrorEl) {
      var $tmp = Value.Kind;
      if ($tmp === 3) {
        this.PredBool(Value,ErrorEl)}
       else if ($tmp === 4) {
        this.PredInt(Value,ErrorEl)}
       else if ($tmp === 5) {
        this.PredUInt(Value,ErrorEl)}
       else if ($tmp === 8) {
        this.PredUnicodeString(Value,ErrorEl)}
       else if ($tmp === 9) {
        this.PredEnum(Value,ErrorEl)}
       else {
        $mod.ReleaseEvalValue({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        this.RaiseNotYetImplemented(20170624135738,ErrorEl,"");
      };
    };
    this.SuccValue = function (Value, ErrorEl) {
      var $tmp = Value.Kind;
      if ($tmp === 3) {
        this.SuccBool(Value,ErrorEl)}
       else if ($tmp === 4) {
        this.SuccInt(Value,ErrorEl)}
       else if ($tmp === 5) {
        this.SuccUInt(Value,ErrorEl)}
       else if ($tmp === 8) {
        this.SuccUnicodeString(Value,ErrorEl)}
       else if ($tmp === 9) {
        this.SuccEnum(Value,ErrorEl)}
       else {
        $mod.ReleaseEvalValue({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        this.RaiseNotYetImplemented(20170624151252,ErrorEl,"");
      };
    };
    this.EvalStrFunc = function (Params, Flags) {
      var $Self = this;
      var Result = null;
      var AllConst = false;
      function EvalFormat(Expr, MinVal, MaxVal) {
        var Result = 0;
        var Value = null;
        Value = $Self.Eval(Expr,rtl.refSet(Flags));
        if (Value === null) {
          AllConst = false;
          return -1;
        };
        if (Value.Kind !== 4) $Self.RaiseNotYetImplemented(20170717144010,Expr,"");
        Result = Value.Int;
        if ((Result < MinVal) || (Result > MaxVal)) $Self.EmitRangeCheckConst$1(20170717144609,$lp(Result),MinVal,MaxVal,Expr,1);
        return Result;
      };
      var i = 0;
      var Param = null;
      var S = "";
      var ValStr = "";
      var Value = null;
      var Format1 = 0;
      var Format2 = 0;
      Result = null;
      Value = null;
      AllConst = true;
      S = "";
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = Params.Params[i];
        Value = this.Eval(Param,rtl.refSet(Flags));
        if (Value === null) {
          AllConst = false;
          continue;
        };
        Format1 = -1;
        Format2 = -1;
        try {
          ValStr = "";
          if (Param.Format1 !== null) {
            Format1 = EvalFormat(Param.Format1,1,255);
            if (Format1 < 0) continue;
            if (Param.Format2 !== null) {
              Format2 = EvalFormat(Param.Format2,0,255);
              if (Format2 < 0) continue;
            };
          };
          var $tmp = Value.Kind;
          if ($tmp === 3) {
            if (Format1 < 0) {
              ValStr = "" + Value.B}
             else ValStr = rtl.spaceLeft("" + Value.B,Format1)}
           else if ($tmp === 4) {
            if (Format1 < 0) {
              ValStr = "" + Value.Int}
             else ValStr = rtl.spaceLeft("" + Value.Int,Format1)}
           else if ($tmp === 5) {
            if (Format1 < 0) {
              ValStr = "" + Value.UInt}
             else ValStr = rtl.spaceLeft("" + Value.UInt,Format1)}
           else if ($tmp === 6) {
            if (Format1 < 0) {
              ValStr = rtl.floatToStr(Value.FloatValue)}
             else if (Format2 < 0) {
              ValStr = rtl.floatToStr(Value.FloatValue,Format1)}
             else ValStr = rtl.floatToStr(Value.FloatValue,Format1,Format2)}
           else if ($tmp === 7) {
            if (Format1 < 0) {
              ValStr = rtl.floatToStr(Value.Value / 10000)}
             else if (Format2 < 0) {
              ValStr = rtl.floatToStr(Value.Value / 10000,Format1)}
             else ValStr = rtl.floatToStr(Value.Value / 10000,Format1,Format2)}
           else if ($tmp === 9) {
            ValStr = Value.AsString();
            if (Format1 > 0) ValStr = $lp10(" ",Format1) + ValStr;
          } else {
            AllConst = false;
            continue;
          };
        } finally {
          $mod.ReleaseEvalValue({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
          $mod.ReleaseEvalValue({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
          $mod.ReleaseEvalValue({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
        };
        S = S + ValStr;
      };
      if (AllConst) Result = $lt9.$create("CreateValue",[S]);
      return Result;
    };
    this.EvalStringAddExpr = function (Expr, LeftExpr, RightExpr, LeftValue, RightValue) {
      var Result = null;
      var $tmp = LeftValue.Kind;
      if ($tmp === 8) {
        var $tmp1 = RightValue.Kind;
        if ($tmp1 === 8) {
          Result = $lt9.$create("Create$1");
          Result.S = LeftValue.S + RightValue.S;
        } else {
          this.RaiseNotYetImplemented(20170601141811,Expr,"");
        };
      } else {
        if (LeftExpr === null) ;
        if (RightExpr === null) ;
        this.RaiseNotYetImplemented(20181219233139,Expr,"");
      };
      return Result;
    };
    this.ShiftAndMaskValue = function (Value, ShiftSize, Mask, ErrorEl) {
      var Result = null;
      var uint = 0;
      var $tmp = Value.Kind;
      if ($tmp === 4) {
        if (ShiftSize === 32) {
          uint = rtl.trunc(Value.Int / 0x100000000) >>> 0}
         else uint = rtl.shr(Value.Int,ShiftSize) & Mask}
       else if ($tmp === 5) {
        if (ShiftSize === 32) {
          uint = rtl.trunc(Value.UInt / 0x100000000) >>> 0}
         else uint = rtl.shr(Value.UInt,ShiftSize) & Mask}
       else {
        this.RaiseNotYetImplemented(20190129012100,ErrorEl,"");
      };
      Result = $lt5.$create("CreateValue",[uint]);
      return Result;
    };
    this.EnumTypeCast = function (EnumType, Expr, Flags) {
      var Result = null;
      var Value = null;
      var MaxIndex = 0;
      var Index = 0;
      Result = null;
      Value = this.Eval(Expr,rtl.refSet(Flags));
      if (Value === null) return Result;
      try {
        MaxIndex = EnumType.Values.FCount - 1;
        var $tmp = Value.Kind;
        if ($tmp === 4) {
          if (Value.Int > 2147483647) {
            this.EmitRangeCheckConst(20170713105944,$lp(Value.Int),"0",$lp(MaxIndex),Expr,1)}
           else Index = Value.Int}
         else if ($tmp === 5) {
          if (Value.UInt > MaxIndex) {
            this.EmitRangeCheckConst(20170713105944,$lp(Value.UInt),"0",$lp(MaxIndex),Expr,1)}
           else Index = Value.UInt}
         else {
          this.RaiseNotYetImplemented(20170713105625,Expr,"");
        };
        if ((Index < 0) || (Index > MaxIndex)) this.EmitRangeCheckConst(20170713110232,$lp(Index),"0",$lp(MaxIndex),Expr,1);
        Result = $lt10.$create("CreateValue",[Index,rtl.getObject(EnumType.Values.Get(Index))]);
      } finally {
        $mod.ReleaseEvalValue({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      return Result;
    };
  });
  this.ReleaseEvalValue = function (Value) {
    if (Value.get() === null) return;
    if (Value.get().FElement !== null) return;
    Value.get().$destroy("Destroy");
    Value.set(null);
  };
  this.NumberIsFloat = function (Value) {
    var Result = false;
    var i = 0;
    if (Value === "") return false;
    if (Value.charCodeAt(0) in rtl.createSet(36,37,38)) return false;
    for (var $l = 2, $end = Value.length; $l <= $end; $l++) {
      i = $l;
      if (Value.charCodeAt(i - 1) in rtl.createSet(46,69,101)) return true;
    };
    Result = false;
    return Result;
  };
  this.Sign = function (Value) {
    var Result = 0;
    if (Value > 0) {
      Result = 1}
     else Result = 0;
    return Result;
  };
  this.UnicodeStrToCaption = function (u, MaxLength) {
    var Result = "";
    var InLit = false;
    var Len = 0;
    function AddHash(o) {
      var h = "";
      if ((Result !== "") && InLit) {
        Result = Result + "'";
        Len += 1;
        InLit = false;
      };
      h = "#" + $lp(o);
      Len += h.length;
      if (Len <= MaxLength) Result = Result + h;
    };
    function AddLit(Lit, CaptionLen) {
      if (!InLit) {
        Result = Result + "'";
        Len += 1;
        InLit = true;
      };
      Result = Result + Lit;
      Len += CaptionLen;
    };
    var p = 0;
    Result = "";
    p = 1;
    Len = 0;
    InLit = false;
    while ((Len < MaxLength) && (p <= u.length)) {
      var $tmp = u.charAt(p - 1);
      if ($tmp === "'") {
        AddLit("''",2);
        p += 1;
      } else if ((($tmp >= "\x00") && ($tmp <= "\x1F")) || (($tmp >= "") && ($tmp <= "ÿ")) || (($tmp >= "\uD800") && ($tmp <= "\uFFFF"))) {
        AddHash(u.charCodeAt(p - 1));
        p += 1;
      } else {
        AddLit(u.charAt(p - 1),1);
        p += 1;
      };
    };
    if (InLit) Result = Result + "'";
    return Result;
  };
  this.GetObjName = function (o) {
    var Result = "";
    var GenType = null;
    if (o === null) {
      Result = "nil"}
     else if ($lt35.isPrototypeOf(o) && (o.FName === "")) {
      if (o.ElType === null) {
        Result = "array of const"}
       else Result = $lp11("TArray<%s>",$lp4(18,o.ElType.FName));
    } else if ($lt36.isPrototypeOf(o)) {
      Result = o.FName;
      if ($lt37.isPrototypeOf(o)) {
        GenType = o;
        if ((GenType.GenericTemplateTypes !== null) && (GenType.GenericTemplateTypes.FCount > 0)) Result = Result + $mod.GetGenericParamCommas(GenType.GenericTemplateTypes.FCount);
      };
      Result = Result + ":" + o.$classname;
    } else Result = o.$classname;
    return Result;
  };
  this.GetObjPath = function (o) {
    var Result = "";
    var El = null;
    var GenType = null;
    if ($lt36.isPrototypeOf(o)) {
      El = o;
      Result = ":" + El.$classname;
      while (El !== null) {
        if (El !== o) Result = "." + Result;
        if ($lt37.isPrototypeOf(El)) {
          GenType = El;
          if ((GenType.GenericTemplateTypes !== null) && (GenType.GenericTemplateTypes.FCount > 0) && ($lp7("<",El.FName) < 1)) Result = $mod.GetGenericParamCommas(GenType.GenericTemplateTypes.FCount) + Result;
        };
        if (El.FName !== "") {
          if ($lp12(El.FName,false,false)) {
            Result = El.FName + Result}
           else Result = '"' + El.FName + '"' + Result;
        } else Result = "[" + El.$classname + "]" + Result;
        El = El.FParent;
      };
    } else Result = $mod.GetObjName(o);
    return Result;
  };
  this.GetGenericParamCommas = function (Cnt) {
    var Result = "";
    if (Cnt <= 0) {
      Result = ""}
     else Result = "<" + $lp10(",",Cnt - 1) + ">";
    return Result;
  };
  this.GetElementNameAndParams = function (El, MaxLvl) {
    var Result = "";
    if (El === null) return "(nil)";
    Result = El.FName;
    if ($lt37.isPrototypeOf(El)) Result = Result + $mod.GetTypeParamNames(El.GenericTemplateTypes,MaxLvl - 1);
    return Result;
  };
  this.GetTypeParamNames = function (Templates, MaxLvl) {
    var Result = "";
    var i = 0;
    var El = null;
    if ((Templates === null) || (Templates.FCount === 0)) return "";
    if (MaxLvl <= 0) return "...";
    Result = "<";
    for (var $l = 0, $end = Templates.FCount - 1; $l <= $end; $l++) {
      i = $l;
      if (i > 0) Result = Result + ",";
      El = rtl.getObject(Templates.Get(i));
      if (El.FName !== "") {
        Result = Result + $mod.GetElementNameAndParams(El,MaxLvl - 1)}
       else if ($lt35.isPrototypeOf(El)) {
        Result = Result + "array..."}
       else Result = Result + "...";
    };
    Result = Result + ">";
    return Result;
  };
  this.dbgs$1 = function (v) {
    var Result = "";
    if (v === null) {
      Result = "nil"}
     else Result = v.AsDebugString();
    return Result;
  };
  $mod.$resourcestrings = {sIdentifierNotFound: {org: 'identifier not found "%s"'}, sNotYetImplemented: {org: "not yet implemented: %s"}, sIllegalQualifier: {org: 'illegal qualifier "%s"'}, sSyntaxErrorExpectedButFound: {org: 'Syntax error, "%s" expected but "%s" found'}, sWrongNumberOfParametersForCallTo: {org: 'Wrong number of parameters specified for call to "%s"'}, sIncompatibleTypeArgNo: {org: 'Incompatible type for arg no. %s: Got "%s", expected "%s"'}, sIncompatibleTypeArgNoVarParamMustMatchExactly: {org: 'Incompatible type for arg no. %s: Got "%s", expected "%s". Var param must match exactly.'}, sVariableIdentifierExpected: {org: "Variable identifier expected"}, sDuplicateIdentifier: {org: 'Duplicate identifier "%s" at %s'}, sXExpectedButYFound: {org: "%s expected, but %s found"}, sAncestorCycleDetected: {org: "Ancestor cycle detected"}, sCantUseForwardDeclarationAsAncestor: {org: 'Can\'t use forward declaration "%s" as ancestor'}, sCantDetermineWhichOverloadedFunctionToCall: {org: "Can't determine which overloaded function to call"}, sForwardTypeNotResolved: {org: 'Forward type not resolved "%s"'}, sForwardProcNotResolved: {org: 'Forward %s not resolved "%s"'}, sInvalidXModifierY: {org: "Invalid %s modifier %s"}, sAbstractMethodsMustNotHaveImplementation: {org: "Abstract method must not have an implementation."}, sCallingConventionMismatch: {org: "Calling convention mismatch"}, sResultTypeMismatchExpectedButFound: {org: "Result type mismatch, expected %s, but found %s"}, sFunctionHeaderMismatchForwardVarName: {org: 'function header "%s" doesn\'t match forward : var name changes %s => %s'}, sFunctionHidesIdentifier: {org: 'function hides identifier at "%s". Use overload or reintroduce'}, sNoMethodInAncestorToOverride: {org: 'There is no method in an ancestor class to be overridden "%s"'}, sInheritedOnlyWorksInMethods: {org: "Inherited works only in methods"}, sInheritedNeedsAncestor: {org: "inherited needs an ancestor"}, sNoPropertyFoundToOverride: {org: "No property found to override"}, sExprTypeMustBeClassOrRecordTypeGot: {org: "Expression type must be class or record type, got %s"}, sPropertyNotWritable: {org: "No member is provided to access property"}, sIncompatibleTypesGotExpected: {org: 'Incompatible types: got "%s" expected "%s"'}, sTypesAreNotRelatedXY: {org: 'Types are not related: "%s" and "%s"'}, sAbstractMethodsCannotBeCalledDirectly: {org: "Abstract methods cannot be called directly"}, sMissingParameterX: {org: "Missing parameter %s"}, sInstanceMemberXInaccessible: {org: 'Instance member "%s" inaccessible here'}, sInOperatorExpectsSetElementButGot: {org: "the in-operator expects a set element, but got %s"}, sWrongNumberOfParametersForTypeCast: {org: "wrong number of parameters for type cast to %s"}, sIllegalTypeConversionTo: {org: 'Illegal type conversion: "%s" to "%s"'}, sConstantExpressionExpected: {org: "Constant expression expected"}, sLeftSideOfIsOperatorExpectsAClassButGot: {org: 'left side of is-operator expects a class, but got "%s"'}, sNotReadable: {org: "not readable"}, sClassPropertyAccessorMustBeStatic: {org: "class property accessor must be static"}, sClassPropertyAccessorMustNotBeStatic: {org: "class property accessor must not be static"}, sOnlyOneDefaultPropertyIsAllowed: {org: "Only one default property is allowed"}, sWrongNumberOfParametersForArray: {org: "Wrong number of parameters for array"}, sCantAssignValuesToAnAddress: {org: "Can't assign values to an address"}, sIllegalExpression: {org: "Illegal expression"}, sCantAccessXMember: {org: "Can't access %s member %s"}, sMustBeInsideALoop: {org: "%s must be inside a loop"}, sExpectXArrayElementsButFoundY: {org: "Expect %s array elements, but found %s"}, sCannotCreateADescendantOfTheSealedXY: {org: 'Cannot create a descendant of the sealed %s "%s"'}, sAncestorIsNotExternal: {org: 'Ancestor "%s" is not external'}, sPropertyMustHaveReadOrWrite: {org: "Property must have read or write accessor"}, sVirtualMethodXHasLowerVisibility: {org: 'Virtual method "%s" has a lower visibility (%s) than parent class %s (%s)'}, sExternalClassInstanceCannotAccessStaticX: {org: "External class instance cannot access static %s"}, sXModifierMismatchY: {org: '%s modifier "%s" mismatch'}, sSymbolCannotBePublished: {org: "Symbol cannot be published"}, sCannotTypecastAType: {org: "Cannot type cast a type"}, sTypeIdentifierExpected: {org: "Type identifier expected"}, sCannotNestAnonymousX: {org: "Cannot nest anonymous %s"}, sFoundCallCandidateX: {org: "Found call candidate %s"}, sTextAfterFinalIgnored: {org: "Text after final 'end.'. ignored by compiler"}, sNoMemberIsProvidedToAccessProperty: {org: "No member is provided to access property"}, sTheUseOfXisNotAllowedInARecord: {org: 'The use of "%s" is not allowed in a record'}, sParameterlessConstructorsNotAllowedInRecords: {org: "Parameterless constructors are not allowed in records or record/type helpers"}, sMultipleXinTypeYNameZCAandB: {org: "Multiple %s in %s %s: %s and %s"}, sXCannotHaveParameters: {org: "%s cannot have parameters"}, sSymbolXIsNotPortable: {org: 'Symbol "%s" is not portable'}, sSymbolXIsExperimental: {org: 'Symbol "%s" is experimental'}, sSymbolXIsNotImplemented: {org: 'Symbol "%s" is not implemented'}, sSymbolXBelongsToALibrary: {org: 'Symbol "%s" belongs to a library'}, sSymbolXIsDeprecated: {org: 'Symbol "%s" is deprecated'}, sSymbolXIsDeprecatedY: {org: 'Symbol "%s" is deprecated: %s'}, sRangeCheckError: {org: "Range check error"}, sHighRangeLimitLTLowRangeLimit: {org: "High range limit < low range limit"}, sRangeCheckEvaluatingConstantsVMinMax: {org: "range check error while evaluating constants (%s is not between %s and %s)"}, sOverflowInArithmeticOperation: {org: "Overflow in arithmetic operation"}, sDivByZero: {org: "Division by zero"}, sRangeCheckInSetConstructor: {org: "range check error in set constructor or duplicate set element"}, sIncompatibleTypesGotParametersExpected: {org: "Incompatible types, got %s parameters, expected %s"}, sAddingIndexSpecifierRequiresNewX: {org: 'adding index specifier requires new "%s" specifier'}, sCantFindUnitX: {org: 'can\'t find unit "%s"'}, sCannotFindEnumeratorForType: {org: 'Cannot find an enumerator for the type "%s"'}, sPreviousDeclMissesOverload: {org: 'Previous declaration of "%s" at %s was not marked with "overload" directive'}, sOverloadedProcMissesOverload: {org: 'Overloaded procedure misses "overload" directive. Previous declaration is at %s'}, sMethodHidesMethodOfBaseType: {org: 'Method "%s" hides method of base type "%s" at %s'}, sContextExpectedXButFoundY: {org: '%s: expected "%s", but found "%s"'}, sContextXInvalidY: {org: "%s: invalid %s"}, sIdentifierXIsNotAnInstanceField: {org: 'Identifier "%s" is not an instance field'}, sConstructingClassXWithAbstractMethodY: {org: 'Constructing a class "%s" with abstract method "%s"'}, sXIsNotSupported: {org: "%s is not supported"}, sOperatorIsNotOverloadedAOpB: {org: 'Operator is not overloaded: "%s" %s "%s"'}, sIllegalQualifierAfter: {org: 'illegal qualifier "%s" after "%s"'}, sIllegalQualifierInFrontOf: {org: 'illegal qualifier "%s" in front of "%s"'}, sClassXNotFoundInThisModule: {org: 'class "%s" not found in this module'}, sNoMatchingImplForIntfMethodXFound: {org: 'No matching implementation for interface method "%s" found'}, sClassMethodsMustBeStaticInX: {org: "Class methods must be static in %s"}, sCannotMixMethodResolutionAndDelegationAtX: {org: "Cannot mix method resolution and delegation at %s"}, sImplementsDoesNotSupportArrayProperty: {org: '"implements" does dot support array property'}, sImplementsDoesNotSupportIndex: {org: '"implements" does not support "index"'}, sImplementsUsedOnUnimplIntf: {org: 'Implements-property used on unimplemented interface: "%"'}, sDuplicateImplementsForIntf: {org: 'Duplicate implements for interface "%s" at %s'}, sImplPropMustHaveReadSpec: {org: "Implements-property must have read specifier"}, sDoesNotImplementInterface: {org: '"%s" does not implement interface "%s"'}, sTypeCycleFound: {org: "Type cycle found"}, sTypeXIsNotYetCompletelyDefined: {org: 'type "%s" is not yet completely defined'}, sDuplicateCaseValueXatY: {org: 'Duplicate case value "%s", other at %s'}, sMissingFieldsX: {org: 'Missing fields: "%s"'}, sCantAssignValuesToConstVariable: {org: "Can't assign values to const variable"}, sIllegalAssignmentToForLoopVar: {org: 'Illegal assignment to for-loop variable "%s"'}, sTypeXCannotBeExtendedByATypeHelper: {org: 'Type "%s" cannot be extended by a type helper'}, sTypeXCannotBeExtendedByARecordHelper: {org: 'Type "%s" cannot be extended by a record helper'}, sDerivedXMustExtendASubClassY: {org: 'Derived %s must extend a subclass of "%s" or the class itself'}, sDefaultPropertyNotAllowedInHelperForX: {org: "Default property not allowed in helper for %s"}, sHelpersCannotBeUsedAsTypes: {org: "helpers cannot be used as types"}, sMessageHandlersInvalidParams: {org: "Message handlers can take only one call by ref. parameter"}, sWrongTypeXInArrayConstructor: {org: 'Wrong type "%s" in array constructor'}, sUnknownCustomAttributeX: {org: 'Unknown custom attribute "%s"'}, sAttributeIgnoredBecauseAbstractX: {org: "attribute ignored because abstract %s"}, sCreatingAnInstanceOfAbstractClassY: {org: 'Creating an instance of abstract class "%s"'}, sIllegalExpressionAfterX: {org: "illegal expression after %s"}, sMethodHidesNonVirtualMethodExactly: {org: 'method hides identifier at "%s". Use reintroduce'}, sDuplicatePublishedMethodXAtY: {org: 'Duplicate published method "%s" at %s'}, sConstraintXSpecifiedMoreThanOnce: {org: 'Constraint "%s" specified more than once'}, sConstraintXAndConstraintYCannotBeTogether: {org: '"%s" constraint and "%s" constraint cannot be specified together'}, sXIsNotAValidConstraint: {org: '"%s" is not a valid constraint'}, sWrongNumberOfParametersForGenericX: {org: "wrong number of parameters for generic %s"}, sGenericsWithoutSpecializationAsType: {org: "Generics without specialization cannot be used as a type for a %s"}, sDeclOfXDiffersFromPrevAtY: {org: 'Declaration of "%s" differs from previous declaration at %s'}, sTypeParamXIsMissingConstraintY: {org: 'Type parameter "%s" is missing constraint "%s"'}, sTypeParamXIsNotCompatibleWithY: {org: 'Type parameter "%s" is not compatible with type "%s"'}, sTypeParamXMustSupportIntfY: {org: 'Type parameter "%s" must support interface "%s"'}, sTypeParamsNotAllowedOnX: {org: "Type parameters not allowed on %s"}, sXMethodsCannotHaveTypeParams: {org: "%s methods cannot have type parameters"}, sImplMustNotRepeatConstraints: {org: "Implementations must not repeat constraints"}, sCouldNotInferTypeArgXForMethodY: {org: 'Could not infer generic type argument "%s" for method "%s"'}, sInferredTypeXFromDiffArgsMismatchFromMethodY: {org: 'Inferred type "%s" from different arguments mismatch for method "%s"'}, sParamOfThisTypeCannotHaveDefVal: {org: "Parameters of this type cannot have default values"}, sClassTypesAreNotRelatedXY: {org: 'Class types "%s" and "%s" are not related'}, sDirectiveXNotAllowedHere: {org: 'Directive "%s" not allowed here'}, sAwaitWithoutPromise: {org: "Await without promise"}, sSymbolCannotBeExportedFromALibrary: {org: "The symbol cannot be exported from a library"}, sForLoopControlVarMustBeSimpleLocalVar: {org: "For loop control variable must be simple local variable"}, sIllegalCharConst: {org: "Illegal char constant"}};
});
rtl.module("PParser",["System","SysUtils","Classes","Types","PasTree","PScanner"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lm = pas.System;
  var $lt10 = $lm.TObject;
  var $lm1 = pas.Classes;
  var $lt11 = $lm1.TFPList;
  var $lm2 = pas.SysUtils;
  var $lp = $lm2.FreeAndNil;
  var $lm3 = pas.PasTree;
  var $lt12 = $lm3.TPasFunctionType;
  var $lt13 = $lm3.TPasResultElement;
  var $lt14 = $lm2.Exception;
  var $lm4 = pas.PScanner;
  var $lt15 = $lm4.TPasSourcePos;
  var $lt16 = $lm3.TPasImplExceptOn;
  var $lp1 = $lm2.LowerCase;
  var $lt17 = $lm3.TPasImplWithDo;
  var $lt18 = $lm3.TPasImplBlock;
  var $lt19 = $lm3.TPasImplIfElse;
  var $lt20 = $lm3.TPasImplAsmStatement;
  var $lt21 = $lm3.TPasImplCaseOf;
  var $lt22 = $lm3.TPasImplCaseElse;
  var $lt23 = $lm3.TPasImplCaseStatement;
  var $lt24 = $lm3.TPasImplCommand;
  var $lt25 = $lm3.TPasImplTryExcept;
  var $lt26 = $lm3.TPasImplTryExceptElse;
  var $lt27 = $lm3.TPasImplWhileDo;
  var $lt28 = $lm3.TPasImplForLoop;
  var $lt29 = $lm3.TPasImplRaise;
  var $lt30 = $lm3.TPasImplGoto;
  var $lt31 = $lm3.TPasImplTry;
  var $lt32 = $lm3.TPasImplTryFinally;
  var $lt33 = $lm3.TPasVariable;
  var $lt34 = $lm3.TPasImplRepeatUntil;
  var $lt35 = $lm3.TPasImplAssign;
  var $lt36 = $lm3.TPrimitiveExpr;
  var $lt37 = $lm3.TPasImplLabelMark;
  var $lt38 = $lm3.TPasImplSimple;
  var $lp2 = $lm2.UpperCase;
  var $lt39 = $lm3.TPasInlineVarDeclStatement;
  var $lt40 = $lm3.TPasMembersType;
  var $lt41 = $lt40.TRTTIVisibility;
  var $lp3 = $lm2.CompareText;
  var $lt42 = $lm3.TPasOverloadedProc;
  var $lt43 = $lm3.TPasProcedure;
  var $lt44 = $lm3.TInterfaceSection;
  var $lt45 = $lm3.TPasProcedureType;
  var $lp4 = $lm.VarRecs;
  var $lt46 = $lm3.TPasClassType;
  var $lp5 = $lm2.Format;
  var $lt47 = $lm3.TPasVariant;
  var $lt48 = $lm3.TPasRecordType;
  var $lt49 = $lm3.TPasFunction;
  var $lt50 = $lm3.TPasClassFunction;
  var $lt51 = $lm3.TPasClassProcedure;
  var $lt52 = $lm3.TPasClassConstructor;
  var $lt53 = $lm3.TPasClassDestructor;
  var $lt54 = $lm3.TPasConstructor;
  var $lt55 = $lm3.TPasDestructor;
  var $lt56 = $lm3.TPasOperator;
  var $lt57 = $lm3.TPasClassOperator;
  var $lt58 = $lm3.TPasAnonymousProcedure;
  var $lt59 = $lm3.TPasAnonymousFunction;
  var $lt60 = $lm3.TPasGenericTemplateType;
  var $lp6 = $lm.Pos;
  var $lt61 = $lm3.TBoolConstExpr;
  var $lt62 = $lm3.TBinaryExpr;
  var $lt63 = $lm3.TUnaryExpr;
  var $lt64 = $lm3.TArrayValues;
  var $lt65 = $lm3.TInheritedExpr;
  var $lt66 = $lm3.TSelfExpr;
  var $lt67 = $lm3.TNilExpr;
  var $lt68 = $lm3.TRecordValues;
  var $lt69 = $lm3.TPasExpr;
  var $lt70 = $lm3.TParamsExpr;
  var $lt71 = $lm3.TProcedureExpr;
  var $lt72 = $lm3.TInlineSpecializeExpr;
  var $lt73 = $lm3.TPasArgument;
  var $lt74 = $lm3.TPasDynamicPackage;
  var $lt75 = $lm3.TImplementationSection;
  var $lt76 = $lm3.TPasUnresolvedUnitRef;
  var $lt77 = $lm3.TPasUsesUnit;
  var $lt78 = $lm3.TPasModule;
  var $lp7 = $lm4.SafeFormat;
  var $lt79 = $lm1.TStringList;
  var $lp8 = $lm4.CreateMsgArgs;
  var $lt80 = $lm4.EScannerError;
  var $lp9 = $lm2.BoolToStr$1;
  var $lt81 = $lm3.TPasType;
  var $lt82 = $lm3.TPasUnresolvedTypeRef;
  var $lt83 = $lm3.TPasDeclarations;
  var $lp10 = $lm2.SameText;
  var $lp11 = $lm2.DeQuoteString;
  var $lt84 = $lm3.TProcedureBody;
  var $lt85 = $lm3.TPasArrayType;
  var $lt86 = $lm3.TPasPointerType;
  var $lt87 = $lm3.TPasAliasType;
  var $lt88 = $lm3.TPasStringType;
  var $lt89 = $lm3.TPasTypeAliasType;
  var $lt90 = $lm3.TPasSpecializeType;
  var $lt91 = $lm3.TPasFileType;
  var $lt92 = $lm3.TPasEnumType;
  var $lt93 = $lm3.TPasEnumValue;
  var $lt94 = $lm3.TPasSetType;
  var $lt95 = $lm3.TPasClassOfType;
  var $lt96 = $lm3.TPasProperty;
  var $lt97 = $lm3.TPasRangeType;
  var $lt98 = $lm3.TPasExportSymbol;
  var $lt99 = $lm3.TPasConst;
  var $lt100 = $lm3.TPasResString;
  var $lt101 = $lm3.TPasAttributes;
  var $lt102 = $lm3.TPasProgram;
  var $lt103 = $lm3.TPasLibrary;
  var $lt104 = $lm3.TPasUnitModule;
  var $lp12 = $lm2.ChangeFileExt;
  var $lt105 = $lm3.TProgramSection;
  var $lt106 = $lm3.TLibrarySection;
  var $lt107 = $lm3.TPasRequiredPackage;
  var $lt108 = $lm3.TInitializationSection;
  var $lt109 = $lm3.TFinalizationSection;
  var $lt110 = $lm3.TPasSection;
  var $lt111 = $lm3.TPasImplBeginBlock;
  var $lt112 = $lm3.TPasImplTryHandler;
  var $lt113 = $lm3.TPasLabels;
  var $lp13 = $lm.Copy;
  var $lt114 = $lm3.TProcedureNamePart;
  var $lp14 = $lm2.LeftStr;
  var $lp15 = $lm.Delete;
  var $lp16 = $lm3.FreeProcNameParts;
  var $lt115 = $lm3.TPasMethodResolution;
  this.nErrNoSourceGiven = 2001;
  this.nParserError = 2003;
  this.nParserUngetTokenError = 2005;
  this.nParserExpectTokenError = 2006;
  this.nParserForwardNotInterface = 2007;
  this.nParserExpectVisibility = 2008;
  this.nParserStrangeVisibility = 2009;
  this.nParserExpectToken2Error = 2010;
  this.nParserExpectedCommaRBracket = 2011;
  this.nParserExpectedCommaSemicolon = 2012;
  this.nParserExpectedAssignIn = 2013;
  this.nParserExpectedCommaColon = 2014;
  this.nErrUnknownOperatorType = 2015;
  this.nParserOnlyOneArgumentCanHaveDefault = 2016;
  this.nParserExpectedLBracketColon = 2017;
  this.nParserExpectedSemiColonEnd = 2018;
  this.nParserExpectedConstVarID = 2019;
  this.nParserExpectedNested = 2020;
  this.nParserExpectedColonID = 2021;
  this.nParserSyntaxError = 2022;
  this.nParserTypeSyntaxError = 2023;
  this.nParserArrayTypeSyntaxError = 2024;
  this.nParserParamsOrResultTypesNoLocalTypeDefs = 2025;
  this.nParserExpectedIdentifier = 2026;
  this.nParserNotAProcToken = 2026;
  this.nRangeExpressionExpected = 2027;
  this.nParserExpectCase = 2028;
  this.nParserGenericFunctionNeedsGenericKeyword = 2029;
  this.nLogStartImplementation = 2030;
  this.nLogStartInterface = 2031;
  this.nParserNoConstructorAllowed = 2032;
  this.nParserNoFieldsAllowed = 2033;
  this.nParserInvalidRecordVisibility = 2034;
  this.nErrRecordConstantsNotAllowed = 2035;
  this.nErrRecordMethodsNotAllowed = 2036;
  this.nErrRecordPropertiesNotAllowed = 2037;
  this.nErrRecordTypesNotAllowed = 2038;
  this.nParserTypeNotAllowedHere = 2039;
  this.nParserNotAnOperand = 2040;
  this.nParserArrayPropertiesCannotHaveDefaultValue = 2041;
  this.nParserDefaultPropertyMustBeArray = 2042;
  this.nParserUnknownProcedureType = 2043;
  this.nParserTypeParamsNotAllowedOnType = 2045;
  this.nParserDuplicateIdentifier = 2046;
  this.nParserDefaultParameterRequiredFor = 2047;
  this.nParserOnlyOneVariableCanBeInitialized = 2048;
  this.nParserExpectedTypeButGot = 2049;
  this.nParserPropertyArgumentsCanNotHaveDefaultValues = 2050;
  this.nParserExpectedExternalClassName = 2051;
  this.nParserNoConstRangeAllowed = 2052;
  this.nErrRecordVariablesNotAllowed = 2053;
  this.nParserResourcestringsMustBeGlobal = 2054;
  this.nParserOnlyOneVariableCanBeAbsolute = 2055;
  this.nParserXNotAllowedInY = 2056;
  this.nInvalidMessageType = 2058;
  this.nErrCompilationAborted = 2059;
  this.nErrInvalidParamsForDirectiveX = 2060;
  $lt = this.TPasScopeType = {"0": "stModule", stModule: 0, "1": "stUsesClause", stUsesClause: 1, "2": "stTypeSection", stTypeSection: 2, "3": "stTypeDef", stTypeDef: 3, "4": "stResourceString", stResourceString: 4, "5": "stProcedure", stProcedure: 5, "6": "stProcedureHeader", stProcedureHeader: 6, "7": "stSpecializeType", stSpecializeType: 7, "8": "stWithExpr", stWithExpr: 8, "9": "stExceptOnExpr", stExceptOnExpr: 9, "10": "stExceptOnStatement", stExceptOnStatement: 10, "11": "stForLoopHeader", stForLoopHeader: 11, "12": "stDeclaration", stDeclaration: 12, "13": "stAncestors", stAncestors: 13, "14": "stInitialFinalization", stInitialFinalization: 14};
  $lt1 = this.TPParserLogEvent = {"0": "pleInterface", pleInterface: 0, "1": "pleImplementation", pleImplementation: 1};
  rtl.createClass(this,"TPasTreeContainer",$lt10,function () {
    $lt2 = this;
    this.$init = function () {
      $lt10.$init.call(this);
      this.FCurrentParser = null;
      this.FNeedComments = false;
      this.FOnLog = null;
      this.FPParserLogEvents = {};
      this.FScannerLogEvents = {};
      this.FPackage = null;
      this.FInterfaceOnly = false;
      this.FOwnedElements = null;
    };
    this.$final = function () {
      this.FCurrentParser = undefined;
      this.FOnLog = undefined;
      this.FPParserLogEvents = undefined;
      this.FScannerLogEvents = undefined;
      this.FPackage = undefined;
      this.FOwnedElements = undefined;
      $lt10.$final.call(this);
    };
    this.SetCurrentParser = function (AValue) {
      if (this.FCurrentParser === AValue) return;
      this.FCurrentParser = AValue;
    };
    this.Create$1 = function () {
      this.FOwnedElements = $lt11.$create("Create");
      return this;
    };
    this.Destroy = function () {
      var i = 0;
      var El = null;
      for (var $l = this.FOwnedElements.FCount - 1; $l >= 0; $l--) {
        i = $l;
        El = rtl.getObject(this.FOwnedElements.Get(i));
        El = rtl.freeLoc(El);
      };
      $lp({p: this, get: function () {
          return this.p.FOwnedElements;
        }, set: function (v) {
          this.p.FOwnedElements = v;
        }});
      $lt10.Destroy.call(this);
    };
    this.HandleResultOnError = function (aElement) {
      var Result = false;
      if (aElement === null) ;
      Result = true;
      return Result;
    };
    this.CreateElement$2 = function (AClass, AName, AParent, AVisibility, ASrcPos, TypeParams) {
      var Result = null;
      Result = this.CreateElement$1(AClass,AName,AParent,AVisibility,ASrcPos.FileName,ASrcPos.Row);
      if (TypeParams === null) ;
      return Result;
    };
    this.CreateFunctionType = function (AName, AResultName, AParent, UseParentAsResultParent, ASrcPos, TypeParams) {
      var Result = null;
      var ResultParent = null;
      Result = this.CreateElement$2($lt12,AName,AParent,0,ASrcPos,TypeParams);
      if (UseParentAsResultParent) {
        ResultParent = AParent}
       else ResultParent = Result;
      Result.ResultEl = this.CreateElement$2($lt13,AResultName,ResultParent,0,ASrcPos,TypeParams);
      return Result;
    };
    this.FindElementFor = function (AName, AParent, TypeParamCount) {
      var Result = null;
      Result = this.FindElement(AName);
      if (AParent === null) ;
      if (TypeParamCount === 0) ;
      return Result;
    };
    this.BeginScope = function (ScopeType, El) {
      if (ScopeType === 0) ;
      if (El === null) ;
    };
    this.FinishScope = function (ScopeType, El) {
      if (ScopeType === 0) ;
      if ((El != null) && (this.FCurrentParser !== null)) El.SourceEndLinenumber = this.FCurrentParser.CurSourcePos().Row;
    };
    this.FinishTypeAlias = function (aType) {
      if (aType.get() === null) ;
    };
    this.FindModule = function (AName) {
      var Result = null;
      if (AName === "") ;
      Result = null;
      return Result;
    };
    this.FindModule$1 = function (AName, NameExpr, InFileExpr) {
      var Result = null;
      Result = this.FindModule(AName);
      if (NameExpr === null) ;
      if (InFileExpr === null) ;
      return Result;
    };
    this.CheckPendingUsedInterface = function (Section) {
      var Result = false;
      if (Section === null) ;
      Result = false;
      return Result;
    };
    this.NeedArrayValues = function (El) {
      var Result = false;
      Result = false;
      if (El === null) ;
      return Result;
    };
    this.GetDefaultClassVisibility = function (AClass) {
      var Result = 0;
      Result = 0;
      if (AClass === null) ;
      return Result;
    };
    this.ModeChanged = function (Sender, NewMode, Before, Handled) {
      if (Sender === null) ;
      if (NewMode === 3) ;
      if (Before) ;
      if (Handled.get()) ;
    };
  });
  rtl.createClass(this,"EParserError",$lt14,function () {
    $lt3 = this;
    this.$init = function () {
      $lt14.$init.call(this);
      this.FErrNo = 0;
      this.FFilename = "";
      this.FRow = 0;
      this.FColumn = 0;
    };
    this.Create$2 = function (AReason, AFilename, ARow, AColumn, aErrorNr) {
      $lt14.Create$1.call(this,AReason);
      this.FFilename = AFilename;
      this.FRow = ARow;
      this.FColumn = AColumn;
      this.FErrNo = aErrorNr;
      return this;
    };
  });
  rtl.recNewT(this,"TRecoveryContext",function () {
    $lt4 = this;
    this.Element = null;
    this.Error = null;
    this.UngetRestartToken = false;
    this.HaveScope = false;
    this.Scope = 0;
    this.$new = function () {
      var r = Object.create(this);
      r.RestartTokens = {};
      return r;
    };
    this.$eq = function (b) {
      return (this.Element === b.Element) && (this.Error === b.Error) && rtl.eqSet(this.RestartTokens,b.RestartTokens) && (this.UngetRestartToken === b.UngetRestartToken) && (this.HaveScope === b.HaveScope) && (this.Scope === b.Scope);
    };
    this.$assign = function (s) {
      this.Element = s.Element;
      this.Error = s.Error;
      this.RestartTokens = rtl.refSet(s.RestartTokens);
      this.UngetRestartToken = s.UngetRestartToken;
      this.HaveScope = s.HaveScope;
      this.Scope = s.Scope;
      return this;
    };
    this.Create = function (aResult, aError, aRestartTokens, aUngetRestartToken) {
      var Result = $lt4.$new();
      Result.$assign($lt4.$new());
      Result.Element = aResult;
      Result.Error = aError;
      Result.RestartTokens = rtl.refSet(aRestartTokens);
      Result.UngetRestartToken = aUngetRestartToken;
      return Result;
    };
    this.Create$1 = function (aResult, aError, aRestartTokens, aUngetRestartToken, aScope) {
      var Result = $lt4.$new();
      Result.$assign($lt4.Create(aResult,aError,rtl.refSet(aRestartTokens),aUngetRestartToken));
      Result.Scope = aScope;
      Result.HaveScope = true;
      return Result;
    };
  });
  rtl.createClass(this,"TPasParser",$lt10,function () {
    $lt5 = this;
    this.FTokenRingSize = 32;
    $lt6 = this.TDeclParseType = {"0": "dptBasic", dptBasic: 0, "1": "dptFull", dptFull: 1, "2": "dptInline", dptInline: 2};
    rtl.recNewT(this,"TTokenRec",function () {
      $lt7 = this;
      this.Token = 0;
      this.AsString = "";
      this.Comments = null;
      this.IsEscaped = false;
      this.$new = function () {
        var r = Object.create(this);
        r.SourcePos = $lt15.$new();
        r.TokenPos = $lt15.$new();
        return r;
      };
      this.$eq = function (b) {
        return (this.Token === b.Token) && (this.AsString === b.AsString) && (this.Comments === b.Comments) && this.SourcePos.$eq(b.SourcePos) && this.TokenPos.$eq(b.TokenPos) && (this.IsEscaped === b.IsEscaped);
      };
      this.$assign = function (s) {
        this.Token = s.Token;
        this.AsString = s.AsString;
        this.Comments = s.Comments;
        this.SourcePos.$assign(s.SourcePos);
        this.TokenPos.$assign(s.TokenPos);
        this.IsEscaped = s.IsEscaped;
        return this;
      };
    });
    rtl.recNewT(this,"TParseStatementParams",function () {
      $lt8 = this;
      this.Parser = null;
      this.Parent = null;
      this.NewImplElement = null;
      this.CurBlock = null;
      this.$eq = function (b) {
        return (this.Parser === b.Parser) && (this.Parent === b.Parent) && (this.NewImplElement === b.NewImplElement) && (this.CurBlock === b.CurBlock);
      };
      this.$assign = function (s) {
        this.Parser = s.Parser;
        this.Parent = s.Parent;
        this.NewImplElement = s.NewImplElement;
        this.CurBlock = s.CurBlock;
        return this;
      };
      this.CloseBlock = function () {
        var Result = false;
        var C = null;
        var NeedUnget = false;
        var tk = 0;
        C = this.CurBlock.$class.ClassType();
        if (C === $lt16) {
          this.Parser.FEngine.FinishScope(10,this.CurBlock);
          NeedUnget = this.Parser.FCurToken === 17;
          if (NeedUnget) this.Parser.NextToken();
          tk = this.Parser.FCurToken;
          if ((tk in rtl.createSet(58,57)) || ((tk === 3) && ($lp1(this.Parser.FCurTokenString) === "on"))) {}
          else this.Parser.ParseExcExpectedAorB("end","on");
          if (NeedUnget) this.Parser.UngetToken();
        } else if (C === $lt17) this.Parser.FEngine.FinishScope(8,this.CurBlock);
        this.CurBlock = rtl.as(this.CurBlock.FParent,$lt18);
        Result = this.CurBlock === this.Parent;
        return Result;
      };
      this.CloseStatement = function (CloseIfs) {
        var Result = false;
        if (this.CurBlock === this.Parent) return true;
        while (this.CurBlock.CloseOnSemicolon() || (CloseIfs && $lt19.isPrototypeOf(this.CurBlock))) if (this.CloseBlock()) return true;
        Result = false;
        return Result;
      };
      this.CreateBlock = function (NewBlock) {
        this.CurBlock.AddElement(NewBlock);
        this.CurBlock = NewBlock;
        if (this.NewImplElement === null) this.NewImplElement = this.CurBlock;
      };
      this.CreateElement = function (AClass) {
        var Result = null;
        Result = this.Parser.CreateElement$1(AClass,"",this.CurBlock,this.Parser.CurTokenPos());
        return Result;
      };
      this.CreateElement$1 = function (AClass, ASrcPos) {
        var Result = null;
        Result = this.Parser.CreateElement$1(AClass,"",this.CurBlock,ASrcPos);
        return Result;
      };
      this.ParseAsm = function () {
        var Result = false;
        var El = null;
        El = this.CreateElement($lt20);
        this.Parser.ParseAsmBlock(El);
        this.CurBlock.AddElement(El);
        if (this.NewImplElement === null) this.NewImplElement = this.CurBlock;
        Result = this.CloseStatement(false);
        return Result;
      };
      this.ParseCase = function () {
        var Result = false;
        var SrcPos = $lt15.$new();
        var Left = null;
        var CaseOf = null;
        var CaseSt = null;
        var CaseElse = null;
        var SubBlock = null;
        Result = false;
        SrcPos.$assign(this.Parser.CurTokenPos());
        this.Parser.NextToken();
        Left = this.Parser.DoParseExpression(this.CurBlock,null,true);
        this.Parser.UngetToken();
        this.Parser.ExpectToken(86);
        CaseOf = this.CreateElement$1($lt21,SrcPos);
        CaseOf.CaseExpr = Left;
        Left.SetParent(CaseOf);
        this.CreateBlock(CaseOf);
        do {
          this.Parser.NextToken();
          var $tmp = this.Parser.FCurToken;
          if ($tmp === 58) {
            if (this.CurBlock.Elements.FCount === 0) this.Parser.ParseExc(2028,rtl.getResStr($mod,"SParserExpectCase"));
            break;
          } else if (($tmp === 57) || ($tmp === 89)) {
            CaseElse = this.CreateElement($lt22);
            CaseOf.ElseBranch = CaseElse;
            this.CreateBlock(CaseElse);
            break;
          } else {
            do {
              SrcPos.$assign(this.Parser.CurTokenPos());
              Left = this.Parser.DoParseExpression(this.CurBlock,null,true);
              if ($lt23.isPrototypeOf(this.CurBlock)) {
                this.CurBlock.AddExpression(Left);
                Left = null;
              } else {
                CaseSt = this.CreateElement$1($lt23,SrcPos);
                CaseSt.AddExpression(Left);
                this.CreateBlock(CaseSt);
              };
              if (this.Parser.FCurToken === 12) {
                this.Parser.NextToken()}
               else if (this.Parser.FCurToken !== 16) this.Parser.ParseExcTokenError($lm4.TokenInfos[12]);
            } while (!(this.Parser.FCurToken === 16));
            this.Parser.ParseStatement(this.CurBlock,{get: function () {
                return SubBlock;
              }, set: function (v) {
                SubBlock = v;
              }});
            this.CloseBlock();
            if (this.Parser.FCurToken !== 17) this.Parser.NextToken();
            if (this.Parser.FCurToken in rtl.createSet(17,57,58,89)) {}
            else this.Parser.ParseExcTokenError($lm4.TokenInfos[17]);
            if (this.Parser.FCurToken !== 17) this.Parser.UngetToken();
          };
        } while (!false);
        if (this.Parser.FCurToken === 58) {
          if (this.CloseBlock()) return true;
          if (this.CloseStatement(false)) return true;
        };
        return Result;
      };
      this.ParseElse = function () {
        var Result = false;
        var ImplCmd = null;
        var TryElse = null;
        Result = false;
        do {
          if ($lt19.isPrototypeOf(this.CurBlock)) {
            if (this.CurBlock.IfBranch === null) {
              ImplCmd = this.CreateElement($lt24);
              this.CurBlock.AddElement(ImplCmd);
            };
            if ((this.Parser.FCurToken === 57) && (this.CurBlock.ElseBranch === null)) {
              this.Parser.NextToken();
              if (this.Parser.FCurToken === 57) {
                ImplCmd = this.CreateElement($lt24);
                this.CurBlock.AddElement(ImplCmd);
                this.CloseBlock();
              };
              this.Parser.UngetToken();
              break;
            };
          } else if ($lt25.isPrototypeOf(this.CurBlock) && (this.Parser.FCurToken === 57)) {
            this.CloseBlock();
            TryElse = this.CreateElement($lt26);
            this.CurBlock.ElseBranch = TryElse;
            this.CurBlock = TryElse;
            break;
          } else if ($lt23.isPrototypeOf(this.CurBlock)) {
            this.Parser.UngetToken();
            if (this.CurBlock !== this.Parent) this.Parser.CheckToken(17);
            return true;
          } else if ($lt27.isPrototypeOf(this.CurBlock) || $lt28.isPrototypeOf(this.CurBlock) || $lt17.isPrototypeOf(this.CurBlock) || $lt29.isPrototypeOf(this.CurBlock) || $lt30.isPrototypeOf(this.CurBlock) || $lt16.isPrototypeOf(this.CurBlock)) {}
          else this.Parser.ParseExcSyntaxError();
          this.CloseBlock();
        } while (!false);
        return Result;
      };
      this.ParseExcept = function () {
        var Result = false;
        var TryExc = null;
        Result = false;
        if (this.CloseStatement(true)) {
          this.Parser.UngetToken();
          return true;
        };
        if ($lt31.isPrototypeOf(this.CurBlock)) {
          TryExc = this.CreateElement($lt25);
          this.CurBlock.FinallyExcept = TryExc;
          this.CurBlock = TryExc;
        } else this.Parser.ParseExcSyntaxError();
        return Result;
      };
      this.ParseFinally = function () {
        var Result = false;
        var TryFin = null;
        Result = false;
        if (this.CloseStatement(true)) {
          this.Parser.UngetToken();
          return true;
        };
        if ($lt31.isPrototypeOf(this.CurBlock)) {
          TryFin = this.CreateElement($lt32);
          this.CurBlock.FinallyExcept = TryFin;
          this.CurBlock = TryFin;
        } else this.Parser.ParseExcSyntaxError();
        return Result;
      };
      this.ParseIf = function () {
        var SrcPos = $lt15.$new();
        var Left = null;
        var IfElse = null;
        SrcPos.$assign(this.Parser.CurTokenPos());
        this.Parser.NextToken();
        Left = this.Parser.DoParseExpression(this.CurBlock,null,true);
        this.Parser.UngetToken();
        IfElse = this.CreateElement$1($lt19,SrcPos);
        IfElse.ConditionExpr = Left;
        Left.SetParent(IfElse);
        this.CreateBlock(IfElse);
        this.Parser.ExpectToken(105);
      };
      this.ParseOn = function () {
        var Result = false;
        var SrcPos = $lt15.$new();
        var ImplExceptOn = null;
        var aName = "";
        var TypeEl = null;
        var VarEl = null;
        Result = false;
        if ($lt25.isPrototypeOf(this.CurBlock)) {
          SrcPos.$assign(this.Parser.CurTokenPos());
          this.Parser.ExpectIdentifier({});
          ImplExceptOn = this.CreateElement$1($lt16,SrcPos);
          SrcPos.$assign(this.Parser.CurSourcePos());
          aName = this.Parser.FCurTokenString;
          this.Parser.NextToken();
          if (this.Parser.FCurToken === 16) {
            this.Parser.NextToken();
            TypeEl = this.Parser.ParseSimpleType(ImplExceptOn,SrcPos,"",false);
            ImplExceptOn.TypeEl = TypeEl;
            VarEl = this.Parser.CreateElement$1($lt33,aName,ImplExceptOn,SrcPos);
            ImplExceptOn.VarEl = VarEl;
            VarEl.VarType = TypeEl;
            if (TypeEl.FParent === ImplExceptOn) TypeEl.SetParent(VarEl);
          } else {
            this.Parser.UngetToken();
            ImplExceptOn.TypeEl = this.Parser.ParseSimpleType(ImplExceptOn,SrcPos,"",false);
          };
          this.Parser.FEngine.FinishScope(9,ImplExceptOn);
          this.CreateBlock(ImplExceptOn);
          this.Parser.ExpectToken(55);
        } else this.Parser.ParseExcSyntaxError();
        return Result;
      };
      this.ParseUntil = function () {
        var Result = false;
        var Left = null;
        Result = false;
        if (this.CloseStatement(true)) {
          this.Parser.UngetToken();
          return true;
        };
        if ($lt34.isPrototypeOf(this.CurBlock)) {
          this.Parser.NextToken();
          Left = this.Parser.DoParseExpression(this.CurBlock,null,true);
          this.Parser.UngetToken();
          this.CurBlock.ConditionExpr = Left;
          if (this.CloseBlock()) return true;
        } else this.Parser.ParseExcSyntaxError();
        return Result;
      };
      this.ParseExpr = function () {
        var $Self = this;
        function AddStatement(El) {
          $Self.CurBlock.AddElement(El);
          if ($Self.NewImplElement === null) $Self.NewImplElement = El;
          $Self.Parser.UngetToken();
        };
        var SrcPos = $lt15.$new();
        var Left = null;
        var Right = null;
        var ImplAssign = null;
        var Mark = null;
        var Simple = null;
        SrcPos.$assign(this.Parser.CurTokenPos());
        Left = this.Parser.DoParseExpression(this.CurBlock,null,true);
        var $tmp = this.Parser.FCurToken;
        if (($tmp === 27) || ($tmp === 33) || ($tmp === 34) || ($tmp === 35) || ($tmp === 36)) {
          ImplAssign = this.CreateElement$1($lt35,SrcPos);
          ImplAssign.Left = Left;
          Left.SetParent(ImplAssign);
          ImplAssign.Kind = $mod.TokenToAssignKind(this.Parser.FCurToken);
          this.Parser.NextToken();
          Right = this.Parser.DoParseExpression(this.CurBlock,null,true);
          ImplAssign.Right = Right;
          Right.SetParent(ImplAssign);
          AddStatement(ImplAssign);
        } else if ($tmp === 16) {
          if (!(29 in this.Parser.FScanner.FCurrentBoolSwitches)) {
            this.Parser.ParseExcTokenError($lm4.TokenInfos[17])}
           else if (!$lt36.isPrototypeOf(Left)) this.Parser.ParseExcTokenError($lm4.TokenInfos[17]);
          Mark = this.CreateElement$1($lt37,SrcPos);
          Mark.LabelId = Left.Value;
          this.CurBlock.AddElement(Mark);
        } else {
          Simple = this.CreateElement$1($lt38,SrcPos);
          Simple.Expr = Left;
          Left.SetParent(Simple);
          AddStatement(Simple);
        };
      };
      this.ParseFor = function () {
        var ForLoop = null;
        var Expr = null;
        var lt = 0;
        var SrcPos = $lt15.$new();
        var isVarDef = false;
        ForLoop = this.CreateElement($lt28);
        isVarDef = false;
        if (56 in this.Parser.GetCurrentModeSwitches()) {
          this.Parser.NextToken();
          isVarDef = this.Parser.FCurToken === 114;
          if (!isVarDef) this.Parser.UngetToken();
        };
        SrcPos.$assign(this.Parser.CurTokenPos());
        this.Parser.ExpectIdentifier({});
        Expr = this.Parser.CreatePrimitiveExpr(ForLoop,0,this.Parser.FCurTokenString);
        ForLoop.VariableName = Expr;
        do {
          this.Parser.NextToken();
          var $tmp = this.Parser.FCurToken;
          if ($tmp === 27) {
            lt = 0;
            ForLoop.ImplicitTyped = isVarDef && (ForLoop.VarType === null);
            break;
          } else if ($tmp === 16) {
            if (!isVarDef) this.Parser.ParseExc(2013,rtl.getResStr($mod,"SParserExpectedAssignIn"));
            ForLoop.VarType = this.Parser.ParseType$1(ForLoop,SrcPos,"",false);
          } else if ($tmp === 71) {
            lt = 2;
            ForLoop.ImplicitTyped = isVarDef && (ForLoop.VarType === null);
            break;
          } else if ($tmp === 14) {
            if (isVarDef) this.Parser.ParseExc(2013,rtl.getResStr($mod,"SParserExpectedAssignIn"));
            SrcPos.$assign(this.Parser.CurTokenPos());
            this.Parser.ExpectIdentifier({});
            this.Parser.AddToBinaryExprChain({get: function () {
                return Expr;
              }, set: function (v) {
                Expr = v;
              }},this.Parser.CreatePrimitiveExpr(ForLoop,0,this.Parser.FCurTokenString),27,SrcPos);
            ForLoop.VariableName = Expr;
          } else {
            this.Parser.ParseExc(2013,rtl.getResStr($mod,"SParserExpectedAssignIn"));
          };
        } while (!false);
        this.Parser.NextToken();
        ForLoop.StartExpr = this.Parser.DoParseExpression(ForLoop,null,true);
        if (lt === 0) {
          if (!(this.Parser.FCurToken in rtl.createSet(107,56))) this.Parser.ParseExcTokenError($lm4.TokenInfos[107]);
          if (this.Parser.FCurToken === 56) lt = 1;
          this.Parser.NextToken();
          ForLoop.EndExpr = this.Parser.DoParseExpression(ForLoop,null,true);
        };
        ForLoop.LoopType = lt;
        if (this.Parser.FCurToken !== 55) this.Parser.ParseExcTokenError($lm4.TokenInfos[55]);
        this.Parser.FEngine.FinishScope(11,ForLoop);
        this.CreateBlock(ForLoop);
      };
      this.ParseGoto = function () {
        var SrcPos = $lt15.$new();
        var ImplGoto = null;
        SrcPos.$assign(this.Parser.CurTokenPos());
        this.Parser.ExpectTokens(rtl.createSet(3,6));
        ImplGoto = this.CreateElement$1($lt30,SrcPos);
        this.CreateBlock(ImplGoto);
        ImplGoto.LabelName = this.Parser.FCurTokenString;
      };
      this.ParseRaise = function () {
        var ImplRaise = null;
        ImplRaise = this.CreateElement($lt29);
        this.CreateBlock(ImplRaise);
        this.Parser.NextToken();
        if (this.Parser.FCurToken in rtl.createSet(57,58,17,89)) {
          this.Parser.UngetToken()}
         else {
          ImplRaise.ExceptObject = this.Parser.DoParseExpression(ImplRaise,null,true);
          if ((this.Parser.FCurToken === 3) && ($lp2(this.Parser.FCurTokenString) === "AT")) {
            this.Parser.NextToken();
            ImplRaise.ExceptAddr = this.Parser.DoParseExpression(ImplRaise,null,true);
          };
          if (this.Parser.FCurToken in rtl.createSet(57,58,17,89)) this.Parser.UngetToken();
        };
      };
      this.ParseWhile = function () {
        var SrcPos = $lt15.$new();
        var WhileDo = null;
        var Left = null;
        SrcPos.$assign(this.Parser.CurTokenPos());
        this.Parser.NextToken();
        Left = this.Parser.DoParseExpression(this.CurBlock,null,true);
        this.Parser.UngetToken();
        WhileDo = this.CreateElement$1($lt27,SrcPos);
        WhileDo.ConditionExpr = Left;
        Left.SetParent(WhileDo);
        this.CreateBlock(WhileDo);
        this.Parser.ExpectToken(55);
      };
      this.ParseWith = function () {
        var SrcPos = $lt15.$new();
        var WithDo = null;
        var Expr = null;
        SrcPos.$assign(this.Parser.CurTokenPos());
        this.Parser.NextToken();
        WithDo = this.CreateElement$1($lt17,SrcPos);
        Expr = this.Parser.DoParseExpression(this.CurBlock,null,true);
        WithDo.AddExpression(Expr);
        Expr.SetParent(WithDo);
        this.Parser.FEngine.BeginScope(8,Expr);
        this.CreateBlock(WithDo);
        do {
          if (this.Parser.FCurToken === 55) break;
          if (this.Parser.FCurToken !== 12) this.Parser.ParseExcTokenError($lm4.TokenInfos[55]);
          this.Parser.NextToken();
          Expr = this.Parser.DoParseExpression(this.CurBlock,null,true);
          WithDo.AddExpression(Expr);
          this.Parser.FEngine.BeginScope(8,Expr);
        } while (!false);
      };
      this.ParseVarStatement = function () {
        var VarSt = null;
        var SrcPos = $lt15.$new();
        SrcPos.$assign(this.Parser.CurTokenPos());
        VarSt = this.CreateElement$1($lt39,SrcPos);
        this.NewImplElement = VarSt;
        this.CurBlock.AddElement(VarSt);
        this.Parser.ParseVarList(VarSt,VarSt.Declarations,0,2);
      };
    });
    this.FTokenRing$a$clone = function (a) {
      var b = [];
      b.length = 32;
      for (var c = 0; c < 32; c++) b[c] = $lt7.$clone(a[c]);
      return b;
    };
    this.$init = function () {
      $lt10.$init.call(this);
      this.FCurModule = null;
      this.FCurTokenEscaped = false;
      this.FFailOnModuleErors = false;
      this.FFileResolver = null;
      this.FIdentifierPos = $lt15.$new();
      this.FImplicitUses = null;
      this.FLastMsg = "";
      this.FLastMsgArgs = [];
      this.FLastMsgNumber = 0;
      this.FLastMsgPattern = "";
      this.FLastMsgType = 0;
      this.FLogEvents = {};
      this.FOnError = null;
      this.FOnLog = null;
      this.FOptions = {};
      this.FScanner = null;
      this.FEngine = null;
      this.FCurToken = 0;
      this.FCurTokenString = "";
      this.FSavedComments = "";
      this.FErrorCount = 0;
      this.FMaxErrorCount = 0;
      this.FTokenRing = rtl.arraySetLength(null,$lt7,32);
      this.FTokenRingCur = 0;
      this.FTokenRingStart = 0;
      this.FTokenRingEnd = 0;
      this.RTTIVisibility = $lt41.$new();
    };
    this.$final = function () {
      this.FCurModule = undefined;
      this.FFileResolver = undefined;
      this.FIdentifierPos = undefined;
      this.FImplicitUses = undefined;
      this.FLastMsgArgs = undefined;
      this.FLogEvents = undefined;
      this.FOnError = undefined;
      this.FOnLog = undefined;
      this.FOptions = undefined;
      this.FScanner = undefined;
      this.FEngine = undefined;
      this.FTokenRing = undefined;
      this.RTTIVisibility = undefined;
      $lt10.$final.call(this);
    };
    this.CheckOverloadList = function (AList, AName, OldMember) {
      var Result = null;
      var I = 0;
      Result = null;
      I = 0;
      while ((Result === null) && (I < AList.FCount)) {
        OldMember.set(rtl.getObject(AList.Get(I)));
        if ($lp3(OldMember.get().FName,AName) === 0) {
          if ($lt42.isPrototypeOf(OldMember.get())) {
            Result = OldMember.get()}
           else {
            Result = this.CreateElement($lt42,AName,OldMember.get().FParent);
            OldMember.get().SetParent(Result);
            Result.Visibility = OldMember.get().Visibility;
            Result.Overloads.Add(OldMember.get());
            Result.SourceFilename = OldMember.get().SourceFilename;
            Result.SourceLinenumber = OldMember.get().SourceLinenumber;
            Result.FDocComment = OldMember.get().FDocComment;
            AList.Put(I,Result);
          };
        };
        I += 1;
      };
      if (Result === null) OldMember.set(null);
      return Result;
    };
    this.DoCheckHint = function (Element) {
      var Result = false;
      var ahint = 0;
      Result = this.IsCurTokenHint({get: function () {
          return ahint;
        }, set: function (v) {
          ahint = v;
        }});
      if (Result) {
        Element.FHints = rtl.unionSet(Element.FHints,rtl.createSet(ahint));
        if (ahint === 0) {
          this.NextToken();
          if (this.FCurToken !== 4) {
            this.UngetToken()}
           else Element.FHintMessage = this.FCurTokenString;
        };
      };
      return Result;
    };
    this.GetCurrentModeSwitches = function () {
      var Result = {};
      if (this.FScanner != null) {
        Result = rtl.refSet(this.FScanner.FCurrentModeSwitches)}
       else Result = rtl.createSet(0);
      return Result;
    };
    this.GetVariableModifiers = function (Parent, VarMods, LibName, ExportName, AllowedMods) {
      var Result = "";
      var S = "";
      var ExtMod = 0;
      Result = "";
      LibName.set(null);
      ExportName.set(null);
      VarMods.set({});
      this.NextToken();
      if ((0 in AllowedMods) && this.CurTokenIsIdentifier("cvar")) {
        Result = ";cvar";
        VarMods.set(rtl.includeSet(VarMods.get(),0));
        this.ExpectToken(17);
        this.NextToken();
      };
      S = $lp1(this.CurTokenText());
      if ((1 in AllowedMods) && ((S === "external") || (S === "weakexternal"))) {
        ExtMod = 1}
       else if ((2 in AllowedMods) && (S === "public")) {
        ExtMod = 2}
       else if ((3 in AllowedMods) && (S === "export")) {
        ExtMod = 3}
       else if ((6 in AllowedMods) && (S === "far")) {
        ExtMod = 6}
       else {
        this.UngetToken();
        return Result;
      };
      VarMods.set(rtl.includeSet(VarMods.get(),ExtMod));
      Result = Result + ";" + this.CurTokenText();
      this.NextToken();
      if (!(this.FCurToken in rtl.createSet(4,3))) {
        if ((this.FCurToken === 17) && (ExtMod in rtl.createSet(1,2,3))) return Result;
        this.ParseExcSyntaxError();
      };
      if ((ExtMod === 1) && (this.FCurToken in rtl.createSet(4,3)) && !this.CurTokenIsIdentifier("name")) {
        Result = Result + " " + this.CurTokenText();
        LibName.set(this.DoParseExpression(Parent,null,true));
      };
      if (this.FCurToken === 17) return Result;
      if (!this.CurTokenIsIdentifier("name")) this.ParseExcSyntaxError();
      this.NextToken();
      if (!(this.FCurToken in rtl.createSet(7,4,3))) this.ParseExcTokenError($lm4.TokenInfos[4]);
      Result = Result + " " + this.CurTokenText();
      ExportName.set(this.DoParseExpression(Parent,null,true));
      return Result;
    };
    this.GetVariableValueAndLocation = function (Parent, IsUntypedInline, Value, AbsoluteExpr, Location) {
      var Result = false;
      Value.set(null);
      AbsoluteExpr.set(null);
      Location.set("");
      this.NextToken();
      if (IsUntypedInline) {
        Result = this.FCurToken === 27}
       else Result = this.FCurToken === 19;
      if (Result) {
        this.NextToken();
        if (IsUntypedInline) {
          Value.set(this.DoParseExpression(Parent,null,true))}
         else Value.set(this.DoParseConstValueExpression(Parent));
      };
      if (this.FCurToken === 39) {
        Result = true;
        this.NextToken();
        if (this.FCurToken in rtl.createSet(6,8)) {
          AbsoluteExpr.set(this.DoParseExpression(Parent,null,false));
          Location.set(this.FCurTokenString);
        } else {
          Location.set(this.ReadDottedIdentifier(Parent,AbsoluteExpr,true));
          if (this.FCurToken !== 17) AbsoluteExpr.set(this.DoParseExpression(Parent,AbsoluteExpr.get(),false));
          this.UngetToken();
        };
      } else this.UngetToken();
      return Result;
    };
    this.HandleProcedureModifier = function (Parent, pm, IsBracketed) {
      var $Self = this;
      var P = null;
      var E = null;
      function AddModifier() {
        if (pm in P.FModifiers) $Self.ParseExcSyntaxError();
        P.AddModifier(pm);
      };
      P = Parent;
      if (pm !== 10) AddModifier();
      var $tmp = pm;
      if ($tmp === 12) {
        this.NextToken();
        if (this.FCurToken in rtl.createSet(7,4,3)) {
          if (!this.CurTokenIsIdentifier("NAME")) {
            E = this.DoParseExpression(Parent,null,true);
            if (P != null) P.LibraryExpr = E;
          };
          if (this.CurTokenIsIdentifier("NAME")) {
            this.NextToken();
            if (!(this.FCurToken in rtl.createSet(7,4,3))) this.ParseExcTokenError($lm4.TokenInfos[4]);
            E = this.DoParseExpression(Parent,null,true);
            if (P != null) P.LibrarySymbolName = E;
          };
          if (this.CurTokenIsIdentifier("INDEX")) {
            this.NextToken();
            if (!(this.FCurToken in rtl.createSet(6,7,4,3))) this.ParseExcTokenError($lm4.TokenInfos[6]);
            E = this.DoParseExpression(Parent,null,true);
            if (P != null) P.LibrarySymbolIndex = E;
          };
          if (this.FCurToken !== 17) this.UngetToken();
        } else this.UngetToken();
      } else if ($tmp === 20) {
        this.NextToken();
        if (this.FCurToken !== 4) this.ParseExcTokenError($lm4.TokenInfos[4]);
        this.NextToken();
        this.CheckToken(17);
      } else if ($tmp === 10) {
        this.NextToken();
        if (!this.CurTokenIsIdentifier("name")) {
          if (IsBracketed) {
            if (!(this.FCurToken in rtl.createSet(12,23))) this.ParseExcTokenError($lm4.TokenInfos[12]);
            AddModifier();
            return;
          };
          if ($lt40.isPrototypeOf(P.FParent)) {
            this.UngetToken();
            this.UngetToken();
            return;
          };
          AddModifier();
          this.CheckToken(17);
          return;
        } else {
          AddModifier();
          this.NextToken();
          if (!(this.FCurToken in rtl.createSet(4,3))) this.ParseExcTokenError($lm4.TokenInfos[4]);
          E = this.DoParseExpression(Parent,null,true);
          if ($lt43.isPrototypeOf(Parent)) Parent.PublicName = E;
          this.CheckToken(17);
        };
      } else if ($tmp === 13) {
        if ($lt44.isPrototypeOf(Parent.FParent)) {
          this.ParseExc(2007,rtl.getResStr($mod,"SParserForwardNotInterface"));
          this.UngetToken();
        };
      } else if ($tmp === 6) {
        this.NextToken();
        E = this.DoParseExpression(Parent,null,true);
        Parent.MessageExpr = E;
        if ($lt36.isPrototypeOf(E)) {
          Parent.FMessageName = E.Value;
          var $tmp1 = E.Kind;
          if (($tmp1 === 1) || ($tmp1 === 8)) {
            Parent.FMessageType = 1}
           else if ($tmp1 === 2) {
            Parent.FMessageType = 2}
           else if ($tmp1 === 0) {}
          else {
            this.ParseExc(2058,rtl.getResStr($mod,"SErrInvalidMessageType"));
          };
        };
        if (this.FCurToken !== 17) this.UngetToken();
      } else if ($tmp === 14) {
        this.NextToken();
        Parent.DispIDExpr = this.DoParseExpression(Parent,null,true);
        if (this.FCurToken !== 17) this.UngetToken();
      } else if ($tmp === 11) {
        this.NextToken();
        if (this.FCurToken === 16) {
          this.NextToken();
          this.CheckToken(3);
          Parent.CompProcID = this.FCurTokenString;
          this.NextToken();
        };
        if (this.FCurToken !== 17) this.UngetToken();
      };
    };
    this.HandleProcedureTypeModifier = function (ProcType, ptm) {
      var Expr = null;
      if (ptm in ProcType.Modifiers) this.ParseExcSyntaxError();
      ProcType.Modifiers = rtl.includeSet(ProcType.Modifiers,ptm);
      if (ptm === 3) {
        this.NextToken();
        if (this.FCurToken !== 86) {
          this.UngetToken();
          return;
        };
        this.NextToken();
        Expr = null;
        ProcType.VarArgsType = this.ParseTypeReference(ProcType,false,{get: function () {
            return Expr;
          }, set: function (v) {
            Expr = v;
          }});
      };
    };
    this.ParseMembersLocalConsts = function (AType, AVisibility) {
      var C = null;
      var Done = false;
      while ((this.FCurToken === 22) && (47 in this.GetCurrentModeSwitches())) {
        this.ParseAttributes(AType,true);
        this.NextToken();
      };
      do {
        this.SaveIdentifierPosition();
        C = this.ParseConstDecl(AType);
        if (C != null) {
          C.Visibility = AVisibility;
          AType.Members.Add(C);
          this.FEngine.FinishScope(12,C);
        };
        this.NextToken();
        if (this.FCurToken !== 17) return;
        this.NextToken();
        var $tmp = this.FCurToken;
        if (($tmp === 39) || ($tmp === 3)) {
          Done = this.CheckVisibility(this.FCurTokenString,{get: function () {
              return AVisibility;
            }, set: function (v) {
              AVisibility = v;
            }},false) || this.CheckCurtokenIsFinal(AType)}
         else if ($tmp === 22) {
          if (47 in this.GetCurrentModeSwitches()) {
            do {
              this.ParseAttributes(AType,true);
              this.NextToken();
              Done = false;
            } while (!(this.FCurToken !== 22))}
           else Done = true}
         else {
          Done = true;
        };
        if (Done) this.UngetToken();
      } while (!Done);
    };
    this.ParseMembersLocalTypes = function (AType, AVisibility) {
      var T = null;
      var Done = false;
      Done = false;
      while ((this.FCurToken === 22) && (47 in this.GetCurrentModeSwitches())) {
        this.ParseAttributes(AType,true);
        this.NextToken();
      };
      do {
        T = this.ParseTypeDecl(AType);
        T.Visibility = AVisibility;
        AType.Members.Add(T);
        this.NextToken();
        var $tmp = this.FCurToken;
        if ($tmp === 67) {
          this.NextToken();
          if (this.FCurToken !== 3) Done = true;
          this.UngetToken();
        } else if ($tmp === 3) {
          Done = this.CheckVisibility(this.FCurTokenString,{get: function () {
              return AVisibility;
            }, set: function (v) {
              AVisibility = v;
            }},false);
          if (!Done && this.CheckCurtokenIsFinal(AType)) Done = true;
        } else if ($tmp === 22) {
          if (47 in this.GetCurrentModeSwitches()) {
            do {
              this.ParseAttributes(AType,true);
              this.NextToken();
              Done = false;
            } while (!(this.FCurToken !== 22))}
           else Done = true}
         else {
          Done = true;
        };
        if (Done) this.UngetToken();
      } while (!Done);
      this.FEngine.FinishScope(2,AType);
    };
    this.ParseVarList = function (Parent, VarList, AVisibility, VarParseType) {
      var i = 0;
      var AttrCnt = 0;
      var VarCnt = 0;
      var Value = null;
      var aLibName = null;
      var aExpName = null;
      var AbsoluteExpr = null;
      var VarType = null;
      var VarEl = null;
      var H = {};
      var VarMods = {};
      var AllowedVarMods = {};
      var D = "";
      var Mods = "";
      var AbsoluteLocString = "";
      var OldForceCaret = false;
      var ok = false;
      var ExternalStruct = false;
      var IsUntyped = false;
      Value = null;
      aLibName = null;
      aExpName = null;
      AbsoluteExpr = null;
      AbsoluteLocString = "";
      AttrCnt = 0;
      VarCnt = 0;
      ok = false;
      IsUntyped = false;
      try {
        D = this.SaveComments();
        VarEl = null;
        while (this.FCurToken === 22) {
          if (47 in this.GetCurrentModeSwitches()) {
            VarList.Add(this.ParseAttributes(Parent,false));
            AttrCnt += 1;
            this.NextToken();
          } else this.CheckToken(3);
        };
        do {
          VarEl = this.CreateElement$3($lt33,this.FCurTokenString,Parent,AVisibility,this.CurTokenPos(),null);
          VarList.Add(VarEl);
          VarCnt += 1;
          this.NextToken();
          var $tmp = this.FCurToken;
          if ($tmp === 16) {
            break}
           else if ($tmp === 12) {
            this.ExpectIdentifier({})}
           else if ($tmp === 27) {
            if (VarParseType !== 2) this.ParseExc(2014,rtl.getResStr($mod,"SParserExpectedCommaColon"));
            this.UngetToken();
            IsUntyped = true;
            break;
          } else {
            this.ParseExc(2014,rtl.getResStr($mod,"SParserExpectedCommaColon"));
          };
        } while (!(this.FCurToken === 16));
        VarType = null;
        if (this.FCurToken === 16) {
          OldForceCaret = this.FScanner.SetForceCaret(true);
          try {
            VarType = this.ParseVarType(VarEl);
            if (VarList.Get(VarList.FCount - 1) !== VarEl) throw $lt14.$create("Create$1",["20241121115919"]);
          } finally {
            this.FScanner.SetForceCaret(OldForceCaret);
          };
          for (var $l = VarList.FCount - VarCnt, $end = VarList.FCount - 1; $l <= $end; $l++) {
            i = $l;
            VarEl = rtl.getObject(VarList.Get(i));
            VarEl.VarType = VarType;
          };
        };
        H = rtl.refSet(this.CheckHint(null,false));
        if (VarParseType in rtl.createSet(1,2)) this.GetVariableValueAndLocation(VarEl,IsUntyped,{get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }},{get: function () {
            return AbsoluteExpr;
          }, set: function (v) {
            AbsoluteExpr = v;
          }},{get: function () {
            return AbsoluteLocString;
          }, set: function (v) {
            AbsoluteLocString = v;
          }});
        if (VarCnt > 1) {
          if (Value !== null) this.ParseExc(2048,rtl.getResStr($mod,"SParserOnlyOneVariableCanBeInitialized"));
          if (AbsoluteExpr !== null) this.ParseExc(2055,rtl.getResStr($mod,"SParserOnlyOneVariableCanBeAbsolute"));
        };
        VarEl.Expr = Value;
        Value = null;
        ExternalStruct = (52 in this.GetCurrentModeSwitches()) && $lt40.isPrototypeOf(Parent);
        H = rtl.unionSet(H,this.CheckHint(null,false));
        if ((VarParseType === 1) || ExternalStruct) {
          this.NextToken();
          if (this.FCurToken !== 17) this.UngetToken();
          AllowedVarMods = {};
          if (ExternalStruct) {
            AllowedVarMods = rtl.createSet(1)}
           else AllowedVarMods = rtl.createSet(0,1,2,3,6);
          Mods = this.GetVariableModifiers(VarEl,{get: function () {
              return VarMods;
            }, set: function (v) {
              VarMods = v;
            }},{get: function () {
              return aLibName;
            }, set: function (v) {
              aLibName = v;
            }},{get: function () {
              return aExpName;
            }, set: function (v) {
              aExpName = v;
            }},AllowedVarMods);
          if ((Mods === "") && (this.FCurToken !== 17)) this.NextToken();
        } else {
          this.NextToken();
          VarMods = {};
          Mods = "";
        };
        this.SaveComments$1(D);
        for (var $l1 = VarList.FCount - VarCnt, $end1 = VarList.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          VarEl = rtl.getObject(VarList.Get(i));
          if ((VarType != null) && $lt45.isPrototypeOf(VarType)) {
            VarEl.FHints = rtl.refSet(VarType.FHints)}
           else VarEl.FHints = rtl.refSet(H);
          VarEl.Modifiers = Mods;
          VarEl.VarModifiers = rtl.refSet(VarMods);
          VarEl.AbsoluteLocation = AbsoluteLocString;
          if (AbsoluteExpr !== null) {
            VarEl.AbsoluteExpr = AbsoluteExpr;
            AbsoluteExpr = null;
          };
          if (aLibName !== null) {
            VarEl.LibraryName = aLibName;
            aLibName = null;
          };
          if (aExpName !== null) {
            VarEl.ExportName = aExpName;
            aExpName = null;
          };
        };
        ok = true;
      } finally {
        if (!ok) VarList.SetCount(VarList.FCount - VarCnt - AttrCnt);
      };
    };
    this.SetOptions = function (AValue) {
      if (rtl.eqSet(this.FOptions,AValue)) return;
      this.FOptions = rtl.refSet(AValue);
      if (this.FScanner != null) this.FScanner.SetOptions(rtl.refSet(AValue));
    };
    this.OnScannerModeChanged = function (Sender, NewMode, Before, Handled) {
      this.FEngine.ModeChanged(this,NewMode,Before,Handled);
      if (Sender === null) ;
    };
    this.OnScannerDirectiveRTTI = function (Sender, Directive, Param, Handled) {
      var NewVisibility = $lt41.$new();
      if (!(20 in this.FOptions)) return;
      Handled.set(true);
      if (!this.ParseRTTIDirective(Param,NewVisibility)) this.ParseExc$1(2060,rtl.getResStr($mod,"SErrInvalidParamsForDirectiveX"),$lp4(18,Directive));
      this.RTTIVisibility.$assign(NewVisibility);
      if (Sender === null) ;
    };
    this.AllowFinal = function (aType) {
      var Result = false;
      Result = false;
      if (!$lt46.isPrototypeOf(aType)) return Result;
      while ((aType !== null) && !Result) {
        Result = aType.IsExternal;
        if ($lt46.isPrototypeOf(aType.FParent)) {
          aType = aType.FParent}
         else aType = null;
      };
      return Result;
    };
    this.CheckCurtokenIsFinal = function (aType) {
      var Result = false;
      Result = !this.FCurTokenEscaped && this.CurTokenIsIdentifier("final") && this.AllowFinal(aType);
      return Result;
    };
    this.SaveComments = function () {
      var Result = "";
      if (this.FEngine.FNeedComments) this.FSavedComments = this.CurComments().GetTextStr();
      Result = this.FSavedComments;
      return Result;
    };
    this.SaveComments$1 = function (AValue) {
      var Result = "";
      this.FSavedComments = AValue;
      Result = this.FSavedComments;
      return Result;
    };
    this.LogEvent = function (E) {
      var Result = false;
      Result = E in this.FLogEvents;
      return Result;
    };
    this.DoLog = function (MsgType, MsgNumber, Msg, SkipSourceInfo) {
      this.DoLog$1(MsgType,MsgNumber,Msg,[],SkipSourceInfo);
    };
    this.DoLog$1 = function (MsgType, MsgNumber, Fmt, Args, SkipSourceInfo) {
      var Msg = "";
      if ((this.FScanner !== null) && this.FScanner.IgnoreMsgType(MsgType)) return;
      this.SetLastMsg(MsgType,MsgNumber,Fmt,Args);
      if (this.FOnLog != null) {
        Msg = $lm4.MessageTypeNames[MsgType] + ": ";
        if (SkipSourceInfo || !(this.FScanner != null)) {
          Msg = Msg + this.FLastMsg}
         else Msg = Msg + $lp5("%s(%d,%d) : %s",$lp4(18,this.FScanner.FCurFilename,0,this.FScanner.FCurRow,0,this.FScanner.GetCurColumn(),18,this.FLastMsg));
        this.FOnLog(this,Msg);
      };
    };
    this.GetProcTypeFromToken = function (tk, IsClass) {
      var Result = 0;
      Result = 0;
      var $tmp = tk;
      if ($tmp === 92) {
        if (IsClass) {
          Result = 6}
         else Result = 0}
       else if ($tmp === 66) {
        if (IsClass) {
          Result = 7}
         else Result = 1}
       else if ($tmp === 50) {
        if (IsClass) {
          Result = 8}
         else Result = 4}
       else if ($tmp === 52) {
        if (IsClass) {
          Result = 9}
         else Result = 5}
       else if ($tmp === 87) {
        if (IsClass) {
          Result = 3}
         else Result = 2}
       else {
        this.ParseExc(2026,rtl.getResStr($mod,"SParserNotAProcToken"));
      };
      return Result;
    };
    this.ParseAsmBlock = function (AsmBlock) {
      var $Self = this;
      var LastToken = 0;
      var p = null;
      function atEndOfAsm() {
        var Result = false;
        Result = ($Self.FCurToken === 58) && !(LastToken in rtl.createSet(21,37));
        return Result;
      };
      if (4 in this.FOptions) {
        this.FTokenRingCur = 0;
        this.FTokenRingStart = 0;
        this.FTokenRingEnd = 1;
        p = this.FTokenRing[0];
        p.Comments.Clear();
        do {
          this.FScanner.ReadNonPascalTillEndToken(true);
          var $tmp = this.FScanner.FCurToken;
          if (($tmp === 118) || ($tmp === 1) || ($tmp === 2)) {
            AsmBlock.FTokens.Add(this.FScanner.GetTokenString())}
           else if ($tmp === 58) {
            p.Token = 58;
            p.AsString = this.FScanner.GetTokenString();
            break;
          } else {
            p.Token = 0;
            p.AsString = "";
            break;
          };
        } while (!false);
        this.FCurToken = p.Token;
        this.FCurTokenString = p.AsString;
        this.CheckToken(58);
      } else {
        LastToken = 0;
        this.NextToken();
        while (!atEndOfAsm()) {
          AsmBlock.FTokens.Add(this.CurTokenText());
          LastToken = this.FCurToken;
          this.NextToken();
        };
      };
      this.NextToken();
      if (this.FCurToken !== 22) {
        this.UngetToken()}
       else {
        this.NextToken();
        while (!(this.FCurToken in rtl.createSet(23,0))) {
          AsmBlock.FModifierTokens.Add(this.FCurTokenString);
          this.NextToken();
        };
      };
    };
    this.ParseRecordMembers = function (ARec, AEndToken, AllowMethods) {
      var $Self = this;
      var isClass = false;
      function EnableIsClass() {
        isClass = true;
        $Self.FScanner.SetTokenOption(1);
      };
      function DisableIsClass() {
        if (!isClass) return;
        isClass = false;
        $Self.FScanner.UnSetTokenOption(1);
      };
      function CheckSection() {
        var Result = false;
        $Self.NextToken();
        Result = $Self.FCurToken in rtl.createSet(114,110,48,46);
        if (!Result) $Self.UngetToken();
        return Result;
      };
      var VariantName = "";
      var v = 0;
      var Proc = null;
      var ProcType = 0;
      var Prop = null;
      var NamePos = $lt15.$new();
      var OldCount = 0;
      var i = 0;
      var CurEl = null;
      var LastToken = 0;
      var AllowVisibility = false;
      var IsGeneric = false;
      IsGeneric = false;
      AllowVisibility = 34 in this.GetCurrentModeSwitches();
      if (AllowVisibility) {
        v = 3}
       else v = 0;
      isClass = false;
      LastToken = 96;
      while (this.FCurToken !== AEndToken) {
        this.SaveComments();
        var $tmp = this.FCurToken;
        if ($tmp === 110) {
          DisableIsClass();
          if (!AllowMethods) this.ParseExc(2038,rtl.getResStr($mod,"SErrRecordTypesNotAllowed"));
          if (CheckSection()) continue;
          this.ExpectToken(3);
          this.ParseMembersLocalTypes(ARec,v);
        } else if ($tmp === 48) {
          DisableIsClass();
          if (!AllowMethods) this.ParseExc(2035,rtl.getResStr($mod,"SErrRecordConstantsNotAllowed"));
          if (CheckSection()) continue;
          this.ExpectToken(3);
          this.SaveIdentifierPosition();
          this.ParseMembersLocalConsts(ARec,v);
        } else if ($tmp === 114) {
          if (!AllowMethods) this.ParseExc(2053,rtl.getResStr($mod,"SErrRecordVariablesNotAllowed"));
          if (CheckSection()) continue;
          this.ExpectToken(3);
          this.SaveIdentifierPosition();
          OldCount = ARec.Members.FCount;
          this.ParseInlineVarDecl(ARec,ARec.Members,v,AEndToken === 9);
          for (var $l = OldCount, $end = ARec.Members.FCount - 1; $l <= $end; $l++) {
            i = $l;
            CurEl = rtl.getObject(ARec.Members.Get(i));
            if (CurEl.$class.ClassType() !== $lt33) continue;
            if (isClass) {
              CurEl.VarModifiers = rtl.unionSet(CurEl.VarModifiers,rtl.createSet(4));
            };
            this.FEngine.FinishScope(12,CurEl);
          };
        } else if ($tmp === 47) {
          if (LastToken === 47) this.ParseExc(2023,rtl.getResStr($mod,"SParserTypeSyntaxError"));
          if (!AllowMethods) {
            this.NextToken();
            var $tmp1 = this.FCurToken;
            if ($tmp1 === 48) {
              this.ParseExc(2035,rtl.getResStr($mod,"SErrRecordConstantsNotAllowed"))}
             else if ($tmp1 === 114) {
              this.ParseExc(2053,rtl.getResStr($mod,"SErrRecordVariablesNotAllowed"))}
             else {
              this.ParseExc(2036,rtl.getResStr($mod,"SErrRecordMethodsNotAllowed"));
            };
          };
          EnableIsClass();
        } else if ($tmp === 94) {
          DisableIsClass();
          if (!AllowMethods) this.ParseExc(2037,rtl.getResStr($mod,"SErrRecordPropertiesNotAllowed"));
          this.ExpectToken(3);
          Prop = this.ParseProperty(ARec,this.FCurTokenString,v,LastToken === 47);
          ARec.Members.Add(Prop);
          this.FEngine.FinishScope(12,Prop);
        } else if (($tmp === 87) || ($tmp === 92) || ($tmp === 50) || ($tmp === 66)) {
          DisableIsClass();
          if (!AllowMethods) this.ParseExc(2036,rtl.getResStr($mod,"SErrRecordMethodsNotAllowed"));
          ProcType = this.GetProcTypeFromToken(this.FCurToken,LastToken === 47);
          Proc = this.ParseProcedureOrFunctionDecl(ARec,ProcType,IsGeneric,v);
          if ($lt42.isPrototypeOf(Proc.FParent)) {
            Proc.FParent.Overloads.Add(Proc)}
           else ARec.Members.Add(Proc);
          this.FEngine.FinishScope(5,Proc);
        } else if ($tmp === 52) {
          this.ParseExc(2032,rtl.getResStr($mod,"SParserNoConstructorAllowed"))}
         else if (($tmp === 67) || ($tmp === 39) || ($tmp === 76) || ($tmp === 100) || ($tmp === 3)) {
          if ((this.FCurToken === 67) && AllowVisibility) {
            this.NextToken();
            if (this.FCurToken in rtl.createSet(47,87,66,92)) {
              IsGeneric = true;
              continue;
            };
            this.UngetToken();
          };
          if (AllowVisibility && this.CheckVisibility(this.FCurTokenString,{get: function () {
              return v;
            }, set: function (w) {
              v = w;
            }},false)) {
            if (!(v in rtl.createSet(1,3,6))) this.ParseExc(2034,rtl.getResStr($mod,"SParserInvalidRecordVisibility"));
            this.NextToken();
            continue;
          };
          OldCount = ARec.Members.FCount;
          this.ParseInlineVarDecl(ARec,ARec.Members,v,AEndToken === 9);
          for (var $l1 = OldCount, $end1 = ARec.Members.FCount - 1; $l1 <= $end1; $l1++) {
            i = $l1;
            CurEl = rtl.getObject(ARec.Members.Get(i));
            if (CurEl.$class.ClassType() !== $lt33) continue;
            if (isClass) {
              CurEl.VarModifiers = rtl.unionSet(CurEl.VarModifiers,rtl.createSet(4));
            };
            this.FEngine.FinishScope(12,CurEl);
          };
        } else if ($tmp === 22) {
          if (47 in this.GetCurrentModeSwitches()) {
            this.ParseAttributes(ARec,true)}
           else this.CheckToken(3)}
         else if ($tmp === 46) {
          DisableIsClass();
          ARec.Variants = $lt11.$create("Create");
          this.NextToken();
          VariantName = this.FCurTokenString;
          NamePos.$assign(this.CurSourcePos());
          this.NextToken();
          if (this.FCurToken === 16) {
            ARec.VariantEl = this.CreateElement$1($lt33,VariantName,ARec,NamePos);
            ARec.VariantEl.VarType = this.ParseType$1(ARec,this.CurSourcePos(),"",false);
          } else {
            this.UngetToken();
            this.UngetToken();
            ARec.VariantEl = this.ParseType$1(ARec,this.CurSourcePos(),"",false);
          };
          this.ExpectToken(86);
          this.ParseRecordVariantParts(ARec,AEndToken);
        } else {
          this.ParseExc(2023,rtl.getResStr($mod,"SParserTypeSyntaxError"));
        };
        if (this.FCurToken === AEndToken) break;
        LastToken = this.FCurToken;
        this.NextToken();
        if (!isClass) IsGeneric = false;
      };
    };
    this.ParseRecordVariantParts = function (ARec, AEndToken) {
      var RecordEl = null;
      var V = null;
      var Done = false;
      do {
        V = this.CreateElement($lt47,"",ARec);
        ARec.Variants.Add(V);
        do {
          this.NextToken();
          V.Values.Add(this.DoParseExpression(ARec,null,true));
          if (!(this.FCurToken in rtl.createSet(12,16))) this.ParseExc(2014,rtl.getResStr($mod,"SParserExpectedCommaColon"));
        } while (!(this.FCurToken === 16));
        this.ExpectToken(8);
        this.NextToken();
        RecordEl = this.CreateElement($lt48,"",V);
        RecordEl.RTTIVisibility.$assign(this.RTTIVisibility);
        V.Members = RecordEl;
        this.ParseRecordMembers(RecordEl,9,false);
        this.NextToken();
        if (this.FCurToken === 17) this.NextToken();
        Done = this.FCurToken === AEndToken;
        if (!Done) this.UngetToken();
      } while (!Done);
    };
    this.GetProcedureClass = function (ProcType) {
      var Result = null;
      Result = null;
      var $tmp = ProcType;
      if ($tmp === 1) {
        Result = $lt49}
       else if ($tmp === 7) {
        Result = $lt50}
       else if ($tmp === 6) {
        Result = $lt51}
       else if ($tmp === 8) {
        Result = $lt52}
       else if ($tmp === 9) {
        Result = $lt53}
       else if ($tmp === 0) {
        Result = $lt43}
       else if ($tmp === 4) {
        Result = $lt54}
       else if ($tmp === 5) {
        Result = $lt55}
       else if ($tmp === 2) {
        Result = $lt56}
       else if ($tmp === 3) {
        Result = $lt57}
       else if ($tmp === 10) {
        Result = $lt58}
       else if ($tmp === 11) {
        Result = $lt59}
       else {
        this.ParseExc$1(2043,rtl.getResStr($mod,"SParserUnknownProcedureType"),$lp4(0,ProcType));
      };
      return Result;
    };
    this.ParseClassFields = function (AType, AVisibility, IsClassField) {
      var Element = null;
      var I = 0;
      var OldCount = 0;
      var isStatic = false;
      var VarEl = null;
      var Members = null;
      Members = AType.Members;
      OldCount = Members.FCount;
      this.ParseInlineVarDecl(AType,Members,AVisibility,false);
      if (this.FCurToken === 17) {
        this.NextToken();
        isStatic = this.CurTokenIsIdentifier("static");
        if (isStatic) {
          this.ExpectToken(17)}
         else this.UngetToken();
      };
      for (var $l = OldCount, $end = Members.FCount - 1; $l <= $end; $l++) {
        I = $l;
        Element = rtl.getObject(Members.Get(I));
        Element.Visibility = AVisibility;
        if (Element.$class.ClassType() !== $lt33) continue;
        VarEl = Element;
        if (IsClassField) VarEl.VarModifiers = rtl.includeSet(VarEl.VarModifiers,4);
        if (isStatic) VarEl.VarModifiers = rtl.includeSet(VarEl.VarModifiers,5);
        this.FEngine.FinishScope(12,VarEl);
      };
    };
    var TSectionType = {"0": "stNone", stNone: 0, "1": "stConst", stConst: 1, "2": "stType", stType: 2, "3": "stVar", stVar: 3, "4": "stClassVar", stClassVar: 4};
    this.ParseClassMembers = function (AType) {
      var CurVisibility = 0;
      var CurSection = 0;
      var haveClass = false;
      var IsMethodResolution = false;
      var LastToken = 0;
      var PropEl = null;
      var MethodRes = null;
      CurSection = 0;
      haveClass = false;
      if (this.FEngine != null) {
        CurVisibility = this.FEngine.GetDefaultClassVisibility(AType)}
       else CurVisibility = 3;
      LastToken = this.FCurToken;
      while (this.FCurToken !== 58) {
        haveClass = LastToken === 47;
        var $tmp = this.FCurToken;
        if ($tmp === 110) {
          if (haveClass) this.ParseExcExpectedAorB("Procedure","Function");
          var $tmp1 = AType.ObjKind;
          if (($tmp1 === 1) || ($tmp1 === 0) || ($tmp1 === 3) || ($tmp1 === 4) || ($tmp1 === 5)) {}
          else if ($tmp1 === 2) {
            if (!AType.IsExternal) this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"TYPE",18,$lm3.ObjKindNames[AType.ObjKind]))}
           else {
            this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"TYPE",18,$lm3.ObjKindNames[AType.ObjKind]));
          };
          CurSection = 2;
          this.NextToken();
          this.ParseMembersLocalTypes(AType,CurVisibility);
          CurSection = 0;
        } else if ($tmp === 48) {
          if (haveClass) this.ParseExcExpectedAorB("Procedure","Var");
          var $tmp2 = AType.ObjKind;
          if (($tmp2 === 1) || ($tmp2 === 0) || ($tmp2 === 3) || ($tmp2 === 4) || ($tmp2 === 5)) {}
          else if ($tmp2 === 2) {
            if (!AType.IsExternal) this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"CONST",18,$lm3.ObjKindNames[AType.ObjKind]))}
           else {
            this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"CONST",18,$lm3.ObjKindNames[AType.ObjKind]));
          };
          CurSection = 1;
          this.NextToken();
          this.ParseMembersLocalConsts(AType,CurVisibility);
          CurSection = 0;
        } else if ($tmp === 114) {
          if ((AType.ObjKind in $lm3.okWithFields) || (haveClass && (AType.ObjKind in $lm3.okAllHelpers)) || ((AType.ObjKind === 2) && AType.IsExternal)) {}
          else this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"VAR",18,$lm3.ObjKindNames[AType.ObjKind]));
          if (haveClass) {
            CurSection = 4}
           else CurSection = 3;
        } else if (($tmp === 39) || ($tmp === 3)) {
          if (this.CheckCurtokenIsFinal(AType)) {
            this.NextToken();
            continue;
          } else if (this.CheckVisibility(this.FCurTokenString,{get: function () {
              return CurVisibility;
            }, set: function (v) {
              CurVisibility = v;
            }},AType.ObjKind === 9)) {
            CurSection = 0}
           else {
            if (haveClass) {
              if (LastToken === 47) this.ParseExcExpectedAorB("Procedure","Function");
            } else this.SaveComments();
            var $tmp3 = CurSection;
            if (($tmp3 === 0) || ($tmp3 === 3)) {
              if (!(AType.ObjKind in $lm3.okWithFields)) this.ParseExc$1(2033,rtl.getResStr($mod,"SParserNoFieldsAllowedInX"),$lp4(18,$lm3.ObjKindNames[AType.ObjKind]));
              this.ParseClassFields(AType,CurVisibility,false);
              if (this.FCurToken === 58) this.UngetToken();
            } else if ($tmp3 === 4) {
              if (!((AType.ObjKind in $lm3.okWithClassFields) || ((AType.ObjKind === 2) && AType.IsExternal))) this.ParseExc$1(2033,rtl.getResStr($mod,"SParserNoFieldsAllowedInX"),$lp4(18,$lm3.ObjKindNames[AType.ObjKind]));
              this.ParseClassFields(AType,CurVisibility,true);
            } else {
              throw $lt14.$create("Create$1",["Internal error 201704251415"]);
            };
          }}
         else if (($tmp === 50) || ($tmp === 52)) {
          CurSection = 0;
          if (!haveClass) this.SaveComments();
          var $tmp4 = AType.ObjKind;
          if (($tmp4 === 0) || ($tmp4 === 1)) {}
          else if (($tmp4 === 3) || ($tmp4 === 5) || ($tmp4 === 4)) {
            if ((this.FCurToken === 52) && !haveClass) this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"destructor",18,$lm3.ObjKindNames[AType.ObjKind]));
          } else {
            if (this.FCurToken === 50) {
              this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"constructor",18,$lm3.ObjKindNames[AType.ObjKind]))}
             else this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"destructor",18,$lm3.ObjKindNames[AType.ObjKind]));
          };
          this.ProcessMethod(AType,haveClass,CurVisibility,false);
        } else if (($tmp === 92) || ($tmp === 66)) {
          CurSection = 0;
          IsMethodResolution = false;
          if (!haveClass) {
            this.SaveComments();
            if (AType.ObjKind === 1) {
              this.NextToken();
              if (this.FCurToken === 3) {
                this.NextToken();
                IsMethodResolution = this.FCurToken === 14;
                this.UngetToken();
              };
              this.UngetToken();
            };
          };
          if (IsMethodResolution) {
            MethodRes = this.ParseMethodResolution(AType);
            AType.Members.Add(MethodRes);
            this.FEngine.FinishScope(12,MethodRes);
          } else this.ProcessMethod(AType,haveClass,CurVisibility,false);
        } else if ($tmp === 67) {
          if (3 in this.GetCurrentModeSwitches()) this.ParseExcSyntaxError();
          if (haveClass && (LastToken === 47)) this.ParseExcTokenError("Generic Class");
          var $tmp5 = AType.ObjKind;
          if (($tmp5 === 1) || ($tmp5 === 0) || ($tmp5 === 3) || ($tmp5 === 4) || ($tmp5 === 5)) {}
          else {
            this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"generic",18,$lm3.ObjKindNames[AType.ObjKind]));
          };
          this.SaveComments();
          CurSection = 0;
          this.NextToken();
          if (this.FCurToken === 47) {
            haveClass = true;
            this.NextToken();
          } else haveClass = false;
          if (!(this.FCurToken in rtl.createSet(92,66))) this.ParseExcExpectedAorB("Procedure","Function");
          this.ProcessMethod(AType,haveClass,CurVisibility,true);
        } else if ($tmp === 47) {
          var $tmp6 = AType.ObjKind;
          if (($tmp6 === 1) || ($tmp6 === 0) || ($tmp6 === 3) || ($tmp6 === 4) || ($tmp6 === 5) || ($tmp6 === 7) || ($tmp6 === 8) || ($tmp6 === 9)) {}
          else if ($tmp6 === 2) {
            if (!AType.IsExternal) this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"CLASS",18,$lm3.ObjKindNames[AType.ObjKind]))}
           else {
            this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"CLASS",18,$lm3.ObjKindNames[AType.ObjKind]));
          };
          this.SaveComments();
          CurSection = 0;
        } else if ($tmp === 94) {
          CurSection = 0;
          if (!haveClass) this.SaveComments();
          this.ExpectIdentifier({});
          PropEl = this.ParseProperty(AType,this.FCurTokenString,CurVisibility,haveClass);
          AType.Members.Add(PropEl);
          this.FEngine.FinishScope(12,PropEl);
        } else if ($tmp === 22) {
          if (47 in this.GetCurrentModeSwitches()) {
            this.ParseAttributes(AType,true)}
           else this.CheckToken(3)}
         else {
          this.CheckToken(3);
        };
        LastToken = this.FCurToken;
        this.NextToken();
      };
    };
    this.ProcessMethod = function (AType, IsClass, AVisibility, MustBeGeneric) {
      var Proc = null;
      var ProcType = 0;
      ProcType = this.GetProcTypeFromToken(this.FCurToken,IsClass);
      Proc = this.ParseProcedureOrFunctionDecl(AType,ProcType,MustBeGeneric,AVisibility);
      if ($lt42.isPrototypeOf(Proc.FParent)) {
        Proc.FParent.Overloads.Add(Proc)}
       else AType.Members.Add(Proc);
      this.FEngine.FinishScope(5,Proc);
    };
    this.ReadGenericArguments = function (List, Parent) {
      var N = "";
      var T = null;
      var Expr = null;
      var TypeEl = null;
      this.ExpectToken(18);
      do {
        N = this.ExpectIdentifier({});
        T = this.CreateElement($lt60,N,Parent);
        List.Add(T);
        this.NextToken();
        if (this.FCurToken === 16) do {
          this.NextToken();
          var $tmp = this.FCurToken;
          if (($tmp === 47) || ($tmp === 96) || ($tmp === 50)) {
            if (T.TypeConstraint === "") T.TypeConstraint = this.FCurTokenString;
            Expr = this.CreatePrimitiveExpr(T,0,this.CurTokenText());
            T.AddConstraint(Expr);
            this.NextToken();
          } else if (($tmp === 3) || ($tmp === 104)) {
            TypeEl = this.ParseTypeReference(T,false,{get: function () {
                return Expr;
              }, set: function (v) {
                Expr = v;
              }});
            if (T.TypeConstraint === "") T.TypeConstraint = TypeEl.FName;
            T.AddConstraint(TypeEl);
          } else {
            this.CheckToken(3);
          };
        } while (!(this.FCurToken !== 12));
        this.FEngine.FinishScope(3,T);
      } while (this.FCurToken in rtl.createSet(17,12));
      if (!(this.FCurToken in rtl.createSet(20,30))) {
        this.ParseExcExpectedAorB($lm4.TokenInfos[12],$lm4.TokenInfos[20])}
       else if (this.FCurToken === 30) {
        this.ChangeToken(20);
      };
    };
    this.ReadSpecializeArguments = function (Parent, Params) {
      var TypeEl = null;
      this.CheckToken(18);
      do {
        TypeEl = this.ParseType$1(Parent,this.CurTokenPos(),"",false);
        Params.Add(TypeEl);
        this.NextToken();
        if (this.FCurToken === 12) {
          continue}
         else if (this.FCurToken === 103) {
          this.ChangeToken(20);
          break;
        } else if (this.FCurToken === 20) {
          break}
         else this.ParseExcExpectedAorB($lm4.TokenInfos[12],$lm4.TokenInfos[20]);
      } while (!false);
    };
    this.ReadDottedIdentifier = function (Parent, Expr, NeedAsString) {
      var Result = "";
      var SrcPos = $lt15.$new();
      Expr.set(null);
      if (NeedAsString) {
        Result = this.FCurTokenString}
       else Result = "";
      this.CheckToken(3);
      Expr.set(this.CreatePrimitiveExpr(Parent,0,this.FCurTokenString));
      this.NextToken();
      while (this.FCurToken === 14) {
        SrcPos.$assign(this.CurTokenPos());
        this.ExpectIdentifier({});
        if (NeedAsString) Result = Result + "." + this.FCurTokenString;
        this.AddToBinaryExprChain(Expr,this.CreatePrimitiveExpr(Parent,0,this.FCurTokenString),27,SrcPos);
        this.NextToken();
      };
      return Result;
    };
    this.ParseProcedureModifiers = function (Parent, Element, IsProcType, IsAnonymous) {
      var $Self = this;
      function CurtokenisValidSyscall() {
        var Result = false;
        var CT = "";
        Result = $Self.FCurToken === 3;
        if (Result) {
          CT = $lp1($Self.CurTokenText());
          Result = (CT === "consoledevice") || (CT === "legacy") || ($lp6("base",CT) > 0) || ($lp6("systrap",CT) > 0) || ($lp6("sysv",CT) > 0);
        };
        return Result;
      };
      function ConsumeSemi() {
        $Self.NextToken();
        if (($Self.FCurToken !== 17) && $Self.IsCurTokenHint$1()) $Self.UngetToken();
      };
      var ModTokenCount = 0;
      var PM = 0;
      var PTM = 0;
      var LastToken = 0;
      var Tok = "";
      var CC = 0;
      ModTokenCount = 0;
      do {
        ModTokenCount += 1;
        LastToken = this.FCurToken;
        this.NextToken();
        if ((this.FCurToken === 19) && IsProcType && (ModTokenCount <= 3)) {
          this.UngetToken();
          this.FEngine.FinishScope(6,Element);
          return;
        };
        if (this.FCurToken === 17) {
          if (IsAnonymous) this.CheckToken(44);
          continue;
        } else if (this.TokenIsCallingConvention(this.FCurTokenString,{get: function () {
            return CC;
          }, set: function (v) {
            CC = v;
          }})) {
          Element.CallingConvention = CC;
          if (CC === 7) {
            this.NextToken();
            if (this.FCurToken === 17) {
              this.UngetToken()}
             else {
              if ((this.FCurToken === 6) || CurtokenisValidSyscall()) {
                this.HandleProcedureModifier(Parent,12,false);
                this.NextToken();
                if (this.FCurToken !== 6) this.UngetToken();
              };
            };
          };
          if (IsProcType) {
            this.ExpectTokens(rtl.createSet(17,19));
            if (this.FCurToken === 19) this.UngetToken();
          } else if (IsAnonymous) {}
          else this.ExpectTokens(rtl.createSet(17));
        } else if (IsAnonymous && this.TokenIsAnonymousProcedureModifier(Parent,this.FCurTokenString,{get: function () {
            return PM;
          }, set: function (v) {
            PM = v;
          }})) {
          this.HandleProcedureModifier(Parent,PM,false)}
         else if (this.TokenIsProcedureTypeModifier(Parent,this.FCurTokenString,{get: function () {
            return PTM;
          }, set: function (v) {
            PTM = v;
          }})) {
          this.HandleProcedureTypeModifier(Element,PTM);
          if ((PTM === 6) && $lt43.isPrototypeOf(Parent)) rtl.as(Parent,$lt43).AddModifier(16);
        } else if (!IsProcType && !IsAnonymous && this.TokenIsProcedureModifier(Parent,this.FCurTokenString,{get: function () {
            return PM;
          }, set: function (v) {
            PM = v;
          }})) {
          this.HandleProcedureModifier(Parent,PM,false)}
         else if ((this.FCurToken === 78) && !IsProcType && !IsAnonymous) {
          Tok = $lp2(this.FCurTokenString);
          this.NextToken();
          if (Tok !== "NAME") {
            if (1 in Element.FHints) this.ParseExcSyntaxError();
            Element.FHints = rtl.unionSet(Element.FHints,rtl.createSet(1));
          } else {
            this.NextToken();
            this.ExpectToken(17);
          };
        } else if (!IsAnonymous && this.DoCheckHint(Element)) {
          ConsumeSemi()}
         else if ((this.FCurToken === 3) && !IsAnonymous && ($lp3(this.CurTokenText(),"alias") === 0)) {
          this.ExpectToken(16);
          this.ExpectToken(4);
          if ($lt43.isPrototypeOf(Parent)) rtl.as(Parent,$lt43).AliasName = this.CurTokenText();
          this.ExpectToken(17);
        } else if (this.FCurToken === 22) {
          if (47 in this.GetCurrentModeSwitches()) {
            this.UngetToken();
            break;
          } else {
            do {
              this.NextToken();
              if (this.TokenIsProcedureModifier(Parent,this.FCurTokenString,{get: function () {
                  return PM;
                }, set: function (v) {
                  PM = v;
                }})) this.HandleProcedureModifier(Parent,PM,true);
              if (this.FCurToken in rtl.createSet(22,17)) this.CheckToken(23);
            } while (!(this.FCurToken === 23));
            this.ExpectToken(17);
          };
        } else {
          if (LastToken === 17) {
            this.UngetToken();
            if (IsAnonymous) this.ParseExcSyntaxError();
            break;
          } else if (IsAnonymous) {
            this.UngetToken();
            break;
          } else {
            this.CheckToken(17);
            continue;
          };
        };
      } while (!false);
    };
    this.CheckProcedureArgs = function (Parent, Args, ProcType) {
      var Result = false;
      this.NextToken();
      if (this.FCurToken === 8) {
        Result = true;
        this.NextToken();
        if (this.FCurToken !== 9) {
          this.UngetToken();
          this.ParseArgList(Parent,Args,9);
        };
      } else {
        Result = false;
        var $tmp = ProcType;
        if (($tmp === 2) || ($tmp === 3)) {
          this.ParseExc(2017,rtl.getResStr($mod,"SParserExpectedLBracketColon"))}
         else if (($tmp === 10) || ($tmp === 11)) {
          var $tmp1 = this.FCurToken;
          if (($tmp1 === 3) || ($tmp1 === 44) || ($tmp1 === 114) || ($tmp1 === 48) || ($tmp1 === 110) || ($tmp1 === 92) || ($tmp1 === 66) || ($tmp1 === 43)) {
            this.UngetToken()}
           else if ($tmp1 === 16) {
            if (ProcType === 11) {
              this.UngetToken()}
             else this.ParseExcTokenError("begin")}
           else {
            this.ParseExcTokenError("begin");
          };
        } else {
          var $tmp2 = this.FCurToken;
          if (($tmp2 === 17) || ($tmp2 === 16) || ($tmp2 === 86) || ($tmp2 === 76) || ($tmp2 === 3)) {
            this.UngetToken()}
           else {
            this.ParseExcTokenError(";");
          };
        };
      };
      return Result;
    };
    this.CheckVisibility = function (S, AVisibility, IsObjCProtocol) {
      var Result = false;
      var B = false;
      if (this.FCurTokenEscaped) return false;
      S = $lp1(this.FCurTokenString);
      B = S === "strict";
      if (B) {
        this.NextToken();
        S = $lp1(this.FCurTokenString);
      };
      Result = $impl.IsVisibility(S,AVisibility,IsObjCProtocol);
      if (Result) {
        if ((AVisibility.get() === 4) && (53 in this.FScanner.FCurrentModeSwitches)) AVisibility.set(3);
        if (B) {
          var $tmp = AVisibility.get();
          if ($tmp === 1) {
            AVisibility.set(6)}
           else if ($tmp === 2) {
            AVisibility.set(7)}
           else {
            this.ParseExc$1(2009,rtl.getResStr($mod,"SParserStrangeVisibility"),$lp4(18,S));
          };
        };
      } else if (B) this.ParseExc(2008,rtl.getResStr($mod,"SParserExpectVisibility"));
      return Result;
    };
    this.OpLevel = function (t) {
      var Result = 0;
      var $tmp = t;
      if (($tmp === 81) || ($tmp === 21) || ($tmp === 37) || ($tmp === 31)) {
        Result = 4}
       else if (($tmp === 10) || ($tmp === 15) || ($tmp === 54) || ($tmp === 79) || ($tmp === 40) || ($tmp === 102) || ($tmp === 103) || ($tmp === 42) || ($tmp === 76)) {
        Result = 3}
       else if (($tmp === 11) || ($tmp === 13) || ($tmp === 88) || ($tmp === 117)) {
        Result = 2}
       else if (($tmp === 19) || ($tmp === 28) || ($tmp === 18) || ($tmp === 29) || ($tmp === 20) || ($tmp === 30) || ($tmp === 71)) {
        Result = 1}
       else {
        Result = 0;
      };
      return Result;
    };
    this.TokenToExprOp = function (AToken) {
      var Result = 0;
      var $tmp = AToken;
      if ($tmp === 10) {
        Result = 3}
       else if ($tmp === 11) {
        Result = 1}
       else if ($tmp === 13) {
        Result = 2}
       else if ($tmp === 15) {
        Result = 4}
       else if ($tmp === 18) {
        Result = 16}
       else if ($tmp === 19) {
        Result = 14}
       else if ($tmp === 20) {
        Result = 17}
       else if ($tmp === 21) {
        Result = 24}
       else if ($tmp === 37) {
        Result = 26}
       else if ($tmp === 28) {
        Result = 15}
       else if ($tmp === 29) {
        Result = 18}
       else if ($tmp === 30) {
        Result = 19}
       else if ($tmp === 31) {
        Result = 7}
       else if ($tmp === 32) {
        Result = 23}
       else if ($tmp === 76) {
        Result = 21}
       else if ($tmp === 42) {
        Result = 22}
       else if ($tmp === 103) {
        Result = 8}
       else if ($tmp === 102) {
        Result = 9}
       else if ($tmp === 40) {
        Result = 11}
       else if ($tmp === 88) {
        Result = 12}
       else if ($tmp === 117) {
        Result = 13}
       else if ($tmp === 79) {
        Result = 6}
       else if ($tmp === 54) {
        Result = 5}
       else if ($tmp === 81) {
        Result = 10}
       else if ($tmp === 71) {
        Result = 20}
       else if ($tmp === 14) {
        Result = 27}
       else if ($tmp === 24) {
        Result = 25}
       else {
        Result = 1;
        this.ParseExc$1(2040,rtl.getResStr($mod,"SParserNotAnOperand"),$lp4(0,AToken,18,$lm4.TokenInfos[AToken]));
      };
      return Result;
    };
    this.CreateElement = function (AClass, AName, AParent) {
      var Result = null;
      Result = this.FEngine.CreateElement$2(AClass,AName,AParent,0,this.CurSourcePos(),null);
      return Result;
    };
    this.CreateElement$1 = function (AClass, AName, AParent, ASrcPos) {
      var Result = null;
      Result = this.FEngine.CreateElement$2(AClass,AName,AParent,0,ASrcPos,null);
      return Result;
    };
    this.CreateElement$2 = function (AClass, AName, AParent, AVisibility) {
      var Result = null;
      Result = this.FEngine.CreateElement$2(AClass,AName,AParent,AVisibility,this.CurSourcePos(),null);
      return Result;
    };
    this.CreateElement$3 = function (AClass, AName, AParent, AVisibility, ASrcPos, TypeParams) {
      var Result = null;
      if ((ASrcPos.Row === 0) && (ASrcPos.FileName === "")) {
        Result = this.FEngine.CreateElement$2(AClass,AName,AParent,AVisibility,this.CurSourcePos(),TypeParams)}
       else Result = this.FEngine.CreateElement$2(AClass,AName,AParent,AVisibility,ASrcPos,TypeParams);
      return Result;
    };
    this.CreatePrimitiveExpr = function (AParent, AKind, AValue) {
      var Result = null;
      Result = this.CreateElement$1($lt36,"",AParent,this.CurTokenPos());
      Result.Kind = AKind;
      Result.Value = AValue;
      return Result;
    };
    this.CreateBoolConstExpr = function (AParent, AKind, ABoolValue) {
      var Result = null;
      Result = this.CreateElement$1($lt61,"",AParent,this.CurTokenPos());
      Result.Kind = AKind;
      Result.Value = ABoolValue;
      return Result;
    };
    this.CreateBinaryExpr$1 = function (AParent, xleft, xright, AOpCode, ASrcPos) {
      var Result = null;
      Result = this.CreateElement$1($lt62,"",AParent,ASrcPos);
      Result.OpCode = AOpCode;
      Result.Kind = 9;
      if (xleft !== null) {
        Result.Left = xleft;
        xleft.SetParent(Result);
      };
      if (xright !== null) {
        Result.Right = xright;
        xright.SetParent(Result);
      };
      return Result;
    };
    this.AddToBinaryExprChain = function (ChainFirst, Element, AOpCode, ASrcPos) {
      if (Element === null) {
        return}
       else if (ChainFirst.get() === null) {
        ChainFirst.set(Element);
      } else {
        ChainFirst.set(this.CreateBinaryExpr$1(ChainFirst.get().FParent,ChainFirst.get(),Element,AOpCode,ASrcPos));
      };
    };
    this.CreateUnaryExpr = function (AParent, AOperand, AOpCode) {
      var Result = null;
      Result = this.CreateUnaryExpr$1(AParent,AOperand,AOpCode,this.CurTokenPos());
      return Result;
    };
    this.CreateUnaryExpr$1 = function (AParent, AOperand, AOpCode, ASrcPos) {
      var Result = null;
      Result = this.CreateElement$1($lt63,"",AParent,ASrcPos);
      Result.Kind = 8;
      Result.Operand = AOperand;
      Result.Operand.SetParent(Result);
      Result.OpCode = AOpCode;
      return Result;
    };
    this.CreateArrayValues = function (AParent) {
      var Result = null;
      Result = this.CreateElement($lt64,"",AParent);
      Result.Kind = 12;
      return Result;
    };
    this.CreateFunctionType = function (AName, AResultName, AParent, UseParentAsResultParent, NamePos, TypeParams) {
      var Result = null;
      Result = this.FEngine.CreateFunctionType(AName,AResultName,AParent,UseParentAsResultParent,NamePos,TypeParams);
      return Result;
    };
    this.CreateInheritedExpr = function (AParent) {
      var Result = null;
      Result = this.CreateElement$1($lt65,"",AParent,this.CurTokenPos());
      Result.Kind = 13;
      return Result;
    };
    this.CreateSelfExpr = function (AParent) {
      var Result = null;
      Result = this.CreateElement$1($lt66,"Self",AParent,this.CurTokenPos());
      Result.Kind = 14;
      return Result;
    };
    this.CreateNilExpr = function (AParent) {
      var Result = null;
      Result = this.CreateElement$1($lt67,"nil",AParent,this.CurTokenPos());
      Result.Kind = 5;
      return Result;
    };
    this.CreateRecordValues = function (AParent) {
      var Result = null;
      Result = this.CreateElement($lt68,"",AParent);
      Result.Kind = 12;
      return Result;
    };
    this.IsCurTokenHint = function (AHint) {
      var Result = false;
      Result = this.FCurToken === 78;
      if (Result) {
        AHint.set(1)}
       else if (this.FCurToken === 3) Result = $mod.IsHintToken(this.FCurTokenString,AHint);
      return Result;
    };
    this.IsCurTokenHint$1 = function () {
      var Result = false;
      var dummy = 0;
      Result = this.IsCurTokenHint({get: function () {
          return dummy;
        }, set: function (v) {
          dummy = v;
        }});
      return Result;
    };
    this.TokenIsCallingConvention = function (S, CC) {
      var Result = false;
      Result = $mod.IsCallingConvention(S,CC);
      return Result;
    };
    var IntfAllowed = rtl.createSet(5,6,14,15,16,17);
    this.TokenIsProcedureModifier = function (Parent, S, PM) {
      var Result = false;
      var Allowed = {};
      Result = $mod.IsProcModifier(S,PM);
      if (!Result) return Result;
      while (Parent !== null) {
        if ($lt46.isPrototypeOf(Parent)) {
          if (PM.get() in rtl.createSet(10,13)) return false;
          if (Parent.ObjKind in rtl.createSet(2,6)) {
            Allowed = rtl.refSet(IntfAllowed);
            if (Parent.IsExternal) Allowed = rtl.includeSet(Allowed,12);
            if (!(PM.get() in Allowed)) return false;
          };
          return Result;
        } else if ($lt48.isPrototypeOf(Parent)) {
          if (!(PM.get() in rtl.createSet(5,8,9,12,15,16,17))) return false;
          return Result;
        };
        Parent = Parent.FParent;
      };
      return Result;
    };
    this.TokenIsAnonymousProcedureModifier = function (Parent, S, PM) {
      var Result = false;
      Result = $mod.IsProcModifier(S,PM);
      if (!Result) return Result;
      var $tmp = PM.get();
      if ($tmp === 9) {
        Result = true}
       else {
        Result = false;
      };
      if (Parent === null) ;
      return Result;
    };
    this.TokenIsProcedureTypeModifier = function (Parent, S, PTM) {
      var Result = false;
      if ($lp3(S,$lm3.ProcTypeModifiers[3]) === 0) {
        Result = true;
        PTM.set(3);
      } else if ($lp3(S,$lm3.ProcTypeModifiers[6]) === 0) {
        Result = true;
        PTM.set(6);
      } else if ($lp3(S,$lm3.ProcTypeModifiers[2]) === 0) {
        Result = true;
        PTM.set(2);
      } else if ($lp3(S,$lm3.ProcTypeModifiers[7]) === 0) {
        Result = true;
        PTM.set(7);
      } else if (($lp3(S,$lm3.ProcTypeModifiers[5]) === 0) && (15 in this.FOptions)) {
        Result = true;
        PTM.set(5);
      } else Result = false;
      if (Parent === null) ;
      return Result;
    };
    this.CheckHint = function (Element, ExpectSemiColon) {
      var Result = {};
      var Found = false;
      var h = 0;
      Result = {};
      do {
        this.NextToken();
        Found = this.IsCurTokenHint({get: function () {
            return h;
          }, set: function (v) {
            h = v;
          }});
        if (Found) {
          Result = rtl.includeSet(Result,h);
          if (h === 0) {
            this.NextToken();
            if (this.FCurToken !== 4) {
              this.UngetToken()}
             else if (Element != null) Element.FHintMessage = this.FCurTokenString;
          };
        };
      } while (Found);
      this.UngetToken();
      if (Element != null) Element.FHints = rtl.refSet(Result);
      if (ExpectSemiColon) this.ExpectToken(17);
      return Result;
    };
    this.IsAnonymousProcAllowed = function (El) {
      var Result = false;
      while ($lt69.isPrototypeOf(El)) El = El.FParent;
      Result = $lt18.isPrototypeOf(El);
      return Result;
    };
    this.ParseParams = function (AParent, ParamsKind, AllowFormatting) {
      var Result = null;
      var Params = null;
      var Expr = null;
      var PClose = 0;
      Result = null;
      if (ParamsKind in rtl.createSet(11,4)) {
        if (this.FCurToken !== 22) this.ParseExc$1(2006,rtl.getResStr($mod,"SParserExpectTokenError"),$lp4(9,"["));
        PClose = 23;
      } else {
        if (this.FCurToken !== 8) this.ParseExc$1(2006,rtl.getResStr($mod,"SParserExpectTokenError"),$lp4(9,"("));
        PClose = 9;
      };
      Params = this.CreateElement$1($lt70,"",AParent,this.CurTokenPos());
      Params.Kind = ParamsKind;
      this.NextToken();
      if (!this.isEndOfExp(false,false)) {
        do {
          Expr = this.DoParseExpression(Params,null,true);
          if (!(Expr != null)) this.ParseExcSyntaxError();
          Params.AddParam(Expr);
          if (this.FCurToken === 16) if (!AllowFormatting) {
            this.ParseExc$1(2006,rtl.getResStr($mod,"SParserExpectTokenError"),$lp4(9,","))}
           else {
            this.NextToken();
            Expr.Format1 = this.DoParseExpression(Expr,null,true);
            if (this.FCurToken === 16) {
              this.NextToken();
              Expr.Format2 = this.DoParseExpression(Expr,null,true);
            };
          };
          if (!(this.FCurToken in rtl.createSet(12,PClose))) this.ParseExc$1(2006,rtl.getResStr($mod,"SParserExpectTokenError"),$lp4(9,","));
          if (this.FCurToken === 12) {
            this.NextToken();
            if (this.FCurToken === PClose) {
              this.ParseExcSyntaxError();
            };
          };
        } while (!(this.FCurToken === PClose));
      };
      this.NextToken();
      Result = Params;
      return Result;
    };
    var TAllow = {"0": "aCannot", aCannot: 0, "1": "aCan", aCan: 1, "2": "aMust", aMust: 2};
    this.ParseExprOperand = function (AParent) {
      var $Self = this;
      var Result = null;
      function IsWriteOrStr(P) {
        var Result = false;
        var N = "";
        Result = $lt36.isPrototypeOf(P);
        if (Result) {
          N = $lp1(P.Value);
          Result = (N === "write") || (N === "str") || (N === "writeln") || (N === "writestr");
        };
        return Result;
      };
      function IsMemAccess(P) {
        var Result = false;
        var N = "";
        Result = (18 in $Self.FOptions) && $lt36.isPrototypeOf(P);
        if (Result) {
          N = $lp1(P.Value);
          Result = (N === "mem") || (N === "meml") || (N === "memw");
        };
        return Result;
      };
      function IsSpecialize() {
        var Result = false;
        var LookAhead = 0;
        var i = 0;
        function Next() {
          var Result = false;
          if (LookAhead === 32) return false;
          $Self.NextToken();
          LookAhead += 1;
          Result = true;
          return Result;
        };
        Result = false;
        LookAhead = 0;
        $Self.CheckToken(18);
        try {
          Next();
          if (!($Self.FCurToken in rtl.createSet(3,100))) return Result;
          while (Next()) {
            var $tmp = $Self.FCurToken;
            if ($tmp === 14) {
              if (!Next()) return Result;
              if (!($Self.FCurToken in rtl.createSet(3,100,108,61))) return Result;
            } else if ($tmp === 12) {
              if (!Next()) return Result;
              if (!($Self.FCurToken in rtl.createSet(3,100))) return Result;
            } else if ($tmp === 18) {
              return true;
            } else if ($tmp === 20) {
              return true;
            } else {
              return Result;
            };
          };
        } finally {
          for (var $l = 1, $end = LookAhead; $l <= $end; $l++) {
            i = $l;
            $Self.UngetToken();
          };
        };
        return Result;
      };
      var Last = null;
      var Func = null;
      var Expr = null;
      var Params = null;
      var Bin = null;
      var CanSpecialize = 0;
      var aName = "";
      var ISE = null;
      var SrcPos = $lt15.$new();
      var ScrPos = $lt15.$new();
      var ProcType = 0;
      var ProcExpr = null;
      var AllowKWAsSubIdent = false;
      Result = null;
      CanSpecialize = 0;
      aName = "";
      var $tmp = this.FCurToken;
      if ($tmp === 7) {
        Last = this.CreatePrimitiveExpr(AParent,2,this.FCurTokenString)}
       else if ($tmp === 4) {
        Last = this.CreatePrimitiveExpr(AParent,2,this.FCurTokenString)}
       else if ($tmp === 5) {
        Last = this.CreatePrimitiveExpr(AParent,3,this.FCurTokenString)}
       else if ($tmp === 6) {
        Last = this.CreatePrimitiveExpr(AParent,1,this.FCurTokenString)}
       else if ($tmp === 3) {
        if (3 in this.GetCurrentModeSwitches()) {
          CanSpecialize = 1}
         else CanSpecialize = 0;
        aName = this.CurTokenText();
        if (($lp3(aName,"self") === 0) && !(100 in this.FScanner.FNonTokens)) {
          Last = this.CreateSelfExpr(AParent)}
         else Last = this.CreatePrimitiveExpr(AParent,0,aName);
      } else if ($tmp === 104) {
        CanSpecialize = 2;
        this.ExpectToken(3);
        aName = this.CurTokenText();
        Last = this.CreatePrimitiveExpr(AParent,0,aName);
      } else if (($tmp === 61) || ($tmp === 108)) {
        Last = this.CreateBoolConstExpr(AParent,6,this.FCurToken === 108)}
       else if ($tmp === 80) {
        Last = this.CreateNilExpr(AParent)}
       else if ($tmp === 22) {
        Last = this.ParseParams(AParent,4,false);
        this.UngetToken();
      } else if ($tmp === 72) {
        Last = this.CreateInheritedExpr(AParent);
        this.NextToken();
        if (this.FCurToken === 3) {
          SrcPos.$assign(this.CurTokenPos());
          Bin = this.CreateBinaryExpr$1(AParent,Last,this.ParseExprOperand(AParent),0,SrcPos);
          if (!(Bin.Right != null)) this.ParseExcExpectedIdentifier();
          Result = Bin;
          return Result;
        };
        this.UngetToken();
      } else if ($tmp === 100) {
        CanSpecialize = 1;
        aName = this.CurTokenText();
        Last = this.CreateSelfExpr(AParent);
      } else if (($tmp === 92) || ($tmp === 66)) {
        if (!this.IsAnonymousProcAllowed(AParent)) this.ParseExcExpectedIdentifier();
        if (this.FCurToken === 92) {
          ProcType = 10}
         else ProcType = 11;
        ProcExpr = this.CreateElement$2($lt71,"",AParent,3);
        ProcExpr.Proc = this.ParseProcedureOrFunctionDecl(ProcExpr,ProcType,false,0);
        this.FEngine.FinishScope(5,ProcExpr.Proc);
        Result = ProcExpr;
        return Result;
      } else if ($tmp === 24) {
        this.NextToken();
        if (!(this.CurTokenText().length === 1) || !(this.CurTokenText().charCodeAt(0) in rtl.createSet(null,65,95))) {
          this.UngetToken();
          this.ParseExcExpectedIdentifier();
        };
        Last = this.CreatePrimitiveExpr(AParent,2,"^" + this.CurTokenText());
      } else if ($tmp === 8) {
        this.NextToken();
        Last = this.DoParseExpression(AParent,null,true);
        if (!(Last != null)) this.ParseExcSyntaxError();
        if (this.FCurToken !== 9) {
          this.CheckToken(9);
        };
      } else {
        this.ParseExcExpectedIdentifier();
      };
      AllowKWAsSubIdent = 3 in this.GetCurrentModeSwitches();
      Result = Last;
      ISE = null;
      this.NextToken();
      Func = Last;
      do {
        var $tmp1 = this.FCurToken;
        if ($tmp1 === 14) {
          ScrPos.$assign(this.CurTokenPos());
          this.NextToken();
          if (this.FCurToken === 104) {
            if (CanSpecialize === 2) this.CheckToken(18);
            CanSpecialize = 2;
            this.NextToken();
          } else if (3 in this.GetCurrentModeSwitches()) {
            CanSpecialize = 1}
           else CanSpecialize = 0;
          if (this.FCurToken in rtl.createSet(3,108,61,100)) {
            aName = aName + "." + this.FCurTokenString;
            Expr = this.CreatePrimitiveExpr(AParent,0,this.FCurTokenString);
            this.AddToBinaryExprChain({get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }},Expr,27,ScrPos);
            Func = Expr;
            this.NextToken();
          } else if (AllowKWAsSubIdent && (this.FCurToken >= 39) && (this.FCurToken <= 117)) {
            aName = aName + "." + this.FCurTokenString;
            Expr = this.CreatePrimitiveExpr(AParent,0,this.FCurTokenString);
            this.AddToBinaryExprChain({get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }},Expr,27,ScrPos);
            Func = Expr;
            this.NextToken();
          } else {
            this.UngetToken();
            this.ParseExcExpectedIdentifier();
          };
        } else if (($tmp1 === 8) || ($tmp1 === 22)) {
          if (this.FCurToken === 8) {
            Params = this.ParseParams(AParent,10,IsWriteOrStr(Func))}
           else Params = this.ParseParams(AParent,11,IsMemAccess(Func));
          if (!(Params != null)) return Result;
          Params.Value = Result;
          Result.SetParent(Params);
          Result = Params;
          CanSpecialize = 0;
          Func = null;
        } else if ($tmp1 === 24) {
          Result = this.CreateUnaryExpr(AParent,Result,this.TokenToExprOp(this.FCurToken));
          this.NextToken();
          CanSpecialize = 0;
          Func = null;
        } else if ($tmp1 === 18) {
          SrcPos.$assign(this.CurTokenPos());
          if (CanSpecialize === 0) {
            break}
           else if ((CanSpecialize === 1) && !IsSpecialize()) {
            break}
           else {
            Expr = Result;
            if (Expr.Kind === 9) {
              Bin = Expr;
              if (Bin.OpCode !== 27) this.ParseExcSyntaxError();
              Expr = Bin.Right;
            } else Bin = null;
            if (Expr.Kind !== 0) this.ParseExcSyntaxError();
            if (Bin !== null) {
              ISE = this.CreateElement$1($lt72,"",Bin,SrcPos)}
             else ISE = this.CreateElement$1($lt72,"",AParent,SrcPos);
            this.ReadSpecializeArguments(ISE,ISE.Params);
            ISE.NameExpr = Expr;
            Expr.SetParent(ISE);
            if (Bin !== null) {
              Bin.Right = ISE;
            } else {
              Result = ISE;
            };
            ISE = null;
            CanSpecialize = 0;
            this.NextToken();
          };
          Func = null;
        } else {
          break;
        };
      } while (!false);
      return Result;
    };
    this.DoParseClassType = function (AType) {
      var s = "";
      var Expr = null;
      if ((this.FCurToken === 3) && (AType.ObjKind in rtl.createSet(1,0))) {
        s = $lp1(this.FCurTokenString);
        if ((s === "sealed") || (s === "abstract")) {
          AType.Modifiers.Add(s);
          this.NextToken();
        };
      };
      AType.IsForward = this.FCurToken === 17;
      if (this.FCurToken === 8) {
        if ((AType.ObjKind === 4) && rtl.eqSet(rtl.intersectSet(rtl.createSet(39,3),this.FScanner.FCurrentModeSwitches),rtl.createSet(3))) this.CheckToken(58);
        this.NextToken();
        AType.AncestorType = this.ParseTypeReference(AType,false,{get: function () {
            return Expr;
          }, set: function (v) {
            Expr = v;
          }});
        if ((AType.ObjKind in rtl.createSet(1,7,9)) || ((AType.ObjKind === 2) && AType.IsExternal)) while (this.FCurToken === 12) {
          this.NextToken();
          AType.Interfaces.Add(this.ParseTypeReference(AType,false,{get: function () {
              return Expr;
            }, set: function (v) {
              Expr = v;
            }}));
        };
        this.CheckToken(9);
        this.NextToken();
        AType.IsShortDefinition = this.FCurToken === 17;
      };
      if (AType.ObjKind in $lm3.okAllHelpers) {
        this.CheckToken(65);
        this.NextToken();
        AType.HelperForType = this.ParseTypeReference(AType,false,{get: function () {
            return Expr;
          }, set: function (v) {
            Expr = v;
          }});
      };
      this.FEngine.FinishScope(13,AType);
      if (AType.IsShortDefinition || AType.IsForward) {
        this.UngetToken()}
       else {
        if ((AType.ObjKind in rtl.createSet(2,6)) && (this.FCurToken === 22)) {
          this.NextToken();
          AType.GUIDExpr = this.DoParseExpression(AType,null,true);
          if (this.FCurToken !== 23) this.ParseExcTokenError($lm4.TokenInfos[23]);
          this.NextToken();
        };
        this.ParseClassMembers(AType);
      };
    };
    this.DoParseClassExternalHeader = function (AObjKind, AExternalNameSpace, AExternalName) {
      var Result = false;
      Result = false;
      if (((AObjKind in rtl.createSet(8,7,9)) || ((AObjKind in rtl.createSet(1,2)) && (52 in this.GetCurrentModeSwitches()))) && this.CurTokenIsIdentifier("external")) {
        Result = true;
        this.NextToken();
        if (this.FCurToken === 17) return Result;
        if (this.FCurToken !== 4) {
          this.UngetToken()}
         else AExternalNameSpace.set(this.FCurTokenString);
        if (AObjKind in rtl.createSet(8,7)) {
          this.NextToken();
          if (this.FCurToken === 8) return Result;
          this.UngetToken();
        };
        this.ExpectIdentifier({});
        if (!this.CurTokenIsIdentifier("Name")) this.ParseExc(2051,rtl.getResStr($mod,"SParserExpectedExternalClassName"));
        this.NextToken();
        if (!(this.FCurToken in rtl.createSet(7,4))) this.CheckToken(4);
        AExternalName.set(this.FCurTokenString);
        this.NextToken();
      } else {
        AExternalNameSpace.set("");
        AExternalName.set("");
      };
      return Result;
    };
    this.DoParseArrayType = function (ArrType) {
      var S = "";
      var RangeExpr = null;
      this.NextToken();
      S = "";
      var $tmp = this.FCurToken;
      if ($tmp === 22) {
        if ($lt73.isPrototypeOf(ArrType.FParent)) this.ParseExcTokenError("of");
        do {
          this.NextToken();
          if (7 in this.FOptions) {
            RangeExpr = this.DoParseExpression(ArrType,null,true);
            ArrType.AddRange(RangeExpr);
          } else if (this.FCurToken !== 23) S = S + this.CurTokenText();
          if (this.FCurToken === 23) {
            break}
           else if (this.FCurToken === 12) {
            continue}
           else if (7 in this.FOptions) this.ParseExcTokenError("]");
        } while (!false);
        ArrType.IndexRange = S;
        this.ExpectToken(86);
        ArrType.ElType = this.ParseType$1(ArrType,this.CurSourcePos(),"",false);
      } else if ($tmp === 86) {
        this.NextToken();
        if (this.FCurToken === 48) {
          if (!$lt73.isPrototypeOf(ArrType.FParent)) this.ParseExcExpectedIdentifier();
        } else {
          if ((this.FCurToken === 41) && $lt73.isPrototypeOf(ArrType.FParent)) this.ParseExcExpectedIdentifier();
          this.UngetToken();
          ArrType.ElType = this.ParseType$1(ArrType,this.CurSourcePos(),"",false);
        };
      } else {
        this.ParseExc(2024,rtl.getResStr($mod,"SParserArrayTypeSyntaxError"));
      };
      if ($lt45.isPrototypeOf(ArrType.ElType) && (ArrType.ElType.FParent === ArrType)) this.UngetToken();
    };
    var TOpStackItem = rtl.recNewT(null,"",function () {
      this.Token = 0;
      this.$new = function () {
        var r = Object.create(this);
        r.SrcPos = $lt15.$new();
        return r;
      };
      this.$eq = function (b) {
        return (this.Token === b.Token) && this.SrcPos.$eq(b.SrcPos);
      };
      this.$assign = function (s) {
        this.Token = s.Token;
        this.SrcPos.$assign(s.SrcPos);
        return this;
      };
    });
    var PrefixSym = rtl.createSet(11,13,81,21,37);
    var BinaryOP = rtl.createSet(10,15,54,79,26,40,102,103,42,31,11,13,88,117,32,19,28,18,29,20,30,71,76);
    this.DoParseExpression = function (AParent, InitExpr, AllowEqual) {
      var $Self = this;
      var Result = null;
      var ExpStack = null;
      var OpStack = [];
      var OpStackTop = 0;
      var PrefixCnt = 0;
      var x = null;
      var i = 0;
      var TempOp = 0;
      var NotBinary = false;
      function PopExp() {
        var Result = null;
        if (ExpStack.FCount > 0) {
          Result = rtl.getObject(ExpStack.Get(ExpStack.FCount - 1));
          ExpStack.Delete(ExpStack.FCount - 1);
        } else Result = null;
        return Result;
      };
      function PushOper(Token) {
        OpStackTop += 1;
        if (OpStackTop === rtl.length(OpStack)) OpStack = rtl.arraySetLength(OpStack,TOpStackItem,(rtl.length(OpStack) * 2) + 4);
        OpStack[OpStackTop].Token = Token;
        OpStack[OpStackTop].SrcPos.$assign($Self.CurTokenPos());
      };
      function PeekOper() {
        var Result = 0;
        if (OpStackTop >= 0) {
          Result = OpStack[OpStackTop].Token}
         else Result = 0;
        return Result;
      };
      function PopOper(SrcPos) {
        var Result = 0;
        Result = PeekOper();
        if (Result === 0) {
          SrcPos.$assign($lm4.DefPasSourcePos)}
         else {
          SrcPos.$assign(OpStack[OpStackTop].SrcPos);
          OpStackTop -= 1;
        };
        return Result;
      };
      function PopAndPushOperator() {
        var t = 0;
        var xright = null;
        var xleft = null;
        var bin = null;
        var SrcPos = $lt15.$new();
        t = PopOper(SrcPos);
        xright = PopExp();
        xleft = PopExp();
        if (t === 26) {
          bin = $Self.CreateBinaryExpr$1(AParent,xleft,xright,0,SrcPos);
          bin.Kind = 7;
        } else bin = $Self.CreateBinaryExpr$1(AParent,xleft,xright,$Self.TokenToExprOp(t),SrcPos);
        ExpStack.Add(bin);
      };
      var AllowedBinaryOps = {};
      var SrcPos = $lt15.$new();
      AllowedBinaryOps = rtl.refSet(BinaryOP);
      if (!AllowEqual) AllowedBinaryOps = rtl.excludeSet(AllowedBinaryOps,19);
      Result = null;
      ExpStack = $lt11.$create("Create");
      OpStack = rtl.arraySetLength(OpStack,TOpStackItem,4);
      OpStackTop = -1;
      try {
        do {
          NotBinary = true;
          PrefixCnt = 0;
          if (!(InitExpr != null)) {
            while (this.FCurToken in PrefixSym) {
              PushOper(this.FCurToken);
              PrefixCnt += 1;
              this.NextToken();
            };
            x = this.ParseExprOperand(AParent);
            if (!(x != null)) this.ParseExcSyntaxError();
            ExpStack.Add(x);
            for (var $l = 1, $end = PrefixCnt; $l <= $end; $l++) {
              i = $l;
              TempOp = PopOper(SrcPos);
              x = PopExp();
              if ((TempOp === 13) && (x.Kind === 7)) {
                x.Left = this.CreateUnaryExpr$1(x,x.Left,2,SrcPos);
                ExpStack.Add(x);
              } else ExpStack.Add(this.CreateUnaryExpr$1(AParent,x,this.TokenToExprOp(TempOp),SrcPos));
            };
          } else {
            ExpStack.Add(InitExpr);
            InitExpr = null;
          };
          if (this.FCurToken in AllowedBinaryOps) {
            NotBinary = false;
            TempOp = PeekOper();
            while ((OpStackTop >= 0) && (this.OpLevel(TempOp) >= this.OpLevel(this.FCurToken))) {
              PopAndPushOperator();
              TempOp = PeekOper();
            };
            PushOper(this.FCurToken);
            this.NextToken();
          };
        } while (!(NotBinary || this.isEndOfExp(AllowEqual,NotBinary)));
        if (!NotBinary) this.ParseExcExpectedIdentifier();
        while (OpStackTop >= 0) PopAndPushOperator();
        if (ExpStack.FCount !== 1) this.ParseExcSyntaxError();
        Result = rtl.getObject(ExpStack.Get(0));
        Result.SetParent(AParent);
      } finally {
        OpStack = rtl.arraySetLength(OpStack,TOpStackItem,0);
        ExpStack = rtl.freeLoc(ExpStack);
      };
      return Result;
    };
    this.DoParseConstValueExpression = function (AParent) {
      var $Self = this;
      var Result = null;
      function LastField() {
        var Result = false;
        Result = $Self.FCurToken !== 17;
        if (!Result) {
          $Self.NextToken();
          if ($Self.FCurToken === 9) {
            Result = true}
           else $Self.UngetToken();
        };
        return Result;
      };
      function ReadArrayValues(x) {
        var a = null;
        Result = null;
        a = $Self.CreateArrayValues(AParent);
        if (x !== null) {
          a.AddValues(x);
          x = null;
        };
        do {
          $Self.NextToken();
          a.AddValues($Self.DoParseConstValueExpression(a));
        } while (!($Self.FCurToken !== 12));
        Result = a;
      };
      var x = null;
      var v = null;
      var n = "";
      var r = null;
      if (this.FCurToken !== 8) {
        Result = this.DoParseExpression(AParent,null,true)}
       else {
        Result = null;
        if (this.FEngine.NeedArrayValues(AParent)) {
          ReadArrayValues(null)}
         else {
          this.NextToken();
          if (this.FCurToken === 9) {
            Result = this.CreateRecordValues(AParent);
            this.NextToken();
            return Result;
          } else {
            x = this.DoParseConstValueExpression(AParent);
            var $tmp = this.FCurToken;
            if ($tmp === 12) {
              ReadArrayValues(x)}
             else if ($tmp === 16) {
              if (!$lt36.isPrototypeOf(x)) this.CheckToken(9);
              n = $impl.GetExprIdent(x);
              r = this.CreateRecordValues(AParent);
              this.NextToken();
              v = this.DoParseConstValueExpression(r);
              r.AddField(x,v);
              x = null;
              if (!LastField()) do {
                n = this.ExpectIdentifier({});
                x = this.CreatePrimitiveExpr(r,0,n);
                this.ExpectToken(16);
                this.NextToken();
                v = this.DoParseConstValueExpression(AParent);
                r.AddField(x,v);
                x = null;
              } while (!LastField());
              Result = r;
            } else {
              Result = this.DoParseExpression(AParent,x,true);
              if (this.FCurToken !== 9) this.ParseExc(2011,rtl.getResStr($mod,"SParserExpectedCommaRBracket"));
              this.NextToken();
              if (this.FCurToken !== 17) Result = this.DoParseExpression(AParent,Result,true);
              return Result;
            };
          };
        };
        if (this.FCurToken !== 9) this.ParseExc(2011,rtl.getResStr($mod,"SParserExpectedCommaRBracket"));
        this.NextToken();
      };
      return Result;
    };
    this.CheckPackMode = function () {
      var Result = 0;
      this.NextToken();
      var $tmp = this.FCurToken;
      if ($tmp === 90) {
        Result = 1}
       else if ($tmp === 45) {
        Result = 2}
       else {
        Result = 0;
      };
      if (Result !== 0) {
        this.NextToken();
        if (!(this.FCurToken in rtl.createSet(41,96,85,47,83,101))) this.ParseExcTokenError("SET, ARRAY, RECORD, OBJECT or CLASS");
      };
      return Result;
    };
    this.AddUseUnit = function (ASection, NamePos, AUnitName, NameExpr, InFileExpr) {
      var $Self = this;
      var Result = null;
      function CheckDuplicateInUsesList(UsesClause) {
        var i = 0;
        if (rtl.length(UsesClause) === 0) return;
        for (var $l = 0, $end = rtl.length(UsesClause) - 1; $l <= $end; $l++) {
          i = $l;
          if ($lp3(AUnitName,UsesClause[i].FName) === 0) $Self.ParseExc$1(2046,rtl.getResStr($mod,"SParserDuplicateIdentifier"),$lp4(18,AUnitName));
        };
      };
      var UnitRef = null;
      var UsesUnit = null;
      Result = null;
      UsesUnit = null;
      UnitRef = null;
      if (($lp3(AUnitName,this.FCurModule.FName) === 0) && !this.FCurModule.$class.InheritsFrom($lt74)) {
        if ($lp3(AUnitName,"System") === 0) return Result;
        this.ParseExc$1(2046,rtl.getResStr($mod,"SParserDuplicateIdentifier"),$lp4(18,AUnitName));
      };
      CheckDuplicateInUsesList(ASection.UsesClause);
      if (ASection.$class.ClassType() === $lt75) CheckDuplicateInUsesList(this.FCurModule.InterfaceSection.UsesClause);
      UnitRef = this.FEngine.FindModule$1(AUnitName,NameExpr,InFileExpr);
      if (!(UnitRef != null)) UnitRef = this.CreateElement$1($lt76,AUnitName,ASection,NamePos);
      UsesUnit = this.CreateElement$1($lt77,AUnitName,ASection,NamePos);
      Result = ASection.AddUnitToUsesList(AUnitName,NameExpr,InFileExpr,UnitRef,UsesUnit);
      if (InFileExpr !== null) {
        if ($lt78.isPrototypeOf(UnitRef)) {
          if (UnitRef.Filename === "") UnitRef.Filename = InFileExpr.Value;
        } else if ($lt76.isPrototypeOf(UnitRef)) UnitRef.FileName = InFileExpr.Value;
      };
      return Result;
    };
    this.CheckImplicitUsedUnits = function (ASection) {
      var i = 0;
      var NamePos = $lt15.$new();
      if (!(ASection.$class.ClassType() === $lt75)) {
        NamePos.$assign(this.CurSourcePos());
        for (var $l = 0, $end = this.FImplicitUses.GetCount() - 1; $l <= $end; $l++) {
          i = $l;
          this.AddUseUnit(ASection,NamePos,this.FImplicitUses.Get(i),null,null);
        };
      };
    };
    this.FinishedModule = function () {
      if (this.FScanner !== null) this.FScanner.FinishedModule();
      this.FEngine.FinishScope(0,this.FCurModule);
    };
    this.ParseExcExpectedIdentifier = function () {
      this.ParseExc(2026,rtl.getResStr($mod,"SParserExpectedIdentifier"));
    };
    this.ParseExcSyntaxError = function () {
      this.ParseExc(2022,rtl.getResStr($mod,"SParserSyntaxError"));
    };
    this.ParseExcTypeParamsNotAllowed = function () {
      this.ParseExc$1(2045,rtl.getResStr($mod,"SParserTypeParamsNotAllowedOnType"),[]);
    };
    this.ParseExc = function (MsgNumber, Msg) {
      this.ParseExc$1(MsgNumber,Msg,[]);
    };
    this.ParseExc$1 = function (MsgNumber, Fmt, Args) {
      var p = $lt15.$new();
      var msg = "";
      this.SetLastMsg(1,MsgNumber,Fmt,Args);
      p.$assign(this.FScanner.FCurTokenPos);
      if (p.FileName === "") p.$assign(this.FScanner.CurSourcePos());
      if (p.Row === 0) {
        p.Row = 1;
        p.Column = 1;
      };
      msg = $lp7(rtl.getResStr($mod,"SParserErrorAtToken"),$lp4(18,this.FLastMsg,18,this.CurTokenName(),18,p.FileName,19,p.Row,19,p.Column));
      throw $lt3.$create("Create$2",[msg,p.FileName,p.Row,p.Column,MsgNumber]);
    };
    this.ParseExcTokenError = function (Arg) {
      this.ParseExc$1(2006,rtl.getResStr($mod,"SParserExpectTokenError"),$lp4(18,Arg));
    };
    this.ParseExcExpectedAorB = function (A, B) {
      this.ParseExc$1(2010,rtl.getResStr($mod,"SParserExpectToken2Error"),$lp4(18,A,18,B));
    };
    this.LogLastMessage = function () {
      this.DoLog(this.FLastMsgType,this.FLastMsgNumber,this.FLastMsg,false);
    };
    this.CreateRecovery = function (aError, aRestartTokens, aUngetRestartToken) {
      var Result = $lt4.$new();
      Result.$assign($lt4.Create(null,aError,rtl.refSet(aRestartTokens),aUngetRestartToken));
      return Result;
    };
    this.CreateRecovery$2 = function (aResult, aError, aRestartTokens, aUngetRestartToken, aScope) {
      var Result = $lt4.$new();
      Result.$assign($lt4.Create$1(aResult,aError,rtl.refSet(aRestartTokens),aUngetRestartToken,aScope));
      return Result;
    };
    this.TryErrorRecovery = function (aContext) {
      var Result = false;
      var StopAt = {};
      var Obj = null;
      this.FErrorCount += 1;
      Result = this.FErrorCount < this.FMaxErrorCount;
      if (!Result) return Result;
      if (this.FOnError != null) {
        this.FOnError(this,aContext,{get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }});
        if (!Result) return Result;
      };
      if (aContext.HaveScope) this.FEngine.FinishScope(aContext.Scope,aContext.Element);
      if (aContext.Element != null) if (this.FEngine.HandleResultOnError(aContext.Element)) {
        Obj = aContext.Element;
        Obj = rtl.freeLoc(Obj);
      };
      this.LogLastMessage();
      StopAt = rtl.refSet(aContext.RestartTokens);
      if (rtl.neSet(StopAt,{})) {
        if (!(this.FCurToken in StopAt)) {
          StopAt = rtl.includeSet(StopAt,0);
          do {
            this.NextToken();
          } while (!(this.FCurToken in StopAt));
        };
        if (aContext.UngetRestartToken) this.UngetToken();
      };
      return Result;
    };
    this.AddProcOrFunction = function (Decs, AProc) {
      var I = 0;
      var OldMember = null;
      var OverloadedProc = null;
      OldMember = null;
      if (!(5 in this.FOptions)) {
        OverloadedProc = this.CheckOverloadList(Decs.Functions,AProc.FName,{get: function () {
            return OldMember;
          }, set: function (v) {
            OldMember = v;
          }})}
       else OverloadedProc = null;
      if (OverloadedProc !== null) {
        OverloadedProc.Overloads.Add(AProc);
        if (OldMember !== OverloadedProc) {
          I = Decs.Declarations.IndexOf(OldMember);
          if (I !== -1) Decs.Declarations.Put(I,OverloadedProc);
        };
      } else {
        Decs.Declarations.Add(AProc);
        Decs.Functions.Add(AProc);
      };
      this.FEngine.FinishScope(5,AProc);
    };
    this.CheckIfOverloaded = function (AParent, AName) {
      var Result = null;
      var Member = null;
      var OverloadedProc = null;
      Result = AParent;
      if (!(5 in this.FOptions) && $lt40.isPrototypeOf(AParent)) {
        OverloadedProc = this.CheckOverloadList(AParent.Members,AName,{get: function () {
            return Member;
          }, set: function (v) {
            Member = v;
          }});
        if (OverloadedProc !== null) Result = OverloadedProc;
      };
      return Result;
    };
    this.Create$1 = function (AScanner, AFileResolver, AEngine) {
      $lt10.Create.call(this);
      this.FScanner = AScanner;
      if (this.FScanner.FOnModeChanged === null) this.FScanner.FOnModeChanged = rtl.createCallback(this,"OnScannerModeChanged");
      this.FScanner.RegisterDirectiveHandler("rtti",rtl.createCallback(this,"OnScannerDirectiveRTTI"));
      this.FFileResolver = AFileResolver;
      this.FTokenRingCur = 31;
      this.FEngine = AEngine;
      if (this.FEngine != null) {
        this.FEngine.SetCurrentParser(this);
        if (this.FEngine.FNeedComments) this.FScanner.FSkipComments = !this.FEngine.FNeedComments;
      };
      this.FErrorCount = 0;
      this.FMaxErrorCount = 1;
      this.FFailOnModuleErors = true;
      this.FImplicitUses = $lt79.$create("Create$1");
      this.FImplicitUses.Add("System");
      return this;
    };
    this.Destroy = function () {
      var i = 0;
      if (rtl.eqCallback(this.FScanner.FOnModeChanged,rtl.createCallback(this,"OnScannerModeChanged"))) this.FScanner.FOnModeChanged = null;
      if (this.FEngine != null) {
        this.FEngine.SetCurrentParser(null);
        this.FEngine = null;
      };
      $lp({p: this, get: function () {
          return this.p.FImplicitUses;
        }, set: function (v) {
          this.p.FImplicitUses = v;
        }});
      for (i = 0; i <= 31; i++) $lp({p: this.FTokenRing[i], get: function () {
          return this.p.Comments;
        }, set: function (v) {
          this.p.Comments = v;
        }});
      $lt10.Destroy.call(this);
    };
    this.SetLastMsg = function (MsgType, MsgNumber, Fmt, Args) {
      this.FLastMsgType = MsgType;
      this.FLastMsgNumber = MsgNumber;
      this.FLastMsgPattern = Fmt;
      this.FLastMsg = $lp7(Fmt,Args);
      $lp8({p: this, get: function () {
          return this.p.FLastMsgArgs;
        }, set: function (v) {
          this.p.FLastMsgArgs = v;
        }},Args);
    };
    this.CurTokenName = function () {
      var Result = "";
      if (this.FCurToken === 3) {
        Result = "Identifier " + this.FCurTokenString}
       else Result = $lm4.TokenInfos[this.FCurToken];
      return Result;
    };
    this.CurTokenText = function () {
      var Result = "";
      var $tmp = this.FCurToken;
      if (($tmp === 3) || ($tmp === 4) || ($tmp === 5) || ($tmp === 6) || ($tmp === 7)) {
        Result = this.FCurTokenString}
       else {
        Result = $lm4.TokenInfos[this.FCurToken];
      };
      return Result;
    };
    this.CurComments = function () {
      var Result = null;
      if (this.FTokenRingStart === this.FTokenRingEnd) {
        Result = null}
       else Result = this.FTokenRing[this.FTokenRingCur].Comments;
      return Result;
    };
    this.CurTokenPos = function () {
      var Result = $lt15.$new();
      if (this.HasToken()) {
        Result.$assign(this.FTokenRing[this.FTokenRingCur].TokenPos)}
       else if (this.FScanner !== null) {
        Result.$assign(this.FScanner.FCurTokenPos)}
       else Result.$assign($lt15.$new());
      return Result;
    };
    this.CurSourcePos = function () {
      var Result = $lt15.$new();
      if (this.HasToken()) {
        Result.$assign(this.FTokenRing[this.FTokenRingCur].SourcePos)}
       else if (this.FScanner !== null) {
        Result.$assign(this.FScanner.CurSourcePos())}
       else Result.$assign($lt15.$new());
      return Result;
    };
    this.HasToken = function () {
      var Result = false;
      if (this.FTokenRingStart < this.FTokenRingEnd) {
        Result = (this.FTokenRingCur >= this.FTokenRingStart) && (this.FTokenRingCur < this.FTokenRingEnd)}
       else Result = (this.FTokenRingCur >= this.FTokenRingStart) || (this.FTokenRingCur < this.FTokenRingEnd);
      return Result;
    };
    this.NextToken = function () {
      var P = null;
      this.FTokenRingCur = (this.FTokenRingCur + 1) % 32;
      P = this.FTokenRing[this.FTokenRingCur];
      if (this.FTokenRingCur !== this.FTokenRingEnd) {
        this.FCurToken = this.FScanner.CheckToken(P.Token,P.AsString);
        this.FCurTokenString = P.AsString;
        this.FCurTokenEscaped = P.IsEscaped;
      } else {
        this.FTokenRingEnd = (this.FTokenRingEnd + 1) % 32;
        if (this.FTokenRingStart === this.FTokenRingEnd) this.FTokenRingStart = (this.FTokenRingStart + 1) % 32;
        try {
          if (P.Comments === null) {
            P.Comments = $lt79.$create("Create$1")}
           else P.Comments.Clear();
          do {
            this.FCurToken = this.FScanner.FetchToken();
            if (this.FCurToken === 2) P.Comments.Add(this.FScanner.GetTokenString());
          } while (this.FCurToken in $impl.WhitespaceTokensToIgnore);
        } catch ($e) {
          if ($lt80.isPrototypeOf($e)) {
            var e = $e;
            if (1 in this.FOptions) {
              throw $e}
             else {
              this.FLastMsgType = 1;
              this.FLastMsgNumber = this.FScanner.FLastMsgNumber;
              this.FLastMsgPattern = this.FScanner.FLastMsgPattern;
              this.FLastMsg = this.FScanner.FLastMsg;
              this.FLastMsgArgs = this.FScanner.FLastMsgArgs;
              throw $lt3.$create("Create$2",[e.fMessage,this.FScanner.FCurFilename,this.FScanner.FCurRow,this.FScanner.GetCurColumn(),this.FLastMsgNumber]);
            };
          } else throw $e
        };
        this.FCurTokenString = this.FScanner.GetTokenString();
        this.FCurTokenEscaped = this.FScanner.FCurtokenEscaped;
        P.Token = this.FCurToken;
        P.AsString = this.FCurTokenString;
        P.SourcePos.$assign(this.FScanner.CurSourcePos());
        P.TokenPos.$assign(this.FScanner.FCurTokenPos);
        P.IsEscaped = this.FScanner.FCurtokenEscaped;
      };
    };
    this.ChangeToken = function (tk) {
      var $Self = this;
      var Cur = null;
      var Last = null;
      var IsLast = false;
      function DoChange(tk1, tk2) {
        Cur = $Self.FTokenRing[$Self.FTokenRingCur];
        Cur.Token = tk2;
        Cur.AsString = $lm4.TokenInfos[tk2];
        Last = $Self.FTokenRing[$Self.FTokenRingEnd];
        Last.Token = tk2;
        Last.AsString = $lm4.TokenInfos[tk2];
        if (Last.Comments !== null) Last.Comments.Clear();
        Last.SourcePos.$assign(Cur.SourcePos);
        Cur.SourcePos.Column -= 1;
        Last.TokenPos.$assign(Cur.TokenPos);
        Last.TokenPos.Column += 1;
        $Self.FTokenRingEnd = ($Self.FTokenRingEnd + 1) % 32;
        if ($Self.FTokenRingStart === $Self.FTokenRingEnd) $Self.FTokenRingStart = ($Self.FTokenRingStart + 1) % 32;
        $Self.FCurToken = tk1;
        $Self.FCurTokenString = $lm4.TokenInfos[tk1];
      };
      IsLast = ((this.FTokenRingCur + 1) % 32) === this.FTokenRingEnd;
      if ((this.FCurToken === 30) && (tk === 20) && IsLast) {
        DoChange(20,19);
      } else if ((this.FCurToken === 103) && (tk === 20) && IsLast) {
        DoChange(20,20);
      } else this.CheckToken(tk);
    };
    this.UngetToken = function () {
      var P = null;
      if (this.FTokenRingStart === this.FTokenRingEnd) this.ParseExc(2005,rtl.getResStr($mod,"SParserUngetTokenError"));
      if (this.FTokenRingCur > 0) {
        this.FTokenRingCur -= 1}
       else this.FTokenRingCur = 31;
      P = this.FTokenRing[this.FTokenRingCur];
      this.FCurToken = P.Token;
      this.FCurTokenString = P.AsString;
    };
    this.CheckToken = function (tk) {
      if (this.FCurToken !== tk) {
        this.ParseExcTokenError($lm4.TokenInfos[tk]);
      };
    };
    this.CheckTokens = function (tk) {
      var S = "";
      var T = 0;
      if (!(this.FCurToken in tk)) {
        S = "";
        for (var $l = 0; $l <= 119; $l++) {
          T = $l;
          if (T in tk) {
            if (S !== "") S = S + " or ";
            S = S + $lm4.TokenInfos[T];
          };
        };
        this.ParseExcTokenError(S);
      };
    };
    this.ExpectToken = function (tk) {
      this.NextToken();
      this.CheckToken(tk);
    };
    this.ExpectTokens = function (tk) {
      this.NextToken();
      this.CheckTokens(rtl.refSet(tk));
    };
    this.GetPrevToken = function () {
      var Result = 0;
      var i = 0;
      var P = null;
      if (this.FTokenRingStart === this.FTokenRingEnd) Result = 0;
      i = this.FTokenRingCur;
      if (i > 0) {
        i -= 1}
       else i = 31;
      P = this.FTokenRing[i];
      Result = P.Token;
      return Result;
    };
    this.ExpectIdentifier = function (CountAsIdentifier) {
      var Result = "";
      if (rtl.eqSet(CountAsIdentifier,{})) {
        this.ExpectToken(3)}
       else {
        CountAsIdentifier = rtl.includeSet(CountAsIdentifier,3);
        this.ExpectTokens(rtl.refSet(CountAsIdentifier));
      };
      Result = this.FCurTokenString;
      return Result;
    };
    this.SaveIdentifierPosition = function () {
      this.FIdentifierPos.$assign(this.FScanner.CurSourcePos());
    };
    this.CurTokenIsIdentifier = function (S) {
      var Result = false;
      Result = (this.FCurToken === 3) && ($lp3(S,this.CurTokenText()) === 0);
      return Result;
    };
    var EndExprToken = rtl.createSet(0,9,23,17,12,16,55,56,57,58,86,105,107,89);
    this.isEndOfExp = function (AllowEqual, CheckHints) {
      var Result = false;
      if ((this.FCurToken in EndExprToken) || (CheckHints && this.IsCurTokenHint$1())) return true;
      if (AllowEqual && (this.FCurToken === 19)) return true;
      Result = false;
      return Result;
    };
    this.ExprToText = function (Expr) {
      var Result = "";
      var C = null;
      Result = "";
      C = Expr.$class.ClassType();
      if (C === $lt36) {
        Result = Expr.Value}
       else if (C === $lt66) {
        Result = "self"}
       else if (C === $lt61) {
        Result = $lp9(Expr.Value,"true","false")}
       else if (C === $lt67) {
        Result = "nil"}
       else if (C === $lt65) {
        Result = "inherited"}
       else if (C === $lt63) {
        Result = $lm3.OpcodeStrings[Expr.OpCode] + this.ExprToText(Expr.Operand)}
       else if (C === $lt62) {
        Result = this.ExprToText(Expr.Left);
        if ($lm3.OpcodeStrings[Expr.OpCode] !== "") {
          Result = Result + $lm3.OpcodeStrings[Expr.OpCode]}
         else Result = Result + " ";
        Result = Result + this.ExprToText(Expr.Right);
      } else if (C === $lt70) {
        var $tmp = Expr.Kind;
        if ($tmp === 11) {
          Result = this.ExprToText(Expr.Value) + "[" + this.ArrayExprToText(Expr.Params) + "]"}
         else if ($tmp === 10) {
          Result = this.ExprToText(Expr.Value) + "(" + this.ArrayExprToText(Expr.Params) + ")"}
         else if ($tmp === 4) {
          Result = "[" + this.ArrayExprToText(Expr.Params) + "]"}
         else {
          this.ParseExc$1(2015,rtl.getResStr($mod,"SErrUnknownOperatorType"),$lp4(18,$lm3.ExprKindNames[Expr.Kind]));
        };
      } else this.ParseExc$1(2015,rtl.getResStr($mod,"SErrUnknownOperatorType"),$lp4(18,"TPasParser.ExprToText: " + Expr.$classname));
      return Result;
    };
    this.ArrayExprToText = function (Expr) {
      var Result = "";
      var i = 0;
      Result = "";
      for (var $l = 0, $end = rtl.length(Expr) - 1; $l <= $end; $l++) {
        i = $l;
        if (i > 0) Result = Result + ",";
        Result = Result + this.ExprToText(Expr[i]);
      };
      return Result;
    };
    this.ResolveTypeReference = function (Name, Parent, ParamCnt) {
      var Result = null;
      var SS = false;
      var Ref = null;
      Ref = null;
      SS = !(3 in this.FOptions) && $impl.IsSimpleTypeToken({get: function () {
          return Name;
        }, set: function (v) {
          Name = v;
        }});
      if (!SS) {
        Ref = this.FEngine.FindElementFor(Name,Parent,ParamCnt);
        if (Ref === null) {}
        else if (!$lt81.isPrototypeOf(Ref)) this.ParseExc$1(2049,rtl.getResStr($mod,"SParserExpectedTypeButGot"),$lp4(18,Ref.ElementTypeName()));
      };
      if (Ref === null) {
        Result = this.CreateElement($lt82,Name,Parent)}
       else {
        Result = Ref;
      };
      return Result;
    };
    this.ParseVarType = function (Parent) {
      var Result = null;
      var NamePos = $lt15.$new();
      Result = null;
      this.NextToken();
      var $tmp = this.FCurToken;
      if ($tmp === 92) {
        Result = this.CreateElement($lt45,"",Parent);
        this.ParseProcedureOrFunction(Result,Result,0,true);
        if (this.FCurToken === 17) this.UngetToken();
      } else if ($tmp === 66) {
        Result = this.CreateFunctionType("","Result",Parent,false,this.CurSourcePos(),null);
        this.ParseProcedureOrFunction(Result,Result,1,true);
        if (this.FCurToken === 17) this.UngetToken();
      } else {
        NamePos.$assign(this.CurSourcePos());
        this.UngetToken();
        Result = this.ParseType$1(Parent,NamePos,"",false);
      };
      return Result;
    };
    this.ParseTypeDecl = function (Parent) {
      var Result = null;
      Result = this.ParseTypeDecl$1(Parent,$lt15.$clone(this.CurSourcePos()));
      return Result;
    };
    this.ParseTypeDecl$1 = function (Parent, NamePos) {
      var Result = null;
      var TypeName = "";
      var OldForceCaret = false;
      var IsDelphiGenericType = false;
      try {
        OldForceCaret = this.FScanner.SetForceCaret(true);
        IsDelphiGenericType = false;
        if (3 in this.GetCurrentModeSwitches()) {
          this.NextToken();
          IsDelphiGenericType = this.FCurToken === 18;
          this.UngetToken();
        };
        if (IsDelphiGenericType) {
          Result = this.ParseGenericTypeDecl(Parent,false)}
         else {
          TypeName = this.FCurTokenString;
          this.ExpectToken(19);
          Result = this.ParseType$1(Parent,NamePos,TypeName,true);
        };
      } finally {
        this.FScanner.SetForceCaret(OldForceCaret);
      };
      return Result;
    };
    this.ParseGenericTypeDecl = function (Parent, AddToParent) {
      var $Self = this;
      var Result = null;
      function InitGenericType(NewEl, GenericTemplateTypes) {
        Result = NewEl;
        if (AddToParent) {
          if ($lt83.isPrototypeOf(Parent)) {
            Parent.Declarations.Add(NewEl);
          } else if ($lt40.isPrototypeOf(Parent)) {
            Parent.Members.Add(NewEl);
          };
        };
        if (GenericTemplateTypes.FCount > 0) {
          NewEl.SetGenericTemplates(GenericTemplateTypes);
        };
      };
      function ParseProcType(TypeName, NamePos, TypeParams, IsReferenceTo) {
        var ProcTypeEl = null;
        var ProcType = 0;
        ProcTypeEl = null;
        ProcType = 0;
        var $tmp = $Self.FCurToken;
        if ($tmp === 66) {
          ProcTypeEl = $Self.CreateFunctionType(TypeName,"Result",Parent,false,NamePos,TypeParams);
          ProcType = 1;
        } else if ($tmp === 92) {
          ProcTypeEl = $Self.CreateElement$3($lt45,TypeName,Parent,0,NamePos,TypeParams);
          ProcType = 0;
        } else {
          $Self.ParseExcTokenError("procedure or function");
        };
        ProcTypeEl.SetIsReference(IsReferenceTo);
        if (AddToParent && $lt83.isPrototypeOf(Parent)) Parent.Functions.Add(ProcTypeEl);
        InitGenericType(ProcTypeEl,TypeParams);
        $Self.ParseProcedureOrFunction(ProcTypeEl,ProcTypeEl,ProcType,true);
      };
      var TypeName = "";
      var AExternalNameSpace = "";
      var AExternalName = "";
      var NamePos = $lt15.$new();
      var TypeParams = null;
      var ClassEl = null;
      var RecordEl = null;
      var ArrEl = null;
      var AObjKind = 0;
      Result = null;
      TypeName = this.FCurTokenString;
      NamePos.$assign(this.CurSourcePos());
      TypeParams = $lt11.$create("Create");
      try {
        this.ReadGenericArguments(TypeParams,Parent);
        this.ExpectToken(19);
        this.NextToken();
        var $tmp = this.FCurToken;
        if (($tmp === 85) || ($tmp === 47) || ($tmp === 75)) {
          var $tmp1 = this.FCurToken;
          if ($tmp1 === 85) {
            AObjKind = 0}
           else if ($tmp1 === 75) {
            AObjKind = 2}
           else {
            AObjKind = 1;
          };
          this.NextToken();
          if ((AObjKind === 1) && (this.FCurToken === 86)) this.ParseExcExpectedIdentifier();
          this.DoParseClassExternalHeader(AObjKind,{get: function () {
              return AExternalNameSpace;
            }, set: function (v) {
              AExternalNameSpace = v;
            }},{get: function () {
              return AExternalName;
            }, set: function (v) {
              AExternalName = v;
            }});
          ClassEl = this.CreateElement$3($lt46,TypeName,Parent,0,NamePos,TypeParams);
          ClassEl.ObjKind = AObjKind;
          if (AObjKind === 2) if ($lp10(this.FScanner.GetCurrentValueSwitch(0),"CORBA")) ClassEl.InterfaceType = 1;
          if (AddToParent && $lt83.isPrototypeOf(Parent)) Parent.Classes.Add(ClassEl);
          ClassEl.IsExternal = AExternalName !== "";
          if (AExternalName !== "") ClassEl.ExternalName = $lp11(AExternalName,"'");
          if (AExternalNameSpace !== "") ClassEl.ExternalNameSpace = $lp11(AExternalNameSpace,"'");
          if (!ClassEl.IsExternal) ClassEl.RTTIVisibility.$assign(this.RTTIVisibility);
          InitGenericType(ClassEl,TypeParams);
          this.DoParseClassType(ClassEl);
          this.CheckHint(ClassEl,true);
          this.FEngine.FinishScope(3,ClassEl);
        } else if ($tmp === 96) {
          RecordEl = this.CreateElement$3($lt48,TypeName,Parent,0,NamePos,TypeParams);
          RecordEl.RTTIVisibility.$assign(this.RTTIVisibility);
          if (AddToParent && $lt83.isPrototypeOf(Parent)) Parent.Classes.Add(RecordEl);
          InitGenericType(RecordEl,TypeParams);
          this.NextToken();
          this.ParseRecordMembers(RecordEl,58,(34 in this.FScanner.FCurrentModeSwitches) && !$lt84.isPrototypeOf(Parent) && (RecordEl.FName !== ""));
          this.CheckHint(RecordEl,true);
          this.FEngine.FinishScope(3,RecordEl);
        } else if ($tmp === 41) {
          ArrEl = this.CreateElement$3($lt85,TypeName,Parent,0,NamePos,TypeParams);
          if (AddToParent && $lt83.isPrototypeOf(Parent)) Parent.Types.Add(ArrEl);
          InitGenericType(ArrEl,TypeParams);
          this.DoParseArrayType(ArrEl);
          this.CheckHint(ArrEl,true);
          this.FEngine.FinishScope(3,ArrEl);
        } else if (($tmp === 92) || ($tmp === 66)) {
          ParseProcType(TypeName,NamePos,TypeParams,false)}
         else if ($tmp === 3) {
          if (this.CurTokenIsIdentifier("reference")) {
            this.NextToken();
            this.CheckToken(107);
            this.NextToken();
            ParseProcType(TypeName,NamePos,TypeParams,true);
          } else this.ParseExcTypeParamsNotAllowed()}
         else {
          this.ParseExcTypeParamsNotAllowed();
        };
      } finally {
        TypeParams = rtl.freeLoc(TypeParams);
      };
      return Result;
    };
    var TLocalClassType = {"0": "lctClass", lctClass: 0, "1": "lctObjcClass", lctObjcClass: 1, "2": "lctObjcCategory", lctObjcCategory: 2, "3": "lctHelper", lctHelper: 3};
    var FullTypeTokens = rtl.createSet(67,83,75,84,53,110);
    var NoHintTokens = rtl.createSet(92,66);
    var InterfaceKindTypes = [2,9];
    var ClassKindTypes = [1,7,8,3];
    var FuncArgResultTypeTokens = rtl.createSet(3,41,104,62);
    this.ParseType = function (Parent, NamePos, TypeName, DeclParseType) {
      var Result = null;
      var PM = 0;
      var CH = false;
      var isHelper = false;
      var lClassType = 0;
      Result = null;
      PM = this.CheckPackMode();
      if (DeclParseType === 1) {
        CH = !(this.FCurToken in NoHintTokens)}
       else {
        CH = false;
        if (this.FCurToken in FullTypeTokens) this.ParseExc$1(2039,rtl.getResStr($mod,"SParserTypeNotAllowedHere"),$lp4(18,this.CurTokenText()));
      };
      if (!(this.FCurToken in FuncArgResultTypeTokens) && ($lt73.isPrototypeOf(Parent) || $lt13.isPrototypeOf(Parent))) this.ParseExc(2025,rtl.getResStr($mod,"SParserParamsOrResultTypesNoLocalTypeDefs"));
      var $tmp = this.FCurToken;
      if ($tmp === 85) {
        Result = this.ParseClassDecl(Parent,NamePos,TypeName,0,PM)}
       else if ($tmp === 53) {
        Result = this.ParseClassDecl(Parent,NamePos,TypeName,6,PM)}
       else if (($tmp === 84) || ($tmp === 75)) {
        Result = this.ParseClassDecl(Parent,NamePos,TypeName,InterfaceKindTypes[+(this.FCurToken === 84)],PM);
      } else if ($tmp === 104) {
        Result = this.ParseSimpleType(Parent,this.CurSourcePos(),TypeName,false)}
       else if (($tmp === 83) || ($tmp === 82) || ($tmp === 47)) {
        if (this.FCurToken === 83) {
          lClassType = 1}
         else if (this.FCurToken === 82) {
          lClassType = 2}
         else {
          lClassType = 0;
          this.NextToken();
          if (!((DeclParseType === 1) || (this.FCurToken === 86))) this.ParseExc$1(2039,rtl.getResStr($mod,"SParserTypeNotAllowedHere"),$lp4(18,this.CurTokenText()));
          if (this.CurTokenIsIdentifier("Helper")) {
            this.NextToken();
            if (this.FCurToken in rtl.createSet(65,8)) lClassType = 3;
            this.UngetToken();
          };
          this.UngetToken();
        };
        Result = this.ParseClassDecl(Parent,NamePos,TypeName,ClassKindTypes[lClassType],PM);
      } else if ($tmp === 110) {
        isHelper = false;
        if (39 in this.FScanner.FCurrentModeSwitches) {
          this.NextToken();
          if (this.CurTokenIsIdentifier("helper")) {
            this.NextToken();
            isHelper = this.FCurToken in rtl.createSet(65,8);
            this.UngetToken();
          };
          this.UngetToken();
        };
        if (isHelper) {
          Result = this.ParseClassDecl(Parent,NamePos,TypeName,5,PM)}
         else Result = this.ParseAliasType(Parent,NamePos,TypeName);
      } else if ($tmp === 3) {
        if (this.CurTokenIsIdentifier("reference") && !$lt86.isPrototypeOf(Parent)) {
          CH = false;
          Result = this.ParseReferenceToProcedureType(Parent,NamePos,TypeName);
        } else Result = this.ParseSimpleType(Parent,NamePos,TypeName,DeclParseType === 1);
      } else if ($tmp === 24) {
        Result = this.ParsePointerType(Parent,NamePos,TypeName)}
       else if ($tmp === 62) {
        Result = this.ParseFileType(Parent,NamePos,TypeName)}
       else if ($tmp === 41) {
        Result = this.ParseArrayType(Parent,NamePos,TypeName,PM)}
       else if ($tmp === 8) {
        Result = this.ParseEnumType(Parent,NamePos,TypeName)}
       else if ($tmp === 101) {
        Result = this.ParseSetType(Parent,NamePos,TypeName,PM === 1)}
       else if ($tmp === 92) {
        Result = this.ParseProcedureType(Parent,NamePos,TypeName,0)}
       else if ($tmp === 66) {
        Result = this.ParseProcedureType(Parent,NamePos,TypeName,1)}
       else if ($tmp === 96) {
        this.NextToken();
        isHelper = false;
        if (this.CurTokenIsIdentifier("Helper")) {
          this.NextToken();
          isHelper = this.FCurToken in rtl.createSet(65,8);
          this.UngetToken();
        };
        this.UngetToken();
        if (isHelper) {
          Result = this.ParseClassDecl(Parent,NamePos,TypeName,4,PM)}
         else Result = this.ParseRecordDecl(Parent,NamePos,TypeName,PM);
      } else if (($tmp === 6) || ($tmp === 13) || ($tmp === 7)) {
        this.UngetToken();
        Result = this.ParseRangeType(Parent,NamePos,TypeName,DeclParseType === 1);
      } else {
        this.ParseExcExpectedIdentifier();
      };
      if (CH) this.CheckHint(Result,true);
      return Result;
    };
    var TS = [0,1];
    this.ParseType$1 = function (Parent, NamePos, TypeName, Full) {
      var Result = null;
      Result = this.ParseType(Parent,NamePos,TypeName,TS[+Full]);
      return Result;
    };
    this.ParseReferenceToProcedureType = function (Parent, NamePos, TypeName) {
      var Result = null;
      if (!this.CurTokenIsIdentifier("reference")) this.ParseExcTokenError("reference");
      this.ExpectToken(107);
      this.NextToken();
      var $tmp = this.FCurToken;
      if ($tmp === 92) {
        Result = this.ParseProcedureType(Parent,NamePos,TypeName,0)}
       else if ($tmp === 66) {
        Result = this.ParseProcedureType(Parent,NamePos,TypeName,1)}
       else {
        Result = null;
        this.ParseExcTokenError("procedure or function");
      };
      Result.SetIsReference(true);
      return Result;
    };
    this.ParseProcedureType = function (Parent, NamePos, TypeName, PT) {
      var Result = null;
      if (PT in rtl.createSet(1,7)) {
        Result = this.CreateFunctionType(TypeName,"Result",Parent,false,NamePos,null)}
       else Result = this.CreateElement$1($lt45,TypeName,Parent,NamePos);
      this.ParseProcedureOrFunction(Result,Result,PT,true);
      return Result;
    };
    this.ParseStringType = function (Parent, NamePos, TypeName) {
      var Result = null;
      var CodePageAsText = "";
      var LengthAsText = "";
      var Params = null;
      var CodePageExpr = null;
      var LengthExpr = null;
      Result = this.CreateElement$1($lt87,TypeName,Parent,NamePos);
      if (Result.FName === "") Result.FName = "string";
      Result.Expr = this.CreatePrimitiveExpr(Result,0,TypeName);
      this.NextToken();
      LengthAsText = "";
      if (this.FCurToken === 22) {
        Params = this.CreateElement($lt70,"",Result);
        Params.Value = Result.Expr;
        Params.Value.SetParent(Params);
        Result.Expr = Params;
        LengthAsText = "";
        this.NextToken();
        LengthExpr = this.DoParseExpression(Params,null,false);
        Params.AddParam(LengthExpr);
        this.CheckToken(23);
        LengthAsText = this.ExprToText(LengthExpr);
      } else if (this.FCurToken === 8) {
        CodePageAsText = "";
        this.NextToken();
        CodePageExpr = this.DoParseExpression(Result,null,false);
        Result.CodepageExpr = CodePageExpr;
        this.CheckToken(9);
        CodePageAsText = this.ExprToText(CodePageExpr);
      } else this.UngetToken();
      Result.DestType = this.CreateElement($lt88,"string",Result);
      Result.DestType.LengthExpr = LengthAsText;
      Result.DestType.CodePageExpr = CodePageAsText;
      return Result;
    };
    var TSimpleTypeKind = {"0": "stkAlias", stkAlias: 0, "1": "stkString", stkString: 1, "2": "stkRange", stkRange: 2};
    this.ParseSimpleType = function (Parent, NamePos, TypeName, IsFull) {
      var Result = null;
      var Ref = null;
      var K = 0;
      var lName = "";
      var Name = "";
      var Expr = null;
      var MustBeSpecialize = false;
      Result = null;
      if (this.FCurToken === 104) {
        MustBeSpecialize = true;
        this.ExpectIdentifier({});
      } else MustBeSpecialize = false;
      Name = this.FCurTokenString;
      Expr = null;
      Ref = null;
      if (IsFull) {
        Name = this.ReadDottedIdentifier(Parent,{get: function () {
            return Expr;
          }, set: function (v) {
            Expr = v;
          }},true)}
       else {
        this.NextToken();
        while (this.FCurToken === 14) {
          this.ExpectIdentifier({});
          Name = Name + "." + this.FCurTokenString;
          this.NextToken();
        };
      };
      lName = $lp1(Name);
      if (MustBeSpecialize && (this.FCurToken !== 18)) this.ParseExcTokenError("<");
      if ((IsFull && (this.FCurToken === 17)) || this.IsCurTokenHint$1()) {
        K = 0;
        this.UngetToken();
      } else if (IsFull && (this.FCurToken === 22)) {
        if (lName === "string") {
          K = 1}
         else this.ParseExcSyntaxError();
        this.UngetToken();
      } else if ((this.FCurToken === 18) && (MustBeSpecialize || (3 in this.GetCurrentModeSwitches()))) {
        Result = this.ParseSpecializeType(Parent,NamePos,TypeName,Name,{get: function () {
            return Expr;
          }, set: function (v) {
            Expr = v;
          }});
        return Result;
      } else if (this.FCurToken in rtl.createSet(8,26)) {
        if ((lName === "string") || (lName === "ansistring")) {
          K = 1}
         else K = 2;
        this.UngetToken();
      } else {
        if (IsFull) this.ParseExcTokenError(";");
        K = 0;
        if (!(3 in this.FOptions) && ($lp1(Name) === "string")) K = 1;
        this.UngetToken();
      };
      var $tmp = K;
      if ($tmp === 1) {
        Expr = null;
        Result = this.ParseStringType(Parent,NamePos,TypeName);
      } else if ($tmp === 2) {
        Expr = null;
        this.UngetToken();
        Result = this.ParseRangeType(Parent,NamePos,TypeName,false);
      } else if ($tmp === 0) {
        Ref = this.ResolveTypeReference(Name,Parent,0);
        if (IsFull) {
          Result = this.CreateElement$1($lt87,TypeName,Parent,NamePos);
          Result.DestType = Ref;
          Ref = null;
          Result.Expr = Expr;
          Expr.SetParent(Result);
          Expr = null;
          if (TypeName !== "") this.FEngine.FinishScope(3,Result);
        } else Result = Ref;
      };
      return Result;
    };
    this.ParseAliasType = function (Parent, NamePos, TypeName) {
      var Result = null;
      Result = this.CreateElement$1($lt89,TypeName,Parent,NamePos);
      Result.DestType = this.ParseType$1(Result,NamePos,"",false);
      this.FEngine.FinishTypeAlias({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }});
      this.FEngine.FinishScope(3,Result);
      return Result;
    };
    this.ParseTypeReference = function (Parent, NeedExpr, Expr) {
      var Result = null;
      var Name = "";
      var IsSpecialize = false;
      var ok = false;
      var NamePos = $lt15.$new();
      Result = null;
      Expr.set(null);
      ok = false;
      try {
        NamePos.$assign(this.CurSourcePos());
        if (this.FCurToken === 104) {
          IsSpecialize = true;
          this.NextToken();
        } else IsSpecialize = false;
        this.CheckToken(3);
        Name = this.ReadDottedIdentifier(Parent,Expr,true);
        if (this.FCurToken === 18) {
          if (IsSpecialize || (3 in this.GetCurrentModeSwitches())) {
            Result = this.ParseSpecializeType(Parent,NamePos,"",Name,Expr);
            this.NextToken();
          } else this.CheckToken(58);
        } else if (IsSpecialize) {
          this.CheckToken(18)}
         else {
          Result = this.ResolveTypeReference(Name,Parent,0);
        };
        ok = true;
      } finally {
        if (!ok || !NeedExpr) Expr.set(null);
      };
      return Result;
    };
    this.ParseSpecializeType = function (Parent, NamePos, TypeName, GenName, GenNameExpr) {
      var Result = null;
      var ST = null;
      Result = null;
      if (this.FCurToken !== 18) this.ParseExcTokenError("[20190801112729]");
      ST = this.CreateElement$1($lt90,TypeName,Parent,NamePos);
      if (GenNameExpr.get() !== null) {
        ST.Expr = GenNameExpr.get();
        GenNameExpr.get().SetParent(ST);
        GenNameExpr.set(null);
      };
      this.ReadSpecializeArguments(ST,ST.Params);
      if (this.FCurToken !== 20) this.ParseExcTokenError("[20190801113005]");
      ST.DestType = this.ResolveTypeReference(GenName,ST,ST.Params.FCount);
      this.NextToken();
      if (this.FCurToken !== 14) {
        this.UngetToken()}
       else {
        this.NextToken();
        this.FEngine.BeginScope(7,ST);
        ST.SubType = this.ParseSimpleType(ST,this.CurSourcePos(),GenName,false);
        this.FEngine.FinishScope(7,ST);
      };
      this.FEngine.FinishScope(3,ST);
      Result = ST;
      return Result;
    };
    this.ParsePointerType = function (Parent, NamePos, TypeName) {
      var Result = null;
      var Name = "";
      Result = this.CreateElement$1($lt86,TypeName,Parent,NamePos);
      this.ExpectTokens(rtl.createSet(3,62));
      Name = this.FCurTokenString;
      do {
        this.NextToken();
        if (this.FCurToken === 14) {
          this.ExpectIdentifier({});
          Name = Name + "." + this.FCurTokenString;
        } else break;
      } while (!false);
      if (this.FCurToken === 18) {
        do {
          this.NextToken();
        } while (!(this.FCurToken === 20));
      } else {
        if (this.FCurToken === 17) {
          this.NextToken();
          if (this.CurTokenIsIdentifier("far") || this.CurTokenIsIdentifier("near")) {
            this.NextToken();
            this.CheckToken(17);
          } else this.UngetToken();
        };
        this.UngetToken();
      };
      Result.DestType = this.ResolveTypeReference(Name,Result,0);
      this.FEngine.FinishScope(3,Result);
      return Result;
    };
    this.ParseArrayType = function (Parent, NamePos, TypeName, PackMode) {
      var Result = null;
      Result = this.CreateElement$1($lt85,TypeName,Parent,NamePos);
      Result.PackMode = PackMode;
      this.DoParseArrayType(Result);
      this.FEngine.FinishScope(3,Result);
      return Result;
    };
    this.ParseFileType = function (Parent, NamePos, TypeName) {
      var Result = null;
      Result = this.CreateElement$1($lt91,TypeName,Parent,NamePos);
      this.NextToken();
      if (this.FCurToken === 86) {
        Result.ElType = this.ParseType$1(Result,this.CurSourcePos(),"",false)}
       else this.UngetToken();
      return Result;
    };
    this.ParseRecordDecl = function (Parent, NamePos, TypeName, Packmode) {
      var Result = null;
      var AllowAdvanced = false;
      Result = this.CreateElement$1($lt48,TypeName,Parent,NamePos);
      Result.RTTIVisibility.$assign(this.RTTIVisibility);
      Result.PackMode = Packmode;
      this.NextToken();
      AllowAdvanced = (34 in this.FScanner.FCurrentModeSwitches) && !$lt84.isPrototypeOf(Parent) && (Result.FName !== "");
      this.ParseRecordMembers(Result,58,AllowAdvanced);
      this.FEngine.FinishScope(3,Result);
      return Result;
    };
    this.ParseEnumType = function (Parent, NamePos, TypeName) {
      var Result = null;
      var EnumValue = null;
      Result = this.CreateElement$1($lt92,TypeName,Parent,NamePos);
      while (true) {
        this.NextToken();
        this.SaveComments();
        EnumValue = this.CreateElement($lt93,this.FCurTokenString,Result);
        Result.Values.Add(EnumValue);
        this.NextToken();
        if (this.FCurToken === 9) {
          break}
         else if (this.FCurToken in rtl.createSet(19,27)) {
          this.NextToken();
          EnumValue.Value = this.DoParseExpression(Result,null,true);
          if (this.FCurToken === 9) {
            break}
           else if (!(this.FCurToken === 12)) this.ParseExc(2011,rtl.getResStr($mod,"SParserExpectedCommaRBracket"));
        } else if (!(this.FCurToken === 12)) this.ParseExc(2011,rtl.getResStr($mod,"SParserExpectedCommaRBracket"));
      };
      this.FEngine.FinishScope(3,Result);
      return Result;
    };
    this.ParseSetType = function (Parent, NamePos, TypeName, AIsPacked) {
      var Result = null;
      Result = this.CreateElement$1($lt94,TypeName,Parent,NamePos);
      Result.IsPacked = AIsPacked;
      this.ExpectToken(86);
      Result.EnumType = this.ParseType$1(Result,this.CurSourcePos(),"",false);
      this.FEngine.FinishScope(3,Result);
      return Result;
    };
    this.ParseClassDecl = function (Parent, NamePos, AClassName, AObjKind, PackMode) {
      var Result = null;
      var isExternal = false;
      var isSealed = false;
      var isAbstract = false;
      var ok = false;
      var AExternalNameSpace = "";
      var AExternalName = "";
      var ClassEl = null;
      this.NextToken();
      if ((AObjKind === 1) && (this.FCurToken === 86)) {
        Result = this.CreateElement$1($lt95,AClassName,Parent,NamePos);
        this.ExpectIdentifier({});
        this.UngetToken();
        Result.DestType = this.ParseType$1(Result,this.CurSourcePos(),"",false);
        this.FEngine.FinishScope(3,Result);
        return Result;
      };
      isAbstract = false;
      isSealed = false;
      if ((AObjKind === 1) && (this.CurTokenIsIdentifier("abstract") || this.CurTokenIsIdentifier("sealed"))) {
        isAbstract = this.CurTokenIsIdentifier("abstract");
        isSealed = this.CurTokenIsIdentifier("sealed");
        this.NextToken();
      };
      isExternal = this.DoParseClassExternalHeader(AObjKind,{get: function () {
          return AExternalNameSpace;
        }, set: function (v) {
          AExternalNameSpace = v;
        }},{get: function () {
          return AExternalName;
        }, set: function (v) {
          AExternalName = v;
        }});
      if (AObjKind in $lm3.okAllHelpers) {
        if (!this.CurTokenIsIdentifier("Helper")) this.ParseExcSyntaxError();
        this.NextToken();
      };
      ClassEl = this.CreateElement$1($lt46,AClassName,Parent,NamePos);
      Result = ClassEl;
      ok = false;
      try {
        if (isAbstract) ClassEl.Modifiers.Add("abstract");
        if (isSealed) ClassEl.Modifiers.Add("sealed");
        ClassEl.HelperForType = null;
        ClassEl.IsExternal = isExternal;
        if (AExternalName !== "") ClassEl.ExternalName = $lp11(AExternalName,"'");
        if (AExternalNameSpace !== "") ClassEl.ExternalNameSpace = $lp11(AExternalNameSpace,"'");
        ClassEl.ObjKind = AObjKind;
        ClassEl.PackMode = PackMode;
        if (AObjKind === 2) {
          if ($lp10(this.FScanner.GetCurrentValueSwitch(0),"CORBA")) ClassEl.InterfaceType = 1;
        };
        if (!ClassEl.IsExternal) ClassEl.RTTIVisibility.$assign(this.RTTIVisibility);
        this.DoParseClassType(ClassEl);
        this.FEngine.FinishScope(3,Result);
        ok = true;
      } finally {
        if (!ok) ClassEl.SetParent(null);
      };
      return Result;
    };
    this.ParseProperty = function (Parent, AName, AVisibility, IsClassField) {
      var $Self = this;
      var Result = null;
      function GetAccessorName(aParent, Expr) {
        var Result = "";
        var Params = null;
        var Param = null;
        var SrcPos = $lt15.$new();
        $Self.NextToken();
        Result = $Self.ReadDottedIdentifier(aParent,Expr,true);
        if ($Self.FCurToken !== 22) {
          $Self.UngetToken()}
         else {
          Result = Result + "[";
          Param = null;
          Params = $Self.CreateElement($lt70,"",aParent);
          Params.Kind = 11;
          Params.Value = Expr.get();
          Expr.get().SetParent(Params);
          Expr.set(Params);
          $Self.NextToken();
          var $tmp = $Self.FCurToken;
          if ($tmp === 7) {
            Param = $Self.CreatePrimitiveExpr(aParent,2,$Self.CurTokenText())}
           else if ($tmp === 6) {
            Param = $Self.CreatePrimitiveExpr(aParent,1,$Self.FCurTokenString)}
           else if ($tmp === 3) {
            Param = $Self.CreatePrimitiveExpr(aParent,0,$Self.CurTokenText())}
           else if (($tmp === 61) || ($tmp === 108)) {
            Param = $Self.CreateBoolConstExpr(aParent,6,$Self.FCurToken === 108)}
           else {
            $Self.ParseExcExpectedIdentifier();
          };
          Params.AddParam(Param);
          Result = Result + $Self.FCurTokenString;
          $Self.ExpectToken(23);
          Result = Result + "]";
        };
        do {
          $Self.NextToken();
          if ($Self.FCurToken !== 14) {
            $Self.UngetToken();
            break;
          };
          SrcPos.$assign($Self.CurTokenPos());
          $Self.ExpectIdentifier({});
          Result = Result + "." + $Self.FCurTokenString;
          $Self.AddToBinaryExprChain(Expr,$Self.CreatePrimitiveExpr(aParent,0,$Self.FCurTokenString),27,SrcPos);
        } while (!false);
        return Result;
      };
      function ParseImplements() {
        var Identifier = "";
        var Expr = null;
        var l = 0;
        do {
          $Self.ExpectToken(3);
          l = rtl.length(Result.Implements);
          Identifier = $Self.ReadDottedIdentifier(Result,{get: function () {
              return Expr;
            }, set: function (v) {
              Expr = v;
            }},l === 0);
          if (l === 0) Result.ImplementsName = Identifier;
          Result.Implements = rtl.arraySetLength(Result.Implements,null,l + 1);
          Result.Implements[l] = Expr;
        } while (!($Self.FCurToken !== 12));
      };
      var isArray = false;
      var IsClass = false;
      var ObjKind = 0;
      Result = this.CreateElement$2($lt96,AName,Parent,AVisibility);
      if (IsClassField) Result.VarModifiers = rtl.includeSet(Result.VarModifiers,4);
      IsClass = (Parent !== null) && (Parent.$class.ClassType() === $lt46);
      if (IsClass) {
        ObjKind = Parent.ObjKind}
       else ObjKind = 1;
      this.NextToken();
      isArray = this.FCurToken === 22;
      if (isArray) {
        this.ParseArgList(Result,Result.FArgs,23);
        this.NextToken();
      };
      if (this.FCurToken === 16) {
        Result.VarType = this.ParseType$1(Result,this.CurSourcePos(),"",false);
        this.NextToken();
      } else if (!IsClass) this.ParseExcTokenError(":");
      if (this.CurTokenIsIdentifier("INDEX")) {
        this.NextToken();
        Result.IndexExpr = this.DoParseExpression(Result,null,true);
      };
      if (this.CurTokenIsIdentifier("READ")) {
        Result.ReadAccessorName = GetAccessorName(Result,{p: Result, get: function () {
            return this.p.ReadAccessor;
          }, set: function (v) {
            this.p.ReadAccessor = v;
          }});
        this.NextToken();
      };
      if (this.CurTokenIsIdentifier("WRITE")) {
        Result.WriteAccessorName = GetAccessorName(Result,{p: Result, get: function () {
            return this.p.WriteAccessor;
          }, set: function (v) {
            this.p.WriteAccessor = v;
          }});
        this.NextToken();
      };
      if (IsClass && (ObjKind === 6)) {
        if (this.CurTokenIsIdentifier("READONLY")) {
          Result.DispIDReadOnly = true;
          this.NextToken();
        };
        if (this.CurTokenIsIdentifier("DISPID")) {
          this.NextToken();
          Result.DispIDExpr = this.DoParseExpression(Result,null,true);
        };
      };
      if (IsClass && (ObjKind === 1) && this.CurTokenIsIdentifier("IMPLEMENTS")) ParseImplements();
      if (this.CurTokenIsIdentifier("STORED")) {
        if (!(ObjKind in rtl.createSet(1))) this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"STORED",18,$lm3.ObjKindNames[ObjKind]));
        this.NextToken();
        if (this.FCurToken === 108) {
          Result.StoredAccessorName = "True";
          Result.StoredAccessor = this.CreateBoolConstExpr(Result,6,true);
        } else if (this.FCurToken === 61) {
          Result.StoredAccessorName = "False";
          Result.StoredAccessor = this.CreateBoolConstExpr(Result,6,false);
        } else if (this.FCurToken === 3) {
          this.UngetToken();
          Result.StoredAccessorName = GetAccessorName(Result,{p: Result, get: function () {
              return this.p.StoredAccessor;
            }, set: function (v) {
              this.p.StoredAccessor = v;
            }});
        } else this.ParseExcSyntaxError();
        this.NextToken();
      };
      if (this.CurTokenIsIdentifier("DEFAULT")) {
        if (!(ObjKind in rtl.createSet(1,3))) this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"DEFAULT",18,$lm3.ObjKindNames[ObjKind]));
        if (isArray) this.ParseExc(2041,rtl.getResStr($mod,"SParserArrayPropertiesCannotHaveDefaultValue"));
        this.NextToken();
        Result.DefaultExpr = this.DoParseExpression(Result,null,true);
      } else if (this.CurTokenIsIdentifier("NODEFAULT")) {
        if (!(ObjKind in rtl.createSet(1))) this.ParseExc$1(2056,rtl.getResStr($mod,"SParserXNotAllowedInY"),$lp4(18,"NODEFAULT",18,$lm3.ObjKindNames[ObjKind]));
        Result.IsNodefault = true;
        if (Result.DefaultExpr !== null) this.ParseExcSyntaxError();
        this.NextToken();
      };
      if (this.FCurToken === 17) {
        this.NextToken();
        if (this.CurTokenIsIdentifier("DEFAULT")) {
          if ((Result.VarType !== null) && !isArray) this.ParseExc(2042,rtl.getResStr($mod,"SParserDefaultPropertyMustBeArray"));
          this.NextToken();
          if (this.FCurToken === 17) {
            Result.IsDefault = true;
            this.NextToken();
          };
        };
        while (this.DoCheckHint(Result)) {
          this.NextToken();
          if (this.FCurToken === 17) this.NextToken();
        };
        this.UngetToken();
      } else if (this.FCurToken === 58) {}
      else this.CheckToken(17);
      return Result;
    };
    this.ParseRangeType = function (AParent, NamePos, TypeName, Full) {
      var Result = null;
      var PE = null;
      Result = this.CreateElement$1($lt97,TypeName,AParent,NamePos);
      if (Full) {
        if (!(this.FCurToken === 19)) this.ParseExcTokenError($lm4.TokenInfos[19]);
      };
      this.NextToken();
      PE = this.DoParseExpression(Result,null,false);
      if (!($lt62.isPrototypeOf(PE) && (PE.Kind === 7))) this.ParseExc(2027,rtl.getResStr($mod,"SRangeExpressionExpected"));
      Result.RangeExpr = PE;
      this.UngetToken();
      this.FEngine.FinishScope(3,Result);
      return Result;
    };
    this.ParseExportDecl = function (Parent, List) {
      var E = null;
      var aName = "";
      var NameExpr = null;
      do {
        if (List.FCount > 0) this.ExpectIdentifier({});
        aName = this.ReadDottedIdentifier(Parent,{get: function () {
            return NameExpr;
          }, set: function (v) {
            NameExpr = v;
          }},true);
        E = this.CreateElement($lt98,aName,Parent);
        if (NameExpr.Kind === 0) {}
        else {
          E.NameExpr = NameExpr;
          NameExpr.SetParent(E);
        };
        NameExpr = null;
        List.Add(E);
        if (this.CurTokenIsIdentifier("INDEX")) {
          this.NextToken();
          E.ExportIndex = this.DoParseExpression(E,null,true);
          this.NextToken();
          if (!this.CurTokenIsIdentifier("NAME")) this.UngetToken();
        };
        if (this.CurTokenIsIdentifier("NAME")) {
          this.NextToken();
          E.ExportName = this.DoParseExpression(E,null,true);
        };
        if (!(this.FCurToken in rtl.createSet(12,17))) this.ParseExc(2012,rtl.getResStr($mod,"SParserExpectedCommaSemicolon"));
        this.FEngine.FinishScope(12,E);
      } while (!(this.FCurToken === 17));
    };
    this.ParseConstDecl = function (Parent) {
      var Result = null;
      var OldForceCaret = false;
      this.SaveComments();
      Result = this.CreateElement$1($lt99,this.FCurTokenString,Parent,this.FIdentifierPos);
      try {
        if ($lt40.isPrototypeOf(Parent)) Result.VarModifiers = rtl.includeSet(Result.VarModifiers,4);
        this.NextToken();
        if (this.FCurToken === 16) {
          if (!(9 in this.FScanner.FCurrentBoolSwitches)) Result.IsConst = true;
          OldForceCaret = this.FScanner.SetForceCaret(true);
          try {
            Result.VarType = this.ParseType$1(Result,this.CurSourcePos(),"",false);
          } finally {
            this.FScanner.SetForceCaret(OldForceCaret);
          };
        } else {
          this.UngetToken();
          Result.IsConst = true;
        };
        this.NextToken();
        if (this.FCurToken === 19) {
          this.NextToken();
          Result.Expr = this.DoParseConstValueExpression(Result);
          if ((Result.VarType === null) && (Result.Expr.Kind === 7)) this.ParseExc(2052,rtl.getResStr($mod,"SParserNoConstRangeAllowed"));
        } else if ((Result.VarType !== null) && (12 in this.FOptions)) {
          if ($lt46.isPrototypeOf(Parent) && Parent.IsExternal && (Parent.ObjKind === 1)) {
            Result.IsConst = true}
           else if (this.FCurToken === 17) {
            this.NextToken();
            if (this.CurTokenIsIdentifier("external") || this.CurTokenIsIdentifier("weakexternal")) {
              Result.IsConst = true;
              Result.VarModifiers = rtl.includeSet(Result.VarModifiers,1);
              this.NextToken();
              if (this.FCurToken in rtl.createSet(4,3)) {
                if (!this.CurTokenIsIdentifier("name")) Result.LibraryName = this.DoParseExpression(Result,null,true);
                if (!this.CurTokenIsIdentifier("name")) this.ParseExcSyntaxError();
                this.NextToken();
                if (!(this.FCurToken in rtl.createSet(7,4,3))) this.ParseExcTokenError($lm4.TokenInfos[4]);
                Result.ExportName = this.DoParseExpression(Result,null,true);
                Result.IsConst = true;
              } else if (this.FCurToken === 17) {}
              else this.ParseExcSyntaxError();
            } else {
              this.UngetToken();
              this.CheckToken(19);
            };
          } else this.CheckToken(19);
        } else this.CheckToken(19);
        this.UngetToken();
        this.CheckHint(Result,!$lt40.isPrototypeOf(Parent));
      } catch ($e) {
        if ($lt14.isPrototypeOf($e)) {
          var E = $e;
          if (!this.TryErrorRecovery(this.CreateRecovery$2(Result,E,rtl.createSet(17),false,12))) {
            throw $e}
           else Result = null;
        } else throw $e
      };
      return Result;
    };
    this.ParseResourcestringDecl = function (Parent) {
      var Result = null;
      this.SaveComments();
      Result = this.CreateElement$1($lt100,this.FCurTokenString,Parent,this.FIdentifierPos);
      this.ExpectToken(19);
      this.NextToken();
      Result.Expr = this.DoParseConstValueExpression(Result);
      this.UngetToken();
      this.CheckHint(Result,true);
      return Result;
    };
    this.ParseAttributes = function (Parent, Add) {
      var Result = null;
      var Expr = null;
      var Arg = null;
      var Attributes = null;
      var Params = null;
      var Decls = null;
      Result = null;
      Attributes = this.CreateElement($lt101,"",Parent);
      do {
        this.NextToken();
        Expr = null;
        this.ReadDottedIdentifier(Attributes,{get: function () {
            return Expr;
          }, set: function (v) {
            Expr = v;
          }},false);
        if (this.FCurToken === 8) {
          Params = this.CreateElement($lt70,"",Attributes);
          Params.Kind = 10;
          Attributes.AddCall(Params);
          Params.Value = Expr;
          Expr.SetParent(Params);
          Expr = null;
          do {
            this.NextToken();
            if (this.FCurToken === 9) break;
            Arg = this.DoParseConstValueExpression(Params);
            Params.AddParam(Arg);
          } while (!(this.FCurToken !== 12));
          this.CheckToken(9);
          this.NextToken();
        } else {
          Attributes.AddCall(Expr);
          Expr = null;
        };
      } while (!(this.FCurToken !== 12));
      this.CheckToken(23);
      Result = Attributes;
      if (Add) {
        if ($lt83.isPrototypeOf(Parent)) {
          Decls = Parent;
          Decls.Declarations.Add(Result);
          Decls.Attributes.Add(Result);
        } else if ($lt40.isPrototypeOf(Parent)) {
          Parent.Members.Add(Result)}
         else this.ParseExcTokenError("[20190922193803]");
        this.FEngine.FinishScope(12,Result);
      };
      return Result;
    };
    this.ParseVarDecl = function (Parent, List) {
      try {
        this.ParseVarList(Parent,List,0,1);
      } catch ($e) {
        if ($lt14.isPrototypeOf($e)) {
          var E = $e;
          if (!this.TryErrorRecovery(this.CreateRecovery(E,rtl.createSet(17),false))) throw $e;
        } else throw $e
      };
    };
    this.ParseInlineVarDecl = function (Parent, List, AVisibility, ClosingBrace) {
      var tt = {};
      tt = rtl.createSet(58,17);
      if (ClosingBrace) tt = rtl.includeSet(tt,9);
      try {
        this.ParseVarList(Parent,List,AVisibility,0);
      } catch ($e) {
        if ($lt14.isPrototypeOf($e)) {
          var E = $e;
          if (!this.TryErrorRecovery(this.CreateRecovery(E,rtl.refSet(tt),false))) throw $e;
        } else throw $e
      };
      if (!(this.FCurToken in tt)) this.ParseExc(2018,rtl.getResStr($mod,"SParserExpectedSemiColonEnd"));
    };
    this.ParseMain = function (Module) {
      Module.set(null);
      this.NextToken();
      this.SaveComments();
      var $tmp = this.FCurToken;
      if ($tmp === 111) {
        this.ParseUnit(Module)}
       else if ($tmp === 93) {
        this.ParseProgram(Module,false)}
       else if ($tmp === 78) {
        this.ParseLibrary(Module)}
       else if ($tmp === 91) {
        this.ParsePackage(Module)}
       else if ($tmp === 0) {
        this.CheckToken(93)}
       else {
        this.UngetToken();
        this.ParseProgram(Module,true);
      };
      if ((this.FErrorCount > 0) && this.FFailOnModuleErors) {
        if (this.FEngine.HandleResultOnError(Module.get())) {
          $lp(Module)}
         else Module.set(null);
        this.ParseExc(2059,rtl.getResStr($mod,"SErrCompilationAborted"));
      };
    };
    this.ParseUnit = function (Module) {
      var AUnitName = "";
      var StartPos = $lt15.$new();
      var HasFinished = false;
      this.FScanner.DisablePackageTokens();
      StartPos.$assign(this.CurTokenPos());
      Module.set(null);
      AUnitName = this.ExpectIdentifier({});
      this.NextToken();
      while (this.FCurToken === 14) {
        this.ExpectIdentifier({});
        AUnitName = AUnitName + "." + this.FCurTokenString;
        this.NextToken();
      };
      this.UngetToken();
      Module.set(this.CreateElement$1($lt78,AUnitName,this.FEngine.FPackage,StartPos));
      this.FCurModule = Module.get();
      HasFinished = true;
      try {
        this.FScanner.FCurModulename = AUnitName;
        if (this.FEngine.FPackage != null) {
          Module.get().PackageName = this.FEngine.FPackage.FName;
          this.FEngine.FPackage.Modules.Add(Module.get());
        };
        this.CheckHint(Module.get(),true);
        this.ExpectToken(75);
        if (13 in this.FOptions) {
          HasFinished = false;
          return;
        };
        this.ParseInterface();
        if ((Module.get().InterfaceSection !== null) && (Module.get().InterfaceSection.PendingUsedIntf !== null)) {
          HasFinished = false;
        };
        if ((Module.get().ImplementationSection !== null) && (Module.get().ImplementationSection.PendingUsedIntf !== null)) {
          HasFinished = false;
        };
        if (HasFinished) this.FinishedModule();
      } finally {
        if (HasFinished) this.FCurModule = null;
      };
    };
    this.GetLastSection = function () {
      var Result = null;
      Result = null;
      if (this.FCurModule === null) return Result;
      if ($lt102.isPrototypeOf(this.FCurModule)) {
        Result = this.FCurModule.ProgramSection}
       else if ($lt103.isPrototypeOf(this.FCurModule)) {
        Result = this.FCurModule.LibrarySection}
       else if ((this.FCurModule.$class.ClassType() === $lt78) || $lt104.isPrototypeOf(this.FCurModule)) {
        if (this.FCurModule.ImplementationSection !== null) {
          Result = this.FCurModule.ImplementationSection}
         else Result = this.FCurModule.InterfaceSection;
      };
      return Result;
    };
    this.CanParseContinue = function (Section) {
      var Result = false;
      Result = false;
      Section.set(null);
      if (this.FCurModule === null) return Result;
      if ((this.FLastMsg !== "") && (this.FLastMsgType <= 1)) {
        return Result;
      };
      if ((this.FScanner.FLastMsg !== "") && (this.FScanner.FLastMsgType <= 1)) {
        return Result;
      };
      Section.set(this.GetLastSection());
      if (Section.get() === null) if ((13 in this.FOptions) && ($lt104.isPrototypeOf(this.FCurModule) || (this.FCurModule.$class.ClassType() === $lt78)) && (this.FCurModule.InterfaceSection === null)) {
        return true}
       else {
        return false;
      };
      Result = Section.get().PendingUsedIntf === null;
      return Result;
    };
    this.ParseContinue = function () {
      var Section = null;
      var HasFinished = false;
      if (this.FCurModule === null) this.ParseExcTokenError("TPasParser.ParseContinue missing module");
      if (!this.CanParseContinue({get: function () {
          return Section;
        }, set: function (v) {
          Section = v;
        }})) this.ParseExcTokenError("TPasParser.ParseContinue missing section");
      HasFinished = true;
      try {
        if (Section === null) {
          this.ParseInterface();
        } else {
          this.FEngine.FinishScope(1,Section);
          this.ParseDeclarations(Section);
        };
        Section = this.GetLastSection();
        if (Section === null) this.ParseExc(2001,"[20180306112327]");
        if (Section.PendingUsedIntf !== null) HasFinished = false;
        if (HasFinished) this.FinishedModule();
      } finally {
        if (HasFinished) this.FCurModule = null;
      };
    };
    this.ParseProgram = function (Module, SkipHeader) {
      var PP = null;
      var Section = null;
      var N = "";
      var StartPos = $lt15.$new();
      var HasFinished = false;
      this.FScanner.DisablePackageTokens();
      StartPos.$assign(this.CurTokenPos());
      if (SkipHeader) {
        N = $lp12(this.FScanner.FCurFilename,"")}
       else {
        N = this.ExpectIdentifier({});
        this.NextToken();
        while (this.FCurToken === 14) {
          this.ExpectIdentifier({});
          N = N + "." + this.FCurTokenString;
          this.NextToken();
        };
        this.UngetToken();
      };
      Module.set(null);
      PP = this.CreateElement$1($lt102,N,this.FEngine.FPackage,StartPos);
      Module.set(PP);
      HasFinished = true;
      this.FCurModule = Module.get();
      try {
        this.FScanner.FCurModulename = N;
        if (this.FEngine.FPackage != null) {
          Module.get().PackageName = this.FEngine.FPackage.FName;
          this.FEngine.FPackage.Modules.Add(Module.get());
        };
        if (!SkipHeader) {
          this.NextToken();
          if (this.FCurToken === 8) {
            PP.InputFile = this.ExpectIdentifier({});
            this.NextToken();
            if (!(this.FCurToken in rtl.createSet(9,12))) this.ParseExc(2011,rtl.getResStr($mod,"SParserExpectedCommaRBracket"));
            if (this.FCurToken === 12) PP.OutPutFile = this.ExpectIdentifier({});
            this.ExpectToken(9);
            this.NextToken();
          };
          if (this.FCurToken !== 17) this.ParseExcTokenError(";");
        };
        Section = this.CreateElement($lt105,"",this.FCurModule);
        PP.ProgramSection = Section;
        this.ParseOptionalUsesList(Section);
        HasFinished = Section.PendingUsedIntf === null;
        if (!HasFinished) {
          return;
        };
        this.ParseDeclarations(Section);
        this.FinishedModule();
      } finally {
        if (HasFinished) this.FCurModule = null;
      };
    };
    this.ParseLibrary = function (Module) {
      var PP = null;
      var Section = null;
      var N = "";
      var StartPos = $lt15.$new();
      var HasFinished = false;
      this.FScanner.DisablePackageTokens();
      StartPos.$assign(this.CurTokenPos());
      N = this.ExpectIdentifier({});
      this.NextToken();
      while (this.FCurToken === 14) {
        this.ExpectIdentifier({});
        N = N + "." + this.FCurTokenString;
        this.NextToken();
      };
      this.UngetToken();
      Module.set(null);
      PP = this.CreateElement$1($lt103,N,this.FEngine.FPackage,StartPos);
      Module.set(PP);
      HasFinished = true;
      this.FCurModule = Module.get();
      try {
        this.FScanner.FCurModulename = N;
        if (this.FEngine.FPackage != null) {
          Module.get().PackageName = this.FEngine.FPackage.FName;
          this.FEngine.FPackage.Modules.Add(Module.get());
        };
        this.NextToken();
        if (this.FCurToken !== 17) this.ParseExcTokenError(";");
        Section = this.CreateElement($lt106,"",this.FCurModule);
        PP.LibrarySection = Section;
        this.ParseOptionalUsesList(Section);
        HasFinished = Section.PendingUsedIntf === null;
        if (!HasFinished) return;
        this.ParseDeclarations(Section);
        this.FinishedModule();
      } finally {
        if (HasFinished) this.FCurModule = null;
      };
    };
    this.ParsePackage = function (Module) {
      var PP = null;
      var StartPos = $lt15.$new();
      var N = "";
      StartPos.$assign(this.CurTokenPos());
      N = this.ExpectIdentifier({});
      this.NextToken();
      while (this.FCurToken === 14) {
        this.ExpectIdentifier(rtl.createSet(91));
        N = N + "." + this.FCurTokenString;
        this.NextToken();
      };
      this.UngetToken();
      this.ExpectToken(17);
      this.NextToken();
      Module.set(null);
      PP = this.CreateElement$1($lt74,N,this.FEngine.FPackage,StartPos);
      Module.set(PP);
      this.FCurModule = Module.get();
      try {
        while (!(this.FCurToken === 14)) {
          var $tmp = this.FCurToken;
          if ($tmp === 51) {
            this.ParseContains(PP.PackageSection)}
           else if ($tmp === 98) {
            this.ParseRequires(PP.PackageSection)}
           else if ($tmp === 58) {
            this.ExpectToken(14);
            this.UngetToken();
          } else {
            this.ParseExcSyntaxError();
          };
          this.NextToken();
        };
        this.FinishedModule();
      } finally {
        this.FCurModule = null;
      };
    };
    this.ParseOptionalUsesList = function (ASection) {
      this.NextToken();
      this.CheckImplicitUsedUnits(ASection);
      if (this.FCurToken === 113) {
        this.ParseUsesList(ASection)}
       else this.UngetToken();
      this.FEngine.CheckPendingUsedInterface(ASection);
      if (ASection.PendingUsedIntf !== null) return;
      this.FEngine.FinishScope(1,ASection);
    };
    this.ParseContains = function (ASection) {
      this.ParseUsesList(ASection);
    };
    this.ParseRequires = function (ASection) {
      var Pck = null;
      var PckPos = $lt15.$new();
      var N = "";
      do {
        N = "";
        PckPos.$assign(this.CurSourcePos());
        do {
          this.ExpectIdentifier(rtl.createSet(91));
          if (N !== "") N = N + ".";
          N = N + this.FCurTokenString;
          this.NextToken();
        } while (!(this.FCurToken in rtl.createSet(17,12)));
        Pck = this.FEngine.CreateElement$2($lt107,N,ASection,3,PckPos,null);
        ASection.Requires.Add(Pck);
      } while (!(this.FCurToken === 17));
    };
    this.ParseUsesList = function (ASection) {
      var AUnitName = "";
      var aName = "";
      var NameExpr = null;
      var InFileExpr = null;
      var NamePos = $lt15.$new();
      var SrcPos = $lt15.$new();
      var aModule = null;
      this.FScanner.FSkipGlobalSwitches = true;
      NameExpr = null;
      InFileExpr = null;
      do {
        AUnitName = this.ExpectIdentifier({});
        NamePos.$assign(this.CurSourcePos());
        NameExpr = this.CreatePrimitiveExpr(ASection,2,AUnitName);
        this.NextToken();
        while (this.FCurToken === 14) {
          SrcPos.$assign(this.CurTokenPos());
          this.ExpectIdentifier({});
          aName = this.FCurTokenString;
          AUnitName = AUnitName + "." + aName;
          this.AddToBinaryExprChain({get: function () {
              return NameExpr;
            }, set: function (v) {
              NameExpr = v;
            }},this.CreatePrimitiveExpr(ASection,2,aName),27,SrcPos);
          this.NextToken();
        };
        if (this.FCurToken === 71) {
          if (3 in this.GetCurrentModeSwitches()) {
            aModule = ASection.GetModule();
            if ((aModule !== null) && ((aModule.$class.ClassType() === $lt78) || $lt104.isPrototypeOf(aModule))) this.CheckToken(17);
          };
          this.ExpectToken(4);
          InFileExpr = this.CreatePrimitiveExpr(ASection,2,this.FCurTokenString);
          this.NextToken();
        };
        this.AddUseUnit(ASection,NamePos,AUnitName,NameExpr,InFileExpr);
        InFileExpr = null;
        NameExpr = null;
        if (!(this.FCurToken in rtl.createSet(12,17))) this.ParseExc(2012,rtl.getResStr($mod,"SParserExpectedCommaSemicolon"));
      } while (!(this.FCurToken === 17));
    };
    this.ParseInterface = function () {
      var Section = null;
      if (this.LogEvent(0)) this.DoLog(5,2031,rtl.getResStr($mod,"SLogStartInterface"),false);
      Section = this.CreateElement($lt44,"",this.FCurModule);
      this.FCurModule.InterfaceSection = Section;
      this.ParseOptionalUsesList(Section);
      if (Section.PendingUsedIntf !== null) return;
      this.ParseDeclarations(Section);
    };
    this.ParseImplementation = function () {
      var Section = null;
      Section = this.CreateElement($lt75,"",this.FCurModule);
      this.FCurModule.ImplementationSection = Section;
      this.ParseOptionalUsesList(Section);
      if (Section.PendingUsedIntf !== null) return;
      this.ParseDeclarations(Section);
    };
    this.ParseInitialization = function () {
      var Section = null;
      var SubBlock = null;
      Section = this.CreateElement$1($lt108,"",this.FCurModule,this.CurTokenPos());
      this.FCurModule.InitializationSection = Section;
      do {
        this.NextToken();
        if (this.FCurToken === 58) {
          this.ExpectToken(14);
          this.FEngine.FinishScope(14,Section);
          return;
        } else if (this.FCurToken === 63) {
          this.FEngine.FinishScope(14,Section);
          this.ParseFinalization();
          return;
        } else if (this.FCurToken !== 17) {
          this.UngetToken();
          this.ParseStatement(Section,{get: function () {
              return SubBlock;
            }, set: function (v) {
              SubBlock = v;
            }});
          if (SubBlock === null) this.ExpectToken(58);
        };
      } while (!false);
    };
    this.ParseFinalization = function () {
      var Section = null;
      var SubBlock = null;
      Section = this.CreateElement($lt109,"",this.FCurModule);
      this.FCurModule.FinalizationSection = Section;
      do {
        this.NextToken();
        if (this.FCurToken === 58) {
          this.ExpectToken(14);
          this.FEngine.FinishScope(14,Section);
          return;
        } else if (this.FCurToken !== 17) {
          this.UngetToken();
          this.ParseStatement(Section,{get: function () {
              return SubBlock;
            }, set: function (v) {
              SubBlock = v;
            }});
          if (SubBlock === null) this.ExpectToken(58);
        };
      } while (!false);
    };
    this.ParseDeclarations = function (Declarations) {
      var $Self = this;
      var HadTypeSection = false;
      var CurBlock = 0;
      function SetBlock(NewBlock) {
        if (CurBlock === NewBlock) return;
        if (CurBlock === 3) {
          if (3 in $Self.GetCurrentModeSwitches()) $Self.FEngine.FinishScope(2,Declarations);
        };
        if (NewBlock === 3) {
          HadTypeSection = true}
         else if ((NewBlock === 0) && HadTypeSection) {
          HadTypeSection = false;
          if (!(3 in $Self.GetCurrentModeSwitches())) $Self.FEngine.FinishScope(2,Declarations);
        };
        CurBlock = NewBlock;
        $Self.FScanner.SetForceCaret(NewBlock === 3);
      };
      var ConstEl = null;
      var ResStrEl = null;
      var TypeEl = null;
      var ClassEl = null;
      var List = null;
      var i = 0;
      var j = 0;
      var ExpEl = null;
      var PropEl = null;
      var PT = 0;
      var MustBeGeneric = false;
      var Proc = null;
      var CurEl = null;
      CurBlock = 0;
      HadTypeSection = false;
      while (true) {
        if (CurBlock in rtl.createSet(0,1,3,4)) {
          this.FScanner.SetTokenOption(1)}
         else this.FScanner.UnSetTokenOption(1);
        this.NextToken();
        this.FScanner.FSkipGlobalSwitches = true;
        var $tmp = this.FCurToken;
        if ($tmp === 58) {
          if ($lt102.isPrototypeOf(this.FCurModule) && (this.FCurModule.InitializationSection === null)) this.ParseExcTokenError("begin");
          this.ExpectToken(14);
          break;
        } else if ($tmp === 70) {
          if ($lt44.isPrototypeOf(Declarations)) {
            if (!this.FEngine.FInterfaceOnly) {
              if (this.LogEvent(1)) this.DoLog(5,2030,rtl.getResStr($mod,"SLogStartImplementation"),false);
              SetBlock(0);
              this.ParseImplementation();
            };
            break;
          } else this.ParseExcSyntaxError()}
         else if ($tmp === 73) {
          if ($lt44.isPrototypeOf(Declarations) || ($lt75.isPrototypeOf(Declarations) && !$lt105.isPrototypeOf(Declarations))) {
            SetBlock(0);
            this.ParseInitialization();
            break;
          } else this.ParseExcSyntaxError()}
         else if ($tmp === 63) {
          if ($lt44.isPrototypeOf(Declarations) || ($lt75.isPrototypeOf(Declarations) && !$lt105.isPrototypeOf(Declarations))) {
            SetBlock(0);
            this.ParseFinalization();
            break;
          }}
         else if ($tmp === 113) {
          if (Declarations.$class.ClassType() === $lt44) {
            this.ParseExcTokenError($lm4.TokenInfos[70])}
           else if ($lt110.isPrototypeOf(Declarations)) {
            this.ParseExcTokenError($lm4.TokenInfos[58])}
           else this.ParseExcSyntaxError()}
         else if ($tmp === 48) {
          SetBlock(1)}
         else if ($tmp === 60) {
          if ($lt110.isPrototypeOf(Declarations)) {
            SetBlock(7)}
           else this.ParseExcTokenError($lm4.TokenInfos[44])}
         else if ($tmp === 99) {
          if ($lt110.isPrototypeOf(Declarations)) {
            SetBlock(2)}
           else {
            this.ParseExc(2054,rtl.getResStr($mod,"SParserResourcestringsMustBeGlobal"));
          }}
         else if ($tmp === 110) {
          SetBlock(3)}
         else if ($tmp === 114) {
          SetBlock(4)}
         else if ($tmp === 106) {
          SetBlock(5)}
         else if ($tmp === 94) {
          SetBlock(6)}
         else if (($tmp === 92) || ($tmp === 66) || ($tmp === 50) || ($tmp === 52) || ($tmp === 87)) {
          MustBeGeneric = !(3 in this.GetCurrentModeSwitches()) && (this.GetPrevToken() === 67);
          SetBlock(0);
          this.SaveComments();
          PT = this.GetProcTypeFromToken(this.FCurToken,false);
          this.AddProcOrFunction(Declarations,this.ParseProcedureOrFunctionDecl(Declarations,PT,MustBeGeneric,0));
        } else if ($tmp === 47) {
          MustBeGeneric = !(3 in this.GetCurrentModeSwitches()) && (this.GetPrevToken() === 67);
          SetBlock(0);
          this.SaveComments();
          this.NextToken();
          this.CheckTokens(rtl.createSet(92,66,50,52,87));
          PT = this.GetProcTypeFromToken(this.FCurToken,true);
          this.AddProcOrFunction(Declarations,this.ParseProcedureOrFunctionDecl(Declarations,PT,MustBeGeneric,0));
        } else if (($tmp === 39) || ($tmp === 3)) {
          this.FScanner.UnSetTokenOption(1);
          this.SaveComments();
          this.SaveIdentifierPosition();
          var $tmp1 = CurBlock;
          if ($tmp1 === 1) {
            ConstEl = this.ParseConstDecl(Declarations);
            if (ConstEl != null) {
              Declarations.Declarations.Add(ConstEl);
              Declarations.Consts.Add(ConstEl);
              this.FEngine.FinishScope(12,ConstEl);
            };
          } else if ($tmp1 === 2) {
            ResStrEl = this.ParseResourcestringDecl(Declarations);
            Declarations.Declarations.Add(ResStrEl);
            Declarations.ResStrings.Add(ResStrEl);
            this.FEngine.FinishScope(4,ResStrEl);
          } else if ($tmp1 === 3) {
            TypeEl = this.ParseTypeDecl$1(Declarations,$lt15.$clone(this.FIdentifierPos));
            if (TypeEl != null) {
              Declarations.Declarations.Add(TypeEl);
              if ((TypeEl.$class.ClassType() === $lt46) && !(6 in this.FOptions)) {
                for (var $l = 0, $end = Declarations.Classes.FCount - 1; $l <= $end; $l++) {
                  i = $l;
                  ClassEl = rtl.getObject(Declarations.Classes.Get(i));
                  if ($lp3(ClassEl.FName,TypeEl.FName) === 0) {
                    Declarations.Classes.Delete(i);
                    for (var $l1 = 0, $end1 = Declarations.Declarations.FCount - 1; $l1 <= $end1; $l1++) {
                      j = $l1;
                      if ($lp3(TypeEl.FName,rtl.getObject(Declarations.Declarations.Get(j)).FName) === 0) {
                        Declarations.Declarations.Delete(j);
                        break;
                      };
                    };
                    break;
                  };
                };
                Declarations.Classes.Add(TypeEl);
              } else Declarations.Types.Add(TypeEl);
            };
          } else if ($tmp1 === 7) {
            List = $lt11.$create("Create");
            try {
              this.ParseExportDecl(Declarations,List);
              for (var $l2 = 0, $end2 = List.FCount - 1; $l2 <= $end2; $l2++) {
                i = $l2;
                ExpEl = rtl.getObject(List.Get(i));
                Declarations.Declarations.Add(ExpEl);
                Declarations.ExportSymbols.Add(ExpEl);
              };
            } finally {
              List = rtl.freeLoc(List);
            };
          } else if (($tmp1 === 4) || ($tmp1 === 5)) {
            List = $lt11.$create("Create");
            try {
              this.ParseVarDecl(Declarations,List);
              for (var $l3 = 0, $end3 = List.FCount - 1; $l3 <= $end3; $l3++) {
                i = $l3;
                CurEl = rtl.getObject(List.Get(i));
                Declarations.Declarations.Add(CurEl);
                if (CurEl.$class.ClassType() === $lt101) {
                  Declarations.Attributes.Add(CurEl)}
                 else Declarations.Variables.Add(CurEl);
                this.FEngine.FinishScope(12,CurEl);
              };
              if (this.FCurToken !== 17) try {
                this.CheckToken(17);
              } catch ($e) {
                if ($lt14.isPrototypeOf($e)) {
                  var E = $e;
                  if (!this.TryErrorRecovery(this.CreateRecovery(E,rtl.createSet(17),false))) throw $e;
                } else throw $e
              };
            } finally {
              List = rtl.freeLoc(List);
            };
          } else if ($tmp1 === 6) {
            PropEl = this.ParseProperty(Declarations,this.FCurTokenString,0,false);
            Declarations.Declarations.Add(PropEl);
            Declarations.Properties.Add(PropEl);
            this.FEngine.FinishScope(12,PropEl);
          } else {
            this.ParseExcSyntaxError();
          };
        } else if ($tmp === 67) {
          this.NextToken();
          if (this.FCurToken in rtl.createSet(47,92,66)) {
            if (3 in this.GetCurrentModeSwitches()) this.ParseExcSyntaxError();
            SetBlock(0);
            this.UngetToken();
          };
          if (CurBlock === 3) {
            this.CheckToken(3);
            this.ParseGenericTypeDecl(Declarations,true);
          } else if (CurBlock === 0) {
            if (3 in this.GetCurrentModeSwitches()) this.ParseExcSyntaxError();
            SetBlock(0);
            this.SaveComments();
            this.NextToken();
            var $tmp2 = this.FCurToken;
            if ($tmp2 === 47) {
              this.NextToken();
              if (!(this.FCurToken in rtl.createSet(92,66))) this.ParseExcSyntaxError();
              PT = this.GetProcTypeFromToken(this.FCurToken,true);
              this.AddProcOrFunction(Declarations,this.ParseProcedureOrFunctionDecl(Declarations,PT,true,0));
            } else if (($tmp2 === 92) || ($tmp2 === 66)) {
              SetBlock(0);
              this.SaveComments();
              PT = this.GetProcTypeFromToken(this.FCurToken,false);
              this.AddProcOrFunction(Declarations,this.ParseProcedureOrFunctionDecl(Declarations,PT,true,0));
            } else {
              this.ParseExcSyntaxError();
            };
          } else {
            this.ParseExcSyntaxError();
          };
        } else if ($tmp === 44) {
          if ($lt84.isPrototypeOf(Declarations)) {
            Proc = rtl.as(Declarations.FParent,$lt43);
            if (9 in Proc.FModifiers) this.ParseExc$1(2006,rtl.getResStr($mod,"SParserExpectTokenError"),$lp4(18,"asm"));
            SetBlock(0);
            this.ParseProcBeginBlock(Declarations);
            break;
          } else if ($lt44.isPrototypeOf(Declarations) || $lt75.isPrototypeOf(Declarations)) {
            SetBlock(0);
            this.ParseInitialization();
            break;
          } else this.ParseExcSyntaxError();
        } else if ($tmp === 43) {
          if ($lt84.isPrototypeOf(Declarations)) {
            Proc = rtl.as(Declarations.FParent,$lt43);
            if (!((9 in Proc.FModifiers) || (3 in this.GetCurrentModeSwitches()))) this.ParseExc$1(2006,rtl.getResStr($mod,"SParserExpectTokenError"),$lp4(18,"begin"));
            SetBlock(0);
            this.ParseProcAsmBlock(Declarations);
            break;
          } else this.ParseExcSyntaxError();
        } else if ($tmp === 77) {
          SetBlock(0);
          if (!$lt44.isPrototypeOf(Declarations)) this.ParseLabels(Declarations);
        } else if ($tmp === 22) {
          if (47 in this.GetCurrentModeSwitches()) {
            this.ParseAttributes(Declarations,true)}
           else this.ParseExcSyntaxError()}
         else {
          this.ParseExcSyntaxError();
        };
      };
      SetBlock(0);
    };
    this.ParseStatement = function (Parent, NewImplElement) {
      var $Self = this;
      var Params = $lt8.$new();
      var PrevToken = 0;
      function CheckStatementCanStart() {
        if (Params.CurBlock.Elements.FCount === 0) return;
        if (PrevToken in rtl.createSet(17,16,57,89)) return;
        $Self.ParseExcTokenError("Semicolon");
      };
      function Recover(E) {
        var Result = false;
        var RestartTokens = {};
        RestartTokens = rtl.createSet(17,58,63,43,44,97,115,69,68,65,116,46,109,95,21,37,3,104,6,4,61,108,7,8,22,13,11,72);
        Result = $Self.FCurToken !== 0;
        if (Result) Result = $Self.TryErrorRecovery($Self.CreateRecovery(E,rtl.refSet(RestartTokens),false));
        return Result;
      };
      var El = null;
      NewImplElement.set(null);
      Params.Parser = $Self;
      Params.NewImplElement = null;
      Params.CurBlock = Parent;
      Params.Parent = Parent;
      while (true) {
        PrevToken = this.FCurToken;
        try {
          this.NextToken();
          var $tmp = this.FCurToken;
          if ($tmp === 43) {
            CheckStatementCanStart();
            if (Params.ParseAsm()) break;
          } else if ($tmp === 44) {
            CheckStatementCanStart();
            El = Params.CreateElement($lt111);
            Params.CreateBlock(El);
          } else if ($tmp === 97) {
            CheckStatementCanStart();
            El = Params.CreateElement($lt34);
            Params.CreateBlock(El);
          } else if ($tmp === 69) {
            CheckStatementCanStart();
            Params.ParseIf();
          } else if (($tmp === 57) || ($tmp === 89)) {
            if (Params.ParseElse()) return}
           else if ($tmp === 115) {
            CheckStatementCanStart();
            Params.ParseWhile();
          } else if ($tmp === 68) {
            CheckStatementCanStart();
            Params.ParseGoto();
          } else if ($tmp === 65) {
            CheckStatementCanStart();
            Params.ParseFor();
          } else if ($tmp === 116) {
            CheckStatementCanStart();
            Params.ParseWith();
          } else if ($tmp === 46) {
            CheckStatementCanStart();
            Params.ParseCase();
          } else if ($tmp === 109) {
            CheckStatementCanStart();
            El = Params.CreateElement($lt31);
            Params.CreateBlock(El);
          } else if ($tmp === 64) {
            if (Params.ParseFinally()) break}
           else if ($tmp === 59) {
            if (Params.ParseExcept()) break}
           else if ($tmp === 95) {
            CheckStatementCanStart();
            Params.ParseRaise();
          } else if ($tmp === 58) {
            if (Params.CloseStatement(true)) {
              this.UngetToken();
              break;
            };
            if ($lt111.isPrototypeOf(Params.CurBlock)) {
              if (Params.CloseBlock()) break;
              if (Params.CloseStatement(false)) break;
            } else if ($lt22.isPrototypeOf(Params.CurBlock)) {
              if (Params.CloseBlock()) break;
              if (Params.CloseBlock()) break;
              if (Params.CloseStatement(false)) break;
            } else if ($lt112.isPrototypeOf(Params.CurBlock)) {
              if (Params.CloseBlock()) break;
              if (Params.CloseBlock()) break;
              if (Params.CloseStatement(false)) break;
            } else this.ParseExcSyntaxError();
          } else if ($tmp === 17) {
            if (Params.CloseStatement(true)) break}
           else if ($tmp === 63) {
            if (Params.CloseStatement(true)) {
              this.UngetToken();
              break;
            }}
           else if ($tmp === 112) {
            if (Params.ParseUntil()) break}
           else if ($tmp === 0) {
            this.CheckToken(58)}
           else if ($tmp === 114) {
            if (!(56 in this.GetCurrentModeSwitches())) this.ParseExcSyntaxError();
            CheckStatementCanStart();
            this.NextToken();
            Params.ParseVarStatement();
            Params.CloseStatement(true);
          } else if (($tmp === 21) || ($tmp === 37) || ($tmp === 3) || ($tmp === 104) || ($tmp === 6) || ($tmp === 4) || ($tmp === 61) || ($tmp === 108) || ($tmp === 7) || ($tmp === 8) || ($tmp === 22) || ($tmp === 13) || ($tmp === 11) || ($tmp === 72)) {
            CheckStatementCanStart();
            if ($lp3(this.CurTokenText(),"on") === 0) {
              if (Params.ParseOn()) break;
            } else Params.ParseExpr();
          } else {
            this.ParseExcSyntaxError();
          };
        } catch ($e) {
          if ($lt14.isPrototypeOf($e)) {
            var E = $e;
            if (!Recover(E)) throw $e;
          } else throw $e
        };
      };
      NewImplElement.set(Params.NewImplElement);
    };
    this.ParseLabels = function (AParent) {
      var Labels = null;
      Labels = this.CreateElement($lt113,"",AParent);
      do {
        this.ExpectTokens(rtl.createSet(3,6));
        Labels.Labels.Add(this.FCurTokenString);
        this.NextToken();
        if (!(this.FCurToken in rtl.createSet(17,12))) this.ParseExcTokenError($lm4.TokenInfos[17]);
      } while (!(this.FCurToken === 17));
      if (!$lt83.isPrototypeOf(AParent)) {
        $lp({get: function () {
            return Labels;
          }, set: function (v) {
            Labels = v;
          }})}
       else {
        AParent.Declarations.Add(Labels);
        AParent.Labels.Add(Labels);
      };
    };
    this.ParseRTTIDirective = function (Param, Vis) {
      var $Self = this;
      var Result = false;
      var p = 0;
      var l = 0;
      function SkipWhiteSpace() {
        while ((p <= l) && (Param.charCodeAt(p - 1) in rtl.createSet(32,9,10,13))) p += 1;
      };
      function ReadIdentifier() {
        var Result = "";
        var StartP = 0;
        StartP = p;
        while ((p <= l) && (Param.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,null,48,57,95))) p += 1;
        Result = $lp13(Param,StartP,p - StartP);
        return Result;
      };
      var ElType = 0;
      var Value = "";
      var Visibility = {};
      Result = false;
      Vis.$assign($lt41.$new());
      p = 1;
      l = Param.length;
      SkipWhiteSpace();
      Value = ReadIdentifier();
      var $tmp = $lp1(Value);
      if ($tmp === "explicit") {
        Vis.Explicit = true}
       else if ($tmp === "inherit") {
        Vis.Explicit = false}
       else {
        return Result;
      };
      while (p <= l) {
        SkipWhiteSpace();
        if (p > l) break;
        Value = ReadIdentifier();
        var $tmp1 = $lp1(Value);
        if ($tmp1 === "fields") {
          ElType = 0}
         else if ($tmp1 === "methods") {
          ElType = 1}
         else if ($tmp1 === "properties") {
          ElType = 2}
         else {
          return Result;
        };
        SkipWhiteSpace();
        if ((p > l) || (Param.charAt(p - 1) !== "(")) return Result;
        p += 1;
        SkipWhiteSpace();
        if ((p > l) || (Param.charAt(p - 1) !== "[")) return Result;
        p += 1;
        Visibility = {};
        do {
          SkipWhiteSpace();
          if ((p <= l) && (Param.charAt(p - 1) === "]")) break;
          Value = ReadIdentifier();
          var $tmp2 = $lp1(Value);
          if ($tmp2 === "vcprivate") {
            Visibility = rtl.includeSet(Visibility,0)}
           else if ($tmp2 === "vcprotected") {
            Visibility = rtl.includeSet(Visibility,1)}
           else if ($tmp2 === "vcpublic") {
            Visibility = rtl.includeSet(Visibility,2)}
           else if ($tmp2 === "vcpublished") {
            Visibility = rtl.includeSet(Visibility,3)}
           else {
            return Result;
          };
          SkipWhiteSpace();
          if (p > l) return Result;
          var $tmp3 = Param.charAt(p - 1);
          if ($tmp3 === ",") {}
          else if ($tmp3 === "]") {
            break}
           else {
            return Result;
          };
          p += 1;
        } while (!false);
        p += 1;
        SkipWhiteSpace();
        if ((p > l) || (Param.charAt(p - 1) !== ")")) return Result;
        p += 1;
        var $tmp4 = ElType;
        if ($tmp4 === 0) {
          Vis.Fields = rtl.refSet(Visibility)}
         else if ($tmp4 === 1) {
          Vis.Methods = rtl.refSet(Visibility)}
         else if ($tmp4 === 2) Vis.Properties = rtl.refSet(Visibility);
      };
      Result = true;
      return Result;
    };
    this.ParseProcedureOrFunctionDecl = function (Parent, ProcType, MustBeGeneric, AVisibility) {
      var $Self = this;
      var Result = null;
      var NameParts = null;
      var NamePos = $lt15.$new();
      function ExpectProcName() {
        var Result = "";
        var L = null;
        var I = 0;
        var Cnt = 0;
        var p = 0;
        var CurName = "";
        var Part = null;
        if ($lt46.isPrototypeOf(Parent) && Parent.IsExternal) {
          Result = $Self.ExpectIdentifier(rtl.createSet(39))}
         else Result = $Self.ExpectIdentifier({});
        NamePos.$assign($Self.CurSourcePos());
        Cnt = 1;
        do {
          $Self.NextToken();
          if ($Self.FCurToken === 14) {
            if ($lt75.isPrototypeOf(Parent)) {
              Cnt += 1;
              CurName = $Self.ExpectIdentifier({});
              NamePos.$assign($Self.CurSourcePos());
              Result = Result + "." + CurName;
              if (NameParts !== null) {
                Part = $lt114.$create("Create");
                NameParts.Add(Part);
                Part.Name = CurName;
              };
            } else $Self.ParseExcSyntaxError();
          } else if ($Self.FCurToken === 18) {
            if (!MustBeGeneric && !(3 in $Self.GetCurrentModeSwitches())) $Self.ParseExc(2029,rtl.getResStr($mod,"SParserGenericFunctionNeedsGenericKeyword"));
            if (NameParts === null) {
              NameParts = $lt11.$create("Create");
              I = 0;
              CurName = Result;
              do {
                Part = $lt114.$create("Create");
                NameParts.Add(Part);
                p = $lp6(".",CurName);
                if (p > 0) {
                  Part.Name = $lp14(CurName,p - 1);
                  $lp15({get: function () {
                      return CurName;
                    }, set: function (v) {
                      CurName = v;
                    }},1,p);
                } else {
                  Part.Name = CurName;
                  break;
                };
                I += 1;
              } while (!false);
            } else if (rtl.getObject(NameParts.Get(Cnt - 1)).Templates !== null) $Self.ParseExcSyntaxError();
            $Self.UngetToken();
            L = $lt11.$create("Create");
            rtl.getObject(NameParts.Get(Cnt - 1)).Templates = L;
            $Self.ReadGenericArguments(L,Parent);
          } else break;
        } while (!false);
        if ((NameParts === null) && MustBeGeneric) $Self.CheckToken(18);
        $Self.UngetToken();
        return Result;
      };
      var OperatorTypeName = "";
      var Name = "";
      var PC = null;
      var Ot = 0;
      var IsTokenBased = false;
      var j = 0;
      var i = 0;
      OperatorTypeName = "";
      NameParts = null;
      Result = null;
      try {
        var $tmp = ProcType;
        if (($tmp === 2) || ($tmp === 3)) {
          if (MustBeGeneric) this.ParseExcTokenError("procedure");
          this.NextToken();
          IsTokenBased = this.FCurToken !== 3;
          if (IsTokenBased) {
            Ot = $lt56.TokenToOperatorType(this.CurTokenText())}
           else {
            Ot = $lt56.NameToOperatorType(this.FCurTokenString);
            OperatorTypeName = this.FCurTokenString;
            if (Ot === 0) {
              this.NextToken();
              if (this.FCurToken !== 14) this.ParseExc$1(2015,rtl.getResStr($mod,"SErrUnknownOperatorType"),$lp4(18,OperatorTypeName));
              this.NextToken();
              IsTokenBased = this.FCurToken !== 3;
              if (IsTokenBased) {
                Ot = $lt56.TokenToOperatorType(this.CurTokenText())}
               else Ot = $lt56.NameToOperatorType(this.FCurTokenString);
            };
          };
          if (Ot === 0) this.ParseExc$1(2015,rtl.getResStr($mod,"SErrUnknownOperatorType"),$lp4(18,this.FCurTokenString));
          Name = $lm3.OperatorNames[Ot];
          if (OperatorTypeName !== "") Name = OperatorTypeName + "." + Name;
          NamePos.$assign(this.CurTokenPos());
        } else if (($tmp === 10) || ($tmp === 11)) {
          Name = "";
          if (MustBeGeneric) this.ParseExcTokenError("generic");
          NamePos.$assign(this.CurTokenPos());
        } else {
          Name = ExpectProcName();
        };
        PC = this.GetProcedureClass(ProcType);
        if (Name !== "") Parent = this.CheckIfOverloaded(Parent,Name);
        Result = this.FEngine.CreateElement$2(PC,Name,Parent,AVisibility,NamePos,NameParts);
        if (NameParts !== null) {
          if (Result.NameParts === null) Result.SetNameParts(NameParts);
          for (var $l = 0, $end = Result.NameParts.FCount - 1; $l <= $end; $l++) {
            i = $l;
            var $with = rtl.getObject(Result.NameParts.Get(i));
            if ($with.Templates !== null) for (var $l1 = 0, $end1 = $with.Templates.FCount - 1; $l1 <= $end1; $l1++) {
              j = $l1;
              if (rtl.getObject($with.Templates.Get(j)).FParent !== Result) this.ParseExc(2003,rtl.getResStr($mod,"SParserError") + "[20190818131750] " + rtl.getObject($with.Templates.Get(j)).FParent.FName + ":" + rtl.getObject($with.Templates.Get(j)).FParent.$classname);
            };
          };
          if (NameParts.FCount > 0) this.ParseExc(2003,rtl.getResStr($mod,"SParserError") + '[20190818131909] "' + Name + '"');
        };
        var $tmp1 = ProcType;
        if (($tmp1 === 1) || ($tmp1 === 7) || ($tmp1 === 2) || ($tmp1 === 3) || ($tmp1 === 11)) {
          Result.ProcType = this.CreateFunctionType("","Result",Result,false,this.CurTokenPos(),null);
          if (ProcType in rtl.createSet(2,3)) {
            Result.FTokenBased = IsTokenBased;
            Result.FOperatorType = Ot;
            Result.CorrectName();
          };
        } else {
          Result.ProcType = this.CreateElement($lt45,"",Result);
        };
        this.ParseProcedureOrFunction(Result,Result.ProcType,ProcType,false);
        Result.FHints = rtl.refSet(Result.ProcType.FHints);
        Result.FHintMessage = Result.ProcType.FHintMessage;
        if (ProcType in rtl.createSet(2,3)) {
          if (Result.FOperatorType in rtl.createSet(20,19)) {
            if (Result.ProcType.Args.FCount > 1) {
              var $tmp2 = Result.FOperatorType;
              if ($tmp2 === 20) {
                Result.FOperatorType = 4}
               else if ($tmp2 === 19) Result.FOperatorType = 5;
              Result.FName = $lm3.OperatorNames[Result.FOperatorType];
              Result.CorrectName();
            };
          };
        };
      } finally {
        if (NameParts !== null) $lp16({get: function () {
            return NameParts;
          }, set: function (v) {
            NameParts = v;
          }});
      };
      return Result;
    };
    this.ParseArgList = function (Parent, Args, EndToken) {
      var $Self = this;
      var HasRef = false;
      var Attributes = null;
      function GetParamName() {
        var Result = "";
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,4,2),$Self.GetCurrentModeSwitches()),{})) {
          Result = $Self.ExpectIdentifier({})}
         else {
          $Self.NextToken();
          if ($Self.FCurToken in rtl.createSet(94,3,47)) {
            Result = $Self.FCurTokenString}
           else $Self.ParseExcTokenError("identifier");
        };
        return Result;
      };
      function ParseAttr(Peek) {
        var Expr = null;
        var i = 0;
        var AddAttributes = null;
        HasRef = false;
        AddAttributes = $Self.ParseAttributes(Parent,false);
        if (AddAttributes !== null) {
          for (var $l = 0, $end = rtl.length(AddAttributes.Calls) - 1; $l <= $end; $l++) {
            i = $l;
            Expr = AddAttributes.Calls[i];
            if ((Expr.Kind === 0) && (Expr.Value === "ref")) HasRef = true;
          };
          if (Attributes === null) {
            Attributes = AddAttributes}
           else {
            for (var $l1 = 0, $end1 = rtl.length(AddAttributes.Calls) - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              Expr = AddAttributes.Calls[i];
              Attributes.AddCall(Expr);
              Expr.SetParent(Attributes);
            };
            AddAttributes.Calls = [];
            AddAttributes = rtl.freeLoc(AddAttributes);
          };
        };
        if (!Peek) $Self.NextToken();
      };
      function CheckAttributes(peek) {
        var Result = false;
        if (peek) $Self.NextToken();
        Result = $Self.FCurToken === 22;
        if (Result) {
          if (!(47 in $Self.GetCurrentModeSwitches())) $Self.ParseExc(2019,rtl.getResStr($mod,"SParserExpectedConstVarID"));
          ParseAttr(peek);
        } else if (peek) $Self.UngetToken();
        return Result;
      };
      var OldForceCaret = false;
      var IsUntyped = false;
      var LastHadDefaultValue = false;
      var Name = "";
      var Value = null;
      var i = 0;
      var OldArgCount = 0;
      var Arg = null;
      var Access = 0;
      var ArgType = null;
      LastHadDefaultValue = false;
      try {
        while (true) {
          Access = 0;
          IsUntyped = false;
          ArgType = null;
          this.NextToken();
          HasRef = false;
          Attributes = null;
          CheckAttributes(false);
          if (this.FCurToken === 38) {
            this.ExpectToken(EndToken);
            break;
          } else if (this.FCurToken === 48) {
            Access = 1;
            CheckAttributes(true);
            if (HasRef) Access = 4;
            Name = GetParamName();
          } else if (this.FCurToken === 49) {
            Access = 4;
            CheckAttributes(true);
            Name = GetParamName();
          } else if (this.FCurToken === 114) {
            Access = 2;
            CheckAttributes(true);
            Name = GetParamName();
          } else if ((this.FCurToken === 3) && ($lp2(this.FCurTokenString) === "OUT")) {
            if (rtl.neSet(rtl.intersectSet(rtl.createSet(2,3,4,23),this.GetCurrentModeSwitches()),{})) {
              Access = 3;
              Name = this.ExpectIdentifier({});
            } else Name = this.FCurTokenString;
          } else if ((this.FCurToken === 94) || (this.FCurToken === 47)) {
            if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,4,2),this.GetCurrentModeSwitches()),{})) {
              this.ParseExcTokenError("identifier")}
             else Name = this.FCurTokenString;
          } else if (this.FCurToken === 3) {
            Name = this.FCurTokenString}
           else this.ParseExc(2019,rtl.getResStr($mod,"SParserExpectedConstVarID"));
          OldArgCount = Args.FCount;
          while (true) {
            Arg = this.CreateElement($lt73,Name,Parent);
            Arg.Access = Access;
            Args.Add(Arg);
            this.NextToken();
            if (this.FCurToken === 16) {
              break}
             else if (((this.FCurToken === 17) || (this.FCurToken === 9)) && (Access !== 0)) {
              this.UngetToken();
              IsUntyped = true;
              break;
            } else if (this.FCurToken !== 12) this.ParseExc(2014,rtl.getResStr($mod,"SParserExpectedCommaColon"));
            this.NextToken();
            if (this.FCurToken === 3) {
              Name = this.FCurTokenString}
             else this.ParseExc(2019,rtl.getResStr($mod,"SParserExpectedConstVarID"));
          };
          Value = null;
          if (!IsUntyped) {
            Arg = rtl.getObject(Args.Get(OldArgCount));
            ArgType = null;
            OldForceCaret = this.FScanner.SetForceCaret(true);
            try {
              ArgType = this.ParseType$1(Arg,this.CurSourcePos(),"",false);
              this.NextToken();
              if (this.FCurToken === 19) {
                if (Args.FCount > (OldArgCount + 1)) {
                  ArgType = null;
                  this.ParseExc(2016,rtl.getResStr($mod,"SParserOnlyOneArgumentCanHaveDefault"));
                };
                if ($lt96.isPrototypeOf(Parent)) this.ParseExc(2050,rtl.getResStr($mod,"SParserPropertyArgumentsCanNotHaveDefaultValues"));
                this.NextToken();
                Value = this.DoParseExpression(Arg,null,true);
                LastHadDefaultValue = true;
              } else if (LastHadDefaultValue) this.ParseExc$1(2047,rtl.getResStr($mod,"SParserDefaultParameterRequiredFor"),$lp4(18,rtl.getObject(Args.Get(OldArgCount)).FName));
              this.UngetToken();
            } finally {
              this.FScanner.SetForceCaret(OldForceCaret);
            };
          };
          for (var $l = OldArgCount, $end = Args.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Arg = rtl.getObject(Args.Get(i));
            if (Attributes !== null) {
              Arg.Attributes = Attributes;
              if (i === OldArgCount) {
                Attributes.SetParent(Arg);
                this.FEngine.FinishScope(12,Attributes);
              };
            };
            Arg.ArgType = ArgType;
            Arg.ValueExpr = Value;
            Value = null;
          };
          Attributes = null;
          for (var $l1 = OldArgCount, $end1 = Args.FCount - 1; $l1 <= $end1; $l1++) {
            i = $l1;
            this.FEngine.FinishScope(12,rtl.getObject(Args.Get(i)));
          };
          this.NextToken();
          if ((this.FCurToken === 3) && ($lp1(this.FCurTokenString) === "location")) {
            this.NextToken();
            this.NextToken();
          };
          if (this.FCurToken === EndToken) break;
          this.CheckToken(17);
        };
      } finally {
        Attributes = rtl.freeLoc(Attributes);
      };
    };
    this.ParseProcedureOrFunction = function (Parent, Element, ProcType, OfObjectPossible) {
      var $Self = this;
      function FindInSection(AName, ASection) {
        var Result = false;
        var I = 0;
        var Cn = "";
        var FN = "";
        var CT = null;
        I = ASection.Functions.FCount - 1;
        while ((I >= 0) && ($lp3(rtl.getObject(ASection.Functions.Get(I)).FName,AName) !== 0)) I -= 1;
        Result = I !== -1;
        I = $lp6(".",AName);
        if (!Result && (I > 0)) {
          Cn = $lp13(AName,1,I - 1);
          FN = AName;
          $lp15({get: function () {
              return FN;
            }, set: function (v) {
              FN = v;
            }},1,I);
          I = ASection.Classes.FCount - 1;
          while (!Result && (I >= 0)) {
            CT = rtl.getObject(ASection.Classes.Get(I));
            if ($lp3(CT.FName,Cn) === 0) Result = CT.FindMember($lt49,FN) !== null;
            I -= 1;
          };
        };
        return Result;
      };
      var ResultEl = null;
      var OK = false;
      var IsProcType = false;
      var IsAnonymous = false;
      var OldForceCaret = false;
      this.CheckProcedureArgs(Element,Element.Args,ProcType);
      IsProcType = !$lt43.isPrototypeOf(Parent);
      IsAnonymous = !IsProcType && (ProcType in rtl.createSet(10,11));
      var $tmp = ProcType;
      if (($tmp === 1) || ($tmp === 7) || ($tmp === 11)) {
        this.NextToken();
        if (this.FCurToken === 16) {
          ResultEl = Element.ResultEl;
          OldForceCaret = this.FScanner.SetForceCaret(true);
          try {
            ResultEl.ResultType = this.ParseType$1(ResultEl,this.CurSourcePos(),"",false);
          } finally {
            this.FScanner.SetForceCaret(OldForceCaret);
          };
        } else if (!IsAnonymous && (3 in this.GetCurrentModeSwitches()) && ((this.FCurModule.ImplementationSection != null) || $lt102.isPrototypeOf(this.FCurModule))) {
          OK = false;
          if (this.FCurModule.InterfaceSection != null) {
            OK = FindInSection(Parent.FName,this.FCurModule.InterfaceSection)}
           else if ($lt102.isPrototypeOf(this.FCurModule) && (this.FCurModule.ProgramSection != null)) OK = FindInSection(Parent.FName,this.FCurModule.ProgramSection);
          if (!OK) {
            this.CheckToken(16)}
           else {
            this.CheckToken(17);
            this.UngetToken();
          };
        } else {
          this.CheckToken(16);
        };
      } else if (($tmp === 2) || ($tmp === 3)) {
        this.NextToken();
        ResultEl = Element.ResultEl;
        if (this.FCurToken === 3) {
          ResultEl.FName = this.CurTokenName();
          this.ExpectToken(16);
          ResultEl.ResultType = this.ParseType$1(ResultEl,this.CurSourcePos(),"",false);
        } else if (!($lt56.isPrototypeOf(Parent) && (Parent.FOperatorType in rtl.createSet(33,34,35,36)))) {
          if (this.FCurToken === 16) {
            ResultEl.FName = "Result"}
           else this.ParseExc(2021,rtl.getResStr($mod,"SParserExpectedColonID"));
          ResultEl.ResultType = this.ParseType$1(ResultEl,this.CurSourcePos(),"",false);
        };
      } else {
        ResultEl = null;
      };
      if (OfObjectPossible) {
        this.NextToken();
        if (this.FCurToken === 86) {
          this.ExpectToken(85);
          Element.SetIsOfObject(true);
        } else if (this.FCurToken === 76) {
          this.ExpectToken(3);
          if ($lp1(this.FCurTokenString) !== "nested") this.ParseExc(2020,rtl.getResStr($mod,"SParserExpectedNested"));
          Element.SetIsNested(true);
        } else this.UngetToken();
      };
      this.ParseProcedureModifiers(Parent,Element,IsProcType,IsAnonymous);
      if ((ProcType in rtl.createSet(2,3)) && $lt56.isPrototypeOf(Parent)) Parent.CorrectName();
      this.FEngine.FinishScope(6,Element);
      if (!IsProcType && (IsAnonymous || Parent.CanParseImplementation())) this.ParseProcedureBody(Parent);
    };
    this.ParseProcedureBody = function (Parent) {
      var Body = null;
      Body = this.CreateElement($lt84,"",Parent);
      Parent.Body = Body;
      this.ParseDeclarations(Body);
    };
    this.ParseMethodResolution = function (Parent) {
      var Result = null;
      Result = this.CreateElement($lt115,"",Parent);
      if (this.FCurToken === 66) {
        Result.ProcClass = $lt49}
       else Result.ProcClass = $lt43;
      this.ExpectToken(3);
      Result.InterfaceName = this.CreatePrimitiveExpr(Result,0,this.FCurTokenString);
      this.ExpectToken(14);
      this.ExpectToken(3);
      Result.InterfaceProc = this.CreatePrimitiveExpr(Result,0,this.FCurTokenString);
      this.ExpectToken(19);
      this.ExpectToken(3);
      Result.ImplementationProc = this.CreatePrimitiveExpr(Result,0,this.FCurTokenString);
      this.NextToken();
      if (this.FCurToken === 17) {}
      else if (this.FCurToken === 58) {
        this.UngetToken()}
       else this.CheckToken(17);
      return Result;
    };
    this.ParseProcBeginBlock = function (Parent) {
      var BeginBlock = null;
      var SubBlock = null;
      var Proc = null;
      BeginBlock = this.CreateElement($lt111,"",Parent);
      Parent.Body = BeginBlock;
      this.FScanner.SetNonToken(82);
      this.FScanner.SetNonToken(84);
      this.FScanner.SetNonToken(83);
      try {
        do {
          this.NextToken();
          if (this.FCurToken === 58) {
            break}
           else if (this.FCurToken !== 17) {
            this.UngetToken();
            this.ParseStatement(BeginBlock,{get: function () {
                return SubBlock;
              }, set: function (v) {
                SubBlock = v;
              }});
            if (SubBlock === null) this.ExpectToken(58);
          };
        } while (!false);
      } finally {
        this.FScanner.UnsetNonToken(82);
        this.FScanner.UnsetNonToken(84);
        this.FScanner.UnsetNonToken(83);
      };
      Proc = rtl.as(Parent.FParent,$lt43);
      if (Proc.GetProcTypeEnum() in rtl.createSet(10,11)) {
        this.NextToken()}
       else this.ExpectToken(17);
    };
    this.ParseProcAsmBlock = function (Parent) {
      var AsmBlock = null;
      AsmBlock = this.CreateElement($lt20,"",Parent);
      Parent.Body = AsmBlock;
      this.ParseAsmBlock(AsmBlock);
      this.NextToken();
      if (!$lt58.isPrototypeOf(Parent.FParent)) this.CheckToken(17);
    };
  });
  var MemberHintTokens = ["deprecated","library","platform","experimental","unimplemented"];
  this.IsHintToken = function (T, AHint) {
    var Result = false;
    var I = 0;
    T = $lp1(T);
    Result = false;
    for (I = 0; I <= 4; I++) {
      Result = T === MemberHintTokens[I];
      if (Result) {
        AHint.set(I);
        return Result;
      };
    };
    return Result;
  };
  this.IsProcModifier = function (S, PM) {
    var Result = false;
    var P = 0;
    S = $lp1(S);
    Result = false;
    for (P = 0; P <= 23; P++) {
      Result = S === $lm3.ModifierNames[P];
      if (Result) {
        PM.set(P);
        return Result;
      };
    };
    return Result;
  };
  this.IsCallingConvention = function (S, CC) {
    var Result = false;
    var CCNames = ["","register","pascal","cdecl","stdcall","oldfpccall","safecall","syscall","mwpascal","hardfloat","sysv_abi_default","sysv_abi_cdecl","ms_abi_default","ms_abi_cdecl","vectorcall","winapi"];
    var C = 0;
    S = $lp1(S);
    Result = false;
    for (C = 0; C <= 15; C++) {
      Result = (CCNames[C] !== "") && (S === CCNames[C]);
      if (Result) {
        CC.set(C);
        return Result;
      };
    };
    return Result;
  };
  this.TokenToAssignKind = function (tk) {
    var Result = 0;
    var $tmp = tk;
    if ($tmp === 27) {
      Result = 0}
     else if ($tmp === 33) {
      Result = 1}
     else if ($tmp === 34) {
      Result = 2}
     else if ($tmp === 35) {
      Result = 3}
     else if ($tmp === 36) {
      Result = 4}
     else {
      throw $lt14.$create("CreateFmt",["Not an assignment token : %s",$lp4(18,$lm4.TokenInfos[tk])]);
    };
    return Result;
  };
  $mod.$resourcestrings = {SParserError: {org: "Error"}, SParserErrorAtToken: {org: '%s at token "%s" in file %s at line %d column %d'}, SParserUngetTokenError: {org: "Internal error: Cannot unget more tokens, history buffer is full"}, SParserExpectTokenError: {org: 'Expected "%s"'}, SParserForwardNotInterface: {org: "The use of a FORWARD procedure modifier is not allowed in the interface"}, SParserExpectVisibility: {org: "Expected visibility specifier"}, SParserStrangeVisibility: {org: 'Strange strict visibility encountered : "%s"'}, SParserExpectToken2Error: {org: 'Expected "%s" or "%s"'}, SParserExpectedCommaRBracket: {org: 'Expected "," or ")"'}, SParserExpectedCommaSemicolon: {org: 'Expected "," or ";"'}, SParserExpectedAssignIn: {org: "Expected := or in"}, SParserExpectedCommaColon: {org: 'Expected "," or ":"'}, SErrUnknownOperatorType: {org: "Unknown operator type: %s"}, SParserOnlyOneArgumentCanHaveDefault: {org: "A default value can only be assigned to 1 parameter"}, SParserExpectedLBracketColon: {org: 'Expected "(" or ":"'}, SParserExpectedSemiColonEnd: {org: 'Expected ";" or "End"'}, SParserExpectedConstVarID: {org: 'Expected "const", "var" or identifier'}, SParserExpectedNested: {org: "Expected nested keyword"}, SParserExpectedColonID: {org: 'Expected ":" or identifier'}, SParserSyntaxError: {org: "Syntax error"}, SParserTypeSyntaxError: {org: "Syntax error in type"}, SParserArrayTypeSyntaxError: {org: "Syntax error in array type"}, SParserParamsOrResultTypesNoLocalTypeDefs: {org: "Parameters or result types cannot contain local type definitions. Use a separate type definition in a type block."}, SParserExpectedIdentifier: {org: "Identifier expected"}, SParserNotAProcToken: {org: "Not a procedure or function token"}, SRangeExpressionExpected: {org: "Range expression expected"}, SParserExpectCase: {org: "Case label expression expected"}, SParserGenericFunctionNeedsGenericKeyword: {org: "Generic function needs keyword generic"}, SLogStartImplementation: {org: "Start parsing implementation section."}, SLogStartInterface: {org: "Start parsing interface section"}, SParserNoConstructorAllowed: {org: "Constructors or Destructors are not allowed in Interfaces or Records"}, SParserNoFieldsAllowedInX: {org: "Fields are not allowed in %s"}, SParserInvalidRecordVisibility: {org: "Records can only have public and (strict) private as visibility specifiers"}, SErrRecordConstantsNotAllowed: {org: "Record constants not allowed at this location"}, SErrRecordVariablesNotAllowed: {org: "Record variables not allowed at this location"}, SErrRecordMethodsNotAllowed: {org: "Record methods not allowed at this location"}, SErrRecordPropertiesNotAllowed: {org: "Record properties not allowed at this location"}, SErrRecordTypesNotAllowed: {org: "Record types not allowed at this location"}, SParserTypeNotAllowedHere: {org: 'Type "%s" not allowed here'}, SParserNotAnOperand: {org: "Not an operand: (%d : %s)"}, SParserArrayPropertiesCannotHaveDefaultValue: {org: "Array properties cannot have default value"}, SParserDefaultPropertyMustBeArray: {org: "The default property must be an array property"}, SParserUnknownProcedureType: {org: 'Unknown procedure type "%d"'}, SParserTypeParamsNotAllowedOnType: {org: "Type parameters not allowed on this type"}, SParserDuplicateIdentifier: {org: 'Duplicate identifier "%s"'}, SParserDefaultParameterRequiredFor: {org: 'Default parameter required for "%s"'}, SParserOnlyOneVariableCanBeInitialized: {org: "Only one variable can be initialized"}, SParserExpectedTypeButGot: {org: "Expected type, but got %s"}, SParserPropertyArgumentsCanNotHaveDefaultValues: {org: "Property arguments can not have default values"}, SParserExpectedExternalClassName: {org: "Expected external class name"}, SParserNoConstRangeAllowed: {org: "Const ranges are not allowed"}, SParserResourcestringsMustBeGlobal: {org: "Resourcestrings can be only static or global"}, SParserOnlyOneVariableCanBeAbsolute: {org: "Only one variable can be absolute"}, SParserXNotAllowedInY: {org: "%s is not allowed in %s"}, SErrInvalidMessageType: {org: "Invalid message type: string or integer expression expected"}, SErrCompilationAborted: {org: "Compilation aborted"}, SErrInvalidParamsForDirectiveX: {org: "Invalid parameters for compiler directive %s"}};
  $mod.$implcode = function () {
    $impl.WhitespaceTokensToIgnore = rtl.createSet(1,2,118,119);
    $lt9 = $impl.TDeclType = {"0": "declNone", declNone: 0, "1": "declConst", declConst: 1, "2": "declResourcestring", declResourcestring: 2, "3": "declType", declType: 3, "4": "declVar", declVar: 4, "5": "declThreadvar", declThreadvar: 5, "6": "declProperty", declProperty: 6, "7": "declExports", declExports: 7};
    var SimpleTypeCount = 15;
    var SimpleTypeNames = ["byte","boolean","char","integer","int64","longint","longword","double","shortint","smallint","string","word","qword","cardinal","widechar"];
    var SimpleTypeCaseNames = ["Byte","Boolean","char","Integer","Int64","LongInt","LongWord","Double","ShortInt","SmallInt","String","Word","QWord","Cardinal","WideChar"];
    $impl.IsSimpleTypeToken = function (AName) {
      var Result = false;
      var S = "";
      var I = 0;
      S = $lp1(AName.get());
      I = 15;
      while ((I > 0) && (S !== SimpleTypeNames[I - 1])) I -= 1;
      Result = I > 0;
      if (Result) AName.set(SimpleTypeCaseNames[I - 1]);
      return Result;
    };
    $impl.GetExprIdent = function (p) {
      var Result = "";
      Result = "";
      if (!(p != null)) return Result;
      if ((p.$class.ClassType() === $lt36) && (p.Kind === 0)) {
        Result = p.Value}
       else if (p.$class.ClassType() === $lt66) Result = "Self";
      return Result;
    };
    var VNames = ["","private","protected","public","published","automated","","","required","optional"];
    var VLast = [5,9];
    $impl.IsVisibility = function (S, AVisibility, IsObjCProtocol) {
      var Result = false;
      var V = 0;
      Result = false;
      S = $lp1(S);
      for (var $l = 0, $end = VLast[+IsObjCProtocol]; $l <= $end; $l++) {
        V = $l;
        Result = (VNames[V] !== "") && (S === VNames[V]);
        if (Result) {
          AVisibility.set(V);
          return Result;
        };
      };
      return Result;
    };
  };
  $mod.$init = function () {
  };
},[]);
rtl.module("PasResolver",["System","JS","Classes","SysUtils","Math","Types","contnrs","PasTree","PScanner","PParser","PasResolveEval"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lt19 = null;
  var $lt20 = null;
  var $lt21 = null;
  var $lt22 = null;
  var $lt23 = null;
  var $lt24 = null;
  var $lt25 = null;
  var $lt26 = null;
  var $lt27 = null;
  var $lt28 = null;
  var $lt29 = null;
  var $lt30 = null;
  var $lt31 = null;
  var $lt32 = null;
  var $lt33 = null;
  var $lt34 = null;
  var $lt35 = null;
  var $lt36 = null;
  var $lt37 = null;
  var $lt38 = null;
  var $lt39 = null;
  var $lt40 = null;
  var $lt41 = null;
  var $lt42 = null;
  var $lt43 = null;
  var $lt44 = null;
  var $lt45 = null;
  var $lt46 = null;
  var $lt47 = null;
  var $lt48 = null;
  var $lt49 = null;
  var $lt50 = null;
  var $lt51 = null;
  var $lt52 = null;
  var $lt53 = null;
  var $lt54 = null;
  var $lt55 = null;
  var $lt56 = null;
  var $lt57 = null;
  var $lt58 = null;
  var $lt59 = null;
  var $lt60 = null;
  var $lt61 = null;
  var $lt62 = null;
  var $lt63 = null;
  var $lt64 = null;
  var $lt65 = null;
  var $lt66 = null;
  var $lt67 = null;
  var $lt68 = null;
  var $lt69 = null;
  var $lt70 = null;
  var $lt71 = null;
  var $lt72 = null;
  var $lt73 = null;
  var $lt74 = null;
  var $lt75 = null;
  var $lt76 = null;
  var $lt77 = null;
  var $lt78 = null;
  var $lt79 = null;
  var $lm = pas.System;
  var $lt80 = $lm.TObject;
  var $lm1 = pas.JS;
  var $lp = $lm1.JSDelete;
  var $lm2 = pas.SysUtils;
  var $lt81 = $lm2.Exception;
  var $lm3 = pas.PScanner;
  var $lt82 = $lm3.TPasSourcePos;
  var $lm4 = pas.PasTree;
  var $lt83 = $lm4.TPasUnresolvedSymbolRef;
  var $lm5 = pas.PasResolveEval;
  var $lt84 = $lm5.TResolveData;
  var $lp1 = $lm2.LowerCase;
  var $lp2 = $lm5.GetObjName;
  var $lm6 = pas.Classes;
  var $lt85 = $lm6.TFPList;
  var $lp3 = $lm2.FreeAndNil;
  var $lp4 = $lm2.CompareText;
  var $lt86 = $lm4.TPasModule;
  var $lt87 = $lm4.TPasUsesUnit;
  var $lt88 = $lm4.TPasProperty;
  var $lp5 = $lm2.IntToStr;
  var $lt89 = $lm4.TProcedureBody;
  var $lt90 = $lm4.TPasProcedure;
  var $lm7 = pas.contnrs;
  var $lt91 = $lm7.TObjectList;
  var $lm8 = pas.PParser;
  var $lt92 = $lm8.TPasTreeContainer;
  var $lt93 = $lm4.TPasGenericType;
  var $lt94 = $lm4.TPasClassType;
  var $lt95 = $lm4.TPasType;
  var $lt96 = $lm4.TPasClassOfType;
  var $lt97 = $lm4.TPasPointerType;
  var $lt98 = $lm4.TPasRecordType;
  var $lt99 = $lm4.TPasEnumType;
  var $lt100 = $lm4.TPasProcedureType;
  var $lt101 = $lm4.TPasFunctionType;
  var $lt102 = $lm4.TPasArrayType;
  var $lt103 = $lm4.TPasRangeType;
  var $lt104 = $lm4.TPasGenericTemplateType;
  var $lt105 = $lm4.TPasVariable;
  var $lt106 = $lm4.TPasArgument;
  var $lp6 = $lm.VarRecs;
  var $lt107 = $lm4.TPasMembersType;
  var $lt108 = $lm4.TPasConstructor;
  var $lt109 = $lm4.TInterfaceSection;
  var $lt110 = $lm4.TImplementationSection;
  var $lt111 = $lm4.TPasFunction;
  var $lt112 = $lm4.TPasEnumValue;
  var $lt113 = $lm4.TPasProgram;
  var $lt114 = $lm4.TPasLibrary;
  var $lt115 = $lm4.TPasPackage;
  var $lt116 = $lm4.TPasSection;
  var $lt117 = $lm4.TPasConst;
  var $lt118 = $lm4.TPasVariant;
  var $lp7 = $lm2.SameText;
  var $lt119 = $lm4.TPasSetType;
  var $lp8 = $lm5.GetObjPath;
  var $lp9 = $lm5.GetGenericParamCommas;
  var $lt120 = $lm4.TPasClassConstructor;
  var $lt121 = $lm4.TPasClassDestructor;
  var $lp10 = $lm.Delete;
  var $lp11 = $lm2.LeftStr;
  var $lt122 = $lm4.TPasImplBeginBlock;
  var $lt123 = $lm4.TPasImplAssign;
  var $lt124 = $lm4.TPasImplSimple;
  var $lt125 = $lm4.TPasImplBlock;
  var $lt126 = $lm4.TPasImplRepeatUntil;
  var $lt127 = $lm4.TPasImplIfElse;
  var $lt128 = $lm4.TPasImplWhileDo;
  var $lt129 = $lm4.TPasImplCaseOf;
  var $lt130 = $lm4.TPasImplLabelMark;
  var $lt131 = $lm4.TPasImplForLoop;
  var $lt132 = $lm4.TPasImplTry;
  var $lt133 = $lm4.TPasImplExceptOn;
  var $lt134 = $lm4.TPasImplRaise;
  var $lt135 = $lm4.TPasImplCommand;
  var $lt136 = $lm4.TPasImplAsmStatement;
  var $lt137 = $lm4.TPasImplWithDo;
  var $lt138 = $lm5.TResEvalSet;
  var $lt139 = $lm4.TPasImplCaseStatement;
  var $lp12 = $lm5.ReleaseEvalValue;
  var $lt140 = $lm4.TPasImplCaseElse;
  var $lt141 = $lm4.TPasResultElement;
  var $lt142 = $lm4.TPrimitiveExpr;
  var $lt143 = $lm4.TUnaryExpr;
  var $lt144 = $lm4.TBinaryExpr;
  var $lt145 = $lm4.TParamsExpr;
  var $lt146 = $lm4.TBoolConstExpr;
  var $lt147 = $lm4.TNilExpr;
  var $lt148 = $lm4.TInheritedExpr;
  var $lt149 = $lm4.TArrayValues;
  var $lt150 = $lm4.TRecordValues;
  var $lt151 = $lm4.TProcedureExpr;
  var $lt152 = $lm4.TInlineSpecializeExpr;
  var $lp13 = $lm.Pos;
  var $lt153 = $lm4.TPasExpr;
  var $lp14 = $lm2.BoolToStr$1;
  var $lt154 = $lm4.TPasAttributes;
  var $lt155 = $lm4.TPasSpecializeType;
  var $lt156 = $lm4.TPasDeclarations;
  var $lt157 = $lm4.TPasAliasType;
  var $lt158 = $lm4.TPasTypeAliasType;
  var $lt159 = $lm4.TPasMethodResolution;
  var $lt160 = $lm4.TPasDestructor;
  var $lt161 = $lm4.TPasClassProcedure;
  var $lt162 = $lm4.TPasClassFunction;
  var $lt163 = $lm4.TPasAnonymousProcedure;
  var $lt164 = $lm4.TPasAnonymousFunction;
  var $lt165 = $lm5.TResEvalRangeInt;
  var $lt166 = $lm4.TPasExportSymbol;
  var $lp15 = $lm2.RightStr;
  var $lt167 = $lm5.TResEvalExternal;
  var $lt168 = $lm5.TResEvalEnum;
  var $lt169 = $lm5.TResEvalInt;
  var $lt170 = $lm5.TResEvalFloat;
  var $lt171 = $lm5.TResEvalCurrency;
  var $lt172 = $lm5.TResEvalBool;
  var $lt173 = $lm5.TResEvalUTF16;
  var $lp16 = $lm.Copy;
  var $lt174 = $lm4.TPasStringType;
  var $lt175 = $lm4.TPasImplTryFinally;
  var $lt176 = $lm4.TPasImplTryExcept;
  var $lt177 = $lm4.TPasImplTryExceptElse;
  var $lt178 = $lm4.TPasResString;
  var $lt179 = $lm4.TPasOperator;
  var $lt180 = $lm4.TPasImplElement;
  var $lt181 = $lm4.TProcedureNamePart;
  var $lt182 = $lm4.TRecordValuesItem;
  var $lt183 = $lm5.TResExprEvaluator;
  var $lt184 = $lm4.TSelfExpr;
  var $lt185 = $lm4.TPasOverloadedProc;
  var $lt186 = $lm4.TProgramSection;
  var $lt187 = $lm4.TLibrarySection;
  var $lt188 = $lm4.TInitializationSection;
  var $lt189 = $lm4.TFinalizationSection;
  var $lt190 = $lm4.TPasUnresolvedUnitRef;
  var $lp17 = $lm2.ChangeFileExt;
  var $lp18 = $lm2.ExtractFileName;
  var $lp19 = $lm3.SafeFormat;
  var $lp20 = $lm3.CreateMsgArgs;
  var $lp21 = $lm2.UpperCase;
  var $lp22 = $lm5.NumberIsFloat;
  var $lt191 = $lm4.TPasClassOperator;
  var $lt192 = $lm5.TResEvalUInt;
  var $lp23 = $lm.StringOfChar;
  var $lt193 = $lm4.TPasFileType;
  this.ParserMaxEmbeddedColumn = 2048;
  this.ParserMaxEmbeddedRow = rtl.trunc(0x7fffffff / 2048);
  this.po_Resolver = rtl.createSet(3,5,6,7,10);
  $lt = this.TResolverBaseType = {"0": "btNone", btNone: 0, "1": "btCustom", btCustom: 1, "2": "btContext", btContext: 2, "3": "btModule", btModule: 3, "4": "btUntyped", btUntyped: 4, "5": "btChar", btChar: 5, "6": "btWideChar", btWideChar: 6, "7": "btString", btString: 7, "8": "btWideString", btWideString: 8, "9": "btUnicodeString", btUnicodeString: 9, "10": "btSingle", btSingle: 10, "11": "btDouble", btDouble: 11, "12": "btExtended", btExtended: 12, "13": "btCExtended", btCExtended: 13, "14": "btCurrency", btCurrency: 14, "15": "btBoolean", btBoolean: 15, "16": "btByteBool", btByteBool: 16, "17": "btWordBool", btWordBool: 17, "18": "btLongBool", btLongBool: 18, "19": "btByte", btByte: 19, "20": "btShortInt", btShortInt: 20, "21": "btWord", btWord: 21, "22": "btSmallInt", btSmallInt: 22, "23": "btUIntSingle", btUIntSingle: 23, "24": "btIntSingle", btIntSingle: 24, "25": "btLongWord", btLongWord: 25, "26": "btLongint", btLongint: 26, "27": "btUIntDouble", btUIntDouble: 27, "28": "btIntDouble", btIntDouble: 28, "29": "btPointer", btPointer: 29, "30": "btNil", btNil: 30, "31": "btProc", btProc: 31, "32": "btBuiltInProc", btBuiltInProc: 32, "33": "btArrayProperty", btArrayProperty: 33, "34": "btSet", btSet: 34, "35": "btArrayLit", btArrayLit: 35, "36": "btArrayOrSet", btArrayOrSet: 36, "37": "btRange", btRange: 37};
  this.btIntMax = 28;
  this.btAllInteger = rtl.createSet(19,20,21,22,24,23,25,26,28,27);
  this.btAllIntegerNoQWord = this.btAllInteger;
  this.btAllSignedInteger = rtl.createSet(20,22,24,26,28);
  this.btAllChars = rtl.createSet(5,6);
  this.btAllStrings = rtl.createSet(7,8,9);
  this.btAllStringAndChars = rtl.unionSet(this.btAllStrings,this.btAllChars);
  this.btAllStringPointer = rtl.createSet(7,8,9);
  this.btAllFloats = rtl.createSet(10,11,12,13,14);
  this.btAllBooleans = rtl.createSet(15,16,17,18);
  this.btArrayRangeTypes = rtl.unionSet(rtl.unionSet(this.btAllChars,this.btAllBooleans),this.btAllInteger);
  this.btAllRanges = rtl.unionSet(this.btArrayRangeTypes,rtl.createSet(37));
  this.btAllWithSubType = rtl.createSet(34,35,36,37);
  this.btAllIntrinsicTypes = rtl.unionSet(rtl.unionSet(rtl.unionSet(this.btAllInteger,this.btAllStringAndChars),this.btAllFloats),this.btAllBooleans);
  this.btAllFPCTypes = rtl.createSet(5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,25,26,29);
  this.ResBaseTypeNames = ["None","Custom","Context","Module","Untyped","Char","WideChar","String","WideString","UnicodeString","Single","Double","Extended","CExtended","Currency","Boolean","ByteBool","WordBool","LongBool","Byte","ShortInt","Word","SmallInt","UIntSingle","IntSingle","LongWord","Longint","UIntDouble","IntDouble","Pointer","Nil","Procedure/Function","BuiltInProc","array property","set","array","set or array literal","range.."];
  $lt1 = this.TResolverBuiltInProc = {"0": "bfCustom", bfCustom: 0, "1": "bfLength", bfLength: 1, "2": "bfSetLength", bfSetLength: 2, "3": "bfInclude", bfInclude: 3, "4": "bfExclude", bfExclude: 4, "5": "bfBreak", bfBreak: 5, "6": "bfContinue", bfContinue: 6, "7": "bfExit", bfExit: 7, "8": "bfInc", bfInc: 8, "9": "bfDec", bfDec: 9, "10": "bfAssigned", bfAssigned: 10, "11": "bfChr", bfChr: 11, "12": "bfOrd", bfOrd: 12, "13": "bfLow", bfLow: 13, "14": "bfHigh", bfHigh: 14, "15": "bfPred", bfPred: 15, "16": "bfSucc", bfSucc: 16, "17": "bfStrProc", bfStrProc: 17, "18": "bfStrFunc", bfStrFunc: 18, "19": "bfWriteStr", bfWriteStr: 19, "20": "bfVal", bfVal: 20, "21": "bfLo", bfLo: 21, "22": "bfHi", bfHi: 22, "23": "bfConcatArray", bfConcatArray: 23, "24": "bfConcatString", bfConcatString: 24, "25": "bfCopyArray", bfCopyArray: 25, "26": "bfInsertArray", bfInsertArray: 26, "27": "bfDeleteArray", bfDeleteArray: 27, "28": "bfTypeInfo", bfTypeInfo: 28, "29": "bfGetTypeKind", bfGetTypeKind: 29, "30": "bfAssert", bfAssert: 30, "31": "bfNew", bfNew: 31, "32": "bfDispose", bfDispose: 32, "33": "bfDefault", bfDefault: 33};
  this.ResolverBuiltInProcNames = ["Custom","Length","SetLength","Include","Exclude","Break","Continue","Exit","Inc","Dec","Assigned","Chr","Ord","Low","High","Pred","Succ","Str","Str","WriteStr","Val","Lo","Hi","Concat","Concat","Copy","Insert","Delete","TypeInfo","GetTypeKind","Assert","New","Dispose","Default"];
  this.bfAllStandardProcs = rtl.createSet(null,0 + 1,$lt1.bfDefault);
  this.ResolverResultVar = "Result";
  rtl.createClass(this,"TPasResHashList",$lt80,function () {
    $lt2 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.FItems = null;
    };
    this.$final = function () {
      this.FItems = undefined;
      $lt80.$final.call(this);
    };
    this.Create$1 = function () {
      this.FItems = new Object();
      return this;
    };
    this.Add = function (aName, Item) {
      this.FItems["%" + aName] = Item;
    };
    this.Find = function (aName) {
      var Result = null;
      if (this.FItems.hasOwnProperty("%" + aName)) {
        Result = this.FItems["%" + aName]}
       else Result = null;
      return Result;
    };
    this.ForEachCall = function (Proc, Arg) {
      var key = "";
      for (key in this.FItems) if (this.FItems.hasOwnProperty(key)) Proc(this.FItems[key],Arg);
    };
    this.Clear = function () {
      this.FItems = new Object();
    };
    this.Remove = function (aName) {
      if (this.FItems.hasOwnProperty("%" + aName)) $lp(this.FItems,"%" + aName);
    };
  });
  rtl.createClass(this,"EPasResolve",$lt81,function () {
    $lt3 = this;
    this.$init = function () {
      $lt81.$init.call(this);
      this.FPasElement = null;
      this.Id = 0;
      this.MsgType = 0;
      this.MsgNumber = 0;
      this.MsgPattern = "";
      this.Args = [];
      this.SourcePos = $lt82.$new();
    };
    this.$final = function () {
      this.FPasElement = undefined;
      this.Args = undefined;
      this.SourcePos = undefined;
      $lt81.$final.call(this);
    };
    this.SetPasElement = function (AValue) {
      if (this.FPasElement === AValue) return;
      this.FPasElement = AValue;
    };
    this.Destroy = function () {
      this.SetPasElement(null);
      $lt80.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TUnresolvedPendingRef",$lt83,function () {
    $lt4 = this;
  });
  rtl.createClass(this,"TPasSpecializeTypeData",$lt84,function () {
    $lt5 = this;
    this.$init = function () {
      $lt84.$init.call(this);
      this.SpecializedType = null;
    };
    this.$final = function () {
      this.SpecializedType = undefined;
      $lt84.$final.call(this);
    };
  });
  $lt6 = this.TPRSpecializeStep = {"0": "prssNone", prssNone: 0, "1": "prssInterfaceBuilding", prssInterfaceBuilding: 1, "2": "prssInterfaceFinished", prssInterfaceFinished: 2, "3": "prssImplementationBuilding", prssImplementationBuilding: 3, "4": "prssImplementationFinished", prssImplementationFinished: 4};
  rtl.createClass(this,"TPRSpecializedItem",$lt80,function () {
    $lt7 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.FSpecializedEl = null;
      this.GenericEl = null;
      this.Index = 0;
      this.Step = 0;
      this.FirstSpecialize = null;
      this.Params = [];
      this.SpecializedConstraints = [];
    };
    this.$final = function () {
      this.FSpecializedEl = undefined;
      this.GenericEl = undefined;
      this.FirstSpecialize = undefined;
      this.Params = undefined;
      this.SpecializedConstraints = undefined;
      $lt80.$final.call(this);
    };
    this.Destroy = function () {
      this.SpecializedConstraints = rtl.arraySetLength(this.SpecializedConstraints,null,0);
      $lt80.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPRSpecializedTypeItem",$lt7,function () {
    $lt8 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FSpecializedType = null;
      this.HeaderScope = null;
      this.ImplProcs = null;
    };
    this.$final = function () {
      this.FSpecializedType = undefined;
      this.HeaderScope = undefined;
      this.ImplProcs = undefined;
      $lt7.$final.call(this);
    };
    this.SetSpecializedType = function (AValue) {
      if (this.FSpecializedType === AValue) return;
      this.FSpecializedEl = AValue;
      this.FSpecializedType = AValue;
    };
    this.Destroy = function () {
      if (this.ImplProcs !== null) {
        rtl.free(this,"ImplProcs");
        this.ImplProcs = null;
      };
      rtl.free(this,"HeaderScope");
      this.HeaderScope = null;
      this.SetSpecializedType(null);
      $lt7.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPRSpecializedProcItem",$lt7,function () {
    $lt9 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.FSpecializedProc = null;
      this.ImplProc = null;
    };
    this.$final = function () {
      this.FSpecializedProc = undefined;
      this.ImplProc = undefined;
      $lt7.$final.call(this);
    };
    this.SetSpecializedProc = function (AValue) {
      if (this.FSpecializedProc === AValue) return;
      this.FSpecializedEl = AValue;
      this.FSpecializedProc = AValue;
    };
    this.Destroy = function () {
      if (this.ImplProc !== null) {
        this.ImplProc = null;
      };
      this.SetSpecializedProc(null);
      $lt7.Destroy.call(this);
    };
  });
  $lt10 = this.TPSRefAccess = {"0": "psraNone", psraNone: 0, "1": "psraRead", psraRead: 1, "2": "psraWrite", psraWrite: 2, "3": "psraReadWrite", psraReadWrite: 3, "4": "psraWriteRead", psraWriteRead: 4, "5": "psraTypeInfo", psraTypeInfo: 5};
  rtl.createClass(this,"TPasScopeReference",$lt80,function () {
    $lt11 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.FElement = null;
      this.Access = 0;
      this.NextSameName = null;
    };
    this.$final = function () {
      this.FElement = undefined;
      this.NextSameName = undefined;
      $lt80.$final.call(this);
    };
    this.SetElement = function (AValue) {
      if (this.FElement === AValue) return;
      this.FElement = AValue;
    };
    this.Destroy = function () {
      this.SetElement(null);
      $lt80.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasScopeReferences",$lt80,function () {
    $lt12 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.FScope = null;
      this.References = null;
    };
    this.$final = function () {
      this.FScope = undefined;
      this.References = undefined;
      $lt80.$final.call(this);
    };
    this.OnClearItem = function (Item, Dummy) {
      var Ref2 = null;
      if (Dummy === null) ;
      while (Item !== null) {
        Ref2 = Item;
        Item = Item.NextSameName;
        Ref2 = rtl.freeLoc(Ref2);
      };
    };
    this.Create$1 = function (aScope) {
      this.References = $lt2.$create("Create$1");
      this.FScope = aScope;
      return this;
    };
    this.Destroy = function () {
      this.Clear();
      this.References = null;
      $lt80.Destroy.call(this);
    };
    this.Clear = function () {
      if (this.References === null) return;
      this.References.ForEachCall(rtl.createCallback(this,"OnClearItem"),null);
      this.References.Clear();
    };
    this.Add = function (El, Access) {
      var Result = null;
      var LoName = "";
      var OldItem = null;
      var Item = null;
      var LastItem = null;
      LoName = $lp1(El.FName);
      OldItem = this.References.Find(LoName);
      Item = OldItem;
      LastItem = null;
      while (Item !== null) {
        if (Item.FElement === El) {
          var $tmp = Access;
          if ($tmp === 0) {}
          else if ($tmp === 1) {
            var $tmp1 = Item.Access;
            if ($tmp1 === 0) {
              Item.Access = Access}
             else if ($tmp1 === 2) Item.Access = 4;
          } else if ($tmp === 2) {
            var $tmp2 = Item.Access;
            if ($tmp2 === 0) {
              Item.Access = Access}
             else if ($tmp2 === 1) Item.Access = 3;
          } else if ($tmp === 3) {
            var $tmp3 = Item.Access;
            if ($tmp3 === 0) {
              Item.Access = Access}
             else if ($tmp3 === 1) {
              Item.Access = 3}
             else if ($tmp3 === 2) Item.Access = 4;
          } else if ($tmp === 4) {
            var $tmp4 = Item.Access;
            if ($tmp4 === 0) {
              Item.Access = Access}
             else if ($tmp4 === 1) {
              Item.Access = 3}
             else if ($tmp4 === 2) Item.Access = 4;
          } else if ($tmp === 5) {
            Item.Access = 5}
           else {
            throw $lt3.$create("Create$1",[$lp2(El) + " unknown Access"]);
          };
          return Item;
        };
        LastItem = Item;
        Item = Item.NextSameName;
      };
      Item = $lt11.$create("Create");
      Item.SetElement(El);
      Item.Access = Access;
      if (LastItem === null) {
        this.References.Add(LoName,Item);
      } else LastItem.NextSameName = Item;
      Result = Item;
      return Result;
    };
  });
  rtl.createClass(this,"TPasScope",$lt84,function () {
    $lt13 = this;
    this.$init = function () {
      $lt84.$init.call(this);
      this.VisibilityContext = null;
    };
    this.$final = function () {
      this.VisibilityContext = undefined;
      $lt84.$final.call(this);
    };
    this.IsStoredInElement = function () {
      var Result = false;
      Result = true;
      return Result;
    };
    this.FreeOnPop = function () {
      var Result = false;
      Result = !this.IsStoredInElement();
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      if (aName === "") ;
      if (StartScope === null) ;
      if (Data === null) ;
      if (OnIterateElement === null) ;
      if (Abort.get()) ;
    };
  });
  $lt14 = this.TPasModuleScopeFlag = {"0": "pmsfAssertSearched", pmsfAssertSearched: 0, "1": "pmsfRangeErrorNeeded", pmsfRangeErrorNeeded: 1, "2": "pmsfRangeErrorSearched", pmsfRangeErrorSearched: 2};
  rtl.createClass(this,"TPasModuleScope",$lt13,function () {
    $lt15 = this;
    this.$init = function () {
      $lt13.$init.call(this);
      this.FAssertClass = null;
      this.FAssertDefConstructor = null;
      this.FAssertMsgConstructor = null;
      this.FRangeErrorClass = null;
      this.FRangeErrorConstructor = null;
      this.FSystemTVarRec = null;
      this.FirstName = "";
      this.PendingResolvers = null;
      this.Flags = {};
      this.BoolSwitches = {};
    };
    this.$final = function () {
      this.FAssertClass = undefined;
      this.FAssertDefConstructor = undefined;
      this.FAssertMsgConstructor = undefined;
      this.FRangeErrorClass = undefined;
      this.FRangeErrorConstructor = undefined;
      this.FSystemTVarRec = undefined;
      this.PendingResolvers = undefined;
      this.Flags = undefined;
      this.BoolSwitches = undefined;
      $lt13.$final.call(this);
    };
    this.SetAssertClass = function (AValue) {
      if (this.FAssertClass === AValue) return;
      this.FAssertClass = AValue;
    };
    this.SetAssertDefConstructor = function (AValue) {
      if (this.FAssertDefConstructor === AValue) return;
      this.FAssertDefConstructor = AValue;
    };
    this.SetAssertMsgConstructor = function (AValue) {
      if (this.FAssertMsgConstructor === AValue) return;
      this.FAssertMsgConstructor = AValue;
    };
    this.SetRangeErrorClass = function (AValue) {
      if (this.FRangeErrorClass === AValue) return;
      this.FRangeErrorClass = AValue;
    };
    this.SetRangeErrorConstructor = function (AValue) {
      if (this.FRangeErrorConstructor === AValue) return;
      this.FRangeErrorConstructor = AValue;
    };
    this.SetSystemTVarRec = function (AValue) {
      if (this.FSystemTVarRec === AValue) return;
      this.FSystemTVarRec = AValue;
    };
    this.Create$1 = function () {
      $lt84.Create$1.call(this);
      this.PendingResolvers = $lt85.$create("Create");
      return this;
    };
    this.Destroy = function () {
      this.SetAssertClass(null);
      this.SetAssertDefConstructor(null);
      this.SetAssertMsgConstructor(null);
      this.SetRangeErrorClass(null);
      this.SetRangeErrorConstructor(null);
      this.SetSystemTVarRec(null);
      $lp3({p: this, get: function () {
          return this.p.PendingResolvers;
        }, set: function (v) {
          this.p.PendingResolvers = v;
        }});
      $lt84.Destroy.call(this);
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      if ($lp4(aName,this.FirstName) !== 0) return;
      OnIterateElement(this.FElement,this,StartScope,Data,Abort);
    };
  });
  $lt16 = this.TPasIdentifierKind = {"0": "pikNone", pikNone: 0, "1": "pikBaseType", pikBaseType: 1, "2": "pikBuiltInProc", pikBuiltInProc: 2, "3": "pikSimple", pikSimple: 3, "4": "pikProc", pikProc: 4, "5": "pikNamespace", pikNamespace: 5};
  rtl.createClass(this,"TPasIdentifier",$lt80,function () {
    $lt17 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.FElement = null;
      this.Identifier = "";
      this.NextSameIdentifier = null;
      this.Kind = 0;
    };
    this.$final = function () {
      this.FElement = undefined;
      this.NextSameIdentifier = undefined;
      $lt80.$final.call(this);
    };
    this.SetElement = function (AValue) {
      if (this.FElement === AValue) return;
      this.FElement = AValue;
    };
    this.Destroy = function () {
      this.SetElement(null);
      $lt80.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasIdentifierScope",$lt13,function () {
    $lt18 = this;
    this.$init = function () {
      $lt13.$init.call(this);
      this.FItems = null;
    };
    this.$final = function () {
      this.FItems = undefined;
      $lt13.$final.call(this);
    };
    this.InternalAdd = function (Item) {
      var OldItem = null;
      var LoName = "";
      LoName = $lp1(Item.Identifier);
      OldItem = this.FItems.Find(LoName);
      if (OldItem !== null) {
        Item.NextSameIdentifier = OldItem;
      };
      this.FItems.Add(LoName,Item);
    };
    this.OnClearItem = function (Item, Dummy) {
      var Ident = null;
      if (Dummy === null) ;
      while (Item !== null) {
        Ident = Item;
        Item = Item.NextSameIdentifier;
        Ident = rtl.freeLoc(Ident);
      };
    };
    this.Create$1 = function () {
      this.FItems = $lt2.$create("Create$1");
      return this;
    };
    this.Destroy = function () {
      this.ClearIdentifiers(true);
      $lt84.Destroy.call(this);
    };
    this.ClearIdentifiers = function (FreeItems) {
      this.FItems.ForEachCall(rtl.createCallback(this,"OnClearItem"),null);
      if (FreeItems) {
        this.FItems = null}
       else this.FItems.Clear();
    };
    this.FindLocalIdentifier = function (Identifier) {
      var Result = null;
      Result = this.FItems.Find($lp1(Identifier));
      return Result;
    };
    this.FindIdentifier = function (Identifier) {
      var Result = null;
      Result = this.FindLocalIdentifier(Identifier);
      return Result;
    };
    this.RemoveLocalIdentifier = function (El) {
      var Result = false;
      var Identifier = null;
      var PrevIdentifier = null;
      var LoName = "";
      LoName = $lp1(El.FName);
      Identifier = this.FItems.Find(LoName);
      this.FindLocalIdentifier(El.FName);
      PrevIdentifier = null;
      Result = false;
      while (Identifier !== null) {
        if (Identifier.FElement === El) {
          if (PrevIdentifier !== null) {
            PrevIdentifier.NextSameIdentifier = Identifier.NextSameIdentifier;
            Identifier = rtl.freeLoc(Identifier);
            Identifier = PrevIdentifier.NextSameIdentifier;
          } else {
            this.FItems.Remove(LoName);
            PrevIdentifier = Identifier;
            Identifier = Identifier.NextSameIdentifier;
            PrevIdentifier = rtl.freeLoc(PrevIdentifier);
            PrevIdentifier = null;
            if (Identifier !== null) this.FItems.Add(LoName,Identifier);
          };
          Result = true;
          continue;
        };
        PrevIdentifier = Identifier;
        Identifier = Identifier.NextSameIdentifier;
      };
      return Result;
    };
    this.AddIdentifier = function (Identifier, El, Kind) {
      var Result = null;
      var Item = null;
      Item = $lt17.$create("Create");
      Item.Identifier = Identifier;
      Item.SetElement(El);
      Item.Kind = Kind;
      this.InternalAdd(Item);
      Result = Item;
      return Result;
    };
    this.IterateLocalElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      var Item = null;
      Item = this.FindLocalIdentifier(aName);
      while (Item !== null) {
        OnIterateElement(Item.FElement,this,StartScope,Data,Abort);
        if (Abort.get()) return;
        Item = Item.NextSameIdentifier;
      };
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      this.IterateLocalElements(aName,StartScope,OnIterateElement,Data,Abort);
    };
  });
  rtl.createClass(this,"TPasDefaultScope",$lt18,function () {
    $lt19 = this;
    this.IsStoredInElement = function () {
      var Result = false;
      Result = false;
      return Result;
    };
  });
  rtl.recNewT(this,"TPasIterateFilterData",function () {
    $lt20 = this;
    this.OnIterate = null;
    this.Data = null;
    this.$eq = function (b) {
      return rtl.eqCallback(this.OnIterate,b.OnIterate) && (this.Data === b.Data);
    };
    this.$assign = function (s) {
      this.OnIterate = s.OnIterate;
      this.Data = s.Data;
      return this;
    };
  });
  rtl.createClass(this,"TPRHelperEntry",$lt80,function () {
    $lt21 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.Added = 0;
      this.HelperForType = null;
      this.Helper = null;
    };
    this.$final = function () {
      this.HelperForType = undefined;
      this.Helper = undefined;
      $lt80.$final.call(this);
    };
  });
  rtl.createClass(this,"TPasSectionScope",$lt18,function () {
    $lt22 = this;
    this.$init = function () {
      $lt18.$init.call(this);
      this.UsesScopes = null;
      this.UsesFinished = false;
      this.Finished = false;
      this.BoolSwitches = {};
      this.ModeSwitches = {};
      this.Helpers = [];
    };
    this.$final = function () {
      this.UsesScopes = undefined;
      this.BoolSwitches = undefined;
      this.ModeSwitches = undefined;
      this.Helpers = undefined;
      $lt18.$final.call(this);
    };
    this.OnInternalIterate = function (El, ElScope, StartScope, Data, Abort) {
      if ((El.$class.ClassType() === $lt86) || (El.$class.ClassType() === $lt87)) return;
      Data.OnIterate(El,ElScope,StartScope,Data.Data,Abort);
    };
    this.Create$1 = function () {
      $lt18.Create$1.call(this);
      this.UsesScopes = $lt85.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $mod.ClearHelperList({p: this, get: function () {
          return this.p.Helpers;
        }, set: function (v) {
          this.p.Helpers = v;
        }});
      $lp3({p: this, get: function () {
          return this.p.UsesScopes;
        }, set: function (v) {
          this.p.UsesScopes = v;
        }});
      $lt18.Destroy.call(this);
    };
    this.FindIdentifier = function (Identifier) {
      var Result = null;
      var i = 0;
      var UsesScope = null;
      var C = null;
      Result = $lt18.FindIdentifier.call(this,Identifier);
      if (Result !== null) return Result;
      for (var $l = this.UsesScopes.FCount - 1; $l >= 0; $l--) {
        i = $l;
        UsesScope = rtl.getObject(this.UsesScopes.Get(i));
        Result = UsesScope.FindLocalIdentifier(Identifier);
        if (Result !== null) {
          C = Result.FElement.$class.ClassType();
          if ((C !== $lt86) && (C !== $lt87)) return Result;
        };
      };
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      var i = 0;
      var UsesScope = null;
      var FilterData = $lt20.$new();
      $lt18.IterateElements.call(this,aName,StartScope,OnIterateElement,Data,Abort);
      if (Abort.get()) return;
      FilterData.OnIterate = OnIterateElement;
      FilterData.Data = Data;
      for (var $l = this.UsesScopes.FCount - 1; $l >= 0; $l--) {
        i = $l;
        UsesScope = rtl.getObject(this.UsesScopes.Get(i));
        UsesScope.IterateLocalElements(aName,StartScope,rtl.createCallback(this,"OnInternalIterate"),FilterData,Abort);
        if (Abort.get()) return;
      };
    };
  });
  rtl.createClass(this,"TPasInitialFinalizationScope",$lt13,function () {
    $lt23 = this;
    this.$init = function () {
      $lt13.$init.call(this);
      this.References = null;
    };
    this.$final = function () {
      this.References = undefined;
      $lt13.$final.call(this);
    };
    this.AddReference = function (El, Access) {
      var Result = null;
      if (this.References === null) this.References = $lt12.$create("Create$1",[this]);
      Result = this.References.Add(El,Access);
      return Result;
    };
    this.Destroy = function () {
      $lp3({p: this, get: function () {
          return this.p.References;
        }, set: function (v) {
          this.p.References = v;
        }});
      $lt84.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasEnumTypeScope",$lt18,function () {
    $lt24 = this;
    this.$init = function () {
      $lt18.$init.call(this);
      this.CanonicalSet = null;
    };
    this.$final = function () {
      this.CanonicalSet = undefined;
      $lt18.$final.call(this);
    };
    this.Destroy = function () {
      this.CanonicalSet = null;
      $lt18.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasGenericParamsScope",$lt18,function () {
    $lt25 = this;
  });
  $lt26 = this.TPSGenericStep = {"0": "psgsNone", psgsNone: 0, "1": "psgsInterfaceParsed", psgsInterfaceParsed: 1, "2": "psgsImplementationParsed", psgsImplementationParsed: 2};
  rtl.createClass(this,"TPasGenericScope",$lt18,function () {
    $lt27 = this;
    this.$init = function () {
      $lt18.$init.call(this);
      this.SpecializedItems = null;
      this.GenericStep = 0;
      this.SpecializedFromItem = null;
    };
    this.$final = function () {
      this.SpecializedItems = undefined;
      this.SpecializedFromItem = undefined;
      $lt18.$final.call(this);
    };
    this.Destroy = function () {
      if (this.SpecializedItems !== null) {
        rtl.free(this,"SpecializedItems");
        this.SpecializedItems = null;
      };
      $lt18.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasArrayScope",$lt27,function () {
    $lt28 = this;
  });
  rtl.createClass(this,"TPasProcTypeScope",$lt27,function () {
    $lt29 = this;
  });
  rtl.createClass(this,"TPasClassOrRecordScope",$lt27,function () {
    $lt30 = this;
    this.$init = function () {
      $lt27.$init.call(this);
      this.DefaultProperty = null;
      this.ClassConstructor = null;
      this.ClassDestructor = null;
    };
    this.$final = function () {
      this.DefaultProperty = undefined;
      this.ClassConstructor = undefined;
      this.ClassDestructor = undefined;
      $lt27.$final.call(this);
    };
  });
  rtl.createClass(this,"TPasRecordScope",$lt30,function () {
    $lt31 = this;
  });
  $lt32 = this.TPasClassScopeFlag = {"0": "pcsfAncestorResolved", pcsfAncestorResolved: 0, "1": "pcsfSealed", pcsfSealed: 1, "2": "pcsfPublished", pcsfPublished: 2};
  rtl.createClass(this,"TPasClassIntfMap",$lt80,function () {
    $lt33 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.Element = null;
      this.Intf = null;
      this.Procs = null;
      this.AncestorMap = null;
    };
    this.$final = function () {
      this.Element = undefined;
      this.Intf = undefined;
      this.Procs = undefined;
      this.AncestorMap = undefined;
      $lt80.$final.call(this);
    };
    this.Destroy = function () {
      this.Element = null;
      this.Intf = null;
      $lp3({p: this, get: function () {
          return this.p.Procs;
        }, set: function (v) {
          this.p.Procs = v;
        }});
      $lp3({p: this, get: function () {
          return this.p.AncestorMap;
        }, set: function (v) {
          this.p.AncestorMap = v;
        }});
      $lt80.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasClassScope",$lt30,function () {
    $lt34 = this;
    this.$init = function () {
      $lt30.$init.call(this);
      this.AncestorScope = null;
      this.CanonicalClassOf = null;
      this.DirectAncestor = null;
      this.Flags = {};
      this.AbstractProcs = [];
      this.Interfaces = null;
    };
    this.$final = function () {
      this.AncestorScope = undefined;
      this.CanonicalClassOf = undefined;
      this.DirectAncestor = undefined;
      this.Flags = undefined;
      this.AbstractProcs = undefined;
      this.Interfaces = undefined;
      $lt30.$final.call(this);
    };
    this.Destroy = function () {
      var i = 0;
      var o = null;
      if (this.Interfaces !== null) {
        for (var $l = 0, $end = this.Interfaces.FCount - 1; $l <= $end; $l++) {
          i = $l;
          o = rtl.getObject(this.Interfaces.Get(i));
          if (o === null) {}
          else if ($lt88.isPrototypeOf(o)) {}
          else if ($lt33.isPrototypeOf(o)) {
            o = rtl.freeLoc(o)}
           else throw $lt81.$create("Create$1",["[20180322132757] " + $mod.GetElementDbgPath(this.FElement) + " i=" + $lp5(i) + " " + $lp2(o)]);
        };
        $lp3({p: this, get: function () {
            return this.p.Interfaces;
          }, set: function (v) {
            this.p.Interfaces = v;
          }});
      };
      this.CanonicalClassOf = null;
      $lt27.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasGroupScope",$lt18,function () {
    $lt35 = this;
    this.$init = function () {
      $lt18.$init.call(this);
      this.Scopes = [];
      this.Count = 0;
      this.OnlyTypeMembers = false;
    };
    this.$final = function () {
      this.Scopes = undefined;
      $lt18.$final.call(this);
    };
    this.Add = function (Scope) {
      var i = 0;
      for (var $l = 0, $end = this.Count - 1; $l <= $end; $l++) {
        i = $l;
        if (this.Scopes[i] === Scope) return;
      };
      if (Scope.$class.FreeOnPop()) throw $lt81.$create("Create$1",["TPasGroupScope.Add " + $lp2(Scope) + " " + $lp2(Scope.FElement)]);
      if (this.Count === rtl.length(this.Scopes)) this.Scopes = rtl.arraySetLength(this.Scopes,null,(this.Count * 2) + 4);
      this.Scopes[this.Count] = Scope;
      this.Count += 1;
    };
    this.Destroy = function () {
      this.Scopes = [];
      this.Count = 0;
      $lt18.Destroy.call(this);
    };
    this.IsStoredInElement = function () {
      var Result = false;
      Result = false;
      return Result;
    };
    this.FindAncestorIdentifier = function (Identifier) {
      var Result = null;
      var i = 0;
      for (var $l = 1, $end = this.Count - 1; $l <= $end; $l++) {
        i = $l;
        Result = this.Scopes[i].FindIdentifier(Identifier);
        if (Result !== null) return Result;
      };
      Result = null;
      return Result;
    };
    this.FindAncestorElement = function (Identifier) {
      var Result = null;
      var Item = null;
      Item = this.FindAncestorIdentifier(Identifier);
      if (Item !== null) {
        Result = Item.FElement}
       else Result = null;
      return Result;
    };
    this.FindIdentifier = function (Identifier) {
      var Result = null;
      var i = 0;
      for (var $l = 0, $end = this.Count - 1; $l <= $end; $l++) {
        i = $l;
        Result = this.Scopes[i].FindIdentifier(Identifier);
        if (Result !== null) return Result;
      };
      Result = null;
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      var i = 0;
      for (var $l = 0, $end = this.Count - 1; $l <= $end; $l++) {
        i = $l;
        this.Scopes[i].IterateElements(aName,StartScope,OnIterateElement,Data,Abort);
        if (Abort.get()) return;
      };
    };
  });
  $lt36 = this.TPasProcedureScopeFlag = {"0": "ppsfIsGroupOverload", ppsfIsGroupOverload: 0, "1": "ppsfIsSpecialized", ppsfIsSpecialized: 1, "2": "ppsfIsOverrideOverload", ppsfIsOverrideOverload: 2};
  rtl.createClass(this,"TPasProcedureScope",$lt27,function () {
    $lt37 = this;
    this.$init = function () {
      $lt27.$init.call(this);
      this.DeclarationProc = null;
      this.ImplProc = null;
      this.OverriddenProc = null;
      this.ClassRecScope = null;
      this.GroupScope = null;
      this.NestedMembersScope = null;
      this.SelfArg = null;
      this.Flags = {};
      this.BoolSwitches = {};
      this.ModeSwitches = {};
      this.References = null;
    };
    this.$final = function () {
      this.DeclarationProc = undefined;
      this.ImplProc = undefined;
      this.OverriddenProc = undefined;
      this.ClassRecScope = undefined;
      this.GroupScope = undefined;
      this.NestedMembersScope = undefined;
      this.SelfArg = undefined;
      this.Flags = undefined;
      this.BoolSwitches = undefined;
      this.ModeSwitches = undefined;
      this.References = undefined;
      $lt27.$final.call(this);
    };
    this.FindIdentifier = function (Identifier) {
      var Result = null;
      Result = $lt18.FindIdentifier.call(this,Identifier);
      if ((Result !== null) || (this.GroupScope === null)) return Result;
      Result = this.GroupScope.FindIdentifier(Identifier);
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      $lt18.IterateElements.call(this,aName,StartScope,OnIterateElement,Data,Abort);
      if (Abort.get()) return;
      if (this.GroupScope === null) return;
      this.GroupScope.IterateElements(aName,StartScope,OnIterateElement,Data,Abort);
    };
    this.GetSelfScope = function () {
      var Result = null;
      var Proc = null;
      var El = null;
      Result = this;
      do {
        if (Result.ClassRecScope !== null) return Result;
        Proc = Result.FElement;
        El = Proc.FParent;
        do {
          if (El === null) return null;
          if ($lt89.isPrototypeOf(El)) break;
          El = El.FParent;
        } while (!false);
        Proc = rtl.as(El.FParent,$lt90);
        Result = Proc.FData;
      } while (!false);
      return Result;
    };
    this.Destroy = function () {
      $lp3({p: this, get: function () {
          return this.p.References;
        }, set: function (v) {
          this.p.References = v;
        }});
      $lp3({p: this, get: function () {
          return this.p.GroupScope;
        }, set: function (v) {
          this.p.GroupScope = v;
        }});
      this.NestedMembersScope = null;
      $lt27.Destroy.call(this);
      this.SelfArg = null;
    };
    this.AddReference = function (El, Access) {
      var Result = null;
      if (this.References === null) this.References = $lt12.$create("Create$1",[this]);
      Result = this.References.Add(El,Access);
      return Result;
    };
  });
  rtl.createClass(this,"TPasPropertyScope",$lt18,function () {
    $lt38 = this;
    this.$init = function () {
      $lt18.$init.call(this);
      this.AncestorProp = null;
    };
    this.$final = function () {
      this.AncestorProp = undefined;
      $lt18.$final.call(this);
    };
    this.Destroy = function () {
      this.AncestorProp = null;
      $lt18.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasExceptOnScope",$lt18,function () {
    $lt39 = this;
  });
  $lt40 = this.TPasWithExprScopeFlag = {"0": "wesfNeedTmpVar", wesfNeedTmpVar: 0, "1": "wesfOnlyTypeMembers", wesfOnlyTypeMembers: 1, "2": "wesfIsClassOf", wesfIsClassOf: 2, "3": "wesfConstParent", wesfConstParent: 3};
  rtl.createClass(this,"TPasWithExprScope",$lt13,function () {
    $lt41 = this;
    this.$init = function () {
      $lt13.$init.call(this);
      this.WithScope = null;
      this.Index = 0;
      this.Expr = null;
      this.Scope = null;
      this.ClassRecScope = null;
      this.Flags = {};
    };
    this.$final = function () {
      this.WithScope = undefined;
      this.Expr = undefined;
      this.Scope = undefined;
      this.ClassRecScope = undefined;
      this.Flags = undefined;
      $lt13.$final.call(this);
    };
    this.IsStoredInElement = function () {
      var Result = false;
      Result = false;
      return Result;
    };
    this.FreeOnPop = function () {
      var Result = false;
      Result = false;
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      this.Scope.IterateElements(aName,StartScope,OnIterateElement,Data,Abort);
    };
    this.Destroy = function () {
      $lp3({p: this, get: function () {
          return this.p.Scope;
        }, set: function (v) {
          this.p.Scope = v;
        }});
      $lt84.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasWithScope",$lt13,function () {
    $lt42 = this;
    this.$init = function () {
      $lt13.$init.call(this);
      this.ExpressionScopes = null;
    };
    this.$final = function () {
      this.ExpressionScopes = undefined;
      $lt13.$final.call(this);
    };
    this.Create$1 = function () {
      $lt84.Create$1.call(this);
      this.ExpressionScopes = $lt91.$create("Create$3",[true]);
      return this;
    };
    this.Destroy = function () {
      $lp3({p: this, get: function () {
          return this.p.ExpressionScopes;
        }, set: function (v) {
          this.p.ExpressionScopes = v;
        }});
      $lt84.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasForLoopScope",$lt13,function () {
    $lt43 = this;
    this.$init = function () {
      $lt13.$init.call(this);
      this.GetEnumerator = null;
      this.MoveNext = null;
      this.Current = null;
    };
    this.$final = function () {
      this.GetEnumerator = undefined;
      this.MoveNext = undefined;
      this.Current = undefined;
      $lt13.$final.call(this);
    };
  });
  rtl.createClass(this,"TPasSubExprScope",$lt18,function () {
    $lt44 = this;
    this.IsStoredInElement = function () {
      var Result = false;
      Result = false;
      return Result;
    };
  });
  rtl.createClass(this,"TPasDotBaseScope",$lt44,function () {
    $lt45 = this;
    this.$init = function () {
      $lt44.$init.call(this);
      this.GroupScope = null;
      this.OnlyTypeMembers = false;
      this.ConstParent = false;
    };
    this.$final = function () {
      this.GroupScope = undefined;
      $lt44.$final.call(this);
    };
    this.FindIdentifier = function (Identifier) {
      var Result = null;
      Result = this.GroupScope.FindIdentifier(Identifier);
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      this.GroupScope.IterateElements(aName,StartScope,OnIterateElement,Data,Abort);
    };
    this.Destroy = function () {
      $lp3({p: this, get: function () {
          return this.p.GroupScope;
        }, set: function (v) {
          this.p.GroupScope = v;
        }});
      $lt18.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPasModuleDotScope",$lt45,function () {
    $lt46 = this;
    this.$init = function () {
      $lt45.$init.call(this);
      this.FModule = null;
      this.ImplementationScope = null;
      this.InterfaceScope = null;
      this.SystemScope = null;
    };
    this.$final = function () {
      this.FModule = undefined;
      this.ImplementationScope = undefined;
      this.InterfaceScope = undefined;
      this.SystemScope = undefined;
      $lt45.$final.call(this);
    };
    this.OnInternalIterate = function (El, ElScope, StartScope, Data, Abort) {
      if ((El.$class.ClassType() === $lt86) || (El.$class.ClassType() === $lt87)) return;
      Data.OnIterate(El,ElScope,StartScope,Data.Data,Abort);
    };
    this.SetModule = function (AValue) {
      if (this.FModule === AValue) return;
      this.FModule = AValue;
    };
    this.Destroy = function () {
      this.SetModule(null);
      $lt45.Destroy.call(this);
    };
    this.FindIdentifier = function (Identifier) {
      var $Self = this;
      var Result = null;
      function Find(Scope) {
        var Result$1 = false;
        var Found = null;
        var C = null;
        if (Scope === null) return false;
        Found = Scope.FindLocalIdentifier(Identifier);
        Result = Found;
        if (Found === null) return false;
        C = Found.FElement.$class.ClassType();
        Result$1 = (C !== $lt86) && (C !== $lt87);
        return Result$1;
      };
      Result = null;
      if (Find(this.ImplementationScope)) return Result;
      if (Find(this.InterfaceScope)) return Result;
      Find(this.SystemScope);
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      var $Self = this;
      var FilterData = $lt20.$new();
      function Iterate(Scope) {
        var Result = false;
        if (Scope === null) return false;
        Scope.IterateLocalElements(aName,StartScope,rtl.createCallback($Self,"OnInternalIterate"),FilterData,Abort);
        Result = Abort.get();
        return Result;
      };
      FilterData.OnIterate = OnIterateElement;
      FilterData.Data = Data;
      if (Iterate(this.ImplementationScope)) return;
      if (Iterate(this.InterfaceScope)) return;
      Iterate(this.SystemScope);
    };
  });
  rtl.createClass(this,"TPasDotEnumTypeScope",$lt45,function () {
    $lt47 = this;
    this.$init = function () {
      $lt45.$init.call(this);
      this.EnumScope = null;
    };
    this.$final = function () {
      this.EnumScope = undefined;
      $lt45.$final.call(this);
    };
    this.FindIdentifier = function (Identifier) {
      var Result = null;
      Result = this.EnumScope.FindLocalIdentifier(Identifier);
      if (Result !== null) return Result;
      Result = $lt45.FindIdentifier.call(this,Identifier);
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      this.EnumScope.IterateElements(aName,StartScope,OnIterateElement,Data,Abort);
      if (Abort.get()) return;
      $lt45.IterateElements.call(this,aName,StartScope,OnIterateElement,Data,Abort);
    };
  });
  rtl.createClass(this,"TPasDotClassOrRecordScope",$lt45,function () {
    $lt48 = this;
    this.$init = function () {
      $lt45.$init.call(this);
      this.ClassRecScope = null;
    };
    this.$final = function () {
      this.ClassRecScope = undefined;
      $lt45.$final.call(this);
    };
  });
  rtl.createClass(this,"TPasDotClassScope",$lt48,function () {
    $lt49 = this;
    this.$init = function () {
      $lt48.$init.call(this);
      this.IsClassOf = false;
    };
  });
  rtl.createClass(this,"TPasInheritedScope",$lt48,function () {
    $lt50 = this;
    this.$init = function () {
      $lt48.$init.call(this);
      this.AncestorScope = null;
    };
    this.$final = function () {
      this.AncestorScope = undefined;
      $lt48.$final.call(this);
    };
    this.FindIdentifier = function (Identifier) {
      var Result = null;
      var aClassScope = null;
      Result = $lt45.FindIdentifier.call(this,Identifier);
      if (Result !== null) return Result;
      aClassScope = this.AncestorScope;
      while (aClassScope !== null) {
        Result = aClassScope.FindIdentifier(Identifier);
        if (Result !== null) return Result;
        aClassScope = aClassScope.AncestorScope;
      };
      return Result;
    };
    this.IterateElements = function (aName, StartScope, OnIterateElement, Data, Abort) {
      var aClassScope = null;
      $lt45.IterateElements.call(this,aName,StartScope,OnIterateElement,Data,Abort);
      if (Abort.get()) return;
      aClassScope = this.AncestorScope;
      while (aClassScope !== null) {
        aClassScope.IterateElements(aName,StartScope,OnIterateElement,Data,Abort);
        if (Abort.get()) return;
        aClassScope = aClassScope.AncestorScope;
      };
    };
  });
  rtl.createClass(this,"TPasDotHelperScope",$lt45,function () {
    $lt51 = this;
  });
  $lt52 = this.TResolvedReferenceFlag = {"0": "rrfDotScope", rrfDotScope: 0, "1": "rrfImplicitCallWithoutParams", rrfImplicitCallWithoutParams: 1, "2": "rrfNoImplicitCallWithoutParams", rrfNoImplicitCallWithoutParams: 2, "3": "rrfNewInstance", rrfNewInstance: 3, "4": "rrfFreeInstance", rrfFreeInstance: 4, "5": "rrfVMT", rrfVMT: 5, "6": "rrfConstInherited", rrfConstInherited: 6, "7": "rrfUseFields", rrfUseFields: 7};
  rtl.createClass(this,"TResolvedRefContext",$lt80,function () {
    $lt53 = this;
  });
  $lt54 = this.TResolvedRefAccess = {"0": "rraNone", rraNone: 0, "1": "rraRead", rraRead: 1, "2": "rraAssign", rraAssign: 2, "3": "rraReadAndAssign", rraReadAndAssign: 3, "4": "rraVarParam", rraVarParam: 4, "5": "rraOutParam", rraOutParam: 5, "6": "rraParamToUnknownProc", rraParamToUnknownProc: 6};
  this.rraAllRead = rtl.createSet(1,3,4);
  this.ResolvedToPSRefAccess = [0,1,2,3,3,2,0];
  rtl.createClass(this,"TResolvedReference",$lt84,function () {
    $lt55 = this;
    this.$init = function () {
      $lt84.$init.call(this);
      this.FDeclaration = null;
      this.Flags = {};
      this.Access = 0;
      this.Context = null;
      this.WithExprScope = null;
    };
    this.$final = function () {
      this.FDeclaration = undefined;
      this.Flags = undefined;
      this.Context = undefined;
      this.WithExprScope = undefined;
      $lt84.$final.call(this);
    };
    this.SetDeclaration = function (AValue) {
      if (this.FDeclaration === AValue) return;
      this.FDeclaration = AValue;
    };
    this.Destroy = function () {
      this.SetDeclaration(null);
      $lp3({p: this, get: function () {
          return this.p.Context;
        }, set: function (v) {
          this.p.Context = v;
        }});
      $lt84.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TResolvedRefCtxConstructor",$lt53,function () {
    $lt56 = this;
    this.$init = function () {
      $lt53.$init.call(this);
      this.Typ = null;
    };
    this.$final = function () {
      this.Typ = undefined;
      $lt53.$final.call(this);
    };
  });
  rtl.createClass(this,"TResolvedRefCtxAttrProc",$lt53,function () {
    $lt57 = this;
    this.$init = function () {
      $lt53.$init.call(this);
      this.Proc = null;
    };
    this.$final = function () {
      this.Proc = undefined;
      $lt53.$final.call(this);
    };
  });
  $lt58 = this.TPasResolverResultFlag = {"0": "rrfReadable", rrfReadable: 0, "1": "rrfWritable", rrfWritable: 1, "2": "rrfAssignable", rrfAssignable: 2, "3": "rrfCanBeStatement", rrfCanBeStatement: 3};
  rtl.recNewT(this,"TPasResolverResult",function () {
    $lt59 = this;
    this.BaseType = 0;
    this.SubType = 0;
    this.IdentEl = null;
    this.LoTypeEl = null;
    this.HiTypeEl = null;
    this.ExprEl = null;
    this.$new = function () {
      var r = Object.create(this);
      r.Flags = {};
      return r;
    };
    this.$eq = function (b) {
      return (this.BaseType === b.BaseType) && (this.SubType === b.SubType) && (this.IdentEl === b.IdentEl) && (this.LoTypeEl === b.LoTypeEl) && (this.HiTypeEl === b.HiTypeEl) && (this.ExprEl === b.ExprEl) && rtl.eqSet(this.Flags,b.Flags);
    };
    this.$assign = function (s) {
      this.BaseType = s.BaseType;
      this.SubType = s.SubType;
      this.IdentEl = s.IdentEl;
      this.LoTypeEl = s.LoTypeEl;
      this.HiTypeEl = s.HiTypeEl;
      this.ExprEl = s.ExprEl;
      this.Flags = rtl.refSet(s.Flags);
      return this;
    };
  });
  $lt60 = this.TPasResolverComputeFlag = {"0": "rcSetReferenceFlags", rcSetReferenceFlags: 0, "1": "rcNoImplicitProc", rcNoImplicitProc: 1, "2": "rcNoImplicitProcType", rcNoImplicitProcType: 2, "3": "rcConstant", rcConstant: 3, "4": "rcType", rcType: 4, "5": "rcCall", rcCall: 5};
  rtl.createClass(this,"TResElDataBuiltInSymbol",$lt84,function () {
    $lt61 = this;
  });
  rtl.createClass(this,"TResElDataBaseType",$lt61,function () {
    $lt62 = this;
    this.$init = function () {
      $lt61.$init.call(this);
      this.BaseType = 0;
    };
  });
  $lt63 = this.TBuiltInProcFlag = {"0": "bipfCanBeStatement", bipfCanBeStatement: 0};
  rtl.createClass(this,"TResElDataBuiltInProc",$lt61,function () {
    $lt64 = this;
    this.$init = function () {
      $lt61.$init.call(this);
      this.Proc = null;
      this.Signature = "";
      this.BuiltIn = 0;
      this.GetCallCompatibility = null;
      this.GetCallResult = null;
      this.Eval = null;
      this.FinishParamsExpression = null;
      this.Flags = {};
    };
    this.$final = function () {
      this.Proc = undefined;
      this.GetCallCompatibility = undefined;
      this.GetCallResult = undefined;
      this.Eval = undefined;
      this.FinishParamsExpression = undefined;
      this.Flags = undefined;
      $lt61.$final.call(this);
    };
    this.Destroy = function () {
      this.Proc = null;
      $lt84.Destroy.call(this);
    };
  });
  rtl.recNewT(this,"TPRFindData",function () {
    $lt65 = this;
    this.ErrorPosEl = null;
    this.Found = null;
    this.ElScope = null;
    this.StartScope = null;
    this.SkipGenerics = false;
    this.$eq = function (b) {
      return (this.ErrorPosEl === b.ErrorPosEl) && (this.Found === b.Found) && (this.ElScope === b.ElScope) && (this.StartScope === b.StartScope) && (this.SkipGenerics === b.SkipGenerics);
    };
    this.$assign = function (s) {
      this.ErrorPosEl = s.ErrorPosEl;
      this.Found = s.Found;
      this.ElScope = s.ElScope;
      this.StartScope = s.StartScope;
      this.SkipGenerics = s.SkipGenerics;
      return this;
    };
  });
  rtl.recNewT(this,"TPRFindGenericData",function () {
    $lt66 = this;
    this.TemplateCount = 0;
    this.LastProc = null;
    this.$new = function () {
      var r = Object.create(this);
      r.Find = $lt65.$new();
      return r;
    };
    this.$eq = function (b) {
      return this.Find.$eq(b.Find) && (this.TemplateCount === b.TemplateCount) && (this.LastProc === b.LastProc);
    };
    this.$assign = function (s) {
      this.Find.$assign(s.Find);
      this.TemplateCount = s.TemplateCount;
      this.LastProc = s.LastProc;
      return this;
    };
  });
  $lt67 = this.TPasResolverOption = {"0": "proFixCaseOfOverrides", proFixCaseOfOverrides: 0, "1": "proClassPropertyNonStatic", proClassPropertyNonStatic: 1, "2": "proPropertyAsVarParam", proPropertyAsVarParam: 2, "3": "proClassOfIs", proClassOfIs: 3, "4": "proExtClassInstanceNoTypeMembers", proExtClassInstanceNoTypeMembers: 4, "5": "proOpenAsDynArrays", proOpenAsDynArrays: 5, "6": "proProcTypeWithoutIsNested", proProcTypeWithoutIsNested: 6, "7": "proMethodAddrAsPointer", proMethodAddrAsPointer: 7, "8": "proSafecallAllowsDefault", proSafecallAllowsDefault: 8};
  rtl.createClass(this,"TPasResolverHub",$lt80,function () {
    $lt68 = this;
    this.$init = function () {
      $lt80.$init.call(this);
      this.FOwner = null;
      this.FinishedInterfaceCount = 0;
    };
    this.$final = function () {
      this.FOwner = undefined;
      $lt80.$final.call(this);
    };
    this.Create$1 = function (TheOwner) {
      this.FOwner = TheOwner;
      return this;
    };
    this.Reset = function () {
      this.FinishedInterfaceCount = 0;
    };
  });
  $lt69 = this.TPasResolverStep = {"0": "prsInit", prsInit: 0, "1": "prsParsing", prsParsing: 1, "2": "prsFinishingModule", prsFinishingModule: 2, "3": "prsFinishedModule", prsFinishedModule: 3};
  $lt70 = this.TPRResolveAlias = {"0": "prraNone", prraNone: 0, "1": "prraSimple", prraSimple: 1, "2": "prraAlias", prraAlias: 2};
  $lt71 = this.TPRProcTypeDescFlag = {"0": "prptdUseName", prptdUseName: 0, "1": "prptdAddPaths", prptdAddPaths: 1, "2": "prptdResolveSimpleAlias", prptdResolveSimpleAlias: 2};
  rtl.recNewT(this,"TPRParentParams",function () {
    $lt72 = this;
    this.InlineSpec = null;
    this.Params = null;
    this.$eq = function (b) {
      return (this.InlineSpec === b.InlineSpec) && (this.Params === b.Params);
    };
    this.$assign = function (s) {
      this.InlineSpec = s.InlineSpec;
      this.Params = s.Params;
      return this;
    };
  });
  $lt73 = this.TPRTemplateCompOp = {"0": "prtcoAssignToTempl", prtcoAssignToTempl: 0, "1": "prtcoAssignFromTempl", prtcoAssignFromTempl: 1, "2": "prtcoEqual", prtcoEqual: 2};
  rtl.createClass(this,"TPasResolver",$lt92,function () {
    $lt74 = this;
    $lt75 = this.TResolveDataListKind = {"0": "lkBuiltIn", lkBuiltIn: 0, "1": "lkModule", lkModule: 1};
    this.cExact = 0;
    this.cGenericExact = 0 + 1;
    this.cAliasExact = 1 + 1;
    this.cCompatible = 2 + 1;
    this.cIntToIntConversion = $lt.btRange;
    this.cFloatToFloatConversion = 2 * 37;
    this.cTypeConversion = 0 + 10000;
    this.cLossyConversion = 0 + 100000;
    this.cIntToFloatConversion = 0 + 400000;
    this.cIncompatible = 2147483647;
    rtl.recNewT(this,"TFindCallElData",function () {
      $lt76 = this;
      this.Params = null;
      this.TemplCnt = 0;
      this.Found = null;
      this.LastProc = null;
      this.ElScope = null;
      this.StartScope = null;
      this.Distance = 0;
      this.Count = 0;
      this.List = null;
      this.$eq = function (b) {
        return (this.Params === b.Params) && (this.TemplCnt === b.TemplCnt) && (this.Found === b.Found) && (this.LastProc === b.LastProc) && (this.ElScope === b.ElScope) && (this.StartScope === b.StartScope) && (this.Distance === b.Distance) && (this.Count === b.Count) && (this.List === b.List);
      };
      this.$assign = function (s) {
        this.Params = s.Params;
        this.TemplCnt = s.TemplCnt;
        this.Found = s.Found;
        this.LastProc = s.LastProc;
        this.ElScope = s.ElScope;
        this.StartScope = s.StartScope;
        this.Distance = s.Distance;
        this.Count = s.Count;
        this.List = s.List;
        return this;
      };
    });
    $lt77 = this.TFindProcKind = {"0": "fpkProcDeclaration", fpkProcDeclaration: 0, "1": "fpkProc", fpkProc: 1, "2": "fpkMethod", fpkMethod: 2};
    rtl.recNewT(this,"TFindProcData",function () {
      $lt78 = this;
      this.Proc = null;
      this.Args = null;
      this.Kind = 0;
      this.FoundOverloadModifier = false;
      this.FoundInSameScope = 0;
      this.Found = null;
      this.ElScope = null;
      this.StartScope = null;
      this.FoundNonProc = null;
      this.$eq = function (b) {
        return (this.Proc === b.Proc) && (this.Args === b.Args) && (this.Kind === b.Kind) && (this.FoundOverloadModifier === b.FoundOverloadModifier) && (this.FoundInSameScope === b.FoundInSameScope) && (this.Found === b.Found) && (this.ElScope === b.ElScope) && (this.StartScope === b.StartScope) && (this.FoundNonProc === b.FoundNonProc);
      };
      this.$assign = function (s) {
        this.Proc = s.Proc;
        this.Args = s.Args;
        this.Kind = s.Kind;
        this.FoundOverloadModifier = s.FoundOverloadModifier;
        this.FoundInSameScope = s.FoundInSameScope;
        this.Found = s.Found;
        this.ElScope = s.ElScope;
        this.StartScope = s.StartScope;
        this.FoundNonProc = s.FoundNonProc;
        return this;
      };
    });
    rtl.recNewT(this,"TScopeStashState",function () {
      $lt79 = this;
      this.ScopeCount = 0;
      this.StashCount = 0;
      this.$eq = function (b) {
        return (this.ScopeCount === b.ScopeCount) && (this.StashCount === b.StashCount);
      };
      this.$assign = function (s) {
        this.ScopeCount = s.ScopeCount;
        this.StashCount = s.StashCount;
        return this;
      };
    });
    this.$init = function () {
      $lt92.$init.call(this);
      this.FActiveHelpers = [];
      this.FAnonymousElTypePostfix = "";
      this.FBaseTypeChar = 0;
      this.FBaseTypeExtended = 0;
      this.FBaseTypeLength = 0;
      this.FBaseTypes = rtl.arraySetLength(null,null,38);
      this.FBaseTypeString = 0;
      this.FBuiltInProcs = rtl.arraySetLength(null,null,34);
      this.FDefaultNameSpace = "";
      this.FDefaultScope = null;
      this.FDynArrayMaxIndex = 0;
      this.FDynArrayMinIndex = 0;
      this.FFinishedInterfaceIndex = 0;
      this.FHub = null;
      this.FLastCreatedData = rtl.arraySetLength(null,null,2);
      this.FLastElement = null;
      this.FLastMsg = "";
      this.FLastMsgArgs = [];
      this.FLastMsgId = 0;
      this.FLastMsgNumber = 0;
      this.FLastMsgPattern = "";
      this.FLastMsgType = 0;
      this.FLastSourcePos = $lt82.$new();
      this.FOptions = {};
      this.FPendingForwardProcs = null;
      this.FRootElement = null;
      this.FScopeClass_Array = null;
      this.FScopeClass_Class = null;
      this.FScopeClass_InitialFinalization = null;
      this.FScopeClass_Module = null;
      this.FScopeClass_Proc = null;
      this.FScopeClass_ProcType = null;
      this.FScopeClass_Record = null;
      this.FScopeClass_Section = null;
      this.FScopeClass_WithExpr = null;
      this.FScopeCount = 0;
      this.FScopes = [];
      this.FStep = 0;
      this.FStoreSrcColumns = false;
      this.FStashScopeCount = 0;
      this.FStashScopes = [];
      this.FTopScope = null;
      this.cTGUIDToString = 0;
      this.cStringToTGUID = 0;
      this.cInterfaceToTGUID = 0;
      this.cInterfaceToString = 0;
      this.fExprEvaluator = null;
    };
    this.$final = function () {
      this.FActiveHelpers = undefined;
      this.FBaseTypes = undefined;
      this.FBuiltInProcs = undefined;
      this.FDefaultScope = undefined;
      this.FHub = undefined;
      this.FLastCreatedData = undefined;
      this.FLastElement = undefined;
      this.FLastMsgArgs = undefined;
      this.FLastSourcePos = undefined;
      this.FOptions = undefined;
      this.FPendingForwardProcs = undefined;
      this.FRootElement = undefined;
      this.FScopeClass_Array = undefined;
      this.FScopeClass_Class = undefined;
      this.FScopeClass_InitialFinalization = undefined;
      this.FScopeClass_Module = undefined;
      this.FScopeClass_Proc = undefined;
      this.FScopeClass_ProcType = undefined;
      this.FScopeClass_Record = undefined;
      this.FScopeClass_Section = undefined;
      this.FScopeClass_WithExpr = undefined;
      this.FScopes = undefined;
      this.FStashScopes = undefined;
      this.FTopScope = undefined;
      this.fExprEvaluator = undefined;
      $lt92.$final.call(this);
    };
    this.GetBaseTypes = function (bt) {
      var Result = null;
      Result = this.FBaseTypes[bt];
      return Result;
    };
    this.GetScopes = function (Index) {
      var Result = null;
      Result = this.FScopes[Index];
      return Result;
    };
    this.ClearResolveDataList = function (Kind) {
      var El = null;
      var RData = null;
      while (this.FLastCreatedData[Kind] !== null) {
        RData = this.FLastCreatedData[Kind];
        El = RData.FElement;
        El.FData = null;
        this.FLastCreatedData[Kind] = RData.Next;
        RData = rtl.freeLoc(RData);
      };
    };
    this.GetBaseTypeNames = function (bt) {
      var Result = "";
      if (this.FBaseTypes[bt] !== null) {
        Result = this.FBaseTypes[bt].FName}
       else Result = $mod.ResBaseTypeNames[bt];
      return Result;
    };
    this.GetBuiltInProcs = function (bp) {
      var Result = null;
      Result = this.FBuiltInProcs[bp];
      return Result;
    };
    this.OnFindFirst_PreferNoParams = function (El, ElScope, StartScope, FindFirstElementData, Abort) {
      var ok = false;
      var Proc = null;
      var Templates = null;
      ok = true;
      if ($lt90.isPrototypeOf(El)) {
        Proc = El;
        if (FindFirstElementData.SkipGenerics) {
          Templates = this.GetProcTemplateTypes(Proc);
          if ((Templates !== null) && (Templates.FCount > 0)) ok = false;
        };
        if (ok && this.ProcNeedsParams(Proc.ProcType)) ok = false;
      } else if (FindFirstElementData.SkipGenerics) {
        if ($lt93.isPrototypeOf(El)) {
          if (this.GetTypeParameterCount(El) > 0) ok = false;
        };
      };
      if (ok || (FindFirstElementData.Found === null)) {
        FindFirstElementData.Found = El;
        FindFirstElementData.ElScope = ElScope;
        FindFirstElementData.StartScope = StartScope;
      };
      if (ok) Abort.set(true);
    };
    this.OnFindFirst = function (El, ElScope, StartScope, FindFirstElementData, Abort) {
      FindFirstElementData.Found = El;
      FindFirstElementData.ElScope = ElScope;
      FindFirstElementData.StartScope = StartScope;
      Abort.set(true);
    };
    this.OnFindFirst_GenericEl = function (El, ElScope, StartScope, FindFirstGenericData, Abort) {
      var GenericTemplateTypes = null;
      var Proc = null;
      var ProcScope = null;
      Proc = null;
      if ($lt93.isPrototypeOf(El)) {
        GenericTemplateTypes = El.GenericTemplateTypes}
       else if ($lt90.isPrototypeOf(El)) {
        Proc = El;
        ProcScope = rtl.as(Proc.FData,$lt37);
        if (ProcScope.DeclarationProc !== null) {
          Proc = ProcScope.DeclarationProc;
          El = Proc;
        };
        if (FindFirstGenericData.LastProc !== null) {
          if (!this.IsProcOverloading(FindFirstGenericData.LastProc,Proc)) {
            Abort.set(true);
            return;
          };
        };
        FindFirstGenericData.LastProc = Proc;
        GenericTemplateTypes = this.GetProcTemplateTypes(Proc);
      } else return;
      if (GenericTemplateTypes === null) return;
      if (GenericTemplateTypes.FCount !== FindFirstGenericData.TemplateCount) return;
      if (FindFirstGenericData.Find.Found !== null) {
        if (this.ProcNeedsParams(Proc.ProcType)) {
          return;
        };
      };
      FindFirstGenericData.Find.Found = El;
      FindFirstGenericData.Find.ElScope = ElScope;
      FindFirstGenericData.Find.StartScope = StartScope;
      if (Proc !== null) {
        if ((3 in ProcScope.ModeSwitches) && !this.IsProcOverload(Proc)) {}
        else if (this.ProcNeedsParams(Proc.ProcType)) {
          return;
        };
      };
      Abort.set(true);
    };
    this.OnFindCallElements = function (El, ElScope, StartScope, FindCallElData, Abort) {
      var Proc = null;
      var PrevProc = null;
      var Distance = 0;
      var BuiltInProc = null;
      var CandidateFound = false;
      var VarType = null;
      var TypeEl = null;
      var C = null;
      var ProcScope = null;
      var Templates = null;
      CandidateFound = false;
      if ($lt90.isPrototypeOf(El)) {
        Proc = El;
        PrevProc = null;
        if (FindCallElData.Found === Proc) {
          return;
        };
        ProcScope = rtl.as(Proc.FData,$lt37);
        if (ProcScope.DeclarationProc !== null) {
          Proc = ProcScope.DeclarationProc;
          El = Proc;
        };
        if ((3 in ProcScope.ModeSwitches) && !this.IsProcOverload(Proc)) {
          Abort.set(true);
          if (FindCallElData.LastProc !== null) return;
        };
        if ($lt90.isPrototypeOf(FindCallElData.Found) && this.IsProcOverride(Proc,FindCallElData.Found)) {
          FindCallElData.LastProc = Proc;
          return;
        };
        if (FindCallElData.LastProc !== null) {
          if (!this.IsProcOverloading(FindCallElData.LastProc,Proc)) {
            Abort.set(true);
            return;
          };
        };
        if ($lt90.isPrototypeOf(FindCallElData.Found)) {
          PrevProc = FindCallElData.Found;
          if (this.IsProcOverride(Proc,PrevProc.FData.OverriddenProc)) {
            FindCallElData.LastProc = Proc;
            return;
          };
          if ((FindCallElData.Distance === 0) && (PrevProc.FParent !== Proc.FParent) && (PrevProc.FParent.$class.ClassType() === $lt94)) {
            Abort.set(true);
            return;
          };
        };
        CandidateFound = true;
        if (FindCallElData.TemplCnt > 0) {
          Templates = this.GetProcTemplateTypes(Proc);
          if ((Templates === null) || (Templates.FCount !== FindCallElData.TemplCnt)) {
            Distance = 2147483647}
           else Distance = this.CheckCallProcCompatibility(Proc.ProcType,FindCallElData.Params,false,false);
        } else Distance = this.CheckCallProcCompatibility(Proc.ProcType,FindCallElData.Params,false,false);
        FindCallElData.LastProc = Proc;
      } else if ($lt95.isPrototypeOf(El)) {
        TypeEl = this.ResolveAliasType(El,true);
        C = TypeEl.$class.ClassType();
        if (FindCallElData.TemplCnt !== 0) {
          if (!C.InheritsFrom($lt93) || (this.GetTypeParameterCount(TypeEl) !== FindCallElData.TemplCnt)) return;
        };
        if (C === $lt83) {
          if (TypeEl.FData.$class.ClassType() === $lt64) {
            BuiltInProc = TypeEl.FData;
            if ((BuiltInProc.BuiltIn in rtl.createSet(17,18)) && ((BuiltInProc.BuiltIn === 17) === this.ParentNeedsExprResult(FindCallElData.Params))) {
              return;
            };
            Distance = BuiltInProc.GetCallCompatibility(BuiltInProc,FindCallElData.Params,false);
            CandidateFound = true;
          } else if ($lt62.isPrototypeOf(TypeEl.FData)) {
            Abort.set(true);
            if (FindCallElData.Found !== null) return;
            Distance = this.CheckTypeCast(El,FindCallElData.Params,false);
            CandidateFound = true;
          };
        } else if ((C === $lt94) || (C === $lt96) || (C === $lt97) || (C === $lt98) || (C === $lt99) || (C === $lt100) || (C === $lt101) || (C === $lt102) || (C === $lt103) || (C === $lt104)) {
          Abort.set(true);
          if (FindCallElData.Found !== null) return;
          Distance = this.CheckTypeCast(El,FindCallElData.Params,false);
          CandidateFound = true;
        };
      } else if ($lt105.isPrototypeOf(El)) {
        Abort.set(true);
        if (FindCallElData.Found !== null) return;
        if (FindCallElData.TemplCnt !== 0) return;
        if (El.$class.ClassType() === $lt88) {
          VarType = this.GetPasPropertyType(El)}
         else VarType = El.VarType;
        VarType = this.ResolveAliasType(VarType,true);
        if ($lt100.isPrototypeOf(VarType)) {
          Distance = this.CheckCallProcCompatibility(VarType,FindCallElData.Params,false,false);
          CandidateFound = true;
        };
      } else if (El.$class.ClassType() === $lt106) {
        Abort.set(true);
        if (FindCallElData.Found !== null) return;
        if (FindCallElData.TemplCnt !== 0) return;
        VarType = this.ResolveAliasType(El.ArgType,true);
        if ($lt100.isPrototypeOf(VarType)) {
          Distance = this.CheckCallProcCompatibility(VarType,FindCallElData.Params,false,false);
          CandidateFound = true;
        };
      };
      if (!CandidateFound) {
        Abort.set(true);
        if (FindCallElData.Found === null) {
          this.RaiseMsg(20170216151525,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"(",18,El.ElementTypeName()),FindCallElData.Params);
        };
        return;
      };
      if ((FindCallElData.Found === null) || ((FindCallElData.Distance === 2147483647) && (Distance < 2147483647))) {
        FindCallElData.Found = El;
        FindCallElData.ElScope = ElScope;
        FindCallElData.StartScope = StartScope;
        FindCallElData.Distance = Distance;
        FindCallElData.Count = 1;
        if (FindCallElData.List !== null) {
          FindCallElData.List.Clear();
          FindCallElData.List.Add(El);
        };
      } else if (Distance === 2147483647) {}
      else if ((FindCallElData.Distance === Distance) || ((Distance >= 100000) && (FindCallElData.Distance >= 100000) && ((Distance >= 400000) === (FindCallElData.Distance >= 400000)))) {
        FindCallElData.Count += 1;
        if (FindCallElData.List !== null) {
          if (FindCallElData.List.IndexOf(El) >= 0) {
            this.RaiseInternalError(20160924230805,"");
          };
          FindCallElData.List.Add(El);
        };
      } else if (Distance < FindCallElData.Distance) {
        if ((Distance < 100000) || ((Distance >= 400000) !== (FindCallElData.Distance >= 400000))) {
          FindCallElData.Count = 1;
          if (FindCallElData.List !== null) FindCallElData.List.Clear();
        } else {
          FindCallElData.Count += 1;
        };
        FindCallElData.Found = El;
        FindCallElData.ElScope = ElScope;
        FindCallElData.StartScope = StartScope;
        FindCallElData.Distance = Distance;
        if (FindCallElData.List !== null) FindCallElData.List.Add(El);
      };
    };
    this.OnFindProc = function (El, ElScope, StartScope, FindProcData, Abort) {
      var $Self = this;
      var Proc = null;
      var DataProc = null;
      var Store = false;
      var SameScope = false;
      var ProcScope = null;
      var CurResolver = null;
      function CountProcInSameScope() {
        FindProcData.FoundInSameScope += 1;
        if (Proc.IsOverload()) FindProcData.FoundOverloadModifier = true;
      };
      DataProc = FindProcData.Proc;
      if (!$lt90.isPrototypeOf(El)) {
        if ($lt105.isPrototypeOf(El)) {
          if (El.Visibility === 6) return;
          if ((El.Visibility === 1) && (El.GetModule() !== StartScope.FElement.GetModule())) return;
        };
        FindProcData.FoundNonProc = El;
        Abort.set(true);
        if ($lt64.isPrototypeOf(El.FData)) {
          if (FindProcData.FoundOverloadModifier || this.IsProcOverload(DataProc)) return;
        };
        var $tmp = FindProcData.Kind;
        if ($tmp === 1) {
          if (DataProc.GetModule() === El.GetModule()) {
            this.RaiseMsg(20170216151649,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,El.FName,18,this.GetElementSourcePosStr(El)),DataProc.ProcType)}
           else {
            if ($lt107.isPrototypeOf(DataProc.FParent)) {
              if (El.Visibility === 6) {}
              else if ((El.Visibility === 1) && (El.GetModule() !== DataProc.GetModule())) {}
              else this.LogMsg(20171118205344,4,3112,rtl.getResStr($lm5,"sFunctionHidesIdentifier"),$lp6(18,this.GetElementSourcePosStr(El)),DataProc.ProcType);
            };
          }}
         else if ($tmp === 2) {
          ProcScope = DataProc.FData;
          CurResolver = rtl.as(ProcScope.Owner,$lt74);
          if (3 in CurResolver.FCurrentParser.GetCurrentModeSwitches()) {}
          else this.RaiseMsg(20171118232543,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,El.FName,18,this.GetElementSourcePosStr(El)),DataProc.ProcType);
        };
        return;
      };
      Proc = El;
      if (El === DataProc) {
        CountProcInSameScope();
        return;
      };
      Store = this.CheckProcOverloadCompatibility(DataProc,Proc);
      var $tmp1 = FindProcData.Kind;
      if ($tmp1 === 1) {
        SameScope = DataProc.GetModule() === Proc.GetModule()}
       else if ($tmp1 === 2) {
        SameScope = DataProc.FParent === Proc.FParent}
       else {
        this.RaiseNotYetImplemented(20191010123525,DataProc,"");
      };
      if (SameScope) {
        if (2 in this.FCurrentParser.GetCurrentModeSwitches()) {
          if ($mod.ProcHasGroupOverload(DataProc)) {
            Proc.FData.Flags = rtl.includeSet(Proc.FData.Flags,0)}
           else if ($mod.ProcHasGroupOverload(Proc)) DataProc.FData.Flags = rtl.includeSet(DataProc.FData.Flags,0);
        };
        if (Store) {
          this.RaiseMsg(20171118221821,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,Proc.FName,18,this.GetElementSourcePosStr(Proc)),DataProc.ProcType);
        } else {
          if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
            if (!this.IsProcOverload(Proc)) {
              this.RaiseMsg(20171118222112,3075,rtl.getResStr($lm5,"sPreviousDeclMissesOverload"),$lp6(18,Proc.FName,18,this.GetElementSourcePosStr(Proc)),DataProc.ProcType)}
             else if (!DataProc.IsOverload()) {
              if (DataProc.IsOverride() || ((DataProc.FData.OverriddenProc !== null) && (2 in DataProc.FData.Flags))) {}
              else this.RaiseMsg(20171118222147,3076,rtl.getResStr($lm5,"sOverloadedProcMissesOverload"),$lp6(18,this.GetElementSourcePosStr(Proc)),DataProc.ProcType);
            };
          };
          CountProcInSameScope();
        };
      } else {
        if (DataProc.IsOverride()) {}
        else if (DataProc.IsReintroduced()) {}
        else if ($mod.ProcHasGroupOverload(DataProc)) {}
        else {
          if (Store || (FindProcData.FoundInSameScope === 1)) {
            if ((FindProcData.Kind === 2) && (Proc.IsVirtual() || Proc.IsOverride())) {
              this.LogMsg(20170216151712,2,3077,rtl.getResStr($lm5,"sMethodHidesMethodOfBaseType"),$lp6(18,DataProc.FName,18,Proc.FParent.FName,18,this.GetElementSourcePosStr(Proc)),DataProc.ProcType)}
             else {
              if ($lt107.isPrototypeOf(DataProc.FParent)) {
                ProcScope = rtl.as(Proc.FData,$lt37);
                if ((Proc.Visibility === 6) || ((Proc.Visibility === 1) && (Proc.GetModule() !== DataProc.GetModule()))) {}
                else if (Proc.Visibility === 4) {}
                else if ((ProcScope.ImplProc !== null) && !this.ProcHasImplElements(ProcScope.ImplProc)) {}
                else if ($lt108.isPrototypeOf(Proc) && (DataProc.$class.ClassType() === Proc.$class.ClassType())) {}
                else if (Store) {
                  this.LogMsg(20190316152656,4,3125,rtl.getResStr($lm5,"sMethodHidesNonVirtualMethodExactly"),$lp6(18,this.GetElementSourcePosStr(Proc)),DataProc.ProcType);
                } else {
                  this.LogMsg(20171118214523,4,3021,rtl.getResStr($lm5,"sFunctionHidesIdentifier"),$lp6(18,this.GetElementSourcePosStr(Proc)),DataProc.ProcType);
                };
              };
            };
            Abort.set(true);
          };
        };
      };
      if (Store) {
        FindProcData.Found = Proc;
        FindProcData.ElScope = ElScope;
        FindProcData.StartScope = StartScope;
        Abort.set(true);
      };
    };
    this.OnFindProcDeclaration = function (El, ElScope, StartScope, FindProcData, Abort) {
      var Proc = null;
      var Store = false;
      if (!$lt90.isPrototypeOf(El)) {
        FindProcData.FoundNonProc = El;
        Abort.set(true);
        return;
      };
      if (El === FindProcData.Proc) return;
      Proc = El;
      Store = this.CheckProcOverloadCompatibility(FindProcData.Proc,Proc);
      if (Store) {
        FindProcData.Found = Proc;
        FindProcData.ElScope = ElScope;
        FindProcData.StartScope = StartScope;
        Abort.set(true);
      };
    };
    this.IsSameProcContext = function (ProcParentA, ProcParentB) {
      var Result = false;
      if (ProcParentA === ProcParentB) return true;
      if (ProcParentA.$class.ClassType() === $lt109) {
        if ((ProcParentB.$class.ClassType() === $lt110) && (ProcParentB.FParent === ProcParentA.FParent)) return true;
      } else if (ProcParentB.$class.ClassType() === $lt109) {
        if ((ProcParentA.$class.ClassType() === $lt110) && (ProcParentA.FParent === ProcParentB.FParent)) return true;
      };
      Result = false;
      return Result;
    };
    this.IsProcOverloading = function (LastProc, CurProc) {
      var Result = false;
      if (3 in LastProc.FData.ModeSwitches) {
        if (!this.IsProcOverload(LastProc) || !this.IsProcOverload(CurProc)) return false;
      } else {
        if (this.IsSameProcContext(LastProc.FParent,CurProc.FParent)) {}
        else {
          if (!$mod.ProcHasGroupOverload(LastProc)) return false;
        };
      };
      Result = true;
      return Result;
    };
    this.FindProcSameSignature = function (ProcName, Proc, Scope, OnlyLocal) {
      var Result = null;
      var FindData = $lt78.$new();
      var Abort = false;
      FindData.$assign($lt78.$new());
      FindData.Proc = Proc;
      FindData.Args = Proc.ProcType.Args;
      FindData.Kind = 0;
      Abort = false;
      if (OnlyLocal) {
        Scope.IterateLocalElements(ProcName,Scope,rtl.createCallback(this,"OnFindProcDeclaration"),FindData,{get: function () {
            return Abort;
          }, set: function (v) {
            Abort = v;
          }})}
       else Scope.IterateElements(ProcName,Scope,rtl.createCallback(this,"OnFindProcDeclaration"),FindData,{get: function () {
          return Abort;
        }, set: function (v) {
          Abort = v;
        }});
      Result = FindData.Found;
      return Result;
    };
    this.SetCurrentParser = function (AValue) {
      var Scanner = null;
      if (AValue === this.FCurrentParser) return;
      this.Clear();
      $lt92.SetCurrentParser.call(this,AValue);
      if (this.FCurrentParser !== null) {
        this.FCurrentParser.SetOptions(rtl.unionSet(this.FCurrentParser.FOptions,$mod.po_Resolver));
        if (this.FCurrentParser.FScanner !== null) {
          Scanner = this.FCurrentParser.FScanner;
          if (Scanner.FOnWarnDirective === null) Scanner.FOnWarnDirective = rtl.createCallback(this,"ScannerWarnDirective");
          Scanner.SetNonToken(100);
        };
      };
    };
    this.ScannerWarnDirective = function (Sender, Identifier, State, Handled) {
      var MsgNumbers = [];
      var i = 0;
      if (!this.$class.GetWarnIdentifierNumbers(Identifier,{get: function () {
          return MsgNumbers;
        }, set: function (v) {
          MsgNumbers = v;
        }})) return;
      Handled.set(true);
      for (var $l = 0, $end = rtl.length(MsgNumbers) - 1; $l <= $end; $l++) {
        i = $l;
        Sender.SetWarnMsgState(MsgNumbers[i],State);
      };
    };
    this.SetRootElement = function (AValue) {
      if (this.FRootElement === AValue) return;
      this.FRootElement = AValue;
    };
    this.CheckTopScope = function (ExpectedClass, AllowDescendants) {
      var Scope = null;
      Scope = this.FTopScope;
      if (Scope === null) this.RaiseInternalError(20160922163319,"Expected TopScope=" + ExpectedClass.$classname + " but found nil");
      if (Scope.$class.ClassType() !== ExpectedClass) if (!AllowDescendants || !Scope.$class.InheritsFrom(ExpectedClass)) this.RaiseInternalError(20160922163323,"Expected TopScope=" + ExpectedClass.$classname + " but found " + Scope.$classname);
    };
    this.AddIdentifier = function (Scope, aName, El, Kind) {
      var $Self = this;
      var Result = null;
      function SkipGenericTypes(Identifier, TypeParamCnt) {
        var Result = null;
        var CurEl = null;
        while (Identifier !== null) {
          CurEl = Identifier.FElement;
          if ($lt93.isPrototypeOf(CurEl)) {
            if ($Self.GetTypeParameterCount(CurEl) === TypeParamCnt) break;
          } else {
            if (TypeParamCnt === 0) break;
          };
          Identifier = Identifier.NextSameIdentifier;
        };
        Result = Identifier;
        return Result;
      };
      var Group = null;
      var Identifier = null;
      var OlderIdentifier = null;
      var OlderEl = null;
      var C = null;
      var i = 0;
      var TypeParamCnt = 0;
      var OtherScope = null;
      var ParentScope = null;
      var IsGeneric = false;
      var IsDelphi = false;
      if (aName === "") return null;
      IsDelphi = 3 in this.FCurrentParser.GetCurrentModeSwitches();
      if ($lt35.isPrototypeOf(Scope)) {
        Group = Scope;
        Scope = Group.Scopes[0];
      } else Group = null;
      if ($lt93.isPrototypeOf(El)) {
        IsGeneric = true;
        TypeParamCnt = this.GetTypeParameterCount(El);
      } else {
        IsGeneric = false;
        TypeParamCnt = 0;
      };
      if (El.Visibility === 4) {
        C = El.$class.ClassType();
        if ((C === $lt88) || (C === $lt105)) {}
        else if ((C === $lt90) || (C === $lt111)) {}
        else this.RaiseMsg(20170403223024,3053,rtl.getResStr($lm5,"sSymbolCannotBePublished"),[],El);
      };
      if ((Kind === 3) && (Group !== null) && (El.$class.ClassType() !== $lt88) && !IsDelphi) {
        for (var $l = 1, $end = Group.Count - 1; $l <= $end; $l++) {
          i = $l;
          OtherScope = Group.Scopes[i];
          OlderIdentifier = OtherScope.FindLocalIdentifier(aName);
          if (IsGeneric) OlderIdentifier = SkipGenericTypes(OlderIdentifier,TypeParamCnt);
          while (OlderIdentifier !== null) {
            OlderEl = OlderIdentifier.FElement;
            OlderIdentifier = OlderIdentifier.NextSameIdentifier;
            if ($lt105.isPrototypeOf(OlderEl)) {
              if (OlderEl.Visibility === 6) continue;
              if ((OlderEl.Visibility === 1) && (OlderEl.GetModule() !== El.GetModule())) continue;
            };
            this.RaiseMsg(20170221130001,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,aName,18,this.GetElementSourcePosStr(OlderEl)),El);
          };
        };
      };
      Identifier = Scope.AddIdentifier(aName,El,Kind);
      OlderIdentifier = Identifier.NextSameIdentifier;
      if (IsGeneric && IsDelphi) OlderIdentifier = SkipGenericTypes(OlderIdentifier,TypeParamCnt);
      if (OlderIdentifier !== null) {
        OlderEl = OlderIdentifier.FElement;
        if ((OlderEl.$class.ClassType() === $lt112) && (OlderEl.FParent.FParent !== Scope.FElement)) {
          if (OlderIdentifier.NextSameIdentifier !== null) this.RaiseNotYetImplemented(20190807114726,El,this.GetElementSourcePosStr(OlderEl));
          Scope.RemoveLocalIdentifier(OlderEl);
          OlderIdentifier = null;
          OlderEl = null;
        } else if ((El.Visibility === 4) && $lt90.isPrototypeOf(El) && $lt90.isPrototypeOf(OlderEl)) {
          this.RaiseMsg(20190626175432,3126,rtl.getResStr($lm5,"sDuplicatePublishedMethodXAtY"),$lp6(18,aName,18,this.GetElementSourcePosStr(OlderEl)),El)}
         else if ((Identifier.Kind === 3) || (OlderIdentifier.Kind === 3)) this.RaiseMsg(20170216151530,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,aName,18,this.GetElementSourcePosStr(OlderEl)),El);
      };
      if ((Scope === this.FTopScope) && $lt22.isPrototypeOf(Scope)) {
        ParentScope = this.GetScopes(this.FScopeCount - 2);
        if ($lt22.isPrototypeOf(ParentScope)) {
          OlderIdentifier = ParentScope.FindLocalIdentifier(aName);
          do {
            if (IsGeneric) OlderIdentifier = SkipGenericTypes(OlderIdentifier,TypeParamCnt);
            if (OlderIdentifier === null) break;
            OlderEl = OlderIdentifier.FElement;
            if ((Identifier.Kind === 5) || (OlderIdentifier.Kind === 5)) {}
            else if ((Identifier.Kind === 3) || (OlderIdentifier.Kind === 3)) this.RaiseMsg(20190818141630,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,aName,18,this.GetElementSourcePosStr(OlderEl)),El);
            OlderIdentifier = OlderIdentifier.NextSameIdentifier;
          } while (!(OlderIdentifier === null));
        };
      };
      Result = Identifier;
      return Result;
    };
    this.AddModule = function (El) {
      var C = null;
      var ModScope = null;
      if (this.FHub === null) this.RaiseNotYetImplemented(20200815182122,El,"");
      if (this.FTopScope !== this.FDefaultScope) this.RaiseInvalidScopeForElement(20160922163504,El,"");
      ModScope = this.PushScope$1(El,this.FScopeClass_Module);
      ModScope.VisibilityContext = El;
      ModScope.FirstName = $mod.FirstDottedIdentifier(El.FName);
      C = El.$class.ClassType();
      if ((C === $lt113) || (C === $lt114) || (C === $lt115)) {
        this.FDefaultNameSpace = $mod.ChompDottedIdentifier(El.FName)}
       else this.FDefaultNameSpace = "";
      ModScope.BoolSwitches = rtl.refSet(this.FCurrentParser.FScanner.FCurrentBoolSwitches);
    };
    this.AddSection = function (El) {
      var Scope = null;
      if ($lt22.isPrototypeOf(this.FTopScope)) this.FinishSection(rtl.as(this.FTopScope.FElement,$lt116));
      if ($lt15.isPrototypeOf(this.FTopScope)) this.FTopScope.BoolSwitches = rtl.refSet(this.FCurrentParser.FScanner.FCurrentBoolSwitches);
      this.FPendingForwardProcs.Add(El);
      Scope = this.PushScope$1(El,this.FScopeClass_Section);
      Scope.BoolSwitches = rtl.refSet(this.FCurrentParser.FScanner.FCurrentBoolSwitches);
      Scope.ModeSwitches = rtl.refSet(this.FCurrentParser.FScanner.FCurrentModeSwitches);
    };
    this.AddInitialFinalizationSection = function (El) {
      this.PushScope$1(El,this.FScopeClass_InitialFinalization);
    };
    this.AddType = function (El) {
      if (El.FName === "") return;
      if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20160922163506,El,"");
      this.AddIdentifier(this.FTopScope,El.FName,El,3);
    };
    this.AddArrayType = function (El, TypeParams) {
      var Scope = null;
      if (TypeParams !== null) {
        El.SetGenericTemplates(TypeParams);
        TypeParams = El.GenericTemplateTypes;
        this.CheckGenericTemplateTypes(El);
      };
      this.PopGenericParamScope(El);
      if (El.FName !== "") {
        if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20190812215622,El,"");
        this.AddIdentifier(this.FTopScope,El.FName,El,3);
        if (TypeParams !== null) {
          Scope = this.PushScope$1(El,this.FScopeClass_Array);
          this.AddGenericTemplateIdentifiers(TypeParams,Scope);
        };
      } else if (TypeParams !== null) this.RaiseNotYetImplemented(20190812215851,El,"");
    };
    this.AddRecordType = function (El, TypeParams) {
      var Scope = null;
      var C = null;
      C = El.FParent.$class.ClassType();
      if (El.FName === "") {
        if ((C === $lt105) || (C === $lt117) || (C === $lt118)) {}
        else this.RaiseMsg(20220321224331,3056,rtl.getResStr($lm5,"sCannotNestAnonymousX"),$lp6(18,"record"),El);
        if (TypeParams !== null) this.RaiseNotYetImplemented(20220322220743,El,"");
        this.DeanonymizeType(El);
      };
      if (TypeParams !== null) {
        El.SetGenericTemplates(TypeParams);
        TypeParams = El.GenericTemplateTypes;
        this.CheckGenericTemplateTypes(El);
      };
      this.PopGenericParamScope(El);
      if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20160922163508,El,"");
      if (El.FName !== "") {
        this.AddIdentifier(this.FTopScope,El.FName,El,3);
        this.FPendingForwardProcs.Add(El);
      };
      if (C !== $lt118) {
        Scope = this.PushScope$1(El,this.FScopeClass_Record);
        Scope.VisibilityContext = El;
        if (TypeParams !== null) {
          if (El.FName === "") this.RaiseNotYetImplemented(20190812220821,El,"");
          this.AddGenericTemplateIdentifiers(TypeParams,Scope);
        };
      };
    };
    this.AddRecordVariant = function (El) {
      if (El === null) ;
    };
    this.AddClassType = function (El, TypeParams) {
      var Duplicate = null;
      var ForwardDecl = null;
      var CurScope = null;
      var LocalScope = null;
      var GenTemplCnt = 0;
      var i = 0;
      var j = 0;
      var ClassScope = null;
      var ForwGenTempl = null;
      var ActGenTempl = null;
      var ForwConstraints = [];
      var ActConstraints = [];
      var DuplEl = null;
      var ForwConstraint = null;
      var ActConstraint = null;
      var ForwToken = 0;
      var ActToken = 0;
      var ForwConstraintResolved = $lt59.$new();
      var ActConstraintResolved = $lt59.$new();
      if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20160922163510,El,"");
      if (TypeParams === null) {
        GenTemplCnt = 0;
        if ($lt25.isPrototypeOf(this.FTopScope)) this.RaiseNotYetImplemented(20190831205006,El,$lp2(this.FTopScope));
        CurScope = this.FTopScope;
      } else {
        if (!$lt25.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20190831205038,El,$lp2(this.FTopScope));
        CurScope = this.GetScopes(this.FScopeCount - 2);
        GenTemplCnt = TypeParams.FCount;
        El.SetGenericTemplates(TypeParams);
        TypeParams = El.GenericTemplateTypes;
        this.CheckGenericTemplateTypes(El);
      };
      if ($lt35.isPrototypeOf(CurScope)) {
        LocalScope = CurScope.Scopes[0]}
       else LocalScope = CurScope;
      Duplicate = LocalScope.FindLocalIdentifier(El.FName);
      while (Duplicate !== null) {
        DuplEl = Duplicate.FElement;
        if ($lt93.isPrototypeOf(DuplEl) && (this.GetTypeParameterCount(DuplEl) === GenTemplCnt)) break;
        Duplicate = Duplicate.NextSameIdentifier;
      };
      if ((Duplicate !== null) && $lt94.isPrototypeOf(Duplicate.FElement) && Duplicate.FElement.IsForward && (Duplicate.FElement.FParent === El.FParent)) {
        ForwardDecl = Duplicate.FElement;
        if (GenTemplCnt > 0) {
          for (var $l = 0, $end = GenTemplCnt - 1; $l <= $end; $l++) {
            i = $l;
            ForwGenTempl = rtl.getObject(ForwardDecl.GenericTemplateTypes.Get(i));
            ActGenTempl = rtl.getObject(TypeParams.Get(i));
            if (!$lp7(ForwGenTempl.FName,ActGenTempl.FName)) this.RaiseMsg(20190814114811,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetTypeDescription(ActGenTempl,false),18,this.GetElementSourcePosStr(ForwGenTempl)),ActGenTempl);
            ForwConstraints = ForwGenTempl.Constraints;
            ActConstraints = ActGenTempl.Constraints;
            if (rtl.length(ForwConstraints) !== rtl.length(ActConstraints)) this.RaiseMsg(20190814121031,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetTypeDescription(ActGenTempl,false),18,this.GetElementSourcePosStr(ForwGenTempl)),ActGenTempl);
            for (var $l1 = 0, $end1 = rtl.length(ForwConstraints) - 1; $l1 <= $end1; $l1++) {
              j = $l1;
              ForwConstraint = ForwConstraints[j];
              ActConstraint = ActConstraints[j];
              ForwToken = this.GetGenericConstraintKeyword(ForwConstraint);
              ActToken = this.GetGenericConstraintKeyword(ActConstraint);
              if (ForwToken !== ActToken) this.RaiseMsg(20190814121139,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetTypeDescription(ActGenTempl,false),18,this.GetElementSourcePosStr(ForwConstraint)),this.GetGenericConstraintErrorEl(ActConstraint,ActGenTempl));
              if (ForwToken === 0) {
                this.ComputeElement(ForwConstraint,ForwConstraintResolved,rtl.createSet(4),null);
                this.ComputeElement(ActConstraint,ActConstraintResolved,rtl.createSet(4),null);
                if (this.CheckElTypeCompatibility(ForwConstraintResolved.LoTypeEl,ActConstraintResolved.LoTypeEl,0) !== 0) this.RaiseMsg(20190814121509,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetTypeDescription(ActGenTempl,false),18,this.GetElementSourcePosStr(this.GetGenericConstraintErrorEl(ForwConstraint,ForwGenTempl))),this.GetGenericConstraintErrorEl(ActConstraint,ActGenTempl));
              };
            };
          };
        };
        if (ForwardDecl.FData !== null) {
          ClassScope = rtl.as(ForwardDecl.FData,$lt34);
          if (El.FData !== null) this.RaiseInternalError(20190803202959,"real class has already customdata");
          ForwardDecl.FData = null;
          El.FData = ClassScope;
          ClassScope.SetElement(El);
        };
        this.CreateReference(El,ForwardDecl,1,null);
        Duplicate.SetElement(El);
      } else this.AddIdentifier(CurScope,El.FName,El,3);
      if (TypeParams !== null) ;
      this.FPendingForwardProcs.Add(El);
    };
    this.AddVariable = function (El) {
      if (El.FName === "") return;
      if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20160929205730,El,"");
      this.AddIdentifier(this.FTopScope,El.FName,El,3);
    };
    this.AddResourceString = function (El) {
      var C = null;
      if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20171004092114,El,"");
      C = El.FParent.$class.ClassType();
      if (!C.InheritsFrom($lt116)) this.RaiseNotYetImplemented(20171004092518,El,"");
      this.AddIdentifier(this.FTopScope,El.FName,El,3);
    };
    this.AddExportSymbol = function (El) {
      if (El === null) ;
    };
    this.AddEnumType = function (El) {
      var CanonicalSet = null;
      var EnumScope = null;
      if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20160929205732,El,"");
      if (El.FName !== "") this.AddIdentifier(this.FTopScope,El.FName,El,3);
      EnumScope = this.PushScope$1(El,$lt24);
      if ($lt119.isPrototypeOf(El.FParent)) {
        CanonicalSet = El.FParent;
      } else {
        CanonicalSet = this.CreateOwnedElement($lt119,"",El);
        CanonicalSet.EnumType = El;
      };
      EnumScope.CanonicalSet = CanonicalSet;
    };
    this.AddEnumValue = function (El) {
      var i = 0;
      var Scope = null;
      var Old = null;
      var ClassOrRec = null;
      if (!$lt24.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20160929205736,El,"");
      this.AddIdentifier(this.FTopScope,El.FName,El,3);
      if ((26 in this.FCurrentParser.FScanner.FCurrentBoolSwitches) && !$lt119.isPrototypeOf(El.FParent.FParent)) return;
      for (var $l = this.FScopeCount - 2; $l >= 0; $l--) {
        i = $l;
        Scope = this.GetScopes(i);
        if ($lt35.isPrototypeOf(Scope)) Scope = Scope.Scopes[0];
        if ($lt30.isPrototypeOf(Scope)) {
          Old = Scope.FindIdentifier(El.FName);
          if (Old === null) Scope.AddIdentifier(El.FName,El,3);
          ClassOrRec = rtl.as(Scope.FElement,$lt107);
          if (this.GetTypeParameterCount(ClassOrRec) > 0) break;
        } else if ($lt37.isPrototypeOf(Scope) || $lt22.isPrototypeOf(Scope)) {
          Old = Scope.FindLocalIdentifier(El.FName);
          if (Old !== null) this.RaiseMsg(20170216152224,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,El.FName,18,this.GetElementSourcePosStr(Old.FElement)),El);
          Scope.AddIdentifier(El.FName,El,3);
          break;
        } else break;
      };
    };
    this.AddProperty = function (El) {
      if (El.FName === "") this.RaiseNotYetImplemented(20160922163518,El,"");
      if (!$lt30.isPrototypeOf(this.GetLocalScope())) this.RaiseInvalidScopeForElement(20160922163520,El,"");
      this.AddIdentifier(this.FTopScope,El.FName,El,3);
      this.PushScope$1(El,$lt38);
    };
    this.AddProcedureType = function (El, TypeParams) {
      var Scope = null;
      var C = null;
      if (El.FName !== "") {
        if ($lt90.isPrototypeOf(El.FParent)) this.RaiseNotYetImplemented(20190911102852,El,$lp8(El.FParent));
        if (TypeParams !== null) {
          El.SetGenericTemplates(TypeParams);
          TypeParams = El.GenericTemplateTypes;
          this.CheckGenericTemplateTypes(El);
        };
        this.PopGenericParamScope(El);
        if (!$lt18.isPrototypeOf(this.FTopScope)) this.RaiseInvalidScopeForElement(20190813193703,El,"");
        this.AddIdentifier(this.FTopScope,El.FName,El,3);
        if (TypeParams !== null) {
          Scope = this.PushScope$1(El,this.FScopeClass_ProcType);
          this.AddGenericTemplateIdentifiers(TypeParams,Scope);
        };
      } else {
        if (TypeParams !== null) this.RaiseNotYetImplemented(20190813193745,El,"");
        if (El.FParent === null) this.RaiseNotYetImplemented(20220320122040,El,"");
        if ($lt90.isPrototypeOf(El.FParent)) {}
        else {
          C = El.FParent.$class.ClassType();
          if (C.InheritsFrom($lt105)) {}
          else this.RaiseMsg(20220320165827,3056,rtl.getResStr($lm5,"sCannotNestAnonymousX"),$lp6(18,$mod.GetElementTypeName(El)),El);
          this.DeanonymizeType(El);
        };
      };
    };
    this.AddProcedure = function (El, TypeParams) {
      var $Self = this;
      function AddClassConDestructor(ClassOrRecordScope, Field) {
        if (Field.get() !== null) $Self.RaiseMsg(20181231144353,3062,rtl.getResStr($lm5,"sMultipleXinTypeYNameZCAandB"),$lp6(18,$mod.GetElementTypeName(El),18,$mod.GetElementTypeName(ClassOrRecordScope.FElement),18,ClassOrRecordScope.FElement.FName,18,Field.get().FName,18,El.FName),El);
        Field.set(El);
      };
      function FindBestMembersType(ClassOrRecName, TypeParamCnt, Scope, Best, ErrorPos) {
        var Result = 0;
        var Identifier = null;
        var CurEl = null;
        Result = 0;
        Identifier = Scope.FindLocalIdentifier(ClassOrRecName);
        while (Identifier !== null) {
          CurEl = Identifier.FElement;
          if (!$lt107.isPrototypeOf(CurEl)) $Self.RaiseXExpectedButYFound(20170216152557,"class",CurEl.FName + ":" + $mod.GetElementTypeName(CurEl),ErrorPos);
          Result += 1;
          if (Best.get() === null) Best.set(CurEl);
          if ($Self.GetTypeParameterCount(CurEl) === TypeParamCnt) {
            Best.set(CurEl);
            return Result;
          };
          Identifier = Identifier.NextSameIdentifier;
        };
        return Result;
      };
      function FindMembersType(Scope, ClassOrRecName, TypeParamCnt, IsDelphi, ErrorPos) {
        var Result = null;
        var Found = 0;
        Result = null;
        if (Scope !== null) {
          Found = FindBestMembersType(ClassOrRecName,TypeParamCnt,Scope,{get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},ErrorPos)}
         else if ($lt18.isPrototypeOf($Self.FTopScope)) {
          Found = FindBestMembersType(ClassOrRecName,TypeParamCnt,$Self.FTopScope,{get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }},ErrorPos);
          if ((Result === null) || (TypeParamCnt !== $Self.GetTypeParameterCount(Result))) {
            if ($lt22.isPrototypeOf($Self.FTopScope) && ($Self.FScopeCount > 1) && $lt22.isPrototypeOf($Self.GetScopes($Self.FScopeCount - 2))) Found = Found + FindBestMembersType(ClassOrRecName,TypeParamCnt,$Self.GetScopes($Self.FScopeCount - 2),{get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }},ErrorPos);
          };
        };
        if (Result === null) $Self.RaiseMsg(20190818112356,3087,rtl.getResStr($lm5,"sClassXNotFoundInThisModule"),$lp6(18,ClassOrRecName + $lp9(TypeParamCnt)),ErrorPos);
        if (TypeParamCnt === $Self.GetTypeParameterCount(Result)) return Result;
        if (!IsDelphi && (TypeParamCnt === 0) && (Found === 1)) return Result;
        $Self.RaiseMsg(20190818112856,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,Result.FName + $lp9($Self.GetTypeParameterCount(Result)),18,ClassOrRecName + $lp9(TypeParamCnt)),ErrorPos);
        return Result;
      };
      function CheckTemplateNames() {
        var i = 0;
        var j = 0;
        var NamePart = null;
        var TemplTypes = null;
        var TemplType = null;
        for (var $l = 0, $end = TypeParams.FCount - 1; $l <= $end; $l++) {
          i = $l;
          NamePart = rtl.getObject(TypeParams.Get(i));
          TemplTypes = NamePart.Templates;
          if (TemplTypes === null) continue;
          for (var $l1 = 0, $end1 = TemplTypes.FCount - 1; $l1 <= $end1; $l1++) {
            j = $l1;
            TemplType = rtl.getObject(TemplTypes.Get(j));
            if ($lp7(TemplType.FName,El.FName)) $Self.RaiseMsg(20190912174817,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),[],TemplType);
          };
        };
      };
      var ProcName = "";
      var aClassName = "";
      var p = 0;
      var ClassOrRecType = null;
      var ProcScope = null;
      var HasDot = false;
      var IsClassConDestructor = false;
      var IsDelphi = false;
      var ClassOrRecScope = null;
      var C = null;
      var CurScope = null;
      var LocalScope = null;
      var Level = 0;
      var TypeParamCount = 0;
      var i = 0;
      var NamePart = null;
      var TemplType = null;
      var FoundTemplType = null;
      var NestedMembersScope = null;
      if (TypeParams !== null) {
        El.SetNameParts(TypeParams);
        TypeParams = El.NameParts;
        if ($lt25.isPrototypeOf(this.FTopScope)) this.PopScope();
        CheckTemplateNames();
      };
      CurScope = this.FTopScope;
      if (CurScope.$class.ClassType() === $lt35) {
        LocalScope = CurScope.Scopes[0]}
       else LocalScope = CurScope;
      ProcName = El.FName;
      if (El.FName !== "") {
        if (!$lt18.isPrototypeOf(LocalScope)) this.RaiseInvalidScopeForElement(20160922163522,El,"");
      } else {
        if (TypeParams !== null) this.RaiseNotYetImplemented(20190818101856,El,"");
        C = LocalScope.$class.ClassType();
        if ((C === this.FScopeClass_InitialFinalization) || C.InheritsFrom($lt37) || (C === $lt42) || (C === this.FScopeClass_WithExpr) || (C === $lt39) || (C === $lt43)) {}
        else this.RaiseInvalidScopeForElement(20181210173134,El,"");
      };
      HasDot = $mod.GetFirstDotPos(ProcName) > 1;
      if (TypeParams !== null) if (HasDot !== (TypeParams.FCount > 1)) this.RaiseNotYetImplemented(20190818093923,El,"");
      IsClassConDestructor = (El.$class.ClassType() === $lt120) || (El.$class.ClassType() === $lt121);
      ClassOrRecType = null;
      if ($lt37.isPrototypeOf(El.FData)) {
        ProcScope = El.FData;
        if (ProcScope.DeclarationProc !== null) TypeParams = ProcScope.DeclarationProc.NameParts;
        ClassOrRecScope = ProcScope.ClassRecScope;
        if (ClassOrRecScope !== null) {
          ClassOrRecType = ClassOrRecScope.FElement;
          if (this.GetTypeParameterCount(ClassOrRecType) > 0) this.RaiseNotYetImplemented(20190804175518,El,"");
          if (ProcScope.GroupScope !== null) this.RaiseNotYetImplemented(20190804175451,El,"");
          if (!HasDot && IsClassConDestructor) {
            if (El.$class.ClassType() === $lt120) {
              AddClassConDestructor(ClassOrRecScope,{p: ClassOrRecScope, get: function () {
                  return this.p.ClassConstructor;
                }, set: function (v) {
                  this.p.ClassConstructor = v;
                }})}
             else AddClassConDestructor(ClassOrRecScope,{p: ClassOrRecScope, get: function () {
                return this.p.ClassDestructor;
              }, set: function (v) {
                this.p.ClassDestructor = v;
              }});
          };
        };
        this.PushScope(ProcScope);
      } else {
        IsDelphi = 3 in this.FCurrentParser.GetCurrentModeSwitches();
        if (!HasDot && IsClassConDestructor) {
          if (ProcName === "") this.RaiseNotYetImplemented(20181231145302,El,"");
          if (!$lt30.isPrototypeOf(LocalScope)) this.RaiseInvalidScopeForElement(20181231143831,El,"");
          ClassOrRecScope = LocalScope;
          if (El.$class.ClassType() === $lt120) {
            AddClassConDestructor(ClassOrRecScope,{p: ClassOrRecScope, get: function () {
                return this.p.ClassConstructor;
              }, set: function (v) {
                this.p.ClassConstructor = v;
              }})}
           else AddClassConDestructor(ClassOrRecScope,{p: ClassOrRecScope, get: function () {
              return this.p.ClassDestructor;
            }, set: function (v) {
              this.p.ClassDestructor = v;
            }});
          if (TypeParams !== null) this.RaiseMsg(20190818094753,3136,rtl.getResStr($lm5,"sTypeParamsNotAllowedOnX"),$lp6(18,El.ElementTypeName()),El);
        };
        if (!HasDot && (ProcName !== "") && !IsClassConDestructor) {
          this.AddIdentifier(CurScope,ProcName,El,4);
        };
        ProcScope = this.CreateScope(El,this.FScopeClass_Proc);
        ProcScope.ModeSwitches = rtl.refSet(this.FCurrentParser.GetCurrentModeSwitches());
        if (HasDot) {
          ClassOrRecType = null;
          Level = 0;
          do {
            Level += 1;
            p = $mod.GetFirstDotPos(ProcName);
            if (p < 1) {
              if (ClassOrRecType === null) this.RaiseInternalError(20161013170829,"");
              break;
            };
            aClassName = $mod.FirstDottedIdentifier(ProcName);
            $lp10({get: function () {
                return ProcName;
              }, set: function (v) {
                ProcName = v;
              }},1,p);
            TypeParamCount = 0;
            if (TypeParams !== null) {
              if (Level > TypeParams.FCount) this.RaiseNotYetImplemented(20190818122217,El,"");
              NamePart = rtl.getObject(TypeParams.Get(Level - 1));
              if (NamePart.Name !== aClassName) this.RaiseNotYetImplemented(20190818102541,El,$lp5(Level) + ": " + NamePart.Name + "<>" + aClassName);
              if (NamePart.Templates !== null) {
                TypeParamCount = NamePart.Templates.FCount;
                for (var $l = 0, $end = TypeParamCount - 1; $l <= $end; $l++) {
                  i = $l;
                  TemplType = rtl.getObject(NamePart.Templates.Get(i));
                  if (rtl.length(TemplType.Constraints) > 0) this.RaiseMsg(20190818102850,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,":",18,TemplType.FName),TemplType);
                };
              };
            } else NamePart = null;
            if (!$mod.IsValidIdent(aClassName,false,false)) this.RaiseNotYetImplemented(20161013170844,El,"");
            if (ClassOrRecType !== null) {
              ClassOrRecScope = ClassOrRecType.FData;
              ClassOrRecType = FindMembersType(ClassOrRecScope,aClassName,TypeParamCount,IsDelphi,El);
            } else ClassOrRecType = FindMembersType(null,aClassName,TypeParamCount,IsDelphi,El);
            if ($lt94.isPrototypeOf(ClassOrRecType)) {
              if (!(ClassOrRecType.ObjKind in rtl.unionSet(rtl.createSet(1),$lm4.okAllHelpers))) {
                aClassName = $lp11(El.FName,El.FName.length - ProcName.length - 1);
                this.RaiseXExpectedButYFound(20180321161722,"class",aClassName + $lp9(this.GetTypeParameterCount(ClassOrRecType)) + ":" + $mod.GetElementTypeName(ClassOrRecType),El);
              };
            };
            if (ClassOrRecType.GetModule() !== El.GetModule()) this.RaiseNotYetImplemented(20190818120051,El,"");
            if (NamePart !== null) {
              for (var $l1 = 0, $end1 = TypeParamCount - 1; $l1 <= $end1; $l1++) {
                i = $l1;
                TemplType = rtl.getObject(NamePart.Templates.Get(i));
                FoundTemplType = rtl.getObject(ClassOrRecType.GenericTemplateTypes.Get(i));
                if (!$lp7(TemplType.FName,FoundTemplType.FName)) this.RaiseMsg(20190822014652,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,FoundTemplType.FName,18,TemplType.FName),TemplType);
              };
            };
          } while (!false);
          if (!$mod.IsValidIdent(ProcName,false,false)) this.RaiseNotYetImplemented(20161013170956,El,"");
          ProcScope.VisibilityContext = ClassOrRecType;
          ProcScope.ClassRecScope = rtl.as($mod.NoNil(ClassOrRecType.FData),$lt30);
          if (TypeParams !== null) {
            if (Level !== TypeParams.FCount) this.RaiseNotYetImplemented(20190818122315,El,"");
            NamePart = rtl.getObject(TypeParams.Get(Level - 1));
            if (NamePart.Name !== ProcName) this.RaiseNotYetImplemented(20190818122551,El,$lp5(Level) + ": " + NamePart.Name + "<>" + ProcName);
          };
        };
        this.PushScope(ProcScope);
      };
      if (HasDot) {
        if (this.FTopScope !== ProcScope) this.RaiseNotYetImplemented(20191014235935,El,$lp2(this.FTopScope));
        ProcScope.GroupScope = this.CreateGroupScope(ClassOrRecType,true);
        if ($lt107.isPrototypeOf(ClassOrRecType.FParent)) {
          ClassOrRecType = ClassOrRecType.FParent;
          NestedMembersScope = this.CreateGroupScope(ClassOrRecType,true);
          ProcScope.NestedMembersScope = NestedMembersScope;
          NestedMembersScope.OnlyTypeMembers = true;
          i = 0;
          while ((i < this.FScopeCount) && !$lt15.isPrototypeOf(this.FScopes[i])) i += 1;
          this.InsertScope(NestedMembersScope,i + 1);
          while ($lt107.isPrototypeOf(ClassOrRecType.FParent)) {
            ClassOrRecType = ClassOrRecType.FParent;
            this.GroupScope_AddTypeAndAncestors(NestedMembersScope,ClassOrRecType,true);
          };
        };
      };
      if (TypeParams !== null) {
        NamePart = rtl.getObject(TypeParams.Get(TypeParams.FCount - 1));
        if (NamePart !== null) this.AddGenericTemplateIdentifiers(NamePart.Templates,ProcScope);
      };
    };
    this.AddProcedureBody = function (El) {
      if (El === null) ;
      this.CheckTopScope(this.FScopeClass_Proc,false);
    };
    this.AddArgument = function (El) {
      var ProcType = null;
      var i = 0;
      var Arg = null;
      var CurScope = null;
      if (El.FName === "") this.RaiseInternalError(20160922163526,$lp2(El));
      CurScope = this.FTopScope;
      if (CurScope === null) this.RaiseInvalidScopeForElement(20160922163529,El,"");
      if (El.FParent.$class.ClassType() === $lt88) {
        if (CurScope.$class.ClassType() !== $lt38) this.RaiseInvalidScopeForElement(20161014124530,El,"");
        this.AddIdentifier(CurScope,El.FName,El,3);
      } else if ($lt100.isPrototypeOf(El.FParent)) {
        ProcType = El.FParent;
        if ($lt90.isPrototypeOf(ProcType.FParent)) {
          if (CurScope.$class.ClassType() !== this.FScopeClass_Proc) this.RaiseInvalidScopeForElement(20160922163529,El,$lp2(this.FTopScope));
          this.AddIdentifier(CurScope,El.FName,El,3);
        } else {
          for (var $l = 0, $end = ProcType.Args.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Arg = rtl.getObject(ProcType.Args.Get(i));
            if ((Arg !== El) && ($lp4(rtl.getObject(ProcType.Args.Get(i)).FName,El.FName) === 0)) this.RaiseMsg(20170216152225,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,Arg.FName,18,this.GetElementSourcePosStr(Arg)),El);
          };
        };
      } else this.RaiseNotYetImplemented(20161014124937,El,"");
    };
    this.AddFunctionResult = function (El) {
      var CurScope = null;
      CurScope = this.FTopScope;
      if (CurScope.$class.ClassType() !== this.FScopeClass_Proc) return;
      if ($lt100.isPrototypeOf(El.FParent)) {
        if (!$lt90.isPrototypeOf(El.FParent.FParent)) return;
      } else if (!$lt90.isPrototypeOf(El.FParent)) return;
      this.AddIdentifier(CurScope,$mod.ResolverResultVar,El,3);
    };
    this.AddGenericTemplateType = function (El) {
      var ParamScope = null;
      var OldIdentifier = null;
      if ($lt25.isPrototypeOf(this.FTopScope)) {
        ParamScope = this.FTopScope;
        if (ParamScope.FElement.FParent !== El.FParent) this.RaiseNotYetImplemented(20190831203132,El,$lp2(ParamScope.FElement));
      } else {
        if (El.FData !== null) this.RaiseNotYetImplemented(20190831202627,El,$lp2(El.FData));
        ParamScope = $lt25.$create("Create$1");
        this.AddResolveData(El,ParamScope,1);
        this.PushScope(ParamScope);
      };
      OldIdentifier = ParamScope.FindIdentifier(El.FName);
      if (OldIdentifier !== null) this.RaiseMsg(20190831202920,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,OldIdentifier.Identifier,18,this.GetElementSourcePosStr(OldIdentifier.FElement)),El);
      ParamScope.AddIdentifier(El.FName,El,3);
    };
    this.AddExceptOn = function (El) {
      this.PushScope$1(El,$lt39);
    };
    this.AddWithDo = function (El) {
      if ($lt42.FreeOnPop()) this.RaiseInternalError(20181210162344,"");
      this.PushScope$1(El,$lt42);
    };
    this.ResolveImplBlock = function (Block) {
      var i = 0;
      if (Block === null) return;
      for (var $l = 0, $end = Block.Elements.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.ResolveImplElement(rtl.getObject(Block.Elements.Get(i)));
      };
    };
    this.ResolveImplElement = function (El) {
      var C = null;
      if (El === null) return;
      C = El.$class.ClassType();
      if (C === $lt122) {
        this.ResolveImplBlock(El)}
       else if (C === $lt123) {
        this.ResolveImplAssign(El)}
       else if (C === $lt124) {
        this.ResolveImplSimple(El)}
       else if (C === $lt125) {
        this.ResolveImplBlock(El)}
       else if (C === $lt126) {
        this.ResolveImplBlock(El);
        this.ResolveStatementConditionExpr(El.ConditionExpr);
      } else if (C === $lt127) {
        this.ResolveStatementConditionExpr(El.ConditionExpr);
        this.ResolveImplElement(El.IfBranch);
        this.ResolveImplElement(El.ElseBranch);
      } else if (C === $lt128) {
        this.ResolveStatementConditionExpr(El.ConditionExpr);
        this.ResolveImplElement(El.Body);
      } else if (C === $lt129) {
        this.ResolveImplCaseOf(El)}
       else if (C === $lt130) {
        this.ResolveImplLabelMark(El)}
       else if (C === $lt131) {
        this.ResolveImplElement(El.Body)}
       else if (C === $lt132) {
        this.ResolveImplBlock(El);
        this.ResolveImplBlock(El.FinallyExcept);
        this.ResolveImplBlock(El.ElseBranch);
      } else if (C === $lt133) {}
      else if (C === $lt134) {
        this.ResolveImplRaise(El)}
       else if (C === $lt135) {
        if (El.Command !== "") this.RaiseNotYetImplemented(20160922163442,El,"TPasResolver.ResolveImplElement");
      } else if (C === $lt136) {
        this.ResolveImplAsm(El)}
       else if (C === $lt137) {
        this.ResolveImplWithDo(El)}
       else this.RaiseNotYetImplemented(20160922163445,El,"TPasResolver.ResolveImplElement");
    };
    var TRangeItem = rtl.recNewT(null,"",function () {
      this.RangeStart = 0;
      this.RangeEnd = 0;
      this.Expr = null;
      this.aString = "";
      this.$eq = function (b) {
        return (this.RangeStart === b.RangeStart) && (this.RangeEnd === b.RangeEnd) && (this.Expr === b.Expr) && (this.aString === b.aString);
      };
      this.$assign = function (s) {
        this.RangeStart = s.RangeStart;
        this.RangeEnd = s.RangeEnd;
        this.Expr = s.Expr;
        this.aString = s.aString;
        return this;
      };
    });
    this.ResolveImplCaseOf = function (CaseOf) {
      var $Self = this;
      function CreateValues(ResolvedEl, ValueSet) {
        var Result = false;
        var CaseExprType = null;
        var bt = 0;
        var ElTypeResolved = $lt59.$new();
        Result = false;
        bt = ResolvedEl.BaseType;
        if (bt in $mod.btAllStrings) {
          return true}
         else if (bt === 37) bt = ResolvedEl.SubType;
        if (bt in $mod.btAllInteger) {
          ValueSet.set($lt138.$create("CreateEmpty",[2,null]));
          Result = true;
        } else if (bt in $mod.btAllBooleans) {
          ValueSet.set($lt138.$create("CreateEmpty",[4,null]));
          Result = true;
        } else if (bt in $mod.btAllChars) {
          ValueSet.set($lt138.$create("CreateEmpty",[3,null]));
          Result = true;
        } else if (bt === 2) {
          CaseExprType = ResolvedEl.LoTypeEl;
          if (CaseExprType.$class.ClassType() === $lt99) {
            ValueSet.set($lt138.$create("CreateEmpty",[1,CaseExprType]));
            Result = true;
          } else if (CaseExprType.$class.ClassType() === $lt103) {
            $Self.ComputeElement(CaseExprType.RangeExpr.Left,ElTypeResolved,rtl.createSet(3),null);
            Result = CreateValues(ElTypeResolved,ValueSet);
          };
        };
        return Result;
      };
      function AddRangeItem(Values, RangeStart, RangeEnd, Expr) {
        var Result = null;
        Result = TRangeItem.$new();
        Result.RangeStart = RangeStart;
        Result.RangeEnd = RangeEnd;
        Result.Expr = Expr;
        Values.Add(Result);
        return Result;
      };
      function AddValue(Value, Values, ValueSet, Expr) {
        var Result = false;
        function AddString(s) {
          var Result = false;
          var Dupl = null;
          var i = 0;
          var o = 0;
          var Item = null;
          if (s.length === 1) {
            o = s.charCodeAt(1 - 1)}
           else o = -1;
          for (var $l = 0, $end = Values.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Item = Values.Get(i);
            if ((Item.aString === s) || ((o >= Item.RangeStart) && (o <= Item.RangeEnd))) {
              Dupl = Values.Get(i).Expr;
              $Self.RaiseMsg(20180424220139,3108,rtl.getResStr($lm5,"sDuplicateCaseValueXatY"),$lp6(18,"string",18,$Self.GetElementSourcePosStr(Dupl)),Expr);
            };
          };
          Item = AddRangeItem(Values,1,0,Expr);
          Item.aString = s;
          Result = true;
          return Result;
        };
        function AddStringRange(CharStart, CharEnd) {
          var Result = false;
          var i = 0;
          var o = 0;
          var s = "";
          var Item = null;
          var Dupl = null;
          if (CharEnd > 0xffff) $Self.RaiseNotYetImplemented(20180501221359,Expr,Value.AsDebugString());
          for (var $l = 0, $end = Values.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Item = Values.Get(i);
            s = Item.aString;
            if (s.length === 1) {
              o = s.charCodeAt(1 - 1)}
             else o = -1;
            if (((o >= CharStart) && (o <= CharEnd)) || ((Item.RangeStart <= CharEnd) && (Item.RangeEnd >= CharStart))) {
              Dupl = Values.Get(i).Expr;
              $Self.RaiseMsg(20180501223914,3108,rtl.getResStr($lm5,"sDuplicateCaseValueXatY"),$lp6(18,"string",18,$Self.GetElementSourcePosStr(Dupl)),Expr);
            };
          };
          AddRangeItem(Values,CharStart,CharEnd,Expr);
          Result = true;
          return Result;
        };
        var RangeStart = 0;
        var RangeEnd = 0;
        var i = 0;
        var Item = null;
        Result = true;
        var $tmp = Value.Kind;
        if ($tmp === 3) {
          RangeStart = Value.B + 0;
          RangeEnd = RangeStart;
        } else if ($tmp === 4) {
          RangeStart = Value.Int;
          RangeEnd = RangeStart;
        } else if ($tmp === 5) {
          if (Value.UInt > 9007199254740991) $Self.fExprEvaluator.EmitRangeCheckConst(20180424212414,Value.AsString(),"0",$lp5(9007199254740991),Expr,1);
          RangeStart = Value.UInt;
          RangeEnd = RangeStart;
        } else if ($tmp === 8) {
          if (ValueSet === null) {
            return AddString(Value.S)}
           else {
            if (Value.S.length !== 1) return false;
            RangeStart = Value.S.charCodeAt(1 - 1);
            RangeEnd = RangeStart;
          }}
         else if ($tmp === 9) {
          RangeStart = Value.Index;
          RangeEnd = RangeStart;
        } else if ($tmp === 10) {
          if (ValueSet === null) {
            return AddStringRange(Value.RangeStart,Value.RangeEnd)}
           else {
            RangeStart = Value.RangeStart;
            RangeEnd = Value.RangeEnd;
          }}
         else if ($tmp === 11) {
          if (Value.RangeEnd > 9007199254740991) $Self.fExprEvaluator.EmitRangeCheckConst(20180424212648,Value.AsString(),"0",$lp5(9007199254740991),Expr,1);
          RangeStart = Value.RangeStart;
          RangeEnd = Value.RangeEnd;
        } else {
          Result = false;
        };
        if (ValueSet === null) $Self.RaiseNotYetImplemented(20180424215728,Expr,Value.AsDebugString());
        i = ValueSet.Intersects(RangeStart,RangeEnd);
        if (i < 0) {
          ValueSet.Add(RangeStart,RangeEnd);
          AddRangeItem(Values,RangeStart,RangeEnd,Expr);
          return true;
        };
        for (var $l = 0, $end = Values.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Item = Values.Get(i);
          if ((Item.RangeStart > RangeEnd) || (Item.RangeEnd < RangeStart)) continue;
          $Self.RaiseMsg(20180424214305,3108,rtl.getResStr($lm5,"sDuplicateCaseValueXatY"),$lp6(18,Value.AsString(),18,$Self.GetElementSourcePosStr(Item.Expr)),Expr);
        };
        Result = false;
        return Result;
      };
      var i = 0;
      var j = 0;
      var El = null;
      var Stat = null;
      var CaseExprResolved = $lt59.$new();
      var OfExprResolved = $lt59.$new();
      var OfExpr = null;
      var ok = false;
      var Values = null;
      var ValueSet = null;
      var Value = null;
      var Item = null;
      this.ResolveExpr(CaseOf.CaseExpr,1);
      this.ComputeElement(CaseOf.CaseExpr,CaseExprResolved,rtl.createSet(0),null);
      ok = false;
      Values = $lt85.$create("Create");
      ValueSet = null;
      Value = null;
      try {
        if (0 in CaseExprResolved.Flags) ok = CreateValues(CaseExprResolved,{get: function () {
            return ValueSet;
          }, set: function (v) {
            ValueSet = v;
          }});
        if (!ok) {
          if (!this.IsGenericTemplType(CaseExprResolved)) this.RaiseXExpectedButYFound(20170216151952,"ordinal expression",this.GetTypeDescription(CaseExprResolved.LoTypeEl,false),CaseOf.CaseExpr);
        };
        for (var $l = 0, $end = CaseOf.Elements.FCount - 1; $l <= $end; $l++) {
          i = $l;
          El = rtl.getObject(CaseOf.Elements.Get(i));
          if (El.$class.ClassType() === $lt139) {
            Stat = El;
            for (var $l1 = 0, $end1 = Stat.Expressions.FCount - 1; $l1 <= $end1; $l1++) {
              j = $l1;
              OfExpr = rtl.getObject(Stat.Expressions.Get(j));
              this.ResolveExpr(OfExpr,1);
              this.ComputeElement(OfExpr,OfExprResolved,rtl.createSet(3,0),null);
              if (OfExprResolved.BaseType === 37) this.ConvertRangeToElement(OfExprResolved);
              if (!ok) continue;
              this.CheckEqualResCompatibility(CaseExprResolved,OfExprResolved,OfExpr,true,null);
              Value = this.Eval(OfExpr,rtl.createSet(1),true);
              if (Value !== null) {
                if (Value.Kind === 13) {}
                else if (!AddValue(Value,Values,ValueSet,OfExpr)) this.RaiseIncompatibleTypeRes(20180424210815,3028,[],OfExprResolved,CaseExprResolved,OfExpr);
                $lp12({get: function () {
                    return Value;
                  }, set: function (v) {
                    Value = v;
                  }});
              } else this.RaiseMsg(20180518102047,3036,rtl.getResStr($lm5,"sConstantExpressionExpected"),[],OfExpr);
            };
            this.ResolveImplElement(Stat.Body);
          } else if (El.$class.ClassType() === $lt140) {
            this.ResolveImplBlock(El)}
           else this.RaiseNotYetImplemented(20160922163448,El,"");
        };
      } finally {
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        ValueSet = rtl.freeLoc(ValueSet);
        for (var $l2 = 0, $end2 = Values.FCount - 1; $l2 <= $end2; $l2++) {
          i = $l2;
          Item = Values.Get(i);
          Item = null;
        };
        Values = rtl.freeLoc(Values);
      };
    };
    this.ResolveImplLabelMark = function (Mark) {
      this.RaiseNotYetImplemented(20161014141636,Mark,"");
    };
    this.ResolveImplWithDo = function (El) {
      var i = 0;
      var WithScope = null;
      var ExprScope = null;
      if (!$lt42.isPrototypeOf(El.FData)) this.RaiseInternalError(20181210175349,"");
      WithScope = El.FData;
      this.PushScope(WithScope);
      for (var $l = 0, $end = WithScope.ExpressionScopes.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        ExprScope = WithScope.ExpressionScopes.GetItem(i);
        this.PushScope(ExprScope);
      };
      this.ResolveImplElement(El.Body);
      this.PopWithScope(El);
    };
    this.ResolveImplAsm = function (El) {
      if (El === null) ;
    };
    this.ResolveImplAssign = function (El) {
      var LeftResolved = $lt59.$new();
      var RightResolved = $lt59.$new();
      var Flags = {};
      var Access = 0;
      var Value = null;
      if (El.Kind === 0) {
        Access = 2}
       else Access = 3;
      this.ResolveExpr(El.Left,Access);
      this.ComputeElement(El.Left,LeftResolved,rtl.createSet(1,0),null);
      this.CheckCanBeLHS(LeftResolved,true,this.GetRightMostExpr(El.Left));
      this.ResolveExpr(El.Right,1);
      Flags = rtl.createSet(0);
      if (this.IsProcedureType(LeftResolved,true)) {
        if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
          Flags = rtl.includeSet(Flags,1)}
         else Flags = rtl.includeSet(Flags,2);
      };
      this.ComputeElement(El.Right,RightResolved,rtl.refSet(Flags),null);
      var $tmp = El.Kind;
      if ($tmp === 0) {
        this.CheckAssignResCompatibility(LeftResolved,RightResolved,El.Right,true);
        this.CheckAssignExprRange(LeftResolved,El.Right);
        if ((LeftResolved.BaseType === 2) && (LeftResolved.LoTypeEl.$class.ClassType() === $lt102)) this.MarkArrayExprRecursive(El.Right,LeftResolved.LoTypeEl);
      } else if (($tmp === 1) || ($tmp === 2) || ($tmp === 3) || ($tmp === 4)) {
        if ((LeftResolved.BaseType in $mod.btAllInteger) && (El.Kind in rtl.createSet(1,2,3))) {
          if (!(0 in RightResolved.Flags) || !(RightResolved.BaseType in $mod.btAllInteger)) this.RaiseMsg(20170216152009,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(7,this.GetBaseTypes(RightResolved.BaseType),7,this.GetBaseTypes(LeftResolved.BaseType)),El.Right);
        } else if ((LeftResolved.BaseType in $mod.btAllStrings) && (El.Kind === 1)) {
          if (!(0 in RightResolved.Flags) || !(RightResolved.BaseType in $mod.btAllStringAndChars)) this.RaiseMsg(20170216152012,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(7,this.GetBaseTypes(RightResolved.BaseType),7,this.GetBaseTypes(LeftResolved.BaseType)),El.Right);
        } else if ((LeftResolved.BaseType in $mod.btAllFloats) && (El.Kind in rtl.createSet(1,2,3,4))) {
          if (!(0 in RightResolved.Flags) || !(RightResolved.BaseType in rtl.unionSet($mod.btAllInteger,$mod.btAllFloats))) this.RaiseMsg(20170216152107,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(7,this.GetBaseTypes(RightResolved.BaseType),7,this.GetBaseTypes(LeftResolved.BaseType)),El.Right);
        } else if ((LeftResolved.BaseType === 34) && (El.Kind in rtl.createSet(1,2,3))) {
          if (!(0 in RightResolved.Flags) || !(RightResolved.BaseType in rtl.createSet(34,36))) this.RaiseMsg(20170216152110,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,this.GetBaseTypeNames(RightResolved.BaseType),18,"set of " + this.GetBaseTypeNames(LeftResolved.SubType)),El.Right);
          if ((LeftResolved.SubType === RightResolved.SubType) || ((LeftResolved.SubType in $mod.btAllInteger) && (RightResolved.SubType in $mod.btAllInteger)) || ((LeftResolved.SubType in $mod.btAllBooleans) && (RightResolved.SubType in $mod.btAllBooleans))) {}
          else this.RaiseMsg(20170216152117,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"set of " + this.GetBaseTypeNames(RightResolved.SubType),18,"set of " + this.GetBaseTypeNames(LeftResolved.SubType)),El.Right);
        } else if (LeftResolved.BaseType === 2) {
          if ((LeftResolved.LoTypeEl.$class.ClassType() === $lt102) && (El.Kind === 1) && (0 in RightResolved.Flags) && this.IsDynArray(LeftResolved.LoTypeEl,true)) {
            this.CheckAssignCompatibilityArrayType(LeftResolved,RightResolved,El,true);
            return;
          } else this.RaiseIncompatibleTypeRes(20180615235749,3082,$lp6(18,$lm4.AssignKindNames[El.Kind]),LeftResolved,RightResolved,El);
        } else this.RaiseIncompatibleTypeRes(20180208115707,3082,$lp6(18,$lm4.AssignKindNames[El.Kind]),LeftResolved,RightResolved,El);
        Value = this.Eval(El.Right,{},true);
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      } else {
        this.RaiseNotYetImplemented(20160927143649,El,"AssignKind " + $lm4.AssignKindNames[El.Kind]);
      };
    };
    this.ResolveImplSimple = function (El) {
      var ExprResolved = $lt59.$new();
      var Expr = null;
      Expr = El.Expr;
      this.ResolveExpr(Expr,1);
      this.ComputeElement(Expr,ExprResolved,rtl.createSet(0),null);
      if (3 in ExprResolved.Flags) return;
      this.RaiseMsg(20170216152127,3044,rtl.getResStr($lm5,"sIllegalExpression"),[],El);
    };
    this.ResolveImplRaise = function (El) {
      var ResolvedEl = $lt59.$new();
      if (El.ExceptObject !== null) {
        this.ResolveExpr(El.ExceptObject,1);
        this.ComputeElement(El.ExceptObject,ResolvedEl,rtl.createSet(0),null);
        this.CheckIsClass(El.ExceptObject,ResolvedEl);
        if (ResolvedEl.IdentEl !== null) {
          if ($lt105.isPrototypeOf(ResolvedEl.IdentEl) || $lt106.isPrototypeOf(ResolvedEl.IdentEl) || $lt141.isPrototypeOf(ResolvedEl.IdentEl)) {}
          else {
            this.RaiseXExpectedButYFound(20170216152133,"variable",$mod.GetElementTypeName(ResolvedEl.IdentEl),El.ExceptObject);
          };
        } else if (ResolvedEl.ExprEl !== null) {}
        else this.RaiseXExpectedButYFound(201702303145230,"variable",$mod.GetResolverResultDbg(ResolvedEl),El.ExceptObject);
        if (!(0 in ResolvedEl.Flags)) this.RaiseMsg(20170303145037,3038,rtl.getResStr($lm5,"sNotReadable"),[],El.ExceptObject);
      };
      if (El.ExceptAddr !== null) this.ResolveExpr(El.ExceptAddr,1);
    };
    this.ResolveExpr = function (El, Access) {
      var Primitive = null;
      var ElClass = null;
      if (El === null) this.RaiseNotYetImplemented(20160922163453,El,"");
      ElClass = El.$class.ClassType();
      if (ElClass === $lt142) {
        Primitive = El;
        var $tmp = Primitive.Kind;
        if ($tmp === 0) {
          this.ResolveNameExpr(El,Primitive.Value,Access)}
         else if ($tmp === 1) {}
        else if (($tmp === 2) || ($tmp === 3)) {}
        else if (($tmp === 5) || ($tmp === 6)) {}
        else {
          this.RaiseNotYetImplemented(20160922163451,El,"");
        };
      } else if (ElClass === $lt143) {
        this.ResolveExpr(El.Operand,Access)}
       else if (ElClass === $lt144) {
        this.ResolveBinaryExpr(El,Access)}
       else if (ElClass === $lt145) {
        this.ResolveParamsExpr(El,Access)}
       else if (ElClass === $lt146) {}
      else if (ElClass === $lt147) {}
      else if (ElClass === $lt148) {
        this.ResolveInherited(El,Access)}
       else if (ElClass === $lt149) {
        if (Access !== 1) this.RaiseMsg(20170303205743,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],El);
        this.ResolveArrayValues(El);
      } else if (ElClass === $lt150) {
        if (Access !== 1) this.RaiseMsg(20180429103024,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],El);
        this.ResolveRecordValues(El);
      } else if (ElClass === $lt151) {}
      else if (ElClass === $lt152) {
        this.ResolveInlineSpecializeExpr(El,Access)}
       else this.RaiseNotYetImplemented(20170222184329,El,"");
      if (El.Format1 !== null) this.ResolveExpr(El.Format1,1);
      if (El.Format2 !== null) this.ResolveExpr(El.Format2,1);
    };
    this.ResolveStatementConditionExpr = function (El) {
      var ResolvedCond = $lt59.$new();
      this.ResolveExpr(El,1);
      this.ComputeElement(El,ResolvedCond,rtl.createSet(0),null);
      this.CheckConditionExpr(El,ResolvedCond);
    };
    this.ResolveNameExpr = function (El, aName, Access) {
      var FindData = $lt65.$new();
      var DeclEl = null;
      var Proc = null;
      var ImplProc = null;
      var Ref = null;
      var BuiltInProc = null;
      var p = 0;
      var DottedName = "";
      var Bin = null;
      var ProcScope = null;
      var ParentParams = $lt72.$new();
      var TypeCnt = 0;
      var InlParams = null;
      var TemplTypes = null;
      this.GetParamsOfNameExpr(El,ParentParams);
      if (ParentParams.InlineSpec !== null) {
        InlParams = ParentParams.InlineSpec.Params}
       else InlParams = null;
      if (ParentParams.Params !== null) {
        var $tmp = ParentParams.Params.Kind;
        if ($tmp === 10) {
          this.ResolveFuncParamsExprName(El,InlParams,ParentParams.Params,Access,"")}
         else if ($tmp === 11) {
          this.ResolveArrayParamsExprName(El,ParentParams.Params,Access)}
         else {
          this.RaiseNotYetImplemented(20190912190428,El,$lp8(ParentParams.Params));
        };
        return;
      };
      if (ParentParams.InlineSpec !== null) {
        TypeCnt = InlParams.FCount;
        DeclEl = this.FindGenericEl(aName,TypeCnt,FindData,El);
        if (DeclEl !== null) {
          DeclEl = this.GetSpecializedEl(ParentParams.InlineSpec,DeclEl,InlParams);
        } else this.RaiseXExpectedButYFound(20190916160829,"generic type",$mod.GetElementTypeName(DeclEl),El);
      } else DeclEl = this.FindElementWithoutParams$1(aName,FindData,El,false,false);
      if (DeclEl.$class.ClassType() === $lt87) {
        this.FindLongestUnitName({get: function () {
            return DeclEl;
          }, set: function (v) {
            DeclEl = v;
          }},El);
        FindData.Found = DeclEl;
      };
      if ($lt105.isPrototypeOf(DeclEl) && El.HasParent(DeclEl)) this.RaiseIdentifierNotFound(20230712105546,aName,El);
      Ref = this.CreateReference(DeclEl,El,Access,FindData);
      this.CheckFoundElement(FindData,Ref);
      if ($lt90.isPrototypeOf(DeclEl)) {
        Proc = DeclEl;
        if (ParentParams.InlineSpec === null) {
          TemplTypes = this.GetProcTemplateTypes(Proc);
          if (TemplTypes !== null) {
            this.RaiseMsg(20191007222004,3139,rtl.getResStr($lm5,"sCouldNotInferTypeArgXForMethodY"),$lp6(18,rtl.getObject(TemplTypes.Get(0)).FName,18,Proc.FName),El);
          };
        };
        if (El.FParent.$class.ClassType() === $lt88) {}
        else {
          if ((Access === 2) && $lt101.isPrototypeOf(Proc.ProcType) && (El.$class.ClassType() === $lt142) && (El.FParent.$class.ClassType() === $lt123) && (El.FParent.Left === El)) {
            ProcScope = rtl.as(Proc.FData,$lt37);
            ImplProc = ProcScope.ImplProc;
            if (ImplProc === null) ImplProc = Proc;
            if (El.HasParent(ImplProc)) {
              Ref.SetDeclaration(Proc.ProcType.ResultEl);
              return;
            };
          };
          if (this.ProcNeedsParams(Proc.ProcType) && !this.ExprIsAddrTarget(El)) {
            this.RaiseMsg(20170216152138,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Proc.FName),El);
          };
        };
      } else if (DeclEl.$class.ClassType() === $lt83) {
        if ($lt64.isPrototypeOf(DeclEl.FData)) {
          BuiltInProc = DeclEl.FData;
          BuiltInProc.GetCallCompatibility(BuiltInProc,El,true);
        };
      } else if ((DeclEl.$class.ClassType() === $lt87) || $lt86.isPrototypeOf(DeclEl)) {
        DottedName = DeclEl.FName;
        do {
          p = $lp13(".",DottedName);
          if (p < 1) break;
          $lp10({get: function () {
              return DottedName;
            }, set: function (v) {
              DottedName = v;
            }},1,p);
          El = this.GetNextDottedExpr(El);
          if (El === null) this.RaiseInternalError(20170503002012,"");
          this.CreateReference(DeclEl,El,Access,null);
          if ($lt144.isPrototypeOf(El.FParent) && (El.FParent.Right === El)) {
            Bin = El.FParent;
            while (Bin.OpCode === 27) {
              this.CreateReference(DeclEl,Bin,Access,null);
              if (!$lt144.isPrototypeOf(Bin.FParent)) break;
              if (Bin.FParent.Right !== Bin) break;
              Bin = Bin.FParent;
            };
          };
        } while (!false);
      };
    };
    this.ResolveInherited = function (El, Access) {
      var SelfScope = null;
      var AncestorScope = null;
      var ClassRecScope = null;
      var DeclProc = null;
      var AncestorProc = null;
      var aClass = null;
      var HelperForType = null;
      var InhScope = null;
      if ((El.FParent.$class.ClassType() === $lt144) && (El.FParent.OpCode === 0)) {
        this.ResolveInheritedName(El.FParent,Access);
        return;
      };
      SelfScope = this.GetCurrentSelfScope(El);
      if (SelfScope === null) this.RaiseMsg(20170216152141,3023,rtl.getResStr($lm5,"sInheritedOnlyWorksInMethods"),[],El);
      DeclProc = SelfScope.DeclarationProc;
      if (DeclProc === null) this.RaiseNotYetImplemented(20190121172251,El,"");
      ClassRecScope = SelfScope.ClassRecScope;
      if (!$lt34.isPrototypeOf(ClassRecScope)) {
        this.RaiseMsg(20181218194022,3060,rtl.getResStr($lm5,"sTheUseOfXisNotAllowedInARecord"),$lp6(18,"inherited"),El);
      };
      AncestorProc = null;
      aClass = rtl.as(ClassRecScope.FElement,$lt94);
      HelperForType = this.ResolveAliasType(aClass.HelperForType,true);
      if ($lt107.isPrototypeOf(HelperForType)) {
        if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
          if (!$lt94.isPrototypeOf(HelperForType)) return;
          AncestorScope = HelperForType.FData.AncestorScope;
          if (AncestorScope === null) return;
          InhScope = this.PushInheritedScope(AncestorScope.FElement,true,null);
        } else {
          AncestorScope = aClass.FData.AncestorScope;
          InhScope = this.PushInheritedScope(HelperForType,false,AncestorScope);
        };
      } else {
        AncestorScope = ClassRecScope.AncestorScope;
        if (AncestorScope === null) return;
        InhScope = this.PushInheritedScope(AncestorScope.FElement,true,null);
      };
      AncestorProc = this.FindProcSameSignature(DeclProc.FName,DeclProc,InhScope,false);
      this.PopScope();
      if (AncestorProc === null) return;
      if (!$lt107.isPrototypeOf(AncestorProc.FParent)) this.RaiseNotYetImplemented(20190121181234,El,"");
      this.CreateReference(AncestorProc,El,Access,null);
      if (AncestorProc.IsAbstract()) this.RaiseMsg(20170216152144,3030,rtl.getResStr($lm5,"sAbstractMethodsCannotBeCalledDirectly"),[],El);
    };
    this.ResolveInheritedName = function (El, Access) {
      var SelfScope = null;
      var ClassRecScope = null;
      var AncestorClass = null;
      var aClass = null;
      var HelperForType = null;
      var OnlyTypeMembers = false;
      var Proc = null;
      var AncestorScope = null;
      var InhScope = null;
      SelfScope = this.GetCurrentSelfScope(El);
      if (SelfScope === null) this.RaiseMsg(20170216152148,3023,rtl.getResStr($lm5,"sInheritedOnlyWorksInMethods"),[],El);
      ClassRecScope = SelfScope.ClassRecScope;
      if (!$lt34.isPrototypeOf(ClassRecScope)) this.RaiseMsg(20181218194436,3060,rtl.getResStr($lm5,"sTheUseOfXisNotAllowedInARecord"),$lp6(18,"inherited"),El);
      Proc = SelfScope.FElement;
      OnlyTypeMembers = this.IsClassMethod(Proc);
      aClass = ClassRecScope.FElement;
      AncestorScope = ClassRecScope.AncestorScope;
      if (aClass.ObjKind in $lm4.okAllHelpers) {
        HelperForType = this.ResolveAliasType(aClass.HelperForType,true);
        if ($lt107.isPrototypeOf(HelperForType)) {
          InhScope = this.PushInheritedScope(HelperForType,false,AncestorScope);
          InhScope.OnlyTypeMembers = OnlyTypeMembers;
          this.ResolveExpr(El.Right,Access);
          this.PopScope();
          return;
        };
      };
      if (AncestorScope === null) this.RaiseMsg(20170216152151,3024,rtl.getResStr($lm5,"sInheritedNeedsAncestor"),[],El.Left);
      AncestorClass = AncestorScope.FElement;
      InhScope = this.PushInheritedScope(AncestorClass,true,null);
      InhScope.OnlyTypeMembers = OnlyTypeMembers;
      this.ResolveExpr(El.Right,Access);
      this.PopScope();
    };
    this.ResolveBinaryExpr = function (El, Access) {
      var Left = null;
      var Next = null;
      var Bin = null;
      var $tmp = El.OpCode;
      if ($tmp === 0) {
        var $tmp1 = El.Kind;
        if ($tmp1 === 7) {
          this.ResolveExpr(El.Left,1);
          if (El.Right === null) return;
          this.ResolveExpr(El.Right,1);
        } else {
          if (El.Left.$class.ClassType() === $lt148) {
            this.ResolveExpr(El.Left,Access);
          } else {
            this.RaiseNotYetImplemented(20160922163456,El,"");
          };
        };
      } else if ($tmp === 1) {
        Left = El.Left;
        while (Left.$class.ClassType() === $lt144) {
          Bin = Left;
          if (Bin.OpCode !== 1) break;
          Next = Left.Left;
          if (Next.FParent !== Left) this.RaiseNotYetImplemented(20210321201257,Left,"");
          Left = Next;
        };
        this.ResolveExpr(Left,1);
        do {
          Bin = Left.FParent;
          if (Bin.Right !== null) this.ResolveExpr(Bin.Right,1);
          Left = Bin;
        } while (!(Left === El));
      } else if (($tmp === 2) || ($tmp === 3) || ($tmp === 4) || ($tmp === 5) || ($tmp === 6) || ($tmp === 7) || ($tmp === 8) || ($tmp === 9) || ($tmp === 10) || ($tmp === 11) || ($tmp === 12) || ($tmp === 13) || ($tmp === 14) || ($tmp === 15) || ($tmp === 16) || ($tmp === 17) || ($tmp === 18) || ($tmp === 19) || ($tmp === 20) || ($tmp === 21) || ($tmp === 22) || ($tmp === 23)) {
        this.ResolveExpr(El.Left,1);
        if (El.Right === null) return;
        this.ResolveExpr(El.Right,1);
      } else if ($tmp === 27) {
        this.ResolveExpr(El.Left,1);
        if (El.Right === null) return;
        this.ResolveSubIdent(El,Access);
      } else {
        this.RaiseNotYetImplemented(20160922163459,El,$lm4.OpcodeStrings[El.OpCode]);
      };
    };
    this.ResolveSubIdent = function (El, Access) {
      var $Self = this;
      function ResolveRight() {
        $Self.ResolveExpr(El.Right,Access);
        $Self.PopScope();
      };
      function SearchInTypeHelpers(HiType, IdentEl) {
        var Result = false;
        var DotScope = null;
        if (HiType === null) return false;
        DotScope = $Self.PushHelperDotScope(HiType);
        if (DotScope === null) return false;
        if ($lt95.isPrototypeOf(IdentEl)) DotScope.OnlyTypeMembers = true;
        ResolveRight();
        Result = true;
        return Result;
      };
      var aModule = null;
      var ClassEl = null;
      var ClassScope = null;
      var LeftResolved = $lt59.$new();
      var Left = null;
      var RecordEl = null;
      var RecordScope = null;
      var LLoTypeEl = null;
      var LHiTypeEl = null;
      var DotScope = null;
      var SetType = null;
      if ($lt55.isPrototypeOf(El.FData)) return;
      Left = El.Left;
      this.ComputeElement(Left,LeftResolved,rtl.createSet(0),null);
      if (LeftResolved.BaseType === 3) {
        aModule = rtl.as($mod.NoNil(LeftResolved.IdentEl),$lt86);
        this.PushModuleDotScope(aModule);
        ResolveRight();
        return;
      } else if (LeftResolved.LoTypeEl === null) {}
      else {
        LHiTypeEl = LeftResolved.HiTypeEl;
        LLoTypeEl = LeftResolved.LoTypeEl;
        if ((LLoTypeEl.$class.ClassType() === $lt97) && this.ElHasModeSwitch(El,20) && (0 in LeftResolved.Flags)) {
          LHiTypeEl = LLoTypeEl.DestType;
          LLoTypeEl = this.ResolveAliasType(LHiTypeEl,true);
          LeftResolved.Flags = rtl.includeSet(LeftResolved.Flags,1);
        };
        if (LLoTypeEl.$class.ClassType() === $lt94) {
          ClassEl = LLoTypeEl;
          if (ClassEl.HelperForType !== null) this.RaiseHelpersCannotBeUsedAsType(20190123093438,El);
          ClassScope = this.PushClassDotScope({get: function () {
              return ClassEl;
            }, set: function (v) {
              ClassEl = v;
            }},true);
          if ($lt95.isPrototypeOf(LeftResolved.IdentEl)) {
            ClassScope.OnlyTypeMembers = true}
           else ClassScope.OnlyTypeMembers = false;
          ResolveRight();
          return;
        } else if (LLoTypeEl.$class.ClassType() === $lt96) {
          ClassEl = rtl.as(this.ResolveAliasType(LLoTypeEl.DestType,true),$lt94);
          ClassScope = this.PushClassDotScope({get: function () {
              return ClassEl;
            }, set: function (v) {
              ClassEl = v;
            }},true);
          ClassScope.OnlyTypeMembers = true;
          ClassScope.IsClassOf = true;
          ResolveRight();
          return;
        } else if (LLoTypeEl.$class.ClassType() === $lt98) {
          RecordEl = LLoTypeEl;
          RecordScope = this.PushRecordDotScope(RecordEl);
          RecordScope.ConstParent = !(1 in LeftResolved.Flags);
          if ($lt95.isPrototypeOf(LeftResolved.IdentEl)) {
            RecordScope.OnlyTypeMembers = true}
           else {
            this.AccessExpr(El.Left,Access);
            RecordScope.OnlyTypeMembers = false;
          };
          ResolveRight();
          return;
        } else if (LLoTypeEl.$class.ClassType() === $lt99) {
          if ($lt95.isPrototypeOf(LeftResolved.IdentEl) && (this.ResolveAliasType(LeftResolved.IdentEl,true).$class.ClassType() === $lt99)) {
            DotScope = this.PushEnumDotScope(LHiTypeEl,LLoTypeEl);
            DotScope.OnlyTypeMembers = true;
            ResolveRight();
            return;
          };
        } else if (LLoTypeEl.$class.ClassType() === $lt104) {
          DotScope = this.PushTemplateDotScope(LLoTypeEl,El);
          if (DotScope !== null) {
            if ($lt95.isPrototypeOf(LeftResolved.IdentEl)) {
              DotScope.OnlyTypeMembers = true}
             else DotScope.OnlyTypeMembers = false;
            ResolveRight();
            return;
          };
        };
        if ((LeftResolved.BaseType in $mod.btAllIntrinsicTypes) || (LeftResolved.BaseType === 2) || (LeftResolved.BaseType === 1)) {
          if (SearchInTypeHelpers(LeftResolved.HiTypeEl,LeftResolved.IdentEl)) return;
        } else if (LeftResolved.BaseType === 34) {
          SetType = this.GetSetType(LeftResolved);
          if (SearchInTypeHelpers(SetType,LeftResolved.IdentEl)) return;
        };
      };
      this.RaiseMsg(20170216152157,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,".",18,this.GetResolverResultDescription(LeftResolved,false)),El);
    };
    this.ResolveParamsExpr = function (Params, Access) {
      if ((Params.Kind === 4) && !(Access in rtl.createSet(1,6))) {
        this.RaiseMsg(20170303211052,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],Params);
      };
      this.ResolveParamsExprParams(Params);
      if (Params.Kind === 10) {
        this.ResolveFuncParamsExpr(Params,Access)}
       else if (Params.Kind === 11) {
        this.ResolveArrayParamsExpr(Params,Access)}
       else if (Params.Kind === 4) {
        this.ResolveSetParamsExpr(Params)}
       else this.RaiseNotYetImplemented(20160922163501,Params,"");
    };
    this.ResolveParamsExprParams = function (Params) {
      var ScopeDepth = 0;
      var i = 0;
      var ParamAccess = 0;
      var Pars = [];
      ScopeDepth = this.StashSubExprScopes();
      if (Params.Kind in rtl.createSet(10,11)) {
        ParamAccess = 6}
       else ParamAccess = 1;
      Pars = Params.Params;
      for (var $l = 0, $end = rtl.length(Pars) - 1; $l <= $end; $l++) {
        i = $l;
        this.ResolveExpr(Pars[i],ParamAccess);
      };
      this.RestoreStashedScopes(ScopeDepth);
    };
    this.ResolveFuncParamsExpr = function (Params, Access) {
      var Value = null;
      var SubParams = null;
      var ResolvedEl = $lt59.$new();
      Value = Params.Value;
      if ($lt144.isPrototypeOf(Value)) {
        if ($lt144.isPrototypeOf(Value) && (Value.OpCode === 27)) Value = Value.Right;
        if (this.IsNameExpr(Value)) {
          this.ResolveBinaryExpr(Params.Value,Access);
          if (!$lt55.isPrototypeOf(Value.FData)) this.RaiseNotYetImplemented(20190115140557,Params,"");
          return;
        } else if (Value.$class.ClassType() === $lt152) {
          this.ResolveBinaryExpr(Params.Value,Access);
          return;
        };
        this.RaiseNotYetImplemented(20190115140809,Params,"");
      } else if (this.IsNameExpr(Value)) {
        this.ResolveFuncParamsExprName(Value,null,Params,Access,"")}
       else if (Value.$class.ClassType() === $lt152) {
        this.ResolveInlineSpecializeExpr(Value,Access);
      } else if (Value.$class.ClassType() === $lt145) {
        SubParams = Value;
        if (SubParams.Kind in rtl.createSet(11,10)) {
          this.ResolveParamsExpr(SubParams,1);
          this.ComputeElement(SubParams,ResolvedEl,rtl.createSet(1,0),null);
          if (this.IsProcedureType(ResolvedEl,true)) {
            this.CreateReference(ResolvedEl.LoTypeEl,Value,Access,null);
            this.FinishProcParamAccess(ResolvedEl.LoTypeEl,Params);
            return;
          };
        };
        this.RaiseMsg(20170216152202,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"(",18,SubParams.ElementTypeName()),Params);
      } else this.RaiseNotYetImplemented(20161014085118,Params.Value,"");
    };
    this.ResolveFuncParamsExprName = function (NameExpr, TemplParams, Params, Access, CallName) {
      var $Self = this;
      function RaiseMultiFit() {
        var FindCallData = $lt76.$new();
        var Msg = "";
        var i = 0;
        var El = null;
        var Abort = false;
        FindCallData.$assign($lt76.$new());
        FindCallData.Params = Params;
        FindCallData.List = $lt85.$create("Create");
        try {
          Abort = false;
          $Self.IterateElements(CallName,rtl.createCallback($Self,"OnFindCallElements"),FindCallData,{get: function () {
              return Abort;
            }, set: function (v) {
              Abort = v;
            }});
          Msg = "";
          for (var $l = 0, $end = FindCallData.List.FCount - 1; $l <= $end; $l++) {
            i = $l;
            El = rtl.getObject(FindCallData.List.Get(i));
            if ($lt90.isPrototypeOf(El)) $Self.LogMsg(20170417180320,4,3057,rtl.getResStr($lm5,"sFoundCallCandidateX"),$lp6(18,$Self.GetProcTypeDescription(El.ProcType,rtl.createSet(0,1,2))),El);
            Msg = Msg + ", " + $Self.GetElementSourcePosStr(El);
          };
        } finally {
          rtl.free(FindCallData,"List");
        };
        $Self.RaiseMsg(20170216152200,3013,rtl.getResStr($lm5,"sCantDetermineWhichOverloadedFunctionToCall") + Msg,$lp6(18,CallName),NameExpr);
      };
      function FinishUntypedParams(ParamAccess) {
        var i = 0;
        if (ParamAccess === 6) return;
        for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
          i = $l;
          $Self.FinishCallArgAccess(Params.Params[i],ParamAccess);
        };
      };
      function CheckTemplParams(GenTemplates, TemplParams) {
        var i = 0;
        var Param = null;
        var PosEl = null;
        var ResolvedEl = $lt59.$new();
        for (var $l = 0, $end = TemplParams.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Param = rtl.getObject(TemplParams.Get(i));
          $Self.ComputeElement(Param,ResolvedEl,rtl.createSet(4),null);
          if ($lt153.isPrototypeOf(Param)) {
            PosEl = Param}
           else PosEl = Params;
          if ($Self.CheckTemplateFitsParamRes(rtl.getObject(GenTemplates.Get(i)),ResolvedEl,0,PosEl) === 2147483647) $Self.RaiseNotYetImplemented(20190919095604,PosEl,$mod.GetResolverResultDbg(ResolvedEl));
        };
      };
      function CheckIncompatibleProc(CallName, FoundProcType, TemplParamsCnt) {
        var FoundTemplCnt = 0;
        var aName = "";
        $Self.CheckCallProcCompatibility(FoundProcType,Params,true,false);
        if (FoundProcType.GenericTemplateTypes !== null) {
          FoundTemplCnt = FoundProcType.GenericTemplateTypes.FCount}
         else FoundTemplCnt = 0;
        if (TemplParamsCnt !== FoundTemplCnt) {
          if ($lt90.isPrototypeOf(FoundProcType.FParent)) {
            aName = FoundProcType.FParent.FName}
           else aName = FoundProcType.FName;
          if (aName === "") aName = $lp8(FoundProcType);
          $Self.RaiseMsg(20201101205447,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,aName,18,CallName + $lp9(TemplParamsCnt)),Params);
        };
      };
      var FindCallData = $lt76.$new();
      var Abort = false;
      var FoundEl = null;
      var Ref = null;
      var FindData = $lt65.$new();
      var BuiltInProc = null;
      var ResolvedEl = $lt59.$new();
      var TypeEl = null;
      var C = null;
      var TemplParamsCnt = 0;
      var GenTemplates = null;
      var InferenceParams = null;
      if (CallName !== "") {}
      else if (NameExpr.$class.ClassType() === $lt142) {
        CallName = NameExpr.Value}
       else this.RaiseNotYetImplemented(20190115143539,NameExpr,"");
      FindCallData.$assign($lt76.$new());
      FindCallData.Params = Params;
      if (TemplParams !== null) {
        TemplParamsCnt = TemplParams.FCount;
        FindCallData.TemplCnt = TemplParamsCnt;
      } else TemplParamsCnt = 0;
      Abort = false;
      this.IterateElements(CallName,rtl.createCallback($Self,"OnFindCallElements"),FindCallData,{get: function () {
          return Abort;
        }, set: function (v) {
          Abort = v;
        }});
      FoundEl = FindCallData.Found;
      if (FoundEl === null) this.RaiseIdentifierNotFound(20170216152544,CallName,NameExpr);
      if (FindCallData.Distance === 2147483647) {
        if ($lt90.isPrototypeOf(FoundEl)) {
          CheckIncompatibleProc(CallName,FoundEl.ProcType,TemplParamsCnt)}
         else if ($lt100.isPrototypeOf(FoundEl)) {
          this.CheckTypeCast(FoundEl,Params,true)}
         else if (FoundEl.$class.ClassType() === $lt83) {
          if ($lt64.isPrototypeOf(FoundEl.FData)) {
            BuiltInProc = FoundEl.FData;
            BuiltInProc.GetCallCompatibility(BuiltInProc,Params,true);
            this.RaiseNotYetImplemented(20200525124749,FoundEl,"missing exception, Found=[" + BuiltInProc.Signature + "]");
          } else if ($lt62.isPrototypeOf(FoundEl.FData)) {
            this.CheckTypeCast(FoundEl,Params,true)}
           else this.RaiseNotYetImplemented(20161006132825,FoundEl,"");
        } else if ($lt95.isPrototypeOf(FoundEl)) {
          this.CheckTypeCast(FoundEl,Params,true)}
         else if ($lt105.isPrototypeOf(FoundEl)) {
          TypeEl = this.ResolveAliasType(FoundEl.VarType,true);
          if ($lt100.isPrototypeOf(TypeEl)) {
            CheckIncompatibleProc(CallName,TypeEl,TemplParamsCnt)}
           else this.RaiseMsg(20170405003522,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"(",18,TypeEl.ElementTypeName()),Params);
        } else if ($lt106.isPrototypeOf(FoundEl)) {
          TypeEl = this.ResolveAliasType(FoundEl.ArgType,true);
          if ($lt100.isPrototypeOf(TypeEl)) {
            CheckIncompatibleProc(CallName,TypeEl,TemplParamsCnt)}
           else this.RaiseMsg(20180228145412,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"(",18,TypeEl.ElementTypeName()),Params);
        } else this.RaiseNotYetImplemented(20161003134755,FoundEl,"");
        this.RaiseNotYetImplemented(20180621002400,Params,"missing exception, Found=" + $lp2(FoundEl));
      };
      if (FindCallData.Count > 1) {
        if ($lt90.isPrototypeOf(FoundEl) && (this.IndexOfGenericParam(Params.Params) >= 0)) {}
        else RaiseMultiFit();
      };
      if ($lt90.isPrototypeOf(FoundEl)) {
        GenTemplates = this.GetProcTemplateTypes(FoundEl)}
       else if ($lt93.isPrototypeOf(FoundEl)) {
        GenTemplates = FoundEl.GenericTemplateTypes}
       else GenTemplates = null;
      if (TemplParamsCnt > 0) {
        if (GenTemplates === null) this.RaiseMsg(20190919100922,3136,rtl.getResStr($lm5,"sTypeParamsNotAllowedOnX"),$lp6(18,FoundEl.FName),NameExpr);
        if (TemplParamsCnt !== GenTemplates.FCount) this.RaiseMsg(20190919101051,3130,rtl.getResStr($lm5,"sWrongNumberOfParametersForGenericX"),$lp6(18,$mod.GetElementTypeName(FoundEl) + " " + FoundEl.FName),NameExpr);
        CheckTemplParams(GenTemplates,TemplParams);
        FoundEl = this.GetSpecializedEl(NameExpr,FoundEl,TemplParams);
        if ($lt90.isPrototypeOf(FoundEl)) {
          this.CheckCallProcCompatibility(FoundEl.ProcType,Params,true,false);
        };
      } else if ((GenTemplates !== null) && (GenTemplates.FCount > 0)) {
        if ($lt90.isPrototypeOf(FoundEl) && (49 in this.FCurrentParser.GetCurrentModeSwitches())) {
          InferenceParams = this.CreateInferenceTypesForCall(Params,FoundEl);
          try {
            CheckTemplParams(GenTemplates,InferenceParams);
            FoundEl = this.GetSpecializedEl(NameExpr,FoundEl,InferenceParams);
            this.CheckCallProcCompatibility(FoundEl.ProcType,Params,true,false);
          } finally {
            $lp3({get: function () {
                return InferenceParams;
              }, set: function (v) {
                InferenceParams = v;
              }});
          };
        } else this.RaiseMsg(20190919120728,3130,rtl.getResStr($lm5,"sWrongNumberOfParametersForGenericX"),$lp6(18,$mod.GetElementTypeName(FoundEl) + " " + FoundEl.FName),NameExpr);
      };
      if ($lt95.isPrototypeOf(FoundEl)) {
        TypeEl = this.ResolveAliasType(FoundEl,true);
        C = TypeEl.$class.ClassType();
        if (C === $lt83) {
          if ($lt62.isPrototypeOf(TypeEl.FData)) this.CheckTypeCast(TypeEl,Params,true);
        } else {
          this.CheckTypeCast(TypeEl,Params,true);
        };
      };
      Ref = this.CreateReference(FoundEl,NameExpr,1,null);
      if (FindCallData.StartScope.$class.ClassType() === this.FScopeClass_WithExpr) Ref.WithExprScope = FindCallData.StartScope;
      FindData.$assign($lt65.$new());
      FindData.ErrorPosEl = NameExpr;
      FindData.StartScope = FindCallData.StartScope;
      FindData.ElScope = FindCallData.ElScope;
      FindData.Found = FoundEl;
      this.CheckFoundElement(FindData,Ref);
      if ($lt90.isPrototypeOf(FoundEl)) {
        if (!(Access in rtl.createSet(1,6))) {
          this.RaiseMsg(20170306104440,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],Params);
        };
        this.FinishProcParamAccess(FoundEl.ProcType,Params);
      } else if ($lt95.isPrototypeOf(FoundEl)) {
        TypeEl = this.ResolveAliasType(FoundEl,true);
        C = TypeEl.$class.ClassType();
        if ((C === $lt94) || (C === $lt96) || (C === $lt98) || (C === $lt99) || (C === $lt119) || (C === $lt97) || (C === $lt102) || (C === $lt103) || (C === $lt104)) {
          FinishUntypedParams(Access);
        } else if ((C === $lt100) || (C === $lt101)) {
          this.AccessExpr(Params.Params[0],Access);
        } else if (C === $lt83) {
          if ($lt64.isPrototypeOf(TypeEl.FData)) {
            BuiltInProc = TypeEl.FData;
            if (BuiltInProc.FinishParamsExpression != null) {
              BuiltInProc.FinishParamsExpression(BuiltInProc,Params)}
             else FinishUntypedParams(1);
          } else if ($lt62.isPrototypeOf(TypeEl.FData)) {
            FinishUntypedParams(Access);
          } else {
            this.RaiseNotYetImplemented(20170325145720,Params,"");
          };
        } else {
          this.RaiseMsg(20170306121908,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"(",18,TypeEl.ElementTypeName()),Params);
        };
      } else {
        this.ComputeElement(FoundEl,ResolvedEl,rtl.createSet(1,0),null);
        TypeEl = ResolvedEl.LoTypeEl;
        if ($lt100.isPrototypeOf(TypeEl)) {
          if (!(Access in rtl.createSet(1,6))) {
            this.RaiseMsg(20190215195439,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],Params);
          };
          this.FinishProcParamAccess(TypeEl,Params);
          return;
        };
        this.RaiseMsg(20170306104301,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"(",18,TypeEl.ElementTypeName()),Params);
      };
    };
    this.ResolveArrayParamsExpr = function (Params, Access) {
      var ResolvedEl = $lt59.$new();
      var Value = null;
      var SubParams = null;
      Value = Params.Value;
      if (Value === null) this.RaiseInternalError(20180423093120,$lp2(Params));
      if (this.IsNameExpr(Value)) {
        this.ResolveArrayParamsExprName(Value,Params,Access);
        return;
      } else if (Value.$class.ClassType() === $lt145) {
        SubParams = Value;
        this.ResolveExpr(SubParams,1);
        this.ComputeElement(SubParams,ResolvedEl,rtl.createSet(1,0),null);
        if (Value.FData === null) this.CreateReference(ResolvedEl.LoTypeEl,Value,Access,null);
        ResolvedEl.IdentEl = null;
      } else if (Value.$class.InheritsFrom($lt143)) {
        this.ResolveExpr(Value.Operand,Access);
        this.ComputeElement(Value,ResolvedEl,rtl.createSet(0),null);
      } else if ($lt144.isPrototypeOf(Value)) {
        while ($lt144.isPrototypeOf(Value) && (Value.OpCode === 27)) Value = Value.Right;
        if (this.IsNameExpr(Value)) {
          this.ResolveBinaryExpr(Params.Value,Access);
          if (!$lt55.isPrototypeOf(Value.FData)) this.RaiseNotYetImplemented(20190115144534,Params,"");
          return;
        } else {
          Value = Params.Value;
          this.ResolveBinaryExpr(Value,1);
          this.ComputeElement(Value,ResolvedEl,rtl.createSet(0),null);
        };
      } else this.RaiseNotYetImplemented(20160927212610,Value,"");
      this.ResolveArrayParamsArgs(Params,ResolvedEl,Access);
    };
    this.ResolveArrayParamsExprName = function (NameExpr, Params, Access) {
      var ArrayName = "";
      var FindData = $lt65.$new();
      var Ref = null;
      var DeclEl = null;
      var Proc = null;
      var ImplProc = null;
      var ProcScope = null;
      var ResolvedEl = $lt59.$new();
      if ((NameExpr.$class.ClassType() === $lt142) && (NameExpr.Kind === 0)) {
        ArrayName = NameExpr.Value}
       else if (NameExpr.$class.ClassType() === $lt152) {
        this.RaiseMsg(20190912190518,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"[",18,"inline specialize"),Params)}
       else this.RaiseNotYetImplemented(20190131154557,NameExpr,"");
      DeclEl = this.FindElementWithoutParams$1(ArrayName,FindData,NameExpr,true,true);
      Ref = this.CreateReference(DeclEl,NameExpr,Access,FindData);
      this.CheckFoundElement(FindData,Ref);
      if ($lt90.isPrototypeOf(DeclEl)) {
        Proc = DeclEl;
        if ((Access === 2) && $lt101.isPrototypeOf(Proc.ProcType) && (Params.FParent.$class.ClassType() === $lt123) && (Params.FParent.Left === Params)) {
          ProcScope = rtl.as(Proc.FData,$lt37);
          ImplProc = ProcScope.ImplProc;
          if (ImplProc === null) ImplProc = Proc;
          if (Params.HasParent(ImplProc)) {
            Ref.SetDeclaration(Proc.ProcType.ResultEl);
          };
        };
      };
      this.ComputeElement(NameExpr,ResolvedEl,rtl.createSet(0),null);
      this.ResolveArrayParamsArgs(Params,ResolvedEl,Access);
    };
    this.ResolveArrayParamsArgs = function (Params, ResolvedValue, Access) {
      var $Self = this;
      function ReadAccessParamValue() {
        var Left = null;
        var Ref = null;
        if (Access === 2) {
          Left = Params.Value;
          if ($lt144.isPrototypeOf(Left) && (Left.OpCode === 27)) Left = Left.Right;
          if ($lt55.isPrototypeOf(Left.FData)) {
            Ref = Left.FData;
            if (Ref.Access === 2) Ref.Access = 3;
          };
        };
      };
      function CheckStringOrPointerIndex(IsStringIndex) {
        var Result = false;
        var ArgExp = null;
        var ResolvedArg = $lt59.$new();
        ReadAccessParamValue();
        if (!IsStringIndex) {
          if (!$Self.ElHasBoolSwitch(Params,28)) return false;
        };
        Result = true;
        if (!(0 in ResolvedValue.Flags)) $Self.RaiseXExpectedButYFound(20170216152548,"index",$mod.GetElementTypeName(ResolvedValue.LoTypeEl),Params);
        if (rtl.length(Params.Params) < 1) {
          $Self.RaiseMsg(20170216152204,3031,rtl.getResStr($lm5,"sMissingParameterX"),$lp6(18,$lp14(IsStringIndex,"character index","index")),Params)}
         else if (rtl.length(Params.Params) > 1) $Self.RaiseMsg(20170216152551,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(9,","),Params.Params[1]);
        ArgExp = Params.Params[0];
        $Self.ComputeElement(ArgExp,ResolvedArg,rtl.createSet(0),null);
        if (!(ResolvedArg.BaseType in $mod.btAllInteger)) $Self.RaiseMsg(20170216152209,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,$Self.GetBaseTypeNames(ResolvedArg.BaseType),18,"integer"),ArgExp);
        if (!(0 in ResolvedArg.Flags)) $Self.RaiseMsg(20170216152211,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"type",18,"value"),ArgExp);
        $Self.AccessExpr(ArgExp,1);
        return Result;
      };
      var PropEl = null;
      var i = 0;
      var TypeEl = null;
      var C = null;
      if (ResolvedValue.BaseType in $mod.btAllStrings) {
        if (CheckStringOrPointerIndex(true)) return;
      } else if ($lt88.isPrototypeOf(ResolvedValue.IdentEl) && (this.GetPasPropertyArgs(ResolvedValue.IdentEl).FCount > 0)) {
        PropEl = ResolvedValue.IdentEl;
        this.CheckCallPropertyCompatibility(PropEl,Params,true);
        this.FinishPropertyParamAccess(Params,PropEl);
        return;
      } else if (ResolvedValue.BaseType === 29) {
        if (CheckStringOrPointerIndex(false)) return;
      } else if (ResolvedValue.BaseType === 2) {
        TypeEl = ResolvedValue.LoTypeEl;
        C = TypeEl.$class.ClassType();
        if ((C === $lt94) || (C === $lt98) || (C === $lt96)) {
          if (this.ResolveBracketOperatorClassOrRec(Params,ResolvedValue,Access)) return;
        } else if (C === $lt102) {
          if ($lt95.isPrototypeOf(ResolvedValue.IdentEl)) this.RaiseMsg(20170216152215,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"[",18,ResolvedValue.IdentEl.ElementTypeName()),Params);
          ReadAccessParamValue();
          this.CheckCallArrayCompatibility(TypeEl,Params,true,true);
          for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
            i = $l;
            this.AccessExpr(Params.Params[i],1);
          };
          return;
        } else if (C === $lt97) {
          if (CheckStringOrPointerIndex(false)) return;
        };
      };
      this.RaiseMsg(20170216152217,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"[",18,this.GetResolverResultDescription(ResolvedValue,true)),Params);
    };
    this.ResolveBracketOperatorClassOrRec = function (Params, ResolvedValue, Access) {
      var Result = false;
      var PropEl = null;
      var Value = null;
      var Group = null;
      var i = 0;
      var Scope = null;
      var HiType = null;
      var LoType = null;
      var IsClassOf = false;
      HiType = ResolvedValue.HiTypeEl;
      LoType = ResolvedValue.LoTypeEl;
      IsClassOf = LoType.$class.ClassType() === $lt96;
      if (IsClassOf) {
        HiType = LoType.DestType;
        LoType = this.ResolveAliasType(LoType,true);
      };
      Group = this.CreateGroupScope(HiType,true);
      PropEl = null;
      for (var $l = 0, $end = Group.Count - 1; $l <= $end; $l++) {
        i = $l;
        Scope = Group.Scopes[i];
        if ($lt30.isPrototypeOf(Scope)) {
          PropEl = Scope.DefaultProperty;
          if (PropEl !== null) break;
        };
      };
      Group = rtl.freeLoc(Group);
      if (PropEl === null) return false;
      if ((IsClassOf || $lt95.isPrototypeOf(ResolvedValue.IdentEl)) && !PropEl.GetIsClass()) this.RaiseMsg(20170216152213,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"[",18,this.GetResolverResultDescription(ResolvedValue,true)),Params);
      Value = Params.Value;
      if ($lt55.isPrototypeOf(Value.FData)) this.SetResolvedRefAccess(Value,Value.FData,1);
      this.CreateReference(PropEl,Params,Access,null);
      this.CheckCallPropertyCompatibility(PropEl,Params,true);
      this.FinishPropertyParamAccess(Params,PropEl);
      Result = true;
      return Result;
    };
    this.ResolveSetParamsExpr = function (Params) {
      var i = 0;
      var Param = null;
      var ParamResolved = $lt59.$new();
      if (Params.Value !== null) this.RaiseNotYetImplemented(20160930135910,Params,"");
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = Params.Params[i];
        this.ComputeElement(Param,ParamResolved,rtl.createSet(2,0),null);
      };
    };
    this.ResolveArrayValues = function (El) {
      var i = 0;
      for (var $l = 0, $end = rtl.length(El.Values) - 1; $l <= $end; $l++) {
        i = $l;
        this.ResolveExpr(El.Values[i],1);
      };
    };
    this.ResolveRecordValues = function (El) {
      var $Self = this;
      function GetMember(RecType, aName) {
        var Result = null;
        var i = 0;
        for (var $l = 0, $end = RecType.Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Result = rtl.getObject(RecType.Members.Get(i));
          if ($lp7(Result.FName,aName)) return Result;
        };
        if ($lt105.isPrototypeOf(RecType.VariantEl)) {
          Result = RecType.VariantEl;
          if ($lp7(Result.FName,aName)) return Result;
        };
        if (RecType.Variants !== null) for (var $l1 = 0, $end1 = RecType.Variants.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          Result = GetMember(rtl.getObject(RecType.Variants.Get(i)).Members,aName);
          if (Result !== null) return Result;
        };
        Result = null;
        return Result;
      };
      var i = 0;
      var j = 0;
      var Member = null;
      var RecType = null;
      var Field = null;
      var s = "";
      var ResolvedEl = $lt59.$new();
      this.ComputeElement(El,ResolvedEl,{},null);
      if ((ResolvedEl.BaseType !== 2) || (ResolvedEl.LoTypeEl.$class.ClassType() !== $lt98)) {
        this.RaiseIncompatibleTypeDesc(20180429104135,3028,[],"record value",this.GetTypeDescription$1(ResolvedEl,false),El);
      };
      RecType = ResolvedEl.LoTypeEl;
      for (var $l = 0, $end = rtl.length(El.Fields) - 1; $l <= $end; $l++) {
        i = $l;
        Field = El.Fields[i];
        Member = GetMember(RecType,Field.Name);
        if (Member === null) this.RaiseIdentifierNotFound(20180429104703,Field.Name,Field.NameExp);
        if (Member.$class.ClassType() !== $lt105) this.RaiseMsg(20180429121933,3080,rtl.getResStr($lm5,"sIdentifierXIsNotAnInstanceField"),[],Field.ValueExp);
        if (rtl.neSet(rtl.intersectSet(Member.VarModifiers,rtl.createSet(4,5)),{})) this.RaiseMsg(20190105221450,3080,rtl.getResStr($lm5,"sIdentifierXIsNotAnInstanceField"),$lp6(18,"record assignment"),Field.ValueExp);
        this.CreateReference(Member,Field.NameExp,2,null);
        for (var $l1 = 0, $end1 = i - 1; $l1 <= $end1; $l1++) {
          j = $l1;
          if ($lp7(Field.Name,El.Fields[j].Name)) this.RaiseMsg(20180429104942,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,Field.Name,18,this.GetElementSourcePosStr(El.Fields[j].NameExp)),Field.NameExp);
        };
        this.ResolveExpr(El.Fields[i].ValueExp,1);
        this.CheckAssignCompatibility(Member,Field.ValueExp,true,null);
      };
      s = "";
      for (var $l2 = 0, $end2 = RecType.Members.FCount - 1; $l2 <= $end2; $l2++) {
        i = $l2;
        Member = rtl.getObject(RecType.Members.Get(i));
        if (Member.$class.ClassType() !== $lt105) continue;
        if (rtl.neSet(rtl.intersectSet(Member.VarModifiers,rtl.createSet(4,5)),{})) continue;
        j = rtl.length(El.Fields) - 1;
        while ((j >= 0) && !$lp7(Member.FName,El.Fields[j].Name)) j -= 1;
        if (j < 0) {
          if (s !== "") s = s + ", ";
          if (s.length > 30) {
            s = s + "...";
            break;
          };
          s = s + Member.FName;
        };
      };
      if (s !== "") this.LogMsg(20180429121127,4,3109,rtl.getResStr($lm5,"sMissingFieldsX"),$lp6(18,s),El);
    };
    this.ResolveInlineSpecializeExpr = function (El, Access) {
      if (El.Params.FCount === 0) this.RaiseMsg(20190916155014,3031,rtl.getResStr($lm5,"sMissingParameterX"),$lp6(18,"type"),El);
      this.ResolveExpr(El.NameExpr,Access);
    };
    this.ResolveAccessor = function (Expr) {
      var $Self = this;
      var Result = null;
      function SubResolvePrimitive(Prim) {
        var Result = null;
        var FindData = $lt65.$new();
        var Ref = null;
        var Scope = null;
        var Abort = false;
        if (Prim.Kind !== 0) $Self.RaiseXExpectedButYFound(20170216151746,"class",Prim.Value,Prim);
        Scope = $Self.FTopScope;
        FindData.$assign($lt65.$new());
        FindData.ErrorPosEl = Expr;
        Abort = false;
        Scope.IterateElements(Prim.Value,Scope,rtl.createCallback($Self,"OnFindFirst"),FindData,{get: function () {
            return Abort;
          }, set: function (v) {
            Abort = v;
          }});
        Result = FindData.Found;
        if (Result === null) $Self.RaiseIdentifierNotFound(20170216151749,Prim.Value,Prim);
        Ref = $Self.CreateReference(Result,Prim,1,null);
        $Self.CheckFoundElementVisibility(FindData,Ref);
        return Result;
      };
      var Prim = null;
      var DeclEl = null;
      if (Expr.$class.ClassType() === $lt144) {
        DeclEl = null;
        if ($lt142.isPrototypeOf(Expr.Left)) {
          Prim = Expr.Left;
          DeclEl = SubResolvePrimitive(Prim);
          if (!$lt107.isPrototypeOf(DeclEl)) this.RaiseXExpectedButYFound(20170216151752,"class",$mod.GetElementTypeName(DeclEl),Prim);
        } else this.RaiseMsg(20170216151754,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,$lm4.OpcodeStrings[Expr.OpCode]),Expr);
        if (Expr.OpCode !== 27) this.RaiseMsg(20170216151757,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,$lm4.OpcodeStrings[Expr.OpCode]),Expr);
        if (DeclEl.$class.ClassType() === $lt94) {
          this.PushClassDotScope({get: function () {
              return DeclEl;
            }, set: function (v) {
              DeclEl = v;
            }},true)}
         else if (DeclEl.$class.ClassType() === $lt98) {
          this.PushRecordDotScope(DeclEl)}
         else this.RaiseMsg(20190123145559,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,$lm4.OpcodeStrings[Expr.OpCode]),Expr);
        Expr = Expr.Right;
        Result = this.ResolveAccessor(Expr);
        this.PopScope();
      } else if (Expr.$class.ClassType() === $lt142) {
        Prim = Expr;
        Result = SubResolvePrimitive(Prim);
      } else this.RaiseNotYetImplemented(20160922163436,Expr,"");
      return Result;
    };
    this.SetResolvedRefAccess = function (Expr, Ref, Access) {
      if (Ref.Access === Access) return;
      if (Access in rtl.createSet(0,6)) return;
      if (Expr === null) ;
      var $tmp = Ref.Access;
      if (($tmp === 0) || ($tmp === 6)) {
        Ref.Access = Access}
       else if ($tmp === 1) {
        if (Access in rtl.createSet(2,3,4,5)) {
          Ref.Access = 3}
         else return}
       else if (($tmp === 2) || ($tmp === 5)) {
        if (Access in rtl.createSet(1,3,4)) {
          Ref.Access = 3}
         else return}
       else if ($tmp === 3) {
        return}
       else if ($tmp === 4) {
        return}
       else {
        this.RaiseInternalError(20170403163727,"");
      };
    };
    this.AccessExpr = function (Expr, Access) {
      var Ref = null;
      var Bin = null;
      var Params = null;
      var ValueResolved = $lt59.$new();
      var C = null;
      if ($lt55.isPrototypeOf(Expr.FData)) {
        Ref = Expr.FData;
        this.SetResolvedRefAccess(Expr,Ref,Access);
      };
      C = Expr.$class.ClassType();
      if (C === $lt144) {
        Bin = Expr;
        if (Bin.OpCode in rtl.createSet(27,0)) this.AccessExpr(Bin.Right,Access);
      } else if (C === $lt145) {
        Params = Expr;
        var $tmp = Params.Kind;
        if ($tmp === 10) {
          if (this.IsTypeCast(Params)) {
            this.FinishCallArgAccess(Params.Params[0],Access)}
           else this.AccessExpr(Params.Value,Access)}
         else if ($tmp === 11) {
          this.ComputeElement(Params.Value,ValueResolved,{},null);
          if (this.IsDynArray(ValueResolved.LoTypeEl,false) || (ValueResolved.BaseType === 29)) {
            this.AccessExpr(Params.Value,1)}
           else this.AccessExpr(Params.Value,Access);
        } else if ($tmp === 4) {
          if (Access !== 1) this.RaiseMsg(20170306112306,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],Expr)}
         else {
          this.RaiseNotYetImplemented(20170403173831,Params,"");
        };
      } else if ((C === $lt142) && (Expr.Kind === 0)) {}
      else if (((Access in rtl.createSet(1,6)) && ((C === $lt142) || (C === $lt147) || (C === $lt146) || (C === $lt148) || (C === $lt151))) || (C === $lt152)) {}
      else if (C === $lt143) {
        this.AccessExpr(Expr.Operand,Access)}
       else {
        this.RaiseNotYetImplemented(20170306102158,Expr,"");
      };
    };
    this.MarkArrayExpr = function (Expr, ArrayType) {
      var Result = false;
      var Ref = null;
      if (Expr.FData === null) {
        this.CreateReference(ArrayType,Expr,1,null);
        Result = true;
      } else if ($lt55.isPrototypeOf(Expr.FData)) {
        Result = false;
        Ref = Expr.FData;
        if (!$lt102.isPrototypeOf(Ref.FDeclaration)) {
          this.RaiseNotYetImplemented(20180618102230,Expr,$lp2(Ref.FDeclaration));
        };
      } else this.RaiseNotYetImplemented(20180618102408,Expr,$lp2(Expr.FData));
      return Result;
    };
    this.MarkArrayExprRecursive = function (Expr, ArrType) {
      var $Self = this;
      function Traverse(CurExpr, ArrayType, RgIndex) {
        var Params = [];
        var i = 0;
        var ResolvedElType = $lt59.$new();
        var ParamsExpr = null;
        var BuiltInProc = null;
        var Ref = null;
        if ($Self.IsArrayOperatorAdd(CurExpr)) {
          Traverse(CurExpr.Left,ArrayType,RgIndex);
          Traverse(CurExpr.Right,ArrayType,RgIndex);
        } else if (CurExpr.$class.ClassType() === $lt145) {
          ParamsExpr = CurExpr;
          Params = ParamsExpr.Params;
          if (CurExpr.Kind === 4) {
            $Self.MarkArrayExpr(ParamsExpr,ArrayType);
            if (rtl.length(Params) === 0) return;
            RgIndex += 1;
            if (RgIndex > rtl.length(ArrayType.Ranges)) {
              if (ArrayType.ElType === null) return;
              $Self.ComputeElement(ArrayType.ElType,ResolvedElType,rtl.createSet(4),null);
              if ((ResolvedElType.BaseType === 2) && $lt102.isPrototypeOf(ResolvedElType.LoTypeEl)) {
                ArrayType = ResolvedElType.LoTypeEl;
                RgIndex = 0;
              } else return;
            };
            for (var $l = 0, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
              i = $l;
              Traverse(Params[i],ArrayType,RgIndex);
            };
          } else if (CurExpr.Kind === 10) {
            if ($lt55.isPrototypeOf(CurExpr.Value.FData)) {
              Ref = CurExpr.Value.FData;
              if ($lt83.isPrototypeOf(Ref.FDeclaration) && $lt64.isPrototypeOf(Ref.FDeclaration.FData)) {
                BuiltInProc = Ref.FDeclaration.FData;
                if (BuiltInProc.BuiltIn === 23) {
                  for (var $l1 = 0, $end1 = rtl.length(Params) - 1; $l1 <= $end1; $l1++) {
                    i = $l1;
                    Traverse(Params[i],ArrayType,RgIndex);
                  };
                } else if (BuiltInProc.BuiltIn === 25) Traverse(Params[0],ArrayType,RgIndex);
              };
            };
          };
        };
      };
      Traverse(Expr,ArrType,0);
    };
    this.DeanonymizeType = function (El) {
      var $Self = this;
      function InsertInFront(NewParent, Child, List) {
        var i = 0;
        var Prev = null;
        i = List.FCount - 1;
        while ((i >= 0) && (List.Get(i) !== Child)) i -= 1;
        if ($lt105.isPrototypeOf(Child)) {
          while (i > 0) {
            Prev = rtl.getObject(List.Get(i - 1));
            if ((Prev.$class.ClassType() === Child.$class.ClassType()) && (Prev.VarType === Child.VarType)) {
              i -= 1}
             else break;
          };
        };
        while ((i > 0) && (rtl.getObject(List.Get(i - 1)).$class.ClassType() === $lt154)) i -= 1;
        if (i < 0) {
          List.Add(El)}
         else List.Insert(i,El);
        El.SetParent(NewParent);
      };
      var Decl = null;
      var Child = null;
      var p = null;
      var MembersType = null;
      var CurName = "";
      if (this.FAnonymousElTypePostfix === "") return;
      if (El.FName !== "") this.RaiseNotYetImplemented(20220320121923,El,"");
      if (El.$class.ClassType() === $lt155) return;
      CurName = "";
      Child = El;
      p = El.FParent;
      do {
        if (p === null) this.RaiseNotYetImplemented(20220320165553,El,"");
        if ($lt156.isPrototypeOf(p) || $lt107.isPrototypeOf(p)) {
          if (CurName === "") this.RaiseMsg(20220320122946,3056,rtl.getResStr($lm5,"sCannotNestAnonymousX"),$lp6(18,$mod.GetElementTypeName(El)),El);
          El.FName = CurName + this.FAnonymousElTypePostfix;
          if ($lt156.isPrototypeOf(p)) {
            Decl = p;
            InsertInFront(Decl,Child,Decl.Declarations);
            Decl.Types.Add(El);
          } else if ($lt107.isPrototypeOf(p)) {
            MembersType = p;
            InsertInFront(MembersType,Child,MembersType.Members);
          };
          break;
        } else if (p.FName !== "") {
          if (CurName !== "") {
            this.RaiseMsg(20220320132732,3056,rtl.getResStr($lm5,"sCannotNestAnonymousX"),$lp6(18,$mod.GetElementTypeName(El)),El)}
           else CurName = p.FName;
        };
        Child = p;
        p = p.FParent;
      } while (!false);
    };
    this.FinishModule = function (CurModule) {
      var CurModuleClass = null;
      var i = 0;
      var ModScope = null;
      this.FStep = 2;
      CurModuleClass = CurModule.$class.ClassType();
      ModScope = rtl.as(CurModule.FData,$lt15);
      if (15 in this.FCurrentParser.FScanner.FCurrentBoolSwitches) {
        ModScope.Flags = rtl.includeSet(ModScope.Flags,1);
        this.FindRangeErrorConstructors(null);
      };
      if (CurModuleClass === $lt113) {
        this.FinishSection(CurModule.ProgramSection);
        this.ResolveImplBlock(CurModule.InitializationSection);
      } else if (CurModuleClass === $lt114) {
        this.FinishSection(CurModule.LibrarySection);
        this.ResolveImplBlock(CurModule.InitializationSection);
        this.ResolveImplBlock(CurModule.FinalizationSection);
      } else if (CurModuleClass === $lt86) {
        this.FinishSection(CurModule.InterfaceSection);
        if (CurModule.ImplementationSection !== null) this.FinishSection(CurModule.ImplementationSection);
        if (CurModule.FinalizationSection !== null) this.ResolveImplBlock(CurModule.FinalizationSection);
        if (CurModule.InitializationSection !== null) this.ResolveImplBlock(CurModule.InitializationSection);
      } else this.RaiseInternalError(20160922163327,"");
      for (var $l = 0, $end = this.FPendingForwardProcs.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.CheckPendingForwardProcs(rtl.getObject(this.FPendingForwardProcs.Get(i)));
      };
      this.FPendingForwardProcs.Clear();
      while ((this.FTopScope !== null) && (this.FTopScope.$class.ClassType() === this.FScopeClass_Section)) this.PopScope();
      this.CheckTopScope(this.FScopeClass_Module,false);
      this.PopScope();
      this.FStep = 3;
      if ((this.FCurrentParser !== null) && (this.FCurrentParser.FScanner !== null)) {
        this.FCurrentParser.NextToken();
        if (this.FCurrentParser.FScanner.FCurToken !== 0) this.LogMsg(20180628131456,4,3058,rtl.getResStr($lm5,"sTextAfterFinalIgnored") + " " + this.FCurrentParser.FScanner.FormatCurrentSrcPos(),[],CurModule);
      };
    };
    this.FinishUsesClause = function () {
      var Section = null;
      var i = 0;
      var j = 0;
      var PublicEl = null;
      var UseModule = null;
      var Scope = null;
      var UsesScope = null;
      var UseUnit = null;
      var FirstName = "";
      var p = 0;
      var OldIdentifier = null;
      var IntfHelpers = [];
      this.CheckTopScope(this.FScopeClass_Section,false);
      Scope = this.FTopScope;
      Section = Scope.FElement;
      if (Scope.UsesFinished) this.RaiseInternalError(20180305145220,"");
      Scope.UsesFinished = true;
      for (var $l = 0, $end = Section.UsesList.FCount - 1; $l <= $end; $l++) {
        i = $l;
        UseUnit = Section.UsesClause[i];
        UseModule = UseUnit.Module;
        PublicEl = null;
        if (UseModule.$class.ClassType() === $lt114) {
          PublicEl = UseModule.LibrarySection}
         else if (UseModule.$class.ClassType() === $lt86) {
          PublicEl = UseModule.InterfaceSection}
         else this.RaiseXExpectedButYFound(20170503004803,"unit",$mod.GetElementTypeName(UseModule),UseUnit);
        if (PublicEl === null) this.RaiseInternalError(20160922163352,"uses element has no interface section: " + $lp2(UseModule));
        if (PublicEl.FData === null) this.RaiseInternalError(20160922163358,"uses element has no resolver data: " + UseUnit.FName + "->" + $lp2(PublicEl));
        if (!$lt22.isPrototypeOf(PublicEl.FData)) this.RaiseInternalError(20160922163403,"uses element has invalid resolver data: " + UseUnit.FName + "->" + $lp2(PublicEl) + "->" + PublicEl.FData.$classname);
        UsesScope = PublicEl.FData;
        this.AddIdentifier(Scope,UseUnit.FName,UseUnit,3);
        Scope.UsesScopes.Add(UsesScope);
        IntfHelpers = UsesScope.Helpers;
        for (var $l1 = 0, $end1 = rtl.length(IntfHelpers) - 1; $l1 <= $end1; $l1++) {
          j = $l1;
          this.AddActiveHelper(IntfHelpers[j].Helper);
        };
        this.EmitElementHints(UseUnit,UseModule);
      };
      for (var $l2 = Section.UsesList.FCount - 1; $l2 >= 0; $l2--) {
        i = $l2;
        UseUnit = Section.UsesClause[i];
        FirstName = UseUnit.FName;
        p = $lp13(".",FirstName);
        if (p < 1) continue;
        FirstName = $lp11(FirstName,p - 1);
        OldIdentifier = Scope.FindLocalIdentifier(FirstName);
        if (OldIdentifier === null) this.AddIdentifier(Scope,FirstName,UseUnit,5);
      };
    };
    this.FinishSection = function (Section) {
      var Scope = null;
      Scope = rtl.as(Section.FData,$lt22);
      if (Scope.Finished) return;
      Scope.Finished = true;
      if ($lt109.isPrototypeOf(Section)) this.FinishInterfaceSection(Section);
    };
    this.FinishInterfaceSection = function (Section) {
      this.FHub.FinishedInterfaceCount += 1;
      this.FFinishedInterfaceIndex = this.FHub.FinishedInterfaceCount;
      this.NotifyPendingUsedInterfaces();
      if (Section === null) ;
    };
    this.FinishTypeSection = function (El) {
      var $Self = this;
      function FinishDeclarations(El) {
        var i = 0;
        var Decl = null;
        for (var $l = 0, $end = El.Declarations.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Decl = rtl.getObject(El.Declarations.Get(i));
          if ($lt95.isPrototypeOf(Decl)) $Self.FinishTypeSectionEl(Decl);
        };
      };
      function FinishMembersType(El) {
        var i = 0;
        var Decl = null;
        for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Decl = rtl.getObject(El.Members.Get(i));
          if ($lt95.isPrototypeOf(Decl)) $Self.FinishTypeSectionEl(Decl);
        };
      };
      if ($lt156.isPrototypeOf(El)) {
        FinishDeclarations(El)}
       else if ($lt107.isPrototypeOf(El)) {
        FinishMembersType(El)}
       else this.RaiseNotYetImplemented(20181226105933,El,"");
    };
    this.FinishTypeSectionEl = function (El) {
      var $Self = this;
      function ReplaceDestType(Decl, DestType, DestName, MustExist, ErrorEl) {
        var Result = false;
        var Abort = false;
        var Data = $lt65.$new();
        Abort = false;
        Data.$assign($lt65.$new());
        Data.ErrorPosEl = ErrorEl;
        rtl.as($Self.FTopScope,$lt18).IterateElements(DestName,$Self.FTopScope,rtl.createCallback($Self,"OnFindFirst"),Data,{get: function () {
            return Abort;
          }, set: function (v) {
            Abort = v;
          }});
        if (Data.Found === null) if (MustExist) {
          $Self.RaiseIdentifierNotFound(20170216151543,DestName,ErrorEl);
        } else return false;
        if (Data.Found === DestType.get()) return Result;
        if ($lt96.isPrototypeOf(Decl)) {
          if ((Data.Found.$class.ClassType() !== $lt94) || (Data.Found.ObjKind !== 1)) $Self.RaiseXExpectedButYFound(20170216151548,"class",$mod.GetElementTypeName(Data.Found),ErrorEl);
        };
        DestType.set(Data.Found);
        $Self.CheckUseAsType(DestType.get(),20190123100649,El);
        if ($lt97.isPrototypeOf(Decl)) $Self.CheckPointerCycle(Decl);
        Result = true;
        return Result;
      };
      var C = null;
      var ClassOfEl = null;
      var TypeEl = null;
      var UnresolvedEl = null;
      var OldClassType = null;
      var PtrType = null;
      C = El.$class.ClassType();
      if (C === $lt94) {
        if (El.IsForward && !$lt55.isPrototypeOf(El.FData)) this.RaiseMsg(20170216151534,3014,rtl.getResStr($lm5,"sForwardTypeNotResolved"),$lp6(18,El.FName),El);
      } else if (C === $lt96) {
        ClassOfEl = El;
        TypeEl = this.ResolveAliasType(ClassOfEl.DestType,true);
        if (TypeEl.$class.ClassType() === $lt4) {
          UnresolvedEl = TypeEl;
          ReplaceDestType(ClassOfEl,{p: ClassOfEl, get: function () {
              return this.p.DestType;
            }, set: function (v) {
              this.p.DestType = v;
            }},TypeEl.FName,true,UnresolvedEl);
        } else if (TypeEl.$class.ClassType() === $lt94) {
          OldClassType = rtl.as(TypeEl,$lt94);
          if (OldClassType.FParent === ClassOfEl.FParent) return;
          ReplaceDestType(ClassOfEl,{p: ClassOfEl, get: function () {
              return this.p.DestType;
            }, set: function (v) {
              this.p.DestType = v;
            }},ClassOfEl.DestType.FName,false,ClassOfEl);
        };
      } else if (C === $lt97) {
        PtrType = El;
        TypeEl = this.ResolveAliasType(PtrType.DestType,true);
        if (TypeEl.$class.ClassType() === $lt4) {
          UnresolvedEl = TypeEl;
          ReplaceDestType(PtrType,{p: PtrType, get: function () {
              return this.p.DestType;
            }, set: function (v) {
              this.p.DestType = v;
            }},TypeEl.FName,true,UnresolvedEl);
        } else {
          if (TypeEl.FParent === PtrType.FParent) return;
          ReplaceDestType(PtrType,{p: PtrType, get: function () {
              return this.p.DestType;
            }, set: function (v) {
              this.p.DestType = v;
            }},TypeEl.FName,false,PtrType);
        };
      };
    };
    this.FinishTypeDef = function (El) {
      var C = null;
      C = El.$class.ClassType();
      if (C === $lt99) {
        this.FinishEnumType(El)}
       else if (C === $lt119) {
        this.FinishSetType(El)}
       else if (C === $lt103) {
        this.FinishRangeType(El)}
       else if (C === $lt98) {
        this.FinishRecordType(El)}
       else if (C === $lt94) {
        this.FinishClassType(El)}
       else if (C === $lt96) {
        this.FinishClassOfType(El)}
       else if (C === $lt97) {
        this.FinishPointerType(El)}
       else if (C === $lt102) {
        this.FinishArrayType(El)}
       else if ((C === $lt157) || (C === $lt158)) {
        this.FinishAliasType(El)}
       else if (C === $lt97) {
        this.EmitTypeHints(El,El.DestType)}
       else if (C === $lt104) {
        this.FinishGenericTemplateType(El)}
       else if (C === $lt155) this.FinishSpecializeType(El);
    };
    this.FinishEnumType = function (El) {
      if (this.FTopScope.FElement === El) this.PopScope();
    };
    this.FinishSetType = function (El) {
      var $Self = this;
      function GetEnumTypePosEl() {
        var Result = null;
        Result = El.EnumType;
        if (Result.FParent !== El) Result = El;
        return Result;
      };
      var BaseTypeData = null;
      var StartResolved = $lt59.$new();
      var EndResolved = $lt59.$new();
      var RangeExpr = null;
      var C = null;
      var EnumType = null;
      EnumType = this.ResolveAliasType(El.EnumType,true);
      C = EnumType.$class.ClassType();
      if (C === $lt99) {
        this.FinishSubElementType(El,EnumType);
        return;
      } else if (C === $lt103) {
        RangeExpr = EnumType.RangeExpr;
        if ((RangeExpr.FParent === El) && (RangeExpr.FData === null)) this.FinishConstRangeExpr(RangeExpr,StartResolved,EndResolved);
        this.FinishSubElementType(El,EnumType);
        return;
      } else if (C === $lt83) {
        if ($lt62.isPrototypeOf(EnumType.FData)) {
          BaseTypeData = EnumType.FData;
          if (BaseTypeData.BaseType in rtl.unionSet($mod.btAllChars,rtl.createSet(15,19))) return;
          this.RaiseXExpectedButYFound(20170216151553,"Char or boolean",$mod.GetElementTypeName(EnumType),GetEnumTypePosEl());
        };
      };
      this.RaiseXExpectedButYFound(20170216151557,"enum type",$mod.GetElementTypeName(EnumType),GetEnumTypePosEl());
    };
    this.FinishSubElementType = function (Parent, El) {
      var EnumScope = null;
      this.EmitTypeHints(Parent,El);
      if ((El.FName !== "") || (this.FAnonymousElTypePostfix === "")) return;
      if (El.FParent !== Parent) this.RaiseNotYetImplemented(20220320123426,Parent,$mod.GetElementTypeName(El));
      this.DeanonymizeType(El);
      if ((El.$class.ClassType() === $lt99) && (Parent.$class.ClassType() === $lt119)) {
        EnumScope = El.FData;
        if (EnumScope.CanonicalSet !== Parent) {
          EnumScope.CanonicalSet = Parent;
        };
      };
    };
    this.FinishRangeType = function (El) {
      var RangeExpr = null;
      var StartResolved = $lt59.$new();
      var EndResolved = $lt59.$new();
      RangeExpr = El.RangeExpr;
      this.ResolveExpr(RangeExpr.Left,1);
      this.ResolveExpr(RangeExpr.Right,1);
      this.FinishConstRangeExpr(RangeExpr,StartResolved,EndResolved);
    };
    this.FinishConstRangeExpr = function (RangeExpr, LeftResolved, RightResolved) {
      var RgValue = null;
      var Left = null;
      var Right = null;
      Left = RangeExpr.Left;
      Right = RangeExpr.Right;
      this.ComputeElement(Left,LeftResolved,rtl.createSet(3),null);
      this.ComputeElement(Right,RightResolved,rtl.createSet(3),null);
      this.CheckSetLitElCompatible(Left,Right,LeftResolved,RightResolved);
      RgValue = this.Eval(RangeExpr,rtl.createSet(0),true);
      $lp12({get: function () {
          return RgValue;
        }, set: function (v) {
          RgValue = v;
        }});
    };
    this.FinishRecordType = function (El) {
      var Scope = null;
      if (this.FTopScope.FElement !== El) this.RaiseNotYetImplemented(20190801232042,El,"");
      this.PopScope();
      Scope = rtl.as(El.FData,$lt31);
      this.FinishGenericClassOrRecIntf(Scope);
    };
    var TMethResolution = rtl.recNewT(null,"",function () {
      this.InterfaceIndex = 0;
      this.ProcClassType = null;
      this.InterfaceName = "";
      this.ImplementName = "";
      this.ResolutionEl = null;
      this.Count = 0;
      this.$eq = function (b) {
        return (this.InterfaceIndex === b.InterfaceIndex) && (this.ProcClassType === b.ProcClassType) && (this.InterfaceName === b.InterfaceName) && (this.ImplementName === b.ImplementName) && (this.ResolutionEl === b.ResolutionEl) && (this.Count === b.Count);
      };
      this.$assign = function (s) {
        this.InterfaceIndex = s.InterfaceIndex;
        this.ProcClassType = s.ProcClassType;
        this.InterfaceName = s.InterfaceName;
        this.ImplementName = s.ImplementName;
        this.ResolutionEl = s.ResolutionEl;
        this.Count = s.Count;
        return this;
      };
    });
    this.FinishClassType = function (El) {
      var ClassScope = null;
      var i = 0;
      var j = 0;
      var k = 0;
      var IntfType = null;
      var Resolutions = [];
      var map = null;
      var o = null;
      var Member = null;
      var Parent = null;
      var IntfProc = null;
      var FindData = $lt78.$new();
      var Abort = false;
      var MethRes = null;
      var ResolvedEl = $lt59.$new();
      var ProcName = "";
      var IntfProcName = "";
      var Expr = null;
      var SectionScope = null;
      Resolutions = [];
      ClassScope = null;
      if (!El.IsForward) {
        if (this.FTopScope.FElement !== El) this.RaiseInternalError(20180322142534,$lp2(El) + "<>" + $lp2(this.FTopScope.FElement));
        ClassScope = rtl.as(El.FData,$lt34);
        if (ClassScope === null) this.RaiseNotYetImplemented(20190803204709,El,"");
        if (El.ObjKind === 1) {
          if (El.Interfaces.FCount > 0) {
            if (ClassScope.Interfaces === null) this.RaiseInternalError(20180408162725,"");
            if (ClassScope.Interfaces.FCount !== El.Interfaces.FCount) this.RaiseInternalError(20180408162746,"");
          } else if (ClassScope.Interfaces !== null) this.RaiseInternalError(20180408162803,"");
          for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Member = rtl.getObject(El.Members.Get(i));
            if (!$lt159.isPrototypeOf(Member)) continue;
            MethRes = Member;
            this.ComputeElement(MethRes.InterfaceName,ResolvedEl,rtl.createSet(1),null);
            if (!$lt95.isPrototypeOf(ResolvedEl.IdentEl)) this.RaiseInternalError(20180323135729,$mod.GetResolverResultDbg(ResolvedEl));
            j = El.Interfaces.IndexOf(ResolvedEl.IdentEl);
            if (j < 0) this.RaiseInternalError(20180323135900,$mod.GetResolverResultDbg(ResolvedEl));
            o = rtl.getObject(ClassScope.Interfaces.Get(j));
            if ($lt88.isPrototypeOf(o)) this.RaiseMsg(20180323140046,3089,rtl.getResStr($lm5,"sCannotMixMethodResolutionAndDelegationAtX"),$lp6(18,this.GetElementSourcePosStr(o)),MethRes.InterfaceName);
            if (o === null) o = this.CreateClassIntfMap(El,j);
            map = o;
            Expr = MethRes.InterfaceProc;
            if (!$lt142.isPrototypeOf(Expr)) this.RaiseXExpectedButYFound(20180327162230,"method name",$mod.GetElementTypeName(Expr),Expr);
            if (Expr.Kind !== 0) this.RaiseXExpectedButYFound(20180327162236,"method name",$mod.GetElementTypeName(Expr),Expr);
            IntfProcName = Expr.Value;
            Expr = MethRes.ImplementationProc;
            if (!$lt142.isPrototypeOf(Expr)) this.RaiseXExpectedButYFound(20180327152115,"method name",$mod.GetElementTypeName(Expr),Expr);
            if (Expr.Kind !== 0) this.RaiseXExpectedButYFound(20180327152157,"method name",$mod.GetElementTypeName(Expr),Expr);
            ProcName = Expr.Value;
            for (var $l1 = 0, $end1 = rtl.length(Resolutions) - 1; $l1 <= $end1; $l1++) {
              k = $l1;
              var $with = Resolutions[k];
              if (($with.InterfaceIndex === j) && ($with.ProcClassType === MethRes.ProcClass) && ($with.InterfaceName === IntfProcName)) this.RaiseMsg(20180327164626,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,$mod.GetElementTypeName$1($with.ProcClassType) + " " + map.Intf.FName + "." + $with.InterfaceName,18,this.GetElementSourcePosStr($with.ResolutionEl)),MethRes.InterfaceProc);
            };
            k = rtl.length(Resolutions);
            Resolutions = rtl.arraySetLength(Resolutions,TMethResolution,k + 1);
            var $with1 = Resolutions[k];
            $with1.InterfaceIndex = j;
            $with1.ProcClassType = MethRes.ProcClass;
            $with1.InterfaceName = IntfProcName;
            $with1.ImplementName = ProcName;
            $with1.ResolutionEl = MethRes;
            $with1.Count = 0;
          };
          for (var $l2 = 0, $end2 = El.Interfaces.FCount - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            o = rtl.getObject(ClassScope.Interfaces.Get(i));
            if ($lt88.isPrototypeOf(o)) continue;
            if (o === null) o = this.CreateClassIntfMap(El,i);
            map = o;
            while (map !== null) {
              IntfType = map.Intf;
              for (var $l3 = 0, $end3 = IntfType.Members.FCount - 1; $l3 <= $end3; $l3++) {
                j = $l3;
                Member = rtl.getObject(IntfType.Members.Get(j));
                if (!$lt90.isPrototypeOf(Member)) continue;
                IntfProc = Member;
                ProcName = IntfProc.FName;
                for (var $l4 = 0, $end4 = rtl.length(Resolutions) - 1; $l4 <= $end4; $l4++) {
                  k = $l4;
                  var $with2 = Resolutions[k];
                  if (($with2.InterfaceIndex === i) && ($with2.ProcClassType === IntfProc.$class.ClassType()) && $lp7($with2.InterfaceName,IntfProc.FName)) {
                    ProcName = $with2.ImplementName;
                    $with2.Count += 1;
                  };
                };
                FindData.$assign($lt78.$new());
                FindData.Proc = IntfProc;
                FindData.Args = IntfProc.ProcType.Args;
                FindData.Kind = 0;
                Abort = false;
                this.IterateElements(ProcName,rtl.createCallback(this,"OnFindProcDeclaration"),FindData,{get: function () {
                    return Abort;
                  }, set: function (v) {
                    Abort = v;
                  }});
                if (FindData.Found === null) this.RaiseMsg(20180322143202,5042,rtl.getResStr($lm5,"sNoMatchingImplForIntfMethodXFound"),$lp6(18,this.GetProcTypeDescription(IntfProc.ProcType,rtl.createSet(0,1,2))),El);
                this.CheckProcSignatureMatch(IntfProc,FindData.Found,true);
                map.Procs.Put(j,FindData.Found);
              };
              map = map.AncestorMap;
            };
          };
        };
        if (El.ObjKind in $lm4.okAllHelpers) {
          this.AddActiveHelper(El);
          Parent = El.FParent;
          while (Parent !== null) {
            if (Parent.$class.ClassType() === $lt109) {
              SectionScope = rtl.as(Parent.FData,$lt22);
              this.AddHelper(El,{p: SectionScope, get: function () {
                  return this.p.Helpers;
                }, set: function (v) {
                  this.p.Helpers = v;
                }});
              break;
            };
            Parent = Parent.FParent;
          };
        };
      };
      if (this.FTopScope.FElement === El) this.PopScope();
      if ($lt25.isPrototypeOf(this.FTopScope)) this.PopGenericParamScope(El);
      if (!El.IsForward) this.FinishGenericClassOrRecIntf(ClassScope);
    };
    this.FinishClassOfType = function (El) {
      var TypeEl = null;
      TypeEl = this.ResolveAliasType(El.DestType,true);
      if ($lt4.isPrototypeOf(TypeEl)) return;
      if ($lt94.isPrototypeOf(TypeEl) && (TypeEl.ObjKind === 1)) return;
      this.RaiseMsg(20170216151602,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,El.DestType.FName,18,"class"),El);
    };
    this.FinishPointerType = function (El) {
      var TypeEl = null;
      TypeEl = this.ResolveAliasType(El.DestType,true);
      if ($lt4.isPrototypeOf(TypeEl)) return;
      if (El.DestType.FParent === El) this.RaiseMsg(20180429094237,3002,rtl.getResStr($lm5,"sNotYetImplemented"),$lp6(18,"pointer of anonymous type"),El.DestType);
      this.CheckUseAsType(El.DestType,20190123095118,El);
      this.CheckPointerCycle(El);
    };
    this.FinishArrayType = function (El) {
      var i = 0;
      var Expr = null;
      var RangeResolved = $lt59.$new();
      var TypeEl = null;
      var Parent = null;
      var Scope = null;
      Parent = El;
      do {
        if (Parent === El.ElType) this.RaiseMsg(20190807104630,3044,rtl.getResStr($lm5,"sIllegalExpression"),[],El);
        if ($lt102.isPrototypeOf(Parent.FParent)) {
          Parent = Parent.FParent}
         else break;
      } while (!false);
      for (var $l = 0, $end = rtl.length(El.Ranges) - 1; $l <= $end; $l++) {
        i = $l;
        Expr = El.Ranges[i];
        this.ResolveExpr(Expr,1);
        this.ComputeElement(Expr,RangeResolved,rtl.createSet(3),null);
        if ((RangeResolved.IdentEl !== null) && !$lt95.isPrototypeOf(RangeResolved.IdentEl)) {
          this.RaiseXExpectedButYFound(20170216151607,"range",$mod.GetElementTypeName(RangeResolved.IdentEl),Expr);
        };
        if (RangeResolved.BaseType === 37) {
          if (RangeResolved.SubType in $mod.btArrayRangeTypes) {}
          else if (RangeResolved.SubType === 2) {
            TypeEl = RangeResolved.LoTypeEl;
            if ($lt103.isPrototypeOf(TypeEl)) {}
            else if ($lt99.isPrototypeOf(TypeEl)) {}
            else this.RaiseXExpectedButYFound(20171009193629,"range",$mod.GetElementTypeName(RangeResolved.IdentEl),Expr);
          } else this.RaiseXExpectedButYFound(20171009193514,"range",$mod.GetElementTypeName(RangeResolved.IdentEl),Expr);
        } else if (RangeResolved.BaseType in $mod.btArrayRangeTypes) {}
        else if ((RangeResolved.BaseType === 2) && $lt99.isPrototypeOf(RangeResolved.LoTypeEl)) {}
        else if ((RangeResolved.BaseType === 2) && $lt104.isPrototypeOf(RangeResolved.LoTypeEl)) {}
        else if (RangeResolved.IdentEl !== null) {
          this.RaiseXExpectedButYFound(20170216151609,"range",$mod.GetElementTypeName(RangeResolved.IdentEl),Expr)}
         else this.RaiseXExpectedButYFound(20190830215123,"range",this.GetResolverResultDescription(RangeResolved,false),Expr);
      };
      if (El.ElType === null) {
        if (rtl.length(El.Ranges) > 0) this.RaiseNotYetImplemented(20190215102529,El,"");
        this.FindTVarRec(El);
      } else {
        this.CheckUseAsType(El.ElType,20190123095401,El);
        this.FinishSubElementType(El,El.ElType);
      };
      if ($lt28.isPrototypeOf(El.FData)) {
        Scope = El.FData;
        Scope.GenericStep = 2;
      };
      if (this.FTopScope.FElement === El) this.PopScope();
    };
    this.FinishAliasType = function (El) {
      var aType = null;
      aType = this.ResolveAliasType(El,true);
      if ($lt107.isPrototypeOf(aType) && (aType.FData === null)) return;
      if ($lt93.isPrototypeOf(aType) && (this.GetTypeParameterCount(aType) > 0)) this.RaiseMsg(20190818135830,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"type",18,this.GetTypeDescription(aType,false)),El);
      this.EmitTypeHints(El,El.DestType);
    };
    this.FinishGenericTemplateType = function (El) {
      var $Self = this;
      var ConEl = null;
      function RaiseCannotBeTogether(Id, X, Y) {
        $Self.RaiseMsg(Id,3128,rtl.getResStr($lm5,"sConstraintXAndConstraintYCannotBeTogether"),$lp6(18,X,18,Y),$Self.GetGenericConstraintErrorEl(ConEl,El));
      };
      function RaiseXIsNotAValidConstraint(Id, X) {
        $Self.RaiseMsg(Id,3129,rtl.getResStr($lm5,"sXIsNotAValidConstraint"),$lp6(18,X),$Self.GetGenericConstraintErrorEl(ConEl,El));
      };
      var i = 0;
      var IsClass = false;
      var IsRecord = false;
      var IsConstructor = false;
      var LastType = null;
      var MemberType = null;
      var aClass = null;
      var ConToken = 0;
      var ResolvedEl = $lt59.$new();
      IsClass = false;
      IsRecord = false;
      IsConstructor = false;
      LastType = null;
      for (var $l = 0, $end = rtl.length(El.Constraints) - 1; $l <= $end; $l++) {
        i = $l;
        ConEl = El.Constraints[i];
        ConToken = this.GetGenericConstraintKeyword(ConEl);
        var $tmp = ConToken;
        if ($tmp === 47) {
          if (IsClass) this.RaiseMsg(20190720202412,3127,rtl.getResStr($lm5,"sConstraintXSpecifiedMoreThanOnce"),$lp6(18,"class"),ConEl);
          if (IsRecord) RaiseCannotBeTogether(20190720202516,"record","class");
          if (LastType !== null) RaiseCannotBeTogether(20190720205708,LastType.FName,"class");
          IsClass = true;
        } else if ($tmp === 96) {
          if (IsRecord) this.RaiseMsg(20190720203028,3127,rtl.getResStr($lm5,"sConstraintXSpecifiedMoreThanOnce"),$lp6(18,"record"),ConEl);
          if (IsClass) RaiseCannotBeTogether(20190720203039,"class","record");
          if (IsConstructor) RaiseCannotBeTogether(20190720203056,"constructor","record");
          if (LastType !== null) RaiseCannotBeTogether(20190720205938,LastType.FName,"record");
          IsRecord = true;
        } else if ($tmp === 50) {
          if (IsConstructor) this.RaiseMsg(20190720203123,3127,rtl.getResStr($lm5,"sConstraintXSpecifiedMoreThanOnce"),$lp6(18,"constructor"),ConEl);
          if (IsRecord) RaiseCannotBeTogether(20190720203148,"record","constructor");
          if (LastType !== null) RaiseCannotBeTogether(20190720210005,LastType.FName,"constructor");
          IsConstructor = true;
        } else {
          if (!$lt95.isPrototypeOf(ConEl)) RaiseXIsNotAValidConstraint(20190912215619,$mod.GetElementTypeName(ConEl));
          this.ComputeElement(ConEl,ResolvedEl,rtl.createSet(4),null);
          if (ResolvedEl.BaseType !== 2) RaiseXIsNotAValidConstraint(20190914105144,$mod.GetElementTypeName(ConEl));
          if (IsRecord) RaiseCannotBeTogether(20190720210130,"record",ResolvedEl.HiTypeEl.FName);
          if (IsClass) RaiseCannotBeTogether(20190720210202,"class",ResolvedEl.HiTypeEl.FName);
          if (IsConstructor) RaiseCannotBeTogether(20190720210244,"constructor",ResolvedEl.HiTypeEl.FName);
          if ($lt104.isPrototypeOf(ResolvedEl.LoTypeEl)) {
            if (ResolvedEl.LoTypeEl === El) this.RaiseMsg(20200820185313,3106,rtl.getResStr($lm5,"sTypeCycleFound"),[],this.GetGenericConstraintErrorEl(ConEl,El));
            if (rtl.length(El.Constraints) > 1) RaiseXIsNotAValidConstraint(20190831213645,ResolvedEl.HiTypeEl.FName);
          } else if ($lt107.isPrototypeOf(ResolvedEl.LoTypeEl)) {
            MemberType = ResolvedEl.LoTypeEl;
            if ($lt94.isPrototypeOf(MemberType)) {
              aClass = MemberType;
              var $tmp1 = aClass.ObjKind;
              if ($tmp1 === 1) {
                if (LastType !== null) RaiseCannotBeTogether(20190720210351,LastType.FName,MemberType.FName);
              } else if ($tmp1 === 2) {
                if (LastType !== null) {
                  if (!$lt94.isPrototypeOf(LastType)) RaiseCannotBeTogether(20190720211236,LastType.FName,MemberType.FName);
                  if (LastType.ObjKind !== 2) RaiseCannotBeTogether(20190720211304,LastType.FName,MemberType.FName);
                };
              } else {
                RaiseXIsNotAValidConstraint(20190720210919,MemberType.FName);
              };
            } else RaiseXIsNotAValidConstraint(20190720210809,MemberType.FName);
          } else RaiseXIsNotAValidConstraint(20190720204604,this.GetResolverResultDescription(ResolvedEl,true));
          LastType = ResolvedEl.LoTypeEl;
        };
      };
    };
    this.FinishSpecializeType = function (El) {
      var Params = null;
      var GenericTemplateList = null;
      var P = null;
      var DestType = null;
      var i = 0;
      var ScopeDepth = 0;
      var GenType = null;
      ScopeDepth = this.StashSubExprScopes();
      Params = El.Params;
      if (Params.FCount === 0) this.RaiseMsg(20190724114416,3031,rtl.getResStr($lm5,"sMissingParameterX"),$lp6(18,"type"),El);
      for (var $l = 0, $end = Params.FCount - 1; $l <= $end; $l++) {
        i = $l;
        P = rtl.getObject(Params.Get(i));
        if ($lt153.isPrototypeOf(P)) {
          this.ResolveExpr(P,1)}
         else if ($lt95.isPrototypeOf(P)) {}
        else this.RaiseMsg(20190728113336,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"type identifier",18,$lp2(P) + " parameter " + $lp5(i + 1)),El);
      };
      this.RestoreStashedScopes(ScopeDepth);
      DestType = El.DestType;
      if (DestType === null) {
        this.RaiseMsg(20190725184734,3001,rtl.getResStr($lm5,"sIdentifierNotFound"),$lp6(18,"specialize type"),El)}
       else if (!$lt93.isPrototypeOf(DestType)) this.RaiseMsg(20190725193552,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"generic type",18,DestType.FName),El);
      GenType = DestType;
      GenericTemplateList = GenType.GenericTemplateTypes;
      if (GenericTemplateList === null) this.RaiseMsg(20190725194222,3130,rtl.getResStr($lm5,"sWrongNumberOfParametersForGenericX"),$lp6(18,"type " + DestType.FName),El);
      if (GenericTemplateList.FCount !== Params.FCount) this.RaiseMsg(20190801222656,3130,rtl.getResStr($lm5,"sWrongNumberOfParametersForGenericX"),$lp6(18,"type " + DestType.FName),El);
      this.GetSpecializedEl(El,GenType,Params);
    };
    this.FinishResourcestring = function (El) {
      var ResolvedEl = $lt59.$new();
      this.ResolveExpr(El.Expr,1);
      this.ComputeElement(El.Expr,ResolvedEl,rtl.createSet(3),null);
      if (!(ResolvedEl.BaseType in $mod.btAllStringAndChars)) this.RaiseXExpectedButYFound(20171004135753,"string",this.GetTypeDescription$1(ResolvedEl,false),El.Expr);
    };
    this.FinishProcedure = function (Proc) {
      var i = 0;
      var Body = null;
      var SubEl = null;
      var SubProcScope = null;
      var ProcScope = null;
      var DeclProcScope = null;
      var SpecializedItem = null;
      this.CheckTopScope(this.FScopeClass_Proc,false);
      ProcScope = this.FTopScope;
      if (ProcScope.FElement !== Proc) this.RaiseInternalError(20170220163043,"");
      SpecializedItem = ProcScope.SpecializedFromItem;
      if (SpecializedItem !== null) {
        if (SpecializedItem.Step < 3) this.RaiseNotYetImplemented(20190920184908,Proc,"");
        if (SpecializedItem.Step > 3) this.RaiseNotYetImplemented(20190920185123,Proc,"");
      };
      Body = Proc.Body;
      if (Body !== null) {
        this.StoreScannerFlagsInProc(ProcScope);
        if ($lt136.isPrototypeOf(Body.Body)) Proc.FModifiers = rtl.unionSet(Proc.FModifiers,rtl.createSet(9));
        this.ResolveImplBlock(Body.Body);
        for (var $l = 0, $end = Body.Declarations.FCount - 1; $l <= $end; $l++) {
          i = $l;
          SubEl = rtl.getObject(Body.Declarations.Get(i));
          if ($lt90.isPrototypeOf(SubEl) && SubEl.IsForward()) {
            SubProcScope = rtl.as(SubEl.FData,$lt37);
            if (SubProcScope.ImplProc === null) this.RaiseMsg(20170216151613,3015,rtl.getResStr($lm5,"sForwardProcNotResolved"),$lp6(18,$mod.GetElementTypeName(SubEl),18,SubEl.FName),SubEl);
          };
        };
        if (ProcScope.GroupScope !== null) {
          rtl.free(ProcScope,"GroupScope");
          ProcScope.GroupScope = null;
          if (ProcScope.NestedMembersScope !== null) {
            for (var $l1 = 0, $end1 = this.FScopeCount - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              if (this.GetScopes(i) === ProcScope.NestedMembersScope) {
                this.DeleteScope(i);
                break;
              };
            };
            rtl.free(ProcScope,"NestedMembersScope");
            ProcScope.NestedMembersScope = null;
          };
        };
        ProcScope.GenericStep = 2;
        if (ProcScope.DeclarationProc !== null) {
          DeclProcScope = rtl.as(ProcScope.DeclarationProc.FData,$lt37);
          DeclProcScope.GenericStep = 2;
        };
      };
      if (ProcScope.GroupScope !== null) this.RaiseNotYetImplemented(20190122142142,Proc,"");
      if (ProcScope.NestedMembersScope !== null) this.RaiseNotYetImplemented(20191014233200,Proc,"");
      if (this.FTopScope.FElement !== Proc) this.RaiseInternalError(20190806094032,"");
      this.PopScope();
      if (ProcScope.GenericStep === 2) {
        if (ProcScope.DeclarationProc !== null) ProcScope = ProcScope.DeclarationProc.FData;
        if (ProcScope.SpecializedItems !== null) this.FinishSpecializations(ProcScope);
      };
    };
    this.FinishProcedureType = function (El) {
      var ProcName = "";
      var FindData = $lt78.$new();
      var DeclProc = null;
      var Proc = null;
      var ParentProc = null;
      var Abort = false;
      var HasDots = false;
      var IsClassConDestructor = false;
      var DeclProcScope = null;
      var ProcScope = null;
      var ParentScope = null;
      var pm = 0;
      var ptm = 0;
      var ObjKind = 0;
      var ParentBody = null;
      var HelperForType = null;
      var Args = null;
      var TemplTypes = null;
      var Arg = null;
      var ProcTypeScope = null;
      var C = null;
      var FuncType = null;
      if (this.FTopScope.FElement === El) {
        ProcTypeScope = rtl.as(El.FData,$lt29);
        ProcTypeScope.GenericStep = 2;
        this.PopScope();
      };
      if ($lt90.isPrototypeOf(El.FParent)) {
        Proc = El.FParent}
       else Proc = null;
      if ((Proc !== null) && (Proc.ProcType === El)) {
        this.CheckTopScope(this.FScopeClass_Proc,false);
        ProcName = Proc.FName;
        ProcScope = rtl.as(Proc.FData,$lt37);
        TemplTypes = this.GetProcTemplateTypes(Proc);
        if (TemplTypes !== null) {
          if ($lt108.isPrototypeOf(Proc) || $lt160.isPrototypeOf(Proc)) this.RaiseMsg(20190911104114,3136,rtl.getResStr($lm5,"sTypeParamsNotAllowedOnX"),$lp6(18,Proc.ElementTypeName()),Proc);
          if (Proc.IsVirtual() || Proc.IsDynamic() || Proc.IsMessage() || Proc.IsOverride()) this.RaiseMsg(20190911112925,3137,rtl.getResStr($lm5,"sXMethodsCannotHaveTypeParams"),$lp6(18,"virtual, dynamic or message"),El);
          if (Proc.IsOverride()) this.RaiseMsg(20191016174218,3137,rtl.getResStr($lm5,"sXMethodsCannotHaveTypeParams"),$lp6(18,"override"),El);
          if (!(Proc.Visibility in rtl.createSet(0,1,6,2,7,3))) this.RaiseMsg(20191016174327,3137,rtl.getResStr($lm5,"sXMethodsCannotHaveTypeParams"),$lp6(18,$lm4.VisibilityNames[Proc.Visibility]),El);
        };
        if ($lt101.isPrototypeOf(El)) {
          FuncType = El;
          if (FuncType.ResultEl !== null) this.CheckUseAsType(FuncType.ResultEl.ResultType,20190123095743,FuncType.ResultEl);
        };
        if ((6 in this.FOptions) && El.GetIsNested()) this.RaiseInvalidProcTypeModifier(20170402120811,El,1,El);
        ParentBody = this.GetParentProcBody(Proc.FParent);
        if (ParentBody !== null) {
          if (TemplTypes !== null) this.RaiseMsg(20190912173450,3136,rtl.getResStr($lm5,"sTypeParamsNotAllowedOnX"),$lp6(18,"nested " + Proc.ElementTypeName()),Proc);
          if (!(6 in this.FOptions)) El.SetIsNested(true);
          ParentProc = rtl.as(ParentBody.FParent,$lt90);
          if (ParentProc.ProcType.GetIsOfObject()) El.SetIsOfObject(true);
        };
        if (El.GetIsReference()) {
          if (El.GetIsNested()) this.RaiseInvalidProcTypeModifier(20170419142818,El,1,El);
          if (El.GetIsOfObject()) this.RaiseInvalidProcTypeModifier(20170419142844,El,0,El);
        };
        if (Proc.IsExternal()) {
          for (var $l in Proc.FModifiers) {
            pm = +$l;
            if (!(pm in rtl.createSet(0,1,3,5,6,7,12,14,16))) this.RaiseMsg(20170216151616,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"external, " + $lm4.ModifierNames[pm]),Proc);
          };
          for (var $l1 in Proc.ProcType.Modifiers) {
            ptm = +$l1;
            if (!(ptm in rtl.createSet(0,1,2,3,4,5))) this.RaiseMsg(20170411171224,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"external, " + $lm4.ProcTypeModifiers[ptm]),Proc);
          };
        };
        if (El.GetIsAsync()) {
          C = Proc.$class.ClassType();
          if ((C !== $lt90) && (C !== $lt111) && (C !== $lt161) && (C !== $lt162) && (C !== $lt163) && (C !== $lt164)) this.RaiseMsg(20200524105449,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"async"),Proc);
        };
        IsClassConDestructor = (Proc.$class.ClassType() === $lt120) || (Proc.$class.ClassType() === $lt121);
        if (IsClassConDestructor) {
          if (Proc.IsVirtual()) this.RaiseMsg(20181231150237,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"virtual"),Proc);
          if (Proc.IsOverride()) this.RaiseMsg(20181231150305,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"override"),Proc);
          if (Proc.IsDynamic()) this.RaiseMsg(20181231150319,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"dynamic"),Proc);
          if (Proc.IsStatic()) this.RaiseMsg(20190216214651,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"static"),Proc);
          if (El.Args.FCount > 0) this.RaiseMsg(20181231150404,3063,rtl.getResStr($lm5,"sXCannotHaveParameters"),$lp6(18,$mod.GetElementTypeName(Proc)),Proc);
        };
        HasDots = $mod.GetFirstDotPos(ProcName) > 0;
        if ($lt94.isPrototypeOf(Proc.FParent)) {
          ObjKind = Proc.FParent.ObjKind;
          var $tmp = ObjKind;
          if (($tmp === 2) || ($tmp === 6)) {
            if (Proc.IsVirtual()) this.RaiseMsg(20180321234324,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$lm4.ObjKindNames[ObjKind] + " " + $mod.GetElementTypeName(Proc),18,"virtual"),Proc);
            if (Proc.IsOverride()) this.RaiseMsg(20180321234551,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$lm4.ObjKindNames[ObjKind] + " " + $mod.GetElementTypeName(Proc),18,"override"),Proc);
            if (TemplTypes !== null) this.RaiseMsg(20190912153024,3137,rtl.getResStr($lm5,"sXMethodsCannotHaveTypeParams"),$lp6(18,"interface"),Proc);
          } else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
            if (Proc.IsAbstract()) this.RaiseMsg(20190116215744,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$lm4.ObjKindNames[ObjKind] + " " + $mod.GetElementTypeName(Proc),18,"abstract"),Proc);
            if (Proc.IsVirtual()) this.RaiseMsg(20190116215823,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$lm4.ObjKindNames[ObjKind] + " " + $mod.GetElementTypeName(Proc),18,"virtual"),Proc);
            if (Proc.IsOverride()) this.RaiseMsg(20190116215825,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$lm4.ObjKindNames[ObjKind] + " " + $mod.GetElementTypeName(Proc),18,"override"),Proc);
            HelperForType = this.ResolveAliasType(Proc.FParent.HelperForType,true);
            if (!Proc.IsStatic() && this.IsClassMethod(Proc) && !IsClassConDestructor) {
              if (!(HelperForType.$class.ClassType() === $lt94) || (HelperForType.ObjKind !== 1)) this.RaiseMsg(20190201153831,3088,rtl.getResStr($lm5,"sClassMethodsMustBeStaticInX"),$lp6(18,$lm4.ObjKindNames[ObjKind]),Proc);
            };
            if (Proc.$class.ClassType() === $lt160) this.RaiseMsg(20190302151019,3081,rtl.getResStr($lm5,"sXIsNotSupported"),$lp6(18,"destructor"),Proc);
            if ((Proc.$class.ClassType() === $lt108) && (HelperForType.$class.ClassType() === $lt94) && (HelperForType.ObjKind !== 1)) this.RaiseMsg(20190302151514,3081,rtl.getResStr($lm5,"sXIsNotSupported"),$lp6(18,"constructor"),Proc);
          };
          if (Proc.IsAbstract()) {
            if (!Proc.IsVirtual()) this.RaiseMsg(20170216151623,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"abstract without virtual"),Proc);
            if (Proc.IsOverride()) this.RaiseMsg(20170216151625,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"abstract, override"),Proc);
          };
          if (Proc.IsVirtual() && Proc.IsOverride()) this.RaiseMsg(20170216151627,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"virtual, override"),Proc);
          if (Proc.IsReintroduced() && Proc.IsOverride()) this.RaiseMsg(20171119111845,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"reintroduce, override"),Proc);
          if (Proc.IsForward()) this.RaiseMsg(20170216151629,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"forward"),Proc);
          if (Proc.IsStatic()) if ((Proc.$class.ClassType() !== $lt161) && (Proc.$class.ClassType() !== $lt162)) this.RaiseMsg(20170216151631,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"static"),Proc);
        } else if ($lt98.isPrototypeOf(Proc.FParent)) {
          if ((Proc.$class.ClassType() === $lt108) && ((El.Args.FCount === 0) || (rtl.getObject(El.Args.Get(0)).ValueExpr !== null))) this.RaiseMsg(20181226231333,3061,rtl.getResStr($lm5,"sParameterlessConstructorsNotAllowedInRecords"),[],El);
          if (Proc.IsReintroduced()) this.RaiseMsg(20181218195735,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"record " + $mod.GetElementTypeName(Proc),18,"reintroduce"),Proc);
          if (Proc.IsVirtual()) this.RaiseMsg(20181218195431,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"record " + $mod.GetElementTypeName(Proc),18,"virtual"),Proc);
          if (Proc.IsOverride()) this.RaiseMsg(20181218195437,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"record " + $mod.GetElementTypeName(Proc),18,"override"),Proc);
          if (Proc.IsAbstract()) this.RaiseMsg(20181218195552,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"record " + $mod.GetElementTypeName(Proc),18,"abstract"),Proc);
          if (Proc.IsForward()) this.RaiseMsg(20181218195514,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"record " + $mod.GetElementTypeName(Proc),18,"forward"),Proc);
          if (this.IsClassMethod(Proc) && !IsClassConDestructor) {
            if (!Proc.IsStatic()) this.RaiseMsg(20190106121503,3088,rtl.getResStr($lm5,"sClassMethodsMustBeStaticInX"),$lp6(18,"records"),Proc);
          } else if (Proc.IsStatic()) this.RaiseMsg(20190206150922,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,"static"),Proc);
        } else {
          if (Proc.IsAbstract()) this.RaiseInvalidProcModifier(20170216151634,Proc,2,Proc);
          if (Proc.IsVirtual()) this.RaiseInvalidProcModifier(20170216151635,Proc,0,Proc);
          if (Proc.IsOverride()) this.RaiseInvalidProcModifier(20170216151637,Proc,3,Proc);
          if (Proc.IsMessage()) this.RaiseInvalidProcModifier(20170216151638,Proc,6,Proc);
          if (Proc.IsStatic() && !HasDots) this.RaiseInvalidProcTypeModifier(20170216151640,El,2,El);
          if (!HasDots && (Proc.GetProcTypeEnum() in rtl.createSet(3,4,5,6,7,8,9))) this.RaiseXExpectedButYFound(20170419232724,"full method name","short name",El);
        };
        ProcScope.GenericStep = 1;
        if (HasDots) {
          this.FinishMethodImplHeader(Proc);
          return;
        };
        if ((ProcName === "") && !(Proc.GetProcTypeEnum() in rtl.createSet(10,11))) this.RaiseNotYetImplemented(20160922163407,El,"");
        if ($lt101.isPrototypeOf(El) && !(1 in ProcScope.Flags)) this.EmitTypeHints(El.ResultEl,El.ResultEl.ResultType);
        if (Proc.PublicName !== null) this.ResolveExpr(Proc.PublicName,1);
        if (Proc.LibraryExpr !== null) this.ResolveExpr(Proc.LibraryExpr,1);
        if (Proc.LibrarySymbolName !== null) this.ResolveExpr(Proc.LibrarySymbolName,1);
        if (Proc.DispIDExpr !== null) this.ResolveExpr(Proc.DispIDExpr,1);
        if (Proc.MessageExpr !== null) {
          this.ResolveExpr(Proc.MessageExpr,1);
          Args = Proc.ProcType.Args;
          if (Args.FCount !== 1) this.RaiseMsg(20190303223701,3118,rtl.getResStr($lm5,"sMessageHandlersInvalidParams"),[],El);
          Arg = rtl.getObject(Args.Get(0));
          if (!(Arg.Access in rtl.createSet(2,3))) this.RaiseMsg(20190303223834,3118,rtl.getResStr($lm5,"sMessageHandlersInvalidParams"),[],El);
          if ((Proc.$class.ClassType() !== $lt90) && (Proc.$class.ClassType() !== $lt111)) this.RaiseMsg(20190303224128,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"procedure name(var Msg);message id;",18,$mod.GetElementTypeName(El)),El);
        };
        if ($lt107.isPrototypeOf(Proc.FParent)) {
          this.FinishMethodDeclHeader(Proc);
          return;
        };
        if ((ProcName !== "") && $mod.ProcNeedsBody(Proc)) {
          if (1 in ProcScope.Flags) {
            if (ProcScope.DeclarationProc !== null) this.ReplaceProcScopeImplArgsWithDeclArgs(ProcScope);
          } else {
            ParentScope = rtl.as(this.GetParentLocalScope(),$lt18);
            DeclProc = this.FindProcSameSignature(ProcName,Proc,ParentScope,true);
            if ((DeclProc === null) && (Proc.FParent.$class.ClassType() === $lt110)) DeclProc = this.FindProcSameSignature(ProcName,Proc,rtl.as(Proc.GetModule().InterfaceSection.FData,$lt18),true);
            if (DeclProc !== null) {
              if ($mod.ProcNeedsImplProc(DeclProc)) {
                DeclProcScope = rtl.as(DeclProc.FData,$lt37);
                if (DeclProcScope.ImplProc !== null) this.RaiseMsg(20180318222430,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,DeclProcScope.ImplProc.FName,18,this.GetElementSourcePosStr(DeclProcScope.ImplProc)),Proc);
                this.CheckProcSignatureMatch(DeclProc,Proc,false);
                DeclProcScope.ImplProc = Proc;
                if (DeclProc.IsAssembler()) Proc.FModifiers = rtl.unionSet(Proc.FModifiers,rtl.createSet(9));
                ProcScope.DeclarationProc = DeclProc;
                ParentScope.RemoveLocalIdentifier(Proc);
                this.ReplaceProcScopeImplArgsWithDeclArgs(ProcScope);
                return;
              } else this.RaiseMsg(20180318220543,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,DeclProc.FName,18,this.GetElementSourcePosStr(DeclProc)),Proc);
            };
          };
        } else {
          this.StoreScannerFlagsInProc(ProcScope);
        };
        if (ProcName !== "") {
          FindData.$assign($lt78.$new());
          FindData.Proc = Proc;
          FindData.Args = Proc.ProcType.Args;
          FindData.Kind = 1;
          Abort = false;
          this.IterateElements(ProcName,rtl.createCallback(this,"OnFindProc"),FindData,{get: function () {
              return Abort;
            }, set: function (v) {
              Abort = v;
            }});
        };
      } else if (El.FName !== "") ;
    };
    this.FinishMethodDeclHeader = function (Proc) {
      var $Self = this;
      function VisibilityLowered(Proc, OverloadProc) {
        $Self.LogMsg(20170325004215,3,3250,rtl.getResStr($lm5,"sVirtualMethodXHasLowerVisibility"),$lp6(18,Proc.FName,18,$lm4.VisibilityNames[Proc.Visibility],18,OverloadProc.FParent.FName,18,$lm4.VisibilityNames[OverloadProc.Visibility]),Proc);
        Proc.Visibility = OverloadProc.Visibility;
      };
      var Abort = false;
      var IsClassConDestructor = false;
      var ClassOrRecScope = null;
      var FindData = $lt78.$new();
      var OverloadProc = null;
      var ProcScope = null;
      var i = 0;
      var ParentScope = null;
      var TemplTypes = null;
      var ClassRecType = null;
      if (!(2 in Proc.ProcType.Modifiers)) Proc.ProcType.SetIsOfObject(true);
      ProcScope = rtl.as(this.FTopScope,$lt37);
      ParentScope = this.GetScopes(this.FScopeCount - 2);
      this.StoreScannerFlagsInProc(ProcScope);
      ClassRecType = Proc.FParent;
      ClassOrRecScope = rtl.as(ClassRecType.FData,$lt30);
      ProcScope.ClassRecScope = ClassOrRecScope;
      TemplTypes = this.GetProcTemplateTypes(Proc);
      FindData.$assign($lt78.$new());
      IsClassConDestructor = (Proc.$class.ClassType() === $lt120) || (Proc.$class.ClassType() === $lt121);
      if (IsClassConDestructor) {
        if (TemplTypes !== null) this.RaiseNotYetImplemented(20190911105953,Proc,"");
      } else {
        FindData.Proc = Proc;
        FindData.Args = Proc.ProcType.Args;
        FindData.Kind = 2;
        Abort = false;
        ParentScope.IterateElements(Proc.FName,ClassOrRecScope,rtl.createCallback($Self,"OnFindProc"),FindData,{get: function () {
            return Abort;
          }, set: function (v) {
            Abort = v;
          }});
      };
      if (FindData.Found === null) {
        if (Proc.IsOverride()) this.RaiseMsg(20170216151702,3022,rtl.getResStr($lm5,"sNoMethodInAncestorToOverride"),$lp6(18,this.GetProcTypeDescription(Proc.ProcType,rtl.createSet(0,2))),Proc.ProcType);
      } else {
        OverloadProc = FindData.Found;
        ProcScope.OverriddenProc = OverloadProc;
        if (Proc.IsOverride()) {
          if (!OverloadProc.IsVirtual() && !OverloadProc.IsOverride()) this.RaiseMsg(20170216151708,3022,rtl.getResStr($lm5,"sNoMethodInAncestorToOverride"),$lp6(18,this.GetProcTypeDescription(Proc.ProcType,rtl.createSet(0,2))),Proc.ProcType);
          this.CheckProcSignatureMatch(OverloadProc,Proc,true);
          if (Proc.Visibility !== OverloadProc.Visibility) {
            var $tmp = Proc.Visibility;
            if (($tmp === 1) || ($tmp === 6)) {
              if (!(OverloadProc.Visibility in rtl.createSet(1,6))) VisibilityLowered(Proc,OverloadProc)}
             else if (($tmp === 2) || ($tmp === 7)) {
              if (!(OverloadProc.Visibility in rtl.createSet(1,2,6,7))) VisibilityLowered(Proc,OverloadProc)}
             else if ($tmp === 3) {
              if (!(OverloadProc.Visibility in rtl.createSet(null,1,3,6,7))) VisibilityLowered(Proc,OverloadProc)}
             else if ($tmp === 4) {}
            else {
              this.RaiseNotYetImplemented(20170325003315,Proc,"visibility");
            };
          };
          if (0 in this.FOptions) Proc.FName = OverloadProc.FName;
          if (OverloadProc.IsAbstract() && $lt34.isPrototypeOf(ClassOrRecScope)) for (var $l = rtl.length(ClassOrRecScope.AbstractProcs) - 1; $l >= 0; $l--) {
            i = $l;
            if (ClassOrRecScope.AbstractProcs[i] === OverloadProc) ClassOrRecScope.AbstractProcs.splice(i,1);
          };
          if (this.IsProcOverload(OverloadProc)) ProcScope.Flags = rtl.includeSet(ProcScope.Flags,2);
        };
      };
      if (Proc.IsAbstract() && $lt34.isPrototypeOf(ClassOrRecScope)) ClassOrRecScope.AbstractProcs = rtl.arrayInsert(Proc,ClassOrRecScope.AbstractProcs,rtl.length(ClassOrRecScope.AbstractProcs));
      this.CreateProcSelfArg(Proc);
    };
    this.FinishMethodImplHeader = function (ImplProc) {
      var ProcName = "";
      var ImplProcScope = null;
      var DeclProcScope = null;
      var DeclProc = null;
      var ClassOrRecScope = null;
      var SelfArg = null;
      var LastNamePart = null;
      if (ImplProc.IsExternal()) this.RaiseMsg(20170216151715,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(ImplProc),18,"external"),ImplProc);
      if (ImplProc.IsExported()) this.RaiseMsg(20170216151717,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(ImplProc),18,"export"),ImplProc);
      ProcName = ImplProc.FName;
      ImplProcScope = rtl.as(ImplProc.FData,$lt37);
      ClassOrRecScope = ImplProcScope.ClassRecScope;
      if (ClassOrRecScope === null) this.RaiseInternalError(20161013172346,"");
      if (ImplProcScope.GroupScope === null) this.RaiseInternalError(20190120135017,"");
      if (ImplProc.NameParts !== null) {
        LastNamePart = rtl.getObject(ImplProc.NameParts.Get(ImplProc.NameParts.FCount - 1));
        ProcName = LastNamePart.Name;
      } else {
        ProcName = $mod.LastDottedIdentifier(ProcName);
      };
      DeclProc = null;
      DeclProcScope = null;
      if (ImplProcScope.DeclarationProc === null) {
        if (!$mod.IsValidIdent(ProcName,false,false)) this.RaiseNotYetImplemented(20160922163421,ImplProc.ProcType,"");
        if (ImplProc.$class.ClassType() === $lt120) {
          DeclProc = ClassOrRecScope.ClassConstructor}
         else if (ImplProc.$class.ClassType() === $lt121) {
          DeclProc = ClassOrRecScope.ClassDestructor}
         else DeclProc = this.FindProcSameSignature(ProcName,ImplProc,ClassOrRecScope,false);
        if (DeclProc === null) this.RaiseIdentifierNotFound(20170216151720,this.GetProcName(ImplProc,true),ImplProc.ProcType);
        DeclProcScope = rtl.as(DeclProc.FData,$lt37);
        ImplProc.ProcType.SetIsOfObject(DeclProc.ProcType.GetIsOfObject());
        if (DeclProcScope.ImplProc !== null) this.RaiseMsg(20180212094546,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,DeclProcScope.ImplProc.FName,18,this.GetElementSourcePosStr(DeclProcScope.ImplProc)),ImplProc);
        if (DeclProc.IsAbstract()) this.RaiseMsg(20170216151722,3017,rtl.getResStr($lm5,"sAbstractMethodsMustNotHaveImplementation"),[],ImplProc);
        if (DeclProc.IsExternal()) this.RaiseXExpectedButYFound(20170216151725,"method","external method",ImplProc);
        this.CheckProcSignatureMatch(DeclProc,ImplProc,false);
        if (DeclProc.IsAssembler()) ImplProc.FModifiers = rtl.unionSet(ImplProc.FModifiers,rtl.createSet(9));
        ImplProcScope.DeclarationProc = DeclProc;
        DeclProcScope.ImplProc = ImplProc;
        this.ReplaceProcScopeImplArgsWithDeclArgs(ImplProcScope);
      } else if (1 in ImplProcScope.Flags) {
        DeclProc = ImplProcScope.DeclarationProc;
        DeclProcScope = rtl.as(DeclProc.FData,$lt37);
        if (DeclProcScope.ImplProc !== ImplProc) this.RaiseNotYetImplemented(20190804182220,ImplProc,"");
        this.ReplaceProcScopeImplArgsWithDeclArgs(ImplProcScope);
      } else this.RaiseNotYetImplemented(20190804181222,ImplProc,"");
      SelfArg = DeclProcScope.SelfArg;
      if (SelfArg !== null) {
        ImplProcScope.SelfArg = SelfArg;
        this.AddIdentifier(ImplProcScope,"Self",SelfArg,3);
      };
    };
    this.FinishExceptOnExpr = function () {
      var El = null;
      var ResolvedType = $lt59.$new();
      var TypeEl = null;
      this.CheckTopScope($lt39,false);
      El = this.FTopScope.FElement;
      TypeEl = El.TypeEl;
      this.ComputeElement(TypeEl,ResolvedType,rtl.createSet(4),null);
      this.CheckIsClass(TypeEl,ResolvedType);
    };
    this.FinishExceptOnStatement = function () {
      this.CheckTopScope($lt39,false);
      this.ResolveImplElement(this.FTopScope.FElement.Body);
      this.PopScope();
    };
    this.FinishParserSpecializeType = function (El) {
      if (El === null) ;
      this.PopScope();
    };
    this.FinishWithDo = function (El) {
      this.PopWithScope(El);
    };
    this.FinishForLoopHeader = function (Loop) {
      var VarResolved = $lt59.$new();
      var StartResolved = $lt59.$new();
      var EndResolved = $lt59.$new();
      var OrigStartResolved = $lt59.$new();
      var EnumeratorFound = false;
      var HasInValues = false;
      var InRange = null;
      var VarRange = null;
      var InRangeInt = null;
      var VarRangeInt = null;
      var bt = 0;
      var TypeEl = null;
      var ElType = null;
      var C = null;
      var IdentEl = null;
      this.CreateScope(Loop,$lt43);
      this.ResolveExpr(Loop.VariableName,3);
      this.ComputeElement(Loop.VariableName,VarResolved,rtl.createSet(1,0),null);
      if (!this.ResolvedElCanBeVarParam(VarResolved,Loop.VariableName,true)) this.RaiseVarExpected(20170216151955,Loop.VariableName,VarResolved.IdentEl);
      IdentEl = VarResolved.IdentEl;
      C = IdentEl.$class.ClassType();
      if ((C === $lt106) || (C === $lt141) || ((C === $lt105) && ($lt89.isPrototypeOf(IdentEl.FParent) || $lt116.isPrototypeOf(IdentEl.FParent)))) {}
      else {
        this.RaiseMsg(20220815164902,3146,rtl.getResStr($lm5,"sForLoopControlVarMustBeSimpleLocalVar"),[],Loop.VariableName);
      };
      this.ResolveExpr(Loop.StartExpr,1);
      this.ComputeElement(Loop.StartExpr,StartResolved,rtl.createSet(0),null);
      var $tmp = Loop.LoopType;
      if (($tmp === 0) || ($tmp === 1)) {
        if (this.CheckAssignResCompatibility(VarResolved,StartResolved,Loop.StartExpr,true) === 2147483647) this.RaiseIncompatibleTypeRes(20170216151958,3028,[],StartResolved,VarResolved,Loop.StartExpr);
        this.CheckAssignExprRange(VarResolved,Loop.StartExpr);
        this.ResolveExpr(Loop.EndExpr,1);
        this.ComputeElement(Loop.EndExpr,EndResolved,rtl.createSet(0),null);
        if (this.CheckAssignResCompatibility(VarResolved,EndResolved,Loop.EndExpr,false) === 2147483647) this.RaiseIncompatibleTypeRes(20170216152001,3028,[],EndResolved,VarResolved,Loop.EndExpr);
        this.CheckAssignExprRange(VarResolved,Loop.EndExpr);
      } else if ($tmp === 2) {
        EnumeratorFound = this.CheckForIn(Loop,VarResolved,StartResolved);
        if (!EnumeratorFound && !$lt95.isPrototypeOf(StartResolved.IdentEl) && (0 in StartResolved.Flags)) {
          EnumeratorFound = this.CheckForInClassOrRec(Loop,VarResolved,StartResolved);
        };
        if (!EnumeratorFound) {
          VarRange = null;
          InRange = null;
          try {
            OrigStartResolved.$assign(StartResolved);
            if ($lt95.isPrototypeOf(StartResolved.IdentEl)) {
              TypeEl = StartResolved.LoTypeEl;
              if ($lt102.isPrototypeOf(TypeEl)) {
                if (rtl.length(TypeEl.Ranges) === 1) InRange = this.Eval(TypeEl.Ranges[0],rtl.createSet(0),true);
              };
              if (InRange === null) InRange = this.EvalTypeRange(TypeEl,{});
            } else if (0 in StartResolved.Flags) {
              bt = StartResolved.BaseType;
              if (bt in rtl.createSet(34,36)) {
                if ((StartResolved.IdentEl === null) && (StartResolved.ExprEl !== null)) InRange = this.Eval(StartResolved.ExprEl,{},true);
                if (InRange === null) InRange = this.EvalTypeRange(StartResolved.LoTypeEl,{});
              } else if (bt === 2) {
                TypeEl = StartResolved.LoTypeEl;
                C = TypeEl.$class.ClassType();
                if (C === $lt102) {
                  ElType = this.GetArrayElType(TypeEl);
                  this.ComputeElement(ElType,StartResolved,rtl.createSet(4),null);
                  StartResolved.Flags = rtl.intersectSet(OrigStartResolved.Flags,rtl.createSet(0,1));
                  if (this.CheckAssignResCompatibility(VarResolved,StartResolved,Loop.StartExpr,true) === 2147483647) this.RaiseIncompatibleTypeRes(20171112210138,3028,[],StartResolved,VarResolved,Loop.StartExpr);
                  EnumeratorFound = true;
                };
              } else {
                bt = this.GetActualBaseType(bt);
                var $tmp1 = bt;
                if ($tmp1 === 9) InRange = $lt165.$create("CreateValue",[3,null,0,0xffff]);
              };
            };
            if (!EnumeratorFound && (InRange !== null)) {
              VarRange = this.EvalTypeRange(VarResolved.LoTypeEl,{});
              if (VarRange === null) this.RaiseXExpectedButYFound(20171109191528,"range",this.GetResolverResultDescription(VarResolved,false),Loop.VariableName);
              var $tmp2 = InRange.Kind;
              if (($tmp2 === 10) || ($tmp2 === 12)) {
                InRangeInt = InRange;
                var $tmp3 = VarRange.Kind;
                if ($tmp3 === 10) {
                  VarRangeInt = VarRange;
                  HasInValues = (InRange.Kind !== 12) || (rtl.length(InRange.Ranges) > 0);
                  var $tmp4 = InRangeInt.ElKind;
                  if ($tmp4 === 1) {
                    if ((VarRangeInt.ElKind !== 1) || !this.IsSameType(InRangeInt.ElType,VarRangeInt.ElType,2)) this.RaiseXExpectedButYFound(20171109200752,this.GetTypeDescription(InRangeInt.ElType,false),this.GetResolverResultDescription(VarResolved,true),Loop.VariableName)}
                   else if ($tmp4 === 2) {
                    if (VarRangeInt.ElKind !== 2) this.RaiseXExpectedButYFound(20171109200752,"integer",this.GetResolverResultDescription(VarResolved,true),Loop.VariableName)}
                   else if ($tmp4 === 3) {
                    if (VarRangeInt.ElKind !== 3) this.RaiseXExpectedButYFound(20171109200753,"char",this.GetResolverResultDescription(VarResolved,true),Loop.VariableName)}
                   else if ($tmp4 === 4) {
                    if (VarRangeInt.ElKind !== 4) this.RaiseXExpectedButYFound(20171109200754,"boolean",this.GetResolverResultDescription(VarResolved,true),Loop.VariableName)}
                   else {
                    if (HasInValues) this.RaiseNotYetImplemented(20171109200954,Loop.StartExpr,"");
                  };
                  if (HasInValues) {
                    if (VarRangeInt.RangeStart > InRangeInt.RangeStart) {
                      this.fExprEvaluator.EmitRangeCheckConst(20171109201428,InRangeInt.ElementAsString(InRangeInt.RangeStart),VarRangeInt.ElementAsString(VarRangeInt.RangeStart),VarRangeInt.ElementAsString(VarRangeInt.RangeEnd),Loop.VariableName,1);
                    };
                    if (VarRangeInt.RangeEnd < InRangeInt.RangeEnd) {
                      this.fExprEvaluator.EmitRangeCheckConst(20171109201429,InRangeInt.ElementAsString(InRangeInt.RangeEnd),VarRangeInt.ElementAsString(VarRangeInt.RangeStart),VarRangeInt.ElementAsString(VarRangeInt.RangeEnd),Loop.VariableName,1);
                    };
                  };
                  EnumeratorFound = true;
                };
              };
            };
            if (!EnumeratorFound) {
              this.RaiseMsg(20171108223818,3074,rtl.getResStr($lm5,"sCannotFindEnumeratorForType"),$lp6(18,this.GetBaseDescription(OrigStartResolved,false)),Loop.StartExpr);
            };
          } finally {
            $lp12({get: function () {
                return VarRange;
              }, set: function (v) {
                VarRange = v;
              }});
            $lp12({get: function () {
                return InRange;
              }, set: function (v) {
                InRange = v;
              }});
          };
        };
      } else {
        this.RaiseNotYetImplemented(20171108221334,Loop,"");
      };
    };
    this.FinishDeclaration = function (El) {
      var C = null;
      C = El.$class.ClassType();
      if ((C === $lt105) || (C === $lt117)) {
        this.FinishVariable(El)}
       else if (C === $lt88) {
        this.FinishProperty(El)}
       else if (C === $lt106) {
        this.FinishArgument(El)}
       else if (C === $lt159) {
        this.FinishMethodResolution(El)}
       else if (C === $lt154) {
        this.FinishAttributes(El)}
       else if (C === $lt166) {
        this.FinishExportSymbol(El)}
       else {
        this.RaiseNotYetImplemented(20180127121557,El,"");
      };
    };
    this.FinishVariable = function (El) {
      var ResolvedAbs = $lt59.$new();
      var C = null;
      var Value = null;
      if (El.Visibility === 4) {
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(4,5,0),El.VarModifiers),{})) this.RaiseMsg(20170403223837,3053,rtl.getResStr($lm5,"sSymbolCannotBePublished"),[],El);
      };
      if (El.Expr !== null) this.ResolveExpr(El.Expr,1);
      if (El.VarType !== null) {
        if ($lt98.isPrototypeOf(El.FParent) && (El.VarType === El.FParent)) this.RaiseMsg(20181218173631,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,El.VarType.FName),El);
        this.CheckUseAsType(El.VarType,20190123095916,El);
        if (El.Expr !== null) this.CheckAssignCompatibility(El,El.Expr,true,null);
        if (El.VarType.FParent === El) this.FinishSubElementType(El,El.VarType);
      } else if (El.Expr !== null) {
        Value = this.Eval(El.Expr,rtl.createSet(1),true);
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      if (El.AbsoluteExpr !== null) {
        if (El.$class.ClassType() === $lt117) this.RaiseMsg(20180201225530,3052,rtl.getResStr($lm5,"sXModifierMismatchY"),$lp6(18,"absolute",18,"const"),El.AbsoluteExpr);
        if (El.VarType === null) this.RaiseMsg(20171225235125,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],El.AbsoluteExpr);
        if (1 in El.VarModifiers) this.RaiseMsg(20171226104221,3052,rtl.getResStr($lm5,"sXModifierMismatchY"),$lp6(18,"absolute",18,"external"),El.AbsoluteExpr);
        this.ResolveExpr(El.AbsoluteExpr,1);
        this.ComputeElement(El.AbsoluteExpr,ResolvedAbs,rtl.createSet(1),null);
        if (!(0 in ResolvedAbs.Flags) || (ResolvedAbs.IdentEl === null)) this.RaiseVarExpected(20171225234734,El.AbsoluteExpr,ResolvedAbs.IdentEl);
        C = ResolvedAbs.IdentEl.$class.ClassType();
        if ((C === $lt105) || (C === $lt106) || ((C === $lt117) && (ResolvedAbs.IdentEl.VarType !== null)) || (C === $lt141)) {}
        else this.RaiseMsg(20171225235203,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],El.AbsoluteExpr);
        if (!(0 in ResolvedAbs.Flags)) this.RaiseVarExpected(20171225235249,El.AbsoluteExpr,ResolvedAbs.IdentEl);
        if (ResolvedAbs.IdentEl === El) this.RaiseMsg(20171226000703,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],El.AbsoluteExpr);
      };
      if (El.VarType !== null) this.EmitTypeHints(El,El.VarType);
    };
    this.FinishProperty = function (PropEl) {
      var $Self = this;
      var PropType = null;
      var ClassOrRecScope = null;
      var ClassScope = null;
      var AncestorProp = null;
      var IndexExpr = null;
      function GetPropType() {
        var AncEl = null;
        var GroupScope = null;
        if (PropType !== null) return;
        AncEl = null;
        if ((ClassScope !== null) && (ClassScope.AncestorScope !== null)) {
          $Self.CheckTopScope($lt35,false);
          GroupScope = $Self.FTopScope;
          AncEl = GroupScope.FindAncestorElement(PropEl.FName);
        };
        if ($lt88.isPrototypeOf(AncEl)) {
          AncestorProp = AncEl;
          PropEl.FData.AncestorProp = AncestorProp;
          if (0 in $Self.FOptions) PropEl.FName = AncestorProp.FName;
        } else AncestorProp = null;
        if (PropEl.VarType !== null) {
          PropType = PropEl.VarType;
          $Self.CheckUseAsType(PropEl.VarType,20190123100011,PropEl);
        } else {
          if (AncestorProp === null) $Self.RaiseMsg(20170216151741,3025,rtl.getResStr($lm5,"sNoPropertyFoundToOverride"),[],PropEl);
          if (PropEl.$class.ClassType() !== AncestorProp.$class.ClassType()) $Self.RaiseXExpectedButYFound(20170216151744,$mod.GetElementTypeName(AncestorProp),$mod.GetElementTypeName(PropEl),PropEl);
          PropType = $Self.GetPasPropertyType(AncestorProp);
          if (ClassScope === null) $Self.RaiseNotYetImplemented(20181231130642,PropEl,"");
          if (ClassScope.DefaultProperty === AncestorProp) ClassScope.DefaultProperty = PropEl;
        };
      };
      function CheckClassAccessorStatic(ProcIsStatic) {
        var Result = false;
        if (ClassScope === null) {
          Result = ProcIsStatic === true}
         else if (1 in $Self.FOptions) {
          Result = true}
         else Result = ProcIsStatic === true;
        return Result;
      };
      function CheckIndexArg(ArgNo, IndexResolved, ProcArg, ErrorEl) {
        var ProcArgResolved = $lt59.$new();
        if (!(ProcArg.Access in rtl.createSet(0,1))) $Self.RaiseMsg(20170924202437,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,$lm4.AccessDescriptions[ProcArg.Access],18,$lm4.AccessDescriptions[1]),ErrorEl);
        if (ProcArg.ArgType === null) {
          $Self.RaiseMsg(20170924202531,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,"untyped",18,$Self.GetTypeDescription$1(IndexResolved,false)),ErrorEl)}
         else {
          if ($Self.CheckParamCompatibility(IndexExpr,ProcArg,ArgNo,true,false) === 2147483647) {
            $Self.ComputeElement(ProcArg.ArgType,ProcArgResolved,rtl.createSet(4),null);
            $Self.RaiseIncompatibleTypeRes(20170924203829,3006,$lp6(18,$lp5(ArgNo)),ProcArgResolved,IndexResolved,ErrorEl);
          };
        };
      };
      function CheckArgs(Proc, IndexVal, IndexResolved, ErrorEl) {
        var ArgNo = 0;
        var PropArg = null;
        var ProcArg = null;
        var PropArgResolved = $lt59.$new();
        var ProcArgResolved = $lt59.$new();
        var NeedCheckingAccess = false;
        ArgNo = 0;
        while (ArgNo < PropEl.FArgs.FCount) {
          if (ArgNo >= Proc.ProcType.Args.FCount) $Self.RaiseMsg(20170216151805,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Proc.FName),ErrorEl);
          PropArg = rtl.getObject(PropEl.FArgs.Get(ArgNo));
          ProcArg = rtl.getObject(Proc.ProcType.Args.Get(ArgNo));
          ArgNo += 1;
          NeedCheckingAccess = false;
          if (PropArg.Access !== ProcArg.Access) {
            if ((PropArg.Access in rtl.createSet(0,1)) && (ProcArg.Access in rtl.createSet(0,1))) {
              if ((PropArg.ArgType !== null) && (ProcArg.ArgType !== null)) NeedCheckingAccess = true;
            };
            if (!NeedCheckingAccess) $Self.RaiseMsg(20170216151808,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,$lm4.AccessDescriptions[ProcArg.Access],18,$lm4.AccessDescriptions[PropArg.Access]),ErrorEl);
          };
          if (PropArg.ArgType === null) {
            if (ProcArg.ArgType !== null) $Self.RaiseMsg(20170216151811,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,$mod.GetElementTypeName(ProcArg.ArgType),18,"untyped"),ErrorEl);
          } else if (ProcArg.ArgType === null) {
            $Self.RaiseMsg(20170216151813,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,"untyped",18,$mod.GetElementTypeName(PropArg.ArgType)),ErrorEl)}
           else {
            $Self.ComputeElement(PropArg,PropArgResolved,rtl.createSet(1),null);
            $Self.ComputeElement(ProcArg,ProcArgResolved,rtl.createSet(1),null);
            if (PropArgResolved.BaseType !== ProcArgResolved.BaseType) $Self.RaiseMsg(20170216151816,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,$Self.GetBaseTypeNames(ProcArgResolved.BaseType),18,$Self.GetBaseTypeNames(PropArgResolved.BaseType)),ErrorEl);
            if (PropArgResolved.LoTypeEl === null) $Self.RaiseInternalError(20161010125255,"");
            if (ProcArgResolved.LoTypeEl === null) $Self.RaiseInternalError(20161010125304,"");
            if (!$Self.IsSameType(PropArgResolved.HiTypeEl,ProcArgResolved.HiTypeEl,1)) $Self.RaiseIncompatibleType(20170216151819,3006,$lp6(18,$lp5(ArgNo)),ProcArgResolved.HiTypeEl,PropArgResolved.HiTypeEl,ErrorEl);
          };
          if (NeedCheckingAccess) {
            if (!(PropArgResolved.BaseType in rtl.unionSet(rtl.unionSet(rtl.unionSet($mod.btAllBooleans,$mod.btAllInteger),$mod.btAllStringAndChars),$mod.btAllFloats))) $Self.RaiseMsg(20181007181647,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,$lm4.AccessDescriptions[ProcArg.Access],18,$lm4.AccessDescriptions[PropArg.Access]),ErrorEl);
          };
        };
        if (IndexVal !== null) {
          if (ArgNo >= Proc.ProcType.Args.FCount) $Self.RaiseMsg(20170924202334,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Proc.FName),ErrorEl);
          ProcArg = rtl.getObject(Proc.ProcType.Args.Get(ArgNo));
          CheckIndexArg(ArgNo,IndexResolved,ProcArg,ErrorEl);
        };
      };
      function CheckImplements() {
        var i = 0;
        var j = 0;
        var Expr = null;
        var ResolvedEl = $lt59.$new();
        var aClass = null;
        var PropClassType = null;
        var IntfType = null;
        var OrigIntfType = null;
        var PropTypeRes = null;
        var o = null;
        if (!$lt94.isPrototypeOf(PropEl.FParent)) $Self.RaiseInternalError(20180323172125,$mod.GetElementDbgPath(PropEl));
        aClass = PropEl.FParent;
        if (PropEl.FArgs.FCount > 0) $Self.RaiseMsg(20180323170952,3101,rtl.getResStr($lm5,"sImplementsDoesNotSupportArrayProperty"),[],PropEl.Implements[0]);
        if (IndexExpr !== null) $Self.RaiseMsg(20180323171354,3102,rtl.getResStr($lm5,"sImplementsDoesNotSupportIndex"),[],PropEl.Implements[0]);
        if ($Self.GetPasPropertyGetter(PropEl) === null) $Self.RaiseMsg(20180323221322,3104,rtl.getResStr($lm5,"sImplPropMustHaveReadSpec"),[],PropEl.Implements[0]);
        for (var $l = 0, $end = rtl.length(PropEl.Implements) - 1; $l <= $end; $l++) {
          i = $l;
          Expr = PropEl.Implements[i];
          $Self.ResolveExpr(Expr,1);
          $Self.ComputeElement(Expr,ResolvedEl,rtl.createSet(4,1),null);
          if (!$lt95.isPrototypeOf(ResolvedEl.IdentEl)) if (ResolvedEl.IdentEl === null) {
            $Self.RaiseXExpectedButYFound(20180323171911,"interface",$mod.GetElementTypeName(ResolvedEl.LoTypeEl),Expr)}
           else $Self.RaiseXExpectedButYFound(20180323224846,"interface",$mod.GetElementTypeName(ResolvedEl.IdentEl),Expr);
          OrigIntfType = ResolvedEl.IdentEl;
          IntfType = $Self.ResolveAliasType(OrigIntfType,true);
          if (!$lt94.isPrototypeOf(IntfType) || (IntfType.ObjKind !== 2)) $Self.RaiseXExpectedButYFound(20180323172904,"interface",$mod.GetElementTypeName(OrigIntfType),Expr);
          j = $Self.IndexOfImplementedInterface(aClass,IntfType);
          if (j < 0) $Self.RaiseMsg(20180323172420,3103,rtl.getResStr($lm5,"sImplementsUsedOnUnimplIntf"),$lp6(18,OrigIntfType.FName),Expr);
          PropTypeRes = $Self.ResolveAliasType(PropType,true);
          if (!$lt94.isPrototypeOf(PropTypeRes)) $Self.RaiseMsg(20180323222334,3105,rtl.getResStr($lm5,"sDoesNotImplementInterface"),$lp6(18,$mod.GetElementTypeName(PropType),18,$mod.GetElementTypeName(OrigIntfType)),Expr);
          PropClassType = PropTypeRes;
          var $tmp = PropClassType.ObjKind;
          if ($tmp === 1) {
            if ($Self.GetClassImplementsIntf(PropClassType,IntfType) === null) $Self.RaiseMsg(20180323223324,3105,rtl.getResStr($lm5,"sDoesNotImplementInterface"),$lp6(18,$mod.GetElementTypeName(PropType),18,$mod.GetElementTypeName(OrigIntfType)),Expr)}
           else if ($tmp === 2) {
            if ($Self.CheckClassIsClass(PropType,IntfType) === 2147483647) $Self.RaiseIncompatibleType(20180323173746,3028,[],OrigIntfType,PropType,Expr)}
           else {
            $Self.RaiseMsg(20180323222821,3105,rtl.getResStr($lm5,"sDoesNotImplementInterface"),$lp6(18,$mod.GetElementTypeName(PropType),18,$mod.GetElementTypeName(OrigIntfType)),Expr);
          };
          o = rtl.getObject(ClassScope.Interfaces.Get(j));
          if ($lt88.isPrototypeOf(o)) {
            $Self.RaiseMsg(20180323174240,3103,rtl.getResStr($lm5,"sDuplicateImplementsForIntf"),$lp6(18,OrigIntfType.FName,18,$Self.GetElementSourcePosStr(o)),Expr)}
           else if ($lt33.isPrototypeOf(o)) {
            $Self.RaiseInternalError(20180323175919,$mod.GetElementDbgPath(PropEl));
          } else if (o !== null) {
            $Self.RaiseInternalError(20180323174342,$lp2(o))}
           else ClassScope.Interfaces.Put(j,PropEl);
        };
      };
      function CheckStoredAccessor(Expr, IndexVal, IndexResolved) {
        var ResolvedEl = $lt59.$new();
        var Value = null;
        var Proc = null;
        var ResultType = null;
        var TypeEl = null;
        var aVar = null;
        var IdentEl = null;
        var ExpArgCnt = 0;
        var ProcArg = null;
        $Self.ResolveExpr(Expr,1);
        $Self.ComputeElement(Expr,ResolvedEl,rtl.createSet(1),null);
        IdentEl = ResolvedEl.IdentEl;
        if ($lt90.isPrototypeOf(IdentEl)) {
          Proc = IdentEl;
          if (!$lt142.isPrototypeOf(Expr)) $Self.RaiseXExpectedButYFound(20170923202002,"member function","foreign " + $mod.GetElementTypeName(Proc),Expr);
          if (Proc.$class.ClassType() !== $lt111) $Self.RaiseXExpectedButYFound(20170216151925,"function",$mod.GetElementTypeName(Proc),Expr);
          ResultType = Proc.GetFT().ResultEl.ResultType;
          if (!$Self.IsBaseType(ResultType,15,true)) $Self.RaiseXExpectedButYFound(20170923200836,"function: boolean","function:" + $Self.GetTypeDescription(ResultType,false),PropEl.StoredAccessor);
          if (Proc.IsAsync()) $Self.RaiseInvalidProcTypeModifier(20200524104719,Proc.ProcType,5,Expr);
          ExpArgCnt = 0;
          if (IndexVal !== null) ExpArgCnt += 1;
          if (Proc.ProcType.Args.FCount !== ExpArgCnt) $Self.RaiseMsg(20170923200840,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Proc.FName),Expr);
          if (IndexVal !== null) {
            ProcArg = rtl.getObject(Proc.ProcType.Args.Get(0));
            CheckIndexArg(1,IndexResolved,ProcArg,Expr);
          };
          return;
        };
        if ((IdentEl !== null) && ((IdentEl.$class.ClassType() === $lt105) || ((IdentEl.$class.ClassType() === $lt117) && !IdentEl.IsConst))) {
          aVar = IdentEl;
          if (!$lt142.isPrototypeOf(Expr)) $Self.RaiseXExpectedButYFound(20170923202003,"member variable","foreign " + $mod.GetElementTypeName(aVar),Expr);
          TypeEl = aVar.VarType;
          TypeEl = $Self.ResolveAliasType(TypeEl,true);
          if (!$Self.IsBaseType(TypeEl,15,true)) $Self.RaiseIncompatibleType(20170409214300,3028,[],TypeEl,$Self.GetBaseTypes(15),Expr);
          if ((4 in PropEl.VarModifiers) !== (4 in aVar.VarModifiers)) if (4 in PropEl.VarModifiers) {
            $Self.RaiseXExpectedButYFound(20170409214351,"class var","var",Expr)}
           else $Self.RaiseXExpectedButYFound(20170409214359,"var","class var",Expr);
          return;
        };
        if ((ResolvedEl.BaseType === 15) && (ResolvedEl.ExprEl !== null)) {
          Value = $Self.Eval(Expr,rtl.createSet(0),true);
          if (Value !== null) try {
            if (Value.Kind !== 3) $Self.RaiseXExpectedButYFound(20170923200256,"boolean",$Self.GetResolverResultDescription(ResolvedEl,false),Expr);
            return;
          } finally {
            $lp12({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
        };
        $Self.RaiseXExpectedButYFound(20170923194234,"identifier",$Self.GetResolverResultDescription(ResolvedEl,false),Expr);
      };
      var ResultType = null;
      var aType = null;
      var MembersType = null;
      var AccEl = null;
      var Proc = null;
      var Arg = null;
      var PropArgCount = 0;
      var NeedArgCnt = 0;
      var PropTypeResolved = $lt59.$new();
      var DefaultResolved = $lt59.$new();
      var IndexResolved = $lt59.$new();
      var AncIndexResolved = $lt59.$new();
      var m = 0;
      var IndexVal = null;
      var AncIndexExpr = null;
      var ErrorEl = null;
      var CurClass = null;
      this.CheckTopScope($lt38,false);
      this.PopScope();
      if (PropEl.Visibility === 4) for (var $l in PropEl.VarModifiers) {
        m = +$l;
        if (!(m in rtl.createSet(1))) this.RaiseMsg(20170403224112,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"published property",18,'"' + $lm4.VariableModifierNames[m] + '"'),PropEl);
      };
      PropType = null;
      MembersType = rtl.as(PropEl.FParent,$lt107);
      ClassOrRecScope = rtl.as($mod.NoNil(MembersType.FData),$lt30);
      ClassScope = null;
      CurClass = null;
      if ($lt34.isPrototypeOf(ClassOrRecScope)) {
        ClassScope = ClassOrRecScope;
        CurClass = MembersType;
      };
      AncestorProp = null;
      GetPropType();
      IndexVal = null;
      try {
        if (PropEl.IndexExpr !== null) {
          IndexExpr = PropEl.IndexExpr;
          this.ResolveExpr(IndexExpr,1);
        } else IndexExpr = this.GetPasPropertyIndex(PropEl);
        if (IndexExpr !== null) {
          this.ComputeElement(IndexExpr,IndexResolved,rtl.createSet(3),null);
          IndexVal = this.Eval(IndexExpr,rtl.createSet(0),true);
          var $tmp = IndexVal.Kind;
          if (($tmp === 3) || ($tmp === 4) || ($tmp === 5) || ($tmp === 6) || ($tmp === 7) || ($tmp === 8) || ($tmp === 9)) {}
          else {
            this.RaiseXExpectedButYFound(20170924202837,"ordinal",this.GetTypeDescription$1(IndexResolved,false),PropEl.IndexExpr);
          };
          if ((PropEl.IndexExpr !== null) && (PropEl.VarType === null)) {
            AncIndexExpr = this.GetPasPropertyIndex(AncestorProp);
            if (AncIndexExpr === null) {
              if (PropEl.ReadAccessor === null) {
                AccEl = this.GetPasPropertyGetter(AncestorProp);
                if ($lt90.isPrototypeOf(AccEl)) this.RaiseMsg(20171002144103,3072,rtl.getResStr($lm5,"sAddingIndexSpecifierRequiresNewX"),$lp6(18,"read"),IndexExpr);
              };
              if (PropEl.WriteAccessor === null) {
                AccEl = this.GetPasPropertySetter(AncestorProp);
                if ($lt90.isPrototypeOf(AccEl)) this.RaiseMsg(20171002144419,3072,rtl.getResStr($lm5,"sAddingIndexSpecifierRequiresNewX"),$lp6(18,"write"),IndexExpr);
              };
              if (PropEl.StoredAccessor === null) {
                AccEl = this.GetPasPropertyStoredExpr(AncestorProp);
                if (AccEl !== null) {
                  this.ComputeElement(AccEl,AncIndexResolved,rtl.createSet(1),null);
                  if ($lt90.isPrototypeOf(AncIndexResolved.IdentEl)) this.RaiseMsg(20171002144644,3072,rtl.getResStr($lm5,"sAddingIndexSpecifierRequiresNewX"),$lp6(18,"stored"),IndexExpr);
                };
              };
            } else this.CheckEqualElCompatibility(PropEl.IndexExpr,AncIndexExpr,PropEl.IndexExpr,true,false);
          };
        };
        if (PropEl.ReadAccessor !== null) {
          ErrorEl = PropEl.ReadAccessor;
          AccEl = this.ResolveAccessor(PropEl.ReadAccessor);
          if ((AccEl.$class.ClassType() === $lt105) || (AccEl.$class.ClassType() === $lt117)) {
            if (PropEl.FArgs.FCount > 0) this.RaiseXExpectedButYFound(20170216151823,"function",$mod.GetElementTypeName(AccEl),ErrorEl);
            if (!this.IsSameType(AccEl.VarType,PropType,2)) this.RaiseIncompatibleType(20170216151826,3028,[],PropType,AccEl.VarType,ErrorEl);
            if ((4 in PropEl.VarModifiers) !== (4 in AccEl.VarModifiers)) if (4 in PropEl.VarModifiers) {
              this.RaiseXExpectedButYFound(20170216151828,"class var","var",ErrorEl)}
             else this.RaiseXExpectedButYFound(20170216151831,"var","class var",ErrorEl);
          } else if ($lt90.isPrototypeOf(AccEl)) {
            Proc = AccEl;
            if (4 in PropEl.VarModifiers) {
              if (Proc.$class.ClassType() !== $lt162) this.RaiseXExpectedButYFound(20170216151834,"class function",$mod.GetElementTypeName(Proc),ErrorEl);
              if (!CheckClassAccessorStatic(Proc.IsStatic())) if (Proc.IsStatic()) {
                this.RaiseMsg(20170216151837,3040,rtl.getResStr($lm5,"sClassPropertyAccessorMustNotBeStatic"),[],ErrorEl)}
               else this.RaiseMsg(20170216151839,3039,rtl.getResStr($lm5,"sClassPropertyAccessorMustBeStatic"),[],ErrorEl);
            } else {
              if (Proc.$class.ClassType() !== $lt111) this.RaiseXExpectedButYFound(20170216151842,"function",$mod.GetElementTypeName(Proc),ErrorEl);
            };
            ResultType = Proc.GetFT().ResultEl.ResultType;
            if (!this.IsSameType(ResultType,PropType,2)) this.RaiseXExpectedButYFound(20170216151844,"function result " + this.GetTypeDescription(PropType,true),this.GetTypeDescription(ResultType,true),ErrorEl);
            if (Proc.IsAsync()) this.RaiseMsg(20200526101546,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"property getter",18,$lm4.ProcTypeModifiers[5]),ErrorEl);
            CheckArgs(Proc,IndexVal,IndexResolved,PropEl.ReadAccessor);
            NeedArgCnt = PropEl.FArgs.FCount;
            if (IndexVal !== null) NeedArgCnt += 1;
            if (Proc.ProcType.Args.FCount !== NeedArgCnt) this.RaiseMsg(20170216151847,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Proc.FName),ErrorEl);
          } else this.RaiseXExpectedButYFound(20170216151850,"variable",$mod.GetElementTypeName(AccEl),ErrorEl);
        };
        if (PropEl.WriteAccessor !== null) {
          ErrorEl = PropEl.WriteAccessor;
          AccEl = this.ResolveAccessor(PropEl.WriteAccessor);
          if ((AccEl.$class.ClassType() === $lt105) || ((AccEl.$class.ClassType() === $lt117) && !AccEl.IsConst)) {
            if (PropEl.FArgs.FCount > 0) this.RaiseXExpectedButYFound(20170216151852,"procedure",$mod.GetElementTypeName(AccEl),ErrorEl);
            if (!this.IsSameType(AccEl.VarType,PropType,2)) this.RaiseIncompatibleType(20170216151855,3028,[],PropType,AccEl.VarType,ErrorEl);
            if ((4 in PropEl.VarModifiers) !== (4 in AccEl.VarModifiers)) if (4 in PropEl.VarModifiers) {
              this.RaiseXExpectedButYFound(20170216151858,"class var","var",ErrorEl)}
             else this.RaiseXExpectedButYFound(20170216151900,"var","class var",ErrorEl);
          } else if ($lt90.isPrototypeOf(AccEl)) {
            Proc = AccEl;
            if (4 in PropEl.VarModifiers) {
              if (Proc.$class.ClassType() !== $lt161) this.RaiseXExpectedButYFound(20170216151903,"class procedure",$mod.GetElementTypeName(Proc),ErrorEl);
              if (!CheckClassAccessorStatic(Proc.IsStatic())) if (Proc.IsStatic()) {
                this.RaiseMsg(20170216151905,3040,rtl.getResStr($lm5,"sClassPropertyAccessorMustNotBeStatic"),[],ErrorEl)}
               else this.RaiseMsg(20170216151906,3039,rtl.getResStr($lm5,"sClassPropertyAccessorMustBeStatic"),[],ErrorEl);
            } else {
              if (Proc.$class.ClassType() !== $lt90) this.RaiseXExpectedButYFound(20170216151910,"procedure",$mod.GetElementTypeName(Proc),ErrorEl);
            };
            if (Proc.IsAsync()) this.RaiseMsg(20200526101635,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,"property setter",18,$lm4.ProcTypeModifiers[5]),ErrorEl);
            CheckArgs(Proc,IndexVal,IndexResolved,PropEl.WriteAccessor);
            PropArgCount = PropEl.FArgs.FCount;
            if (IndexVal !== null) PropArgCount += 1;
            if (Proc.ProcType.Args.FCount !== (PropArgCount + 1)) this.RaiseMsg(20170216151913,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Proc.FName),ErrorEl);
            Arg = rtl.getObject(Proc.ProcType.Args.Get(PropArgCount));
            if (!(Arg.Access in rtl.createSet(0,1))) this.RaiseMsg(20170216151917,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(PropArgCount + 1),18,$lm4.AccessDescriptions[Arg.Access],18,$lm4.AccessDescriptions[1]),ErrorEl);
            if (!this.IsSameType(Arg.ArgType,PropType,2)) this.RaiseIncompatibleType(20170216151919,3006,$lp6(18,$lp5(PropArgCount + 1)),Arg.ArgType,PropType,ErrorEl);
          } else this.RaiseXExpectedButYFound(20170216151921,"variable",$mod.GetElementTypeName(AccEl),ErrorEl);
        } else if ((PropEl.ReadAccessor === null) && (PropEl.VarType !== null)) this.RaiseMsg(20180519173551,3050,rtl.getResStr($lm5,"sPropertyMustHaveReadOrWrite"),[],PropEl);
        if (rtl.length(PropEl.Implements) > 0) CheckImplements();
        if (PropEl.StoredAccessor !== null) {
          CheckStoredAccessor(PropEl.StoredAccessor,IndexVal,IndexResolved);
        };
        if (PropEl.DefaultExpr !== null) {
          this.ResolveExpr(PropEl.DefaultExpr,1);
          this.ComputeElement(PropEl.DefaultExpr,DefaultResolved,rtl.createSet(3),null);
          this.ComputeElement(PropType,PropTypeResolved,rtl.createSet(4),null);
          PropTypeResolved.IdentEl = PropEl;
          PropTypeResolved.Flags = rtl.createSet(0);
          this.CheckEqualResCompatibility(PropTypeResolved,DefaultResolved,PropEl.DefaultExpr,true,null);
        };
        if (PropEl.IsDefault) {
          if ((CurClass !== null) && (CurClass.HelperForType !== null)) {
            aType = this.ResolveAliasType(CurClass.HelperForType,true);
            if (!$lt107.isPrototypeOf(aType)) this.RaiseMsg(20190117125004,3116,rtl.getResStr($lm5,"sDefaultPropertyNotAllowedInHelperForX"),$lp6(18,this.GetTypeDescription(CurClass.HelperForType,false)),PropEl);
          };
          if ((ClassOrRecScope.DefaultProperty !== null) && (ClassOrRecScope.DefaultProperty.FParent === PropEl.FParent)) this.RaiseMsg(20170216151938,3041,rtl.getResStr($lm5,"sOnlyOneDefaultPropertyIsAllowed"),[],PropEl);
          ClassOrRecScope.DefaultProperty = PropEl;
        };
        this.EmitTypeHints(PropEl,PropEl.VarType);
      } finally {
        $lp12({get: function () {
            return IndexVal;
          }, set: function (v) {
            IndexVal = v;
          }});
      };
    };
    this.FinishArgument = function (El) {
      var $Self = this;
      function CheckHasGenTemplRef(Arg) {
        function Check(Parent, Cur, TemplTypes) {
          var C = null;
          var Arr = null;
          if (Cur === null) return;
          C = Cur.$class.ClassType();
          if (C === $lt104) {
            if (TemplTypes.IndexOf(Cur) >= 0) $Self.RaiseMsg(20191007213121,3141,rtl.getResStr($lm5,"sParamOfThisTypeCannotHaveDefVal"),[],El);
          } else if (Cur.FParent !== Parent) {
            return}
           else if (C === $lt102) {
            Arr = Cur;
            Check(Arr,Arr.ElType,TemplTypes);
          };
        };
        var Proc = null;
        var TemplTypes = null;
        if (Arg.ArgType === null) return;
        if (!$lt100.isPrototypeOf(Arg.FParent)) return;
        if (!$lt90.isPrototypeOf(Arg.FParent.FParent)) return;
        Proc = Arg.FParent.FParent;
        TemplTypes = $Self.GetProcTemplateTypes(Proc);
        if (TemplTypes === null) return;
        Check(Arg,Arg.ArgType,TemplTypes);
      };
      var IsDelphi = false;
      if (!(El.Access in rtl.createSet(0,1,2,3,4))) this.RaiseMsg(20191018235644,3002,rtl.getResStr($lm5,"sNotYetImplemented"),$lp6(18,$lm4.AccessDescriptions[El.Access]),El);
      if (El.ArgType !== null) this.CheckUseAsType(El.ArgType,20190123100049,El);
      if (El.ValueExpr !== null) {
        this.ResolveExpr(El.ValueExpr,1);
        if (El.ArgType !== null) {
          this.CheckAssignCompatibility(El,El.ValueExpr,true,null);
          IsDelphi = 3 in this.FCurrentParser.GetCurrentModeSwitches();
          if (IsDelphi) CheckHasGenTemplRef(El);
        };
      };
      this.EmitTypeHints(El,El.ArgType);
    };
    this.FinishAncestors = function (aClass) {
      var $Self = this;
      var DirectAncestor = null;
      var AncestorClassEl = null;
      function IsDefaultAncestor(c, DefAncestorName) {
        var Result = false;
        Result = $lp7(c.FName,DefAncestorName) && $lt116.isPrototypeOf(c.FParent);
        return Result;
      };
      function FindDefaultAncestor(DefAncestorName, Expected) {
        var CurEl = null;
        AncestorClassEl = null;
        if ($lp7(aClass.FName,DefAncestorName)) {
          if (IsDefaultAncestor(aClass,DefAncestorName)) return;
          $Self.RaiseXExpectedButYFound(20190106132328,"top level " + DefAncestorName,"nested " + aClass.FName,aClass);
        };
        CurEl = $Self.FindElementWithoutParams(DefAncestorName,aClass,false,true);
        if (!$lt95.isPrototypeOf(CurEl)) $Self.RaiseXExpectedButYFound(20180321150128,Expected,$mod.GetElementTypeName(CurEl),aClass);
        DirectAncestor = CurEl;
        CurEl = $Self.ResolveAliasType(DirectAncestor,true);
        if (!$lt94.isPrototypeOf(CurEl)) $Self.RaiseXExpectedButYFound(20170216151941,Expected,$mod.GetElementTypeName(DirectAncestor),aClass);
        AncestorClassEl = CurEl;
      };
      var ClassScope = null;
      var AncestorClassScope = null;
      var AncestorType = null;
      var El = null;
      var i = 0;
      var aModifier = "";
      var DefAncestorName = "";
      var IsSealed = false;
      var IsDelphi = false;
      var CanonicalSelf = null;
      var Decl = null;
      var j = 0;
      var TypeParamCnt = 0;
      var IntfType = null;
      var IntfTypeRes = null;
      var HelperForType = null;
      var AncestorHelperFor = null;
      var ResIntfList = null;
      var Members = null;
      var GroupScope = null;
      var C = null;
      IsDelphi = 3 in this.FCurrentParser.GetCurrentModeSwitches();
      if (aClass.IsForward) {
        this.PopGenericParamScope(aClass);
        C = aClass.FParent.$class.ClassType();
        if (C.InheritsFrom($lt156)) {
          Members = aClass.FParent.Declarations}
         else if ((C === $lt94) || (C === $lt98)) {
          Members = aClass.FParent.Members}
         else this.RaiseNotYetImplemented(20180430141934,aClass,$lp2(aClass.FParent));
        TypeParamCnt = this.GetTypeParameterCount(aClass);
        for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Decl = rtl.getObject(Members.Get(i));
          if (($lp4(Decl.FName,aClass.FName) !== 0) || (Decl === aClass)) continue;
          if ($lt93.isPrototypeOf(Decl) && (this.GetTypeParameterCount(Decl) !== TypeParamCnt)) continue;
          this.RaiseMsg(20180212144132,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,Decl.FName,18,this.GetElementSourcePosStr(Decl)),aClass);
        };
        if (TypeParamCnt > 0) {
          this.CreateScope(aClass,this.FScopeClass_Class);
        };
        return;
      };
      var $tmp = aClass.ObjKind;
      if ($tmp === 1) {
        AncestorType = this.ResolveAliasType(aClass.AncestorType,true);
        if ($lt94.isPrototypeOf(AncestorType) && (AncestorType.ObjKind === 2) && !IsDelphi) {
          aClass.Interfaces.Insert(0,aClass.AncestorType);
          aClass.AncestorType = null;
        };
      } else if ($tmp === 2) {
        if (aClass.IsExternal) this.RaiseMsg(20180321115831,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,"external"),aClass);
        if (!(aClass.InterfaceType in rtl.createSet(0,1))) this.RaiseMsg(20180321143613,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,this.FCurrentParser.FScanner.GetCurrentValueSwitch(0)),aClass);
      } else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
        if (aClass.IsExternal) this.RaiseMsg(20190116192722,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,"external"),aClass);
        HelperForType = this.ResolveAliasType(aClass.HelperForType,true);
        if (HelperForType === null) this.RaiseNotYetImplemented(20191016125557,aClass,"");
        if ((aClass === HelperForType) || aClass.HasParent(HelperForType)) this.RaiseMsg(20190118190935,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,HelperForType.FName),aClass);
        var $tmp1 = aClass.ObjKind;
        if ($tmp1 === 3) {
          if (!$lt94.isPrototypeOf(HelperForType)) this.RaiseXExpectedButYFound(20190116194751,"class type",this.GetTypeDescription(aClass.HelperForType,false),aClass);
          if (HelperForType.ObjKind !== 1) this.RaiseXExpectedButYFound(20190116194855,"class type",this.GetTypeDescription(aClass.HelperForType,false),aClass);
          if (HelperForType.IsForward) this.RaiseMsg(20190116194931,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,HelperForType.FName),aClass);
        } else if ($tmp1 === 4) {
          if (IsDelphi) {
            if ((HelperForType.$class.ClassType() === $lt98) || (HelperForType.$class.ClassType() === $lt102) || (HelperForType.$class.ClassType() === $lt119) || (HelperForType.$class.ClassType() === $lt99) || (HelperForType.$class.ClassType() === $lt103)) {}
            else if ((HelperForType.$class.ClassType() === $lt83) && $lt62.isPrototypeOf(HelperForType.FData)) {}
            else this.RaiseMsg(20190116200304,3114,rtl.getResStr($lm5,"sTypeXCannotBeExtendedByARecordHelper"),$lp6(18,this.GetTypeDescription(HelperForType,false)),aClass);
          } else {
            if (HelperForType.$class.ClassType() === $lt98) {}
            else this.RaiseMsg(20190116200519,3114,rtl.getResStr($lm5,"sTypeXCannotBeExtendedByARecordHelper"),$lp6(18,this.GetTypeDescription(HelperForType,false)),aClass);
          }}
         else if ($tmp1 === 5) {
          if ((HelperForType.$class.ClassType() === $lt98) || (HelperForType.$class.ClassType() === $lt102) || (HelperForType.$class.ClassType() === $lt119) || (HelperForType.$class.ClassType() === $lt99) || (HelperForType.$class.ClassType() === $lt103)) {}
          else if ((HelperForType.$class.ClassType() === $lt83) && $lt62.isPrototypeOf(HelperForType.FData)) {}
          else if ((HelperForType.$class.ClassType() === $lt94) && (HelperForType.ObjKind in rtl.createSet(1,2))) {
            if (HelperForType.IsForward) this.RaiseMsg(20190116200940,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,HelperForType.FName),aClass);
          } else this.RaiseMsg(20190116200304,3113,rtl.getResStr($lm5,"sTypeXCannotBeExtendedByATypeHelper"),$lp6(18,this.GetTypeDescription(HelperForType,false)),aClass);
        };
      } else {
        this.RaiseNotYetImplemented(20161010174638,aClass,"Kind=" + $lm4.ObjKindNames[aClass.ObjKind]);
      };
      IsSealed = false;
      for (var $l1 = 0, $end1 = aClass.Modifiers.GetCount() - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        aModifier = $lp1(aClass.Modifiers.Get(i));
        var $tmp2 = aModifier;
        if ($tmp2 === "sealed") {
          IsSealed = true}
         else if ($tmp2 === "abstract") {}
        else {
          this.RaiseMsg(20170320190619,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,aClass.Modifiers.Get(i)),aClass);
        };
      };
      AncestorClassEl = null;
      DirectAncestor = aClass.AncestorType;
      AncestorType = this.ResolveAliasType(DirectAncestor,true);
      if (AncestorType === null) {
        if (DirectAncestor !== null) this.RaiseInternalError(20180321151851,$lp2(DirectAncestor));
        DefAncestorName = "";
        var $tmp3 = aClass.ObjKind;
        if ($tmp3 === 1) {
          DefAncestorName = "TObject";
          if (aClass.IsExternal || IsDefaultAncestor(aClass,DefAncestorName)) {
            AncestorClassEl = null;
          } else {
            FindDefaultAncestor(DefAncestorName,"class type");
            if (AncestorClassEl.ObjKind !== 1) this.RaiseXExpectedButYFound(20180321145626,"class type",$mod.GetElementTypeName(AncestorClassEl),aClass);
          };
        } else if ($tmp3 === 2) {
          if (aClass.InterfaceType === 0) {
            if (IsDelphi) {
              DefAncestorName = "IInterface"}
             else DefAncestorName = "IUnknown";
            if (IsDefaultAncestor(aClass,DefAncestorName)) {
              AncestorClassEl = null}
             else {
              FindDefaultAncestor(DefAncestorName,"interface type");
              if (AncestorClassEl.ObjKind !== 2) this.RaiseXExpectedButYFound(20180321145725,"interface type",$mod.GetElementTypeName(AncestorClassEl),aClass);
            };
          };
        } else if (($tmp3 === 3) || ($tmp3 === 4) || ($tmp3 === 5)) ;
      } else if (AncestorType.$class.ClassType() !== $lt94) {
        this.RaiseXExpectedButYFound(20170216151944,"class type",this.GetTypeDescription(AncestorType,false),aClass)}
       else if (aClass === AncestorType) {
        this.RaiseMsg(20170525125854,3011,rtl.getResStr($lm5,"sAncestorCycleDetected"),[],aClass)}
       else {
        AncestorClassEl = AncestorType;
        if (AncestorClassEl.ObjKind !== aClass.ObjKind) this.RaiseXExpectedButYFound(20180321152107,$mod.GetElementTypeName(aClass) + " type",$mod.GetElementTypeName(AncestorClassEl) + " type",aClass);
        if (aClass.ObjKind in $lm4.okAllHelpers) {
          HelperForType = this.ResolveAliasType(aClass.HelperForType,true);
          AncestorHelperFor = this.ResolveAliasType(AncestorClassEl.HelperForType,true);
          if (this.IsSameType(HelperForType,AncestorHelperFor,0)) {}
          else if ($lt94.isPrototypeOf(HelperForType) && $lt94.isPrototypeOf(AncestorHelperFor) && (this.CheckClassIsClass(HelperForType,AncestorHelperFor) !== 2147483647)) {}
          else this.RaiseMsg(20190116203931,3115,rtl.getResStr($lm5,"sDerivedXMustExtendASubClassY"),$lp6(18,$mod.GetElementTypeName(aClass),18,AncestorClassEl.HelperForType.FName),aClass);
        };
        this.EmitTypeHints(aClass,AncestorClassEl);
      };
      AncestorClassScope = null;
      if (AncestorClassEl === null) {}
      else {
        if (AncestorClassEl.IsForward) this.RaiseMsg(20170216151947,3012,rtl.getResStr($lm5,"sCantUseForwardDeclarationAsAncestor"),$lp6(18,AncestorClassEl.FName),aClass);
        if (aClass.IsExternal && !AncestorClassEl.IsExternal) this.RaiseMsg(20170321144035,3049,rtl.getResStr($lm5,"sAncestorIsNotExternal"),$lp6(18,AncestorClassEl.FName),aClass);
        AncestorClassScope = rtl.as(AncestorClassEl.FData,$lt34);
        if (1 in AncestorClassScope.Flags) this.RaiseMsg(20170320191735,3048,rtl.getResStr($lm5,"sCannotCreateADescendantOfTheSealedXY"),$lp6(18,$mod.GetElementTypeName(AncestorClassEl),18,AncestorClassEl.FName),aClass);
        El = AncestorClassEl;
        do {
          if (El === aClass) this.RaiseMsg(20170216151949,3011,rtl.getResStr($lm5,"sAncestorCycleDetected"),[],aClass);
          if ((El.$class.ClassType() === $lt157) || (El.$class.ClassType() === $lt158) || (El.$class.ClassType() === $lt155)) {
            El = El.DestType}
           else if (El.$class.ClassType() === $lt94) {
            El = El.AncestorType}
           else this.RaiseNotYetImplemented(20190825195203,aClass,$lp2(El));
        } while (!(El === null));
        if (!aClass.RTTIVisibility.Explicit) {
          aClass.RTTIVisibility.Fields = rtl.unionSet(AncestorClassEl.RTTIVisibility.Fields,aClass.RTTIVisibility.Fields);
          aClass.RTTIVisibility.Methods = rtl.unionSet(AncestorClassEl.RTTIVisibility.Methods,aClass.RTTIVisibility.Methods);
          aClass.RTTIVisibility.Properties = rtl.unionSet(AncestorClassEl.RTTIVisibility.Properties,aClass.RTTIVisibility.Properties);
        };
      };
      if ($lt25.isPrototypeOf(this.FTopScope)) this.PopGenericParamScope(aClass);
      if (aClass.FData === null) {
        ClassScope = this.CreateScope(aClass,this.FScopeClass_Class)}
       else {
        ClassScope = rtl.as(aClass.FData,$lt34);
        if (0 in ClassScope.Flags) this.RaiseNotYetImplemented(20190803203715,aClass,"");
      };
      ClassScope.Flags = rtl.includeSet(ClassScope.Flags,0);
      if (IsSealed) ClassScope.Flags = rtl.includeSet(ClassScope.Flags,1);
      this.AddGenericTemplateIdentifiers(aClass.GenericTemplateTypes,ClassScope);
      ClassScope.DirectAncestor = DirectAncestor;
      if (AncestorClassEl !== null) {
        ClassScope.AncestorScope = AncestorClassScope;
        ClassScope.DefaultProperty = AncestorClassScope.DefaultProperty;
        if (2 in AncestorClassScope.Flags) ClassScope.Flags = rtl.includeSet(ClassScope.Flags,2);
        ClassScope.AbstractProcs = rtl.arrayCopy(0,AncestorClassScope.AbstractProcs,0);
      };
      if (11 in this.FCurrentParser.FScanner.FCurrentBoolSwitches) ClassScope.Flags = rtl.includeSet(ClassScope.Flags,2);
      if (aClass.ObjKind in rtl.unionSet(rtl.createSet(1),$lm4.okAllHelpers)) {
        CanonicalSelf = this.CreateOwnedElement($lt96,"Self",aClass);
        ClassScope.CanonicalClassOf = CanonicalSelf;
        CanonicalSelf.DestType = aClass;
        CanonicalSelf.Visibility = 6;
        CanonicalSelf.SourceFilename = aClass.SourceFilename;
        CanonicalSelf.SourceLinenumber = aClass.SourceLinenumber;
      };
      GroupScope = this.PushGroupScope(aClass);
      GroupScope.VisibilityContext = aClass;
      if (aClass.Interfaces.FCount > 0) {
        if (!(aClass.ObjKind in rtl.createSet(1))) this.RaiseXExpectedButYFound(20180322001341,"one ancestor",$lp5(1 + aClass.Interfaces.FCount),aClass);
        if (aClass.IsExternal) this.RaiseMsg(20180324183641,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(18,"external"),aClass);
        ResIntfList = $lt85.$create("Create");
        try {
          for (var $l2 = 0, $end2 = aClass.Interfaces.FCount - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            IntfType = rtl.getObject(aClass.Interfaces.Get(i));
            IntfTypeRes = this.ResolveAliasType(IntfType,true);
            if (IntfTypeRes === null) this.RaiseMsg(20180322140044,3012,rtl.getResStr($lm5,"sCantUseForwardDeclarationAsAncestor"),$lp6(18,IntfType.FName),aClass);
            if (!$lt94.isPrototypeOf(IntfTypeRes)) this.RaiseXExpectedButYFound(20180322001051,"interface type",$mod.GetElementTypeName(IntfTypeRes) + " type",aClass);
            if (IntfTypeRes.ObjKind !== 2) this.RaiseXExpectedButYFound(20180322001143,"interface type",$mod.GetElementTypeName(IntfTypeRes) + " type",aClass);
            j = ResIntfList.IndexOf(IntfTypeRes);
            if (j >= 0) this.RaiseMsg(20180322001505,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,IntfType.FName,18,$lp5(j + 1)),aClass);
            ResIntfList.Add(IntfTypeRes);
          };
        } finally {
          ResIntfList = rtl.freeLoc(ResIntfList);
        };
        ClassScope.Interfaces = $lt85.$create("Create");
        ClassScope.Interfaces.SetCount(aClass.Interfaces.FCount);
      };
    };
    this.FinishMethodResolution = function (El) {
      var ResolvedEl = $lt59.$new();
      var aClass = null;
      var IntfType = null;
      var i = 0;
      var IntfProc = null;
      var Expr = null;
      var ProcName = "";
      var IntfScope = null;
      var Identifier = null;
      this.ResolveExpr(El.InterfaceName,1);
      this.ComputeElement(El.InterfaceName,ResolvedEl,rtl.createSet(4,1),null);
      if (!$lt95.isPrototypeOf(ResolvedEl.IdentEl)) this.RaiseXExpectedButYFound(20180323132601,"interface type",this.GetResolverResultDescription(ResolvedEl,false),El.InterfaceName);
      aClass = rtl.as(El.FParent,$lt94);
      i = this.IndexOfImplementedInterface(aClass,ResolvedEl.IdentEl);
      if (i < 0) this.RaiseXExpectedButYFound(20180323133055,"interface type",this.GetResolverResultDescription(ResolvedEl,false),El.InterfaceName);
      IntfType = this.ResolveAliasType(rtl.getObject(aClass.Interfaces.Get(i)),true);
      Expr = El.InterfaceProc;
      if (!$lt142.isPrototypeOf(Expr)) this.RaiseXExpectedButYFound(20180327152808,"method name",$mod.GetElementTypeName(Expr),Expr);
      if (Expr.Kind !== 0) this.RaiseXExpectedButYFound(20180327152841,"method name",$mod.GetElementTypeName(Expr),Expr);
      ProcName = Expr.Value;
      IntfScope = rtl.as(IntfType.FData,$lt34);
      IntfProc = null;
      while (IntfScope !== null) {
        Identifier = IntfScope.FindLocalIdentifier(ProcName);
        while (Identifier !== null) {
          if (!$lt90.isPrototypeOf(Identifier.FElement)) this.RaiseXExpectedButYFound(20180327153110,"interface method",$mod.GetElementTypeName(Identifier.FElement),Expr);
          IntfProc = Identifier.FElement;
          if (IntfProc.$class.ClassType() === El.ProcClass) break;
          Identifier = Identifier.NextSameIdentifier;
        };
        IntfScope = IntfScope.AncestorScope;
      };
      if (IntfProc === null) this.RaiseIdentifierNotFound(20180327153044,ProcName,Expr);
      this.CreateReference(IntfProc,Expr,1,null);
      if (IntfProc.$class.ClassType() !== El.ProcClass) this.RaiseXExpectedButYFound(20180323144107,$mod.GetElementTypeName$1(El.ProcClass),$mod.GetElementTypeName(IntfProc),El.InterfaceProc);
    };
    this.FinishAttributes = function (El) {
      var IsArg = false;
      var i = 0;
      var j = 0;
      var NameExpr = null;
      var Expr = null;
      var Bin = null;
      var LeftResolved = $lt59.$new();
      var ParamResolved = $lt59.$new();
      var aModule = null;
      var LTypeEl = null;
      var AttrName = "";
      var Data = $lt65.$new();
      var CurEl = null;
      var DeclEl = null;
      var ClassEl = null;
      var aConstructor = null;
      var Args = null;
      var AttrRef = null;
      var ParamRef = null;
      var DotScope = null;
      var Params = [];
      IsArg = $lt106.isPrototypeOf(El.FParent);
      for (var $l = 0, $end = rtl.length(El.Calls) - 1; $l <= $end; $l++) {
        i = $l;
        NameExpr = El.Calls[i];
        if (IsArg && (NameExpr.Kind === 0) && $lp7(NameExpr.Value,"ref")) {
          if (El.FParent.Access === 4) continue;
        };
        if ($lt145.isPrototypeOf(NameExpr)) NameExpr = NameExpr.Value;
        DotScope = null;
        if ($lt144.isPrototypeOf(NameExpr)) {
          Bin = NameExpr;
          this.ResolveExpr(Bin.Left,1);
          this.ComputeElement(Bin.Left,LeftResolved,rtl.createSet(4,0),null);
          if (LeftResolved.BaseType === 3) {
            aModule = rtl.as($mod.NoNil(LeftResolved.IdentEl),$lt86);
            DotScope = this.PushModuleDotScope(aModule);
          } else if ((LeftResolved.BaseType === 2) && $lt95.isPrototypeOf(LeftResolved.IdentEl) && $lt107.isPrototypeOf(LeftResolved.LoTypeEl)) {
            LTypeEl = LeftResolved.LoTypeEl;
            if (LTypeEl.$class.ClassType() === $lt94) {
              DotScope = this.PushClassDotScope({get: function () {
                  return LTypeEl;
                }, set: function (v) {
                  LTypeEl = v;
                }},true);
              DotScope.OnlyTypeMembers = true;
            } else if (LTypeEl.$class.ClassType() === $lt98) {
              DotScope = this.PushRecordDotScope(LTypeEl);
              DotScope.OnlyTypeMembers = true;
            } else this.RaiseNotYetImplemented(20190221124930,Bin,"");
          } else this.RaiseMsg(20190221102049,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"module or type",18,this.GetResolverResultDescription(LeftResolved,true)),NameExpr);
          NameExpr = Bin.Right;
        };
        if (!this.IsNameExpr(NameExpr)) this.RaiseMsg(20190221125204,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"identifier",18,$mod.GetElementTypeName(Bin)),NameExpr);
        AttrName = NameExpr.Value;
        CurEl = null;
        if (!$lp7($lp15(AttrName,"Attribute".length),"Attribute")) {
          CurEl = this.FindFirstEl(AttrName + "Attribute",Data,NameExpr);
        };
        if (CurEl === null) CurEl = this.FindFirstEl(AttrName,Data,NameExpr);
        if (DotScope !== null) this.PopScope();
        if (CurEl === null) {
          this.LogMsg(20190221144613,2,3121,rtl.getResStr($lm5,"sUnknownCustomAttributeX"),$lp6(18,AttrName),NameExpr);
          continue;
        };
        if (!this.IsCustomAttribute(CurEl)) this.RaiseMsg(20190221130400,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,$mod.GetElementTypeName(CurEl),18,"TCustomAttribute"),NameExpr);
        ClassEl = CurEl;
        AttrRef = this.CreateReference(ClassEl,NameExpr,1,null);
        if (ClassEl.IsAbstract()) this.LogMsg(20190223194424,2,3122,rtl.getResStr($lm5,"sAttributeIgnoredBecauseAbstractX"),$lp6(18,"class"),NameExpr);
        DotScope = this.PushClassDotScope({get: function () {
            return ClassEl;
          }, set: function (v) {
            ClassEl = v;
          }},true);
        DotScope.OnlyTypeMembers = true;
        Expr = El.Calls[i];
        if ($lt145.isPrototypeOf(Expr)) {
          if (Expr.Kind !== 10) {
            this.RaiseMsg(20190223195605,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(9,"(",9,"["),Expr);
          };
          this.ResolveParamsExprParams(Expr);
          this.ResolveFuncParamsExprName(Expr,null,Expr,1,"Create");
          Params = Expr.Params;
          for (var $l1 = 0, $end1 = rtl.length(Params) - 1; $l1 <= $end1; $l1++) {
            j = $l1;
            this.ComputeElement(Params[j],ParamResolved,rtl.createSet(3),null);
          };
          ParamRef = rtl.as(Expr.FData,$lt55);
          DeclEl = ParamRef.FDeclaration;
          if (DeclEl.$class.ClassType() !== $lt108) this.RaiseXExpectedButYFound(20190221150212,"constructor Create",$mod.GetElementTypeName(DeclEl),NameExpr);
          aConstructor = DeclEl;
        } else {
          DeclEl = this.FindElementWithoutParams$1("Create",Data,NameExpr,false,true);
          if (DeclEl === null) this.RaiseIdentifierNotFound(20190221144516,"Create",NameExpr);
          if (DeclEl.$class.ClassType() !== $lt108) this.RaiseXExpectedButYFound(20190221145003,"constructor Create",$mod.GetElementTypeName(DeclEl),NameExpr);
          aConstructor = DeclEl;
          Args = aConstructor.ProcType.Args;
          if ((Args.FCount > 0) && (rtl.getObject(Args.Get(0)).ValueExpr === null)) this.RaiseMsg(20190221145407,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,aConstructor.FName),Expr);
        };
        if (aConstructor.IsAbstract()) this.LogMsg(20190223193645,2,3122,rtl.getResStr($lm5,"sAttributeIgnoredBecauseAbstractX"),$lp6(18,"mrthod"),NameExpr);
        if (AttrRef.Context !== null) this.RaiseNotYetImplemented(20190221164717,NameExpr,$lp2(AttrRef.Context));
        AttrRef.Context = $lt57.$create("Create");
        AttrRef.Context.Proc = aConstructor;
        this.PopScope();
      };
    };
    this.FinishExportSymbol = function (El) {
      var $Self = this;
      function CheckConstExpr(Expr, Kinds, Expected) {
        var Value = null;
        var ResolvedEl = $lt59.$new();
        if (Expr === null) return;
        $Self.ResolveExpr(Expr,1);
        Value = $Self.Eval(Expr,rtl.createSet(0),true);
        if ((Value !== null) && (Value.Kind in Kinds)) {
          $lp12({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
          return;
        };
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        $Self.ComputeElement(Expr,ResolvedEl,rtl.createSet(3),null);
        $Self.RaiseXExpectedButYFound(20210101194628,Expected,$Self.GetTypeDescription$1(ResolvedEl,false),Expr);
      };
      var Expr = null;
      var DeclEl = null;
      var DuplicateEl = null;
      var FindData = $lt65.$new();
      var Ref = null;
      var ResolvedEl = $lt59.$new();
      var Scope = null;
      var ScopeIdent = null;
      Expr = El.NameExpr;
      if (Expr !== null) {
        this.ResolveExpr(Expr,1);
        this.ComputeElement(Expr,ResolvedEl,rtl.createSet(3),null);
        DeclEl = ResolvedEl.IdentEl;
        if (DeclEl === null) this.RaiseMsg(20210103012907,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"symbol",18,this.GetTypeDescription$1(ResolvedEl,false)),Expr);
        if (DeclEl.FParent === null) this.RaiseMsg(20220206142147,3145,rtl.getResStr($lm5,"sSymbolCannotBeExportedFromALibrary"),[],El);
        if ($lt116.isPrototypeOf(DeclEl.FParent)) {}
        else if ($lt107.isPrototypeOf(DeclEl.FParent) && $lt90.isPrototypeOf(DeclEl) && DeclEl.IsStatic()) {}
        else this.RaiseMsg(20210103012908,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"global symbol",18,$mod.GetElementTypeName(DeclEl)),Expr);
      } else {
        this.FindFirstEl(El.FName,FindData,El);
        DeclEl = FindData.Found;
        if (DeclEl === null) this.RaiseMsg(20210103002747,3001,rtl.getResStr($lm5,"sIdentifierNotFound"),$lp6(18,El.FName),El);
        if (!$lt116.isPrototypeOf(DeclEl.FParent)) this.RaiseMsg(20210103003244,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"global symbol",18,$lp8(DeclEl)),El);
        Ref = this.CreateReference(DeclEl,El,1,FindData);
        this.CheckFoundElement(FindData,Ref);
      };
      if ($lt18.isPrototypeOf(DeclEl.FParent.FData)) {
        Scope = rtl.as(DeclEl.FParent.FData,$lt18);
        ScopeIdent = Scope.FindLocalIdentifier(DeclEl.FName);
        if (ScopeIdent === null) this.RaiseNotYetImplemented(20210106103001,El,$lp8(DeclEl));
        if (ScopeIdent.NextSameIdentifier !== null) if ($lt90.isPrototypeOf(DeclEl)) {
          this.RaiseMsg(20210106103320,3013,rtl.getResStr($lm5,"sCantDetermineWhichOverloadedFunctionToCall"),[],El)}
         else {
          if (ScopeIdent.FElement === DeclEl) {
            DuplicateEl = ScopeIdent.NextSameIdentifier.FElement}
           else DuplicateEl = ScopeIdent.FElement;
          this.RaiseMsg(20220206141619,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,DuplicateEl.FName,18,this.GetElementSourcePosStr(DuplicateEl)),El);
        };
      };
      CheckConstExpr(El.ExportIndex,rtl.createSet(4,5),"integer");
      CheckConstExpr(El.ExportName,$lm5.revkAllStrings,"string");
    };
    this.FinishProcParamAccess = function (ProcType, Params) {
      var ParamAccess = 0;
      var i = 0;
      var ArrParams = [];
      var Args = null;
      ArrParams = Params.Params;
      Args = ProcType.Args;
      for (var $l = 0, $end = rtl.length(ArrParams) - 1; $l <= $end; $l++) {
        i = $l;
        ParamAccess = 1;
        if (i < Args.FCount) {
          var $tmp = rtl.getObject(Args.Get(i)).Access;
          if ($tmp === 2) {
            ParamAccess = 4}
           else if ($tmp === 3) ParamAccess = 5;
        };
        this.AccessExpr(ArrParams[i],ParamAccess);
      };
      this.CheckCallProcCompatibility(ProcType,Params,false,true);
    };
    this.FinishPropertyParamAccess = function (Params, Prop) {
      var i = 0;
      var ParamAccess = 0;
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        ParamAccess = 1;
        if (i < Prop.FArgs.FCount) {
          var $tmp = rtl.getObject(Prop.FArgs.Get(i)).Access;
          if ($tmp === 2) {
            ParamAccess = 4}
           else if ($tmp === 3) ParamAccess = 5;
        };
        this.FinishCallArgAccess(Params.Params[i],ParamAccess);
      };
    };
    this.FinishCallArgAccess = function (Expr, Access) {
      var ResolvedEl = $lt59.$new();
      var Flags = {};
      this.AccessExpr(Expr,Access);
      Flags = rtl.createSet(0);
      if (Access !== 1) Flags = rtl.includeSet(Flags,1);
      this.ComputeElement(Expr,ResolvedEl,rtl.refSet(Flags),null);
    };
    this.FinishInitialFinalization = function (El) {
      if (El === null) ;
      this.CheckTopScope(this.FScopeClass_InitialFinalization,false);
      this.PopScope();
    };
    this.EmitTypeHints = function (PosEl, aType) {
      while (aType !== null) {
        if (this.EmitElementHints(PosEl,aType)) return;
        if (aType.$class.InheritsFrom($lt157)) {
          aType = aType.DestType}
         else if (aType.$class.ClassType() === $lt97) {
          aType = aType.DestType}
         else if ((aType.$class.ClassType() === $lt94) && aType.IsForward && $lt55.isPrototypeOf(aType.FData)) {
          aType = aType.FData.FDeclaration}
         else return;
      };
    };
    this.EmitElementHints = function (PosEl, El) {
      var Result = false;
      if (this.IsElementSkipped(El)) this.RaiseNotYetImplemented(20170927160030,PosEl,$lp2(El));
      if (rtl.eqSet(El.FHints,{})) return false;
      Result = true;
      if (0 in El.FHints) {
        if (El.FHintMessage !== "") {
          this.LogMsg(20170422160807,2,5066,rtl.getResStr($lm5,"sSymbolXIsDeprecatedY"),$lp6(18,El.FName,18,El.FHintMessage),PosEl)}
         else this.LogMsg(20170419190434,2,5043,rtl.getResStr($lm5,"sSymbolXIsDeprecated"),$lp6(18,El.FName),PosEl);
      };
      if (1 in El.FHints) this.LogMsg(20170419190426,2,5065,rtl.getResStr($lm5,"sSymbolXBelongsToALibrary"),$lp6(18,El.FName),PosEl);
      if (2 in El.FHints) this.LogMsg(20170419185916,2,5076,rtl.getResStr($lm5,"sSymbolXIsNotPortable"),$lp6(18,El.FName),PosEl);
      if (3 in El.FHints) this.LogMsg(20170419190111,2,5079,rtl.getResStr($lm5,"sSymbolXIsExperimental"),$lp6(18,El.FName),PosEl);
      if (4 in El.FHints) this.LogMsg(20170419190317,2,5078,rtl.getResStr($lm5,"sSymbolXIsNotImplemented"),$lp6(18,El.FName),PosEl);
      return Result;
    };
    this.StoreScannerFlagsInProc = function (ProcScope) {
      var ModScope = null;
      if (1 in ProcScope.Flags) return;
      ProcScope.BoolSwitches = rtl.refSet(this.FCurrentParser.FScanner.FCurrentBoolSwitches);
      if (15 in ProcScope.BoolSwitches) {
        ModScope = rtl.as(this.FRootElement.FData,$lt15);
        ModScope.Flags = rtl.includeSet(ModScope.Flags,1);
      };
    };
    this.ReplaceProcScopeImplArgsWithDeclArgs = function (ImplProcScope) {
      var DeclProc = null;
      var ImplProc = null;
      var DeclArgs = null;
      var ImplArgs = null;
      var ImplTemplates = null;
      var DeclTemplates = null;
      var i = 0;
      var j = 0;
      var DeclArg = null;
      var ImplArg = null;
      var Identifier = null;
      var ImplNameParts = null;
      var ImplNamePart = null;
      var ImplTemplType = null;
      var DeclTemplType = null;
      var FuncType = null;
      ImplProc = rtl.as(ImplProcScope.FElement,$lt90);
      DeclProc = ImplProcScope.DeclarationProc;
      ImplNameParts = ImplProc.NameParts;
      if (ImplNameParts !== null) {
        for (var $l = 0, $end = ImplNameParts.FCount - 2; $l <= $end; $l++) {
          i = $l;
          ImplNamePart = rtl.getObject(ImplNameParts.Get(i));
          ImplTemplates = ImplNamePart.Templates;
          if (ImplTemplates === null) continue;
          for (var $l1 = 0, $end1 = ImplTemplates.FCount - 1; $l1 <= $end1; $l1++) {
            j = $l1;
            ImplTemplType = rtl.getObject(ImplTemplates.Get(j));
            ImplProcScope.RemoveLocalIdentifier(ImplTemplType);
          };
        };
        ImplTemplates = this.GetProcTemplateTypes(ImplProc);
        DeclTemplates = this.GetProcTemplateTypes(DeclProc);
        if (ImplTemplates !== null) {
          if ((DeclTemplates === null) || (ImplTemplates.FCount !== DeclTemplates.FCount)) this.RaiseNotYetImplemented(20190912153602,ImplProc,"");
          for (var $l2 = 0, $end2 = ImplTemplates.FCount - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            DeclTemplType = rtl.getObject(DeclTemplates.Get(i));
            ImplTemplType = rtl.getObject(ImplTemplates.Get(i));
            Identifier = ImplProcScope.FindLocalIdentifier(ImplTemplType.FName);
            if (Identifier.FElement !== ImplTemplType) this.RaiseInternalError(20190912154009,$lp2(DeclTemplType) + " " + $lp2(ImplTemplType));
            Identifier.SetElement(DeclTemplType);
            Identifier.Identifier = DeclTemplType.FName;
          };
        } else if (DeclTemplates !== null) this.RaiseNotYetImplemented(20190912153439,ImplProc,"");
      };
      ImplArgs = ImplProc.ProcType.Args;
      DeclArgs = DeclProc.ProcType.Args;
      for (var $l3 = 0, $end3 = DeclArgs.FCount - 1; $l3 <= $end3; $l3++) {
        i = $l3;
        DeclArg = rtl.getObject(DeclArgs.Get(i));
        if (i < ImplArgs.FCount) {
          ImplArg = rtl.getObject(ImplArgs.Get(i));
          Identifier = ImplProcScope.FindLocalIdentifier(DeclArg.FName);
          if (Identifier.FElement !== ImplArg) this.RaiseInternalError(20170203161659,$lp2(DeclArg) + " " + $lp2(ImplArg));
          Identifier.SetElement(DeclArg);
          Identifier.Identifier = DeclArg.FName;
        } else {
          this.AddIdentifier(ImplProcScope,DeclArg.FName,DeclArg,3);
        };
      };
      if ($lt101.isPrototypeOf(DeclProc.ProcType)) {
        FuncType = DeclProc.ProcType;
        if (FuncType.ResultEl !== null) {
          Identifier = ImplProcScope.FindLocalIdentifier($mod.ResolverResultVar);
          if (Identifier === null) {
            this.AddIdentifier(ImplProcScope,$mod.ResolverResultVar,FuncType.ResultEl,3);
          } else if ($lt141.isPrototypeOf(Identifier.FElement)) Identifier.SetElement(FuncType.ResultEl);
        };
      };
    };
    this.CreateClassIntfMap = function (El, Index) {
      var Result = null;
      var IntfType = null;
      var map = null;
      var ClassScope = null;
      ClassScope = rtl.as(El.FData,$lt34);
      if (ClassScope.Interfaces.Get(Index) != null) this.RaiseInternalError(20180322141916,$mod.GetElementDbgPath(El) + " " + $lp5(Index) + " " + $lp2(rtl.getObject(ClassScope.Interfaces.Get(Index))));
      IntfType = this.ResolveAliasType(rtl.getObject(El.Interfaces.Get(Index)),true);
      map = null;
      while (IntfType !== null) {
        if (map === null) {
          map = $lt33.$create("Create");
          map.Element = El;
          Result = map;
          ClassScope.Interfaces.Put(Index,map);
        } else {
          map.AncestorMap = $lt33.$create("Create");
          map = map.AncestorMap;
          map.Element = El;
        };
        map.Intf = IntfType;
        map.Procs = $lt85.$create("Create");
        map.Procs.SetCount(IntfType.Members.FCount);
        IntfType = rtl.as(this.GetPasClassAncestor(IntfType,true),$lt94);
      };
      return Result;
    };
    this.CheckConditionExpr = function (El, ResolvedEl) {
      if (ResolvedEl.BaseType === 15) return;
      if (this.IsGenericTemplType(ResolvedEl)) return;
      this.RaiseXExpectedButYFound(20170216152135,this.GetBaseTypeNames(15),this.GetBaseTypeNames(ResolvedEl.BaseType),El);
    };
    this.CheckProcSignatureMatch = function (DeclProc, ImplProc, IsOverride) {
      var i = 0;
      var DeclArgs = null;
      var ImplArgs = null;
      var ImplTemplates = null;
      var DeclTemplates = null;
      var DeclName = "";
      var ImplName = "";
      var ImplResult = null;
      var DeclResult = null;
      var ImplTemplType = null;
      var DeclTemplType = null;
      var NewImplPTMods = {};
      var DeclPTMods = {};
      var ImplPTMods = {};
      var ptm = 0;
      var NewImplProcMods = {};
      var pm = 0;
      if (ImplProc.$class.ClassType() !== DeclProc.$class.ClassType()) this.RaiseXExpectedButYFound(20170216151729,DeclProc.TypeName(),ImplProc.TypeName(),ImplProc);
      DeclArgs = DeclProc.ProcType.Args;
      ImplArgs = ImplProc.ProcType.Args;
      if (DeclArgs.FCount !== ImplArgs.FCount) this.RaiseNotYetImplemented(20190912110642,ImplProc,"");
      DeclPTMods = rtl.refSet(DeclProc.ProcType.Modifiers);
      ImplPTMods = rtl.refSet(ImplProc.ProcType.Modifiers);
      DeclTemplates = this.GetProcTemplateTypes(DeclProc);
      ImplTemplates = this.GetProcTemplateTypes(ImplProc);
      if (DeclTemplates !== null) {
        if (IsOverride) this.RaiseNotYetImplemented(20190912113857,ImplProc,"");
        if (ImplTemplates === null) this.RaiseMsg(20190912144529,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetProcName(ImplProc,true),18,this.GetElementSourcePosStr(DeclProc)),ImplProc);
        if (ImplTemplates.FCount !== DeclTemplates.FCount) this.RaiseMsg(20190912145320,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetProcName(ImplProc,true),18,this.GetElementSourcePosStr(rtl.getObject(DeclTemplates.Get(0)))),ImplProc);
        for (var $l = 0, $end = DeclTemplates.FCount - 1; $l <= $end; $l++) {
          i = $l;
          DeclTemplType = rtl.getObject(DeclTemplates.Get(i));
          ImplTemplType = rtl.getObject(ImplTemplates.Get(i));
          if (!$lp7(DeclTemplType.FName,ImplTemplType.FName)) this.RaiseMsg(20190912150311,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetProcName(ImplProc,true),18,this.GetElementSourcePosStr(DeclTemplType)),ImplTemplType);
          if (rtl.length(ImplTemplType.Constraints) > 0) this.RaiseMsg(20190912150739,3138,rtl.getResStr($lm5,"sImplMustNotRepeatConstraints"),[],ImplTemplType);
        };
      } else if (ImplTemplates !== null) {
        this.RaiseMsg(20190912113857,3132,rtl.getResStr($lm5,"sDeclOfXDiffersFromPrevAtY"),$lp6(18,this.GetProcName(ImplProc,true),18,this.GetElementSourcePosStr(DeclProc)),ImplProc);
      };
      if (!IsOverride) {
        for (var $l1 = 0, $end1 = DeclArgs.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          DeclName = rtl.getObject(DeclArgs.Get(i)).FName;
          ImplName = rtl.getObject(ImplArgs.Get(i)).FName;
          if ($lp4(DeclName,ImplName) !== 0) this.RaiseMsg(20170216151738,3020,rtl.getResStr($lm5,"sFunctionHeaderMismatchForwardVarName"),$lp6(18,DeclProc.FName,18,DeclName,18,ImplName),ImplProc);
        };
      };
      if ($lt101.isPrototypeOf(ImplProc.ProcType)) {
        ImplResult = ImplProc.ProcType.ResultEl.ResultType;
        DeclResult = DeclProc.ProcType.ResultEl.ResultType;
        if (this.CheckElTypeCompatibility(ImplResult,DeclResult,1) > 1) this.RaiseIncompatibleType(20170216151734,3019,[],DeclResult,ImplResult,ImplProc);
      };
      if (ImplProc.GetCallingConvention() !== DeclProc.GetCallingConvention()) this.RaiseMsg(20170216151731,3018,rtl.getResStr($lm5,"sCallingConventionMismatch"),[],ImplProc);
      if (IsOverride) {
        NewImplPTMods = rtl.symDiffSet(ImplPTMods,DeclPTMods);
        for (var $l2 in NewImplPTMods) {
          ptm = +$l2;
          this.RaiseMsg(20201227213020,3052,rtl.getResStr($lm5,"sXModifierMismatchY"),$lp6(18,"procedure type",18,$lm4.ProcTypeModifiers[ptm]),ImplProc.ProcType);
        };
      } else {
        NewImplProcMods = rtl.diffSet(rtl.diffSet(ImplProc.FModifiers,DeclProc.FModifiers),rtl.createSet(9));
        if (rtl.neSet(NewImplProcMods,{})) for (var $l3 in NewImplProcMods) {
          pm = +$l3;
          this.RaiseMsg(20200518182445,3143,rtl.getResStr($lm5,"sDirectiveXNotAllowedHere"),$lp6(18,$lm4.ModifierNames[pm]),ImplProc.ProcType);
        };
        NewImplPTMods = rtl.diffSet(ImplPTMods,DeclPTMods);
        if (rtl.neSet(NewImplPTMods,{})) for (var $l4 in NewImplPTMods) {
          ptm = +$l4;
          this.RaiseMsg(20200425154821,3143,rtl.getResStr($lm5,"sDirectiveXNotAllowedHere"),$lp6(18,$lm4.ProcTypeModifiers[ptm]),ImplProc.ProcType);
        };
      };
    };
    this.CheckPointerCycle = function (El) {
      var C = null;
      var CurEl = null;
      var Dest = null;
      CurEl = El;
      while (CurEl !== null) {
        C = CurEl.$class.ClassType();
        if (C === $lt97) {
          Dest = CurEl.DestType}
         else if (C.InheritsFrom($lt157)) {
          Dest = CurEl.DestType}
         else return;
        if (Dest === El) this.RaiseMsg(20180422165758,3106,rtl.getResStr($lm5,"sTypeCycleFound"),[],El);
        CurEl = Dest;
      };
    };
    this.CheckGenericTemplateTypes = function (El) {
      var GenTemplates = null;
      var i = 0;
      var TemplType = null;
      GenTemplates = El.GenericTemplateTypes;
      if ((GenTemplates === null) || (GenTemplates.FCount === 0)) this.RaiseNotYetImplemented(20190726184902,El,"empty generic template list");
      for (var $l = 0, $end = GenTemplates.FCount - 1; $l <= $end; $l++) {
        i = $l;
        TemplType = rtl.getObject(GenTemplates.Get(i));
        if ($lp7(TemplType.FName,El.FName)) this.RaiseMsg(20190801101444,3009,rtl.getResStr($lm5,"sDuplicateIdentifier"),$lp6(18,TemplType.FName,18,this.GetElementSourcePosStr(El)),TemplType);
      };
    };
    this.ComputeUnaryNot = function (El, ResolvedEl, Flags) {
      this.RaiseMsg(20180208121532,3085,rtl.getResStr($lm5,"sIllegalQualifierInFrontOf"),$lp6(18,$lm4.OpcodeStrings[El.OpCode],18,this.GetResolverResultDescription(ResolvedEl,false)),El);
      if (rtl.eqSet(Flags,{})) ;
    };
    this.ComputeBinaryExpr = function (Bin, ResolvedEl, Flags, StartEl) {
      var LeftResolved = $lt59.$new();
      var RightResolved = $lt59.$new();
      var Left = null;
      var SubBin = null;
      if ((Bin.OpCode === 27) || ((Bin.OpCode === 0) && $lt148.isPrototypeOf(Bin.Left))) {
        this.ComputeElement(Bin.Right,ResolvedEl,rtl.refSet(Flags),StartEl);
        return;
      };
      if (Bin.OpCode in rtl.createSet(14,15)) {
        if (this.CheckEqualElCompatibility(Bin.Left,Bin.Right,null,true,0 in Flags) === 2147483647) this.RaiseInternalError(20161007215912,"");
        $mod.SetResolverValueExpr(ResolvedEl,15,this.FBaseTypes[15],this.FBaseTypes[15],Bin,rtl.createSet(0));
        return;
      };
      Flags = rtl.diffSet(Flags,rtl.createSet(1,2));
      if (Bin.OpCode === 1) {
        Left = Bin.Left;
        while (Left.$class.ClassType() === $lt144) {
          SubBin = Left;
          if (SubBin.OpCode !== 1) break;
          Left = SubBin.Left;
        };
        this.ComputeElement(Left,LeftResolved,rtl.refSet(Flags),StartEl);
        do {
          SubBin = Left.FParent;
          this.ComputeElement(SubBin.Right,RightResolved,rtl.refSet(Flags),StartEl);
          this.ComputeBinaryExprRes(SubBin,ResolvedEl,rtl.refSet(Flags),LeftResolved,RightResolved);
          LeftResolved.$assign(ResolvedEl);
          Left = SubBin;
        } while (!(Left === Bin));
      } else {
        this.ComputeElement(Bin.Left,LeftResolved,rtl.refSet(Flags),StartEl);
        this.ComputeElement(Bin.Right,RightResolved,rtl.refSet(Flags),StartEl);
        this.ComputeBinaryExprRes(Bin,ResolvedEl,rtl.refSet(Flags),LeftResolved,RightResolved);
      };
    };
    this.ComputeBinaryExprRes = function (Bin, ResolvedEl, Flags, LeftResolved, RightResolved) {
      var $Self = this;
      function SetBaseType(BaseType) {
        $mod.SetResolverValueExpr(ResolvedEl,BaseType,$Self.FBaseTypes[BaseType],$Self.FBaseTypes[BaseType],Bin,rtl.createSet(0));
      };
      function SetLeftValueExpr(Flags) {
        $mod.SetResolverValueExpr(ResolvedEl,LeftResolved.BaseType,LeftResolved.LoTypeEl,LeftResolved.HiTypeEl,Bin,rtl.refSet(Flags));
      };
      function SetRightValueExpr(Flags) {
        $mod.SetResolverValueExpr(ResolvedEl,RightResolved.BaseType,RightResolved.LoTypeEl,RightResolved.HiTypeEl,Bin,rtl.refSet(Flags));
      };
      var ElTypeResolved = $lt59.$new();
      var LeftTypeEl = null;
      var RightTypeEl = null;
      if (LeftResolved.BaseType === 37) this.ConvertRangeToElement(LeftResolved);
      if (RightResolved.BaseType === 37) this.ConvertRangeToElement(RightResolved);
      if (this.IsGenericTemplType(LeftResolved) || this.IsGenericTemplType(RightResolved)) {
        var $tmp = Bin.OpCode;
        if (($tmp === 14) || ($tmp === 15) || ($tmp === 16) || ($tmp === 17) || ($tmp === 18) || ($tmp === 19) || ($tmp === 20) || ($tmp === 21)) {
          SetBaseType(15);
          return;
        } else if ($tmp === 22) {
          SetRightValueExpr(rtl.createSet(0));
          return;
        };
        ResolvedEl.$assign(LeftResolved);
        ResolvedEl.Flags = rtl.diffSet(ResolvedEl.Flags,rtl.createSet(1));
        return;
      };
      if (LeftResolved.BaseType in $mod.btAllInteger) {
        if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
          if (RightResolved.BaseType in rtl.unionSet($mod.btAllInteger,$mod.btAllFloats)) {
            var $tmp1 = Bin.OpCode;
            if ($tmp1 === 0) {
              if (Bin.Kind === 7) {
                if (!(RightResolved.BaseType in $mod.btAllInteger)) this.RaiseXExpectedButYFound(20170216152600,"integer",this.GetBaseTypeNames(RightResolved.BaseType),Bin.Right);
                SetLeftValueExpr(rtl.createSet(0));
                if ($lt103.isPrototypeOf(Bin.FParent)) {
                  ResolvedEl.LoTypeEl = Bin.FParent;
                  ResolvedEl.HiTypeEl = ResolvedEl.LoTypeEl;
                };
                return;
              }}
             else if (($tmp1 === 1) || ($tmp1 === 2) || ($tmp1 === 3) || ($tmp1 === 5) || ($tmp1 === 6) || ($tmp1 === 7) || ($tmp1 === 9) || ($tmp1 === 8) || ($tmp1 === 11) || ($tmp1 === 12) || ($tmp1 === 13)) {
              if (RightResolved.BaseType in $mod.btAllFloats) {
                SetRightValueExpr(rtl.createSet(0))}
               else SetLeftValueExpr(rtl.createSet(0));
              return;
            } else if (($tmp1 === 16) || ($tmp1 === 17) || ($tmp1 === 18) || ($tmp1 === 19)) {
              SetBaseType(15);
              return;
            } else if ($tmp1 === 4) {
              SetBaseType(this.FBaseTypeExtended);
              return;
            };
          } else if (RightResolved.BaseType in rtl.createSet(34,36)) {
            if ((Bin.OpCode === 20) && (RightResolved.SubType in $mod.btAllInteger)) {
              SetBaseType(15);
              return;
            };
          } else if (RightResolved.BaseType === 29) {
            if ((Bin.OpCode in rtl.createSet(1,2)) && this.ElHasBoolSwitch(Bin,28)) {
              $mod.SetResolverValueExpr(ResolvedEl,29,RightResolved.LoTypeEl,RightResolved.HiTypeEl,Bin,rtl.createSet(0));
              return;
            };
          } else if (RightResolved.BaseType === 2) {
            RightTypeEl = RightResolved.LoTypeEl;
            if (RightTypeEl.$class.ClassType() === $lt97) {
              if ((Bin.OpCode in rtl.createSet(1,2)) && this.ElHasBoolSwitch(Bin,28)) {
                RightTypeEl = RightTypeEl.DestType;
                $mod.SetResolverValueExpr(ResolvedEl,29,this.ResolveAliasType(RightTypeEl,true),RightTypeEl,Bin,rtl.createSet(0));
                return;
              };
            };
          };
        };
      } else if (LeftResolved.BaseType in $mod.btAllBooleans) {
        if ((0 in LeftResolved.Flags) && (RightResolved.BaseType in $mod.btAllBooleans) && (0 in RightResolved.Flags)) {
          var $tmp2 = Bin.OpCode;
          if ($tmp2 === 0) {
            if (Bin.Kind === 7) {
              $mod.SetResolverValueExpr(ResolvedEl,37,this.FBaseTypes[LeftResolved.BaseType],this.FBaseTypes[LeftResolved.BaseType],Bin,rtl.createSet(0));
              ResolvedEl.SubType = LeftResolved.BaseType;
              return;
            }}
           else if (($tmp2 === 11) || ($tmp2 === 12) || ($tmp2 === 13)) {
            SetLeftValueExpr(rtl.createSet(0));
            return;
          };
        };
      } else if (LeftResolved.BaseType in $mod.btAllStringAndChars) {
        if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
          if (RightResolved.BaseType in $mod.btAllStringAndChars) {
            var $tmp3 = Bin.OpCode;
            if ($tmp3 === 0) {
              if ((Bin.Kind === 7) && (LeftResolved.BaseType in $mod.btAllChars)) {
                if (!(RightResolved.BaseType in $mod.btAllChars)) this.RaiseXExpectedButYFound(20170216152603,"char",this.GetBaseTypeNames(RightResolved.BaseType),Bin.Right);
                $mod.SetResolverValueExpr(ResolvedEl,37,this.FBaseTypes[LeftResolved.BaseType],this.FBaseTypes[LeftResolved.BaseType],Bin,rtl.createSet(0));
                ResolvedEl.SubType = LeftResolved.BaseType;
                return;
              }}
             else if ($tmp3 === 1) {
              if (RightResolved.BaseType in $mod.btAllStringAndChars) if (this.ComputeAddStringRes(LeftResolved,RightResolved,Bin,ResolvedEl)) return}
             else if (($tmp3 === 16) || ($tmp3 === 17) || ($tmp3 === 18) || ($tmp3 === 19)) {
              SetBaseType(15);
              return;
            };
          } else if ((RightResolved.BaseType in rtl.createSet(34,36)) && (RightResolved.SubType in $mod.btAllChars) && (LeftResolved.BaseType in $mod.btAllChars)) {
            var $tmp4 = Bin.OpCode;
            if ($tmp4 === 20) {
              SetBaseType(15);
              return;
            };
          };
        };
      } else if (LeftResolved.BaseType in $mod.btAllFloats) {
        if ((0 in LeftResolved.Flags) && (RightResolved.BaseType in rtl.unionSet($mod.btAllInteger,$mod.btAllFloats)) && (0 in RightResolved.Flags)) {
          var $tmp5 = Bin.OpCode;
          if (($tmp5 === 1) || ($tmp5 === 2) || ($tmp5 === 3) || ($tmp5 === 4) || ($tmp5 === 6) || ($tmp5 === 7)) {
            if ((RightResolved.BaseType === 14) || ((RightResolved.BaseType in $mod.btAllFloats) && (RightResolved.BaseType > LeftResolved.BaseType))) {
              SetRightValueExpr(rtl.createSet(0))}
             else SetLeftValueExpr(rtl.createSet(0));
            return;
          } else if (($tmp5 === 16) || ($tmp5 === 17) || ($tmp5 === 18) || ($tmp5 === 19)) {
            SetBaseType(15);
            return;
          };
        };
      } else if (LeftResolved.BaseType === 29) {
        if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
          if (RightResolved.BaseType in $mod.btAllInteger) {
            var $tmp6 = Bin.OpCode;
            if (($tmp6 === 1) || ($tmp6 === 2)) if (this.ElHasBoolSwitch(Bin,28)) {
              $mod.SetResolverValueExpr(ResolvedEl,29,LeftResolved.LoTypeEl,LeftResolved.HiTypeEl,Bin,rtl.createSet(0));
              return;
            };
          } else if (RightResolved.BaseType === 29) {
            var $tmp7 = Bin.OpCode;
            if (($tmp7 === 16) || ($tmp7 === 17) || ($tmp7 === 18) || ($tmp7 === 19)) {
              SetBaseType(15);
              return;
            };
          };
        };
      } else if (LeftResolved.BaseType === 2) {
        LeftTypeEl = LeftResolved.LoTypeEl;
        var $tmp8 = Bin.OpCode;
        if ($tmp8 === 0) {
          if (Bin.Kind === 7) {
            if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
              this.CheckSetLitElCompatible(Bin.Left,Bin.Right,LeftResolved,RightResolved);
              ResolvedEl.$assign(LeftResolved);
              ResolvedEl.IdentEl = null;
              ResolvedEl.SubType = ResolvedEl.BaseType;
              ResolvedEl.BaseType = 37;
              ResolvedEl.ExprEl = Bin;
              return;
            };
          }}
         else if ($tmp8 === 20) {
          if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
            if (LeftResolved.BaseType in $mod.btArrayRangeTypes) {
              if (!(RightResolved.BaseType in rtl.createSet(34,36))) this.RaiseXExpectedButYFound(20170216152607,"set of " + this.GetBaseTypeNames(LeftResolved.BaseType),$mod.GetElementTypeName(LeftResolved.LoTypeEl),Bin.Right);
              if (LeftResolved.BaseType in $mod.btAllBooleans) {
                if (!(RightResolved.SubType in $mod.btAllBooleans)) this.RaiseXExpectedButYFound(20170216152610,"set of " + this.GetBaseTypeNames(LeftResolved.BaseType),"set of " + this.GetBaseTypeNames(RightResolved.SubType),Bin.Right);
              } else if (LeftResolved.BaseType in $mod.btAllChars) {
                if (!(RightResolved.SubType in $mod.btAllChars)) this.RaiseXExpectedButYFound(20170216152609,"set of " + this.GetBaseTypeNames(LeftResolved.BaseType),"set of " + this.GetBaseTypeNames(RightResolved.SubType),Bin.Right);
              } else if (!(RightResolved.SubType in $mod.btAllInteger)) this.RaiseXExpectedButYFound(20170216152612,"set of " + this.GetBaseTypeNames(LeftResolved.BaseType),"set of " + this.GetBaseTypeNames(RightResolved.SubType),Bin.Right);
              SetBaseType(15);
              return;
            } else if ((LeftResolved.BaseType === 2) && (LeftTypeEl.$class.ClassType() === $lt99)) {
              if (!(RightResolved.BaseType in rtl.createSet(34,36))) this.RaiseXExpectedButYFound(20170216152615,"set of " + LeftResolved.LoTypeEl.FName,$mod.GetElementTypeName(LeftResolved.LoTypeEl),Bin.Right);
              RightTypeEl = RightResolved.LoTypeEl;
              if (LeftTypeEl === RightTypeEl) {}
              else if (RightResolved.LoTypeEl.$class.ClassType() === $lt103) {
                this.ComputeElement(RightTypeEl.RangeExpr.Left,ElTypeResolved,rtl.createSet(3),null);
                if (LeftTypeEl !== ElTypeResolved.LoTypeEl) this.RaiseXExpectedButYFound(20171109215833,"set of " + LeftResolved.LoTypeEl.FName,"set of " + RightResolved.LoTypeEl.FName,Bin.Right);
              } else this.RaiseXExpectedButYFound(20170216152618,"set of " + LeftResolved.LoTypeEl.FName,"set of " + RightResolved.LoTypeEl.FName,Bin.Right);
              SetBaseType(15);
              return;
            } else this.RaiseMsg(20170216152228,3033,rtl.getResStr($lm5,"sInOperatorExpectsSetElementButGot"),$lp6(18,$mod.GetElementTypeName(LeftResolved.LoTypeEl)),Bin);
          }}
         else if ($tmp8 === 21) {
          RightTypeEl = RightResolved.LoTypeEl;
          if ($lt94.isPrototypeOf(LeftTypeEl)) {
            if (!(0 in LeftResolved.Flags)) this.RaiseIncompatibleTypeRes(20180204124637,3082,$lp6(18,$lm4.OpcodeStrings[Bin.OpCode]),LeftResolved,RightResolved,Bin);
            if ($lt95.isPrototypeOf(LeftResolved.IdentEl)) this.RaiseIncompatibleTypeRes(20180204124638,3082,$lp6(18,$lm4.OpcodeStrings[Bin.OpCode]),LeftResolved,RightResolved,Bin);
            if ($lt95.isPrototypeOf(RightResolved.IdentEl) && $lt94.isPrototypeOf(RightTypeEl)) {
              if (LeftTypeEl.ObjKind === RightTypeEl.ObjKind) {
                if (this.CheckSrcIsADstType(RightResolved,LeftResolved) !== 2147483647) {
                  SetBaseType(15);
                  return;
                } else if (this.CheckSrcIsADstType(LeftResolved,RightResolved) !== 2147483647) {
                  SetBaseType(15);
                  return;
                };
              } else if (RightTypeEl.ObjKind === 2) {
                if ((LeftTypeEl.ObjKind === 1) && !LeftTypeEl.IsExternal) {
                  SetBaseType(15);
                  return;
                };
              } else if (LeftTypeEl.ObjKind === 2) {
                if ((RightTypeEl.ObjKind === 1) && !RightTypeEl.IsExternal) {
                  SetBaseType(15);
                  return;
                };
              };
            } else if ($lt96.isPrototypeOf(RightTypeEl) && (0 in RightResolved.Flags)) {
              if (this.CheckClassesAreRelated(LeftResolved.LoTypeEl,RightTypeEl.DestType) !== 2147483647) {
                SetBaseType(15);
                return;
              };
            } else this.RaiseXExpectedButYFound(20170216152625,"class type",$mod.GetElementTypeName(RightResolved.LoTypeEl),Bin.Right);
          } else if ((3 in this.FOptions) && $lt96.isPrototypeOf(LeftTypeEl) && (0 in LeftResolved.Flags)) {
            if ((LeftResolved.IdentEl === null) || $lt95.isPrototypeOf(LeftResolved.IdentEl)) this.RaiseIncompatibleTypeRes(20180204124657,3082,$lp6(18,$lm4.OpcodeStrings[Bin.OpCode]),LeftResolved,RightResolved,Bin);
            LeftTypeEl = this.ResolveAliasType(LeftTypeEl.DestType,true);
            if ($lt95.isPrototypeOf(RightResolved.IdentEl) && $lt94.isPrototypeOf(this.ResolveAliasType(RightResolved.IdentEl,true))) {
              if (this.CheckClassIsClass(RightResolved.LoTypeEl,LeftTypeEl) !== 2147483647) {
                SetBaseType(15);
                return;
              };
            } else if ($lt96.isPrototypeOf(RightTypeEl)) {
              RightTypeEl = this.ResolveAliasType(RightTypeEl.DestType,true);
              if (this.CheckClassesAreRelated(LeftTypeEl,RightTypeEl) !== 2147483647) {
                SetBaseType(15);
                return;
              };
            } else this.RaiseXExpectedButYFound(20170322105252,"class type",$mod.GetElementTypeName(RightResolved.LoTypeEl),Bin.Right);
          } else if (LeftResolved.LoTypeEl === null) {
            this.RaiseMsg(20170216152232,3037,rtl.getResStr($lm5,"sLeftSideOfIsOperatorExpectsAClassButGot"),$lp6(18,this.GetBaseTypeNames(LeftResolved.BaseType)),Bin.Left);
          } else {
            this.RaiseMsg(20170216152234,3037,rtl.getResStr($lm5,"sLeftSideOfIsOperatorExpectsAClassButGot"),$lp6(18,$mod.GetElementTypeName(LeftResolved.LoTypeEl)),Bin.Left);
          };
        } else if ($tmp8 === 22) {
          if (LeftTypeEl.$class.ClassType() === $lt94) {
            if ($lt95.isPrototypeOf(LeftResolved.IdentEl) || !(0 in LeftResolved.Flags)) {
              this.RaiseIncompatibleTypeRes(20180204124711,3082,$lp6(18,$lm4.OpcodeStrings[Bin.OpCode]),LeftResolved,RightResolved,Bin);
            };
            if (RightResolved.IdentEl === null) this.RaiseXExpectedButYFound(20170216152630,"class",$mod.GetElementTypeName(RightResolved.LoTypeEl),Bin.Right);
            if (!$lt95.isPrototypeOf(RightResolved.IdentEl)) this.RaiseXExpectedButYFound(20170216152632,"class",RightResolved.IdentEl.FName,Bin.Right);
            if (!(RightResolved.BaseType === 2)) this.RaiseXExpectedButYFound(20180426195816,"class",RightResolved.IdentEl.FName,Bin.Right);
            RightTypeEl = RightResolved.LoTypeEl;
            if ($lt94.isPrototypeOf(RightTypeEl)) {
              if (LeftTypeEl.ObjKind === RightTypeEl.ObjKind) {
                if (this.CheckSrcIsADstType(RightResolved,LeftResolved) !== 2147483647) {
                  SetRightValueExpr(rtl.createSet(0));
                  return;
                };
              } else if (LeftTypeEl.ObjKind === 2) {
                if ((RightTypeEl.ObjKind === 1) && !RightTypeEl.IsExternal) {
                  SetRightValueExpr(rtl.createSet(0));
                  return;
                };
              } else if (RightTypeEl.ObjKind === 2) {
                if ((LeftTypeEl.ObjKind === 1) && !LeftTypeEl.IsExternal) {
                  SetRightValueExpr(rtl.createSet(0));
                  return;
                };
              };
            };
            this.RaiseIncompatibleTypeRes(20180324190713,3029,[],LeftResolved,RightResolved,Bin);
          } else if (LeftTypeEl.$class.ClassType() === $lt104) {
            if ($lt95.isPrototypeOf(LeftResolved.IdentEl) || !(0 in LeftResolved.Flags)) this.RaiseIncompatibleTypeRes(20190908191127,3082,$lp6(18,$lm4.OpcodeStrings[Bin.OpCode]),LeftResolved,RightResolved,Bin);
            if (RightResolved.IdentEl === null) this.RaiseXExpectedButYFound(20190908191202,"class",$mod.GetElementTypeName(RightResolved.LoTypeEl),Bin.Right);
            if (!$lt95.isPrototypeOf(RightResolved.IdentEl)) this.RaiseXExpectedButYFound(20190908191204,"class",RightResolved.IdentEl.FName,Bin.Right);
            if (!(RightResolved.BaseType === 2)) this.RaiseXExpectedButYFound(20190908191206,"class",RightResolved.IdentEl.FName,Bin.Right);
            RightTypeEl = RightResolved.LoTypeEl;
            if ($lt94.isPrototypeOf(RightTypeEl)) {
              SetRightValueExpr(rtl.createSet(0));
              return;
            };
            this.RaiseIncompatibleTypeRes(20190908192345,3029,[],LeftResolved,RightResolved,Bin);
          };
        } else if (($tmp8 === 16) || ($tmp8 === 17) || ($tmp8 === 18) || ($tmp8 === 19)) {
          if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
            RightTypeEl = RightResolved.LoTypeEl;
            if ((LeftTypeEl.$class.ClassType() === $lt99) && (LeftTypeEl === RightTypeEl)) {
              SetBaseType(15);
              return;
            } else if ((LeftTypeEl.$class.ClassType() === $lt97) && (RightResolved.BaseType in $mod.btAllInteger)) {
              SetBaseType(15);
              return;
            };
          }}
         else if ($tmp8 === 27) {
          ResolvedEl.$assign(RightResolved);
          return;
        } else if (($tmp8 === 1) || ($tmp8 === 2)) if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
          if (LeftTypeEl.$class.ClassType() === $lt102) {
            if (this.IsDynArray(LeftTypeEl,true) && (Bin.OpCode === 1) && this.ElHasModeSwitch(Bin,44) && ((RightResolved.BaseType in rtl.createSet(36,35)) || this.IsDynArray(RightResolved.LoTypeEl,true))) {
              this.CheckAssignCompatibilityArrayType(LeftResolved,RightResolved,Bin,true);
              SetLeftValueExpr(rtl.createSet(0));
              return;
            };
          } else if (LeftTypeEl.$class.ClassType() === $lt97) {
            if ((RightResolved.BaseType in $mod.btAllInteger) && this.ElHasBoolSwitch(Bin,28)) {
              SetLeftValueExpr(rtl.createSet(0));
              return;
            };
          };
        };
      } else if (LeftResolved.BaseType in rtl.createSet(34,36)) {
        if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags)) {
          if (RightResolved.BaseType in rtl.createSet(34,36)) {
            var $tmp9 = Bin.OpCode;
            if (($tmp9 === 1) || ($tmp9 === 2) || ($tmp9 === 3) || ($tmp9 === 23) || ($tmp9 === 18) || ($tmp9 === 19)) {
              if (RightResolved.LoTypeEl === null) {
                if (Bin.OpCode in rtl.createSet(18,19)) {
                  SetBaseType(15)}
                 else {
                  ResolvedEl.$assign(LeftResolved);
                  ResolvedEl.IdentEl = null;
                  ResolvedEl.ExprEl = Bin;
                };
                return;
              } else if (LeftResolved.LoTypeEl === null) {
                if (Bin.OpCode in rtl.createSet(18,19)) {
                  SetBaseType(15)}
                 else {
                  ResolvedEl.$assign(RightResolved);
                  ResolvedEl.IdentEl = null;
                  ResolvedEl.ExprEl = Bin;
                };
                return;
              } else if ((LeftResolved.SubType === RightResolved.SubType) || ((LeftResolved.SubType in $mod.btAllBooleans) && (RightResolved.SubType in $mod.btAllBooleans)) || ((LeftResolved.SubType in $mod.btAllInteger) && (RightResolved.SubType in $mod.btAllInteger))) {
                if (Bin.OpCode in rtl.createSet(18,19)) {
                  SetBaseType(15)}
                 else {
                  ResolvedEl.$assign(LeftResolved);
                  ResolvedEl.IdentEl = null;
                  ResolvedEl.ExprEl = Bin;
                };
                return;
              };
            };
          } else if (RightResolved.BaseType === 2) {
            RightTypeEl = RightResolved.LoTypeEl;
            if (RightTypeEl.$class.ClassType() === $lt102) {
              if (this.IsDynArray(RightTypeEl,true)) {
                this.CheckAssignCompatibilityArrayType(RightResolved,LeftResolved,Bin,true);
                SetRightValueExpr(rtl.createSet(0));
                return;
              };
            };
          };
        };
      } else if (LeftResolved.BaseType === 35) {
        if ((0 in LeftResolved.Flags) && (0 in RightResolved.Flags) && (Bin.OpCode === 1) && this.ElHasModeSwitch(Bin,44)) {
          if (RightResolved.BaseType === 35) {
            if (LeftResolved.LoTypeEl !== null) {
              ResolvedEl.$assign(LeftResolved)}
             else ResolvedEl.$assign(RightResolved);
            ResolvedEl.IdentEl = null;
            ResolvedEl.ExprEl = Bin;
            return;
          } else if ((RightResolved.BaseType === 2) && (RightResolved.LoTypeEl.$class.ClassType() === $lt102)) {
            ResolvedEl.$assign(RightResolved);
            ResolvedEl.IdentEl = null;
            ResolvedEl.ExprEl = Bin;
            return;
          };
        };
      } else if (LeftResolved.BaseType === 3) {
        if (Bin.OpCode === 27) {
          ResolvedEl.$assign(RightResolved);
          return;
        };
      };
      this.RaiseIncompatibleTypeRes(20180204114631,3082,$lp6(18,$lm4.OpcodeStrings[Bin.OpCode]),LeftResolved,RightResolved,Bin);
      if (rtl.eqSet(Flags,{})) ;
    };
    this.ComputeAddStringRes = function (LeftResolved, RightResolved, ExprEl, ResolvedEl) {
      var $Self = this;
      var Result = false;
      function SetBaseType(BaseType) {
        $mod.SetResolverValueExpr(ResolvedEl,BaseType,$Self.FBaseTypes[BaseType],$Self.FBaseTypes[BaseType],ExprEl,rtl.createSet(0));
      };
      function SetLeftValueExpr(Flags) {
        $mod.SetResolverValueExpr(ResolvedEl,LeftResolved.BaseType,LeftResolved.LoTypeEl,LeftResolved.HiTypeEl,ExprEl,rtl.refSet(Flags));
      };
      function SetRightValueExpr(Flags) {
        $mod.SetResolverValueExpr(ResolvedEl,RightResolved.BaseType,RightResolved.LoTypeEl,RightResolved.HiTypeEl,ExprEl,rtl.refSet(Flags));
      };
      Result = true;
      var $tmp = LeftResolved.BaseType;
      if ($tmp === 5) {
        var $tmp1 = RightResolved.BaseType;
        if ($tmp1 === 5) {
          SetBaseType(7)}
         else if ($tmp1 === 6) {
          if (this.FBaseTypeChar === 6) {
            SetBaseType(7)}
           else SetBaseType(9)}
         else {
          SetRightValueExpr(rtl.createSet(0));
        };
        return Result;
      } else if ($tmp === 6) {
        var $tmp2 = RightResolved.BaseType;
        if (($tmp2 === 5) || ($tmp2 === 6)) {
          if (this.FBaseTypeChar === 6) {
            SetBaseType(7)}
           else SetBaseType(9)}
         else {
          SetRightValueExpr(rtl.createSet(0));
        };
        return Result;
      } else if (($tmp === 7) || ($tmp === 9)) {
        SetLeftValueExpr(rtl.createSet(0));
        return Result;
      };
      Result = false;
      return Result;
    };
    this.ComputeArgumentAndExpr = function (Arg, ArgResolved, Expr, ExprResolved, SetReferenceFlags) {
      this.ComputeElement(Arg,ArgResolved,{},null);
      if ((ArgResolved.LoTypeEl === null) && (Arg.ArgType !== null)) this.RaiseInternalError(20160922163628,"TypeEl=nil for " + $mod.GetTreeDbg(Arg,0));
      this.ComputeArgumentExpr(ArgResolved,Arg.Access,Expr,ExprResolved,SetReferenceFlags);
    };
    this.ComputeArgumentExpr = function (ArgResolved, Access, Expr, ExprResolved, SetReferenceFlags) {
      var NeedVar = false;
      var RHSFlags = {};
      RHSFlags = {};
      NeedVar = Access in rtl.createSet(2,3);
      if (NeedVar) {
        RHSFlags = rtl.includeSet(RHSFlags,1)}
       else if (this.IsProcedureType(ArgResolved,true) || (ArgResolved.BaseType === 29) || ((ArgResolved.LoTypeEl === null) && $lt106.isPrototypeOf(ArgResolved.IdentEl))) {
        RHSFlags = rtl.includeSet(RHSFlags,2);
        if (3 in this.GetElModeSwitches(Expr)) RHSFlags = rtl.includeSet(RHSFlags,1);
      };
      if (SetReferenceFlags) RHSFlags = rtl.includeSet(RHSFlags,0);
      this.ComputeElement(Expr,ExprResolved,rtl.refSet(RHSFlags),null);
    };
    this.ComputeArrayParams = function (Params, ResolvedEl, Flags, StartEl) {
      var $Self = this;
      function ComputeIndexProperty(Prop) {
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,4),Flags),{})) $Self.RaiseConstantExprExp(20170216152635,Params);
        $Self.ComputeElement($Self.GetPasPropertyType(Prop),ResolvedEl,rtl.createSet(4),StartEl);
        ResolvedEl.IdentEl = Prop;
        ResolvedEl.Flags = {};
        if ($Self.GetPasPropertyGetter(Prop) !== null) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,0);
        if ($Self.GetPasPropertySetter(Prop) !== null) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,1);
      };
      function ComputeArrayPointer(TypeEl) {
        if (TypeEl === null) $Self.RaiseInternalError(20180423092254,"");
        $Self.ComputeElement(TypeEl,ResolvedEl,rtl.createSet(4),Params);
        ResolvedEl.IdentEl = null;
        ResolvedEl.ExprEl = Params;
        ResolvedEl.Flags = rtl.unionSet(ResolvedEl.Flags,rtl.createSet(0,1));
      };
      var TypeEl = null;
      var ElType = null;
      var ArrayEl = null;
      var ArgNo = 0;
      var OrigResolved = $lt59.$new();
      var ClassOrRecordScope = null;
      var Ref = null;
      this.ComputeElement(Params.Value,ResolvedEl,rtl.diffSet(Flags,rtl.createSet(1,2)),StartEl);
      if (ResolvedEl.BaseType in $mod.btAllStrings) {
        var $tmp = this.GetActualBaseType(ResolvedEl.BaseType);
        if (($tmp === 8) || ($tmp === 9)) {
          if (this.FBaseTypeChar === 6) {
            ResolvedEl.BaseType = 5}
           else ResolvedEl.BaseType = 6}
         else {
          this.RaiseNotYetImplemented(20170417202354,Params,"");
        };
        ResolvedEl.LoTypeEl = this.FBaseTypes[ResolvedEl.BaseType];
        ResolvedEl.HiTypeEl = ResolvedEl.LoTypeEl;
        ResolvedEl.ExprEl = Params;
        ResolvedEl.Flags = rtl.unionSet(rtl.diffSet(ResolvedEl.Flags,rtl.createSet(1,3)),rtl.createSet(2));
      } else if (ResolvedEl.BaseType === 29) {
        ComputeArrayPointer(ResolvedEl.LoTypeEl)}
       else if ($lt88.isPrototypeOf(ResolvedEl.IdentEl) && (this.GetPasPropertyArgs(ResolvedEl.IdentEl).FCount > 0)) {
        ComputeIndexProperty(ResolvedEl.IdentEl)}
       else if (ResolvedEl.BaseType === 2) {
        TypeEl = ResolvedEl.LoTypeEl;
        if ((TypeEl.$class.ClassType() === $lt94) || (TypeEl.$class.ClassType() === $lt98) || (TypeEl.$class.ClassType() === $lt96)) {
          if (!$lt55.isPrototypeOf(Params.FData)) this.RaiseNotYetImplemented(20190125143203,Params,$lp2(Params.FData));
          Ref = Params.FData;
          if ($lt88.isPrototypeOf(Ref.FDeclaration)) {
            ComputeIndexProperty(Ref.FDeclaration)}
           else if ($lt107.isPrototypeOf(TypeEl)) {
            ClassOrRecordScope = rtl.as($mod.NoNil(TypeEl.FData),$lt30);
            this.ComputeArrayParams_Class(Params,ResolvedEl,ClassOrRecordScope,rtl.refSet(Flags),StartEl);
          } else this.RaiseNotYetImplemented(20161010174916,Params,"");
        } else if (TypeEl.$class.ClassType() === $lt102) {
          if (!(0 in ResolvedEl.Flags)) this.RaiseMsg(20170517001140,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,"[",18,TypeEl.ElementTypeName()),Params);
          ArrayEl = TypeEl;
          ArgNo = 0;
          do {
            if (rtl.length(ArrayEl.Ranges) === 0) {
              ArgNo += 1;
              if (this.IsDynArray(ArrayEl,true)) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,1);
            } else ArgNo += rtl.length(ArrayEl.Ranges);
            if (ArgNo > rtl.length(Params.Params)) this.RaiseInternalError(20161010185535,"");
            if (ArgNo === rtl.length(Params.Params)) break;
            ArrayEl = rtl.as($mod.NoNil(this.ResolveAliasType(ArrayEl.ElType,true)),$lt102);
          } while (!false);
          OrigResolved.$assign(ResolvedEl);
          ElType = this.GetArrayElType(ArrayEl);
          this.ComputeElement(ElType,ResolvedEl,rtl.refSet(Flags),StartEl);
          ResolvedEl.IdentEl = OrigResolved.IdentEl;
          ResolvedEl.ExprEl = OrigResolved.ExprEl;
          ResolvedEl.Flags = rtl.intersectSet(OrigResolved.Flags,rtl.createSet(0,1));
          if (this.IsDynArray(ArrayEl,true)) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,1);
        } else if (TypeEl.$class.ClassType() === $lt97) {
          ComputeArrayPointer(TypeEl.DestType)}
         else this.RaiseNotYetImplemented(20161010151727,Params,$mod.GetResolverResultDbg(ResolvedEl));
      } else this.RaiseNotYetImplemented(20160928174212,Params,$mod.GetResolverResultDbg(ResolvedEl));
    };
    this.ComputeArrayParams_Class = function (Params, ResolvedEl, ClassOrRecScope, Flags, StartEl) {
      this.RaiseNotYetImplemented(20190125142240,Params,"");
      if (Params === null) ;
      if (ClassOrRecScope === null) ;
      if (rtl.eqSet(Flags,{})) ;
      if (StartEl === null) ;
      $mod.SetResolverIdentifier(ResolvedEl,0,null,null,null,{});
    };
    this.ComputeFuncParams = function (Params, ResolvedEl, Flags, StartEl) {
      var DeclEl = null;
      var BuiltInProc = null;
      var Proc = null;
      var ParamResolved = $lt59.$new();
      var Ref = null;
      var DeclType = null;
      var Param0 = null;
      Ref = this.GetParamsValueRef(Params);
      if (Ref === null) this.RaiseNotYetImplemented(20160928174124,Params,"");
      DeclEl = Ref.FDeclaration;
      if (DeclEl.$class.ClassType() === $lt83) {
        if (DeclEl.FData.$class.ClassType() === $lt64) {
          BuiltInProc = DeclEl.FData;
          if (BuiltInProc.GetCallResult != null) {
            BuiltInProc.GetCallResult(BuiltInProc,Params,ResolvedEl)}
           else $mod.SetResolverIdentifier(ResolvedEl,31,BuiltInProc.Proc,BuiltInProc.Proc,BuiltInProc.Proc,{});
          if (0 in BuiltInProc.Flags) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
        } else if ($lt62.isPrototypeOf(DeclEl.FData)) {
          DeclType = DeclEl;
          if (rtl.length(Params.Params) !== 1) {
            this.RaiseMsg(20180503105409,3034,rtl.getResStr($lm5,"sWrongNumberOfParametersForTypeCast"),$lp6(18,DeclType.FName),Params);
          };
          Param0 = Params.Params[0];
          this.ComputeElement(Param0,ParamResolved,{},null);
          this.ComputeTypeCast(DeclType,DeclType,Param0,ParamResolved,ResolvedEl,rtl.refSet(Flags));
        } else this.RaiseNotYetImplemented(20161006133040,Params,$mod.GetResolverResultDbg(ResolvedEl));
      } else {
        this.ComputeElement(DeclEl,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(1)),StartEl);
        if (ResolvedEl.BaseType === 31) {
          if (!$lt90.isPrototypeOf(ResolvedEl.IdentEl)) this.RaiseNotYetImplemented(20160928180201,Params,$mod.GetResolverResultDbg(ResolvedEl));
          Proc = ResolvedEl.IdentEl;
          if (3 in Flags) this.RaiseConstantExprExp(20170216152637,Params);
          if ($lt101.isPrototypeOf(Proc.ProcType)) {
            this.ComputeResultElement(Proc.ProcType.ResultEl,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(5)),StartEl)}
           else if (Proc.IsAsync() && this.ComputeProcAsyncResult(Proc,ResolvedEl,rtl.refSet(Flags),StartEl)) {}
          else if (Proc.$class.ClassType() === $lt108) {
            ResolvedEl.$assign(this.GetReference_ConstructorType(Ref,Params.Value));
          } else $mod.SetResolverIdentifier(ResolvedEl,31,Proc,Proc.ProcType,Proc.ProcType,{});
          ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
        } else if ($lt100.isPrototypeOf(ResolvedEl.LoTypeEl)) {
          if ($lt145.isPrototypeOf(Params.Value)) {
            ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,0);
          };
          if (0 in ResolvedEl.Flags) {
            if (3 in Flags) this.RaiseConstantExprExp(20170216152639,Params);
            if ($lt101.isPrototypeOf(ResolvedEl.LoTypeEl)) {
              this.ComputeResultElement(ResolvedEl.LoTypeEl.ResultEl,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(5)),StartEl)}
             else if ($lt100.isPrototypeOf(ResolvedEl.LoTypeEl) && ResolvedEl.LoTypeEl.GetIsAsync() && this.ComputeProcAsyncResult(ResolvedEl.LoTypeEl,ResolvedEl,rtl.refSet(Flags),StartEl)) {}
            else $mod.SetResolverTypeExpr(ResolvedEl,31,ResolvedEl.LoTypeEl,ResolvedEl.HiTypeEl,{});
            ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
          } else {
            if (rtl.length(Params.Params) !== 1) {
              this.RaiseMsg(20170416185211,3034,rtl.getResStr($lm5,"sWrongNumberOfParametersForTypeCast"),$lp6(18,ResolvedEl.LoTypeEl.FName),Params);
            };
            Param0 = Params.Params[0];
            this.ComputeElement(Param0,ParamResolved,{},null);
            this.ComputeTypeCast(ResolvedEl.LoTypeEl,ResolvedEl.HiTypeEl,Param0,ParamResolved,ResolvedEl,rtl.refSet(Flags));
          };
        } else if ($lt95.isPrototypeOf(DeclEl)) {
          Param0 = Params.Params[0];
          this.ComputeElement(Param0,ParamResolved,rtl.refSet(Flags),null);
          this.ComputeTypeCast(ResolvedEl.LoTypeEl,ResolvedEl.HiTypeEl,Param0,ParamResolved,ResolvedEl,rtl.refSet(Flags));
        } else this.RaiseNotYetImplemented(20160928180048,Params,$mod.GetResolverResultDbg(ResolvedEl));
      };
    };
    this.ComputeTypeCast = function (ToLoType, ToHiType, Param, ParamResolved, ResolvedEl, Flags) {
      var $Self = this;
      function ParamIsVar() {
        var Result = false;
        var IdentEl = null;
        IdentEl = ParamResolved.IdentEl;
        if (IdentEl === null) return false;
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,4),Flags),{})) {
          Result = (IdentEl.$class.ClassType() === $lt117) && IdentEl.IsConst}
         else Result = $lt105.isPrototypeOf(IdentEl) || (IdentEl.$class.ClassType() === $lt106) || (IdentEl.$class.ClassType() === $lt141);
        return Result;
      };
      var WriteFlags = {};
      var KeepWriteFlags = false;
      var bt = 0;
      var Expr = null;
      if ($lt62.isPrototypeOf(ToLoType.FData)) {
        bt = this.GetActualBaseType(ToLoType.FData.BaseType);
        $mod.SetResolverValueExpr(ResolvedEl,ToLoType.FData.BaseType,ToLoType,ToHiType,Param,rtl.createSet(0));
        ResolvedEl.IdentEl = ParamResolved.IdentEl;
        WriteFlags = rtl.intersectSet(ParamResolved.Flags,rtl.createSet(1,2));
        if (rtl.neSet(WriteFlags,{}) && ParamIsVar()) {
          KeepWriteFlags = false;
          if (bt === 29) {
            if ((ParamResolved.BaseType === 29) || (ParamResolved.BaseType in rtl.createSet(7,9,8)) || (ParamResolved.LoTypeEl === null) || (ParamResolved.LoTypeEl.$class.ClassType() === $lt94) || this.IsDynArray(ParamResolved.LoTypeEl,true)) KeepWriteFlags = true;
          } else if (this.IsSameType(ToLoType,ParamResolved.LoTypeEl,0)) KeepWriteFlags = true;
          if (KeepWriteFlags) ResolvedEl.Flags = rtl.unionSet(ResolvedEl.Flags,WriteFlags);
        };
      } else if ($lt100.isPrototypeOf(ToLoType)) {
        if (ParamIsVar()) {
          WriteFlags = rtl.intersectSet(ParamResolved.Flags,rtl.createSet(1,2))}
         else WriteFlags = {};
        $mod.SetResolverValueExpr(ResolvedEl,2,ToLoType,ToHiType,Param,rtl.unionSet(rtl.createSet(0),WriteFlags));
        ResolvedEl.IdentEl = ParamResolved.IdentEl;
      } else {
        if ($lt145.isPrototypeOf(Param.FParent)) {
          Expr = Param.FParent}
         else Expr = Param;
        this.ComputeElement(ToHiType,ResolvedEl,rtl.refSet(Flags),Expr);
        ResolvedEl.ExprEl = Expr;
        ResolvedEl.IdentEl = ParamResolved.IdentEl;
        ResolvedEl.Flags = rtl.createSet(0);
        WriteFlags = rtl.intersectSet(ParamResolved.Flags,rtl.createSet(1,2));
        if (rtl.neSet(WriteFlags,{}) && ParamIsVar()) {
          KeepWriteFlags = false;
          if (0 in ResolvedEl.Flags) {
            if (ParamResolved.BaseType === 29) {
              if ((ToLoType.$class.ClassType() === $lt94) || this.IsDynArray(ParamResolved.LoTypeEl,true)) KeepWriteFlags = true;
            } else if (ParamResolved.LoTypeEl === null) {
              KeepWriteFlags = true}
             else if (ToLoType === ParamResolved.LoTypeEl) {
              KeepWriteFlags = true}
             else if ((ToLoType.$class.ClassType() === $lt94) && (ParamResolved.LoTypeEl.$class.ClassType() === $lt94)) {
              if (ToLoType.ObjKind !== ParamResolved.LoTypeEl.ObjKind) {}
              else KeepWriteFlags = true;
            } else if ((ToLoType.$class.ClassType() === $lt98) && (ParamResolved.LoTypeEl.$class.ClassType() === $lt98)) {
              KeepWriteFlags = true}
             else if ((ToLoType.$class.ClassType() === $lt102) && (ParamResolved.LoTypeEl.$class.ClassType() === $lt102) && this.IsDynArray(ToLoType,true) && this.IsDynArray(ParamResolved.LoTypeEl,true)) KeepWriteFlags = true;
          };
          if (KeepWriteFlags) ResolvedEl.Flags = rtl.unionSet(ResolvedEl.Flags,WriteFlags);
        };
      };
    };
    this.ComputeSetParams = function (Params, ResolvedEl, Flags, StartEl) {
      var ParamResolved = $lt59.$new();
      var FirstResolved = $lt59.$new();
      var i = 0;
      var Param = null;
      var IsRange = false;
      var IsArray = false;
      var ArrayType = null;
      ArrayType = this.IsArrayExpr(Params);
      IsArray = ArrayType !== null;
      if (rtl.length(Params.Params) === 0) {
        $mod.SetResolverValueExpr(ResolvedEl,36,null,null,Params,rtl.createSet(0));
        if (IsArray) ResolvedEl.BaseType = 35;
        return;
      };
      FirstResolved.$assign($lt59.$new());
      Flags = rtl.unionSet(rtl.diffSet(Flags,rtl.createSet(1)),rtl.createSet(2));
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = Params.Params[i];
        this.ComputeElement(Params.Params[0],ParamResolved,rtl.refSet(Flags),StartEl);
        IsRange = ParamResolved.BaseType === 37;
        if (IsRange) {
          if (IsArray) this.RaiseXExpectedButYFound(20180615111713,"array value","range expression",Param);
          this.ConvertRangeToElement(ParamResolved);
        };
        if (FirstResolved.BaseType === 0) {
          FirstResolved.$assign(ParamResolved);
          if (IsRange) this.CheckIsOrdinal(FirstResolved,Param,true);
          if (0 in FirstResolved.Flags) {
            if (!IsArray && !IsRange && !this.CheckIsOrdinal(FirstResolved,Param,false)) {
              IsArray = true;
            };
          } else {
            IsArray = true;
            if (FirstResolved.BaseType === 2) {
              if ($lt94.isPrototypeOf(FirstResolved.IdentEl)) {}
              else {
                this.RaiseXExpectedButYFound(20170420002328,"array value","type",Param);
              };
            } else {
              this.RaiseXExpectedButYFound(20170420002332,"array value","type",Param);
            };
          };
        } else {
          this.CombineArrayLitElTypes(Params.Params[0],Param,FirstResolved,ParamResolved);
        };
      };
      FirstResolved.IdentEl = null;
      FirstResolved.ExprEl = Params;
      FirstResolved.SubType = FirstResolved.BaseType;
      if (IsArray) {
        FirstResolved.BaseType = 35}
       else FirstResolved.BaseType = 36;
      FirstResolved.Flags = rtl.createSet(0);
      ResolvedEl.$assign(FirstResolved);
    };
    this.ComputeDereference = function (El, ResolvedEl) {
      var $Self = this;
      function Deref(TypeEl) {
        var Expr = null;
        Expr = ResolvedEl.ExprEl;
        if (Expr === null) Expr = El;
        $Self.ComputeElement(TypeEl,ResolvedEl,rtl.createSet(1),El);
        ResolvedEl.IdentEl = null;
        ResolvedEl.ExprEl = Expr;
        ResolvedEl.Flags = rtl.unionSet(ResolvedEl.Flags,rtl.createSet(0,1));
      };
      var TypeEl = null;
      if (ResolvedEl.BaseType === 29) {
        Deref(ResolvedEl.LoTypeEl);
        return;
      } else if (ResolvedEl.BaseType === 2) {
        TypeEl = ResolvedEl.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt97) {
          Deref(TypeEl.DestType);
          return;
        };
      };
      this.RaiseMsg(20180422191139,3085,rtl.getResStr($lm5,"sIllegalQualifierInFrontOf"),$lp6(18,$lm4.OpcodeStrings[25],18,this.GetResolverResultDescription(ResolvedEl,false)),El);
    };
    this.ComputeArrayValuesExpectedType = function (El, ResolvedEl, Flags, StartEl) {
      var Parent = null;
      var HiTypeEl = null;
      var LoTypeEl = null;
      var Field = null;
      var Ref = null;
      var Member = null;
      var i = 0;
      var ArrType = null;
      Parent = El.FParent;
      if ($lt105.isPrototypeOf(Parent)) {
        HiTypeEl = Parent.VarType;
        if (HiTypeEl === null) this.RaiseMsg(20180429171628,3004,rtl.getResStr($lm5,"sSyntaxErrorExpectedButFound"),$lp6(18,"const",18,"array values"),El);
        LoTypeEl = this.ResolveAliasType(HiTypeEl,true);
        if (LoTypeEl.$class.ClassType() === $lt102) {}
        else this.RaiseIncompatibleTypeDesc(20180429171714,3028,[],"array value",this.GetTypeDescription(HiTypeEl,false),El);
        $mod.SetResolverValueExpr(ResolvedEl,2,LoTypeEl,HiTypeEl,El,rtl.createSet(0));
      } else if (Parent.$class.ClassType() === $lt150) {
        i = rtl.length(Parent.Fields) - 1;
        while ((i >= 0) && (Parent.Fields[i].ValueExp !== El)) i -= 1;
        if (i < 0) this.RaiseInternalError(20180429181150,"");
        Field = Parent.Fields[i];
        Ref = rtl.as(Field.NameExp.FData,$lt55);
        Member = rtl.as(Ref.FDeclaration,$lt105);
        if (Member === null) this.RaiseInternalError(20180429181210,"");
        this.ComputeElement(Member,ResolvedEl,{},StartEl);
        ResolvedEl.Flags = rtl.createSet(0);
      } else if (Parent.$class.ClassType() === $lt149) {
        this.ComputeArrayValuesExpectedType(Parent,ResolvedEl,rtl.refSet(Flags),StartEl);
        if ((ResolvedEl.BaseType === 2) && (ResolvedEl.LoTypeEl.$class.ClassType() === $lt102)) {
          ArrType = ResolvedEl.LoTypeEl;
          if (rtl.length(ArrType.Ranges) > 1) this.RaiseNotYetImplemented(20180429180930,El,"");
          HiTypeEl = ArrType.ElType;
          LoTypeEl = this.ResolveAliasType(HiTypeEl,true);
          if (LoTypeEl.$class.ClassType() !== $lt102) this.RaiseIncompatibleTypeDesc(20180429180938,3028,[],"array values",this.GetTypeDescription(HiTypeEl,false),El);
          $mod.SetResolverValueExpr(ResolvedEl,2,LoTypeEl,HiTypeEl,El,rtl.createSet(0));
        } else this.RaiseIncompatibleTypeDesc(20180429173143,3028,[],"array values",this.GetTypeDescription$1(ResolvedEl,false),El);
      } else $mod.SetResolverValueExpr(ResolvedEl,35,null,null,El,rtl.createSet(0));
    };
    this.ComputeRecordValues = function (El, ResolvedEl, Flags, StartEl) {
      var Parent = null;
      var Member = null;
      var LoTypeEl = null;
      var HiTypeEl = null;
      var i = 0;
      var Field = null;
      var Ref = null;
      var ArrType = null;
      Parent = El.FParent;
      if ($lt105.isPrototypeOf(Parent)) {
        HiTypeEl = Parent.VarType;
        if (HiTypeEl === null) this.RaiseMsg(20180429105451,3004,rtl.getResStr($lm5,"sSyntaxErrorExpectedButFound"),$lp6(18,"const",18,"record values"),El);
        LoTypeEl = this.ResolveAliasType(HiTypeEl,true);
        if (LoTypeEl.$class.ClassType() !== $lt98) this.RaiseIncompatibleTypeDesc(20180429104135,3028,[],"record value",this.GetTypeDescription(HiTypeEl,false),El);
        $mod.SetResolverValueExpr(ResolvedEl,2,LoTypeEl,HiTypeEl,El,rtl.createSet(0));
      } else if (Parent.$class.ClassType() === $lt150) {
        i = rtl.length(Parent.Fields) - 1;
        while ((i >= 0) && (Parent.Fields[i].ValueExp !== El)) i -= 1;
        if (i < 0) this.RaiseInternalError(20180429130244,"");
        Field = Parent.Fields[i];
        Ref = rtl.as(Field.NameExp.FData,$lt55);
        Member = rtl.as(Ref.FDeclaration,$lt105);
        if (Member === null) this.RaiseInternalError(20180429130548,"");
        this.ComputeElement(Member,ResolvedEl,{},StartEl);
        ResolvedEl.Flags = rtl.createSet(0);
      } else if (Parent.$class.ClassType() === $lt149) {
        this.ComputeArrayValuesExpectedType(Parent,ResolvedEl,rtl.refSet(Flags),StartEl);
        if ((ResolvedEl.BaseType === 2) && (ResolvedEl.LoTypeEl.$class.ClassType() === $lt102)) {
          ArrType = ResolvedEl.LoTypeEl;
          if (rtl.length(ArrType.Ranges) > 1) this.RaiseNotYetImplemented(20180429180450,El,"");
          HiTypeEl = ArrType.ElType;
          LoTypeEl = this.ResolveAliasType(HiTypeEl,true);
          if (LoTypeEl.$class.ClassType() !== $lt98) this.RaiseIncompatibleTypeDesc(20180429180642,3028,[],"record values",this.GetTypeDescription(HiTypeEl,false),El);
          $mod.SetResolverValueExpr(ResolvedEl,2,LoTypeEl,HiTypeEl,El,rtl.createSet(0));
        } else this.RaiseIncompatibleTypeDesc(20180429173143,3028,[],"array values",this.GetTypeDescription$1(ResolvedEl,false),El);
      } else this.RaiseMsg(20180429110227,3004,rtl.getResStr($lm5,"sSyntaxErrorExpectedButFound"),$lp6(18,"const",18,"(name:"),El);
    };
    this.CheckIsClass = function (El, ResolvedEl) {
      var TypeEl = null;
      if (ResolvedEl.BaseType !== 2) this.RaiseXExpectedButYFound(20170216152245,"class",this.GetBaseTypeNames(ResolvedEl.BaseType),El);
      TypeEl = ResolvedEl.LoTypeEl;
      if ((TypeEl.$class.ClassType() !== $lt94) || (TypeEl.ObjKind !== 1)) this.RaiseXExpectedButYFound(20170216152246,"class",$mod.GetElementTypeName(ResolvedEl.LoTypeEl),El);
    };
    this.CheckTypeCastClassInstanceToClass = function (FromClassRes, ToClassRes, ErrorEl) {
      var Result = 0;
      if (FromClassRes.BaseType === 0) ;
      if (ToClassRes.BaseType === 0) ;
      if (ErrorEl === null) ;
      Result = 2147483647;
      return Result;
    };
    this.CheckSetLitElCompatible = function (Left, Right, LHS, RHS) {
      var LBT = 0;
      var RBT = 0;
      if (!(0 in LHS.Flags)) {
        if (LHS.LoTypeEl !== null) {
          this.RaiseXExpectedButYFound(20170216152645,"ordinal",$mod.GetElementTypeName(LHS.LoTypeEl),Left)}
         else this.RaiseXExpectedButYFound(20170216152648,"ordinal",this.GetBaseTypeNames(LHS.BaseType),Left);
      };
      if (!(0 in RHS.Flags)) {
        if (RHS.LoTypeEl !== null) {
          this.RaiseXExpectedButYFound(20170216152651,"ordinal",$mod.GetElementTypeName(RHS.LoTypeEl),Right)}
         else this.RaiseXExpectedButYFound(20170216152653,"ordinal",this.GetBaseTypeNames(RHS.BaseType),Right);
      };
      LBT = this.GetActualBaseType(LHS.BaseType);
      RBT = this.GetActualBaseType(RHS.BaseType);
      if (LBT in $mod.btAllBooleans) {
        if (RBT in $mod.btAllBooleans) return;
        this.RaiseXExpectedButYFound(20170216152656,"boolean",this.GetBaseTypeNames(RHS.BaseType),Right);
      } else if (LBT in $mod.btAllInteger) {
        if (RBT in $mod.btAllInteger) return;
        this.RaiseXExpectedButYFound(20170216152658,"integer",this.GetBaseTypeNames(RHS.BaseType),Right);
      } else if (LBT in $mod.btAllChars) {
        if (RBT in $mod.btAllChars) return;
        this.RaiseXExpectedButYFound(20170216152702,"char",this.GetBaseTypeNames(RHS.BaseType),Right);
      } else if (LBT === 2) {
        if (LHS.LoTypeEl.$class.ClassType() === $lt99) {
          if (LHS.LoTypeEl === RHS.LoTypeEl) return;
          if (RHS.LoTypeEl.$class.ClassType() !== $lt99) this.RaiseXExpectedButYFound(20170216152707,LHS.LoTypeEl.FParent.FName,$mod.GetElementTypeName(RHS.LoTypeEl),Right);
          if (LHS.LoTypeEl.FParent !== RHS.LoTypeEl.FParent) this.RaiseXExpectedButYFound(20170216152710,LHS.LoTypeEl.FParent.FName,RHS.LoTypeEl.FParent.FName,Right);
        } else this.RaiseXExpectedButYFound(20170216152712,"ordinal",this.GetBaseTypeNames(LHS.BaseType),Left);
      } else this.RaiseXExpectedButYFound(20170216152714,"ordinal",this.GetBaseTypeNames(LHS.BaseType),Left);
    };
    this.CheckIsOrdinal = function (ResolvedEl, ErrorEl, RaiseOnError) {
      var Result = false;
      Result = false;
      if (ResolvedEl.BaseType in $mod.btAllRanges) {}
      else if (ResolvedEl.BaseType === 2) {
        if (ResolvedEl.LoTypeEl.$class.ClassType() === $lt99) {}
        else if (RaiseOnError) {
          this.RaiseXExpectedButYFound(20170216152718,"ordinal value",$mod.GetElementTypeName(ResolvedEl.LoTypeEl),ErrorEl)}
         else return Result;
      } else if (RaiseOnError) {
        this.RaiseXExpectedButYFound(20170216152720,"ordinal value",this.GetBaseTypeNames(ResolvedEl.BaseType),ErrorEl)}
       else return Result;
      Result = true;
      return Result;
    };
    this.CombineArrayLitElTypes = function (Left, Right, LHS, RHS) {
      var LBT = 0;
      var RBT = 0;
      var C = null;
      if ((LHS.LoTypeEl === RHS.LoTypeEl) && (LHS.BaseType === RHS.BaseType)) return;
      LBT = this.GetActualBaseType(LHS.BaseType);
      RBT = this.GetActualBaseType(RHS.BaseType);
      if (0 in LHS.Flags) {
        if (!(0 in RHS.Flags)) this.RaiseIncompatibleTypeRes(20170420004759,3028,[],RHS,LHS,Right);
        if (LBT in $mod.btAllBooleans) {
          if (RBT in $mod.btAllBooleans) {
            LHS.BaseType = this.GetCombinedBoolean(LBT,RBT,Right);
            return;
          };
          this.RaiseXExpectedButYFound(20170420093015,"boolean",this.GetBaseTypeNames(RHS.BaseType),Right);
        } else if (LBT in $mod.btAllInteger) {
          if (RBT in $mod.btAllInteger) {
            LHS.BaseType = this.GetCombinedInt(LHS,RHS,Right);
            return;
          };
          this.RaiseXExpectedButYFound(20170420093019,"integer",this.GetBaseTypeNames(RHS.BaseType),Right);
        } else if (LBT in $mod.btAllChars) {
          if (RBT in $mod.btAllChars) {
            LHS.BaseType = this.GetCombinedChar(LHS,RHS,Right);
            return;
          };
          this.RaiseXExpectedButYFound(20170420093024,"char",this.GetBaseTypeNames(RHS.BaseType),Right);
        } else if (LBT in $mod.btAllStrings) {
          if (RBT in $mod.btAllStringAndChars) {
            LHS.BaseType = this.GetCombinedString(LHS,RHS,Right);
            return;
          };
          this.RaiseXExpectedButYFound(20170420102832,"string",this.GetBaseTypeNames(RHS.BaseType),Right);
        } else if (LBT === 30) {
          if (RBT === 30) {
            return}
           else if (RBT === 29) {
            LHS.$assign(RHS);
            return;
          } else if (RBT === 2) {
            C = RHS.LoTypeEl.$class.ClassType();
            if ((C === $lt94) || (C === $lt96) || (C === $lt97) || ((C === $lt102) && this.IsDynArray(RHS.LoTypeEl,true)) || (C === $lt100) || (C === $lt101)) {
              LHS.$assign(RHS);
              return;
            };
          };
        } else if (LBT === 2) {
          C = LHS.LoTypeEl.$class.ClassType();
          if (C === $lt99) {
            if (LHS.LoTypeEl === RHS.LoTypeEl) return;
          } else if (C === $lt94) {
            if (RHS.LoTypeEl.$class.ClassType() !== $lt94) this.RaiseIncompatibleTypeRes(20170420135637,3028,[],RHS,LHS,Right);
            if (this.CheckClassIsClass(LHS.LoTypeEl,RHS.LoTypeEl) < 2147483647) {
              return;
            } else if (this.CheckClassIsClass(RHS.LoTypeEl,LHS.LoTypeEl) < 2147483647) {
              LHS.$assign(RHS);
              return;
            };
          };
        };
      } else {
        if (0 in RHS.Flags) this.RaiseIncompatibleTypeRes(20170420004925,3028,[],RHS,LHS,Right);
        if (LBT === 2) {
          if (LHS.LoTypeEl.$class.ClassType() === $lt94) {
            if (RHS.LoTypeEl.$class.ClassType() !== $lt94) this.RaiseIncompatibleTypeRes(20170420091839,3028,[],RHS,LHS,Right);
            if (this.CheckClassIsClass(LHS.LoTypeEl,RHS.LoTypeEl) < 2147483647) {
              return;
            } else if (this.CheckClassIsClass(RHS.LoTypeEl,LHS.LoTypeEl) < 2147483647) {
              LHS.$assign(RHS);
              return;
            };
          };
        };
      };
      if (LHS.LoTypeEl === null) this.RaiseXExpectedButYFound(20170420004537,"array element",this.GetBaseTypeNames(LHS.BaseType),Left);
      if (RHS.LoTypeEl === null) this.RaiseXExpectedButYFound(20170420004602,"array element",this.GetBaseTypeNames(RHS.BaseType),Right);
      this.RaiseIncompatibleTypeRes(20170420092625,3028,[],RHS,LHS,Right);
    };
    this.ConvertRangeToElement = function (ResolvedEl) {
      var TypeEl = null;
      if (ResolvedEl.BaseType !== 37) this.RaiseInternalError(20161001155732,"");
      if (ResolvedEl.LoTypeEl === null) if (ResolvedEl.IdentEl !== null) {
        this.RaiseNotYetImplemented(20161001155747,ResolvedEl.IdentEl,"")}
       else this.RaiseNotYetImplemented(20161001155834,ResolvedEl.ExprEl,"");
      TypeEl = ResolvedEl.LoTypeEl;
      if ($lt103.isPrototypeOf(TypeEl)) {
        this.ComputeElement(TypeEl.RangeExpr.Left,ResolvedEl,rtl.createSet(3),null)}
       else {
        ResolvedEl.BaseType = ResolvedEl.SubType;
        ResolvedEl.SubType = 0;
      };
    };
    this.IsCharLiteral = function (Value, ErrorPos) {
      var Result = 0;
      var i = 0;
      var p = 0;
      var base = 0;
      var l = 0;
      Result = 0;
      l = Value.length;
      if (l === 0) return Result;
      p = 1;
      var $tmp = Value.charAt(0);
      if ($tmp === "'") {
        p += 1;
        if (p > l) return Result;
        var $tmp1 = Value.charAt(p - 1);
        if ($tmp1 === "'") {
          if (((p + 2) === l) && (Value.charAt((p + 1) - 1) === "'") && (Value.charAt((p + 2) - 1) === "'")) Result = 6}
         else if (($tmp1 >= "\uDC00") && ($tmp1 <= "\uDFFF")) {}
        else {
          if ((l === 3) && (Value.charAt(2) === "'")) if (Value.charCodeAt(2 - 1) < 128) {
            Result = 6}
           else Result = 6;
        };
      } else if ($tmp === "#") {
        p += 1;
        if (p > l) return Result;
        var $tmp2 = Value.charAt(p - 1);
        if ($tmp2 === "$") {
          base = 16;
          p += 1;
        } else if ($tmp2 === "&") {
          base = 8;
          p += 1;
        } else if ($tmp2 === "%") {
          base = 2;
          p += 1;
        } else if (($tmp2 >= "0") && ($tmp2 <= "9")) {
          base = 10}
         else {
          this.RaiseNotYetImplemented(20170728142709,ErrorPos,"");
        };
        i = 0;
        while (p <= l) {
          var $tmp3 = Value.charAt(p - 1);
          if (($tmp3 >= "0") && ($tmp3 <= "9")) {
            i = ((i * base) + Value.charCodeAt(p - 1)) - 48}
           else if (($tmp3 >= "A") && ($tmp3 <= "Z")) {
            i = (((i * base) + Value.charCodeAt(p - 1)) - 65) + 10}
           else if (($tmp3 >= "a") && ($tmp3 <= "z")) {
            i = (((i * base) + Value.charCodeAt(p - 1)) - 97) + 10}
           else {
            break;
          };
          p += 1;
        };
        if (p > l) {
          Result = 6;
        };
      } else if ($tmp === "^") {
        if ((l === 2) && (Value.charCodeAt(1) in rtl.createSet(null,97,122,null,65,90))) Result = 6;
      };
      if (Result in rtl.createSet(6)) {
        if (this.FBaseTypes[Result] === null) {
          Result = 5;
        };
        if (Result === this.FBaseTypeChar) Result = 5;
      };
      return Result;
    };
    this.CheckForIn = function (Loop, VarResolved, InResolved) {
      var Result = false;
      Result = false;
      if (Loop === null) ;
      if (VarResolved.BaseType === 1) ;
      if (InResolved.BaseType === 1) ;
      return Result;
    };
    this.CheckForInClassOrRec = function (Loop, VarResolved, InResolved) {
      var Result = false;
      var LoTypeEl = null;
      var EnumeratorClass = null;
      var EnumeratorScope = null;
      var Getter = null;
      var MoveNext = null;
      var Current = null;
      var GetterFunc = null;
      var MoveNextFunc = null;
      var ptm = 0;
      var ResultResolved = $lt59.$new();
      var MoveNextResolved = $lt59.$new();
      var CurrentResolved = $lt59.$new();
      var CurrentProp = null;
      var ForScope = null;
      var DotScope = null;
      Result = false;
      if ($lt95.isPrototypeOf(InResolved.IdentEl)) this.RaiseMsg(20190120180525,3074,rtl.getResStr($lm5,"sCannotFindEnumeratorForType"),$lp6(18,this.GetBaseDescription(InResolved,false)),Loop.StartExpr);
      if (!(0 in InResolved.Flags)) this.RaiseMsg(20171221195421,3074,rtl.getResStr($lm5,"sCannotFindEnumeratorForType"),$lp6(18,this.GetBaseDescription(InResolved,false)),Loop.StartExpr);
      LoTypeEl = InResolved.LoTypeEl;
      if (LoTypeEl === null) return Result;
      DotScope = this.PushDotScope(InResolved.HiTypeEl);
      if (DotScope === null) return Result;
      Getter = DotScope.FindIdentifier("GetEnumerator");
      this.PopScope();
      if (Getter === null) {
        if ($lt107.isPrototypeOf(LoTypeEl)) {
          this.RaiseIdentifierNotFound(20171221191511,"GetEnumerator",Loop.StartExpr)}
         else return Result;
      };
      if (Getter.FElement.$class.ClassType() !== $lt111) this.RaiseContextXExpectedButYFound(20171221191638,"GetEnumerator","function",$mod.GetElementTypeName(Getter.FElement),Loop.StartExpr);
      GetterFunc = Getter.FElement;
      if (!(GetterFunc.Visibility in rtl.createSet(3,4))) this.RaiseContextXExpectedButYFound(20171221191824,"function GetEnumerator","public",$lm4.VisibilityNames[GetterFunc.Visibility],Loop.StartExpr);
      if (GetterFunc.GetFT().Args.FCount > 0) this.RaiseContextXExpectedButYFound(20171221191944,"function GetEnumerator","no arguments",$lp5(GetterFunc.ProcType.Args.FCount),Loop.StartExpr);
      for (var $l in GetterFunc.ProcType.Modifiers) {
        ptm = +$l;
        if (!(ptm in rtl.createSet(0))) this.RaiseContextXInvalidY(20171221193455,"function GetEnumerator","modifier " + $lm4.ProcTypeModifiers[ptm],Loop.StartExpr);
      };
      this.ComputeResultElement(GetterFunc.GetFT().ResultEl,ResultResolved,rtl.createSet(5),null);
      if (ResultResolved.BaseType !== 2) this.RaiseContextXExpectedButYFound(20171221193749,"function GetEnumerator","result class",this.GetTypeDescription$1(ResultResolved,false),Loop.StartExpr);
      LoTypeEl = ResultResolved.LoTypeEl;
      if (!$lt94.isPrototypeOf(LoTypeEl)) this.RaiseContextXExpectedButYFound(20171221193749,"function GetEnumerator","result class",this.GetTypeDescription(ResultResolved.LoTypeEl,false),Loop.StartExpr);
      if (!(0 in ResultResolved.Flags)) this.RaiseContextXExpectedButYFound(20171221195506,"function GetEnumerator","result class instance",this.GetTypeDescription(ResultResolved.LoTypeEl,false),Loop.StartExpr);
      EnumeratorClass = LoTypeEl;
      EnumeratorScope = this.PushClassDotScope({get: function () {
          return EnumeratorClass;
        }, set: function (v) {
          EnumeratorClass = v;
        }},true);
      MoveNext = EnumeratorScope.FindIdentifier("MoveNext");
      if (MoveNext === null) this.RaiseIdentifierNotFound(20171221195632,"MoveNext",Loop.StartExpr);
      if (MoveNext.FElement.$class.ClassType() !== $lt111) this.RaiseContextXExpectedButYFound(20171221195651,"MoveNext","function",$mod.GetElementTypeName(MoveNext.FElement),Loop.StartExpr);
      MoveNextFunc = MoveNext.FElement;
      if (!(MoveNextFunc.Visibility in rtl.createSet(3,4))) this.RaiseContextXExpectedButYFound(20171221195712,"function MoveNext","public",$lm4.VisibilityNames[MoveNextFunc.Visibility],Loop.StartExpr);
      if (MoveNextFunc.GetFT().Args.FCount > 0) this.RaiseContextXExpectedButYFound(20171221195723,"function MoveNext","no arguments",$lp5(MoveNextFunc.ProcType.Args.FCount),Loop.StartExpr);
      for (var $l1 in MoveNextFunc.ProcType.Modifiers) {
        ptm = +$l1;
        if (!(ptm in rtl.createSet(0))) this.RaiseContextXInvalidY(20171221195732,"function MoveNext","modifier " + $lm4.ProcTypeModifiers[ptm],Loop.StartExpr);
      };
      this.ComputeResultElement(MoveNextFunc.GetFT().ResultEl,MoveNextResolved,rtl.createSet(5),null);
      if (!(MoveNextResolved.BaseType in $mod.btAllBooleans)) this.RaiseContextXExpectedButYFound(20171221200337,"function MoveNext","result boolean",this.GetTypeDescription$1(MoveNextResolved,false),Loop.StartExpr);
      Current = EnumeratorScope.FindIdentifier("Current");
      if (Current === null) this.RaiseIdentifierNotFound(20171221200433,"Current",Loop.StartExpr);
      if (Current.FElement.$class.ClassType() !== $lt88) this.RaiseContextXExpectedButYFound(20171221200508,"Current","property",$mod.GetElementTypeName(Current.FElement),Loop.StartExpr);
      CurrentProp = Current.FElement;
      if (!(CurrentProp.Visibility in rtl.createSet(3,4))) this.RaiseContextXExpectedButYFound(20171221200546,"property Current","public",$lm4.VisibilityNames[CurrentProp.Visibility],Loop.StartExpr);
      if (CurrentProp.FArgs.FCount > 0) this.RaiseContextXExpectedButYFound(20171221200638,"property Current","no arguments",$lp5(CurrentProp.FArgs.FCount),Loop.StartExpr);
      if (this.GetPasPropertyGetter(CurrentProp) === null) this.RaiseContextXInvalidY(20171221200823,"property Current","read accessor",Loop.StartExpr);
      this.ComputeElement(CurrentProp,CurrentResolved,rtl.createSet(4),null);
      if (this.CheckAssignResCompatibility(VarResolved,CurrentResolved,Loop.VariableName,false) === 2147483647) this.RaiseIncompatibleTypeRes(20171221200018,3028,[],VarResolved,CurrentResolved,Loop.VariableName);
      this.PopScope();
      ForScope = rtl.as(Loop.FData,$lt43);
      ForScope.GetEnumerator = GetterFunc;
      ForScope.MoveNext = MoveNextFunc;
      ForScope.Current = CurrentProp;
      Result = true;
      return Result;
    };
    this.CheckBuiltInMinParamCount = function (Proc, Expr, MinCount, RaiseOnError) {
      var Result = false;
      if (!$lt145.isPrototypeOf(Expr) || (rtl.length(Expr.Params) < MinCount)) {
        if (RaiseOnError) this.RaiseMsg(20170216152248,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Proc.Signature),Expr);
        return false;
      };
      Result = true;
      return Result;
    };
    this.CheckBuiltInMaxParamCount = function (Proc, Params, MaxCount, RaiseOnError, Signature) {
      var Result = 0;
      if (rtl.length(Params.Params) > MaxCount) {
        if (RaiseOnError) {
          if (Signature === "") Signature = Proc.Signature;
          this.RaiseMsg(20170329154348,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,Signature),Params.Params[MaxCount]);
        };
        return 2147483647;
      };
      Result = 0;
      return Result;
    };
    this.CheckRaiseTypeArgNo = function (id, ArgNo, Param, ParamResolved, Expected, RaiseOnError) {
      var Result = 0;
      if (RaiseOnError) this.RaiseMsg(id,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(ArgNo),18,this.GetResolverResultDescription(ParamResolved,true),18,Expected),Param);
      Result = 2147483647;
      return Result;
    };
    this.FindUsedUnitnameInSection = function (aName, Section) {
      var Result = null;
      var Clause = [];
      var i = 0;
      var Use = null;
      var ModName = "";
      Result = null;
      if (Section === null) return Result;
      Clause = Section.UsesClause;
      for (var $l = 0, $end = rtl.length(Clause) - 1; $l <= $end; $l++) {
        i = $l;
        Use = Clause[i];
        if ((Use.Module === null) || !$lt86.isPrototypeOf(Use.Module)) continue;
        ModName = Use.Module.FName;
        if ($lp4(ModName,aName) === 0) return Use.Module;
      };
      return Result;
    };
    this.FindUsedUnitname = function (aName, aMod) {
      var Result = null;
      var C = null;
      C = aMod.$class.ClassType();
      if (C.InheritsFrom($lt113)) {
        Result = this.FindUsedUnitnameInSection(aName,aMod.ProgramSection)}
       else if (C.InheritsFrom($lt114)) {
        Result = this.FindUsedUnitnameInSection(aName,aMod.LibrarySection)}
       else {
        Result = this.FindUsedUnitnameInSection(aName,aMod.InterfaceSection);
        if (Result !== null) return Result;
        Result = this.FindUsedUnitnameInSection(aName,aMod.ImplementationSection);
      };
      return Result;
    };
    this.FinishAssertCall = function (Proc, Params) {
      var aMod = null;
      var ModScope = null;
      var aConstructor = null;
      if (Proc === null) ;
      aMod = this.FRootElement;
      ModScope = rtl.as(aMod.FData,$lt15);
      if (!(0 in ModScope.Flags)) this.FindAssertExceptionConstructors(null);
      if (ModScope.FAssertClass === null) return;
      if (rtl.length(Params.Params) > 1) {
        aConstructor = ModScope.FAssertMsgConstructor}
       else aConstructor = ModScope.FAssertDefConstructor;
      if (aConstructor === null) return;
      this.CreateReference(aConstructor,Params,1,null);
    };
    this.FindSystemIdentifier = function (aUnitName, aName, ErrorEl) {
      var Result = null;
      var aMod = null;
      var UtilsMod = null;
      var SectionScope = null;
      var Identifier = null;
      Result = null;
      aMod = this.FRootElement;
      UtilsMod = this.FindUsedUnitname(aUnitName,aMod);
      if (UtilsMod === null) if (ErrorEl !== null) {
        this.RaiseIdentifierNotFound(20200523224738,"unit " + aUnitName,ErrorEl)}
       else return Result;
      if (UtilsMod.InterfaceSection === null) if (ErrorEl !== null) {
        this.RaiseIdentifierNotFound(20200523224831,aUnitName + "." + aName,ErrorEl)}
       else return Result;
      SectionScope = rtl.as($mod.NoNil(UtilsMod.InterfaceSection.FData),$lt22);
      Identifier = SectionScope.FindLocalIdentifier(aName);
      if (Identifier === null) if (ErrorEl !== null) {
        this.RaiseIdentifierNotFound(20200523224841,aUnitName + "." + aName,ErrorEl)}
       else return Result;
      Result = Identifier.FElement;
      return Result;
    };
    this.FindSystemClassType = function (aUnitName, aClassName, ErrorEl) {
      var Result = null;
      var El = null;
      Result = null;
      El = this.FindSystemIdentifier(aUnitName,aClassName,ErrorEl);
      if (!$lt94.isPrototypeOf(El)) if (ErrorEl !== null) {
        this.RaiseXExpectedButYFound(20180119172517,"class " + aClassName,$mod.GetElementTypeName(El),ErrorEl)}
       else return Result;
      Result = El;
      if (Result.IsForward) if (ErrorEl !== null) {
        this.RaiseXExpectedButYFound(20200523225546,"class " + aClassName,"forward " + this.GetTypeDescription(Result,true),ErrorEl)}
       else return Result;
      if (Result.ObjKind !== 1) if (ErrorEl !== null) {
        this.RaiseXExpectedButYFound(20180321163200,"class " + aClassName,this.GetTypeDescription(Result,true),ErrorEl)}
       else return Result;
      return Result;
    };
    this.FindSystemClassTypeAndConstructor = function (aUnitName, aClassName, aClass, aConstructor, ErrorEl) {
      var Result = false;
      var Identifier = null;
      var ClassScope = null;
      Result = false;
      aClass.set(null);
      aConstructor.set(null);
      aClass.set(this.FindSystemClassType(aUnitName,aClassName,ErrorEl));
      if (aClass.get() === null) return Result;
      ClassScope = rtl.as($mod.NoNil(aClass.get().FData),$lt34);
      do {
        Identifier = ClassScope.FindIdentifier("create");
        while (Identifier !== null) {
          if (Identifier.FElement.$class.ClassType() === $lt108) {
            aConstructor.set(Identifier.FElement);
            if (aConstructor.get().ProcType.Args.FCount === 0) return true;
          };
          Identifier = Identifier.NextSameIdentifier;
        };
        ClassScope = ClassScope.AncestorScope;
      } while (!(ClassScope === null));
      aConstructor.set(null);
      if (ErrorEl !== null) this.RaiseIdentifierNotFound(20200523224856,"constructor " + aClassName,ErrorEl);
      return Result;
    };
    this.FindAssertExceptionConstructors = function (ErrorEl) {
      var aMod = null;
      var ModScope = null;
      var Identifier = null;
      var aClass = null;
      var ClassScope = null;
      var aConstructor = null;
      var Arg = null;
      var ArgResolved = $lt59.$new();
      aMod = this.FRootElement;
      ModScope = rtl.as(aMod.FData,$lt15);
      if (0 in ModScope.Flags) return;
      ModScope.Flags = rtl.includeSet(ModScope.Flags,0);
      this.FindSystemClassTypeAndConstructor("sysutils","EAssertionFailed",{get: function () {
          return aClass;
        }, set: function (v) {
          aClass = v;
        }},{get: function () {
          return aConstructor;
        }, set: function (v) {
          aConstructor = v;
        }},ErrorEl);
      if (aClass === null) return;
      ClassScope = rtl.as($mod.NoNil(aClass.FData),$lt34);
      ModScope.SetAssertClass(aClass);
      do {
        Identifier = ClassScope.FindIdentifier("create");
        while (Identifier !== null) {
          if (Identifier.FElement.$class.ClassType() === $lt108) {
            aConstructor = Identifier.FElement;
            if (aConstructor.ProcType.Args.FCount === 0) {
              if (ModScope.FAssertDefConstructor === null) ModScope.SetAssertDefConstructor(aConstructor);
            } else if (aConstructor.ProcType.Args.FCount === 1) {
              if (ModScope.FAssertMsgConstructor === null) {
                Arg = rtl.getObject(aConstructor.ProcType.Args.Get(0));
                this.ComputeElement(Arg.ArgType,ArgResolved,rtl.createSet(4),null);
                if (ArgResolved.BaseType in $mod.btAllStrings) ModScope.SetAssertMsgConstructor(aConstructor);
              };
            };
          };
          Identifier = Identifier.NextSameIdentifier;
        };
        ClassScope = ClassScope.AncestorScope;
      } while (!(ClassScope === null));
    };
    this.FindRangeErrorConstructors = function (ErrorEl) {
      var aMod = null;
      var ModScope = null;
      var aClass = null;
      var aConstructor = null;
      aMod = this.FRootElement;
      ModScope = rtl.as(aMod.FData,$lt15);
      if (2 in ModScope.Flags) return;
      ModScope.Flags = rtl.includeSet(ModScope.Flags,2);
      this.FindSystemClassTypeAndConstructor("sysutils","ERangeError",{get: function () {
          return aClass;
        }, set: function (v) {
          aClass = v;
        }},{get: function () {
          return aConstructor;
        }, set: function (v) {
          aConstructor = v;
        }},ErrorEl);
      ModScope.SetRangeErrorClass(aClass);
      ModScope.SetRangeErrorConstructor(aConstructor);
    };
    this.FindTVarRec = function (ErrorEl) {
      var Result = null;
      var aMod = null;
      var UtilsMod = null;
      var SectionScope = null;
      var Identifier = null;
      var El = null;
      var ModScope = null;
      aMod = this.FRootElement;
      ModScope = rtl.as(aMod.FData,$lt15);
      Result = ModScope.FSystemTVarRec;
      if (Result !== null) return Result;
      UtilsMod = this.FindUsedUnitname("system",aMod);
      if (UtilsMod === null) this.RaiseIdentifierNotFound(20190215101210,"System.TVarRec",ErrorEl);
      if (UtilsMod.InterfaceSection === null) this.RaiseIdentifierNotFound(20190215101231,"System.TVarRec",ErrorEl);
      SectionScope = rtl.as($mod.NoNil(UtilsMod.InterfaceSection.FData),$lt22);
      Identifier = SectionScope.FindLocalIdentifier("TVarRec");
      if (Identifier === null) this.RaiseIdentifierNotFound(20190215101253,"System.TVarRec",ErrorEl);
      El = Identifier.FElement;
      if (!$lt98.isPrototypeOf(El)) this.RaiseXExpectedButYFound(20190215101310,"record TVarRec",$mod.GetElementTypeName(El),ErrorEl);
      Result = El;
      ModScope.SetSystemTVarRec(Result);
      return Result;
    };
    this.GetTVarRec = function (El) {
      var Result = null;
      var aModule = null;
      var ModScope = null;
      aModule = El.GetModule();
      ModScope = rtl.as(aModule.FData,$lt15);
      Result = ModScope.FSystemTVarRec;
      if (Result === null) this.RaiseNotYetImplemented(20190215111924,El,"missing System.TVarRec");
      return Result;
    };
    this.FindDefaultConstructor = function (aClass) {
      var Result = null;
      var ClassScope = null;
      var Identifier = null;
      var El = null;
      var HasOverload = false;
      var Proc = null;
      Result = null;
      if ((aClass === null) || aClass.IsExternal || (aClass.ObjKind !== 1)) return Result;
      ClassScope = rtl.as(aClass.FData,$lt34);
      do {
        Identifier = ClassScope.FindLocalIdentifier("create");
        if (Identifier !== null) {
          HasOverload = false;
          while (Identifier !== null) {
            El = Identifier.FElement;
            if (!$lt90.isPrototypeOf(El)) return Result;
            Proc = El;
            if (Proc.$class.ClassType() === $lt108) {
              if (Proc.ProcType.Args.FCount === 0) return El;
            };
            if (this.IsProcOverload(Proc)) HasOverload = true;
            Identifier = Identifier.NextSameIdentifier;
          };
          if (!HasOverload) return Result;
        };
        ClassScope = ClassScope.AncestorScope;
      } while (!false);
      return Result;
    };
    this.GetTypeInfoParamType = function (Param, ParamResolved, LoType) {
      var Result = null;
      var Decl = null;
      Result = null;
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      Decl = ParamResolved.IdentEl;
      if (Decl === null) return Result;
      if ($lt95.isPrototypeOf(Decl)) {
        Result = Decl}
       else if ($lt105.isPrototypeOf(Decl)) {
        Result = Decl.VarType}
       else if (Decl.$class.ClassType() === $lt106) {
        Result = Decl.ArgType}
       else if (Decl.$class.ClassType() === $lt141) {
        Result = Decl.ResultType}
       else if ($lt90.isPrototypeOf(Decl) && $lt101.isPrototypeOf(Decl.ProcType)) Result = Decl.ProcType.ResultEl.ResultType;
      if (LoType) Result = this.ResolveAliasType(Result,true);
      return Result;
    };
    this.OnExprEvalLog = function (Sender, id, MsgType, MsgNumber, Fmt, Args, PosEl) {
      if (MsgType <= 1) {
        this.RaiseMsg(id,MsgNumber,Fmt,Args,PosEl)}
       else this.LogMsg(id,MsgType,MsgNumber,Fmt,Args,PosEl);
      if (Sender === null) ;
    };
    this.OnExprEvalIdentifier = function (Sender, Expr, Flags) {
      var Result = null;
      var Ref = null;
      var Decl = null;
      var C = null;
      var ResolvedType = $lt59.$new();
      var EnumValue = null;
      var EnumType = null;
      var EvalFlags = {};
      Result = null;
      if (!$lt55.isPrototypeOf(Expr.FData)) this.RaiseNotYetImplemented(20170518203134,Expr,$lp2(Expr.FData));
      Ref = Expr.FData;
      Decl = Ref.FDeclaration;
      C = Decl.$class.ClassType();
      if (C === $lt117) {
        if ((Decl.Expr !== null) && (Decl.IsConst || (Decl.VarType === null))) {
          if (Decl.VarType !== null) {
            this.ComputeElement(Decl.VarType,ResolvedType,rtl.createSet(4),null);
          } else ResolvedType.BaseType = 0;
          EvalFlags = rtl.refSet(Flags);
          if (!(1 in EvalFlags)) EvalFlags = rtl.includeSet(EvalFlags,0);
          Result = this.fExprEvaluator.Eval(Decl.Expr,rtl.refSet(EvalFlags));
          if (Result !== null) {
            if ((Result.FElement !== null) && (Result.FElement !== Decl.Expr)) Result = Result.Clone();
            Result.IdentEl = Decl;
            if (Decl.VarType !== null) {
              if (Result.Kind === 4) {
                var $tmp = ResolvedType.BaseType;
                if ($tmp === 19) {
                  Result.Typed = 1}
                 else if ($tmp === 20) {
                  Result.Typed = 2}
                 else if ($tmp === 21) {
                  Result.Typed = 3}
                 else if ($tmp === 22) {
                  Result.Typed = 4}
                 else if ($tmp === 23) {
                  Result.Typed = 5}
                 else if ($tmp === 24) {
                  Result.Typed = 6}
                 else if ($tmp === 25) {
                  Result.Typed = 7}
                 else if ($tmp === 26) {
                  Result.Typed = 8}
                 else if ($tmp === 27) {
                  Result.Typed = 9}
                 else if ($tmp === 28) {
                  Result.Typed = 0}
                 else {
                  $lp12({get: function () {
                      return Result;
                    }, set: function (v) {
                      Result = v;
                    }});
                  this.RaiseNotYetImplemented(20170624181050,Decl.VarType,"");
                };
              };
            };
            return Result;
          };
        } else if (1 in Decl.VarModifiers) {
          Result = $lt167.$create("Create$1");
          Result.IdentEl = Decl;
          return Result;
        };
        if (0 in Flags) {
          $lp12({get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }});
          this.RaiseConstantExprExp(20170518214928,Expr);
        };
      } else if (C === $lt112) {
        EnumValue = Decl;
        EnumType = rtl.as(EnumValue.FParent,$lt99);
        Result = $lt168.$create("CreateValue",[EnumType.Values.IndexOf(EnumValue),EnumValue]);
        return Result;
      } else if (C.InheritsFrom($lt95)) Result = this.EvalTypeRange(Decl,rtl.refSet(Flags));
      if ((Result === null) && rtl.neSet(rtl.intersectSet(rtl.createSet(0,1),Flags),{})) this.RaiseConstantExprExp(20170518213616,Expr);
      if (Sender === null) ;
      return Result;
    };
    this.OnExprEvalParams = function (Sender, Params, Flags) {
      var Result = null;
      var Ref = null;
      var Decl = null;
      var C = null;
      var BuiltInProc = null;
      var bt = 0;
      var ResolvedEl = $lt59.$new();
      var TypeEl = null;
      Result = null;
      var $tmp = Params.Kind;
      if ($tmp === 11) {}
      else if ($tmp === 10) {
        if ($lt55.isPrototypeOf(Params.Value.FData)) {
          Ref = Params.Value.FData;
          Decl = Ref.FDeclaration;
          if ($lt95.isPrototypeOf(Decl)) Decl = this.ResolveAliasType(Decl,true);
          C = Decl.$class.ClassType();
          if (C === $lt83) {
            if ($lt64.isPrototypeOf(Decl.FData)) {
              BuiltInProc = Decl.FData;
              if (BuiltInProc.Eval !== null) {
                BuiltInProc.Eval(BuiltInProc,Params,rtl.refSet(Flags),{get: function () {
                    return Result;
                  }, set: function (v) {
                    Result = v;
                  }})}
               else {
                var $tmp1 = BuiltInProc.BuiltIn;
                if ($tmp1 === 10) {
                  Result = null}
                 else if ($tmp1 === 23) {
                  Result = null}
                 else if ($tmp1 === 25) {
                  Result = null}
                 else if ($tmp1 === 28) {
                  Result = null}
                 else {
                  this.RaiseNotYetImplemented(20170624192324,Params,"");
                };
              };
              return Result;
            } else if ($lt62.isPrototypeOf(Decl.FData)) {
              bt = Decl.FData.BaseType;
              Result = this.EvalBaseTypeCast(Params,bt);
            };
          } else if (C === $lt99) {
            Result = this.fExprEvaluator.EnumTypeCast(Decl,Params.Params[0],rtl.refSet(Flags));
          } else if (C === $lt103) {
            this.ComputeElement(Decl.RangeExpr.Left,ResolvedEl,rtl.createSet(3),null);
            if (ResolvedEl.BaseType === 2) {
              TypeEl = ResolvedEl.LoTypeEl;
              if (TypeEl.$class.ClassType() === $lt99) {
                Result = this.fExprEvaluator.EnumTypeCast(TypeEl,Params.Params[0],rtl.refSet(Flags));
              } else this.RaiseNotYetImplemented(20171009223403,Params,"");
            } else this.RaiseNotYetImplemented(20171009223303,Params,"");
          };
        }}
       else if ($tmp === 4) ;
      if (rtl.eqSet(Flags,{})) ;
      if (Sender === null) ;
      return Result;
    };
    this.OnRangeCheckEl = function (Sender, El, MsgType) {
      if (El === null) return;
      if ((MsgType.get() === 2) && (15 in this.FCurrentParser.FScanner.FCurrentBoolSwitches)) MsgType.set(1);
      if (Sender === null) ;
    };
    this.EvalBaseTypeCast = function (Params, bt) {
      var $Self = this;
      var Result = null;
      function TCFloatToInt(Value, Flo) {
        var Int = 0;
        var MinIntVal = 0;
        var MaxIntVal = 0;
        if (bt in $mod.btAllIntegerNoQWord) {
          $Self.GetIntegerRange(bt,{get: function () {
              return MinIntVal;
            }, set: function (v) {
              MinIntVal = v;
            }},{get: function () {
              return MaxIntVal;
            }, set: function (v) {
              MaxIntVal = v;
            }});
          if ((Flo < MinIntVal) || (Flo > MaxIntVal)) $Self.fExprEvaluator.EmitRangeCheckConst$1(20170711001228,Value.AsString(),MinIntVal,MaxIntVal,Params,1);
          try {
            Int = Math.round(Flo);
          } catch ($e) {
            $Self.RaiseMsg(20170711002218,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
          };
          var $tmp = bt;
          if ($tmp === 19) {
            Result = $lt169.$create("CreateValue$1",[Int,1])}
           else if ($tmp === 20) {
            Result = $lt169.$create("CreateValue$1",[Int,2])}
           else if ($tmp === 21) {
            Result = $lt169.$create("CreateValue$1",[Int,3])}
           else if ($tmp === 22) {
            Result = $lt169.$create("CreateValue$1",[Int,4])}
           else if ($tmp === 23) {
            Result = $lt169.$create("CreateValue$1",[Int,5])}
           else if ($tmp === 24) {
            Result = $lt169.$create("CreateValue$1",[Int,6])}
           else if ($tmp === 25) {
            Result = $lt169.$create("CreateValue$1",[Int,7])}
           else if ($tmp === 26) {
            Result = $lt169.$create("CreateValue$1",[Int,8])}
           else if ($tmp === 27) {
            Result = $lt169.$create("CreateValue$1",[Int,9])}
           else if ($tmp === 28) {
            Result = $lt169.$create("CreateValue",[Int])}
           else {
            $Self.RaiseNotYetImplemented(20170711001513,Params,"");
          };
          return;
        } else if (bt === 10) {
          try {
            Result = $lt170.$create("CreateValue",[Flo]);
          } catch ($e) {
            $Self.RaiseMsg(20170711002315,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
          };
        } else if (bt === 11) {
          try {
            Result = $lt170.$create("CreateValue",[Flo]);
          } catch ($e) {
            $Self.RaiseMsg(20170711002327,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
          };
        } else if (bt === 14) {
          try {
            Result = $lt171.$create("CreateValue",[Flo * 10000]);
          } catch ($e) {
            $Self.RaiseMsg(20180421171840,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
          };
        } else {
          $Self.RaiseNotYetImplemented(20170711002542,Params,"");
        };
      };
      var Value = null;
      var Int = 0;
      var MinIntVal = 0;
      var MaxIntVal = 0;
      var Flo = 0.0;
      var w = "\x00";
      Result = null;
      Value = this.Eval(Params.Params[0],rtl.createSet(3),true);
      if (Value === null) return Result;
      try {
        var $tmp = Value.Kind;
        if ($tmp === 4) {
          Int = Value.Int;
          if (bt in $mod.btAllIntegerNoQWord) {
            this.GetIntegerRange(bt,{get: function () {
                return MinIntVal;
              }, set: function (v) {
                MinIntVal = v;
              }},{get: function () {
                return MaxIntVal;
              }, set: function (v) {
                MaxIntVal = v;
              }});
            if ((Int < MinIntVal) || (Int > MaxIntVal)) {
              var $tmp1 = bt;
              if ($tmp1 === 19) {
                Result = $lt169.$create("CreateValue$1",[Int & 255,1])}
               else if ($tmp1 === 20) {
                Result = $lt169.$create("CreateValue$1",[((Int & 255) << 24) >> 24,2])}
               else if ($tmp1 === 21) {
                Result = $lt169.$create("CreateValue$1",[Int & 65535,3])}
               else if ($tmp1 === 22) {
                Result = $lt169.$create("CreateValue$1",[((Int & 65535) << 16) >> 16,4])}
               else if ($tmp1 === 25) {
                Result = $lt169.$create("CreateValue$1",[Int >>> 0,7])}
               else if ($tmp1 === 26) {
                Result = $lt169.$create("CreateValue$1",[Int & 0xFFFFFFFF,8])}
               else if (($tmp1 === 23) || ($tmp1 === 24) || ($tmp1 === 27) || ($tmp1 === 28)) {
                this.fExprEvaluator.EmitRangeCheckConst$1(20170624194534,Value.AsString(),MinIntVal,MaxIntVal,Params,1)}
               else {
                this.RaiseNotYetImplemented(20170624200109,Params,"");
              };
            } else {
              var $tmp2 = bt;
              if ($tmp2 === 19) {
                Result = $lt169.$create("CreateValue$1",[Int,1])}
               else if ($tmp2 === 20) {
                Result = $lt169.$create("CreateValue$1",[Int,2])}
               else if ($tmp2 === 21) {
                Result = $lt169.$create("CreateValue$1",[Int,3])}
               else if ($tmp2 === 22) {
                Result = $lt169.$create("CreateValue$1",[Int,4])}
               else if ($tmp2 === 23) {
                Result = $lt169.$create("CreateValue$1",[Int,5])}
               else if ($tmp2 === 24) {
                Result = $lt169.$create("CreateValue$1",[Int,6])}
               else if ($tmp2 === 25) {
                Result = $lt169.$create("CreateValue$1",[Int,7])}
               else if ($tmp2 === 26) {
                Result = $lt169.$create("CreateValue$1",[Int,8])}
               else if ($tmp2 === 27) {
                Result = $lt169.$create("CreateValue$1",[Int,9])}
               else if ($tmp2 === 28) {
                Result = $lt169.$create("CreateValue",[Int])}
               else {
                this.RaiseNotYetImplemented(20170624200109,Params,"");
              };
            };
            return Result;
          } else if (bt in $mod.btAllBooleans) {
            var $tmp3 = Int;
            if ($tmp3 === 0) {
              Result = $lt172.$create("CreateValue",[false])}
             else if ($tmp3 === 1) {
              Result = $lt172.$create("CreateValue",[true])}
             else {
              this.fExprEvaluator.EmitRangeCheckConst$1(20170710203254,Value.AsString(),0,1,Params,1);
            };
          } else if ((bt === 6) || ((bt === 5) && (this.FBaseTypeChar === 6))) {
            try {
              w = String.fromCharCode(Int);
              Result = $lt173.$create("CreateValue",[w]);
            } catch ($e) {
              this.RaiseMsg(20180125112716,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
            }}
           else if (bt === 10) {
            try {
              Result = $lt170.$create("CreateValue",[Int]);
            } catch ($e) {
              this.RaiseMsg(20170711002015,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
            }}
           else if (bt === 11) {
            try {
              Result = $lt170.$create("CreateValue",[Int]);
            } catch ($e) {
              this.RaiseMsg(20170711002016,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
            }}
           else if (bt === 14) {
            try {
              Result = $lt171.$create("CreateValue",[Int * 10000]);
            } catch ($e) {
              this.RaiseMsg(20180422093631,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],Params);
            }}
           else {
            this.RaiseNotYetImplemented(20170624194308,Params,"");
          };
        } else if ($tmp === 6) {
          Flo = Value.FloatValue;
          TCFloatToInt(Value,Flo);
        } else if ($tmp === 7) {
          if (bt === 14) {
            Result = Value;
            Value = null;
          } else {
            Flo = Value.Value / 10000;
            TCFloatToInt(Value,Flo);
          };
        } else if ($tmp === 8) {
          if ((Value.S.length === 1) && (bt in $mod.btAllChars)) {
            w = Value.S.charAt(0);
            if ((bt === 6) || ((bt === 5) && (this.FBaseTypeChar === 6))) {
              Result = Value;
              Value = null;
            };
          } else if ((bt === 9) || ((bt === 7) && (this.FBaseTypeString === 9))) {
            Result = Value;
            Value = null;
          }}
         else if ($tmp === 13) {
          return Result}
         else {
          this.RaiseNotYetImplemented(20170624193436,Params,"");
        };
      } finally {
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      return Result;
    };
    this.EvalLengthOfString = function (ParamResolved, Param, Flags) {
      var Result = null;
      var Value = null;
      Result = null;
      if (0 in ParamResolved.Flags) {
        Value = this.Eval(Param,rtl.refSet(Flags),true);
        if (Value === null) return Result;
        var $tmp = Value.Kind;
        if ($tmp === 8) Result = $lt169.$create("CreateValue",[Value.S.length]);
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      return Result;
    };
    this.AddGenericTemplateIdentifiers = function (GenericTemplateTypes, Scope) {
      var TemplType = null;
      var i = 0;
      if (GenericTemplateTypes === null) return;
      for (var $l = 0, $end = GenericTemplateTypes.FCount - 1; $l <= $end; $l++) {
        i = $l;
        TemplType = rtl.getObject(GenericTemplateTypes.Get(i));
        Scope.AddIdentifier(TemplType.FName,TemplType,3);
      };
    };
    this.AddSpecializedTemplateIdentifiers = function (GenericTemplateTypes, SpecializedItem, Scope, CheckConstraints) {
      var i = 0;
      var TemplType = null;
      var ParamTypes = [];
      var ParamType = null;
      var ErrorPos = null;
      ParamTypes = SpecializedItem.Params;
      ErrorPos = SpecializedItem.FirstSpecialize;
      for (var $l = 0, $end = rtl.length(ParamTypes) - 1; $l <= $end; $l++) {
        i = $l;
        TemplType = rtl.getObject(GenericTemplateTypes.Get(i));
        ParamType = ParamTypes[i];
        if (CheckConstraints) {
          if ($lt104.isPrototypeOf(ParamType)) {
            this.CheckTemplateFitsTemplate(ParamType,TemplType,ErrorPos)}
           else this.CheckTemplateFitsParam(ParamType,TemplType,SpecializedItem,0,ErrorPos);
        };
        this.AddIdentifier(Scope,TemplType.FName,ParamTypes[i],3);
      };
    };
    var TInferredType = rtl.recNewT(null,"",function () {
      this.InferType = null;
      this.IsVarOut = false;
      this.$eq = function (b) {
        return (this.InferType === b.InferType) && (this.IsVarOut === b.IsVarOut);
      };
      this.$assign = function (s) {
        this.InferType = s.InferType;
        this.IsVarOut = s.IsVarOut;
        return this;
      };
    });
    this.CreateInferenceTypesForCall = function (Params, TargetProc) {
      var $Self = this;
      var Result = null;
      function RaiseInferTypeMismatch(Id, ArgType, ErrorPos) {
        $Self.RaiseMsg(Id,3140,rtl.getResStr($lm5,"sInferredTypeXFromDiffArgsMismatchFromMethodY"),$lp6(18,ArgType.FName,18,TargetProc.FName),ErrorPos);
      };
      function Infer(ArgParent, ArgType, ParamLoType, ParamHiType, NeedVar, IsSubType, IsDelphi, InferenceParams, TemplTypes, ErrorPos) {
        var C = null;
        var i = 0;
        var OldInferType = null;
        var ParamElType = null;
        var ResolveAlias = 0;
        var Arr = null;
        var Param1Resolved = $lt59.$new();
        var Param2Resolved = $lt59.$new();
        var NewBaseType = 0;
        var BaseType1 = 0;
        var BaseType2 = 0;
        if ((ArgType === null) || (ParamLoType === null)) return;
        C = ArgType.$class.ClassType();
        if (C === $lt104) {
          i = TemplTypes.IndexOf(ArgType);
          if (i >= 0) {
            OldInferType = InferenceParams[i].InferType;
            if (OldInferType === null) {
              InferenceParams[i].InferType = ParamHiType;
              InferenceParams[i].IsVarOut = NeedVar;
              return;
            };
            ResolveAlias = 2;
            if (IsDelphi && (NeedVar || InferenceParams[i].IsVarOut)) ResolveAlias = 1;
            if ($Self.IsSameType(OldInferType,ParamHiType,ResolveAlias)) return;
            if (IsSubType) {
              if ($Self.CheckElTypeCompatibility(OldInferType,InferenceParams[i].InferType,ResolveAlias) <= 1) return;
              RaiseInferTypeMismatch(20191006215539,ArgType,ErrorPos);
            };
            if (NeedVar) {
              if (InferenceParams[i].IsVarOut) RaiseInferTypeMismatch(20191006220355,ArgType,ErrorPos);
              if ($Self.CheckAssignCompatibility(ParamHiType,OldInferType,false,ErrorPos) === 2147483647) RaiseInferTypeMismatch(20191006220402,ArgType,ErrorPos);
              InferenceParams[i].InferType = ParamHiType;
              InferenceParams[i].IsVarOut = NeedVar;
              return;
            } else if (InferenceParams[i].IsVarOut) {
              if ($Self.CheckAssignCompatibility(OldInferType,ParamHiType,false,ErrorPos) === 2147483647) RaiseInferTypeMismatch(20191006220750,ArgType,ErrorPos);
              return;
            };
            $Self.ComputeElement(ParamHiType,Param1Resolved,{},ErrorPos);
            $Self.ComputeElement(InferenceParams[i].InferType,Param2Resolved,{},ErrorPos);
            NewBaseType = 0;
            BaseType1 = Param1Resolved.BaseType;
            BaseType2 = Param2Resolved.BaseType;
            if (BaseType1 in $mod.btAllBooleans) {
              if (BaseType2 in $mod.btAllBooleans) if ($Self.GetBaseTypes(15) !== null) {
                NewBaseType = 15}
               else NewBaseType = $Self.GetCombinedBoolean(BaseType1,BaseType2,ErrorPos);
            } else if (BaseType1 in $mod.btAllInteger) {
              NewBaseType = Math.max(BaseType1,BaseType2);
              if (($Self.GetBaseTypes(26) !== null) && (NewBaseType in rtl.createSet(19,20,21,22,24,23,26)) && (BaseType1 !== 25) && (BaseType2 !== 25)) {
                NewBaseType = 26}
               else if (($Self.GetBaseTypes(28) !== null) && (NewBaseType <= 28)) {
                NewBaseType = 28}
               else NewBaseType = $Self.GetCombinedInt(Param1Resolved,Param2Resolved,ErrorPos);
            } else if (Param1Resolved.BaseType in $mod.btAllStringAndChars) {
              if (Param2Resolved.BaseType in $mod.btAllStringAndChars) if ($Self.GetBaseTypes(9) !== null) {
                NewBaseType = 9}
               else NewBaseType = $Self.GetCombinedString(Param1Resolved,Param2Resolved,ErrorPos);
            } else if (Param1Resolved.BaseType in $mod.btAllFloats) {
              if ($Self.GetBaseTypes(11) !== null) NewBaseType = 11;
            };
            if (NewBaseType !== 0) {
              InferenceParams[i].InferType = $Self.GetBaseTypes(NewBaseType);
              InferenceParams[i].IsVarOut = NeedVar;
              return;
            };
            RaiseInferTypeMismatch(20191006220406,ArgType,ErrorPos);
          };
        } else if (ArgParent !== ArgType.FParent) {}
        else if (C === $lt102) {
          Arr = ArgType;
          if (ParamLoType.$class.ClassType() !== $lt102) return;
          ParamElType = ParamLoType.ElType;
          Infer(Arr,Arr.ElType,ParamElType,$Self.ResolveAliasType(ParamElType,true),NeedVar,true,IsDelphi,rtl.arrayRef(InferenceParams),TemplTypes,ErrorPos);
        };
      };
      function InferParam(i, NeedVar, ParamsExprs, ProcArgs, InferenceParams, TemplTypes, IsDelphi) {
        var Arg = null;
        var ArgType = null;
        var ArgResolved = $lt59.$new();
        var ExprResolved = $lt59.$new();
        var Expr = null;
        Arg = rtl.getObject(ProcArgs.Get(i));
        ArgType = Arg.ArgType;
        if (ArgType === null) return;
        if ((ArgType.FParent !== Arg) && (ArgType.$class.ClassType() !== $lt104)) return;
        if (NeedVar !== (Arg.Access in rtl.createSet(2,3))) return;
        if (i < rtl.length(ParamsExprs)) {
          Expr = ParamsExprs[i]}
         else {
          Expr = Arg.ValueExpr;
          if (Expr === null) return;
        };
        $Self.ComputeArgumentAndExpr(Arg,ArgResolved,Expr,ExprResolved,false);
        if (ExprResolved.BaseType in $mod.btAllWithSubType) {}
        else if (ExprResolved.SubType !== 0) {
          $Self.RaiseNotYetImplemented(20191006203622,Expr,"")}
         else Infer(Arg,ArgType,ExprResolved.LoTypeEl,ExprResolved.HiTypeEl,NeedVar,false,IsDelphi,rtl.arrayRef(InferenceParams),TemplTypes,Expr);
      };
      var TemplTypes = null;
      var ProcArgs = null;
      var InferenceTypes = [];
      var ParamsExprs = [];
      var IsDelphi = false;
      var i = 0;
      Result = null;
      TemplTypes = this.GetProcTemplateTypes(TargetProc);
      if ((TemplTypes === null) || (TemplTypes.FCount === 0)) this.RaiseNotYetImplemented(20191006174321,Params,"");
      ProcArgs = TargetProc.ProcType.Args;
      ParamsExprs = Params.Params;
      if (ProcArgs.FCount < rtl.length(ParamsExprs)) this.RaiseNotYetImplemented(20191006183021,Params,"");
      IsDelphi = 3 in this.FCurrentParser.GetCurrentModeSwitches();
      InferenceTypes = rtl.arraySetLength(InferenceTypes,TInferredType,TemplTypes.FCount);
      for (var $l = 0, $end = TemplTypes.FCount - 1; $l <= $end; $l++) {
        i = $l;
        InferenceTypes[i].$assign(TInferredType.$new());
      };
      for (var $l1 = 0, $end1 = ProcArgs.FCount - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        InferParam(i,true,rtl.arrayRef(ParamsExprs),ProcArgs,rtl.arrayRef(InferenceTypes),TemplTypes,IsDelphi);
      };
      for (var $l2 = 0, $end2 = ProcArgs.FCount - 1; $l2 <= $end2; $l2++) {
        i = $l2;
        InferParam(i,false,rtl.arrayRef(ParamsExprs),ProcArgs,rtl.arrayRef(InferenceTypes),TemplTypes,IsDelphi);
      };
      for (var $l3 = 0, $end3 = TemplTypes.FCount - 1; $l3 <= $end3; $l3++) {
        i = $l3;
        if (InferenceTypes[i].InferType === null) this.RaiseMsg(20191006175104,3139,rtl.getResStr($lm5,"sCouldNotInferTypeArgXForMethodY"),$lp6(18,rtl.getObject(TemplTypes.Get(i)).FName,18,TargetProc.FName),Params);
      };
      Result = $lt85.$create("Create");
      for (var $l4 = 0, $end4 = rtl.length(InferenceTypes) - 1; $l4 <= $end4; $l4++) {
        i = $l4;
        Result.Add(InferenceTypes[i].InferType);
        InferenceTypes[i].InferType = null;
      };
      return Result;
    };
    this.CheckGenericConstraintFitsParam = function (ParamType, SpecializedItem, TemplType, ConEl, Operation, ErrorPos) {
      var $Self = this;
      var Result = 0;
      function RaiseXExpButYFound(id, X, Y) {
        var Result = 0;
        if (ErrorPos !== null) $Self.RaiseXExpectedButTypeYFound(id,X,Y,ErrorPos);
        Result = 2147483647;
        return Result;
      };
      function RaiseNotValidConstraint(Id, ConEl) {
        $Self.RaiseMsg(Id,3129,rtl.getResStr($lm5,"sXIsNotAValidConstraint"),$lp6(18,$Self.GetElementSourcePosStr(ConEl)),ErrorPos);
      };
      function ElementReferencesTemplateTypes(El, GenericTemplateTypes) {
        var Result = false;
        var C = null;
        var Prim = null;
        var Decl = null;
        var Bin = null;
        var Spec = null;
        var Arr = null;
        var i = 0;
        var InlineSpec = null;
        Result = false;
        if (El === null) return Result;
        C = El.$class.ClassType();
        if (C === $lt142) {
          Prim = El;
          if (Prim.Kind === 0) {
            if ($lt55.isPrototypeOf(Prim.FData)) {
              Decl = Prim.FData.FDeclaration;
              return ElementReferencesTemplateTypes(Decl,GenericTemplateTypes);
            };
          } else return Result;
        } else if (C === $lt144) {
          Bin = El;
          Result = ElementReferencesTemplateTypes(Bin.Left,GenericTemplateTypes) || ElementReferencesTemplateTypes(Bin.Right,GenericTemplateTypes);
        } else if (C === $lt152) {
          InlineSpec = El;
          if (ElementReferencesTemplateTypes(InlineSpec.NameExpr,GenericTemplateTypes)) return true;
          for (var $l = 0, $end = InlineSpec.Params.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Decl = rtl.getObject(InlineSpec.Params.Get(i));
            if (Decl.FParent !== InlineSpec) continue;
            if (ElementReferencesTemplateTypes(Decl,GenericTemplateTypes)) return true;
          };
        } else if (C === $lt104) {
          Result = GenericTemplateTypes.IndexOf(El) >= 0}
         else if (C.InheritsFrom($lt95)) {
          if (El.FName !== "") return Result;
          if (C === $lt155) {
            Spec = El;
            if (ElementReferencesTemplateTypes(Spec.DestType,GenericTemplateTypes)) return true;
            for (var $l1 = 0, $end1 = Spec.Params.FCount - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              if (ElementReferencesTemplateTypes(rtl.getObject(Spec.Params.Get(i)),GenericTemplateTypes)) return true;
            };
          } else if (C === $lt102) {
            Arr = El;
            for (var $l2 = 0, $end2 = rtl.length(Arr.Ranges) - 1; $l2 <= $end2; $l2++) {
              i = $l2;
              if (ElementReferencesTemplateTypes(Arr.Ranges[i],GenericTemplateTypes)) return true;
            };
            Result = ElementReferencesTemplateTypes(Arr.ElType,GenericTemplateTypes);
          } else if (C === $lt97) {
            Result = ElementReferencesTemplateTypes(El.DestType,GenericTemplateTypes)}
           else if (C === $lt119) {
            Result = ElementReferencesTemplateTypes(El.EnumType,GenericTemplateTypes)}
           else if (C === $lt99) {}
          else $Self.RaiseNotYetImplemented(20190905110152,El,"");
        } else $Self.RaiseNotYetImplemented(20190905105648,El,"");
        return Result;
      };
      var ConToken = 0;
      var aClass = null;
      var ConstraintClass = null;
      var GenTempl = null;
      var i = 0;
      var ResolvedEl = $lt59.$new();
      var ConType = null;
      var GenericTemplateTypes = null;
      var GenericEl = null;
      ConToken = this.GetGenericConstraintKeyword(ConEl);
      var $tmp = ConToken;
      if ($tmp === 96) {
        if ($lt98.isPrototypeOf(ParamType)) return 0;
        return RaiseXExpButYFound(20190725200015,"record type",ParamType);
      } else if (($tmp === 47) || ($tmp === 50)) {
        if (!$lt94.isPrototypeOf(ParamType)) return RaiseXExpButYFound(20190726133231,"class type",ParamType);
        aClass = ParamType;
        if (aClass.ObjKind !== 1) return RaiseXExpButYFound(20190726133232,"class type",ParamType);
        if (aClass.IsExternal) return RaiseXExpButYFound(20190726133233,"non external class type",ParamType);
        if (ConToken === 50) {
          if (this.FindDefaultConstructor(aClass) === null) return RaiseXExpButYFound(20190831000225,"class type with constructor create()",ParamType);
        };
        return Result;
      };
      if (!$lt95.isPrototypeOf(ConEl)) this.RaiseNotYetImplemented(20190912214727,ConEl,$lp8(ErrorPos));
      if (SpecializedItem !== null) {
        GenericEl = SpecializedItem.GenericEl;
        if ($lt93.isPrototypeOf(GenericEl)) {
          GenericTemplateTypes = GenericEl.GenericTemplateTypes}
         else if ($lt90.isPrototypeOf(GenericEl)) {
          GenericTemplateTypes = this.GetProcTemplateTypes(GenericEl)}
         else this.RaiseNotYetImplemented(20190920114755,ConEl,"");
        if (ElementReferencesTemplateTypes(ConEl,GenericTemplateTypes)) {
          if ($lt95.isPrototypeOf(ConEl)) {
            ConType = ConEl;
            i = rtl.length(SpecializedItem.SpecializedConstraints);
            SpecializedItem.SpecializedConstraints = rtl.arraySetLength(SpecializedItem.SpecializedConstraints,null,i + 1);
            SpecializedItem.SpecializedConstraints[i] = null;
            this.SpecializeElType(TemplType,SpecializedItem.FSpecializedEl,ConType,{a: i, p: SpecializedItem.SpecializedConstraints, get: function () {
                return this.p[this.a];
              }, set: function (v) {
                this.p[this.a] = v;
              }});
            ConEl = SpecializedItem.SpecializedConstraints[i];
          } else RaiseNotValidConstraint(20190915181137,ConEl);
        };
      };
      this.ComputeElement(ConEl,ResolvedEl,rtl.createSet(4),null);
      if (ResolvedEl.BaseType !== 2) RaiseNotValidConstraint(20190914105836,ConEl);
      if (ResolvedEl.HiTypeEl.FName === "") RaiseNotValidConstraint(20190726134037,this.GetGenericConstraintErrorEl(ConEl,TemplType));
      if ($lt104.isPrototypeOf(ResolvedEl.LoTypeEl)) {
        GenTempl = ResolvedEl.LoTypeEl;
        if (GenTempl === ConEl.FParent) this.RaiseNotYetImplemented(20190831213359,GenTempl,"");
        Result = this.CheckTemplateFitsParam(ParamType,GenTempl,null,Operation,ErrorPos);
      } else if ($lt94.isPrototypeOf(ResolvedEl.LoTypeEl)) {
        ConstraintClass = ResolvedEl.LoTypeEl;
        if (!$lt94.isPrototypeOf(ParamType)) {
          if (ErrorPos !== null) this.RaiseIncompatibleType(20190726135859,3028,$lp6(18,""),ParamType,ConstraintClass,ErrorPos);
          return 2147483647;
        };
        if (!(ParamType.ObjKind in rtl.createSet(1,2))) {
          if (ErrorPos !== null) this.RaiseMsg(20190904175144,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"class",18,this.GetTypeDescription(ParamType,false)),ErrorPos);
          return 2147483647;
        };
        var $tmp1 = ConstraintClass.ObjKind;
        if ($tmp1 === 1) {
          var $tmp2 = Operation;
          if ($tmp2 === 0) {
            if (this.CheckClassIsClass(ParamType,ConstraintClass) === 2147483647) {
              if (ErrorPos !== null) this.RaiseIncompatibleType(20190726135309,3028,$lp6(18,""),ParamType,ConstraintClass,ErrorPos);
              return 2147483647;
            }}
           else if ($tmp2 === 1) {
            if (this.CheckClassIsClass(ConstraintClass,ParamType) !== 2147483647) {
              if (ErrorPos !== null) this.RaiseIncompatibleType(20190915202812,3028,$lp6(18,""),ConstraintClass,ParamType,ErrorPos);
              return 2147483647;
            }}
           else if ($tmp2 === 2) {
            if ((this.CheckClassIsClass(ParamType,ConstraintClass) === 2147483647) && (this.CheckClassIsClass(ConstraintClass,ParamType) !== 2147483647)) {
              if (ErrorPos !== null) this.RaiseIncompatibleType(20190915203651,3028,$lp6(18,""),ParamType,ConstraintClass,ErrorPos);
              return 2147483647;
            }}
           else {
            this.RaiseNotYetImplemented(20190915203439,ConEl,"");
          };
        } else if ($tmp1 === 2) {
          var $tmp3 = Operation;
          if ($tmp3 === 0) {
            if (this.GetClassImplementsIntf(ParamType,ConstraintClass) === null) {
              if (ErrorPos !== null) this.RaiseIncompatibleType(20190726135458,3028,$lp6(18,""),ParamType,ConstraintClass,ErrorPos);
              return 2147483647;
            }}
           else if ($tmp3 === 1) {}
          else if ($tmp3 === 2) {}
          else {
            this.RaiseNotYetImplemented(20190915203218,ConEl,"");
          };
        } else {
          if (ErrorPos !== null) this.RaiseIncompatibleType(20190726135310,3028,$lp6(18,""),ParamType,ConstraintClass,ErrorPos);
          return 2147483647;
        };
      } else {
        this.RaiseMsg(20190726134223,3129,rtl.getResStr($lm5,"sXIsNotAValidConstraint"),$lp6(18,this.GetElementSourcePosStr(this.GetGenericConstraintErrorEl(ConEl,ConEl.FParent))),ErrorPos);
      };
      Result = 0;
      return Result;
    };
    this.CheckTemplateFitsParam = function (ParamType, GenTempl, SpecializedItem, Operation, ErrorPos) {
      var Result = 0;
      var i = 0;
      for (var $l = 0, $end = rtl.length(GenTempl.Constraints) - 1; $l <= $end; $l++) {
        i = $l;
        Result = this.CheckGenericConstraintFitsParam(ParamType,SpecializedItem,GenTempl,GenTempl.Constraints[i],Operation,ErrorPos);
        if (Result === 2147483647) return Result;
      };
      Result = 0;
      return Result;
    };
    this.CheckTemplateFitsParamRes = function (GenTempl, ResolvedEl, Operation, ErrorPos) {
      var Result = 0;
      var i = 0;
      var ConEl = null;
      var ConToken = 0;
      var LoTypeEl = null;
      if (rtl.length(GenTempl.Constraints) === 0) return 1;
      if (ResolvedEl.BaseType === 2) {
        LoTypeEl = ResolvedEl.LoTypeEl;
        if ($lt104.isPrototypeOf(LoTypeEl)) {
          if (LoTypeEl === GenTempl) return 1;
          if ((Operation === 0) && (ErrorPos !== null)) this.CheckTemplateFitsTemplate(LoTypeEl,GenTempl,ErrorPos);
          Result = 1;
        } else Result = this.CheckTemplateFitsParam(LoTypeEl,GenTempl,null,Operation,ErrorPos);
      } else if (ResolvedEl.BaseType === 30) {
        for (var $l = 0, $end = rtl.length(GenTempl.Constraints) - 1; $l <= $end; $l++) {
          i = $l;
          ConEl = GenTempl.Constraints[i];
          ConToken = this.GetGenericConstraintKeyword(ConEl);
          if (ConToken === 96) {
            if (ErrorPos !== null) this.RaiseXExpectedButYFound(20190915211000,"record type","nil",ErrorPos);
            return 2147483647;
          };
        };
        Result = 1;
      } else {
        if (ErrorPos !== null) this.RaiseNotYetImplemented(20190915205441,ErrorPos,"");
        Result = 2147483647;
      };
      return Result;
    };
    this.CheckTemplateFitsTemplate = function (ParamTemplType, GenTempl, ErrorPos) {
      var $Self = this;
      function RaiseNotValidConstraint(Id, ConEl) {
        $Self.RaiseMsg(Id,3129,rtl.getResStr($lm5,"sXIsNotAValidConstraint"),$lp6(18,$mod.GetElementTypeName(ConEl)),$Self.GetGenericConstraintErrorEl(ConEl,GenTempl));
      };
      var ParamConstraints = [];
      var j = 0;
      var k = 0;
      var ConToken = 0;
      var ConstraintClass = null;
      var ParamClassType = null;
      var ConEl = null;
      var ParamConstraintEl = null;
      var ParamLoType = null;
      var ParamHiType = null;
      var ResolvedEl = $lt59.$new();
      ParamConstraints = ParamTemplType.Constraints;
      for (var $l = 0, $end = rtl.length(GenTempl.Constraints) - 1; $l <= $end; $l++) {
        j = $l;
        ConEl = GenTempl.Constraints[j];
        ConToken = this.GetGenericConstraintKeyword(ConEl);
        if (ConToken !== 0) {
          k = rtl.length(ParamConstraints) - 1;
          while ((k >= 0) && (this.GetGenericConstraintKeyword(ParamConstraints[k]) !== ConToken)) k -= 1;
          if (k < 0) this.RaiseMsg(20190816230021,3133,rtl.getResStr($lm5,"sTypeParamXIsMissingConstraintY"),$lp6(18,ParamTemplType.FName,18,$lm3.TokenInfos[ConToken]),ErrorPos);
        } else if ($lt95.isPrototypeOf(ConEl)) {
          this.ComputeElement(ConEl,ResolvedEl,rtl.createSet(4),null);
          if (ResolvedEl.BaseType !== 2) RaiseNotValidConstraint(20190816231846,ConEl);
          if (!$lt94.isPrototypeOf(ResolvedEl.LoTypeEl)) RaiseNotValidConstraint(20190816231849,ConEl);
          ConstraintClass = ResolvedEl.LoTypeEl;
          k = rtl.length(ParamConstraints) - 1;
          while (k >= 0) {
            ParamConstraintEl = ParamConstraints[k];
            if ($lt95.isPrototypeOf(ParamConstraintEl)) {
              ParamHiType = ParamConstraintEl;
              ParamLoType = this.ResolveAliasType(ParamHiType,true);
              if (!$lt94.isPrototypeOf(ParamLoType)) this.RaiseMsg(20190816232459,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"type",18,this.GetTypeDescription(ParamHiType,false)),this.GetGenericConstraintErrorEl(ParamConstraintEl,ParamTemplType));
              ParamClassType = ParamLoType;
              if ((ConstraintClass.ObjKind === 2) && (ParamClassType.ObjKind === 1)) {
                if (this.GetClassImplementsIntf(ParamClassType,ConstraintClass) !== null) break;
              } else {
                if (this.CheckClassIsClass(ParamClassType,ConstraintClass) < 2147483647) break;
              };
            };
            k -= 1;
          };
          if (k < 0) {
            if (ConstraintClass.ObjKind === 2) {
              this.RaiseMsg(20190816233102,3135,rtl.getResStr($lm5,"sTypeParamXMustSupportIntfY"),$lp6(18,ParamTemplType.FName,18,this.GetTypeDescription(ConstraintClass,false)),ErrorPos)}
             else this.RaiseMsg(20190816230021,3134,rtl.getResStr($lm5,"sTypeParamXIsNotCompatibleWithY"),$lp6(18,ParamTemplType.FName,18,this.GetTypeDescription(ConstraintClass,false)),ErrorPos);
          };
        } else this.RaiseNotYetImplemented(20190912215702,this.GetGenericConstraintErrorEl(ConEl,GenTempl),"");
      };
    };
    this.CreateSpecializedItem = function (El, GenericEl, ParamsResolved) {
      var $Self = this;
      var Result = null;
      var NewEl = null;
      var GenScope = null;
      var SpecializedItems = null;
      function InsertBehind(List) {
        var Last = null;
        var i = 0;
        var LastIndex = 0;
        var GenScope = null;
        var ProcScope = null;
        Last = GenericEl;
        if (SpecializedItems !== null) {
          i = SpecializedItems.GetCount() - 2;
          if (i >= 0) Last = SpecializedItems.GetItem(i).FSpecializedEl;
        };
        LastIndex = List.IndexOf(Last);
        if (LastIndex < 0) if ($lt90.isPrototypeOf(GenericEl)) {}
        else $Self.RaiseNotYetImplemented(20200725093218,El,"");
        i = List.FCount - 1;
        while (i > LastIndex) {
          Last = rtl.getObject(List.Get(i));
          if ($lt93.isPrototypeOf(Last)) {
            if ($lt27.isPrototypeOf(Last.FData)) {
              GenScope = rtl.as(Last.FData,$lt27);
              if (GenScope.GenericStep >= 1) break;
            };
            i -= 1;
          } else if ($lt90.isPrototypeOf(Last)) {
            ProcScope = rtl.as(Last.FData,$lt37);
            if (ProcScope.GenericStep >= 1) break;
            i -= 1;
          } else break;
        };
        List.Insert(i + 1,NewEl);
      };
      var NewName = "";
      var NewClass = null;
      var SrcModule = null;
      var SrcModuleScope = null;
      var SrcResolver = null;
      var NewParent = null;
      var TypeItem = null;
      var ProcItem = null;
      Result = null;
      SrcModule = GenericEl.GetModule();
      SrcModuleScope = rtl.as(SrcModule.FData,$lt15);
      SrcResolver = rtl.as(SrcModuleScope.Owner,$lt74);
      if (SrcResolver !== $Self) this.RaiseInternalError(20190728121705,"");
      GenScope = GenericEl.FData;
      SpecializedItems = GenScope.SpecializedItems;
      TypeItem = null;
      ProcItem = null;
      if ($lt93.isPrototypeOf(GenericEl)) {
        TypeItem = $lt8.$create("Create");
        Result = TypeItem;
      } else if ($lt90.isPrototypeOf(GenericEl)) {
        ProcItem = $lt9.$create("Create");
        Result = ProcItem;
      } else this.RaiseNotYetImplemented(20190920140756,GenericEl,"");
      Result.GenericEl = GenericEl;
      Result.FirstSpecialize = El;
      Result.Params = rtl.arrayRef(ParamsResolved);
      Result.Index = SpecializedItems.GetCount();
      SpecializedItems.Add$1(Result);
      NewName = this.CreateSpecializedTypeName(Result);
      NewClass = GenericEl.$class.ClassType();
      NewParent = GenericEl.FParent;
      NewEl = this.CreateOwnedElement(NewClass,NewName,NewParent);
      if (TypeItem !== null) {
        TypeItem.SetSpecializedType(NewEl)}
       else ProcItem.SetSpecializedProc(NewEl);
      if ($lt156.isPrototypeOf(NewParent)) {
        InsertBehind(NewParent.Declarations);
      } else if ($lt107.isPrototypeOf(NewParent)) {
        InsertBehind(NewParent.Members);
      };
      if (GenScope.GenericStep >= 1) this.SpecializeGenericIntf(Result);
      if (GenScope.GenericStep >= 2) this.SpecializeGenericImpl(Result);
      return Result;
    };
    this.CreateSpecializedTypeName = function (Item) {
      var $Self = this;
      var Result = "";
      function GetParentName(El) {
        var Result = "";
        if ($lt95.isPrototypeOf(El.FParent)) {
          Result = GetTypeName(El.FParent)}
         else if ($lt83.isPrototypeOf(El)) {
          Result = "System"}
         else if ($lt90.isPrototypeOf(El.FParent)) {
          Result = Get_ProcName(El.FParent)}
         else Result = El.GetModule().FName;
        return Result;
      };
      function Get_ProcName(aProc) {
        var Result = "";
        Result = GetParentName(aProc);
        if (aProc.FName !== "") Result = Result + "." + aProc.FName;
        return Result;
      };
      function GetSpecParams(Item) {
        var Result = "";
        var i = 0;
        Result = "<";
        for (var $l = 0, $end = rtl.length(Item.Params) - 1; $l <= $end; $l++) {
          i = $l;
          if (i > 0) Result = Result + ",";
          Result = Result + GetTypeName(Item.Params[i]);
        };
        Result = Result + ">";
        return Result;
      };
      function GetTypeName(aType) {
        var Result = "";
        var Arr = null;
        var ElType = null;
        var ChildItem = null;
        if (aType.FName === "") {
          if ($lt102.isPrototypeOf(aType)) {
            Result = "array of ";
            Arr = aType;
            if (rtl.length(Arr.Ranges) > 0) $Self.RaiseNotYetImplemented(20200905173026,Item.FirstSpecialize,"");
            ElType = $Self.ResolveAliasType(Arr.ElType,false);
            if ($lt102.isPrototypeOf(ElType)) $Self.RaiseNotYetImplemented(20200905173159,Arr,"multidimensional anonymous array as generic param");
            Result = Result + GetTypeName(ElType);
          } else $Self.RaiseNotYetImplemented(20200905173241,aType,"");
        } else {
          Result = GetParentName(aType) + "." + aType.FName;
          if ($lt27.isPrototypeOf(aType.FData) && ($lp13("<",aType.FName) < 1)) {
            ChildItem = aType.FData.SpecializedFromItem;
            if (ChildItem !== null) Result = Result + GetSpecParams(ChildItem);
          };
        };
        return Result;
      };
      if ($lp13("<",Item.GenericEl.FName) > 0) this.RaiseNotYetImplemented(20201203140102,Item.FSpecializedEl,Item.GenericEl.FName);
      Result = Item.GenericEl.FName + GetSpecParams(Item);
      if ($lp13("><",Result) > 0) this.RaiseNotYetImplemented(20201203140223,Item.FSpecializedEl,Result);
      return Result;
    };
    this.InitSpecializeScopes = function (El, State) {
      var $Self = this;
      function PushParentScopes(CurEl) {
        var Result = 0;
        var Keep = 0;
        var Scope = null;
        var IntfSection = null;
        if (CurEl === null) $Self.RaiseInternalError(20190728125025,"");
        if ($lt86.isPrototypeOf(CurEl)) {
          if (!$lt15.isPrototypeOf(CurEl.FData)) $Self.RaiseNotYetImplemented(20190728142609,El,$lp2(CurEl) + " " + $lp2(CurEl.FData));
          Keep = 0;
          if ($Self.FScopeCount <= Keep) $Self.RaiseInternalError(20190728124857,"");
          if (!$lt19.isPrototypeOf($Self.FScopes[Keep])) $Self.RaiseInternalError(20190728124858,"");
        } else {
          if (CurEl.FParent === null) $Self.RaiseInternalError(20190728130238,$lp2(CurEl));
          if (CurEl.FData === null) return PushParentScopes(CurEl.FParent);
          if (!$lt18.isPrototypeOf(CurEl.FData)) $Self.RaiseNotYetImplemented(20190728131934,El,$lp2(CurEl) + " " + $lp2(CurEl.FData));
          Keep = PushParentScopes(CurEl.FParent);
        };
        Keep += 1;
        Scope = CurEl.FData;
        if (Scope.$class.FreeOnPop()) $Self.RaiseInternalError(20190728131153,$lp2(CurEl));
        if ((Keep < $Self.FScopeCount) && ($Self.FScopes[Keep] === Scope)) {}
        else {
          if (Keep < $Self.FScopeCount) {
            $Self.StashScopes(Keep);
            if (Keep !== $Self.FScopeCount) $Self.RaiseNotYetImplemented(20190813005130,El,"");
            State.ScopeCount = $Self.FScopeCount;
          };
          if (CurEl.$class.ClassType() === $lt110) {
            IntfSection = CurEl.GetModule().InterfaceSection;
            if (IntfSection === null) $Self.RaiseNotYetImplemented(20190825112907,CurEl,"");
            if (!$lt22.isPrototypeOf(IntfSection.FData)) $Self.RaiseNotYetImplemented(20190825112907,CurEl,"");
            $Self.PushScope(IntfSection.FData);
            Keep += 1;
          };
          $Self.PushScope(Scope);
        };
        return Keep;
        return Result;
      };
      var Keep = 0;
      State.ScopeCount = this.FScopeCount;
      State.StashCount = this.FStashScopeCount;
      Keep = PushParentScopes(El.FParent) + 1;
      if (Keep < this.FScopeCount) {
        this.StashScopes(Keep);
        if (Keep !== this.FScopeCount) this.RaiseNotYetImplemented(20190813005859,El,"");
      };
    };
    this.RestoreSpecializeScopes = function (State) {
      while (this.FScopeCount > State.ScopeCount) this.PopScope();
      this.RestoreStashedScopes(State.StashCount);
    };
    this.SpecializeGenericIntf = function (SpecializedItem) {
      var SpecEl = null;
      var GenericEl = null;
      var C = null;
      var NewRecordType = null;
      var GenRecordType = null;
      var NewClassType = null;
      var GenClassType = null;
      var NewArrayType = null;
      var GenArrayType = null;
      var GenProcType = null;
      var NewProcType = null;
      var GenProc = null;
      var NewProc = null;
      var OldScopeState = $lt79.$new();
      if (SpecializedItem.Step !== 0) return;
      SpecializedItem.Step = 1;
      SpecEl = SpecializedItem.FSpecializedEl;
      GenericEl = SpecializedItem.GenericEl;
      this.InitSpecializeScopes(GenericEl,OldScopeState);
      this.SpecializePasElementProperties(GenericEl,SpecEl);
      C = SpecEl.$class.ClassType();
      if (C === $lt98) {
        NewRecordType = SpecEl;
        GenRecordType = GenericEl;
        this.SpecializeRecordType(GenRecordType,NewRecordType,SpecializedItem);
      } else if (C === $lt94) {
        NewClassType = SpecEl;
        GenClassType = GenericEl;
        this.SpecializeClassType(GenClassType,NewClassType,SpecializedItem);
      } else if (C === $lt102) {
        GenArrayType = GenericEl;
        NewArrayType = SpecEl;
        this.SpecializeArrayType(GenArrayType,NewArrayType,SpecializedItem);
      } else if ((C === $lt100) || (C === $lt101)) {
        GenProcType = GenericEl;
        NewProcType = SpecEl;
        this.SpecializeProcedureType(GenProcType,NewProcType,SpecializedItem);
      } else if (C.InheritsFrom($lt90)) {
        GenProc = GenericEl;
        NewProc = SpecEl;
        this.SpecializeProcedure(GenProc,NewProc,SpecializedItem);
      } else this.RaiseNotYetImplemented(20190728134933,GenericEl,"");
      this.RestoreSpecializeScopes(OldScopeState);
    };
    this.SpecializeGenericImpl = function (SpecializedItem) {
      var GenericEl = null;
      var GenScope = null;
      var SpecializedTypeItem = null;
      var SpecializedProcItem = null;
      var GenImplProc = null;
      var GenIntfProc = null;
      var SpecDeclProc = null;
      var GenDeclProcScope = null;
      var OldScopeState = $lt79.$new();
      if (SpecializedItem.Step > 2) return;
      GenericEl = SpecializedItem.GenericEl;
      if (SpecializedItem.Step < 2) if ($lt95.isPrototypeOf(GenericEl)) {
        this.RaiseMsg(20190804120128,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,this.GetTypeDescription(GenericEl,false)),SpecializedItem.FirstSpecialize)}
       else this.RaiseMsg(20190920190727,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,GenericEl.FName),SpecializedItem.FirstSpecialize);
      SpecializedItem.Step = 3;
      GenScope = GenericEl.FData;
      if (GenScope.GenericStep < 2) this.RaiseNotYetImplemented(20190804174019,GenericEl,$lp2(SpecializedItem.FSpecializedEl));
      if ($lt107.isPrototypeOf(GenericEl)) {
        SpecializedTypeItem = SpecializedItem;
        if (SpecializedTypeItem.ImplProcs === null) SpecializedTypeItem.ImplProcs = $lt85.$create("Create");
        this.SpecializeMembersImpl(GenericEl,SpecializedTypeItem.FSpecializedType,SpecializedTypeItem);
      } else if ($lt90.isPrototypeOf(GenericEl)) {
        GenIntfProc = GenericEl;
        if (GenIntfProc.IsAbstract() || GenIntfProc.IsExternal()) {}
        else {
          SpecializedProcItem = SpecializedItem;
          GenDeclProcScope = GenScope;
          GenImplProc = GenDeclProcScope.ImplProc;
          if (GenImplProc === null) this.RaiseNotYetImplemented(20190920211609,SpecializedProcItem.FSpecializedProc,"");
          if (GenImplProc.Body === null) this.RaiseNotYetImplemented(20190920192731,GenImplProc,"");
          SpecDeclProc = SpecializedProcItem.FSpecializedProc;
          this.InitSpecializeScopes(GenImplProc,OldScopeState);
          this.SpecializeGenImplProc(GenIntfProc,SpecDeclProc,SpecializedProcItem);
          this.RestoreSpecializeScopes(OldScopeState);
        };
      };
      SpecializedItem.Step = 4;
    };
    this.SpecializeMembers = function (GenMembersType, SpecMembersType) {
      var i = 0;
      var GenEl = null;
      var NewEl = null;
      var NewClass = null;
      for (var $l = 0, $end = GenMembersType.Members.FCount - 1; $l <= $end; $l++) {
        i = $l;
        GenEl = rtl.getObject(GenMembersType.Members.Get(i));
        if (GenEl.FParent !== GenMembersType) this.RaiseNotYetImplemented(20190728145634,GenEl,$lp2(GenEl.FParent));
        NewClass = GenEl.$class.ClassType();
        NewEl = this.CreateOwnedElement(NewClass,GenEl.FName,SpecMembersType);
        SpecMembersType.Members.Add(NewEl);
        this.SpecializeElement(GenEl,NewEl);
      };
    };
    this.SpecializeMembersImpl = function (GenericType, SpecType, SpecializedItem) {
      var GenClassOrRec = null;
      var SpecClassOrRec = null;
      var i = 0;
      var GenMember = null;
      var SpecMember = null;
      var ImplParent = null;
      var GenIntfProc = null;
      var GenImplProc = null;
      var SpecIntfProc = null;
      var GenIntfProcScope = null;
      var OldScopeState = $lt79.$new();
      GenClassOrRec = GenericType;
      SpecClassOrRec = SpecType;
      ImplParent = null;
      OldScopeState.$assign($lt79.$new());
      for (var $l = 0, $end = GenClassOrRec.Members.FCount - 1; $l <= $end; $l++) {
        i = $l;
        GenMember = rtl.getObject(GenClassOrRec.Members.Get(i));
        SpecMember = rtl.getObject(SpecClassOrRec.Members.Get(i));
        if (SpecMember.$class.ClassType() !== GenMember.$class.ClassType()) this.RaiseNotYetImplemented(20190816002658,GenMember,$lp2(SpecMember));
        if (SpecMember.FName !== GenMember.FName) this.RaiseNotYetImplemented(20190804124220,GenMember,$lp2(SpecMember));
        if ($lt90.isPrototypeOf(GenMember)) {
          GenIntfProc = GenMember;
          SpecIntfProc = SpecMember;
          if (GenIntfProc.IsAbstract() || GenIntfProc.IsExternal()) continue;
          GenIntfProcScope = GenIntfProc.FData;
          GenImplProc = GenIntfProcScope.ImplProc;
          if (GenImplProc === null) this.RaiseNotYetImplemented(20190921221246,GenIntfProc,"");
          if (ImplParent === null) {
            ImplParent = GenImplProc.FParent;
            this.InitSpecializeScopes(GenImplProc,OldScopeState);
          } else if (ImplParent !== GenImplProc.FParent) this.RaiseNotYetImplemented(20190804130322,GenImplProc,$lp2(ImplParent));
          this.SpecializeGenImplProc(GenIntfProc,SpecIntfProc,SpecializedItem);
        } else if ($lt107.isPrototypeOf(GenMember)) {
          this.SpecializeMembersImpl(GenMember,SpecMember,SpecializedItem);
        };
      };
      if (ImplParent !== null) {
        this.RestoreSpecializeScopes(OldScopeState);
      };
    };
    this.SpecializeGenImplProc = function (GenDeclProc, SpecDeclProc, SpecializedItem) {
      var $Self = this;
      function InsertBehind(ParentElList, SpecializedItems, GenImplProc, SpecImplProc) {
        var Last = null;
        var i = 0;
        Last = null;
        if (SpecializedItems !== null) {
          i = SpecializedItems.GetCount() - 1;
          while (i >= 0) {
            Last = SpecializedItems.GetItem(i).ImplProc;
            if (Last === SpecImplProc) {
              Last = null}
             else if (Last !== null) break;
            i -= 1;
          };
        };
        if (Last === null) Last = GenImplProc;
        i = ParentElList.IndexOf(Last);
        if (i < 0) {
          $Self.RaiseNotYetImplemented(20191017122900,GenDeclProc,"");
        };
        ParentElList.Insert(i + 1,SpecImplProc);
      };
      var GenDeclProcScope = null;
      var GenImplProcScope = null;
      var SpecDeclProcScope = null;
      var SpecImplProcScope = null;
      var GenImplProc = null;
      var SpecImplProc = null;
      var NewClass = null;
      var SpecClassOrRec = null;
      var GenClassOrRec = null;
      var SpecClassOrRecScope = null;
      var NewImplProcName = "";
      var OldClassname = "";
      var p = 0;
      var LastDotP = 0;
      var SpecializedProcItem = null;
      var SpecializedTypeItem = null;
      var Templates = null;
      var NewParent = null;
      SpecializedProcItem = null;
      SpecializedTypeItem = null;
      if ($lt9.isPrototypeOf(SpecializedItem)) {
        SpecializedProcItem = SpecializedItem}
       else if ($lt8.isPrototypeOf(SpecializedItem)) {
        SpecializedTypeItem = SpecializedItem}
       else this.RaiseNotYetImplemented(20190922145050,SpecDeclProc,"");
      GenDeclProcScope = GenDeclProc.FData;
      GenImplProc = GenDeclProcScope.ImplProc;
      if (GenImplProc === null) this.RaiseNotYetImplemented(20190804122134,GenDeclProc,"");
      if (GenImplProc.Body === null) this.RaiseNotYetImplemented(20190921220216,GenImplProc,"");
      GenImplProcScope = GenImplProc.FData;
      SpecDeclProcScope = SpecDeclProc.FData;
      if ($lt107.isPrototypeOf(SpecDeclProc.FParent)) {
        SpecClassOrRec = rtl.as(SpecDeclProc.FParent,$lt107);
        SpecClassOrRecScope = rtl.as(SpecClassOrRec.FData,$lt30);
      } else {
        SpecClassOrRec = null;
        SpecClassOrRecScope = null;
      };
      if (SpecializedTypeItem !== null) {
        if (SpecClassOrRecScope === null) this.RaiseNotYetImplemented(20190921221839,SpecDeclProc,"");
        NewImplProcName = GenImplProc.FName;
        LastDotP = $mod.GetLastDotPos(NewImplProcName);
        if (LastDotP < 1) this.RaiseNotYetImplemented(20190921221730,GenImplProc,"");
        p = LastDotP;
        while ((p > 1) && (NewImplProcName.charAt(p - 1 - 1) !== ".")) p -= 1;
        OldClassname = $lp16(NewImplProcName,p,LastDotP - p);
        GenClassOrRec = rtl.as(GenDeclProc.FParent,$lt107);
        if (!$lp7(OldClassname,GenClassOrRec.FName)) this.RaiseNotYetImplemented(20190814141833,GenImplProc,"");
        NewImplProcName = $lp11(NewImplProcName,p - 1) + SpecClassOrRec.FName + $lp16(NewImplProcName,LastDotP,NewImplProcName.length);
      } else {
        OldClassname = GenImplProc.FName;
        p = $mod.GetLastDotPos(OldClassname);
        if (p > 0) {
          NewImplProcName = $lp11(OldClassname,p) + SpecDeclProc.FName}
         else NewImplProcName = SpecDeclProc.FName;
      };
      NewClass = GenImplProc.$class.ClassType();
      NewParent = GenImplProc.FParent;
      SpecImplProc = this.CreateOwnedElement(NewClass,NewImplProcName,NewParent);
      SpecDeclProcScope.ImplProc = SpecImplProc;
      if (SpecializedProcItem !== null) {
        SpecializedProcItem.ImplProc = SpecImplProc}
       else SpecializedTypeItem.ImplProcs.Add(SpecImplProc);
      if ((SpecializedProcItem !== null) && $lt156.isPrototypeOf(NewParent)) InsertBehind(NewParent.Declarations,GenDeclProcScope.SpecializedItems,GenImplProc,SpecImplProc);
      SpecImplProcScope = this.CreateScope(SpecImplProc,this.FScopeClass_Proc);
      SpecImplProcScope.Flags = rtl.createSet(1);
      SpecImplProcScope.DeclarationProc = SpecDeclProc;
      SpecImplProcScope.ModeSwitches = rtl.refSet(GenImplProcScope.ModeSwitches);
      SpecImplProcScope.BoolSwitches = rtl.refSet(GenImplProcScope.BoolSwitches);
      SpecImplProcScope.VisibilityContext = SpecClassOrRec;
      SpecImplProcScope.ClassRecScope = SpecClassOrRecScope;
      if (SpecializedProcItem !== null) {
        Templates = this.GetProcTemplateTypes(GenDeclProc);
        this.AddSpecializedTemplateIdentifiers(Templates,SpecializedItem,SpecImplProcScope,false);
      };
      this.SpecializePasElementProperties(GenImplProc,SpecImplProc);
      this.AddProcedure(SpecImplProc,null);
      this.SpecializeProcedure(GenImplProc,SpecImplProc,SpecializedItem);
    };
    this.SpecializeElement = function (GenEl, SpecEl) {
      var C = null;
      this.SpecializePasElementProperties(GenEl,SpecEl);
      C = GenEl.$class.ClassType();
      if (C === $lt142) {
        this.SpecializePrimitiveExpr(GenEl,SpecEl)}
       else if (C === $lt143) {
        this.SpecializeUnaryExpr(GenEl,SpecEl)}
       else if (C === $lt144) {
        this.SpecializeBinaryExpr(GenEl,SpecEl)}
       else if (C === $lt146) {
        this.SpecializeBoolConstExpr(GenEl,SpecEl)}
       else if (C === $lt147) {
        this.SpecializeExpr(GenEl,SpecEl)}
       else if (C === $lt148) {
        this.SpecializeExpr(GenEl,SpecEl)}
       else if (C === $lt145) {
        this.SpecializeParamsExpr(GenEl,SpecEl)}
       else if (C === $lt150) {
        this.SpecializeRecordValues(GenEl,SpecEl)}
       else if (C === $lt149) {
        this.SpecializeArrayValues(GenEl,SpecEl)}
       else if (C === $lt152) {
        this.SpecializeInlineSpecializeExpr(GenEl,SpecEl)}
       else if (C === $lt151) {
        this.SpecializeProcedureExpr(GenEl,SpecEl)}
       else if ((C === $lt157) || (C === $lt158) || (C === $lt96)) {
        this.AddType(SpecEl);
        this.SpecializeAliasType(GenEl,SpecEl);
      } else if (C === $lt97) {
        this.AddType(SpecEl);
        this.SpecializePointerType(GenEl,SpecEl);
      } else if (C === $lt103) {
        this.AddType(SpecEl);
        this.SpecializeRangeType(GenEl,SpecEl);
      } else if (C === $lt102) {
        if (this.GetTypeParameterCount(GenEl) > 0) this.RaiseNotYetImplemented(20190815201219,GenEl,"");
        this.AddArrayType(SpecEl,null);
        this.SpecializeArrayType(GenEl,SpecEl,null);
      } else if (C === $lt112) {
        this.AddEnumValue(SpecEl);
        this.SpecializeEnumValue(GenEl,SpecEl);
      } else if (C === $lt99) {
        this.AddEnumType(SpecEl);
        this.SpecializeEnumType(GenEl,SpecEl);
      } else if (C === $lt119) {
        this.SpecializeSetType(GenEl,SpecEl)}
       else if (C === $lt118) {
        this.SpecializeVariant(GenEl,SpecEl)}
       else if (C === $lt98) {
        if (this.GetTypeParameterCount(GenEl) > 0) this.RaiseNotYetImplemented(20190815201201,GenEl,"");
        this.AddRecordType(SpecEl,null);
        this.SpecializeRecordType(GenEl,SpecEl,null);
      } else if (C === $lt94) {
        if (this.GetTypeParameterCount(GenEl) > 0) this.RaiseNotYetImplemented(20190816214947,GenEl,"");
        this.AddClassType(SpecEl,null);
        this.SpecializeClassType(GenEl,SpecEl,null);
      } else if (C === $lt174) {
        this.AddType(SpecEl);
        this.SpecializeStringType(GenEl,SpecEl);
      } else if (C === $lt155) {
        this.AddType(SpecEl);
        this.SpecializeSpecializeType(GenEl,SpecEl);
      } else if (C === $lt104) {
        this.SpecializeGenericTemplateType(GenEl,SpecEl)}
       else if (C === $lt135) {}
      else if (C === $lt122) {
        this.SpecializeImplBlock(GenEl,SpecEl)}
       else if (C === $lt136) {
        this.SpecializeImplAsmStatement(GenEl,SpecEl)}
       else if (C === $lt126) {
        this.SpecializeImplRepeatUntil(GenEl,SpecEl)}
       else if (C === $lt127) {
        this.SpecializeImplIfElse(GenEl,SpecEl)}
       else if (C === $lt128) {
        this.SpecializeImplWhileDo(GenEl,SpecEl)}
       else if (C === $lt137) {
        this.SpecializeImplWithDo(GenEl,SpecEl)}
       else if (C === $lt129) {
        this.SpecializeImplCaseOf(GenEl,SpecEl)}
       else if (C === $lt139) {
        this.SpecializeImplCaseStatement(GenEl,SpecEl)}
       else if (C === $lt140) {
        this.SpecializeImplBlock(GenEl,SpecEl)}
       else if (C === $lt123) {
        this.SpecializeImplAssign(GenEl,SpecEl)}
       else if (C === $lt124) {
        this.SpecializeImplSimple(GenEl,SpecEl)}
       else if (C === $lt131) {
        this.SpecializeImplForLoop(GenEl,SpecEl)}
       else if (C === $lt132) {
        this.SpecializeImplTry(GenEl,SpecEl)}
       else if ((C === $lt175) || (C === $lt176) || (C === $lt177)) {
        this.SpecializeImplBlock(GenEl,SpecEl)}
       else if (C === $lt133) {
        this.AddExceptOn(SpecEl);
        this.SpecializeImplExceptOn(GenEl,SpecEl);
      } else if (C === $lt134) {
        this.SpecializeImplRaise(GenEl,SpecEl)}
       else if (C === $lt178) {
        this.AddResourceString(SpecEl);
        this.SpecializeResString(GenEl,SpecEl);
      } else if (C === $lt105) {
        this.AddVariable(SpecEl);
        this.SpecializeVariable(GenEl,SpecEl,true);
      } else if (C === $lt117) {
        this.AddVariable(SpecEl);
        this.SpecializeConst(GenEl,SpecEl);
      } else if (C === $lt88) {
        this.AddProperty(SpecEl);
        this.SpecializeProperty(GenEl,SpecEl);
      } else if (C === $lt154) {
        this.SpecializeAttributes(GenEl,SpecEl)}
       else if (C === $lt159) {
        this.SpecializeMethodResolution(GenEl,SpecEl)}
       else if (C === $lt106) {
        this.AddArgument(SpecEl);
        this.SpecializeArgument(GenEl,SpecEl);
      } else if (C === $lt89) {
        this.AddProcedureBody(SpecEl);
        this.SpecializeProcedureBody(GenEl,SpecEl);
      } else if (C === $lt179) {
        this.AddProcedure(SpecEl,null);
        this.SpecializeOperator(GenEl,SpecEl);
      } else if (C.InheritsFrom($lt90)) {
        this.AddProcedure(SpecEl,null);
        this.SpecializeProcedure(GenEl,SpecEl,null);
      } else if (C.InheritsFrom($lt100)) {
        this.AddProcedureType(SpecEl,null);
        this.SpecializeProcedureType(GenEl,SpecEl,null);
      } else if (C === $lt166) {
        this.RaiseMsg(20210101234958,3145,rtl.getResStr($lm5,"sSymbolCannotBeExportedFromALibrary"),[],GenEl)}
       else this.RaiseNotYetImplemented(20190728151215,GenEl,"");
    };
    this.SpecializePasElementProperties = function (GenEl, SpecEl) {
      SpecEl.SourceFilename = GenEl.SourceFilename;
      SpecEl.SourceLinenumber = GenEl.SourceLinenumber;
      SpecEl.SourceEndLinenumber = GenEl.SourceEndLinenumber;
      SpecEl.Visibility = GenEl.Visibility;
      SpecEl.FHints = rtl.refSet(GenEl.FHints);
      SpecEl.FHintMessage = GenEl.FHintMessage;
      SpecEl.FDocComment = GenEl.FDocComment;
    };
    this.SpecializeVariable = function (GenEl, SpecEl, Finish) {
      this.SpecializeElType(GenEl,SpecEl,GenEl.VarType,{p: SpecEl, get: function () {
          return this.p.VarType;
        }, set: function (v) {
          this.p.VarType = v;
        }});
      SpecEl.VarModifiers = rtl.refSet(GenEl.VarModifiers);
      if (GenEl.LibraryName !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.LibraryName,{p: SpecEl, get: function () {
          return this.p.LibraryName;
        }, set: function (v) {
          this.p.LibraryName = v;
        }});
      if (GenEl.ExportName !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.ExportName,{p: SpecEl, get: function () {
          return this.p.ExportName;
        }, set: function (v) {
          this.p.ExportName = v;
        }});
      SpecEl.Modifiers = GenEl.Modifiers;
      if (GenEl.AbsoluteExpr !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.AbsoluteExpr,{p: SpecEl, get: function () {
          return this.p.AbsoluteExpr;
        }, set: function (v) {
          this.p.AbsoluteExpr = v;
        }});
      if (GenEl.Expr !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.Expr,{p: SpecEl, get: function () {
          return this.p.Expr;
        }, set: function (v) {
          this.p.Expr = v;
        }});
      if (Finish) this.FinishVariable(SpecEl);
    };
    this.SpecializeConst = function (GenEl, SpecEl) {
      SpecEl.IsConst = GenEl.IsConst;
      this.SpecializeVariable(GenEl,SpecEl,true);
    };
    this.SpecializeProperty = function (GenEl, SpecEl) {
      this.SpecializeVariable(GenEl,SpecEl,false);
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.IndexExpr,{p: SpecEl, get: function () {
          return this.p.IndexExpr;
        }, set: function (v) {
          this.p.IndexExpr = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.ReadAccessor,{p: SpecEl, get: function () {
          return this.p.ReadAccessor;
        }, set: function (v) {
          this.p.ReadAccessor = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.WriteAccessor,{p: SpecEl, get: function () {
          return this.p.WriteAccessor;
        }, set: function (v) {
          this.p.WriteAccessor = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.DispIDExpr,{p: SpecEl, get: function () {
          return this.p.DispIDExpr;
        }, set: function (v) {
          this.p.DispIDExpr = v;
        }});
      this.SpecializeExprArray(GenEl,SpecEl,GenEl.Implements,{p: SpecEl, get: function () {
          return this.p.Implements;
        }, set: function (v) {
          this.p.Implements = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.StoredAccessor,{p: SpecEl, get: function () {
          return this.p.StoredAccessor;
        }, set: function (v) {
          this.p.StoredAccessor = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.DefaultExpr,{p: SpecEl, get: function () {
          return this.p.DefaultExpr;
        }, set: function (v) {
          this.p.DefaultExpr = v;
        }});
      SpecEl.DispIDReadOnly = GenEl.DispIDReadOnly;
      SpecEl.IsDefault = GenEl.IsDefault;
      SpecEl.IsNodefault = GenEl.IsNodefault;
      this.SpecializeElList(GenEl,SpecEl,GenEl.FArgs,SpecEl.FArgs,false);
      this.FinishProperty(SpecEl);
    };
    this.SpecializeTypeRef = function (GenEl, SpecEl, GenTypeRef) {
      var Result = null;
      var Ref = null;
      if (GenTypeRef.FName === "") this.RaiseNotYetImplemented(20190813213555,GenEl,$lp8(GenTypeRef));
      Ref = this.FindElement(GenTypeRef.FName);
      if (!$lt95.isPrototypeOf(Ref)) this.RaiseNotYetImplemented(20190812021538,GenEl,$lp2(Ref));
      if (SpecEl === null) ;
      Result = Ref;
      return Result;
    };
    this.SpecializeElType = function (GenEl, SpecEl, GenElType, SpecElType) {
      var NewClass = null;
      if (GenElType === null) return;
      if (SpecElType.get() !== null) this.RaiseNotYetImplemented(20190812021617,GenEl,"");
      if ((GenElType.FParent !== GenEl) || (GenElType.$class.ClassType() === $lt104)) {
        GenElType = this.SpecializeTypeRef(GenEl,SpecEl,GenElType);
        SpecElType.set(GenElType);
        return;
      };
      if (SpecElType.get() !== null) this.RaiseNotYetImplemented(20190808222744,SpecEl,$lp2(SpecElType.get()));
      NewClass = GenElType.$class.ClassType();
      SpecElType.set(this.CreateOwnedElement(NewClass,GenElType.FName,SpecEl));
      this.SpecializeElement(GenElType,SpecElType.get());
    };
    this.SpecializeElExpr = function (GenEl, SpecEl, GenElExpr, SpecElExpr) {
      var NewClass = null;
      if (GenElExpr === null) return;
      if (SpecElExpr.get() !== null) this.RaiseNotYetImplemented(20190803220248,SpecEl,$lp2(SpecElExpr.get()));
      if (GenElExpr.FParent !== GenEl) this.RaiseNotYetImplemented(20190809160834,GenEl,"");
      NewClass = GenElExpr.$class.ClassType();
      SpecElExpr.set(this.CreateOwnedElement(NewClass,GenElExpr.FName,SpecEl));
      this.SpecializeElement(GenElExpr,SpecElExpr.get());
    };
    this.SpecializeElImplEl = function (GenEl, SpecEl, GenImplEl, SpecImplEl) {
      var NewClass = null;
      if (GenImplEl === null) return;
      if (GenImplEl.FParent !== GenEl) this.RaiseNotYetImplemented(20190808222638,GenEl,$lp2(GenImplEl.FParent));
      NewClass = GenImplEl.$class.ClassType();
      SpecImplEl.set(this.CreateOwnedElement(NewClass,GenImplEl.FName,SpecEl));
      this.SpecializeElement(GenImplEl,SpecImplEl.get());
    };
    this.SpecializeElImplAlias = function (GenEl, SpecEl, GenImplAlias, SpecImplAlias) {
      var i = 0;
      if (GenImplAlias === null) return;
      i = GenEl.Elements.IndexOf(GenImplAlias);
      if (i < 0) this.RaiseNotYetImplemented(20190808225239,GenEl,"");
      SpecImplAlias.set(rtl.as(rtl.getObject(SpecEl.Elements.Get(i)),$lt180));
      if (SpecImplAlias.get().$class.ClassType() !== GenImplAlias.$class.ClassType()) this.RaiseNotYetImplemented(20190808231616,GenImplAlias,$lp2(SpecImplAlias.get()));
    };
    this.SpecializeElList = function (GenEl, SpecEl, GenList, SpecList, AllowReferences) {
      var i = 0;
      var GenListItem = null;
      var SpecListItem = null;
      var Ref = null;
      var NewClass = null;
      for (var $l = 0, $end = GenList.FCount - 1; $l <= $end; $l++) {
        i = $l;
        GenListItem = rtl.getObject(GenList.Get(i));
        if (GenListItem.FParent !== GenEl) {
          if (!AllowReferences) this.RaiseNotYetImplemented(20190808212421,GenEl,$lp5(i));
          if (!$lt95.isPrototypeOf(GenListItem)) this.RaiseNotYetImplemented(20190812025715,GenEl,$lp5(i) + " GenListItem=" + $lp2(GenListItem));
          Ref = this.SpecializeTypeRef(GenEl,SpecEl,GenListItem);
          SpecList.Add(Ref);
          continue;
        };
        if (GenListItem.$class.ClassType() === $lt104) this.RaiseNotYetImplemented(20190812233309,GenEl,"");
        NewClass = GenListItem.$class.ClassType();
        SpecListItem = this.CreateOwnedElement(NewClass,GenListItem.FName,SpecEl);
        SpecList.Add(SpecListItem);
        this.SpecializeElement(GenListItem,SpecListItem);
      };
    };
    this.SpecializeProcedure = function (GenEl, SpecEl, SpecializedItem) {
      var GenProcType = null;
      var NewClass = null;
      var SpecProcScope = null;
      var GenProcScope = null;
      var i = 0;
      var j = 0;
      var GenPart = null;
      var SpecPart = null;
      var GenTempl = null;
      var SpecTempl = null;
      var Templates = null;
      var GenBody = null;
      GenProcScope = rtl.as(GenEl.FData,$lt37);
      SpecProcScope = rtl.as(SpecEl.FData,$lt37);
      if (SpecProcScope !== null) {
        if (this.FTopScope !== SpecProcScope) this.RaiseNotYetImplemented(20190920194151,SpecEl,"");
      } else if (SpecializedItem !== null) {
        SpecProcScope = this.PushScope$1(SpecEl,this.FScopeClass_Proc);
        SpecProcScope.SpecializedFromItem = SpecializedItem;
        if (GenProcScope.DeclarationProc !== null) this.RaiseNotYetImplemented(20190920203700,SpecEl,"");
        if (GenProcScope.OverriddenProc !== null) this.RaiseNotYetImplemented(20190920203536,SpecEl,"");
        SpecProcScope.ClassRecScope = GenProcScope.ClassRecScope;
        SpecProcScope.ModeSwitches = rtl.refSet(GenProcScope.ModeSwitches);
        SpecProcScope.BoolSwitches = rtl.refSet(GenProcScope.BoolSwitches);
        Templates = this.GetProcTemplateTypes(GenEl);
        if ((Templates === null) || (Templates.FCount === 0)) this.RaiseNotYetImplemented(20190920183140,SpecEl,"");
        this.AddSpecializedTemplateIdentifiers(Templates,SpecializedItem,SpecProcScope,true);
      } else this.RaiseNotYetImplemented(20190922153918,SpecEl,"");
      SpecProcScope.Flags = rtl.includeSet(SpecProcScope.Flags,1);
      if (GenEl.PublicName !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.PublicName,{p: SpecEl, get: function () {
          return this.p.PublicName;
        }, set: function (v) {
          this.p.PublicName = v;
        }});
      if (GenEl.LibrarySymbolName !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.LibrarySymbolName,{p: SpecEl, get: function () {
          return this.p.LibrarySymbolName;
        }, set: function (v) {
          this.p.LibrarySymbolName = v;
        }});
      if (GenEl.LibraryExpr !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.LibraryExpr,{p: SpecEl, get: function () {
          return this.p.LibraryExpr;
        }, set: function (v) {
          this.p.LibraryExpr = v;
        }});
      if (GenEl.DispIDExpr !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.DispIDExpr,{p: SpecEl, get: function () {
          return this.p.DispIDExpr;
        }, set: function (v) {
          this.p.DispIDExpr = v;
        }});
      if (GenEl.MessageExpr !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.MessageExpr,{p: SpecEl, get: function () {
          return this.p.MessageExpr;
        }, set: function (v) {
          this.p.MessageExpr = v;
        }});
      SpecEl.FMessageName = GenEl.FMessageName;
      SpecEl.FMessageType = GenEl.FMessageType;
      SpecEl.AliasName = GenEl.AliasName;
      SpecEl.FModifiers = rtl.refSet(GenEl.FModifiers);
      if (GenEl.NameParts !== null) {
        if (SpecEl.NameParts !== null) this.RaiseNotYetImplemented(20190818125620,SpecEl,"");
        SpecEl.NameParts = $lt85.$create("Create");
        for (var $l = 0, $end = GenEl.NameParts.FCount - 1; $l <= $end; $l++) {
          i = $l;
          GenPart = rtl.getObject(GenEl.NameParts.Get(i));
          SpecPart = $lt181.$create("Create");
          SpecEl.NameParts.Add(SpecPart);
          SpecPart.Name = GenPart.Name;
          if (GenPart.Templates !== null) {
            if ((SpecializedItem !== null) && (i === (GenEl.NameParts.FCount - 1))) {
              continue;
            };
            SpecPart.Templates = $lt85.$create("Create");
            for (var $l1 = 0, $end1 = GenPart.Templates.FCount - 1; $l1 <= $end1; $l1++) {
              j = $l1;
              GenTempl = rtl.getObject(GenPart.Templates.Get(j));
              if (GenTempl.FParent !== GenEl) this.RaiseNotYetImplemented(20190818130001,GenEl,$lp5(i) + "," + $lp5(j) + ":" + GenTempl.FName + " GenParent=" + $lp2(GenTempl.FParent) + " GenEl=" + $lp2(GenEl));
              NewClass = GenTempl.$class.ClassType();
              SpecTempl = this.CreateOwnedElement(NewClass,GenTempl.FName,SpecEl);
              SpecPart.Templates.Add(SpecTempl);
              this.SpecializeElement(GenTempl,SpecTempl);
            };
          };
        };
      };
      if (GenEl.ProcType !== null) {
        GenProcType = GenEl.ProcType;
        if (GenProcType.FParent !== GenEl) {
          this.RaiseNotYetImplemented(20190803212426,GenEl,$lp8(GenProcType.FParent));
        };
        NewClass = GenProcType.$class.ClassType();
        SpecEl.ProcType = this.CreateOwnedElement(NewClass,GenProcType.FName,SpecEl);
        this.SpecializeElement(GenProcType,SpecEl.ProcType);
      };
      SpecProcScope.GenericStep = 1;
      if (GenEl.Body !== null) {
        if (SpecializedItem !== null) SpecializedItem.Step = 3;
        GenBody = GenEl.Body;
        if (GenBody.FParent !== GenEl) this.RaiseNotYetImplemented(20190804183308,GenEl,$lp2(GenBody.FParent));
        if (SpecEl.Body !== null) this.RaiseNotYetImplemented(20190920211853,SpecEl,"");
        NewClass = GenBody.$class.ClassType();
        SpecEl.Body = this.CreateOwnedElement(NewClass,GenBody.FName,SpecEl);
        this.SpecializeElement(GenBody,SpecEl.Body);
        this.FinishProcedure(SpecEl);
      } else if (SpecializedItem === null) {
        this.FinishProcedure(SpecEl)}
       else {
        SpecializedItem.Step = 2;
        if (this.FTopScope !== SpecProcScope) this.RaiseNotYetImplemented(20190920190400,SpecEl,"");
        this.PopScope();
      };
    };
    this.SpecializeOperator = function (GenEl, SpecEl) {
      SpecEl.FOperatorType = GenEl.FOperatorType;
      SpecEl.FTokenBased = GenEl.FTokenBased;
      this.SpecializeProcedure(GenEl,SpecEl,null);
    };
    this.SpecializeProcedureType = function (GenEl, SpecEl, SpecializedItem) {
      var GenResultEl = null;
      var NewResultEl = null;
      var NewClass = null;
      var i = 0;
      var SpecScope = null;
      if (GenEl.GenericTemplateTypes !== null) {
        SpecScope = this.PushScope$1(SpecEl,this.FScopeClass_ProcType);
        if (SpecializedItem !== null) {
          SpecScope.SpecializedFromItem = SpecializedItem;
          this.AddSpecializedTemplateIdentifiers(GenEl.GenericTemplateTypes,SpecializedItem,SpecScope,true);
        } else {
          this.RaiseNotYetImplemented(20190813194550,GenEl,"");
        };
      };
      this.SpecializeElList(GenEl,SpecEl,GenEl.Args,SpecEl.Args,false);
      for (var $l = 0, $end = SpecEl.Args.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.FinishArgument(rtl.getObject(SpecEl.Args.Get(i)));
      };
      this.SpecializeElType(GenEl,SpecEl,GenEl.VarArgsType,{p: SpecEl, get: function () {
          return this.p.VarArgsType;
        }, set: function (v) {
          this.p.VarArgsType = v;
        }});
      SpecEl.CallingConvention = GenEl.CallingConvention;
      SpecEl.Modifiers = rtl.refSet(GenEl.Modifiers);
      if ($lt101.isPrototypeOf(SpecEl)) {
        GenResultEl = GenEl.ResultEl;
        if (GenResultEl !== null) {
          if (GenResultEl.FParent !== GenEl) this.RaiseNotYetImplemented(20190803212935,GenEl,$lp2(GenResultEl.FParent));
          NewClass = GenResultEl.$class.ClassType();
          NewResultEl = this.CreateOwnedElement(NewClass,GenResultEl.FName,SpecEl);
          SpecEl.ResultEl = NewResultEl;
          this.AddFunctionResult(NewResultEl);
          this.SpecializeElType(GenResultEl,NewResultEl,GenResultEl.ResultType,{p: NewResultEl, get: function () {
              return this.p.ResultType;
            }, set: function (v) {
              this.p.ResultType = v;
            }});
        };
      };
      this.FinishProcedureType(SpecEl);
      if (SpecializedItem !== null) SpecializedItem.Step = 4;
    };
    this.SpecializeProcedureBody = function (GenEl, SpecEl) {
      var GenBody = null;
      var NewBody = null;
      var NewClass = null;
      this.SpecializeDeclarations(GenEl,SpecEl);
      this.FinishTypeSection(SpecEl);
      if (GenEl.Body !== null) {
        GenBody = GenEl.Body;
        if (GenBody.FParent !== GenEl) this.RaiseNotYetImplemented(20190804184934,GenBody,"");
        NewClass = GenBody.$class.ClassType();
        NewBody = this.CreateOwnedElement(NewClass,GenBody.FName,SpecEl);
        SpecEl.Body = NewBody;
        this.SpecializeElement(GenBody,NewBody);
      };
    };
    this.SpecializeDeclarations = function (GenEl, SpecEl) {
      var i = 0;
      var GenDecl = null;
      var NewDecl = null;
      var NewClass = null;
      for (var $l = 0, $end = GenEl.Declarations.FCount - 1; $l <= $end; $l++) {
        i = $l;
        GenDecl = rtl.getObject(GenEl.Declarations.Get(i));
        if (GenDecl.FParent !== GenEl) this.RaiseNotYetImplemented(20190806091336,GenEl,$lp2(GenDecl));
        NewClass = GenDecl.$class.ClassType();
        NewDecl = this.CreateOwnedElement(NewClass,GenDecl.FName,SpecEl);
        SpecEl.Declarations.Add(NewDecl);
        if (NewClass === $lt154) {
          SpecEl.Attributes.Add(NewDecl)}
         else if ((NewClass === $lt94) || (NewClass === $lt98)) {
          SpecEl.Classes.Add(NewDecl)}
         else if (NewClass === $lt117) {
          SpecEl.Consts.Add(NewDecl)}
         else if (NewClass === $lt166) {
          SpecEl.ExportSymbols.Add(NewDecl)}
         else if (NewClass.InheritsFrom($lt90)) {
          SpecEl.Functions.Add(NewDecl)}
         else if (NewClass === $lt88) {
          SpecEl.Properties.Add(NewDecl)}
         else if (NewClass === $lt178) {
          SpecEl.ResStrings.Add(NewDecl)}
         else if (NewClass.InheritsFrom($lt95)) {
          SpecEl.Types.Add(NewDecl)}
         else if (NewClass === $lt105) {
          SpecEl.Variables.Add(NewDecl)}
         else this.RaiseNotYetImplemented(20190804184718,GenDecl,"");
        this.SpecializeElement(GenDecl,NewDecl);
      };
    };
    this.SpecializeSpecializeType = function (GenEl, SpecEl) {
      var GenDestType = null;
      var Ref = null;
      GenDestType = GenEl.DestType;
      if (GenDestType === null) this.RaiseNotYetImplemented(20190812022211,GenEl,"");
      if (GenDestType.FParent === GenEl) this.RaiseNotYetImplemented(20190812022251,GenEl,"");
      Ref = this.FindElementFor(GenDestType.FName,GenEl.FParent,GenEl.Params.FCount);
      if (!$lt93.isPrototypeOf(Ref)) this.RaiseNotYetImplemented(20190812022359,GenEl,$lp2(Ref));
      SpecEl.DestType = Ref;
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Expr,{p: SpecEl, get: function () {
          return this.p.Expr;
        }, set: function (v) {
          this.p.Expr = v;
        }});
      this.SpecializeElList(GenEl,SpecEl,GenEl.Params,SpecEl.Params,true);
      if (GenEl.SubType !== null) {
        this.PushParserSpecializeType(SpecEl);
        this.SpecializeElType(GenEl,SpecEl,GenEl.SubType,{p: SpecEl, get: function () {
            return this.p.SubType;
          }, set: function (v) {
            this.p.SubType = v;
          }});
        this.PopScope();
      };
      this.FinishSpecializeType(SpecEl);
    };
    this.SpecializeGenericTemplateType = function (GenEl, SpecEl) {
      var GenConstraints = [];
      var SpecConstraints = [];
      var i = 0;
      var ConEl = null;
      GenConstraints = GenEl.Constraints;
      if (rtl.length(SpecEl.Constraints) > 0) this.RaiseNotYetImplemented(20190914070209,GenEl,"");
      SpecEl.Constraints = rtl.arraySetLength(SpecEl.Constraints,null,rtl.length(GenConstraints));
      SpecConstraints = SpecEl.Constraints;
      for (var $l = 0, $end = rtl.length(SpecConstraints) - 1; $l <= $end; $l++) {
        i = $l;
        SpecConstraints[i] = null;
      };
      for (var $l1 = 0, $end1 = rtl.length(GenConstraints) - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        ConEl = GenConstraints[i];
        if ($lt153.isPrototypeOf(ConEl)) {
          this.SpecializeElExpr(GenEl,SpecEl,ConEl,{a: i, p: SpecConstraints, get: function () {
              return this.p[this.a];
            }, set: function (v) {
              this.p[this.a] = v;
            }})}
         else if ($lt95.isPrototypeOf(ConEl)) {
          this.SpecializeElType(GenEl,SpecEl,ConEl,{a: i, p: SpecConstraints, get: function () {
              return this.p[this.a];
            }, set: function (v) {
              this.p[this.a] = v;
            }})}
         else this.RaiseNotYetImplemented(20190914070522,GenEl,$lp5(i) + " " + $lp2(ConEl));
      };
    };
    this.SpecializeArgument = function (GenEl, SpecEl) {
      SpecEl.Access = GenEl.Access;
      this.SpecializeElType(GenEl,SpecEl,GenEl.ArgType,{p: SpecEl, get: function () {
          return this.p.ArgType;
        }, set: function (v) {
          this.p.ArgType = v;
        }});
      if (GenEl.ValueExpr !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.ValueExpr,{p: SpecEl, get: function () {
          return this.p.ValueExpr;
        }, set: function (v) {
          this.p.ValueExpr = v;
        }});
    };
    this.SpecializeImplBlock = function (GenEl, SpecEl) {
      var i = 0;
      var GenImpl = null;
      var NewImpl = null;
      var NewClass = null;
      for (var $l = 0, $end = GenEl.Elements.FCount - 1; $l <= $end; $l++) {
        i = $l;
        GenImpl = rtl.getObject(GenEl.Elements.Get(i));
        if (GenImpl.FParent !== GenEl) this.RaiseNotYetImplemented(20190806092151,GenEl,this.GetElementSourcePosStr(GenImpl));
        NewClass = GenImpl.$class.ClassType();
        NewImpl = this.CreateOwnedElement(NewClass,GenImpl.FName,SpecEl);
        SpecEl.Elements.Add(NewImpl);
        this.SpecializeElement(GenImpl,NewImpl);
      };
    };
    this.SpecializeImplAsmStatement = function (GenEl, SpecEl) {
      this.SpecializeImplBlock(GenEl,SpecEl);
      SpecEl.FTokens.Assign(GenEl.FTokens);
    };
    this.SpecializeImplRepeatUntil = function (GenEl, SpecEl) {
      this.SpecializeImplBlock(GenEl,SpecEl);
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.ConditionExpr,{p: SpecEl, get: function () {
          return this.p.ConditionExpr;
        }, set: function (v) {
          this.p.ConditionExpr = v;
        }});
    };
    this.SpecializeImplIfElse = function (GenEl, SpecEl) {
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.ConditionExpr,{p: SpecEl, get: function () {
          return this.p.ConditionExpr;
        }, set: function (v) {
          this.p.ConditionExpr = v;
        }});
      this.SpecializeElImplEl(GenEl,SpecEl,GenEl.IfBranch,{p: SpecEl, get: function () {
          return this.p.IfBranch;
        }, set: function (v) {
          this.p.IfBranch = v;
        }});
      this.SpecializeElImplEl(GenEl,SpecEl,GenEl.ElseBranch,{p: SpecEl, get: function () {
          return this.p.ElseBranch;
        }, set: function (v) {
          this.p.ElseBranch = v;
        }});
    };
    this.SpecializeImplWhileDo = function (GenEl, SpecEl) {
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.ConditionExpr,{p: SpecEl, get: function () {
          return this.p.ConditionExpr;
        }, set: function (v) {
          this.p.ConditionExpr = v;
        }});
      this.SpecializeElImplEl(GenEl,SpecEl,GenEl.Body,{p: SpecEl, get: function () {
          return this.p.Body;
        }, set: function (v) {
          this.p.Body = v;
        }});
    };
    this.SpecializeImplWithDo = function (GenEl, SpecEl) {
      var i = 0;
      var GenExpr = null;
      var SpecExpr = null;
      var NewClass = null;
      if (SpecEl.FData !== null) this.RaiseNotYetImplemented(20200530201007,GenEl,$lp2(SpecEl.FData));
      this.PushScope$1(SpecEl,$lt42);
      for (var $l = 0, $end = GenEl.Expressions.FCount - 1; $l <= $end; $l++) {
        i = $l;
        GenExpr = rtl.getObject(GenEl.Expressions.Get(i));
        if (GenExpr.FParent !== GenEl) this.RaiseNotYetImplemented(20190808224343,GenEl,$lp5(i));
        NewClass = GenExpr.$class.ClassType();
        SpecExpr = this.CreateOwnedElement(NewClass,GenExpr.FName,SpecEl);
        SpecEl.Expressions.Add(SpecExpr);
        this.SpecializeElement(GenExpr,SpecExpr);
        this.BeginScope(8,SpecExpr);
      };
      this.SpecializeElImplEl(GenEl,SpecEl,GenEl.Body,{p: SpecEl, get: function () {
          return this.p.Body;
        }, set: function (v) {
          this.p.Body = v;
        }});
      this.FinishWithDo(SpecEl);
    };
    this.SpecializeImplCaseOf = function (GenEl, SpecEl) {
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.CaseExpr,{p: SpecEl, get: function () {
          return this.p.CaseExpr;
        }, set: function (v) {
          this.p.CaseExpr = v;
        }});
      this.SpecializeImplBlock(GenEl,SpecEl);
      if (GenEl.ElseBranch !== null) this.SpecializeElImplAlias(GenEl,SpecEl,GenEl.ElseBranch,{p: SpecEl, get: function () {
          return this.p.ElseBranch;
        }, set: function (v) {
          this.p.ElseBranch = v;
        }});
    };
    this.SpecializeImplCaseStatement = function (GenEl, SpecEl) {
      this.SpecializeElList(GenEl,SpecEl,GenEl.Expressions,SpecEl.Expressions,false);
      this.SpecializeElImplEl(GenEl,SpecEl,GenEl.Body,{p: SpecEl, get: function () {
          return this.p.Body;
        }, set: function (v) {
          this.p.Body = v;
        }});
    };
    this.SpecializeImplAssign = function (GenEl, SpecEl) {
      if (GenEl.Elements.FCount > 0) this.RaiseNotYetImplemented(20190808142935,GenEl,"");
      SpecEl.Kind = GenEl.Kind;
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Left,{p: SpecEl, get: function () {
          return this.p.Left;
        }, set: function (v) {
          this.p.Left = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Right,{p: SpecEl, get: function () {
          return this.p.Right;
        }, set: function (v) {
          this.p.Right = v;
        }});
    };
    this.SpecializeImplSimple = function (GenEl, SpecEl) {
      if (GenEl.Elements.FCount > 0) this.RaiseNotYetImplemented(20190808142935,GenEl,"");
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Expr,{p: SpecEl, get: function () {
          return this.p.Expr;
        }, set: function (v) {
          this.p.Expr = v;
        }});
    };
    this.SpecializeImplForLoop = function (GenEl, SpecEl) {
      var i = 0;
      var GenImpl = null;
      var NewImpl = null;
      var NewClass = null;
      if (GenEl.Variable !== null) this.RaiseNotYetImplemented(20190808142627,GenEl,"");
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.VariableName,{p: SpecEl, get: function () {
          return this.p.VariableName;
        }, set: function (v) {
          this.p.VariableName = v;
        }});
      SpecEl.LoopType = GenEl.LoopType;
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.StartExpr,{p: SpecEl, get: function () {
          return this.p.StartExpr;
        }, set: function (v) {
          this.p.StartExpr = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.EndExpr,{p: SpecEl, get: function () {
          return this.p.EndExpr;
        }, set: function (v) {
          this.p.EndExpr = v;
        }});
      this.FinishForLoopHeader(SpecEl);
      for (var $l = 0, $end = GenEl.Elements.FCount - 1; $l <= $end; $l++) {
        i = $l;
        GenImpl = rtl.getObject(GenEl.Elements.Get(i));
        if (GenImpl.FParent !== GenEl) this.RaiseNotYetImplemented(20190806092151,GenEl,this.GetElementSourcePosStr(GenImpl));
        NewClass = GenImpl.$class.ClassType();
        NewImpl = this.CreateOwnedElement(NewClass,GenImpl.FName,SpecEl);
        SpecEl.AddElement(NewImpl);
        this.SpecializeElement(GenImpl,NewImpl);
      };
    };
    this.SpecializeImplTry = function (GenEl, SpecEl) {
      this.SpecializeImplBlock(GenEl,SpecEl);
      if (GenEl.FinallyExcept !== null) this.SpecializeElImplEl(GenEl,SpecEl,GenEl.FinallyExcept,{p: SpecEl, get: function () {
          return this.p.FinallyExcept;
        }, set: function (v) {
          this.p.FinallyExcept = v;
        }});
      if (GenEl.ElseBranch !== null) this.SpecializeElImplEl(GenEl,SpecEl,GenEl.ElseBranch,{p: SpecEl, get: function () {
          return this.p.ElseBranch;
        }, set: function (v) {
          this.p.ElseBranch = v;
        }});
    };
    this.SpecializeImplExceptOn = function (GenEl, SpecEl) {
      var GenVar = null;
      var NewClass = null;
      GenVar = GenEl.VarEl;
      if (GenVar !== null) {
        if (GenVar.FParent !== GenEl) this.RaiseNotYetImplemented(20190808232327,GenEl,"");
        NewClass = GenVar.$class.ClassType();
        SpecEl.VarEl = this.CreateOwnedElement(NewClass,GenVar.FName,SpecEl);
        this.SpecializeElement(GenVar,SpecEl.VarEl);
        if (GenVar.VarType !== GenEl.TypeEl) this.RaiseNotYetImplemented(20190808232601,GenEl,"");
        SpecEl.TypeEl = SpecEl.VarEl.VarType;
      } else this.SpecializeElType(GenEl,SpecEl,GenEl.TypeEl,{p: SpecEl, get: function () {
          return this.p.TypeEl;
        }, set: function (v) {
          this.p.TypeEl = v;
        }});
      this.FinishExceptOnExpr();
      this.SpecializeElImplEl(GenEl,SpecEl,GenEl.Body,{p: SpecEl, get: function () {
          return this.p.Body;
        }, set: function (v) {
          this.p.Body = v;
        }});
      this.FinishExceptOnStatement();
    };
    this.SpecializeImplRaise = function (GenEl, SpecEl) {
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.ExceptObject,{p: SpecEl, get: function () {
          return this.p.ExceptObject;
        }, set: function (v) {
          this.p.ExceptObject = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.ExceptAddr,{p: SpecEl, get: function () {
          return this.p.ExceptAddr;
        }, set: function (v) {
          this.p.ExceptAddr = v;
        }});
    };
    this.SpecializeExpr = function (GenEl, SpecEl) {
      SpecEl.Kind = GenEl.Kind;
      SpecEl.OpCode = GenEl.OpCode;
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Format1,{p: SpecEl, get: function () {
          return this.p.Format1;
        }, set: function (v) {
          this.p.Format1 = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Format2,{p: SpecEl, get: function () {
          return this.p.Format2;
        }, set: function (v) {
          this.p.Format2 = v;
        }});
    };
    this.SpecializeExprArray = function (GenEl, SpecEl, GenArray, SpecArray) {
      var i = 0;
      if (rtl.length(SpecArray.get()) > 0) this.RaiseNotYetImplemented(20190808205855,GenEl,"");
      SpecArray.set(rtl.arraySetLength(SpecArray.get(),null,rtl.length(GenArray)));
      for (var $l = 0, $end = rtl.length(SpecArray.get()) - 1; $l <= $end; $l++) {
        i = $l;
        SpecArray.get()[i] = null;
      };
      for (var $l1 = 0, $end1 = rtl.length(GenArray) - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        this.SpecializeElExpr(GenEl,SpecEl,GenArray[i],{a: i, p: SpecArray.get(), get: function () {
            return this.p[this.a];
          }, set: function (v) {
            this.p[this.a] = v;
          }});
      };
    };
    this.SpecializePrimitiveExpr = function (GenEl, SpecEl) {
      this.SpecializeExpr(GenEl,SpecEl);
      SpecEl.Value = GenEl.Value;
    };
    this.SpecializeUnaryExpr = function (GenEl, SpecEl) {
      this.SpecializeExpr(GenEl,SpecEl);
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Operand,{p: SpecEl, get: function () {
          return this.p.Operand;
        }, set: function (v) {
          this.p.Operand = v;
        }});
    };
    this.SpecializeBinaryExpr = function (GenEl, SpecEl) {
      this.SpecializeExpr(GenEl,SpecEl);
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Left,{p: SpecEl, get: function () {
          return this.p.Left;
        }, set: function (v) {
          this.p.Left = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Right,{p: SpecEl, get: function () {
          return this.p.Right;
        }, set: function (v) {
          this.p.Right = v;
        }});
    };
    this.SpecializeBoolConstExpr = function (GenEl, SpecEl) {
      this.SpecializeExpr(GenEl,SpecEl);
      SpecEl.Value = GenEl.Value;
    };
    this.SpecializeParamsExpr = function (GenEl, SpecEl) {
      this.SpecializeExpr(GenEl,SpecEl);
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Value,{p: SpecEl, get: function () {
          return this.p.Value;
        }, set: function (v) {
          this.p.Value = v;
        }});
      this.SpecializeExprArray(GenEl,SpecEl,GenEl.Params,{p: SpecEl, get: function () {
          return this.p.Params;
        }, set: function (v) {
          this.p.Params = v;
        }});
    };
    this.SpecializeRecordValues = function (GenEl, SpecEl) {
      var GenField = $lt182.$new();
      var i = 0;
      var SpecFieldP = null;
      this.SpecializeExpr(GenEl,SpecEl);
      SpecEl.Fields = rtl.arraySetLength(SpecEl.Fields,$lt182,rtl.length(GenEl.Fields));
      for (var $l = 0, $end = rtl.length(SpecEl.Fields) - 1; $l <= $end; $l++) {
        i = $l;
        var $with = SpecEl.Fields[i];
        $with.NameExp = null;
        $with.ValueExp = null;
      };
      for (var $l1 = 0, $end1 = rtl.length(GenEl.Fields) - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        GenField.$assign(GenEl.Fields[i]);
        if (GenField.NameExp.FParent !== GenEl) this.RaiseNotYetImplemented(20190808205128,GenEl,"");
        if (GenField.ValueExp.FParent !== GenEl) this.RaiseNotYetImplemented(20190808205138,GenEl,"");
        SpecFieldP = SpecEl.Fields[i];
        this.SpecializeElExpr(GenEl,SpecEl,GenField.NameExp,{p: SpecFieldP, get: function () {
            return this.p.NameExp;
          }, set: function (v) {
            this.p.NameExp = v;
          }});
        this.SpecializeElExpr(GenEl,SpecEl,GenField.ValueExp,{p: SpecFieldP, get: function () {
            return this.p.ValueExp;
          }, set: function (v) {
            this.p.ValueExp = v;
          }});
      };
    };
    this.SpecializeArrayValues = function (GenEl, SpecEl) {
      this.SpecializeExpr(GenEl,SpecEl);
      this.SpecializeExprArray(GenEl,SpecEl,GenEl.Values,{p: SpecEl, get: function () {
          return this.p.Values;
        }, set: function (v) {
          this.p.Values = v;
        }});
    };
    this.SpecializeInlineSpecializeExpr = function (GenEl, SpecEl) {
      this.SpecializeExpr(GenEl,SpecEl);
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.NameExpr,{p: SpecEl, get: function () {
          return this.p.NameExpr;
        }, set: function (v) {
          this.p.NameExpr = v;
        }});
      this.SpecializeElList(GenEl,SpecEl,GenEl.Params,SpecEl.Params,true);
    };
    this.SpecializeProcedureExpr = function (GenEl, SpecEl) {
      var GenProc = null;
      var NewClass = null;
      this.SpecializeExpr(GenEl,SpecEl);
      GenProc = GenEl.Proc;
      if (GenProc === null) this.RaiseNotYetImplemented(20190808221018,GenEl,"");
      if (!$lt163.isPrototypeOf(GenProc)) this.RaiseNotYetImplemented(20210331224052,GenEl,"");
      if (GenProc.FParent !== GenEl) this.RaiseNotYetImplemented(20210331223856,GenEl,"");
      NewClass = GenProc.$class.ClassType();
      SpecEl.Proc = this.CreateOwnedElement(NewClass,GenProc.FName,SpecEl);
      this.SpecializeElement(GenProc,SpecEl.Proc);
    };
    this.SpecializeResString = function (GenEl, SpecEl) {
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Expr,{p: SpecEl, get: function () {
          return this.p.Expr;
        }, set: function (v) {
          this.p.Expr = v;
        }});
      this.FinishResourcestring(SpecEl);
    };
    this.SpecializeAliasType = function (GenEl, SpecEl) {
      this.SpecializeElType(GenEl,SpecEl,GenEl.DestType,{p: SpecEl, get: function () {
          return this.p.DestType;
        }, set: function (v) {
          this.p.DestType = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Expr,{p: SpecEl, get: function () {
          return this.p.Expr;
        }, set: function (v) {
          this.p.Expr = v;
        }});
      this.FinishTypeDef(SpecEl);
    };
    this.SpecializePointerType = function (GenEl, SpecEl) {
      this.SpecializeElType(GenEl,SpecEl,GenEl.DestType,{p: SpecEl, get: function () {
          return this.p.DestType;
        }, set: function (v) {
          this.p.DestType = v;
        }});
      this.FinishPointerType(SpecEl);
    };
    this.SpecializeRangeType = function (GenEl, SpecEl) {
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.RangeExpr,{p: SpecEl, get: function () {
          return this.p.RangeExpr;
        }, set: function (v) {
          this.p.RangeExpr = v;
        }});
      this.FinishRangeType(SpecEl);
    };
    this.SpecializeArrayType = function (GenEl, SpecEl, SpecializedItem) {
      var SpecScope = null;
      SpecEl.IndexRange = GenEl.IndexRange;
      SpecEl.PackMode = GenEl.PackMode;
      if (GenEl.GenericTemplateTypes !== null) {
        SpecScope = this.PushScope$1(SpecEl,this.FScopeClass_Array);
        if (SpecializedItem !== null) {
          SpecScope.SpecializedFromItem = SpecializedItem;
          this.AddSpecializedTemplateIdentifiers(GenEl.GenericTemplateTypes,SpecializedItem,SpecScope,true);
        } else {
          this.RaiseNotYetImplemented(20190812225218,GenEl,"");
        };
      };
      this.SpecializeExprArray(GenEl,SpecEl,GenEl.Ranges,{p: SpecEl, get: function () {
          return this.p.Ranges;
        }, set: function (v) {
          this.p.Ranges = v;
        }});
      this.SpecializeElType(GenEl,SpecEl,GenEl.ElType,{p: SpecEl, get: function () {
          return this.p.ElType;
        }, set: function (v) {
          this.p.ElType = v;
        }});
      this.FinishArrayType(SpecEl);
      if (SpecializedItem !== null) SpecializedItem.Step = 4;
    };
    this.SpecializeRecordType = function (GenEl, SpecEl, SpecializedItem) {
      var SpecScope = null;
      SpecEl.PackMode = GenEl.PackMode;
      SpecEl.RTTIVisibility.$assign(GenEl.RTTIVisibility);
      if (SpecializedItem !== null) {
        if (SpecEl.FData !== null) this.RaiseNotYetImplemented(20190921204740,SpecEl,"");
        SpecScope = this.PushScope$1(SpecEl,this.FScopeClass_Record);
        SpecScope.VisibilityContext = SpecEl;
        SpecScope.SpecializedFromItem = SpecializedItem;
        this.AddSpecializedTemplateIdentifiers(GenEl.GenericTemplateTypes,SpecializedItem,SpecScope,true);
        if (!(3 in this.FCurrentParser.GetCurrentModeSwitches())) {
          SpecScope.AddIdentifier(GenEl.FName,SpecEl,3);
        };
      } else if (GenEl.GenericTemplateTypes.FCount > 0) {
        if (SpecEl.FData === null) this.RaiseNotYetImplemented(20190815201634,SpecEl,"");
        SpecScope = SpecEl.FData;
        this.RaiseNotYetImplemented(20190815194327,GenEl,"");
      };
      this.SpecializeMembers(GenEl,SpecEl);
      this.FinishRecordType(SpecEl);
      if (SpecializedItem !== null) SpecializedItem.Step = 2;
    };
    this.SpecializeClassType = function (GenEl, SpecEl, SpecializedItem) {
      var HeaderScope = null;
      var TemplType = null;
      var GenericTemplateTypes = null;
      var SpecClassScope = null;
      GenericTemplateTypes = GenEl.GenericTemplateTypes;
      SpecEl.ObjKind = GenEl.ObjKind;
      SpecEl.PackMode = GenEl.PackMode;
      SpecEl.RTTIVisibility.$assign(GenEl.RTTIVisibility);
      if (GenEl.HelperForType !== null) this.RaiseNotYetImplemented(20190730182758,GenEl,"");
      if (GenEl.IsForward) this.RaiseNotYetImplemented(20190730182858,GenEl,"");
      SpecEl.IsExternal = GenEl.IsExternal;
      SpecEl.IsShortDefinition = GenEl.IsShortDefinition;
      if (GenEl.GUIDExpr !== null) this.SpecializeElExpr(GenEl,SpecEl,GenEl.GUIDExpr,{p: SpecEl, get: function () {
          return this.p.GUIDExpr;
        }, set: function (v) {
          this.p.GUIDExpr = v;
        }});
      SpecEl.Modifiers.Assign(GenEl.Modifiers);
      SpecEl.ExternalNameSpace = GenEl.ExternalNameSpace;
      SpecEl.ExternalName = GenEl.ExternalName;
      SpecEl.InterfaceType = GenEl.InterfaceType;
      if (SpecializedItem !== null) {
        HeaderScope = $lt25.$create("Create$1");
        SpecializedItem.HeaderScope = HeaderScope;
        TemplType = rtl.getObject(GenericTemplateTypes.Get(0));
        HeaderScope.SetElement(TemplType);
        this.PushScope(HeaderScope);
        this.AddSpecializedTemplateIdentifiers(GenericTemplateTypes,SpecializedItem,HeaderScope,true);
      } else HeaderScope = null;
      this.SpecializeElType(GenEl,SpecEl,GenEl.AncestorType,{p: SpecEl, get: function () {
          return this.p.AncestorType;
        }, set: function (v) {
          this.p.AncestorType = v;
        }});
      this.SpecializeElList(GenEl,SpecEl,GenEl.Interfaces,SpecEl.Interfaces,true);
      if (HeaderScope !== null) {
        if (this.FTopScope !== HeaderScope) this.RaiseNotYetImplemented(20190813003056,GenEl,"");
        this.PopScope();
        SpecializedItem.HeaderScope = null;
        HeaderScope = rtl.freeLoc(HeaderScope);
      };
      this.FinishAncestors(SpecEl);
      if (GenEl.Interfaces.FCount !== SpecEl.Interfaces.FCount) this.RaiseNotYetImplemented(20200601125556,GenEl,$lp5(GenEl.Interfaces.FCount) + "<>" + $lp5(SpecEl.Interfaces.FCount));
      SpecClassScope = rtl.as($mod.NoNil(SpecEl.FData),$lt34);
      if (SpecClassScope.SpecializedFromItem !== null) this.RaiseNotYetImplemented(20190816215413,SpecEl,"");
      if (SpecializedItem !== null) {
        SpecClassScope.SpecializedFromItem = SpecializedItem;
        this.AddSpecializedTemplateIdentifiers(GenericTemplateTypes,SpecializedItem,SpecClassScope,false);
        if (!(3 in this.FCurrentParser.GetCurrentModeSwitches())) {
          SpecClassScope.AddIdentifier(GenEl.FName,SpecEl,3);
        };
      };
      this.SpecializeMembers(GenEl,SpecEl);
      if (SpecializedItem !== null) SpecializedItem.Step = 2;
      this.FinishClassType(SpecEl);
    };
    this.SpecializeEnumValue = function (GenEl, SpecEl) {
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.Value,{p: SpecEl, get: function () {
          return this.p.Value;
        }, set: function (v) {
          this.p.Value = v;
        }});
    };
    this.SpecializeEnumType = function (GenEl, SpecEl) {
      this.SpecializeElList(GenEl,SpecEl,GenEl.Values,SpecEl.Values,false);
      this.FinishEnumType(SpecEl);
    };
    this.SpecializeSetType = function (GenEl, SpecEl) {
      SpecEl.IsPacked = GenEl.IsPacked;
      this.SpecializeElType(GenEl,SpecEl,GenEl.EnumType,{p: SpecEl, get: function () {
          return this.p.EnumType;
        }, set: function (v) {
          this.p.EnumType = v;
        }});
      this.FinishSetType(SpecEl);
    };
    this.SpecializeVariant = function (GenEl, SpecEl) {
      this.SpecializeElList(GenEl,SpecEl,GenEl.Values,SpecEl.Values,false);
      this.RaiseNotYetImplemented(20190808214218,GenEl,"");
    };
    this.SpecializeStringType = function (GenEl, SpecEl) {
      SpecEl.LengthExpr = GenEl.LengthExpr;
      this.FinishTypeDef(SpecEl);
    };
    this.SpecializeAttributes = function (GenEl, SpecEl) {
      this.SpecializeExprArray(GenEl,SpecEl,GenEl.Calls,{p: SpecEl, get: function () {
          return this.p.Calls;
        }, set: function (v) {
          this.p.Calls = v;
        }});
      this.FinishAttributes(SpecEl);
    };
    this.SpecializeMethodResolution = function (GenEl, SpecEl) {
      SpecEl.ProcClass = GenEl.ProcClass;
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.InterfaceName,{p: SpecEl, get: function () {
          return this.p.InterfaceName;
        }, set: function (v) {
          this.p.InterfaceName = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.InterfaceProc,{p: SpecEl, get: function () {
          return this.p.InterfaceProc;
        }, set: function (v) {
          this.p.InterfaceProc = v;
        }});
      this.SpecializeElExpr(GenEl,SpecEl,GenEl.ImplementationProc,{p: SpecEl, get: function () {
          return this.p.ImplementationProc;
        }, set: function (v) {
          this.p.ImplementationProc = v;
        }});
      this.FinishMethodResolution(SpecEl);
    };
    this.CheckAssignCompatibilityCustom = function (LHS, RHS, ErrorEl, RaiseOnIncompatible, Handled) {
      var Result = 0;
      Result = 2147483647;
      if (LHS.BaseType === 0) ;
      if (RHS.BaseType === 0) ;
      if (ErrorEl === null) ;
      if (RaiseOnIncompatible) ;
      if (Handled.get()) ;
      return Result;
    };
    this.CheckEqualCompatibilityCustomType = function (LHS, RHS, ErrorEl, RaiseOnIncompatible) {
      var Result = 0;
      Result = 2147483647;
      if (LHS.BaseType === RHS.BaseType) ;
      if (ErrorEl === null) ;
      if (RaiseOnIncompatible) ;
      return Result;
    };
    this.BI_Length_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var Ranges = [];
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (ParamResolved.BaseType in $mod.btAllStringAndChars) {
        if (0 in ParamResolved.Flags) Result = 0;
      } else if (ParamResolved.BaseType === 2) {
        if (ParamResolved.LoTypeEl.$class.ClassType() === $lt102) {
          Ranges = ParamResolved.LoTypeEl.Ranges;
          if (rtl.length(Ranges) === 0) {
            if (0 in ParamResolved.Flags) Result = 0;
          } else Result = 0;
        };
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170329160335,1,Param,ParamResolved,"string or dynamic array",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_Length_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      if (Params === null) ;
      $mod.SetResolverIdentifier(ResolvedEl,this.FBaseTypeLength,Proc.Proc,this.FBaseTypes[this.FBaseTypeLength],this.FBaseTypes[this.FBaseTypeLength],rtl.createSet(0));
    };
    this.BI_Length_OnEval = function (Proc, Params, Flags, Evaluated) {
      var Param = null;
      var Expr = null;
      var ParamResolved = $lt59.$new();
      var Ranges = [];
      var IdentEl = null;
      Evaluated.set(null);
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (ParamResolved.BaseType in $mod.btAllStringAndChars) {
        Evaluated.set(this.EvalLengthOfString($lt59.$clone(ParamResolved),Param,rtl.refSet(Flags)))}
       else if (ParamResolved.BaseType === 2) {
        if (ParamResolved.LoTypeEl.$class.ClassType() === $lt102) {
          Ranges = ParamResolved.LoTypeEl.Ranges;
          if (rtl.length(Ranges) === 0) {
            IdentEl = ParamResolved.IdentEl;
            if ($lt105.isPrototypeOf(IdentEl) && $lt153.isPrototypeOf(IdentEl.Expr)) {
              Expr = IdentEl.Expr;
              if ($lt149.isPrototypeOf(Expr)) {
                Evaluated.set($lt169.$create("CreateValue",[rtl.length(Expr.Values)]))}
               else if ($lt145.isPrototypeOf(Expr) && (Expr.Kind === 4)) Evaluated.set($lt169.$create("CreateValue",[rtl.length(Expr.Params)]));
            };
          } else {
            Evaluated.set($lt169.$create("CreateValue",[this.GetRangeLength(Ranges[0])]));
          };
        };
      };
      if (Proc === null) ;
    };
    this.BI_SetLength_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var DimResolved = $lt59.$new();
      var ArgNo = 0;
      var DynArr = null;
      var ElType = null;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,2,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      Result = 2147483647;
      DynArr = null;
      if (this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (ParamResolved.BaseType in $mod.btAllStrings) {
          Result = 0}
         else if (ParamResolved.BaseType === 2) {
          if (this.IsDynArray(ParamResolved.LoTypeEl,true)) {
            Result = 0;
            DynArr = rtl.as($mod.NoNil(ParamResolved.LoTypeEl),$lt102);
          };
        };
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170216152250,1,Param,ParamResolved,"string or dynamic array variable",RaiseOnError);
      ArgNo = 2;
      do {
        Param = Params.Params[ArgNo - 1];
        this.ComputeElement(Param,DimResolved,{},null);
        Result = 2147483647;
        if ((0 in DimResolved.Flags) && (DimResolved.BaseType in $mod.btAllInteger)) Result = 0;
        if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170329160338,ArgNo,Param,DimResolved,"integer",RaiseOnError);
        if ((DynArr === null) || (ArgNo === rtl.length(Params.Params))) break;
        ElType = this.ResolveAliasType(DynArr.ElType,true);
        if (!this.IsDynArray(ElType,true)) break;
        DynArr = rtl.as($mod.NoNil(ElType),$lt102);
        ArgNo += 1;
      } while (!false);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,ArgNo,RaiseOnError,"");
      return Result;
    };
    this.BI_SetLength_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      if (Proc === null) ;
      P = Params.Params;
      if (rtl.length(P) === 0) ;
      this.FinishCallArgAccess(P[0],4);
      this.FinishCallArgAccess(P[1],1);
    };
    this.BI_InExclude_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param0 = null;
      var Param1 = null;
      var Param0Resolved = $lt59.$new();
      var Param1Resolved = $lt59.$new();
      var EnumType = null;
      var C = null;
      var LoTypeEl = null;
      var RgType = null;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,2,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param0 = Params.Params[0];
      this.ComputeElement(Param0,Param0Resolved,rtl.createSet(1),null);
      Param1 = Params.Params[1];
      this.ComputeElement(Param1,Param1Resolved,{},null);
      EnumType = null;
      RgType = null;
      if (rtl.eqSet(rtl.intersectSet(rtl.createSet(0,1),Param0Resolved.Flags),rtl.createSet(0,1)) && (Param0Resolved.IdentEl !== null)) {
        C = Param0Resolved.IdentEl.$class.ClassType();
        if (C.InheritsFrom($lt105) || (C === $lt106) || (C === $lt141)) {
          if (Param0Resolved.BaseType === 34) {
            LoTypeEl = Param0Resolved.LoTypeEl;
            if (LoTypeEl.$class.ClassType() === $lt99) {
              EnumType = LoTypeEl;
              if (!(0 in Param0Resolved.Flags) || (Param0Resolved.LoTypeEl !== EnumType)) {
                if (RaiseOnError) this.RaiseIncompatibleType(20210201225926,3006,$lp6(9,"2"),Param0Resolved.LoTypeEl,EnumType,Param0);
                return 2147483647;
              };
            } else if (LoTypeEl.$class.ClassType() === $lt103) {
              RgType = LoTypeEl;
              this.ComputeElement(RgType.RangeExpr.Left,Param0Resolved,{},null);
              Result = this.CheckAssignResCompatibility(Param0Resolved,Param1Resolved,Param1,RaiseOnError);
            };
          };
        };
      };
      if ((EnumType === null) && (RgType === null)) {
        return this.CheckRaiseTypeArgNo(20170216152301,1,Param0,Param0Resolved,"variable of set of enumtype",RaiseOnError);
      };
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,2,RaiseOnError,"");
      return Result;
    };
    this.BI_InExclude_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      if (Proc === null) ;
      P = Params.Params;
      if (rtl.length(P) === 0) ;
      this.FinishCallArgAccess(P[0],4);
      this.FinishCallArgAccess(P[1],1);
    };
    this.BI_Break_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      if (this.GetLoop(Expr) === null) this.RaiseMsg(20170216152306,3046,rtl.getResStr($lm5,"sMustBeInsideALoop"),$lp6(18,"Break"),Expr);
      if (!$lt145.isPrototypeOf(Expr) || (rtl.length(Expr.Params) === 0)) return 0;
      Params = Expr;
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,0,RaiseOnError,"");
      return Result;
    };
    this.BI_Continue_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      if (this.GetLoop(Expr) === null) this.RaiseMsg(20170216152309,3046,rtl.getResStr($lm5,"sMustBeInsideALoop"),$lp6(18,"Continue"),Expr);
      if (!$lt145.isPrototypeOf(Expr) || (rtl.length(Expr.Params) === 0)) return 0;
      Params = Expr;
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,0,RaiseOnError,"");
      return Result;
    };
    this.BI_Exit_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var ResultResolved = $lt59.$new();
      var i = 0;
      var ProcScope = null;
      var ResultEl = null;
      var Flags = {};
      var CtxProc = null;
      if (!$lt145.isPrototypeOf(Expr) || (rtl.length(Expr.Params) === 0)) return 0;
      Params = Expr;
      Param = Params.Params[0];
      Result = 2147483647;
      i = this.FScopeCount - 1;
      while ((i > 0) && !$lt37.isPrototypeOf(this.GetScopes(i))) i -= 1;
      if (i > 0) {
        ProcScope = this.GetScopes(i);
        if (ProcScope.DeclarationProc !== null) {
          CtxProc = ProcScope.DeclarationProc}
         else CtxProc = ProcScope.FElement;
        if (!$lt101.isPrototypeOf(CtxProc.ProcType)) {
          if (RaiseOnError) this.RaiseMsg(20170216152312,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,"procedure exit"),Params.Params[0]);
          return 2147483647;
        };
        ResultEl = CtxProc.ProcType.ResultEl;
        this.ComputeResultElement(ResultEl,ResultResolved,{},Expr);
      } else {
        $mod.SetResolverTypeExpr(ResultResolved,26,this.FBaseTypes[26],this.FBaseTypes[26],rtl.createSet(0,1));
      };
      Flags = {};
      if (this.IsProcedureType(ResultResolved,true)) Flags = rtl.includeSet(Flags,1);
      this.ComputeElement(Param,ParamResolved,rtl.refSet(Flags),null);
      if (0 in ParamResolved.Flags) Result = this.CheckAssignResCompatibility(ResultResolved,ParamResolved,Param,false);
      if (Result === 2147483647) {
        if (RaiseOnError) this.RaiseIncompatibleTypeRes(20170216152314,3006,$lp6(9,"1"),ParamResolved,ResultResolved,Param);
        return Result;
      };
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_IncDec_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var IncrResolved = $lt59.$new();
      var TypeEl = null;
      var bt = 0;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      Result = 2147483647;
      if (!this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (RaiseOnError) this.RaiseVarExpected(20170216152319,Expr,ParamResolved.IdentEl);
        return Result;
      };
      bt = ParamResolved.BaseType;
      if (bt === 37) bt = ParamResolved.SubType;
      if (bt in $mod.btAllInteger) {
        Result = 0}
       else if (bt === 29) {
        if (this.ElHasBoolSwitch(Expr,28)) Result = 0;
      } else if (bt === 2) {
        TypeEl = ParamResolved.LoTypeEl;
        if ((TypeEl.$class.ClassType() === $lt97) && this.ElHasBoolSwitch(Expr,28)) {
          Result = 0}
         else if (TypeEl.$class.ClassType() === $lt103) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170216152320,1,Param,ParamResolved,"integer",RaiseOnError);
      if (rtl.length(Params.Params) === 1) return Result;
      Param = Params.Params[1];
      this.ComputeElement(Param,IncrResolved,{},null);
      Result = 2147483647;
      if (0 in IncrResolved.Flags) {
        if (IncrResolved.BaseType in $mod.btAllInteger) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170216152322,2,Param,IncrResolved,"integer",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,2,RaiseOnError,"");
      return Result;
    };
    this.BI_IncDec_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      if (Proc === null) ;
      P = Params.Params;
      this.FinishCallArgAccess(P[0],4);
      if (rtl.length(P) > 1) this.FinishCallArgAccess(P[1],1);
    };
    this.BI_Assigned_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var C = null;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(2),null);
      Result = 2147483647;
      if (ParamResolved.BaseType in rtl.createSet(30,29)) {
        Result = 0}
       else if (ParamResolved.BaseType === 2) {
        C = ParamResolved.LoTypeEl.$class.ClassType();
        if ((C === $lt94) || (C === $lt96) || C.InheritsFrom($lt100) || ((C === $lt102) && (rtl.length(ParamResolved.LoTypeEl.Ranges) === 0))) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170216152329,1,Param,ParamResolved,"class or array",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_Assigned_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      $mod.SetResolverIdentifier(ResolvedEl,15,Proc.Proc,this.FBaseTypes[15],this.FBaseTypes[15],rtl.createSet(0));
      if (Params === null) ;
    };
    this.BI_Assigned_OnFinishParamsExpr = function (Proc, Params) {
      var P = null;
      var ResolvedEl = $lt59.$new();
      if (Proc === null) ;
      P = Params.Params[0];
      this.AccessExpr(P,1);
      this.ComputeElement(P,ResolvedEl,rtl.createSet(2,0),null);
    };
    this.BI_Chr_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (0 in ParamResolved.Flags) {
        if (ParamResolved.BaseType in $mod.btAllInteger) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170325185321,1,Param,ParamResolved,"integer",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_Chr_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      $mod.SetResolverIdentifier(ResolvedEl,this.FBaseTypeChar,Proc.Proc,this.FBaseTypes[this.FBaseTypeChar],this.FBaseTypes[this.FBaseTypeChar],rtl.createSet(0));
      if (Params === null) ;
    };
    this.BI_Chr_OnEval = function (Proc, Params, Flags, Evaluated) {
      var Param = null;
      var Value = null;
      Evaluated.set(null);
      Param = Params.Params[0];
      Value = this.Eval(Param,rtl.refSet(Flags),true);
      if (Value === null) return;
      try {
        Evaluated.set(this.fExprEvaluator.ChrValue(Value,Params));
      } finally {
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      if (Proc === null) ;
    };
    this.BI_Ord_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var ResolvedEl = $lt59.$new();
      var TypeEl = null;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (0 in ParamResolved.Flags) {
        if (ParamResolved.BaseType in $mod.btArrayRangeTypes) {
          Result = 0}
         else if ((ParamResolved.BaseType === 2) && $lt99.isPrototypeOf(ParamResolved.LoTypeEl)) {
          Result = 0}
         else if (ParamResolved.BaseType === 37) {
          if (ParamResolved.SubType in $mod.btArrayRangeTypes) {
            Result = 0}
           else if (ParamResolved.SubType === 2) {
            TypeEl = ParamResolved.LoTypeEl;
            if (TypeEl.$class.ClassType() === $lt103) {
              this.ComputeElement(TypeEl.RangeExpr.Left,ResolvedEl,rtl.createSet(3),null);
              if (ResolvedEl.LoTypeEl.$class.ClassType() === $lt99) return 0;
            };
          };
        };
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170216152334,1,Param,ParamResolved,"enum or char",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_Ord_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      $mod.SetResolverIdentifier(ResolvedEl,26,Proc.Proc,this.FBaseTypes[26],this.FBaseTypes[26],rtl.createSet(0));
      if (Params === null) ;
    };
    this.BI_Ord_OnEval = function (Proc, Params, Flags, Evaluated) {
      var Param = null;
      var Value = null;
      Evaluated.set(null);
      Param = Params.Params[0];
      Value = this.Eval(Param,rtl.refSet(Flags),true);
      if (Value === null) return;
      try {
        Evaluated.set(this.fExprEvaluator.OrdValue(Value,Params));
      } finally {
        if (Evaluated.get() !== Value) $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      if (Proc === null) ;
    };
    this.BI_LowHigh_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var C = null;
      var bt = 0;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      bt = ParamResolved.BaseType;
      if (bt in $mod.btAllRanges) {
        Result = 0}
       else if (bt === 34) {
        Result = 0}
       else if (bt in $mod.btAllStrings) {
        Result = 0}
       else if (bt === 2) {
        C = ParamResolved.LoTypeEl.$class.ClassType();
        if ((C === $lt102) || (C === $lt119) || (C === $lt99)) Result = 0;
      };
      if (Result === 2147483647) {
        return this.CheckRaiseTypeArgNo(20170216152338,1,Param,ParamResolved,"ordinal type, array or set",RaiseOnError);
      };
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_LowHigh_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      var ArrayEl = null;
      var Param = null;
      var TypeEl = null;
      Param = Params.Params[0];
      this.ComputeElement(Param,ResolvedEl,{},null);
      if (ResolvedEl.BaseType === 2) {
        TypeEl = ResolvedEl.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt102) {
          ArrayEl = TypeEl;
          if (rtl.length(ArrayEl.Ranges) === 0) {
            $mod.SetResolverIdentifier(ResolvedEl,this.FBaseTypeLength,Proc.Proc,this.FBaseTypes[this.FBaseTypeLength],this.FBaseTypes[this.FBaseTypeLength],rtl.createSet(0))}
           else {
            this.ComputeElement(ArrayEl.Ranges[0],ResolvedEl,rtl.createSet(3),null);
            if (ResolvedEl.BaseType === 37) this.ConvertRangeToElement(ResolvedEl);
          };
        } else if (TypeEl.$class.ClassType() === $lt119) {
          ResolvedEl.LoTypeEl = TypeEl.EnumType;
          ResolvedEl.HiTypeEl = ResolvedEl.LoTypeEl;
        };
      } else if (ResolvedEl.BaseType === 34) {
        ResolvedEl.BaseType = ResolvedEl.SubType;
        ResolvedEl.SubType = 0;
      } else if (ResolvedEl.BaseType in $mod.btAllStrings) {
        $mod.SetResolverIdentifier(ResolvedEl,this.FBaseTypeLength,Proc.Proc,this.FBaseTypes[this.FBaseTypeLength],this.FBaseTypes[this.FBaseTypeLength],rtl.createSet(0));
      };
      ResolvedEl.Flags = rtl.unionSet(rtl.diffSet(ResolvedEl.Flags,rtl.createSet(1)),rtl.createSet(0));
    };
    this.BI_LowHigh_OnEval = function (Proc, Params, Flags, Evaluated) {
      var $Self = this;
      function IsDynArrayConstExpr(IdentEl) {
        var Result = false;
        Result = false;
        if (!$lt105.isPrototypeOf(IdentEl)) return Result;
        if (!$lt153.isPrototypeOf(IdentEl.Expr)) return Result;
        if ((IdentEl.$class.ClassType() === $lt117) && IdentEl.IsConst) return true;
        if ($Self.fExprEvaluator.IsConst(Params)) return true;
        return Result;
      };
      var Param = null;
      var ParamResolved = $lt59.$new();
      var TypeEl = null;
      var ArrayEl = null;
      var Value = null;
      var EnumType = null;
      var aSet = null;
      var bt = 0;
      var Int = 0;
      var MinInt = 0;
      var MaxInt = 0;
      var i = 0;
      var Expr = null;
      Evaluated.set(null);
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      TypeEl = ParamResolved.LoTypeEl;
      if (ParamResolved.BaseType === 2) {
        if (TypeEl.$class.ClassType() === $lt102) {
          ArrayEl = TypeEl;
          if (rtl.length(ArrayEl.Ranges) === 0) {
            if (Proc.BuiltIn === 13) {
              Evaluated.set($lt169.$create("CreateValue",[0]))}
             else if (IsDynArrayConstExpr(ParamResolved.IdentEl)) {
              Expr = ParamResolved.IdentEl.Expr;
              if ($lt149.isPrototypeOf(Expr)) {
                Evaluated.set($lt169.$create("CreateValue",[rtl.length(Expr.Values) - 1]))}
               else if ($lt145.isPrototypeOf(Expr) && (Expr.Kind === 4)) Evaluated.set($lt169.$create("CreateValue",[rtl.length(Expr.Params) - 1]));
              if (Evaluated.get() === null) this.RaiseXExpectedButYFound(20170601191003,"array constant","expression",Params);
            } else return;
          } else {
            Evaluated.set(this.EvalRangeLimit(ArrayEl.Ranges[0],rtl.refSet(Flags),Proc.BuiltIn === 13,Param));
          };
        } else if (TypeEl.$class.ClassType() === $lt119) {
          TypeEl = TypeEl.EnumType;
          if (TypeEl.$class.ClassType() === $lt99) {
            EnumType = TypeEl.EnumType;
            if (Proc.BuiltIn === 13) {
              Evaluated.set($lt168.$create("CreateValue",[0,rtl.getObject(EnumType.Values.Get(0))]))}
             else Evaluated.set($lt168.$create("CreateValue",[EnumType.Values.FCount - 1,rtl.getObject(EnumType.Values.Get(EnumType.Values.FCount - 1))]));
          } else {
            this.RaiseNotYetImplemented(20170601203026,Params,"");
          };
        } else if (TypeEl.$class.ClassType() === $lt99) {
          EnumType = TypeEl;
          if (Proc.BuiltIn === 13) {
            i = 0}
           else i = EnumType.Values.FCount - 1;
          Evaluated.set($lt168.$create("CreateValue",[i,rtl.getObject(EnumType.Values.Get(i))]));
        };
      } else if (ParamResolved.BaseType === 34) {
        Value = this.Eval(Param,rtl.refSet(Flags),true);
        if (Value === null) return;
        var $tmp = Value.Kind;
        if ($tmp === 12) {
          aSet = Value;
          if (rtl.length(aSet.Ranges) === 0) this.RaiseXExpectedButYFound(20170601201637,"ordinal value",Value.AsString(),Param);
          if (Proc.BuiltIn === 13) {
            Int = aSet.RangeStart}
           else Int = aSet.RangeEnd;
          var $tmp1 = aSet.ElKind;
          if ($tmp1 === 1) {
            EnumType = rtl.as(aSet.IdentEl,$lt99);
            Evaluated.set($lt168.$create("CreateValue",[Int,rtl.getObject(EnumType.Values.Get(Int))]));
          } else if ($tmp1 === 2) {
            Evaluated.set($lt169.$create("CreateValue",[Int]))}
           else if ($tmp1 === 3) {
            Evaluated.set($lt173.$create("CreateValue",[String.fromCharCode(Int)]))}
           else if ($tmp1 === 4) if (Int === 0) {
            Evaluated.set($lt172.$create("CreateValue",[false]))}
           else Evaluated.set($lt172.$create("CreateValue",[true]));
        } else {
          this.RaiseXExpectedButYFound(20170601201237,"ordinal value",Value.AsString(),Param);
        };
      } else if ($lt83.isPrototypeOf(TypeEl) && $lt62.isPrototypeOf(TypeEl.FData)) {
        bt = TypeEl.FData.BaseType;
        bt = this.GetActualBaseType(bt);
        if (bt in $mod.btAllBooleans) {
          Evaluated.set($lt172.$create("CreateValue",[Proc.BuiltIn === 14]))}
         else if ((bt in $mod.btAllIntegerNoQWord) && this.GetIntegerRange(bt,{get: function () {
            return MinInt;
          }, set: function (v) {
            MinInt = v;
          }},{get: function () {
            return MaxInt;
          }, set: function (v) {
            MaxInt = v;
          }})) {
          if (Proc.BuiltIn === 13) {
            Evaluated.set($lt169.$create("CreateValue",[MinInt]))}
           else Evaluated.set($lt169.$create("CreateValue",[MaxInt]));
        } else if (bt === 6) {
          if (Proc.BuiltIn === 13) {
            Evaluated.set($lt173.$create("CreateValue",["\x00"]))}
           else Evaluated.set($lt173.$create("CreateValue",["\uFFFF"]));
        } else if (bt in $mod.btAllStrings) {
          if (Proc.BuiltIn === 13) {
            Evaluated.set($lt169.$create("CreateValue",[1]))}
           else Evaluated.set(this.EvalLengthOfString($lt59.$clone(ParamResolved),Param,rtl.refSet(Flags)));
        } else {
          this.RaiseNotYetImplemented(20170602070738,Params,"");
        };
      } else if ($lt103.isPrototypeOf(ParamResolved.LoTypeEl)) {
        Evaluated.set(this.EvalRangeLimit(TypeEl.RangeExpr,rtl.refSet(Flags),Proc.BuiltIn === 13,Param));
      } else if (ParamResolved.BaseType in $mod.btAllStrings) {
        if (Proc.BuiltIn === 13) {
          Evaluated.set($lt169.$create("CreateValue",[1]))}
         else Evaluated.set(this.EvalLengthOfString($lt59.$clone(ParamResolved),Param,rtl.refSet(Flags)));
      } else {
        this.RaiseNotYetImplemented(20170601202353,Params,"");
      };
    };
    this.BI_PredSucc_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (this.CheckIsOrdinal(ParamResolved,Param,false)) Result = 0;
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170216152343,1,Param,ParamResolved,"ordinal",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_PredSucc_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      this.ComputeElement(Params.Params[0],ResolvedEl,{},null);
      ResolvedEl.Flags = rtl.diffSet(ResolvedEl.Flags,rtl.createSet(1));
      if (Proc === null) ;
    };
    this.BI_PredSucc_OnEval = function (Proc, Params, Flags, Evaluated) {
      var Param = null;
      Evaluated.set(null);
      Param = Params.Params[0];
      Evaluated.set(this.Eval(Param,rtl.refSet(Flags),true));
      if (Evaluated.get() === null) return;
      if (Evaluated.get().FElement !== null) Evaluated.set(Evaluated.get().Clone());
      if (Proc.BuiltIn === 15) {
        this.fExprEvaluator.PredValue(Evaluated.get(),Params)}
       else this.fExprEvaluator.SuccValue(Evaluated.get(),Params);
    };
    this.BI_Str_CheckParam = function (IsFunc, Param, ParamResolved, ArgNo, RaiseOnError) {
      var $Self = this;
      var Result = 0;
      function CheckFormat(FormatExpr, Index, ParamResolved) {
        var Result = false;
        var ResolvedEl = $lt59.$new();
        var Ok = false;
        if (FormatExpr === null) return true;
        Result = false;
        Ok = false;
        if (ParamResolved.BaseType in $mod.btAllFloats) {
          Ok = true}
         else Ok = Index < 2;
        if (!Ok) {
          if (RaiseOnError) $Self.RaiseMsg(20170319222319,3044,rtl.getResStr($lm5,"sIllegalExpression"),[],FormatExpr);
          return Result;
        };
        $Self.ComputeElement(FormatExpr,ResolvedEl,{},null);
        if (!(ResolvedEl.BaseType in $mod.btAllInteger)) {
          if (RaiseOnError) $Self.RaiseXExpectedButYFound(20170319221515,"integer",$Self.GetResolverResultDescription(ResolvedEl,true),FormatExpr);
          return Result;
        };
        if (!(0 in ResolvedEl.Flags)) {
          if (RaiseOnError) $Self.RaiseMsg(20170319221755,3038,rtl.getResStr($lm5,"sNotReadable"),[],FormatExpr);
          return Result;
        };
        Result = true;
        return Result;
      };
      var bt = 0;
      var C = null;
      Result = 2147483647;
      bt = ParamResolved.BaseType;
      if (bt === 37) bt = ParamResolved.SubType;
      if (bt in rtl.unionSet(rtl.unionSet($mod.btAllInteger,$mod.btAllBooleans),$mod.btAllFloats)) {
        Result = 0}
       else if (IsFunc && (bt in $mod.btAllStringAndChars)) {
        Result = 0}
       else if (bt === 2) {
        C = ParamResolved.LoTypeEl.$class.ClassType();
        if ((C === $lt99) || (C === $lt103)) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170319220517,ArgNo,Param,ParamResolved,"boolean, integer, enum value",RaiseOnError);
      if (!CheckFormat(Param.Format1,1,ParamResolved)) return 2147483647;
      if (!CheckFormat(Param.Format2,2,ParamResolved)) return 2147483647;
      return Result;
    };
    this.BI_StrProc_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,2,RaiseOnError)) return 2147483647;
      Params = Expr;
      if (this.ParentNeedsExprResult(Params)) {
        if (RaiseOnError) this.RaiseMsg(20170326084331,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"procedure str",18,"function str"),Params);
        return 2147483647;
      };
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = this.BI_Str_CheckParam(false,Param,ParamResolved,1,RaiseOnError);
      if (Result === 2147483647) return Result;
      Param = Params.Params[1];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (ParamResolved.BaseType in $mod.btAllStrings) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170319220806,1,Param,ParamResolved,"string variable",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,2,RaiseOnError,"");
      return Result;
    };
    this.BI_StrProc_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      if (Proc === null) ;
      P = Params.Params;
      if (rtl.length(P) === 0) ;
      this.FinishCallArgAccess(P[0],1);
      this.FinishCallArgAccess(P[1],4);
    };
    this.BI_StrFunc_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var i = 0;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      if (!this.ParentNeedsExprResult(Params)) {
        if (RaiseOnError) this.RaiseMsg(20170326084622,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"function str",18,"procedure str"),Params);
        return 2147483647;
      };
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = Params.Params[i];
        this.ComputeElement(Param,ParamResolved,{},null);
        Result = this.BI_Str_CheckParam(true,Param,ParamResolved,i + 1,RaiseOnError);
        if (Result === 2147483647) return Result;
      };
      Result = 0;
      return Result;
    };
    this.BI_StrFunc_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      $mod.SetResolverIdentifier(ResolvedEl,7,Proc.Proc,this.FBaseTypes[7],this.FBaseTypes[7],rtl.createSet(0));
      if (Params === null) ;
      if (Proc === null) ;
    };
    this.BI_StrFunc_OnEval = function (Proc, Params, Flags, Evaluated) {
      Evaluated.set(this.fExprEvaluator.EvalStrFunc(Params,rtl.refSet(Flags)));
      if (Proc === null) ;
    };
    this.BI_WriteStrProc_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var i = 0;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,2,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (ParamResolved.BaseType in $mod.btAllStrings) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20180527190304,1,Param,ParamResolved,"string variable",RaiseOnError);
      for (var $l = 1, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = Params.Params[i];
        this.ComputeElement(Param,ParamResolved,{},null);
        Result = this.BI_Str_CheckParam(false,Param,ParamResolved,i,RaiseOnError);
        if (Result === 2147483647) return Result;
      };
      return Result;
    };
    this.BI_WriteStrProc_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      var i = 0;
      if (Proc === null) ;
      P = Params.Params;
      if (rtl.length(P) === 0) ;
      this.FinishCallArgAccess(P[0],5);
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        this.FinishCallArgAccess(P[i],1);
      };
    };
    this.BI_Val_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var bt = 0;
      var C = null;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,3,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (ParamResolved.BaseType in $mod.btAllStrings) Result = 0;
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20181214141250,1,Param,ParamResolved,"string",RaiseOnError);
      Param = Params.Params[1];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        bt = ParamResolved.BaseType;
        if (bt === 37) bt = ParamResolved.SubType;
        if (bt in rtl.unionSet(rtl.unionSet($mod.btAllInteger,$mod.btAllBooleans),$mod.btAllFloats)) {
          Result = 0}
         else if (bt === 2) {
          C = ParamResolved.LoTypeEl.$class.ClassType();
          if ((C === $lt99) || (C === $lt103)) Result = 0;
        };
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20181214141704,2,Param,ParamResolved,"boolean/integer/float/enum variable",RaiseOnError);
      Param = Params.Params[2];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if (this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (ParamResolved.BaseType in $mod.btAllInteger) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20181214141511,3,Param,ParamResolved,"integer variable",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,3,RaiseOnError,"");
      return Result;
    };
    this.BI_Val_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      if (Proc === null) ;
      P = Params.Params;
      if (rtl.length(P) === 0) ;
      this.FinishCallArgAccess(P[0],1);
      this.FinishCallArgAccess(P[1],5);
      this.FinishCallArgAccess(P[2],5);
    };
    this.BI_LoHi_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      if ((0 in ParamResolved.Flags) && (ParamResolved.BaseType in $mod.btAllInteger)) Result = 0;
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20190128232600,1,Param,ParamResolved,"integer type",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_LoHi_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      var ResolvedParam = $lt59.$new();
      var BaseType = 0;
      var Mask = 0;
      this.ComputeElement(Params.Params[0],ResolvedParam,{},null);
      this.GetShiftAndMaskForLoHiFunc(ResolvedParam.BaseType,Proc.BuiltIn === 21,{get: function () {
          return Mask;
        }, set: function (v) {
          Mask = v;
        }});
      var $tmp = Mask;
      if (($tmp === 0xF) || ($tmp === 0xFF)) {
        BaseType = 19}
       else if ($tmp === 0xFFFF) {
        BaseType = 21}
       else {
        BaseType = 25;
      };
      $mod.SetResolverIdentifier(ResolvedEl,BaseType,Proc.Proc,this.FBaseTypes[BaseType],this.FBaseTypes[BaseType],rtl.createSet(0));
    };
    this.BI_LoHi_OnEval = function (Proc, Params, Flags, Evaluated) {
      var Param = null;
      var ResolvedParam = $lt59.$new();
      var Value = null;
      var Shift = 0;
      var Mask = 0;
      Evaluated.set(null);
      Param = Params.Params[0];
      Value = this.Eval(Param,rtl.refSet(Flags),true);
      if (Value === null) return;
      try {
        this.ComputeElement(Param,ResolvedParam,{},null);
        Shift = this.GetShiftAndMaskForLoHiFunc(ResolvedParam.BaseType,Proc.BuiltIn === 21,{get: function () {
            return Mask;
          }, set: function (v) {
            Mask = v;
          }});
        Evaluated.set(this.fExprEvaluator.ShiftAndMaskValue(Value,Shift,Mask,Params));
      } finally {
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
    };
    this.BI_ConcatArray_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var ElTypeResolved = $lt59.$new();
      var FirstElTypeResolved = $lt59.$new();
      var i = 0;
      var ArrType = null;
      var ElType = null;
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return Result;
      Params = Expr;
      FirstElTypeResolved.$assign($lt59.$new());
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = Params.Params[i];
        this.ComputeElement(Param,ParamResolved,{},null);
        ElTypeResolved.$assign($lt59.$new());
        if (0 in ParamResolved.Flags) {
          if (ParamResolved.BaseType === 2) {
            if (this.IsDynArray(ParamResolved.LoTypeEl,true)) {
              ArrType = ParamResolved.LoTypeEl;
              ElType = this.GetArrayElType(ArrType);
              this.ComputeElement(ElType,ElTypeResolved,rtl.createSet(4),null);
            };
          } else if (ParamResolved.BaseType in rtl.createSet(35,36)) $mod.SetResolverValueExpr(ElTypeResolved,ParamResolved.SubType,ParamResolved.LoTypeEl,ParamResolved.HiTypeEl,Param,rtl.refSet(ParamResolved.Flags));
        };
        if (ElTypeResolved.BaseType === 0) return this.CheckRaiseTypeArgNo(20170329181206,i + 1,Param,ParamResolved,"dynamic array",RaiseOnError);
        ElTypeResolved.Flags = rtl.includeSet(ElTypeResolved.Flags,0);
        if (i === 0) {
          FirstElTypeResolved.$assign(ElTypeResolved);
          FirstElTypeResolved.Flags = rtl.includeSet(FirstElTypeResolved.Flags,1);
        } else if (this.CheckAssignResCompatibility(FirstElTypeResolved,ElTypeResolved,Param,RaiseOnError) === 2147483647) return 2147483647;
      };
      Result = 0;
      return Result;
    };
    this.BI_ConcatArray_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      this.ComputeElement(Params.Params[0],ResolvedEl,{},null);
      ResolvedEl.Flags = rtl.diffSet(ResolvedEl.Flags,rtl.createSet(1));
      ResolvedEl.ExprEl = Params;
      ResolvedEl.IdentEl = null;
      if (ResolvedEl.BaseType === 36) ResolvedEl.BaseType = 35;
      if (Proc === null) ;
    };
    this.BI_ConcatString_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var i = 0;
      var Param = null;
      var ParamResolved = $lt59.$new();
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return Result;
      Params = Expr;
      for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = Params.Params[i];
        this.ComputeElement(Param,ParamResolved,{},null);
        if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllStringAndChars)) return this.CheckRaiseTypeArgNo(20181219230329,i + 1,Param,ParamResolved,"string",RaiseOnError);
      };
      Result = 0;
      return Result;
    };
    this.BI_ConcatString_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      var i = 0;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var CombinedResolved = $lt59.$new();
      var ParamsArr = [];
      if (Proc === null) ;
      ParamsArr = Params.Params;
      for (var $l = 0, $end = rtl.length(ParamsArr) - 1; $l <= $end; $l++) {
        i = $l;
        Param = ParamsArr[i];
        this.ComputeElement(Param,ParamResolved,{},null);
        if (i === 0) {
          ResolvedEl.$assign(ParamResolved)}
         else {
          this.ComputeAddStringRes(ResolvedEl,ParamResolved,Params,CombinedResolved);
          ResolvedEl.$assign(CombinedResolved);
        };
      };
    };
    this.BI_ConcatString_OnEval = function (Proc, Params, Flags, Evaluated) {
      var i = 0;
      var Param = null;
      var Value = null;
      var NewValue = null;
      var ok = false;
      if (Proc === null) ;
      Value = null;
      Evaluated.set(null);
      ok = false;
      try {
        for (var $l = 0, $end = rtl.length(Params.Params) - 1; $l <= $end; $l++) {
          i = $l;
          Param = Params.Params[i];
          Value = this.Eval(Param,rtl.refSet(Flags),true);
          if (Value === null) return;
          if (i === 0) {
            Evaluated.set(Value);
            Value = null;
          } else {
            NewValue = this.fExprEvaluator.EvalStringAddExpr(Param,Params.Params[i - 1],Param,Evaluated.get(),Value);
            $lp12(Evaluated);
            Evaluated.set(NewValue);
            $lp12({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
        };
        ok = true;
      } finally {
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        if (!ok) $lp12(Evaluated);
      };
    };
    this.BI_CopyArray_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return Result;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (0 in ParamResolved.Flags) {
        if (ParamResolved.BaseType === 2) {
          if (this.IsDynArray(ParamResolved.LoTypeEl,true)) Result = 0;
        } else if (ParamResolved.BaseType in rtl.createSet(35,36)) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20170329153951,1,Param,ParamResolved,"dynamic array",RaiseOnError);
      if (rtl.length(Params.Params) === 1) return 0;
      Param = Params.Params[1];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllInteger)) return this.CheckRaiseTypeArgNo(20170329164210,2,Param,ParamResolved,"integer",RaiseOnError);
      if (rtl.length(Params.Params) === 2) return 0;
      Param = Params.Params[2];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllInteger)) return this.CheckRaiseTypeArgNo(20170329164329,3,Param,ParamResolved,"integer",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,3,RaiseOnError,"");
      return Result;
    };
    this.BI_CopyArray_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      if (Proc === null) ;
      this.ComputeElement(Params.Params[0],ResolvedEl,{},null);
      ResolvedEl.Flags = rtl.diffSet(ResolvedEl.Flags,rtl.createSet(1));
      ResolvedEl.ExprEl = Params;
      ResolvedEl.IdentEl = null;
      if (ResolvedEl.BaseType === 36) ResolvedEl.BaseType = 35;
    };
    this.BI_InsertArray_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ItemParam = null;
      var ItemResolved = $lt59.$new();
      var ParamResolved = $lt59.$new();
      var ElTypeResolved = $lt59.$new();
      var ArrType = null;
      var ElType = null;
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,3,RaiseOnError)) return Result;
      Params = Expr;
      ItemParam = Params.Params[0];
      this.ComputeElement(ItemParam,ItemResolved,{},null);
      if (!(0 in ItemResolved.Flags)) return this.CheckRaiseTypeArgNo(20170329171400,1,ItemParam,ItemResolved,"value",RaiseOnError);
      Param = Params.Params[1];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (RaiseOnError) this.RaiseVarExpected(20170329171514,Param,ParamResolved.IdentEl);
        return Result;
      };
      if ((ParamResolved.BaseType !== 2) || !this.IsDynArray(ParamResolved.LoTypeEl,true)) return this.CheckRaiseTypeArgNo(20170329172024,2,Param,ParamResolved,"dynamic array",RaiseOnError);
      ArrType = ParamResolved.LoTypeEl;
      ElType = this.GetArrayElType(ArrType);
      this.ComputeElement(ElType,ElTypeResolved,rtl.createSet(4),null);
      if (this.CheckAssignResCompatibility(ElTypeResolved,ItemResolved,ItemParam,RaiseOnError) === 2147483647) return 2147483647;
      Param = Params.Params[2];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllInteger)) return this.CheckRaiseTypeArgNo(20170329172348,3,Param,ParamResolved,"integer",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,3,RaiseOnError,"");
      return Result;
    };
    this.BI_InsertArray_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      var Param0 = null;
      var Param1 = null;
      var ArrayResolved = $lt59.$new();
      var ElTypeResolved = $lt59.$new();
      var ElType = null;
      if (Proc === null) ;
      P = Params.Params;
      Param0 = P[0];
      Param1 = P[1];
      this.FinishCallArgAccess(Param0,1);
      this.FinishCallArgAccess(Param1,4);
      this.FinishCallArgAccess(P[2],1);
      if (!$lt142.isPrototypeOf(Param0)) {
        this.ComputeElement(Param1,ArrayResolved,{},null);
        if ((ArrayResolved.BaseType !== 2) || !this.IsDynArray(ArrayResolved.LoTypeEl,true)) this.RaiseNotYetImplemented(20180622144039,Param1,"");
        ElType = this.GetArrayElType(ArrayResolved.LoTypeEl);
        this.ComputeElement(ElType,ElTypeResolved,rtl.createSet(4),null);
        if ((ElTypeResolved.BaseType === 2) && (ElTypeResolved.LoTypeEl.$class.ClassType() === $lt102)) this.MarkArrayExprRecursive(Param0,ElTypeResolved.LoTypeEl);
      };
    };
    this.BI_DeleteArray_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,3,RaiseOnError)) return Result;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (RaiseOnError) this.RaiseVarExpected(20170329173421,Param,ParamResolved.IdentEl);
        return Result;
      };
      if ((ParamResolved.BaseType !== 2) || !this.IsDynArray(ParamResolved.LoTypeEl,true)) return this.CheckRaiseTypeArgNo(20170329173434,1,Param,ParamResolved,"dynamic array",RaiseOnError);
      Param = Params.Params[1];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllInteger)) return this.CheckRaiseTypeArgNo(20170329173613,2,Param,ParamResolved,"integer",RaiseOnError);
      Param = Params.Params[2];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllInteger)) return this.CheckRaiseTypeArgNo(20170329172348,3,Param,ParamResolved,"integer",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,3,RaiseOnError,"");
      return Result;
    };
    this.BI_DeleteArray_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      if (Proc === null) ;
      P = Params.Params;
      if (rtl.length(P) === 0) ;
      this.FinishCallArgAccess(P[0],4);
      this.FinishCallArgAccess(P[1],1);
      this.FinishCallArgAccess(P[2],1);
    };
    this.BI_TypeInfo_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var aType = null;
      var ParamResolved = $lt59.$new();
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return Result;
      Params = Expr;
      Param = Params.Params[0];
      aType = this.GetTypeInfoParamType(Param,ParamResolved,true);
      if (aType === null) this.RaiseMsg(20170411100259,3055,rtl.getResStr($lm5,"sTypeIdentifierExpected"),[],Param);
      aType = this.ResolveAliasType(aType,true);
      if (!this.HasTypeInfo(aType)) this.RaiseMsg(20170413200118,3053,rtl.getResStr($lm5,"sSymbolCannotBePublished"),[],Param);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_TypeInfo_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      if (Proc === null) ;
      if (Params === null) ;
      $mod.SetResolverTypeExpr(ResolvedEl,29,this.FBaseTypes[29],this.FBaseTypes[29],rtl.createSet(0));
    };
    this.BI_GetTypeKind_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var aType = null;
      var ParamResolved = $lt59.$new();
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return Result;
      Params = Expr;
      Param = Params.Params[0];
      aType = this.GetTypeInfoParamType(Param,ParamResolved,true);
      if (aType === null) this.RaiseMsg(20200826205441,3055,rtl.getResStr($lm5,"sTypeIdentifierExpected"),[],Param);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_GetTypeKind_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      var El = null;
      var EnumType = null;
      El = this.FindSystemIdentifier("system","ttypekind",Params);
      if (!$lt99.isPrototypeOf(El)) this.RaiseXExpectedButYFound(20200826211458,"enum type System.TTypeKind",$mod.GetElementTypeName(El),Params);
      EnumType = El;
      $mod.SetResolverTypeExpr(ResolvedEl,2,EnumType,EnumType,rtl.createSet(0));
      if (Proc === null) ;
    };
    this.BI_GetTypeKind_OnEval = function (Proc, Params, Flags, Evaluated) {
      var aType = null;
      var El = null;
      var TypeKindType = null;
      var C = null;
      var aClass = null;
      var bt = 0;
      var Value = null;
      var aName = "";
      var i = 0;
      var ParamResolved = $lt59.$new();
      Evaluated.set(null);
      aType = this.GetTypeInfoParamType(Params.Params[0],ParamResolved,true);
      C = aType.$class.ClassType();
      aName = "tkUnknown";
      if (C === $lt99) {
        aName = "tkEnumeration"}
       else if (C === $lt119) {
        aName = "tkSet"}
       else if (C === $lt98) {
        aName = "tkRecord"}
       else if (C === $lt94) {
        aClass = aType;
        var $tmp = aClass.ObjKind;
        if ($tmp === 0) {
          aName = "tkObject"}
         else if ($tmp === 2) {
          var $tmp1 = aClass.InterfaceType;
          if ($tmp1 === 0) {
            aName = "tkInterface"}
           else {
            aName = "tkInterfaceRaw";
          };
        } else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
          aName = "tkHelper"}
         else {
          aName = "tkClass";
        };
      } else if (C === $lt96) {
        aName = "tkClassRef"}
       else if (C.InheritsFrom($lt90)) {
        aName = "tkMethod"}
       else if (C.InheritsFrom($lt100)) {
        aName = "tkProcVar"}
       else {
        bt = ParamResolved.BaseType;
        var $tmp2 = bt;
        if ($tmp2 === 5) {
          aName = "tkWChar"}
         else if ($tmp2 === 6) {
          aName = "tkWChar"}
         else if ($tmp2 === 7) {
          aName = "tkUString"}
         else if ($tmp2 === 8) {
          aName = "tkWString"}
         else if ($tmp2 === 9) {
          aName = "tkUString"}
         else if ($tmp2 === 29) {
          aName = "tkPointer"}
         else {
          if (bt in $mod.btAllBooleans) {
            aName = "tkBool"}
           else if (bt in $mod.btAllInteger) {
            aName = "tkInteger"}
           else if (bt in $mod.btAllFloats) aName = "tkFloat";
        };
      };
      El = this.FindSystemIdentifier("system","ttypekind",Params);
      TypeKindType = rtl.as(El,$lt99);
      for (var $l = 0, $end = TypeKindType.Values.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Value = rtl.getObject(TypeKindType.Values.Get(i));
        if ($lp7(aName,Value.FName)) {
          Evaluated.set($lt168.$create("CreateValue",[i,Value]));
          return;
        };
      };
      if (Proc === null) ;
      if (rtl.eqSet(Flags,{})) ;
    };
    this.BI_Assert_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllBooleans)) return this.CheckRaiseTypeArgNo(20180117123819,1,Param,ParamResolved,"boolean",RaiseOnError);
      if (rtl.length(Params.Params) > 1) {
        Param = Params.Params[1];
        this.ComputeElement(Param,ParamResolved,{},null);
        if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllStringAndChars)) return this.CheckRaiseTypeArgNo(20180117123932,2,Param,ParamResolved,"string",RaiseOnError);
      };
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,2,RaiseOnError,"");
      return Result;
    };
    this.BI_Assert_OnFinishParamsExpr = function (Proc, Params) {
      this.FinishAssertCall(Proc,Params);
    };
    this.BI_New_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var TypeEl = null;
      var SubTypeEl = null;
      var ParamResolved = $lt59.$new();
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      Result = 2147483647;
      if (!this.ResolvedElCanBeVarParam(ParamResolved,Expr,true)) {
        if (RaiseOnError) this.RaiseVarExpected(20180425005303,Expr,ParamResolved.IdentEl);
        return Result;
      };
      if (ParamResolved.BaseType === 2) {
        TypeEl = ParamResolved.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt97) {
          SubTypeEl = this.ResolveAliasType(TypeEl.DestType,true);
          if (SubTypeEl.$class.ClassType() === $lt98) Result = 0;
        };
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20180425005421,1,Param,ParamResolved,"pointer of record",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_New_OnFinishParamsExpr = function (Proc, Params) {
      if (Proc === null) ;
      this.FinishCallArgAccess(Params.Params[0],5);
    };
    this.BI_Dispose_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var TypeEl = null;
      var SubTypeEl = null;
      var ParamResolved = $lt59.$new();
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return 2147483647;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      Result = 2147483647;
      if (0 in ParamResolved.Flags) if (ParamResolved.BaseType === 2) {
        TypeEl = ParamResolved.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt97) {
          SubTypeEl = this.ResolveAliasType(TypeEl.DestType,true);
          if (SubTypeEl.$class.ClassType() === $lt98) Result = 0;
        };
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20180425010620,1,Param,ParamResolved,"pointer of record",RaiseOnError);
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_Dispose_OnFinishParamsExpr = function (Proc, Params) {
      if (Proc === null) ;
      this.FinishCallArgAccess(Params.Params[0],1);
    };
    this.BI_Default_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var Decl = null;
      var aType = null;
      Result = 2147483647;
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return Result;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      Decl = ParamResolved.IdentEl;
      aType = null;
      if ((Decl !== null) && (ParamResolved.LoTypeEl !== null)) {
        if ($lt95.isPrototypeOf(Decl)) {
          aType = Decl}
         else if ($lt105.isPrototypeOf(Decl)) {
          aType = Decl.VarType}
         else if (Decl.$class.ClassType() === $lt106) aType = Decl.ArgType;
      };
      if (aType === null) {
        this.RaiseMsg(20180501004009,3055,rtl.getResStr($lm5,"sTypeIdentifierExpected"),[],Param);
      };
      Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      return Result;
    };
    this.BI_Default_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      var Param = null;
      if (Proc === null) ;
      Param = Params.Params[0];
      this.ComputeElement(Param,ResolvedEl,rtl.createSet(1),null);
      ResolvedEl.Flags = rtl.createSet(0);
      ResolvedEl.IdentEl = null;
    };
    this.BI_Default_OnEval = function (Proc, Params, Flags, Evaluated) {
      var Param = null;
      var ParamResolved = $lt59.$new();
      var TypeEl = null;
      var EnumType = null;
      var i = 0;
      var ArrayEl = null;
      var bt = 0;
      var MinInt = 0;
      var MaxInt = 0;
      if (Proc === null) ;
      Evaluated.set(null);
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      TypeEl = ParamResolved.LoTypeEl;
      if (ParamResolved.BaseType === 2) {
        if (TypeEl.$class.ClassType() === $lt102) {
          this.RaiseNotYetImplemented(20180501005214,Param,"");
          ArrayEl = TypeEl;
          if (rtl.length(ArrayEl.Ranges) === 0) ;
        } else if (TypeEl.$class.ClassType() === $lt119) {
          TypeEl = TypeEl.EnumType;
          if (TypeEl.$class.ClassType() === $lt99) {
            EnumType = TypeEl.EnumType;
            Evaluated.set($lt138.$create("CreateEmpty",[1,EnumType]));
          } else {
            this.RaiseNotYetImplemented(20180501005348,Params,"");
          };
        } else if (TypeEl.$class.ClassType() === $lt99) {
          EnumType = TypeEl;
          i = 0;
          Evaluated.set($lt168.$create("CreateValue",[i,rtl.getObject(EnumType.Values.Get(i))]));
        };
      } else if ($lt83.isPrototypeOf(TypeEl) && $lt62.isPrototypeOf(TypeEl.FData)) {
        bt = TypeEl.FData.BaseType;
        bt = this.GetActualBaseType(bt);
        if (bt in $mod.btAllBooleans) {
          Evaluated.set($lt172.$create("CreateValue",[false]))}
         else if ((bt in $mod.btAllIntegerNoQWord) && this.GetIntegerRange(bt,{get: function () {
            return MinInt;
          }, set: function (v) {
            MinInt = v;
          }},{get: function () {
            return MaxInt;
          }, set: function (v) {
            MaxInt = v;
          }})) {
          Evaluated.set($lt169.$create("CreateValue",[MinInt]))}
         else if (bt in rtl.createSet(9,8)) {
          Evaluated.set($lt173.$create("CreateValue",[""]))}
         else if (bt === 6) {
          Evaluated.set($lt173.$create("CreateValue",["\x00"]))}
         else if (bt in $mod.btAllFloats) {
          Evaluated.set($lt170.$create("CreateValue",[0.0]))}
         else {
          this.RaiseNotYetImplemented(20180501005645,Params,"");
        };
      } else if ($lt103.isPrototypeOf(ParamResolved.LoTypeEl)) {
        Evaluated.set(this.EvalRangeLimit(TypeEl.RangeExpr,rtl.refSet(Flags),true,Param));
      } else if (ParamResolved.BaseType === 34) {
        if (ParamResolved.SubType === 2) {
          if (ParamResolved.LoTypeEl.$class.ClassType() === $lt99) {
            Evaluated.set($lt138.$create("CreateEmpty",[1,ParamResolved.LoTypeEl]))}
           else {
            this.RaiseNotYetImplemented(20180501125138,Param,"");
          };
        } else {
          this.RaiseNotYetImplemented(20180501125014,Param,"");
        };
      } else {
        this.RaiseNotYetImplemented(20180501004839,Param,"");
      };
    };
    this.Create$2 = function () {
      $lt92.Create$1.call(this);
      this.FDefaultScope = $lt19.$create("Create$1");
      this.FPendingForwardProcs = $lt85.$create("Create");
      this.FBaseTypeChar = 6;
      this.FBaseTypeString = 9;
      this.FBaseTypeExtended = 11;
      this.FBaseTypeLength = 28;
      this.FDynArrayMinIndex = 0;
      this.FDynArrayMaxIndex = 9007199254740991;
      this.cTGUIDToString = 10000 + 1;
      this.cStringToTGUID = 10000 + 1;
      this.cInterfaceToTGUID = 10000 + 1;
      this.cInterfaceToString = 10000 + 2;
      this.FScopeClass_Array = $lt28;
      this.FScopeClass_Class = $lt34;
      this.FScopeClass_InitialFinalization = $lt23;
      this.FScopeClass_Module = $lt15;
      this.FScopeClass_Proc = $lt37;
      this.FScopeClass_ProcType = $lt29;
      this.FScopeClass_Record = $lt31;
      this.FScopeClass_Section = $lt22;
      this.FScopeClass_WithExpr = $lt41;
      this.fExprEvaluator = $lt183.$create("Create$1");
      this.fExprEvaluator.FOnLog = rtl.createCallback(this,"OnExprEvalLog");
      this.fExprEvaluator.FOnEvalIdentifier = rtl.createCallback(this,"OnExprEvalIdentifier");
      this.fExprEvaluator.FOnEvalParams = rtl.createCallback(this,"OnExprEvalParams");
      this.fExprEvaluator.FOnRangeCheckEl = rtl.createCallback(this,"OnRangeCheckEl");
      this.PushScope(this.FDefaultScope);
      return this;
    };
    this.Destroy = function () {
      this.Clear();
      this.PopScope();
      $lp3({p: this, get: function () {
          return this.p.FPendingForwardProcs;
        }, set: function (v) {
          this.p.FPendingForwardProcs = v;
        }});
      $lp3({p: this, get: function () {
          return this.p.fExprEvaluator;
        }, set: function (v) {
          this.p.fExprEvaluator = v;
        }});
      this.ClearBuiltInIdentifiers();
      $lt92.Destroy.call(this);
    };
    this.Clear = function () {
      $mod.ClearHelperList({p: this, get: function () {
          return this.p.FActiveHelpers;
        }, set: function (v) {
          this.p.FActiveHelpers = v;
        }});
      this.RestoreStashedScopes(0);
      while ((this.FScopeCount > 0) && (this.FTopScope !== this.FDefaultScope)) this.PopScope();
      this.ClearResolveDataList(1);
    };
    this.CreateElement$1 = function (AClass, AName, AParent, AVisibility, ASourceFilename, ASourceLinenumber) {
      var Result = null;
      var aScanner = null;
      var SrcPos = $lt82.$new();
      aScanner = this.FCurrentParser.FScanner;
      if ((ASourceFilename === "") || this.FStoreSrcColumns) {
        SrcPos.FileName = aScanner.FCurFilename;
        SrcPos.Row = aScanner.FCurRow;
        SrcPos.Column = aScanner.GetCurColumn();
      } else {
        SrcPos.FileName = ASourceFilename;
        SrcPos.Row = ASourceLinenumber;
        SrcPos.Column = 0;
      };
      Result = this.CreateElement$2(AClass,AName,AParent,AVisibility,SrcPos,null);
      return Result;
    };
    this.CreateElement$2 = function (AClass, AName, AParent, AVisibility, ASrcPos, TypeParams) {
      var Result = null;
      var El = null;
      var SrcY = 0;
      var SectionScope = null;
      Result = null;
      if ((AParent === null) && (this.FRootElement !== null)) this.RaiseInternalError(20160922163535,'more than one root element Class="' + AClass.$classname + '" Root=' + $lp2(this.FRootElement));
      if (ASrcPos.FileName === "") {
        this.RaiseInternalError(20160922163541,"missing filename");
      };
      SrcY = ASrcPos.Row;
      if (this.FStoreSrcColumns) SrcY = this.$class.MangleSourceLineNumber(SrcY,ASrcPos.Column);
      if (AClass === $lt184) this.RaiseInternalError(20190131154235,"");
      El = this.CreateOwnedElement(AClass,AName,AParent);
      this.FLastElement = El;
      El.Visibility = AVisibility;
      El.SourceFilename = ASrcPos.FileName;
      El.SourceLinenumber = SrcY;
      if (this.FRootElement === null) {
        this.SetRootElement(rtl.as(El,$lt86));
        if (this.FStep === 0) this.FStep = 1;
      } else if ($lt116.isPrototypeOf(AParent) && (AParent.Declarations.FCount === 0)) {
        SectionScope = AParent.FData;
        SectionScope.BoolSwitches = rtl.refSet(this.FCurrentParser.FScanner.FCurrentBoolSwitches);
        SectionScope.ModeSwitches = rtl.refSet(this.FCurrentParser.FScanner.FCurrentModeSwitches);
      };
      if (this.IsElementSkipped(El)) return Result;
      if (AClass.InheritsFrom($lt153)) {}
      else if ((AClass === $lt105) || (AClass === $lt117)) {
        this.AddVariable(El)}
       else if (AClass === $lt178) {
        this.AddResourceString(El)}
       else if (AClass === $lt88) {
        this.AddProperty(El)}
       else if (AClass === $lt106) {
        this.AddArgument(El)}
       else if (AClass === $lt99) {
        this.AddEnumType(El)}
       else if (AClass === $lt112) {
        this.AddEnumValue(El)}
       else if (AClass === $lt4) {}
      else if ((AClass === $lt157) || (AClass === $lt158) || (AClass === $lt96) || (AClass === $lt97) || (AClass === $lt119) || (AClass === $lt103) || (AClass === $lt155)) {
        this.AddType(El)}
       else if (AClass === $lt102) {
        this.AddArrayType(El,TypeParams)}
       else if ((AClass === $lt100) || (AClass === $lt101)) {
        this.AddProcedureType(El,TypeParams)}
       else if (AClass === $lt104) {
        this.AddGenericTemplateType(El)}
       else if (AClass === $lt174) {
        this.AddType(El);
        this.RaiseMsg(20170419203043,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(9,"["),El);
      } else if (AClass === $lt98) {
        this.AddRecordType(El,TypeParams)}
       else if (AClass === $lt118) {
        this.AddRecordVariant(El)}
       else if (AClass === $lt94) {
        this.AddClassType(El,TypeParams)}
       else if (AClass.InheritsFrom($lt90)) {
        this.AddProcedure(El,TypeParams)}
       else if (AClass === $lt141) {
        this.AddFunctionResult(El)}
       else if (AClass === $lt89) {
        this.AddProcedureBody(El)}
       else if (AClass === $lt159) {}
      else if (AClass === $lt133) {
        this.AddExceptOn(El)}
       else if (AClass === $lt137) {
        this.AddWithDo(El)}
       else if (AClass === $lt130) {}
      else if (AClass === $lt185) {}
      else if ((AClass === $lt109) || (AClass === $lt110) || (AClass === $lt186) || (AClass === $lt187)) {
        this.AddSection(El)}
       else if ((AClass === $lt86) || (AClass === $lt113) || (AClass === $lt114)) {
        this.AddModule(El)}
       else if (AClass === $lt87) {}
      else if (AClass === $lt188) {
        this.AddInitialFinalizationSection(El)}
       else if (AClass === $lt189) {
        this.AddInitialFinalizationSection(El)}
       else if (AClass === $lt135) {}
      else if (AClass.InheritsFrom($lt125)) {}
      else if (AClass === $lt154) {}
      else if (AClass === $lt166) {
        this.AddExportSymbol(El)}
       else if (AClass === $lt190) {
        this.RaiseMsg(20171018121900,3073,rtl.getResStr($lm5,"sCantFindUnitX"),$lp6(18,AName),El)}
       else this.RaiseNotYetImplemented(20160922163544,El,"");
      Result = El;
      return Result;
    };
    this.CreateOwnedElement = function (AClass, AName, AParent) {
      var Result = null;
      Result = AClass.$create("Create$1",[AName,AParent]);
      this.FOwnedElements.Add(Result);
      return Result;
    };
    this.FindModule$1 = function (AName, NameExpr, InFileExpr) {
      var Result = null;
      var InFilename = "";
      var FileUnitName = "";
      if (InFileExpr !== null) {
        InFilename = this.GetUsesUnitInFilename(InFileExpr);
        if (InFilename === "") this.RaiseXExpectedButYFound(20180222001220,"file path","empty string",InFileExpr);
        if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
          FileUnitName = $lp17($lp18(InFilename),"");
          if ($lp4(AName,FileUnitName) !== 0) this.RaiseXExpectedButYFound(20180222230400,AName,FileUnitName,InFileExpr);
        };
      };
      Result = this.FindUnit(AName,InFilename,NameExpr,InFileExpr);
      if (Result === null) {
        if (InFileExpr !== null) {
          this.RaiseMsg(20180223140434,3073,rtl.getResStr($lm5,"sCantFindUnitX"),$lp6(18,InFilename),InFileExpr)}
         else this.RaiseMsg(20180223140409,3073,rtl.getResStr($lm5,"sCantFindUnitX"),$lp6(18,AName),NameExpr);
      };
      return Result;
    };
    this.FindElement = function (aName) {
      var Result = null;
      Result = this.FindElementFor(aName,null,0);
      return Result;
    };
    this.FindElementFor = function (aName, AParent, TypeParamCount) {
      var $Self = this;
      var Result = null;
      var ErrorEl = null;
      function CheckGenericRefWithoutParams(GenEl) {
        if ((GenEl.GenericTemplateTypes === null) || (GenEl.GenericTemplateTypes.FCount === 0)) return;
        if (!(3 in $Self.FCurrentParser.GetCurrentModeSwitches()) && (AParent !== null) && AParent.HasParent(GenEl)) return;
        $Self.RaiseMsg(20201129005025,3131,rtl.getResStr($lm5,"sGenericsWithoutSpecializationAsType"),$lp6(18,"variable"),ErrorEl);
      };
      var p = 0;
      var RightPath = "";
      var CurName = "";
      var LeftPath = "";
      var NeedPop = false;
      var CurScopeEl = null;
      var NextEl = null;
      var BestEl = null;
      var CurSection = null;
      var i = 0;
      var UsesUnit = null;
      var CurScope = null;
      var FindData = $lt65.$new();
      Result = null;
      ErrorEl = null;
      RightPath = aName;
      LeftPath = "";
      p = 1;
      CurScopeEl = null;
      do {
        p = $lp13(".",RightPath);
        if (p < 1) {
          CurName = RightPath;
          RightPath = "";
        } else {
          CurName = $lp11(RightPath,p - 1);
          $lp10({get: function () {
              return RightPath;
            }, set: function (v) {
              RightPath = v;
            }},1,p);
          if (RightPath === "") this.RaiseMsg(20170328003146,3044,rtl.getResStr($lm5,"sIllegalExpression"),[],ErrorEl);
        };
        if (LeftPath === "") {
          LeftPath = CurName}
         else LeftPath = LeftPath + "." + CurName;
        if (CurScopeEl !== null) {
          NeedPop = true;
          if ($lt95.isPrototypeOf(CurScopeEl)) {
            if ($lt93.isPrototypeOf(CurScopeEl) && !this.IsFullySpecialized(CurScopeEl)) this.RaiseMsg(20200217131215,3131,rtl.getResStr($lm5,"sGenericsWithoutSpecializationAsType"),$lp6(18,"reference"),ErrorEl);
            if ($lt94.isPrototypeOf(CurScopeEl) && CurScopeEl.IsForward) this.RaiseMsg(20220527113900,3001,rtl.getResStr($lm5,"sIdentifierNotFound"),$lp6(18,CurName),ErrorEl);
            CurScope = this.PushDotScope(CurScopeEl);
            if (CurScope === null) this.RaiseMsg(20190122122529,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,".",18,LeftPath),ErrorEl);
            CurScope.OnlyTypeMembers = true;
          } else if ($lt86.isPrototypeOf(CurScopeEl)) {
            this.PushModuleDotScope(CurScopeEl)}
           else this.RaiseMsg(20170504174021,3084,rtl.getResStr($lm5,"sIllegalQualifierAfter"),$lp6(9,".",18,LeftPath),ErrorEl);
        } else NeedPop = false;
        if ((RightPath === "") && (TypeParamCount > 0)) {
          NextEl = this.FindGenericEl(CurName,TypeParamCount,FindData,ErrorEl);
          if ((FindData.StartScope !== null) && (FindData.StartScope.$class.ClassType() === this.FScopeClass_WithExpr) && (0 in FindData.StartScope.Flags)) this.RaiseInternalError(20190801104033,"");
        } else {
          NextEl = this.FindElementWithoutParams(CurName,ErrorEl,true,true);
          if ($lt93.isPrototypeOf(NextEl) && (RightPath === "")) CheckGenericRefWithoutParams(NextEl);
        };
        if (NextEl === null) this.RaiseIdentifierNotFound(20201129004745,CurName,ErrorEl);
        if ($lt86.isPrototypeOf(NextEl)) {
          if ($lt86.isPrototypeOf(CurScopeEl)) this.RaiseXExpectedButYFound(20170328001619,"class",$mod.GetElementTypeName(NextEl) + " " + NextEl.FName,ErrorEl);
          if ($lp13(".",NextEl.FName) > 0) {
            if ($lp4(NextEl.FName + ".",$lp11(aName,NextEl.FName.length + 1)) !== 0) {
              if ($lp4(NextEl.FName,aName) === 0) {
                this.RaiseXExpectedButYFound(20170504165825,"type",$mod.GetElementTypeName(NextEl),ErrorEl)}
               else this.RaiseIdentifierNotFound(20170504165412,aName,ErrorEl);
            };
            RightPath = $lp16(aName,NextEl.FName.length + 2,aName.length);
          };
          CurScopeEl = NextEl;
        } else if (NextEl.$class.ClassType() === $lt87) {
          CurSection = rtl.as(NextEl.FParent,$lt116);
          i = rtl.length(CurSection.UsesClause) - 1;
          BestEl = null;
          while (i >= 0) {
            UsesUnit = CurSection.UsesClause[i];
            CurName = UsesUnit.FName;
            if ($mod.IsDottedIdentifierPrefix(CurName,aName) && ((BestEl === null) || (CurName.length > BestEl.FName.length))) BestEl = UsesUnit;
            i -= 1;
            if ((i < 0) && (CurSection.$class.ClassType() === $lt110)) {
              CurSection = rtl.as(CurSection.FParent,$lt86).InterfaceSection;
              if (CurSection === null) break;
              i = rtl.length(CurSection.UsesClause) - 1;
            };
          };
          CurName = this.FRootElement.FName;
          if ($mod.IsDottedIdentifierPrefix(CurName,aName) && ((BestEl === null) || (CurName.length > BestEl.FName.length))) BestEl = this.FRootElement;
          if (BestEl === null) this.RaiseIdentifierNotFound(20170504172440,aName,ErrorEl);
          RightPath = $lp16(aName,BestEl.FName.length + 2,aName.length);
          if (BestEl.$class.ClassType() === $lt87) {
            CurScopeEl = BestEl.Module}
           else CurScopeEl = BestEl;
        } else CurScopeEl = NextEl;
        if (NeedPop) this.PopScope();
        if (RightPath === "") return NextEl;
      } while (!false);
      if (AParent === null) ;
      return Result;
    };
    this.FindElementWithoutParams = function (AName, ErrorPosEl, NoProcsWithArgs, NoGenerics) {
      var Result = null;
      var Data = $lt65.$new();
      Result = this.FindElementWithoutParams$1(AName,Data,ErrorPosEl,NoProcsWithArgs,NoGenerics);
      if (Data.Found === null) return Result;
      this.CheckFoundElement(Data,null);
      if ((Data.StartScope !== null) && (Data.StartScope.$class.ClassType() === this.FScopeClass_WithExpr) && (0 in Data.StartScope.Flags)) this.RaiseInternalError(20160923111727,"");
      return Result;
    };
    this.FindElementWithoutParams$1 = function (AName, Data, ErrorPosEl, NoProcsWithArgs, NoGenerics) {
      var Result = null;
      var Abort = false;
      Result = null;
      Abort = false;
      Data.$assign($lt65.$new());
      Data.ErrorPosEl = ErrorPosEl;
      Data.SkipGenerics = NoGenerics;
      this.IterateElements(AName,rtl.createCallback(this,"OnFindFirst_PreferNoParams"),Data,{get: function () {
          return Abort;
        }, set: function (v) {
          Abort = v;
        }});
      Result = Data.Found;
      if (Result === null) {
        if ((ErrorPosEl === null) && (this.FLastElement !== null)) {
          if ((this.FLastElement.$class.ClassType() === $lt96) && (this.FLastElement.DestType === null)) {
            Result = this.CreateElement$2($lt4,AName,this.FLastElement,0,this.FCurrentParser.CurSourcePos(),null);
            return Result;
          } else if ((this.FLastElement.$class.ClassType() === $lt97) && (this.FLastElement.DestType === null)) {
            Result = this.CreateElement$2($lt4,AName,this.FLastElement,0,this.FCurrentParser.CurSourcePos(),null);
            return Result;
          };
        };
        this.RaiseIdentifierNotFound(20170216152722,AName,ErrorPosEl);
      };
      if (NoProcsWithArgs && $lt90.isPrototypeOf(Result) && this.ProcNeedsParams(Result.ProcType)) this.RaiseMsg(20170216152347,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,this.GetProcTypeDescription(Result.ProcType,rtl.createSet(0,2))),ErrorPosEl);
      return Result;
    };
    this.FindFirstEl = function (AName, Data, ErrorPosEl) {
      var Result = null;
      var Abort = false;
      Abort = false;
      Data.$assign($lt65.$new());
      Data.ErrorPosEl = ErrorPosEl;
      this.IterateElements(AName,rtl.createCallback(this,"OnFindFirst"),Data,{get: function () {
          return Abort;
        }, set: function (v) {
          Abort = v;
        }});
      Result = Data.Found;
      return Result;
    };
    this.FindLongestUnitName = function (El, Expr) {
      var CurUsesUnit = null;
      var BestEl = null;
      var aName = "";
      var CurName = "";
      var Clause = [];
      var i = 0;
      var Section = null;
      var CurExpr = null;
      if (!$lt87.isPrototypeOf(El.get())) this.RaiseInternalError(20170503000945,"");
      aName = this.GetNameExprValue(Expr);
      if (aName === "") this.RaiseNotYetImplemented(20170503110217,Expr,"");
      CurExpr = Expr;
      do {
        CurExpr = this.GetNextDottedExpr(CurExpr);
        if (CurExpr === null) break;
        CurName = this.GetNameExprValue(CurExpr);
        if (CurName === "") this.RaiseNotYetImplemented(20170502164242,CurExpr,"");
        aName = aName + "." + CurName;
      } while (!false);
      BestEl = null;
      Section = rtl.as(El.get().FParent,$lt116);
      do {
        Clause = Section.UsesClause;
        for (var $l = 0, $end = rtl.length(Clause) - 1; $l <= $end; $l++) {
          i = $l;
          CurUsesUnit = Clause[i];
          CurName = CurUsesUnit.FName;
          if ($mod.IsDottedIdentifierPrefix(CurName,aName) && ((BestEl === null) || (CurName.length > BestEl.FName.length))) BestEl = CurUsesUnit;
        };
        if ($lt110.isPrototypeOf(Section)) {
          Section = rtl.as(Section.FParent,$lt86).InterfaceSection;
        } else break;
      } while (!(Section === null));
      CurName = El.get().GetModule().FName;
      if ($mod.IsDottedIdentifierPrefix(CurName,aName) && ((BestEl === null) || (CurName.length > BestEl.FName.length))) BestEl = El.get().GetModule();
      if (BestEl === null) {
        this.RaiseIdentifierNotFound(20170503140643,this.GetNameExprValue(Expr),Expr);
      };
      El.set(BestEl);
    };
    this.FindGenericEl = function (AName, TemplateCount, Find, ErrorPosEl) {
      var Result = null;
      var Data = $lt66.$new();
      var Abort = false;
      Data.$assign($lt66.$new());
      Data.TemplateCount = TemplateCount;
      Data.Find.ErrorPosEl = ErrorPosEl;
      Abort = false;
      this.IterateElements(AName,rtl.createCallback(this,"OnFindFirst_GenericEl"),Data,{get: function () {
          return Abort;
        }, set: function (v) {
          Abort = v;
        }});
      Find.$assign(Data.Find);
      Result = Find.Found;
      if (Result === null) {
        this.RaiseMsg(20190801104759,3001,rtl.getResStr($lm5,"sIdentifierNotFound"),$lp6(18,AName + $lp9(TemplateCount)),ErrorPosEl);
      };
      this.CheckFoundElement(Find,null);
      return Result;
    };
    this.IterateElements = function (aName, OnIterateElement, Data, Abort) {
      var i = 0;
      var Scope = null;
      for (var $l = this.FScopeCount - 1; $l >= 0; $l--) {
        i = $l;
        Scope = this.GetScopes(i);
        Scope.IterateElements(aName,Scope,OnIterateElement,Data,Abort);
        if (Abort.get()) return;
        if ($lt44.isPrototypeOf(Scope)) break;
      };
    };
    this.IterateGlobalElements = function (aName, OnIterateElement, Data, Abort) {
      var i = 0;
      var Scope = null;
      var C = null;
      i = 0;
      while (i < this.FScopeCount) {
        Scope = this.GetScopes(i);
        C = Scope.$class.ClassType();
        if (C.InheritsFrom($lt19) || C.InheritsFrom($lt15) || C.InheritsFrom($lt22)) {
          i += 1}
         else break;
      };
      while (i > 0) {
        i -= 1;
        Scope = this.GetScopes(i);
        Scope.IterateElements(aName,Scope,OnIterateElement,Data,Abort);
        if (Abort.get()) return;
      };
    };
    this.CheckFoundElement = function (FindData, Ref) {
      var $Self = this;
      function IsFieldInheritingConst(aRef) {
        var Result = false;
        var El = null;
        El = aRef.FDeclaration;
        Result = (El.$class.ClassType() === $lt105) && rtl.eqSet(rtl.intersectSet(El.VarModifiers,rtl.createSet(4,5)),{});
        return Result;
      };
      var Proc = null;
      var StartScope = null;
      var OnlyTypeMembers = false;
      var IsClassOf = false;
      var C = null;
      var ClassRecScope = null;
      var i = 0;
      var AbstractProcs = [];
      var TypeEl = null;
      StartScope = FindData.StartScope;
      OnlyTypeMembers = false;
      IsClassOf = false;
      if ($lt45.isPrototypeOf(StartScope)) {
        OnlyTypeMembers = StartScope.OnlyTypeMembers;
        if (StartScope.$class.ClassType() === $lt49) IsClassOf = StartScope.IsClassOf;
        if (Ref !== null) {
          Ref.Flags = rtl.includeSet(Ref.Flags,0);
          if (StartScope.ConstParent && IsFieldInheritingConst(Ref)) Ref.Flags = rtl.includeSet(Ref.Flags,6);
        };
      } else if (StartScope.$class.ClassType() === this.FScopeClass_WithExpr) {
        OnlyTypeMembers = 1 in StartScope.Flags;
        IsClassOf = 2 in StartScope.Flags;
        if (Ref !== null) {
          Ref.Flags = rtl.includeSet(Ref.Flags,0);
          if ((3 in StartScope.Flags) && IsFieldInheritingConst(Ref)) Ref.Flags = rtl.includeSet(Ref.Flags,6);
        };
      } else if (StartScope.$class.ClassType() === this.FScopeClass_Proc) {
        Proc = rtl.as(StartScope.FElement,$lt90);
        if ((FindData.ElScope !== StartScope) && this.IsClassMethod(Proc)) OnlyTypeMembers = true;
      } else if (StartScope.$class.ClassType() === $lt35) OnlyTypeMembers = StartScope.OnlyTypeMembers;
      if (OnlyTypeMembers) {
        if (FindData.Found.$class.ClassType() === $lt108) {}
        else if (this.IsClassMethod(FindData.Found)) {}
        else if ($lt105.isPrototypeOf(FindData.Found) && (4 in FindData.Found.VarModifiers)) {}
        else if ($lt95.isPrototypeOf(FindData.Found)) {}
        else if ($lt112.isPrototypeOf(FindData.Found)) {}
        else {
          this.RaiseMsg(20170216152348,3032,rtl.getResStr($lm5,"sInstanceMemberXInaccessible"),$lp6(18,FindData.Found.FName),FindData.ErrorPosEl);
        };
      } else if ((4 in this.FOptions) && $lt49.isPrototypeOf(StartScope) && StartScope.ClassRecScope.FElement.IsExternal) {
        C = FindData.Found.$class.ClassType();
        if ((C === $lt90) || (C === $lt111)) {}
        else if (C === $lt117) {}
        else if (((C === $lt105) || (C === $lt88)) && !(4 in FindData.Found.VarModifiers)) {}
        else if (this.IsHelper(FindData.Found.FParent)) {}
        else {
          this.RaiseMsg(20170331184224,3051,rtl.getResStr($lm5,"sExternalClassInstanceCannotAccessStaticX"),$lp6(18,$mod.GetElementTypeName(FindData.Found) + " " + FindData.Found.FName),FindData.ErrorPosEl);
        };
      };
      if ($lt90.isPrototypeOf(FindData.Found)) {
        Proc = FindData.Found;
        if (Proc.IsVirtual() || Proc.IsOverride()) {
          if (StartScope.$class.ClassType() === $lt50) {
            if (Proc.IsAbstract()) this.RaiseMsg(20170216152352,3030,rtl.getResStr($lm5,"sAbstractMethodsCannotBeCalledDirectly"),[],FindData.ErrorPosEl);
          } else {
            if (Ref !== null) Ref.Flags = rtl.unionSet(Ref.Flags,rtl.createSet(5));
          };
        };
        if ((Proc.$class.ClassType() === $lt108) && (Ref !== null)) {
          if (OnlyTypeMembers) Ref.Flags = rtl.diffSet(rtl.unionSet(Ref.Flags,rtl.createSet(3)),rtl.createSet(6));
          if (Ref.Context !== null) this.RaiseInternalError(20170131141936,"");
          Ref.Context = $lt56.$create("Create");
          TypeEl = null;
          ClassRecScope = null;
          C = StartScope.$class.ClassType();
          if (C.InheritsFrom($lt48)) {
            ClassRecScope = StartScope.ClassRecScope}
           else if (C === this.FScopeClass_WithExpr) {
            ClassRecScope = StartScope.ClassRecScope;
            if (ClassRecScope === null) TypeEl = rtl.as(StartScope.Scope.FElement,$lt95);
          } else if (C === this.FScopeClass_Proc) {
            ClassRecScope = StartScope.ClassRecScope}
           else if (C === $lt51) {
            TypeEl = rtl.as($mod.NoNil(StartScope.FElement),$lt95)}
           else this.RaiseInternalError(20170131150855,$lp2(StartScope));
          if (TypeEl !== null) {
            Ref.Context.Typ = TypeEl}
           else {
            if (ClassRecScope === null) this.RaiseInternalError(20190123120156,$lp2(StartScope));
            TypeEl = rtl.as(ClassRecScope.FElement,$lt107);
            if ((TypeEl.$class.ClassType() === $lt94) && (TypeEl.HelperForType !== null)) TypeEl = rtl.as(this.ResolveAliasType(TypeEl.HelperForType,true),$lt95);
            Ref.Context.Typ = TypeEl;
            if (OnlyTypeMembers && $lt34.isPrototypeOf(ClassRecScope)) {
              if ((TypeEl.$class.ClassType() === $lt94) && TypeEl.IsAbstract()) {
                this.LogMsg(20190224153450,2,3123,rtl.getResStr($lm5,"sCreatingAnInstanceOfAbstractClassY"),$lp6(18,TypeEl.FName),FindData.ErrorPosEl)}
               else {
                AbstractProcs = ClassRecScope.AbstractProcs;
                if (rtl.length(AbstractProcs) > 0) {
                  if (IsClassOf) {}
                  else for (var $l = 0, $end = rtl.length(AbstractProcs) - 1; $l <= $end; $l++) {
                    i = $l;
                    this.LogMsg(20171227110746,2,4046,rtl.getResStr($lm5,"sConstructingClassXWithAbstractMethodY"),$lp6(18,TypeEl.FName,18,AbstractProcs[i].FName),FindData.ErrorPosEl);
                  };
                };
              };
            };
          };
        };
        if ((Proc.$class.ClassType() === $lt160) && (Ref !== null)) if (!$lt50.isPrototypeOf(StartScope)) Ref.Flags = rtl.unionSet(Ref.Flags,rtl.createSet(4));
      };
      this.CheckFoundElementVisibility(FindData,Ref);
    };
    this.CheckFoundElementVisibility = function (FindData, Ref) {
      var Context = null;
      var FoundContext = null;
      var CurScope = null;
      if (FindData.Found.Visibility in rtl.createSet(1,2,6,7)) {
        Context = this.GetVisibilityContext();
        FoundContext = rtl.as(FindData.Found.FParent,$lt107);
        var $tmp = FindData.Found.Visibility;
        if ($tmp === 1) {
          if (FoundContext.GetModule() !== Context.GetModule()) this.RaiseMsg(20170216152354,3045,rtl.getResStr($lm5,"sCantAccessXMember"),$lp6(18,"private",18,FindData.Found.FName),FindData.ErrorPosEl)}
         else if ($tmp === 2) {
          CurScope = this.FTopScope;
          if (FoundContext.GetModule() === Context.GetModule()) {}
          else if ($lt95.isPrototypeOf(Context) && (this.CheckClassIsClass(Context,FoundContext) !== 2147483647)) {}
          else if ($lt48.isPrototypeOf(CurScope) && (CurScope.ClassRecScope.FElement.GetModule() === Context.GetModule())) {}
          else if ($lt41.isPrototypeOf(CurScope) && (CurScope.Scope.FElement !== null) && (CurScope.Scope.FElement.GetModule() === Context.GetModule())) {}
          else this.RaiseMsg(20170216152356,3045,rtl.getResStr($lm5,"sCantAccessXMember"),$lp6(18,"protected",18,FindData.Found.FName),FindData.ErrorPosEl);
        } else if ($tmp === 6) {
          if (Context !== FoundContext) {
            this.RaiseMsg(20170216152357,3045,rtl.getResStr($lm5,"sCantAccessXMember"),$lp6(18,"strict private",18,FindData.Found.FName),FindData.ErrorPosEl);
          }}
         else if ($tmp === 7) if ($lt95.isPrototypeOf(Context) && (this.CheckClassIsClass(Context,FoundContext) !== 2147483647)) {}
        else this.RaiseMsg(20170216152400,3045,rtl.getResStr($lm5,"sCantAccessXMember"),$lp6(18,"strict protected",18,FindData.Found.FName),FindData.ErrorPosEl);
      };
      if (Ref === null) ;
    };
    this.GetVisibilityContext = function () {
      var Result = null;
      var i = 0;
      for (var $l = this.FScopeCount - 1; $l >= 0; $l--) {
        i = $l;
        Result = this.GetScopes(i).VisibilityContext;
        if (Result !== null) return Result;
      };
      Result = null;
      return Result;
    };
    this.BeginScope = function (ScopeType, El) {
      var $tmp = ScopeType;
      if ($tmp === 7) {
        this.PushParserSpecializeType(rtl.as(El,$lt155))}
       else if ($tmp === 8) {
        this.PushWithExprScope(rtl.as(El,$lt153))}
       else {
        this.RaiseMsg(20181210163324,3002,rtl.getResStr($lm5,"sNotYetImplemented") + " BeginScope",$lp6(18,$lp5(ScopeType)),null);
      };
    };
    this.FinishScope = function (ScopeType, El) {
      if (this.IsElementSkipped(El)) return;
      var $tmp = ScopeType;
      if ($tmp === 0) {
        this.FinishModule(rtl.as(El,$lt86))}
       else if ($tmp === 1) {
        this.FinishUsesClause()}
       else if ($tmp === 2) {
        this.FinishTypeSection(El)}
       else if ($tmp === 3) {
        this.FinishTypeDef(rtl.as(El,$lt95))}
       else if ($tmp === 4) {
        this.FinishResourcestring(rtl.as(El,$lt178))}
       else if ($tmp === 5) {
        this.FinishProcedure(rtl.as(El,$lt90))}
       else if ($tmp === 6) {
        this.FinishProcedureType(rtl.as(El,$lt100))}
       else if ($tmp === 7) {
        this.FinishParserSpecializeType(rtl.as(El,$lt155))}
       else if ($tmp === 8) {
        this.FinishWithDo(rtl.as(El,$lt137))}
       else if ($tmp === 9) {
        this.FinishExceptOnExpr()}
       else if ($tmp === 10) {
        this.FinishExceptOnStatement()}
       else if ($tmp === 11) {
        this.FinishForLoopHeader(rtl.as(El,$lt131))}
       else if ($tmp === 12) {
        this.FinishDeclaration(El)}
       else if ($tmp === 13) {
        this.FinishAncestors(rtl.as(El,$lt94))}
       else if ($tmp === 14) {
        this.FinishInitialFinalization(rtl.as(El,$lt125))}
       else {
        this.RaiseMsg(20170216152401,3002,rtl.getResStr($lm5,"sNotYetImplemented") + " FinishScope",$lp6(18,$lp5(ScopeType)),null);
      };
    };
    this.FinishTypeAlias = function (NewType) {
      var TypeEl = null;
      var DestType = null;
      var AncestorClass = null;
      var aClass = null;
      var Scope = null;
      var OldType = null;
      var LocalScope = null;
      DestType = NewType.get().DestType;
      TypeEl = $mod.ResolveSimpleAliasType(DestType);
      if ($lt94.isPrototypeOf(TypeEl)) {
        AncestorClass = TypeEl;
        LocalScope = this.GetLocalScope();
        Scope = rtl.as(LocalScope,$lt18);
        Scope.RemoveLocalIdentifier(NewType.get());
        aClass = this.CreateElement$1($lt94,NewType.get().FName,NewType.get().FParent,NewType.get().Visibility,NewType.get().SourceFilename,NewType.get().SourceLinenumber);
        aClass.ObjKind = AncestorClass.ObjKind;
        aClass.RTTIVisibility.$assign(AncestorClass.RTTIVisibility);
        OldType = NewType.get();
        NewType.set(aClass);
        OldType.DestType = null;
        aClass.AncestorType = DestType;
        this.FinishScope(13,aClass);
      };
    };
    this.IsUnitIntfFinished = function (AModule) {
      var Result = false;
      var CurIntf = null;
      CurIntf = AModule.InterfaceSection;
      Result = (CurIntf !== null) && $lt22.isPrototypeOf(CurIntf.FData) && CurIntf.FData.Finished;
      return Result;
    };
    this.NotifyPendingUsedInterfaces = function () {
      var ModuleScope = null;
      var i = 0;
      var PendingResolver = null;
      var PendingSection = null;
      ModuleScope = rtl.as(this.FRootElement.FData,$lt15);
      i = ModuleScope.PendingResolvers.FCount - 1;
      while (i >= 0) {
        PendingResolver = rtl.as(rtl.getObject(ModuleScope.PendingResolvers.Get(i)),$lt74);
        PendingSection = PendingResolver.GetLastSection();
        if (PendingSection === null) this.RaiseInternalError(20180305141421,"");
        PendingResolver.CheckPendingUsedInterface(PendingSection);
        i -= 1;
        if (i >= ModuleScope.PendingResolvers.FCount) i = ModuleScope.PendingResolvers.FCount - 1;
      };
    };
    this.GetPendingUsedInterface = function (Section) {
      var Result = null;
      var i = 0;
      var UseUnit = null;
      Result = null;
      for (var $l = 0, $end = rtl.length(Section.UsesClause) - 1; $l <= $end; $l++) {
        i = $l;
        UseUnit = Section.UsesClause[i];
        if (!$lt86.isPrototypeOf(UseUnit.Module)) continue;
        if (!this.IsUnitIntfFinished(UseUnit.Module)) return UseUnit;
      };
      return Result;
    };
    this.CheckPendingUsedInterface = function (Section) {
      var Result = false;
      var PendingModule = null;
      var PendingModuleScope = null;
      var List = null;
      var WasPending = false;
      WasPending = Section.PendingUsedIntf !== null;
      if (WasPending) {
        PendingModule = rtl.as(Section.PendingUsedIntf.Module,$lt86);
        if (!this.IsUnitIntfFinished(PendingModule)) return Result;
        PendingModuleScope = rtl.as($mod.NoNil(PendingModule.FData),$lt15);
        PendingModuleScope.PendingResolvers.Remove(this);
        Section.PendingUsedIntf = null;
      };
      Section.PendingUsedIntf = this.GetPendingUsedInterface(Section);
      if (Section.PendingUsedIntf !== null) {
        PendingModule = rtl.as(Section.PendingUsedIntf.Module,$lt86);
        PendingModuleScope = rtl.as($mod.NoNil(PendingModule.FData),$lt15);
        List = PendingModuleScope.PendingResolvers;
        if (List.IndexOf(this) < 0) List.Add(this);
        Result = !WasPending;
      } else {
        Result = WasPending;
        if (Result) this.UsedInterfacesFinished(Section);
      };
      return Result;
    };
    this.UsedInterfacesFinished = function (Section) {
      this.FCurrentParser.ParseContinue();
      if (Section === null) ;
    };
    this.NeedArrayValues = function (El) {
      var Result = false;
      var C = null;
      var V = null;
      var TypeEl = null;
      Result = false;
      if (El === null) return Result;
      C = El.$class.ClassType();
      if ((C === $lt117) || (C === $lt105)) {
        V = El;
        if (V.VarType === null) return Result;
        TypeEl = this.ResolveAliasType(V.VarType,true);
        Result = TypeEl.$class.ClassType() === $lt102;
      };
      return Result;
    };
    this.GetDefaultClassVisibility = function (AClass) {
      var Result = 0;
      var ClassScope = null;
      if (AClass.FData === null) return 0;
      ClassScope = rtl.as(AClass.FData,$lt34);
      if (2 in ClassScope.Flags) {
        Result = 4}
       else Result = 3;
      return Result;
    };
    this.ModeChanged = function (Sender, NewMode, Before, Handled) {
      $lt92.ModeChanged.call(this,Sender,NewMode,Before,Handled);
      if (!Before) {
        if ($lt116.isPrototypeOf(this.FLastElement)) this.FLastElement.FData.ModeSwitches = rtl.refSet(this.FCurrentParser.GetCurrentModeSwitches());
      };
    };
    this.ClearBuiltInIdentifiers = function () {
      var bt = 0;
      var bp = 0;
      this.ClearResolveDataList(0);
      for (var $l = 0; $l <= 37; $l++) {
        bt = $l;
        this.FBaseTypes[bt] = null;
      };
      for (var $l1 = 0; $l1 <= 33; $l1++) {
        bp = $l1;
        this.FBuiltInProcs[bp] = null;
      };
    };
    this.AddObjFPCBuiltInIdentifiers = function (TheBaseTypes, TheBaseProcs) {
      var bt = 0;
      for (var $l in TheBaseTypes) {
        bt = +$l;
        this.AddBaseType(this.GetBaseTypeNames(bt),bt);
      };
      if (1 in TheBaseProcs) this.AddBuiltInProc("Length","function Length(const String or Array): sizeint",rtl.createCallback(this,"BI_Length_OnGetCallCompatibility"),rtl.createCallback(this,"BI_Length_OnGetCallResult"),rtl.createCallback(this,"BI_Length_OnEval"),null,1,{});
      if (2 in TheBaseProcs) this.AddBuiltInProc("SetLength","procedure SetLength(var String or Array; NewLength: sizeint)",rtl.createCallback(this,"BI_SetLength_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_SetLength_OnFinishParamsExpr"),2,rtl.createSet(0));
      if (3 in TheBaseProcs) this.AddBuiltInProc("Include","procedure Include(var Set of Enum; const Enum)",rtl.createCallback(this,"BI_InExclude_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_InExclude_OnFinishParamsExpr"),3,rtl.createSet(0));
      if (4 in TheBaseProcs) this.AddBuiltInProc("Exclude","procedure Exclude(var Set of Enum; const Enum)",rtl.createCallback(this,"BI_InExclude_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_InExclude_OnFinishParamsExpr"),4,rtl.createSet(0));
      if (5 in TheBaseProcs) this.AddBuiltInProc("Break","procedure Break",rtl.createCallback(this,"BI_Break_OnGetCallCompatibility"),null,null,null,5,rtl.createSet(0));
      if (6 in TheBaseProcs) this.AddBuiltInProc("Continue","procedure Continue",rtl.createCallback(this,"BI_Continue_OnGetCallCompatibility"),null,null,null,6,rtl.createSet(0));
      if (7 in TheBaseProcs) this.AddBuiltInProc("Exit","procedure Exit(result)",rtl.createCallback(this,"BI_Exit_OnGetCallCompatibility"),null,null,null,7,rtl.createSet(0));
      if (8 in TheBaseProcs) this.AddBuiltInProc("Inc","procedure Inc(var Integer; const Incr: Integer = 1)",rtl.createCallback(this,"BI_IncDec_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_IncDec_OnFinishParamsExpr"),8,rtl.createSet(0));
      if (9 in TheBaseProcs) this.AddBuiltInProc("Dec","procedure Dec(var Integer; const Decr: Integer = 1)",rtl.createCallback(this,"BI_IncDec_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_IncDec_OnFinishParamsExpr"),9,rtl.createSet(0));
      if (10 in TheBaseProcs) this.AddBuiltInProc("Assigned","function Assigned(const Pointer or Class or Class-of): boolean",rtl.createCallback(this,"BI_Assigned_OnGetCallCompatibility"),rtl.createCallback(this,"BI_Assigned_OnGetCallResult"),null,rtl.createCallback(this,"BI_Assigned_OnFinishParamsExpr"),10,{});
      if (11 in TheBaseProcs) this.AddBuiltInProc("Chr","function Chr(const Integer): char",rtl.createCallback(this,"BI_Chr_OnGetCallCompatibility"),rtl.createCallback(this,"BI_Chr_OnGetCallResult"),rtl.createCallback(this,"BI_Chr_OnEval"),null,11,{});
      if (12 in TheBaseProcs) this.AddBuiltInProc("Ord","function Ord(const Enum or char): integer",rtl.createCallback(this,"BI_Ord_OnGetCallCompatibility"),rtl.createCallback(this,"BI_Ord_OnGetCallResult"),rtl.createCallback(this,"BI_Ord_OnEval"),null,12,{});
      if (13 in TheBaseProcs) this.AddBuiltInProc("Low","function Low(const array or ordinal): ordinal or integer",rtl.createCallback(this,"BI_LowHigh_OnGetCallCompatibility"),rtl.createCallback(this,"BI_LowHigh_OnGetCallResult"),rtl.createCallback(this,"BI_LowHigh_OnEval"),null,13,{});
      if (14 in TheBaseProcs) this.AddBuiltInProc("High","function High(const array or ordinal): ordinal or integer",rtl.createCallback(this,"BI_LowHigh_OnGetCallCompatibility"),rtl.createCallback(this,"BI_LowHigh_OnGetCallResult"),rtl.createCallback(this,"BI_LowHigh_OnEval"),null,14,{});
      if (15 in TheBaseProcs) this.AddBuiltInProc("Pred","function Pred(const ordinal): ordinal",rtl.createCallback(this,"BI_PredSucc_OnGetCallCompatibility"),rtl.createCallback(this,"BI_PredSucc_OnGetCallResult"),rtl.createCallback(this,"BI_PredSucc_OnEval"),null,15,{});
      if (16 in TheBaseProcs) this.AddBuiltInProc("Succ","function Succ(const ordinal): ordinal",rtl.createCallback(this,"BI_PredSucc_OnGetCallCompatibility"),rtl.createCallback(this,"BI_PredSucc_OnGetCallResult"),rtl.createCallback(this,"BI_PredSucc_OnEval"),null,16,{});
      if (17 in TheBaseProcs) this.AddBuiltInProc("Str","procedure Str(const var; var String)",rtl.createCallback(this,"BI_StrProc_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_StrProc_OnFinishParamsExpr"),17,rtl.createSet(0));
      if (18 in TheBaseProcs) this.AddBuiltInProc("Str","function Str(const var): String",rtl.createCallback(this,"BI_StrFunc_OnGetCallCompatibility"),rtl.createCallback(this,"BI_StrFunc_OnGetCallResult"),rtl.createCallback(this,"BI_StrFunc_OnEval"),null,18,{});
      if (19 in TheBaseProcs) this.AddBuiltInProc("WriteStr","procedure WriteStr(out String; params...)",rtl.createCallback(this,"BI_WriteStrProc_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_WriteStrProc_OnFinishParamsExpr"),19,rtl.createSet(0));
      if (20 in TheBaseProcs) this.AddBuiltInProc("Val","procedure Val(const String; var Value: bool|int|float|enum; out Int)",rtl.createCallback(this,"BI_Val_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_Val_OnFinishParamsExpr"),20,rtl.createSet(0));
      if (21 in TheBaseProcs) this.AddBuiltInProc("Lo","function Lo(X: any integer type): Byte|Word)",rtl.createCallback(this,"BI_LoHi_OnGetCallCompatibility"),rtl.createCallback(this,"BI_LoHi_OnGetCallResult"),rtl.createCallback(this,"BI_LoHi_OnEval"),null,21,{});
      if (22 in TheBaseProcs) this.AddBuiltInProc("Hi","function Hi(X: any integer type): Byte|Word)",rtl.createCallback(this,"BI_LoHi_OnGetCallCompatibility"),rtl.createCallback(this,"BI_LoHi_OnGetCallResult"),rtl.createCallback(this,"BI_LoHi_OnEval"),null,22,{});
      if (23 in TheBaseProcs) this.AddBuiltInProc("Concat","function Concat(const Array1, Array2, ...): Array",rtl.createCallback(this,"BI_ConcatArray_OnGetCallCompatibility"),rtl.createCallback(this,"BI_ConcatArray_OnGetCallResult"),null,null,23,{});
      if (24 in TheBaseProcs) this.AddBuiltInProc("Concat","function Concat(const String1, String2, ...): String",rtl.createCallback(this,"BI_ConcatString_OnGetCallCompatibility"),rtl.createCallback(this,"BI_ConcatString_OnGetCallResult"),rtl.createCallback(this,"BI_ConcatString_OnEval"),null,24,{});
      if (25 in TheBaseProcs) this.AddBuiltInProc("Copy","function Copy(const Array; Start: integer = 0; Count: integer = all): Array",rtl.createCallback(this,"BI_CopyArray_OnGetCallCompatibility"),rtl.createCallback(this,"BI_CopyArray_OnGetCallResult"),null,null,25,{});
      if (26 in TheBaseProcs) this.AddBuiltInProc("Insert","procedure Insert(const Element; var Array; Index: integer)",rtl.createCallback(this,"BI_InsertArray_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_InsertArray_OnFinishParamsExpr"),26,rtl.createSet(0));
      if (27 in TheBaseProcs) this.AddBuiltInProc("Delete","procedure Delete(var Array; Start, Count: integer)",rtl.createCallback(this,"BI_DeleteArray_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_DeleteArray_OnFinishParamsExpr"),27,rtl.createSet(0));
      if (28 in TheBaseProcs) this.AddBuiltInProc("TypeInfo","function TypeInfo(type or var identifier): Pointer",rtl.createCallback(this,"BI_TypeInfo_OnGetCallCompatibility"),rtl.createCallback(this,"BI_TypeInfo_OnGetCallResult"),null,null,28,{});
      if (29 in TheBaseProcs) this.AddBuiltInProc("GetTypeKind","function GetTypeKind(type or var identifier): System.TTypeKind",rtl.createCallback(this,"BI_GetTypeKind_OnGetCallCompatibility"),rtl.createCallback(this,"BI_GetTypeKind_OnGetCallResult"),rtl.createCallback(this,"BI_GetTypeKind_OnEval"),null,29,{});
      if (30 in TheBaseProcs) this.AddBuiltInProc("Assert","procedure Assert(bool[,string])",rtl.createCallback(this,"BI_Assert_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_Assert_OnFinishParamsExpr"),30,rtl.createSet(0));
      if (31 in TheBaseProcs) this.AddBuiltInProc("New","procedure New(out ^record)",rtl.createCallback(this,"BI_New_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_New_OnFinishParamsExpr"),31,rtl.createSet(0));
      if (32 in TheBaseProcs) this.AddBuiltInProc("Dispose","procedure Dispose(var ^record)",rtl.createCallback(this,"BI_Dispose_OnGetCallCompatibility"),null,null,rtl.createCallback(this,"BI_Dispose_OnFinishParamsExpr"),32,rtl.createSet(0));
      if (33 in TheBaseProcs) this.AddBuiltInProc("Default","function Default(T): T",rtl.createCallback(this,"BI_Default_OnGetCallCompatibility"),rtl.createCallback(this,"BI_Default_OnGetCallResult"),rtl.createCallback(this,"BI_Default_OnEval"),null,33,{});
    };
    this.AddBaseType = function (aName, Typ) {
      var Result = null;
      var El = null;
      El = this.CreateOwnedElement($lt83,aName,null);
      if (!(Typ in rtl.createSet(0,1))) this.FBaseTypes[Typ] = El;
      Result = $lt62.$create("Create$1");
      Result.BaseType = Typ;
      this.AddResolveData(El,Result,0);
      this.FDefaultScope.AddIdentifier(aName,El,1);
      return Result;
    };
    this.AddCustomBaseType = function (aName, aClass) {
      var Result = null;
      var CustomData = null;
      Result = this.CreateOwnedElement($lt83,aName,null);
      CustomData = aClass.$create("Create$1");
      CustomData.BaseType = 1;
      this.AddResolveData(Result,CustomData,0);
      this.FDefaultScope.AddIdentifier(aName,Result,1);
      return Result;
    };
    this.IsBaseType = function (aType, BaseType, ResolveAlias) {
      var Result = false;
      Result = false;
      if (aType === null) return Result;
      if (ResolveAlias) aType = this.ResolveAliasType(aType,true);
      if (aType.$class.ClassType() !== $lt83) return Result;
      Result = $lp4(aType.FName,this.GetBaseTypeNames(BaseType)) === 0;
      return Result;
    };
    this.AddBuiltInProc = function (aName, Signature, GetCallCompatibility, GetCallResult, EvalConst, FinishParamsExpr, BuiltIn, Flags) {
      var Result = null;
      var El = null;
      El = this.CreateOwnedElement($lt83,aName,null);
      Result = $lt64.$create("Create$1");
      Result.Proc = El;
      Result.Signature = Signature;
      Result.BuiltIn = BuiltIn;
      Result.GetCallCompatibility = GetCallCompatibility;
      Result.GetCallResult = GetCallResult;
      Result.Eval = EvalConst;
      Result.FinishParamsExpression = FinishParamsExpr;
      Result.Flags = rtl.refSet(Flags);
      this.AddResolveData(El,Result,0);
      this.FDefaultScope.AddIdentifier(aName,El,2);
      if (BuiltIn !== 0) this.FBuiltInProcs[BuiltIn] = Result;
      return Result;
    };
    this.AddResolveData = function (El, Data, Kind) {
      if (Data.FElement !== null) this.RaiseInternalError(20171111162227,"");
      if (El.FData !== null) this.RaiseInternalError(20171111162236,"");
      Data.SetElement(El);
      Data.Owner = this;
      Data.Next = this.FLastCreatedData[Kind];
      this.FLastCreatedData[Kind] = Data;
      El.FData = Data;
    };
    this.CreateReference = function (DeclEl, RefEl, Access, FindData) {
      var $Self = this;
      var Result = null;
      function RaiseAlreadySet() {
        $Self.RaiseInternalError(20160922163554,"customdata=" + $lp2(DeclEl));
      };
      if (RefEl.FData !== null) RaiseAlreadySet();
      Result = $lt55.$create("Create$1");
      if (FindData !== null) {
        if (FindData.StartScope.$class.ClassType() === this.FScopeClass_WithExpr) Result.WithExprScope = FindData.StartScope;
      };
      this.AddResolveData(RefEl,Result,1);
      Result.SetDeclaration(DeclEl);
      if ($lt153.isPrototypeOf(RefEl)) this.SetResolvedRefAccess(RefEl,Result,Access);
      this.EmitElementHints(RefEl,DeclEl);
      return Result;
    };
    this.GetLocalScope = function () {
      var Result = null;
      Result = this.FTopScope;
      if (Result.$class.ClassType() === $lt35) Result = Result.Scopes[0];
      return Result;
    };
    this.GetParentLocalScope = function () {
      var Result = null;
      Result = this.GetScopes(this.FScopeCount - 2);
      if (Result.$class.ClassType() === $lt35) Result = Result.Scopes[0];
      return Result;
    };
    this.CreateScope = function (El, ScopeClass) {
      var Result = null;
      if (!ScopeClass.IsStoredInElement()) this.RaiseInternalError(20160923121858,"");
      if (El.FData !== null) this.RaiseInternalError(20160923121849,"");
      Result = ScopeClass.$create("Create$1");
      if (Result.$class.FreeOnPop()) {
        Result.SetElement(El);
        El.FData = Result;
        Result.Owner = this;
      } else this.AddResolveData(El,Result,1);
      return Result;
    };
    this.CreateGroupScope = function (HiType, WithTopHelpers) {
      var Result = null;
      Result = $lt35.$create("Create$1");
      Result.SetElement(HiType);
      this.GroupScope_AddTypeAndAncestors(Result,HiType,WithTopHelpers);
      return Result;
    };
    this.GroupScope_AddTypeAndAncestors = function (Scope, HiType, WithTopHelpers) {
      var IsClass = false;
      var i = 0;
      var Entry = null;
      var HelperForType = null;
      var LoType = null;
      var AncestorScope = null;
      var HelperScope = null;
      var C = null;
      HiType = this.ResolveAliasType(HiType,false);
      LoType = this.ResolveAliasType(HiType,true);
      IsClass = LoType.$class.ClassType() === $lt94;
      if (IsClass && (LoType.HelperForType !== null)) {
        WithTopHelpers = false;
        HelperScope = LoType.FData;
        while (HelperScope !== null) {
          Scope.Add(HelperScope);
          HelperScope = HelperScope.AncestorScope;
        };
        HiType = this.ResolveAliasType(HiType.HelperForType,false);
        LoType = this.ResolveAliasType(HiType,true);
        IsClass = LoType.$class.ClassType() === $lt94;
      };
      do {
        if (WithTopHelpers) {
          for (var $l = rtl.length(this.FActiveHelpers) - 1; $l >= 0; $l--) {
            i = $l;
            Entry = this.FActiveHelpers[i];
            HelperForType = Entry.HelperForType;
            if (this.IsSameType(HelperForType,HiType,0)) {
              HelperScope = Entry.Helper.FData;
              while (HelperScope !== null) {
                Scope.Add(HelperScope);
                HelperScope = HelperScope.AncestorScope;
              };
              if (!(45 in this.FCurrentParser.GetCurrentModeSwitches())) break;
            };
          };
        } else WithTopHelpers = true;
        C = LoType.$class.ClassType();
        if ((C === $lt94) || (C === $lt98)) Scope.Add(rtl.as(LoType.FData,$lt18));
        if (!IsClass) break;
        AncestorScope = rtl.as(LoType.FData,$lt34).AncestorScope;
        if (AncestorScope === null) break;
        HiType = AncestorScope.FElement;
        LoType = HiType;
      } while (!(LoType === null));
    };
    this.PopScope = function () {
      var Scope = null;
      if (this.FScopeCount === 0) this.RaiseInternalError(20160922163557,"");
      this.FScopeCount -= 1;
      if (this.FTopScope.$class.FreeOnPop()) {
        Scope = this.FScopes[this.FScopeCount];
        if ((Scope.FElement !== null) && (Scope.FElement.FData === Scope)) Scope.FElement.FData = null;
        if (Scope === this.FDefaultScope) this.FDefaultScope = null;
        this.FScopes[this.FScopeCount] = null;
        Scope = rtl.freeLoc(Scope);
      };
      if (this.FScopeCount > 0) {
        this.FTopScope = this.FScopes[this.FScopeCount - 1]}
       else this.FTopScope = null;
    };
    this.PopWithScope = function (El) {
      var WithScope = null;
      var i = 0;
      WithScope = rtl.as(El.FData,$lt42);
      for (var $l = WithScope.ExpressionScopes.GetCount() - 1; $l >= 0; $l--) {
        i = $l;
        this.CheckTopScope(this.FScopeClass_WithExpr,false);
        if (this.FTopScope !== WithScope.ExpressionScopes.GetItem(i)) this.RaiseInternalError(20160923102846,"");
        this.PopScope();
      };
      this.CheckTopScope($lt42,false);
      this.PopScope();
    };
    this.PopGenericParamScope = function (El) {
      var TemplType = null;
      if ((El.GenericTemplateTypes !== null) && (El.GenericTemplateTypes.FCount > 0)) {
        TemplType = rtl.getObject(El.GenericTemplateTypes.Get(0));
        if (!$lt25.isPrototypeOf(this.FTopScope)) this.RaiseNotYetImplemented(20190831204109,El,$lp2(this.FTopScope));
        if (this.FTopScope.FElement !== TemplType) this.RaiseNotYetImplemented(20190831204134,El,$lp2(this.FTopScope.FElement));
        this.PopScope();
      } else {
        if ($lt25.isPrototypeOf(this.FTopScope)) this.RaiseNotYetImplemented(20190831204213,El,$lp2(this.FTopScope.FElement));
      };
    };
    this.PushScope = function (Scope) {
      if (Scope === null) this.RaiseInternalError(20160922163601,"");
      if (rtl.length(this.FScopes) === this.FScopeCount) this.FScopes = rtl.arraySetLength(this.FScopes,null,(this.FScopeCount * 2) + 10);
      this.FScopes[this.FScopeCount] = Scope;
      this.FScopeCount += 1;
      this.FTopScope = Scope;
    };
    this.PushScope$1 = function (El, ScopeClass) {
      var Result = null;
      Result = this.CreateScope(El,ScopeClass);
      this.PushScope(Result);
      return Result;
    };
    this.PushGroupScope = function (HiType) {
      var Result = null;
      Result = this.CreateGroupScope(HiType,true);
      this.PushScope(Result);
      return Result;
    };
    this.PushModuleDotScope = function (aModule) {
      var Result = null;
      Result = $lt46.$create("Create$1");
      Result.Owner = this;
      Result.SetModule(aModule);
      if ($lt113.isPrototypeOf(aModule)) {
        if (aModule.ProgramSection !== null) Result.InterfaceScope = rtl.as($mod.NoNil(aModule.ProgramSection.FData),$lt22);
      } else if ($lt114.isPrototypeOf(aModule)) {
        if (aModule.LibrarySection !== null) Result.InterfaceScope = rtl.as($mod.NoNil(aModule.LibrarySection.FData),$lt22);
      } else {
        if (aModule.InterfaceSection !== null) Result.InterfaceScope = rtl.as($mod.NoNil(aModule.InterfaceSection.FData),$lt22);
        if ((aModule === this.FRootElement) && (aModule.ImplementationSection !== null) && (aModule.ImplementationSection.FData !== null)) Result.ImplementationScope = rtl.as($mod.NoNil(aModule.ImplementationSection.FData),$lt22);
        if ($lp4(aModule.FName,"system") === 0) Result.SystemScope = this.FDefaultScope;
      };
      this.PushScope(Result);
      return Result;
    };
    this.PushClassDotScope = function (CurClassType, WithTopHelpers) {
      var Result = null;
      var ClassScope = null;
      var Ref = null;
      if (CurClassType.get().IsForward) {
        Ref = rtl.as(CurClassType.get().FData,$lt55);
        CurClassType.set(rtl.as(Ref.FDeclaration,$lt94));
      };
      if (CurClassType.get().FData === null) this.RaiseInternalError(20160922163611,"");
      ClassScope = rtl.as($mod.NoNil(CurClassType.get().FData),$lt34);
      Result = $lt49.$create("Create$1");
      Result.Owner = this;
      Result.ClassRecScope = ClassScope;
      Result.GroupScope = this.CreateGroupScope(CurClassType.get(),WithTopHelpers);
      this.PushScope(Result);
      return Result;
    };
    this.PushRecordDotScope = function (CurRecordType) {
      var Result = null;
      var RecScope = null;
      RecScope = rtl.as($mod.NoNil(CurRecordType.FData),$lt31);
      Result = $lt48.$create("Create$1");
      Result.Owner = this;
      Result.ClassRecScope = RecScope;
      Result.GroupScope = this.CreateGroupScope(CurRecordType,true);
      this.PushScope(Result);
      return Result;
    };
    this.PushInheritedScope = function (ClassOrRec, WithTopHelpers, AncestorScope) {
      var Result = null;
      Result = $lt50.$create("Create$1");
      Result.Owner = this;
      Result.ClassRecScope = rtl.as($mod.NoNil(ClassOrRec.FData),$lt30);
      Result.AncestorScope = AncestorScope;
      Result.GroupScope = this.CreateGroupScope(ClassOrRec,WithTopHelpers);
      this.PushScope(Result);
      return Result;
    };
    this.PushEnumDotScope = function (HiType, EnumLoType) {
      var Result = null;
      Result = $lt47.$create("Create$1");
      Result.Owner = this;
      Result.EnumScope = rtl.as($mod.NoNil(EnumLoType.FData),$lt24);
      Result.GroupScope = this.CreateGroupScope(HiType,true);
      this.PushScope(Result);
      return Result;
    };
    this.PushHelperDotScope = function (HiType) {
      var Result = null;
      var Group = null;
      Group = this.CreateGroupScope(HiType,true);
      if (Group.Count === 0) {
        Group = rtl.freeLoc(Group);
        return null;
      };
      Result = $lt51.$create("Create$1");
      Result.SetElement(HiType);
      Result.Owner = this;
      Result.GroupScope = Group;
      this.PushScope(Result);
      return Result;
    };
    this.PushTemplateDotScope = function (TemplType, ErrorEl) {
      var $Self = this;
      var Result = null;
      function PushConstraintScope(ConEl) {
        var ConToken = 0;
        var DotClassScope = null;
        var MemberType = null;
        var GenTempl = null;
        var aClass = null;
        var aConstructor = null;
        var i = 0;
        var ResolvedEl = $lt59.$new();
        ConToken = $Self.GetGenericConstraintKeyword(ConEl);
        var $tmp = ConToken;
        if ($tmp === 96) {}
        else if (($tmp === 47) || ($tmp === 50)) {
          if (Result !== null) $Self.RaiseNotYetImplemented(20190831005217,TemplType,"");
          if (!$Self.FindSystemClassTypeAndConstructor("system","tobject",{get: function () {
              return aClass;
            }, set: function (v) {
              aClass = v;
            }},{get: function () {
              return aConstructor;
            }, set: function (v) {
              aConstructor = v;
            }},ErrorEl)) $Self.RaiseIdentifierNotFound(20190831002421,"system.TObject.Create()",ErrorEl);
          DotClassScope = $lt49.$create("Create$1");
          Result = DotClassScope;
          $Self.PushScope(Result);
          DotClassScope.Owner = $Self;
          DotClassScope.ClassRecScope = rtl.as(aClass.FData,$lt34);
          Result.GroupScope = $Self.CreateGroupScope(aClass,false);
        } else {
          if (!$lt95.isPrototypeOf(ConEl)) $Self.RaiseNotYetImplemented(20190914070842,TemplType,$lp2(ConEl));
          $Self.ComputeElement(ConEl,ResolvedEl,rtl.createSet(4),null);
          if (ResolvedEl.BaseType !== 2) $Self.RaiseNotYetImplemented(20190915183241,ConEl,"");
          if (ResolvedEl.IdentEl === null) $Self.RaiseNotYetImplemented(20190831214135,ConEl,"");
          if ($lt104.isPrototypeOf(ResolvedEl.LoTypeEl)) {
            GenTempl = ResolvedEl.LoTypeEl;
            if (ConEl.HasParent(GenTempl)) $Self.RaiseNotYetImplemented(20190831214258,ConEl,"");
            for (var $l = 0, $end = rtl.length(GenTempl.Constraints) - 1; $l <= $end; $l++) {
              i = $l;
              PushConstraintScope(GenTempl.Constraints[i]);
            };
          } else if ($lt107.isPrototypeOf(ResolvedEl.LoTypeEl)) {
            MemberType = ResolvedEl.LoTypeEl;
            if (Result === null) {
              DotClassScope = $lt49.$create("Create$1");
              Result = DotClassScope;
              $Self.PushScope(Result);
              DotClassScope.Owner = $Self;
              DotClassScope.ClassRecScope = rtl.as(MemberType.FData,$lt34);
              Result.GroupScope = $Self.CreateGroupScope(ResolvedEl.HiTypeEl,false);
            } else $Self.GroupScope_AddTypeAndAncestors(Result.GroupScope,MemberType,false);
          } else $Self.RaiseNotYetImplemented(20190831001450,ConEl,"");
        };
      };
      var i = 0;
      Result = null;
      for (var $l = 0, $end = rtl.length(TemplType.Constraints) - 1; $l <= $end; $l++) {
        i = $l;
        PushConstraintScope(TemplType.Constraints[i]);
      };
      return Result;
    };
    this.PushDotScope = function (HiType) {
      var Result = null;
      var C = null;
      var LoType = null;
      LoType = this.ResolveAliasType(HiType,true);
      C = LoType.$class.ClassType();
      if (C === $lt94) {
        Result = this.PushClassDotScope({get: function () {
            return LoType;
          }, set: function (v) {
            LoType = v;
          }},true)}
       else if (C === $lt98) {
        Result = this.PushRecordDotScope(LoType)}
       else if (C === $lt99) {
        Result = this.PushEnumDotScope(HiType,LoType)}
       else if (C === $lt104) {
        Result = this.PushTemplateDotScope(LoType,HiType)}
       else Result = this.PushHelperDotScope(HiType);
      return Result;
    };
    this.PushParserSpecializeType = function (SpecType) {
      var Result = null;
      Result = this.PushDotScope(SpecType.DestType);
      return Result;
    };
    this.PushWithExprScope = function (Expr) {
      var Result = null;
      var WithEl = null;
      var WithScope = null;
      var ExprResolved = $lt59.$new();
      var ErrorEl = null;
      var LoType = null;
      var HiType = null;
      var DestType = null;
      var ExprScope = null;
      var ClassEl = null;
      var WithExprScope = null;
      var Flags = {};
      var ClassRecScope = null;
      if (!$lt137.isPrototypeOf(Expr.FParent)) this.RaiseInternalError(20181210163412,$lp2(Expr.FParent));
      WithEl = Expr.FParent;
      if (!$lt42.isPrototypeOf(WithEl.FData)) this.RaiseInternalError(20181210175526,"");
      WithScope = WithEl.FData;
      this.ResolveExpr(Expr,1);
      this.ComputeElement(Expr,ExprResolved,rtl.createSet(0),null);
      ErrorEl = Expr;
      HiType = ExprResolved.HiTypeEl;
      LoType = ExprResolved.LoTypeEl;
      if (LoType === null) this.RaiseMsg(20170216152004,3026,rtl.getResStr($lm5,"sExprTypeMustBeClassOrRecordTypeGot"),$lp6(18,this.GetBaseTypeNames(ExprResolved.BaseType)),ErrorEl);
      if (ExprResolved.BaseType in $mod.btAllIntrinsicTypes) {}
      else if (ExprResolved.BaseType === 2) {}
      else this.RaiseMsg(20190210143257,3026,rtl.getResStr($lm5,"sExprTypeMustBeClassOrRecordTypeGot"),$lp6(18,this.GetBaseTypeNames(ExprResolved.BaseType)),ErrorEl);
      if (!(0 in ExprResolved.Flags)) this.CheckUseAsType(ExprResolved.LoTypeEl,20220210140100,Expr);
      Flags = {};
      ClassRecScope = null;
      ExprScope = null;
      if (LoType.$class.ClassType() === $lt96) {
        DestType = LoType.DestType;
        ClassEl = rtl.as(this.ResolveAliasType(DestType,true),$lt94);
        ExprScope = this.CreateGroupScope(DestType,true);
        ClassRecScope = ClassEl.FData;
        Flags = rtl.includeSet(Flags,1);
        Flags = rtl.includeSet(Flags,2);
      } else if ($lt107.isPrototypeOf(LoType)) ClassRecScope = LoType.FData;
      if (ExprScope === null) {
        ExprScope = this.CreateGroupScope(HiType,true);
        if (ExprScope.Count === 0) {
          ExprScope = rtl.freeLoc(ExprScope);
          this.RaiseMsg(20170216152007,3026,rtl.getResStr($lm5,"sExprTypeMustBeClassOrRecordTypeGot"),$lp6(18,$mod.GetElementTypeName(LoType)),ErrorEl);
        };
        if ($lt95.isPrototypeOf(ExprResolved.IdentEl)) Flags = rtl.includeSet(Flags,1);
      };
      WithExprScope = this.FScopeClass_WithExpr.$create("Create$1");
      WithExprScope.WithScope = WithScope;
      WithExprScope.Index = WithEl.Expressions.FCount;
      WithExprScope.Expr = Expr;
      WithExprScope.Scope = ExprScope;
      WithExprScope.ClassRecScope = ClassRecScope;
      if (!$lt95.isPrototypeOf(ExprResolved.IdentEl)) Flags = rtl.includeSet(Flags,0);
      if (!(1 in ExprResolved.Flags) && (ExprResolved.BaseType === 2) && (ExprResolved.LoTypeEl.$class.ClassType() === $lt98)) Flags = rtl.includeSet(Flags,3);
      WithExprScope.Flags = rtl.refSet(Flags);
      WithScope.ExpressionScopes.Add$1(WithExprScope);
      this.PushScope(WithExprScope);
      Result = WithExprScope;
      return Result;
    };
    this.StashScopes = function (NewScopeCnt) {
      var Result = 0;
      Result = this.FStashScopeCount;
      if (NewScopeCnt > this.FScopeCount) this.RaiseInternalError(20190728125505,"");
      while (this.FScopeCount > NewScopeCnt) {
        if (this.FStashScopeCount === rtl.length(this.FStashScopes)) this.FStashScopes = rtl.arraySetLength(this.FStashScopes,null,this.FStashScopeCount + 4);
        this.FStashScopes[this.FStashScopeCount] = this.FTopScope;
        this.FStashScopeCount += 1;
        this.FScopeCount -= 1;
        this.FScopes[this.FScopeCount] = null;
        if (this.FScopeCount > 0) {
          this.FTopScope = this.FScopes[this.FScopeCount - 1]}
         else this.FTopScope = null;
      };
      return Result;
    };
    this.StashSubExprScopes = function () {
      var Result = 0;
      var NewScopeCnt = 0;
      NewScopeCnt = this.FScopeCount;
      while ((NewScopeCnt > 0) && $lt44.isPrototypeOf(this.FScopes[NewScopeCnt - 1])) NewScopeCnt -= 1;
      Result = this.StashScopes(NewScopeCnt);
      return Result;
    };
    this.RestoreStashedScopes = function (StashDepth) {
      while (this.FStashScopeCount > StashDepth) {
        if (this.FScopeCount === rtl.length(this.FScopes)) this.FScopes = rtl.arraySetLength(this.FScopes,null,this.FScopeCount + 4);
        this.FStashScopeCount -= 1;
        this.FScopes[this.FScopeCount] = this.FStashScopes[this.FStashScopeCount];
        this.FTopScope = this.FScopes[this.FScopeCount];
        this.FStashScopes[this.FStashScopeCount] = null;
        this.FScopeCount += 1;
      };
    };
    this.DeleteScope = function (Index) {
      this.FScopes.splice(Index,1);
      this.FScopeCount -= 1;
    };
    this.InsertScope = function (Scope, Index) {
      this.FScopes = rtl.arrayInsert(Scope,this.FScopes,Index);
      this.FScopeCount += 1;
    };
    this.GetCurrentProcScope = function (ErrorEl) {
      var Result = null;
      var Scope = null;
      var i = 0;
      i = this.FScopeCount;
      do {
        i -= 1;
        if (i < 0) this.RaiseMsg(20171006001229,3044,rtl.getResStr($lm5,"sIllegalExpression"),[],ErrorEl);
        Scope = this.GetScopes(i);
        if ($lt37.isPrototypeOf(Scope)) return Scope;
      } while (!false);
      Result = null;
      return Result;
    };
    this.GetProcScope = function (El) {
      var Result = null;
      var CurEl = null;
      CurEl = El;
      while (CurEl !== null) {
        if ($lt90.isPrototypeOf(CurEl)) return CurEl.FData;
        CurEl = CurEl.FParent;
      };
      Result = null;
      return Result;
    };
    this.GetCurrentSelfScope = function (ErrorEl) {
      var Result = null;
      Result = this.GetCurrentProcScope(ErrorEl);
      Result = Result.GetSelfScope();
      return Result;
    };
    this.GetSelfScope = function (El) {
      var Result = null;
      Result = this.GetProcScope(El);
      if (Result !== null) Result = Result.GetSelfScope();
      return Result;
    };
    this.AddHelper = function (Helper, List) {
      var NewEntry = null;
      var Added = 0;
      var HelperForType = null;
      HelperForType = this.ResolveAliasType(Helper.HelperForType,false);
      NewEntry = $lt21.$create("Create");
      NewEntry.Helper = Helper;
      NewEntry.HelperForType = HelperForType;
      Added = rtl.length(List.get());
      NewEntry.Added = Added;
      List.set(rtl.arraySetLength(List.get(),null,Added + 1));
      List.get()[Added] = NewEntry;
    };
    this.AddActiveHelper = function (Helper) {
      this.AddHelper(Helper,{p: this, get: function () {
          return this.p.FActiveHelpers;
        }, set: function (v) {
          this.p.FActiveHelpers = v;
        }});
    };
    this.MangleSourceLineNumber = function (Line, Column) {
      var Result = 0;
      if ((Column < 2048) && (Line < 1048575)) {
        Result = -((Line * 2048) + Column)}
       else Result = Line;
      return Result;
    };
    this.UnmangleSourceLineNumber = function (LineNumber, Line, Column) {
      Line.set(LineNumber);
      Column.set(0);
      if (Line.get() < 0) {
        Line.set(-Line.get());
        Column.set(Line.get() % 2048);
        Line.set(rtl.trunc(Line.get() / 2048));
      };
    };
    this.GetDbgSourcePosStr = function (El) {
      var Result = "";
      var Line = 0;
      var Column = 0;
      if (El === null) return "nil";
      this.UnmangleSourceLineNumber(El.SourceLinenumber,{get: function () {
          return Line;
        }, set: function (v) {
          Line = v;
        }},{get: function () {
          return Column;
        }, set: function (v) {
          Column = v;
        }});
      Result = El.SourceFilename + "(" + $lp5(Line);
      if (Column > 0) Result = Result + "," + $lp5(Column);
      Result = Result + ")";
      return Result;
    };
    this.GetElementSourcePosStr = function (El) {
      var Result = "";
      var Line = 0;
      var Column = 0;
      if (El === null) return "nil";
      this.$class.UnmangleSourceLineNumber(El.SourceLinenumber,{get: function () {
          return Line;
        }, set: function (v) {
          Line = v;
        }},{get: function () {
          return Column;
        }, set: function (v) {
          Column = v;
        }});
      if (Line === 0) {
        if ($lt83.isPrototypeOf(El)) return "intrinsic";
      };
      Result = this.FCurrentParser.FScanner.FormatPath(El.SourceFilename) + "(" + $lp5(Line);
      if (Column > 0) Result = Result + "," + $lp5(Column);
      Result = Result + ")";
      return Result;
    };
    this.SetLastMsg = function (id, MsgType, MsgNumber, Fmt, Args, PosEl) {
      var Column = 0;
      var Row = 0;
      this.FLastMsgId = id;
      this.FLastMsgType = MsgType;
      this.FLastMsgNumber = MsgNumber;
      this.FLastMsgPattern = Fmt;
      this.FLastMsg = $lp19(Fmt,Args);
      this.FLastElement = PosEl;
      if (PosEl === null) {
        this.FLastSourcePos.$assign(this.FCurrentParser.CurSourcePos())}
       else {
        this.FLastSourcePos.FileName = PosEl.SourceFilename;
        this.$class.UnmangleSourceLineNumber(PosEl.SourceLinenumber,{get: function () {
            return Row;
          }, set: function (v) {
            Row = v;
          }},{get: function () {
            return Column;
          }, set: function (v) {
            Column = v;
          }});
        if (Row >= 0) {
          this.FLastSourcePos.Row = Row}
         else this.FLastSourcePos.Row = 0;
        if (Column >= 0) {
          this.FLastSourcePos.Column = Column}
         else this.FLastSourcePos.Column = 0;
      };
      $lp20({p: this, get: function () {
          return this.p.FLastMsgArgs;
        }, set: function (v) {
          this.p.FLastMsgArgs = v;
        }},Args);
    };
    this.LogMsg = function (id, MsgType, MsgNumber, Fmt, Args, PosEl) {
      var Scanner = null;
      var State = 0;
      Scanner = this.FCurrentParser.FScanner;
      if (Scanner !== null) {
        if ((this.FStep < 2) && Scanner.IgnoreMsgType(MsgType)) return;
        if (MsgType >= 2) {
          State = Scanner.GetWarnMsgState(MsgNumber);
          var $tmp = State;
          if ($tmp === 2) {
            return;
          } else if ($tmp === 3) {
            this.RaiseMsg(id,MsgNumber,Fmt,Args,PosEl);
            return;
          };
        };
      };
      this.SetLastMsg(id,MsgType,MsgNumber,Fmt,Args,PosEl);
      if (this.FOnLog != null) {
        this.FOnLog(this,this.FLastMsg)}
       else if (this.FCurrentParser.FOnLog != null) this.FCurrentParser.FOnLog(this,this.FLastMsg);
    };
    this.GetWarnIdentifierNumbers = function (Identifier, MsgNumbers) {
      var $Self = this;
      var Result = false;
      function SetNumber(number) {
        MsgNumbers.set(rtl.arraySetLength(MsgNumbers.get(),0,1));
        MsgNumbers.get()[0] = number;
      };
      function SetNumbers(Numbers) {
        var i = 0;
        MsgNumbers.set(rtl.arraySetLength(MsgNumbers.get(),0,rtl.length(Numbers)));
        for (var $l = 0, $end = rtl.length(Numbers) - 1; $l <= $end; $l++) {
          i = $l;
          MsgNumbers.get()[i] = Numbers[i];
        };
      };
      if (Identifier === "") return false;
      if (Identifier.charCodeAt(0) in rtl.createSet(null,48,57)) return false;
      Result = true;
      var $tmp = $lp21(Identifier);
      if ($tmp === "CONSTRUCTING_ABSTRACT") {
        SetNumber(4046)}
       else if ($tmp === "SYMBOL_DEPRECATED") {
        SetNumber(5043)}
       else if ($tmp === "SYMBOL_EXPERIMENTAL") {
        SetNumber(5079)}
       else if ($tmp === "SYMBOL_LIBRARY") {
        SetNumber(5065)}
       else if ($tmp === "SYMBOL_PLATFORM") {
        SetNumber(5076)}
       else if ($tmp === "SYMBOL_UNIMPLEMENTED") {
        SetNumber(5078)}
       else if ($tmp === "HIDDEN_VIRTUAL") {
        SetNumber(3077)}
       else if ($tmp === "GARBAGE") {
        SetNumber(3058)}
       else if ($tmp === "BOUNDS_ERROR") {
        SetNumbers([3064,3065,3066,3070])}
       else if ($tmp === "MESSAGE_DIRECTIVE") {
        SetNumber(1025)}
       else {
        Result = false;
      };
      return Result;
    };
    this.GetIncompatibleTypeDesc = function (GotType, ExpType, GotDesc, ExpDesc) {
      var NeedProcSignature = false;
      if ((GotType.BaseType !== ExpType.BaseType) && (GotType.BaseType !== 2) && (ExpType.BaseType !== 2)) {
        GotDesc.set(this.GetBaseDescription(GotType,false));
        if (ExpType.BaseType === 30) {
          ExpDesc.set(this.GetBaseTypeNames(29))}
         else ExpDesc.set(this.GetBaseDescription(ExpType,false));
        if (GotDesc.get() !== ExpDesc.get()) return;
        GotDesc.set(this.GetBaseDescription(GotType,true));
        ExpDesc.set(this.GetBaseDescription(ExpType,true));
      } else if ((GotType.LoTypeEl !== null) && (ExpType.LoTypeEl !== null)) {
        NeedProcSignature = $lt100.isPrototypeOf(GotType.LoTypeEl) && $lt100.isPrototypeOf(ExpType.LoTypeEl);
        if (NeedProcSignature) {
          this.GetIncompatibleProcParamsDesc(GotType.LoTypeEl,ExpType.LoTypeEl,GotDesc,ExpDesc);
          if (GotDesc.get() !== ExpDesc.get()) return;
        };
        GotDesc.set(this.GetTypeDescription$1(GotType,false));
        ExpDesc.set(this.GetTypeDescription$1(ExpType,false));
        if (GotDesc.get() !== ExpDesc.get()) return;
        if (GotType.HiTypeEl !== ExpType.HiTypeEl) {
          GotDesc.set(this.GetTypeDescription(GotType.HiTypeEl,false));
          ExpDesc.set(this.GetTypeDescription(ExpType.HiTypeEl,false));
          if (GotDesc.get() !== ExpDesc.get()) return;
        };
        GotDesc.set(this.GetTypeDescription$1(GotType,true));
        ExpDesc.set(this.GetTypeDescription$1(ExpType,true));
      } else {
        GotDesc.set(this.GetResolverResultDescription(GotType,true));
        ExpDesc.set(this.GetResolverResultDescription(ExpType,true));
        if (GotDesc.get() !== ExpDesc.get()) return;
        GotDesc.set(this.GetResolverResultDescription(GotType,false));
        ExpDesc.set(this.GetResolverResultDescription(ExpType,false));
      };
    };
    this.GetIncompatibleTypeDesc$1 = function (GotType, ExpType, GotDesc, ExpDesc) {
      var GotLoType = null;
      var ExpLoType = null;
      GotLoType = this.ResolveAliasType(GotType,true);
      ExpLoType = this.ResolveAliasType(ExpType,true);
      if ((GotLoType !== null) && (ExpLoType !== null)) {
        if ((GotLoType.$class.ClassType() === ExpLoType.$class.ClassType()) && $lt100.isPrototypeOf(GotLoType)) {
          this.GetIncompatibleProcParamsDesc(GotLoType,ExpLoType,GotDesc,ExpDesc);
          if (GotDesc.get() !== ExpDesc.get()) return;
        };
      };
      GotDesc.set(this.GetTypeDescription(GotType,false));
      ExpDesc.set(this.GetTypeDescription(ExpType,false));
      if (GotDesc.get() !== ExpDesc.get()) return;
      GotDesc.set(this.GetTypeDescription(GotType,true));
      ExpDesc.set(this.GetTypeDescription(ExpType,true));
    };
    this.GetIncompatibleProcParamsDesc = function (GotType, ExpType, GotDesc, ExpDesc) {
      var $Self = this;
      function AppendClass(ProcType, Desc) {
        var C = null;
        C = ProcType.$class.ClassType();
        if (C === $lt100) {
          Desc.set(Desc.get() + "procedure")}
         else if (C === $lt101) {
          Desc.set(Desc.get() + "function")}
         else $Self.RaiseNotYetImplemented(20200216114419,ProcType,ProcType.$classname);
      };
      var i = 0;
      var GotArg = null;
      var ExpArg = null;
      var GotArgs = null;
      var ExpArgs = null;
      var GotArgDesc = "";
      var ExpArgDesc = "";
      var GotArgType = null;
      var ExpArgType = null;
      GotDesc.set("");
      ExpDesc.set("");
      if ((4 in GotType.Modifiers) && !(4 in ExpType.Modifiers)) {
        GotDesc.set("reference to ")}
       else if (!(4 in GotType.Modifiers) && (4 in ExpType.Modifiers)) ExpDesc.set("reference to ");
      AppendClass(GotType,GotDesc);
      AppendClass(ExpType,ExpDesc);
      GotDesc.set(GotDesc.get() + "(");
      ExpDesc.set(ExpDesc.get() + "(");
      GotArgs = GotType.Args;
      ExpArgs = ExpType.Args;
      for (var $l = 0, $end = GotArgs.FCount - 1; $l <= $end; $l++) {
        i = $l;
        if (i > 0) GotDesc.set(GotDesc.get() + ";");
        GotArg = rtl.getObject(GotArgs.Get(i));
        GotArgType = this.ResolveAliasType(GotArg.ArgType,true);
        if (i < ExpArgs.FCount) {
          if (i > 0) ExpDesc.set(ExpDesc.get() + ";");
          ExpArg = rtl.getObject(ExpArgs.Get(i));
          ExpArgType = this.ResolveAliasType(ExpArg.ArgType,true);
          if (GotArgType === ExpArgType) {
            GotDesc.set(GotDesc.get() + this.GetTypeDescription(GotArgType,false));
            ExpDesc.set(ExpDesc.get() + this.GetTypeDescription(ExpArgType,false));
          } else {
            this.GetIncompatibleTypeDesc$1(GotArgType,ExpArgType,{get: function () {
                return GotArgDesc;
              }, set: function (v) {
                GotArgDesc = v;
              }},{get: function () {
                return ExpArgDesc;
              }, set: function (v) {
                ExpArgDesc = v;
              }});
            GotDesc.set(GotDesc.get() + GotArgDesc);
            ExpDesc.set(ExpDesc.get() + ExpArgDesc);
          };
        } else {
          GotDesc.set(GotDesc.get() + this.GetTypeDescription(GotArgType,false));
        };
      };
      for (var $l1 = GotArgs.FCount, $end1 = ExpArgs.FCount - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        if (i > 0) ExpDesc.set(ExpDesc.get() + ";");
        ExpArg = rtl.getObject(ExpArgs.Get(i));
        ExpArgType = this.ResolveAliasType(ExpArg.ArgType,true);
        ExpDesc.set(ExpDesc.get() + this.GetTypeDescription(ExpArgType,false));
      };
      GotDesc.set(GotDesc.get() + ")");
      ExpDesc.set(ExpDesc.get() + ")");
      if ($lt101.isPrototypeOf(GotType)) GotDesc.set(GotDesc.get() + ": " + this.GetTypeDescription(this.ResolveAliasType(GotType.ResultEl.ResultType,true),false));
      if ($lt101.isPrototypeOf(ExpType)) ExpDesc.set(ExpDesc.get() + ": " + this.GetTypeDescription(this.ResolveAliasType(ExpType.ResultEl.ResultType,true),false));
      if ((0 in GotType.Modifiers) && !(0 in ExpType.Modifiers)) {
        GotDesc.set(GotDesc.get() + " of Object")}
       else if (!(0 in GotType.Modifiers) && (0 in ExpType.Modifiers)) ExpDesc.set(ExpDesc.get() + " of Object");
      if ((1 in GotType.Modifiers) && !(1 in ExpType.Modifiers)) {
        GotDesc.set(GotDesc.get() + " is nested")}
       else if (!(1 in GotType.Modifiers) && (1 in ExpType.Modifiers)) ExpDesc.set(ExpDesc.get() + " is nested");
      if ((2 in GotType.Modifiers) && !(2 in ExpType.Modifiers)) {
        GotDesc.set(GotDesc.get() + "; static")}
       else if (!(2 in GotType.Modifiers) && (2 in ExpType.Modifiers)) ExpDesc.set(ExpDesc.get() + "; static");
      if ((5 in GotType.Modifiers) && !(5 in ExpType.Modifiers)) {
        GotDesc.set(GotDesc.get() + "; async")}
       else if (!(5 in GotType.Modifiers) && (5 in ExpType.Modifiers)) ExpDesc.set(ExpDesc.get() + "; async");
      if ((3 in GotType.Modifiers) && !(3 in ExpType.Modifiers)) {
        GotDesc.set(GotDesc.get() + "; varargs")}
       else if (!(3 in GotType.Modifiers) && (3 in ExpType.Modifiers)) {
        ExpDesc.set(ExpDesc.get() + "; varargs")}
       else {
        if (GotType.VarArgsType !== null) GotDesc.set(GotDesc.get() + "; varargs of " + this.GetTypeDescription(this.ResolveAliasType(GotType.VarArgsType,true),false));
        if (ExpType.VarArgsType !== null) ExpDesc.set(ExpDesc.get() + "; varargs of " + this.GetTypeDescription(this.ResolveAliasType(ExpType.VarArgsType,true),false));
      };
      if (GotType.CallingConvention !== ExpType.CallingConvention) {
        GotDesc.set(GotDesc.get() + ";" + $lm4.cCallingConventions[GotType.CallingConvention]);
        ExpDesc.set(ExpDesc.get() + ";" + $lm4.cCallingConventions[ExpType.CallingConvention]);
      };
      if (GotDesc.get() === ExpDesc.get()) {
        if ($lt163.isPrototypeOf(GotType.FParent)) GotDesc.set("anonymous " + GotDesc.get());
        if ($lt163.isPrototypeOf(ExpType.FParent)) ExpDesc.set("anonymous " + ExpDesc.get());
      };
    };
    this.RaiseMsg = function (Id, MsgNumber, Fmt, Args, ErrorPosEl) {
      var E = null;
      this.SetLastMsg(Id,1,MsgNumber,Fmt,Args,ErrorPosEl);
      E = $lt3.$create("Create$1",[this.FLastMsg]);
      E.Id = Id;
      E.MsgType = 1;
      E.MsgNumber = MsgNumber;
      E.MsgPattern = Fmt;
      E.SetPasElement(ErrorPosEl);
      E.Args = rtl.arrayRef(this.FLastMsgArgs);
      E.SourcePos.$assign(this.FLastSourcePos);
      throw E;
    };
    this.RaiseNotYetImplemented = function (id, El, Msg) {
      var s = "";
      s = rtl.getResStr($lm5,"sNotYetImplemented") + " [" + $lp5(id) + "]";
      if (Msg !== "") s = s + ' "' + Msg + '"';
      this.RaiseMsg(id,3002,s,$lp6(18,$lp2(El)),El);
    };
    this.RaiseInternalError = function (id, Msg) {
      throw $lt81.$create("Create$1",["Internal error: [" + $lp5(id) + "] " + Msg]);
    };
    this.RaiseInvalidScopeForElement = function (id, El, Msg) {
      var i = 0;
      var s = "";
      s = "[" + $lp5(id) + '] invalid scope for "' + $lp2(El) + '": ';
      for (var $l = 0, $end = this.FScopeCount - 1; $l <= $end; $l++) {
        i = $l;
        if (i > 0) s = s + ",";
        s = s + this.GetScopes(i).$classname;
      };
      if (Msg !== "") s = s + ": " + Msg;
      this.RaiseInternalError(id,s);
    };
    this.RaiseIdentifierNotFound = function (id, Identifier, El) {
      this.RaiseMsg(id,3001,rtl.getResStr($lm5,"sIdentifierNotFound"),$lp6(18,Identifier),El);
    };
    this.RaiseXExpectedButYFound = function (id, X, Y, El) {
      this.RaiseMsg(id,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,X,18,Y),El);
    };
    this.RaiseXExpectedButTypeYFound = function (id, X, Y, El) {
      this.RaiseMsg(id,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,X,18,this.GetTypeDescription(Y,false)),El);
    };
    this.RaiseContextXExpectedButYFound = function (id, C, X, Y, El) {
      this.RaiseMsg(id,3078,rtl.getResStr($lm5,"sContextExpectedXButFoundY"),$lp6(18,C,18,X,18,Y),El);
    };
    this.RaiseContextXInvalidY = function (id, X, Y, El) {
      this.RaiseMsg(id,3079,rtl.getResStr($lm5,"sContextXInvalidY"),$lp6(18,X,18,Y),El);
    };
    this.RaiseConstantExprExp = function (id, ErrorEl) {
      this.RaiseMsg(id,3036,rtl.getResStr($lm5,"sConstantExpressionExpected"),[],ErrorEl);
    };
    this.RaiseVarExpected = function (id, ErrorEl, IdentEl) {
      if ($lt88.isPrototypeOf(IdentEl)) {
        this.RaiseMsg(id,3059,rtl.getResStr($lm5,"sNoMemberIsProvidedToAccessProperty"),[],ErrorEl)}
       else this.RaiseMsg(id,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],ErrorEl);
    };
    this.RaiseRangeCheck = function (id, ErrorEl) {
      this.RaiseMsg(id,3064,rtl.getResStr($lm5,"sRangeCheckError"),[],ErrorEl);
    };
    this.RaiseIncompatibleTypeDesc = function (id, MsgNumber, Args, GotDesc, ExpDesc, ErrorEl) {
      var $Self = this;
      function GetString(ArgNo) {
        var Result = "";
        if (ArgNo > (rtl.length(Args) - 1)) return "invalid param " + $lp5(ArgNo);
        var $tmp = Args[ArgNo].VType;
        if ($tmp === 18) {
          Result = Args[ArgNo].VJSValue}
         else {
          Result = "invalid param " + $lp5(Args[ArgNo].VType);
        };
        return Result;
      };
      var $tmp = MsgNumber;
      if ($tmp === 3035) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,GotDesc,18,ExpDesc),ErrorEl)}
       else if ($tmp === 3028) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,GotDesc,18,ExpDesc),ErrorEl)}
       else if ($tmp === 3006) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,GetString(0),18,GotDesc,18,ExpDesc),ErrorEl)}
       else if ($tmp === 3007) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sIncompatibleTypeArgNoVarParamMustMatchExactly"),$lp6(18,GetString(0),18,GotDesc,18,ExpDesc),ErrorEl)}
       else if ($tmp === 3019) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sResultTypeMismatchExpectedButFound"),$lp6(18,GotDesc,18,ExpDesc),ErrorEl)}
       else if ($tmp === 3010) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,GotDesc,18,ExpDesc),ErrorEl)}
       else if ($tmp === 3082) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sOperatorIsNotOverloadedAOpB"),$lp6(18,GotDesc,18,GetString(0),18,ExpDesc),ErrorEl)}
       else if ($tmp === 3029) {
        this.RaiseMsg(id,MsgNumber,rtl.getResStr($lm5,"sTypesAreNotRelatedXY"),$lp6(18,GotDesc,18,ExpDesc),ErrorEl)}
       else {
        this.RaiseInternalError(20170329112911,"");
      };
    };
    this.RaiseIncompatibleType = function (id, MsgNumber, Args, GotType, ExpType, ErrorEl) {
      var GotDesc = "";
      var ExpDesc = "";
      this.GetIncompatibleTypeDesc$1(GotType,ExpType,{get: function () {
          return GotDesc;
        }, set: function (v) {
          GotDesc = v;
        }},{get: function () {
          return ExpDesc;
        }, set: function (v) {
          ExpDesc = v;
        }});
      this.RaiseIncompatibleTypeDesc(id,MsgNumber,Args,GotDesc,ExpDesc,ErrorEl);
    };
    this.RaiseIncompatibleTypeRes = function (id, MsgNumber, Args, GotType, ExpType, ErrorEl) {
      var GotDesc = "";
      var ExpDesc = "";
      this.GetIncompatibleTypeDesc(GotType,ExpType,{get: function () {
          return GotDesc;
        }, set: function (v) {
          GotDesc = v;
        }},{get: function () {
          return ExpDesc;
        }, set: function (v) {
          ExpDesc = v;
        }});
      this.RaiseIncompatibleTypeDesc(id,MsgNumber,Args,GotDesc,ExpDesc,ErrorEl);
    };
    this.RaiseHelpersCannotBeUsedAsType = function (id, ErrorEl) {
      this.RaiseMsg(id,3117,rtl.getResStr($lm5,"sHelpersCannotBeUsedAsTypes"),[],ErrorEl);
    };
    this.RaiseInvalidProcTypeModifier = function (id, ProcType, ptm, ErrorEl) {
      this.RaiseMsg(id,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(ProcType),18,$lm4.ProcTypeModifiers[ptm]),ErrorEl);
    };
    this.RaiseInvalidProcModifier = function (id, Proc, pm, ErrorEl) {
      this.RaiseMsg(id,3016,rtl.getResStr($lm5,"sInvalidXModifierY"),$lp6(18,$mod.GetElementTypeName(Proc),18,$lm4.ModifierNames[pm]),ErrorEl);
    };
    this.ComputeElement = function (El, ResolvedEl, Flags, StartEl) {
      var $Self = this;
      function ComputeIdentifier(Expr) {
        var Ref = null;
        var Proc = null;
        var ProcType = null;
        Ref = Expr.FData;
        $Self.ComputeElement(Ref.FDeclaration,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(1)),StartEl);
        if (6 in Ref.Flags) ResolvedEl.Flags = rtl.excludeSet(ResolvedEl.Flags,1);
        if (!(0 in Flags) && (2 in Ref.Flags)) return;
        if (ResolvedEl.BaseType === 31) {
          if (1 in Flags) {
            if (0 in Flags) Ref.Flags = rtl.includeSet(Ref.Flags,2);
          } else if (rtl.eqSet(rtl.intersectSet(rtl.createSet(3,4),Flags),{})) {
            Proc = rtl.as(ResolvedEl.IdentEl,$lt90);
            if (!$Self.ProcNeedsParams(Proc.ProcType)) {
              if ($lt111.isPrototypeOf(ResolvedEl.IdentEl)) {
                $Self.ComputeResultElement(ResolvedEl.IdentEl.GetFT().ResultEl,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(5)),StartEl);
              } else if ($lt90.isPrototypeOf(ResolvedEl.IdentEl) && ResolvedEl.IdentEl.IsAsync() && $Self.ComputeProcAsyncResult(ResolvedEl.IdentEl,ResolvedEl,rtl.refSet(Flags),StartEl)) {}
              else if (ResolvedEl.IdentEl.$class.ClassType() === $lt108) {
                ResolvedEl.$assign($Self.GetReference_ConstructorType(Ref,Expr));
              } else if ($Self.ParentNeedsExprResult(Expr)) {
                return;
              };
              if (0 in Flags) {
                Ref.Flags = rtl.excludeSet(Ref.Flags,2);
                Ref.Flags = rtl.includeSet(Ref.Flags,1);
              };
              ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
            };
          };
        } else if ($Self.IsProcedureType(ResolvedEl,true)) {
          if (rtl.neSet(rtl.intersectSet(rtl.createSet(1,2),Flags),{})) {
            if (0 in Flags) Ref.Flags = rtl.includeSet(Ref.Flags,2);
          } else if (rtl.eqSet(rtl.intersectSet(rtl.createSet(3,4),Flags),{})) {
            ProcType = ResolvedEl.LoTypeEl;
            if (!$Self.ProcNeedsParams(ProcType)) {
              if ($lt101.isPrototypeOf(ResolvedEl.LoTypeEl)) {
                $Self.ComputeResultElement(ResolvedEl.LoTypeEl.ResultEl,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(5)),StartEl)}
               else if ($lt100.isPrototypeOf(ResolvedEl.LoTypeEl) && ResolvedEl.LoTypeEl.GetIsAsync() && $Self.ComputeProcAsyncResult(ResolvedEl.LoTypeEl,ResolvedEl,rtl.refSet(Flags),StartEl)) {}
              else if ($Self.ParentNeedsExprResult(Expr)) {
                return;
              };
              if (0 in Flags) {
                Ref.Flags = rtl.excludeSet(Ref.Flags,2);
                Ref.Flags = rtl.includeSet(Ref.Flags,1);
              };
              ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
            };
          };
        };
      };
      function ComputeInherited(Expr) {
        var Ref = null;
        var Proc = null;
        var TypeEl = null;
        var HasName = false;
        Ref = El.FData;
        Proc = rtl.as($mod.NoNil(Ref.FDeclaration),$lt90);
        TypeEl = Proc.ProcType;
        $mod.SetResolverIdentifier(ResolvedEl,31,Proc,TypeEl,TypeEl,rtl.createSet(3));
        HasName = (El.FParent.$class.ClassType() === $lt144) && (El.FParent.OpCode === 0);
        if (HasName || (1 in Flags)) return;
        if ($lt111.isPrototypeOf(Proc)) {
          $Self.ComputeResultElement(Proc.GetFT().ResultEl,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(5)),StartEl);
          ResolvedEl.Flags = rtl.excludeSet(ResolvedEl.Flags,1);
        } else if ((Proc.$class.ClassType() === $lt108) && (3 in Ref.Flags)) {
          ResolvedEl.$assign($Self.GetReference_ConstructorType(Ref,Expr));
        } else if ($Self.ParentNeedsExprResult(Expr)) {
          return;
        };
        if (0 in Flags) {
          Ref.Flags = rtl.excludeSet(Ref.Flags,2);
          Ref.Flags = rtl.includeSet(Ref.Flags,1);
        };
        ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
      };
      function ComputeSpecializeType(SpecType) {
        var TypeEl = null;
        if (SpecType.SubType !== null) {
          $Self.ComputeElement(SpecType.SubType,ResolvedEl,rtl.refSet(Flags),StartEl)}
         else if ($lt5.isPrototypeOf(SpecType.FData)) {
          TypeEl = SpecType.FData.SpecializedType;
          if (TypeEl === null) $Self.RaiseNotYetImplemented(20190908153503,El,"");
          $mod.SetResolverIdentifier(ResolvedEl,2,TypeEl,TypeEl,TypeEl,{});
        } else {
          TypeEl = SpecType.DestType;
          if (TypeEl === null) $Self.RaiseNotYetImplemented(20190908153434,El,"");
          $mod.SetResolverIdentifier(ResolvedEl,2,SpecType,TypeEl,SpecType,{});
        };
      };
      function ComputeExportSymbol(ExpSymbol) {
        var Ref = null;
        if ($lt55.isPrototypeOf(ExpSymbol.FData)) {
          Ref = El.FData;
          $Self.ComputeElement(Ref.FDeclaration,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(1)),StartEl);
        } else if (ExpSymbol.NameExpr !== null) {
          $Self.ComputeElement(ExpSymbol.NameExpr,ResolvedEl,rtl.refSet(Flags),StartEl)}
         else $Self.RaiseNotYetImplemented(20210106225512,ExpSymbol,"");
      };
      var DeclEl = null;
      var ElClass = null;
      var bt = 0;
      var TypeEl = null;
      var Value = null;
      var Int = 0;
      if (StartEl === null) StartEl = El;
      ResolvedEl.$assign($lt59.$new());
      if (El === null) return;
      ElClass = El.$class.ClassType();
      if (ElClass === $lt142) {
        var $tmp = El.Kind;
        if (($tmp === 0) || ($tmp === 14)) {
          if (!$lt55.isPrototypeOf(El.FData)) this.RaiseNotYetImplemented(20160922163658,El,'Value="' + El.Value + '" CustomData=' + $lp2(El.FData) + " " + this.GetElementSourcePosStr(El));
          ComputeIdentifier(El);
        } else if ($tmp === 1) {
          if ($lp22(El.Value)) {
            bt = this.FBaseTypeExtended}
           else if (El.Value.length < 9) {
            bt = 26}
           else {
            Value = this.Eval(El,{},true);
            if (Value === null) this.RaiseNotYetImplemented(20190130162601,El,"");
            try {
              var $tmp1 = Value.Kind;
              if ($tmp1 === 4) {
                Int = Value.Int;
                bt = this.GetSmallestIntegerBaseType(Int,Int);
              } else {
                bt = this.FBaseTypeExtended;
              };
            } finally {
              $lp12({get: function () {
                  return Value;
                }, set: function (v) {
                  Value = v;
                }});
            };
          };
          $mod.SetResolverValueExpr(ResolvedEl,bt,this.FBaseTypes[bt],this.FBaseTypes[bt],El,rtl.createSet(0));
        } else if ($tmp === 2) {
          bt = this.IsCharLiteral(El.Value,El);
          if (bt in $mod.btAllChars) {
            if (bt === this.FBaseTypeChar) bt = 5;
            $mod.SetResolverValueExpr(ResolvedEl,bt,this.FBaseTypes[bt],this.FBaseTypes[bt],El,rtl.createSet(0));
          } else $mod.SetResolverValueExpr(ResolvedEl,7,this.FBaseTypes[7],this.FBaseTypes[7],El,rtl.createSet(0));
        } else if ($tmp === 3) {
          $mod.SetResolverValueExpr(ResolvedEl,7,this.FBaseTypes[7],this.FBaseTypes[7],El,rtl.createSet(0));
        } else if ($tmp === 5) {
          $mod.SetResolverValueExpr(ResolvedEl,30,this.FBaseTypes[30],this.FBaseTypes[30],El,rtl.createSet(0))}
         else if ($tmp === 6) {
          $mod.SetResolverValueExpr(ResolvedEl,15,this.FBaseTypes[15],this.FBaseTypes[15],El,rtl.createSet(0))}
         else {
          this.RaiseNotYetImplemented(20160922163701,El,"");
        };
      } else if (ElClass === $lt83) {
        if ($lt62.isPrototypeOf(El.FData)) {
          $mod.SetResolverIdentifier(ResolvedEl,El.FData.BaseType,El,El,El,{})}
         else if ($lt64.isPrototypeOf(El.FData)) {
          $mod.SetResolverIdentifier(ResolvedEl,32,El,El,El,{});
          if (0 in El.FData.Flags) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
        } else this.RaiseNotYetImplemented(20160926194756,El,"");
      } else if (ElClass === $lt146) {
        $mod.SetResolverValueExpr(ResolvedEl,15,this.FBaseTypes[15],this.FBaseTypes[15],El,rtl.createSet(0))}
       else if (ElClass === $lt144) {
        this.ComputeBinaryExpr(El,ResolvedEl,rtl.refSet(Flags),StartEl)}
       else if (ElClass === $lt143) {
        if (El.OpCode in rtl.createSet(24,26)) {
          this.ComputeElement(El.Operand,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(1)),StartEl)}
         else this.ComputeElement(El.Operand,ResolvedEl,rtl.refSet(Flags),StartEl);
        var $tmp2 = El.OpCode;
        if ($tmp2 === 1) {
          if (ResolvedEl.BaseType in rtl.unionSet($mod.btAllInteger,$mod.btAllFloats)) {
            return}
           else if (this.IsGenericTemplType(ResolvedEl)) {
            return}
           else this.RaiseMsg(20170216152532,3085,rtl.getResStr($lm5,"sIllegalQualifierInFrontOf"),$lp6(18,$lm4.OpcodeStrings[El.OpCode],18,this.GetResolverResultDescription(ResolvedEl,false)),El)}
         else if ($tmp2 === 2) {
          if (ResolvedEl.BaseType in rtl.unionSet($mod.btAllSignedInteger,$mod.btAllFloats)) {
            return}
           else if (ResolvedEl.BaseType in $mod.btAllInteger) {
            var $tmp3 = ResolvedEl.BaseType;
            if (($tmp3 === 19) || ($tmp3 === 21)) {
              ResolvedEl.BaseType = 26}
             else if (($tmp3 === 25) || ($tmp3 === 27)) ResolvedEl.BaseType = 28;
            return;
          } else if (this.IsGenericTemplType(ResolvedEl)) {
            return}
           else this.RaiseMsg(20210815225815,3085,rtl.getResStr($lm5,"sIllegalQualifierInFrontOf"),$lp6(18,$lm4.OpcodeStrings[El.OpCode],18,this.GetResolverResultDescription(ResolvedEl,false)),El)}
         else if ($tmp2 === 10) {
          if (ResolvedEl.BaseType in rtl.unionSet($mod.btAllInteger,$mod.btAllBooleans)) {}
          else this.ComputeUnaryNot(El,ResolvedEl,rtl.refSet(Flags));
          return;
        } else if ($tmp2 === 24) {
          if ((ResolvedEl.BaseType === 31) && $lt90.isPrototypeOf(ResolvedEl.IdentEl)) {
            $mod.SetResolverValueExpr(ResolvedEl,2,ResolvedEl.LoTypeEl,ResolvedEl.HiTypeEl,El.Operand,rtl.createSet(0));
            return;
          } else if ((0 in ResolvedEl.Flags) && (ResolvedEl.BaseType !== 29)) {
            $mod.SetResolverValueExpr(ResolvedEl,29,ResolvedEl.LoTypeEl,ResolvedEl.HiTypeEl,El.Operand,rtl.createSet(0));
            return;
          } else this.RaiseMsg(20180208121541,3085,rtl.getResStr($lm5,"sIllegalQualifierInFrontOf"),$lp6(18,$lm4.OpcodeStrings[El.OpCode],18,this.GetResolverResultDescription(ResolvedEl,false)),El)}
         else if ($tmp2 === 25) {
          this.ComputeDereference(El,ResolvedEl);
          return;
        } else if ($tmp2 === 26) if ((ResolvedEl.BaseType === 2) && ($lt100.isPrototypeOf(ResolvedEl.LoTypeEl) || this.IsGenericTemplType(ResolvedEl))) {
          return}
         else this.RaiseMsg(20180208121549,3085,rtl.getResStr($lm5,"sIllegalQualifierInFrontOf"),$lp6(18,$lm4.OpcodeStrings[El.OpCode],18,this.GetResolverResultDescription(ResolvedEl,false)),El);
        this.RaiseNotYetImplemented(20160926142426,El,"");
      } else if (ElClass === $lt145) {
        var $tmp4 = El.Kind;
        if ($tmp4 === 11) {
          this.ComputeArrayParams(El,ResolvedEl,rtl.refSet(Flags),StartEl)}
         else if ($tmp4 === 10) {
          this.ComputeFuncParams(El,ResolvedEl,rtl.refSet(Flags),StartEl)}
         else if ($tmp4 === 4) {
          this.ComputeSetParams(El,ResolvedEl,rtl.refSet(Flags),StartEl)}
         else {
          this.RaiseNotYetImplemented(20161010184559,El,"");
        };
      } else if (ElClass === $lt148) {
        if ($lt55.isPrototypeOf(El.FData)) {
          ComputeInherited(El)}
         else $mod.SetResolverIdentifier(ResolvedEl,32,null,null,null,rtl.createSet(3));
      } else if ((ElClass === $lt157) || (ElClass === $lt158)) {
        this.ComputeElement(El.DestType,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(4)),StartEl);
        ResolvedEl.IdentEl = El;
        ResolvedEl.HiTypeEl = El;
      } else if (ElClass === $lt105) {
        if (3 in Flags) this.RaiseConstantExprExp(20170216152737,StartEl);
        this.ComputeElement(El.VarType,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(4)),StartEl);
        ResolvedEl.IdentEl = El;
        ResolvedEl.Flags = rtl.createSet(0,1);
      } else if (ElClass === $lt117) {
        if (El.VarType !== null) {
          if (!El.IsConst && rtl.neSet(rtl.intersectSet(rtl.createSet(3,4),Flags),{})) this.RaiseConstantExprExp(20170216152739,StartEl);
          this.ComputeElement(El.VarType,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(4)),StartEl);
          ResolvedEl.IdentEl = El;
          if (El.IsConst) {
            ResolvedEl.Flags = rtl.createSet(0)}
           else ResolvedEl.Flags = rtl.createSet(0,1);
        } else {
          this.ComputeElement(El.Expr,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(3)),StartEl);
          ResolvedEl.IdentEl = El;
          ResolvedEl.Flags = rtl.createSet(0);
        };
      } else if (ElClass === $lt112) {
        TypeEl = rtl.as($mod.NoNil(El.FParent),$lt99);
        $mod.SetResolverIdentifier(ResolvedEl,2,El,TypeEl,TypeEl,rtl.createSet(0));
      } else if (ElClass === $lt99) {
        $mod.SetResolverIdentifier(ResolvedEl,2,El,El,El,{})}
       else if (ElClass === $lt88) {
        if (3 in Flags) this.RaiseConstantExprExp(20170216152741,StartEl);
        if (this.GetPasPropertyArgs(El).FCount === 0) {
          this.ComputeElement(this.GetPasPropertyType(El),ResolvedEl,rtl.unionSet(Flags,rtl.createSet(4)),StartEl);
          ResolvedEl.IdentEl = El;
          ResolvedEl.Flags = {};
          if (this.GetPasPropertyGetter(El) !== null) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,0);
          if (this.GetPasPropertySetter(El) !== null) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,1);
          if (this.IsProcedureType(ResolvedEl,true)) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
        } else {
          $mod.SetResolverIdentifier(ResolvedEl,33,El,null,null,{});
        };
      } else if (ElClass === $lt106) {
        if (3 in Flags) this.RaiseConstantExprExp(20170216152744,StartEl);
        if (El.ArgType === null) {
          $mod.SetResolverIdentifier(ResolvedEl,4,El,null,null,{})}
         else {
          this.ComputeElement(El.ArgType,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(4)),StartEl);
          ResolvedEl.IdentEl = El;
        };
        ResolvedEl.Flags = rtl.createSet(0);
        if (El.Access in rtl.createSet(0,2,3)) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,1);
        if (this.IsProcedureType(ResolvedEl,true)) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,3);
      } else if (ElClass === $lt94) {
        if (El.IsForward && (El.FData !== null)) {
          DeclEl = rtl.as(El.FData,$lt55).FDeclaration;
          TypeEl = rtl.as($mod.NoNil(DeclEl),$lt94);
        } else TypeEl = El;
        $mod.SetResolverIdentifier(ResolvedEl,2,TypeEl,TypeEl,TypeEl,{});
      } else if (ElClass === $lt96) {
        $mod.SetResolverIdentifier(ResolvedEl,2,El,El,El,{})}
       else if (ElClass === $lt97) {
        $mod.SetResolverIdentifier(ResolvedEl,2,El,El,El,{})}
       else if (ElClass === $lt98) {
        $mod.SetResolverIdentifier(ResolvedEl,2,El,El,El,{})}
       else if (ElClass === $lt103) {
        this.ComputeElement(El.RangeExpr,ResolvedEl,rtl.createSet(3),StartEl);
        ResolvedEl.IdentEl = El;
        ResolvedEl.LoTypeEl = El;
        ResolvedEl.HiTypeEl = ResolvedEl.LoTypeEl;
        if (ResolvedEl.ExprEl === null) ResolvedEl.ExprEl = El.RangeExpr;
        ResolvedEl.Flags = {};
      } else if (ElClass === $lt119) {
        this.ComputeElement(El.EnumType,ResolvedEl,rtl.createSet(3),StartEl);
        if (ResolvedEl.BaseType === 37) {
          this.ConvertRangeToElement(ResolvedEl);
          ResolvedEl.LoTypeEl = El.EnumType;
          ResolvedEl.HiTypeEl = ResolvedEl.LoTypeEl;
        };
        ResolvedEl.SubType = ResolvedEl.BaseType;
        ResolvedEl.BaseType = 34;
        ResolvedEl.IdentEl = El;
        ResolvedEl.Flags = {};
      } else if (ElClass === $lt141) {
        if (3 in Flags) this.RaiseConstantExprExp(20170216152746,StartEl);
        this.ComputeResultElement(El,ResolvedEl,rtl.refSet(Flags),StartEl);
      } else if (ElClass === $lt87) {
        if ($lt86.isPrototypeOf(El.Module)) {
          $mod.SetResolverIdentifier(ResolvedEl,3,El.Module,null,null,{})}
         else this.RaiseNotYetImplemented(20170429112047,El.Module,"");
      } else if (El.$class.InheritsFrom($lt86)) {
        $mod.SetResolverIdentifier(ResolvedEl,3,El,null,null,{})}
       else if (ElClass === $lt147) {
        $mod.SetResolverValueExpr(ResolvedEl,30,this.FBaseTypes[30],this.FBaseTypes[30],El,rtl.createSet(0))}
       else if (El.$class.InheritsFrom($lt90)) {
        TypeEl = El.ProcType;
        $mod.SetResolverIdentifier(ResolvedEl,31,El,TypeEl,TypeEl,rtl.createSet(3));
        if ($lt101.isPrototypeOf(El.ProcType) || (ElClass === $lt108)) ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,0);
      } else if (El.$class.InheritsFrom($lt100)) {
        $mod.SetResolverIdentifier(ResolvedEl,2,El,El,El,rtl.createSet(3));
      } else if (ElClass === $lt151) {
        TypeEl = El.Proc.ProcType;
        $mod.SetResolverValueExpr(ResolvedEl,31,TypeEl,TypeEl,El,rtl.createSet(0));
      } else if (ElClass === $lt102) {
        $mod.SetResolverIdentifier(ResolvedEl,2,El,El,El,{})}
       else if (ElClass === $lt149) {
        $mod.SetResolverValueExpr(ResolvedEl,35,null,null,El,rtl.createSet(0))}
       else if (ElClass === $lt150) {
        this.ComputeRecordValues(El,ResolvedEl,rtl.refSet(Flags),StartEl)}
       else if (ElClass === $lt174) {
        this.RaiseMsg(20170419203146,3003,rtl.getResStr($lm5,"sIllegalQualifier"),$lp6(9,"["),El);
      } else if (ElClass === $lt178) {
        $mod.SetResolverIdentifier(ResolvedEl,7,El,this.FBaseTypes[7],this.FBaseTypes[7],rtl.createSet(0))}
       else if (ElClass === $lt104) {
        $mod.SetResolverIdentifier(ResolvedEl,2,El,El,El,{})}
       else if (ElClass === $lt155) {
        ComputeSpecializeType(El)}
       else if (ElClass === $lt152) {
        this.ComputeElement(El.NameExpr,ResolvedEl,rtl.refSet(Flags),StartEl)}
       else if (ElClass === $lt166) {
        ComputeExportSymbol(El)}
       else this.RaiseNotYetImplemented(20160922163705,El,"");
    };
    this.ComputeResultElement = function (El, ResolvedEl, Flags, StartEl) {
      if (El.ResultType === null) this.RaiseNotYetImplemented(20200524214458,El,"");
      this.ComputeElement(El.ResultType,ResolvedEl,rtl.unionSet(Flags,rtl.createSet(4,1)),StartEl);
      ResolvedEl.IdentEl = El;
      ResolvedEl.Flags = rtl.createSet(0,1);
    };
    this.ComputeProcAsyncResult = function (El, ResolvedEl, Flags, StartEl) {
      var Result = false;
      Result = false;
      if (El === null) ;
      if (rtl.eqSet(Flags,{})) ;
      if (StartEl === null) ;
      if (ResolvedEl.IdentEl === null) ;
      return Result;
    };
    this.Eval = function (Expr, Flags, Store) {
      var Result = null;
      Result = this.fExprEvaluator.Eval(Expr,rtl.refSet(Flags));
      if (Result === null) return Result;
      if (Store && (Expr.FData === null) && (Result.FElement === null) && !this.fExprEvaluator.IsSimpleExpr(Expr) && (Expr.GetModule() === this.FRootElement)) {
        this.AddResolveData(Expr,Result,1);
      };
      return Result;
    };
    this.Eval$1 = function (Value, Flags, Store) {
      var Result = null;
      var Expr = null;
      Result = null;
      if (Value.ExprEl !== null) {
        Result = this.Eval(Value.ExprEl,rtl.refSet(Flags),Store)}
       else if ($lt117.isPrototypeOf(Value.IdentEl)) {
        Expr = Value.IdentEl.Expr;
        if (Expr === null) return Result;
        Result = this.Eval(Expr,rtl.refSet(Flags),Store);
      };
      return Result;
    };
    this.IsSameType = function (TypeA, TypeB, ResolveAlias) {
      var Result = false;
      var btA = 0;
      var btB = 0;
      if ((TypeA === null) || (TypeB === null)) return false;
      var $tmp = ResolveAlias;
      if ($tmp === 1) {
        TypeA = $mod.ResolveSimpleAliasType(TypeA);
        TypeB = $mod.ResolveSimpleAliasType(TypeB);
      } else if ($tmp === 2) {
        TypeA = this.ResolveAliasType(TypeA,true);
        TypeB = this.ResolveAliasType(TypeB,true);
      };
      if (TypeA === TypeB) return true;
      if ((TypeA.$class.ClassType() === $lt83) && (TypeB.$class.ClassType() === $lt83)) {
        if ($lp4(TypeA.FName,TypeB.FName) === 0) return true;
        btA = TypeA.FData.BaseType;
        btB = TypeB.FData.BaseType;
        Result = this.GetActualBaseType(btA) === this.GetActualBaseType(btB);
        return Result;
      };
      Result = false;
      return Result;
    };
    this.HasExactType = function (ResolvedEl) {
      var Result = false;
      var IdentEl = null;
      var Expr = null;
      IdentEl = ResolvedEl.IdentEl;
      if (IdentEl !== null) {
        if ($lt105.isPrototypeOf(IdentEl)) {
          return IdentEl.VarType !== null}
         else if (IdentEl.$class.ClassType() === $lt106) {
          return IdentEl.ArgType !== null}
         else if (IdentEl.$class.ClassType() === $lt141) {
          return IdentEl.ResultType !== null}
         else if ($lt95.isPrototypeOf(IdentEl)) {
          return true}
         else return false;
      };
      Expr = ResolvedEl.ExprEl;
      if (Expr !== null) {
        if (Expr.Kind in rtl.createSet(1,2,3,5,6)) {
          return true}
         else return false;
      };
      Result = false;
      return Result;
    };
    this.IndexOfGenericParam = function (Params) {
      var Result = 0;
      var i = 0;
      var ParamResolved = $lt59.$new();
      for (var $l = 0, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
        i = $l;
        this.ComputeElement(Params[i],ParamResolved,{},null);
        if ($lt104.isPrototypeOf(ParamResolved.LoTypeEl)) return i;
      };
      Result = -1;
      return Result;
    };
    this.CheckUseAsType = function (aType, id, PosEl) {
      if (aType === null) return;
      if ($lt93.isPrototypeOf(aType)) {
        if (aType.$class.ClassType() === $lt94) {
          if (aType.HelperForType !== null) this.RaiseHelpersCannotBeUsedAsType(id,PosEl);
        };
        if ((aType.GenericTemplateTypes !== null) && (aType.GenericTemplateTypes.FCount > 0)) {
          if (!(3 in this.FCurrentParser.GetCurrentModeSwitches()) && PosEl.HasParent(aType)) {}
          else this.RaiseMsg(id,3131,rtl.getResStr($lm5,"sGenericsWithoutSpecializationAsType"),$lp6(18,PosEl.ElementTypeName()),PosEl);
        };
      };
    };
    this.CheckCallProcCompatibility = function (ProcType, Params, RaiseOnError, SetReferenceFlags) {
      var Result = 0;
      var ProcArgs = null;
      var i = 0;
      var ParamCnt = 0;
      var ParamCompatibility = 0;
      var Param = null;
      var Value = null;
      var ParamResolved = $lt59.$new();
      var ArgResolved = $lt59.$new();
      var Flags = {};
      Result = 0;
      ProcArgs = ProcType.Args;
      Value = Params.Value;
      if ($lt144.isPrototypeOf(Value)) Value = Value.Right;
      ParamCnt = rtl.length(Params.Params);
      ArgResolved.BaseType = 0;
      i = 0;
      while (i < ParamCnt) {
        Param = Params.Params[i];
        if (i < ProcArgs.FCount) {
          ParamCompatibility = this.CheckParamCompatibility(Param,rtl.getObject(ProcArgs.Get(i)),i,RaiseOnError,SetReferenceFlags);
          if (ParamCompatibility === 2147483647) return 2147483647;
        } else {
          if (3 in ProcType.Modifiers) {
            if (ProcType.VarArgsType !== null) {
              if (ArgResolved.BaseType === 0) this.ComputeElement(ProcType.VarArgsType,ArgResolved,rtl.createSet(4),null);
              this.ComputeArgumentExpr(ArgResolved,1,Param,ParamResolved,SetReferenceFlags);
              ParamCompatibility = this.CheckParamResCompatibility(Param,ParamResolved,ArgResolved,i,RaiseOnError,SetReferenceFlags);
              if (ParamCompatibility === 2147483647) return 2147483647;
            } else {
              if (SetReferenceFlags) {
                Flags = rtl.createSet(2,0)}
               else Flags = rtl.createSet(2);
              this.ComputeElement(Param,ParamResolved,rtl.refSet(Flags),Param);
              if (!(0 in ParamResolved.Flags)) {
                if (RaiseOnError) this.RaiseVarExpected(20180712001415,Param,ParamResolved.IdentEl);
                return 2147483647;
              };
              ParamCompatibility = 0;
            };
          } else {
            if (RaiseOnError) this.RaiseMsg(20170216152408,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,this.GetProcTypeDescription(ProcType,rtl.createSet(0,2))),Param);
            return 2147483647;
          };
        };
        if (Result < 10000) {
          Result += ParamCompatibility}
         else Result = Math.max(Result,ParamCompatibility);
        i += 1;
      };
      if (i < ProcArgs.FCount) if (rtl.getObject(ProcArgs.Get(i)).ValueExpr === null) {
        if (RaiseOnError) this.RaiseMsg(20170216152410,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,this.GetProcTypeDescription(ProcType,rtl.createSet(0,2))),Params.Value);
        return 2147483647;
      };
      return Result;
    };
    this.CheckCallPropertyCompatibility = function (PropEl, Params, RaiseOnError) {
      var Result = 0;
      var PropArg = null;
      var ArgNo = 0;
      var ParamComp = 0;
      var Param = null;
      var PropArgs = null;
      Result = 0;
      PropArgs = this.GetPasPropertyArgs(PropEl);
      if (PropArgs.FCount < rtl.length(Params.Params)) {
        if (!RaiseOnError) return 2147483647;
        this.RaiseMsg(20170216152412,3005,rtl.getResStr($lm5,"sWrongNumberOfParametersForCallTo"),$lp6(18,PropEl.FName),Params);
      } else if (PropArgs.FCount > rtl.length(Params.Params)) {
        if (!RaiseOnError) return 2147483647;
        this.RaiseMsg(20170216152413,3031,rtl.getResStr($lm5,"sMissingParameterX"),$lp6(18,rtl.getObject(PropArgs.Get(rtl.length(Params.Params))).FName),Params);
      };
      for (var $l = 0, $end = PropArgs.FCount - 1; $l <= $end; $l++) {
        ArgNo = $l;
        PropArg = rtl.getObject(PropArgs.Get(ArgNo));
        Param = Params.Params[ArgNo];
        ParamComp = this.CheckParamCompatibility(Param,PropArg,ArgNo,RaiseOnError,false);
        if (ParamComp === 2147483647) return 2147483647;
        Result += ParamComp;
      };
      return Result;
    };
    this.CheckCallArrayCompatibility = function (ArrayEl, Params, RaiseOnError, EmitHints) {
      var $Self = this;
      var Result = 0;
      var ArgNo = 0;
      var Param = null;
      var ParamResolved = $lt59.$new();
      function GetNextParam() {
        if (ArgNo >= rtl.length(Params.Params)) $Self.RaiseMsg(20170216152415,3042,rtl.getResStr($lm5,"sWrongNumberOfParametersForArray"),[],Params);
        Param = Params.Params[ArgNo];
        $Self.ComputeElement(Param,ParamResolved,{},null);
        ArgNo += 1;
      };
      var DimNo = 0;
      var RangeResolved = $lt59.$new();
      var OrigRangeResolved = $lt59.$new();
      var OrigParamResolved = $lt59.$new();
      var bt = 0;
      var NextType = null;
      var TypeEl = null;
      var RangeExpr = null;
      var TypeFits = false;
      var ParamValue = null;
      ArgNo = 0;
      do {
        if (rtl.length(ArrayEl.Ranges) === 0) {
          GetNextParam();
          if (!(0 in ParamResolved.Flags) || !(ParamResolved.BaseType in $mod.btAllInteger)) return this.CheckRaiseTypeArgNo(20170216152417,ArgNo,Param,ParamResolved,"integer",RaiseOnError);
          if (EmitHints) {
            ParamValue = this.Eval(Param,rtl.createSet(3),true);
            if (ParamValue !== null) try {
              if (ParamValue.Kind === 13) {}
              else if ((ParamValue.Kind !== 4) || (ParamValue.Int < this.FDynArrayMinIndex) || (ParamValue.Int > this.FDynArrayMaxIndex)) this.fExprEvaluator.EmitRangeCheckConst$1(20170520202212,ParamValue.AsString(),this.FDynArrayMinIndex,this.FDynArrayMaxIndex,Param,2);
            } finally {
              $lp12({get: function () {
                  return ParamValue;
                }, set: function (v) {
                  ParamValue = v;
                }});
            };
          };
        } else {
          for (var $l = 0, $end = rtl.length(ArrayEl.Ranges) - 1; $l <= $end; $l++) {
            DimNo = $l;
            GetNextParam();
            RangeExpr = ArrayEl.Ranges[DimNo];
            this.ComputeElement(RangeExpr,RangeResolved,{},null);
            bt = RangeResolved.BaseType;
            if (!(0 in ParamResolved.Flags)) {
              if (!RaiseOnError) return 2147483647;
              this.RaiseIncompatibleTypeRes(20170216152421,3006,$lp6(18,$lp5(ArgNo)),ParamResolved,RangeResolved,Param);
            };
            TypeFits = false;
            OrigRangeResolved.$assign(RangeResolved);
            OrigParamResolved.$assign(ParamResolved);
            if (bt === 37) {
              this.ConvertRangeToElement(RangeResolved);
              bt = RangeResolved.BaseType;
            };
            if (ParamResolved.BaseType === 37) {
              this.ConvertRangeToElement(ParamResolved);
            };
            if (bt in $mod.btAllBooleans) {
              if (ParamResolved.BaseType in $mod.btAllBooleans) TypeFits = true;
            } else if (bt in $mod.btAllInteger) {
              if (ParamResolved.BaseType in $mod.btAllInteger) TypeFits = true;
            } else if (bt in $mod.btAllChars) {
              if (ParamResolved.BaseType in $mod.btAllChars) TypeFits = true;
            } else if (bt === 2) {
              TypeEl = RangeResolved.LoTypeEl;
              if (ParamResolved.BaseType === 2) {
                if ((TypeEl.$class.ClassType() === $lt99) && this.IsSameType(TypeEl,ParamResolved.LoTypeEl,0)) TypeFits = true;
              };
            };
            if (!TypeFits) {
              if (!RaiseOnError) return 2147483647;
              this.RaiseIncompatibleTypeRes(20170216152422,3006,$lp6(18,$lp5(ArgNo)),OrigParamResolved,OrigRangeResolved,Param);
            };
            if (EmitHints) this.fExprEvaluator.IsInRange(Param,RangeExpr,true);
          };
        };
        if (ArgNo === rtl.length(Params.Params)) return 0;
        NextType = this.ResolveAliasType(ArrayEl.ElType,true);
        if (NextType.$class.ClassType() !== $lt102) this.RaiseMsg(20170216152424,3042,rtl.getResStr($lm5,"sWrongNumberOfParametersForArray"),[],Params);
        ArrayEl = NextType;
      } while (!false);
      Result = 2147483647;
      return Result;
    };
    this.CheckParamCompatibility = function (Expr, Param, ParamNo, RaiseOnError, SetReferenceFlags) {
      var Result = 0;
      var ExprResolved = $lt59.$new();
      var ParamResolved = $lt59.$new();
      var NeedVar = false;
      Result = 2147483647;
      this.ComputeArgumentAndExpr(Param,ParamResolved,Expr,ExprResolved,SetReferenceFlags);
      NeedVar = Param.Access in rtl.createSet(2,3);
      if (NeedVar) {
        if (!this.ResolvedElCanBeVarParam(ExprResolved,Expr,true)) {
          if (RaiseOnError) {
            if ($lt117.isPrototypeOf(ExprResolved.IdentEl)) {
              this.RaiseMsg(20180430012609,3110,rtl.getResStr($lm5,"sCantAssignValuesToConstVariable"),[],Expr)}
             else this.RaiseVarExpected(20180430012457,Expr,ExprResolved.IdentEl);
          };
          return Result;
        };
        if (Param.ArgType === null) return 0;
        if (this.GetActualBaseType(ParamResolved.BaseType) === this.GetActualBaseType(ExprResolved.BaseType)) {
          if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
            if (this.IsSameType(ParamResolved.HiTypeEl,ExprResolved.HiTypeEl,1)) return 0;
          } else if (this.IsSameType(ParamResolved.LoTypeEl,ExprResolved.LoTypeEl,0)) {
            if (this.IsSameType(ParamResolved.HiTypeEl,ExprResolved.HiTypeEl,1)) {
              return 0}
             else return 2;
          };
          if ((ParamResolved.BaseType === 2) && (ParamResolved.LoTypeEl.$class.ClassType() === $lt102) && (ExprResolved.LoTypeEl.$class.ClassType() === $lt102)) {
            Result = this.CheckAssignResCompatibility(ParamResolved,ExprResolved,Expr,false);
            if (Result !== 2147483647) return Result;
          };
        };
        if (this.IsGenericTemplType(ParamResolved)) return 1;
        if (RaiseOnError) this.RaiseIncompatibleTypeRes(20170216152452,3007,$lp6(18,$lp5(ParamNo + 1)),ExprResolved,ParamResolved,Expr);
        return 2147483647;
      };
      Result = this.CheckParamResCompatibility(Expr,ExprResolved,ParamResolved,ParamNo,RaiseOnError,SetReferenceFlags);
      return Result;
    };
    this.CheckParamResCompatibility = function (Expr, ExprResolved, ParamResolved, ParamNo, RaiseOnError, SetReferenceFlags) {
      var Result = 0;
      var UseAssignError = false;
      UseAssignError = false;
      if (RaiseOnError && (ExprResolved.BaseType in rtl.createSet(35,36))) UseAssignError = true;
      Result = this.CheckAssignResCompatibility(ParamResolved,ExprResolved,Expr,UseAssignError);
      if ((Result === 2147483647) && RaiseOnError) this.RaiseIncompatibleTypeRes(20170216152454,3006,$lp6(18,$lp5(ParamNo + 1)),ExprResolved,ParamResolved,Expr);
      if (SetReferenceFlags && (ParamResolved.BaseType === 2) && (ParamResolved.LoTypeEl.$class.ClassType() === $lt102)) this.MarkArrayExprRecursive(Expr,ParamResolved.LoTypeEl);
      return Result;
    };
    this.CheckAssignCompatibilityUserType = function (LHS, RHS, ErrorEl, RaiseOnIncompatible) {
      var $Self = this;
      var Result = 0;
      var RTypeEl = null;
      var LTypeEl = null;
      var SrcResolved = $lt59.$new();
      var DstResolved = $lt59.$new();
      var LArray = null;
      var RArray = null;
      var GotDesc = "";
      var ExpDesc = "";
      var CurTVarRec = null;
      var LeftClass = null;
      var RightClass = null;
      function RaiseIncompatType(Id) {
        var Result = 0;
        Result = 2147483647;
        if (!RaiseOnIncompatible) return Result;
        $Self.RaiseIncompatibleTypeRes(Id,3028,[],RHS,LHS,ErrorEl);
        return Result;
      };
      if (RHS.LoTypeEl === null) this.RaiseInternalError(20160922163645,"");
      if (LHS.LoTypeEl === null) this.RaiseInternalError(20160922163648,"");
      LTypeEl = LHS.LoTypeEl;
      RTypeEl = RHS.LoTypeEl;
      if ((LTypeEl === RTypeEl) && (0 in RHS.Flags)) return 0;
      Result = -1;
      if (LTypeEl.$class.ClassType() === $lt94) {
        if (RHS.BaseType === 30) {
          Result = 0}
         else if (RTypeEl.$class.ClassType() === $lt94) {
          Result = 2147483647;
          if (!(0 in RHS.Flags)) return RaiseIncompatType(20190215112914);
          LeftClass = LTypeEl;
          RightClass = RTypeEl;
          if (LeftClass.ObjKind === RightClass.ObjKind) {
            Result = this.CheckSrcIsADstType(RHS,LHS)}
           else if (LeftClass.ObjKind === 2) {
            if ((RightClass.ObjKind === 1) && !RightClass.IsExternal) {
              if (this.GetClassImplementsIntf(RightClass,LeftClass) !== null) return 10000;
            };
          };
          if (Result === 2147483647) Result = this.CheckAssignCompatibilityClasses(LeftClass,RightClass);
          if ((Result === 2147483647) && RaiseOnIncompatible) this.RaiseIncompatibleType(20170216152458,3028,[],RTypeEl,LTypeEl,ErrorEl);
        } else return RaiseIncompatType(20190215112919);
      } else if (LTypeEl.$class.ClassType() === $lt96) {
        if (RHS.BaseType === 30) {
          Result = 0}
         else if (RTypeEl.$class.ClassType() === $lt96) {
          if ($lt95.isPrototypeOf(RHS.IdentEl)) {
            Result = 2147483647;
            if (RaiseOnIncompatible) {
              if ($lt96.isPrototypeOf(this.ResolveAliasType(RHS.IdentEl,true))) {
                this.RaiseMsg(20180317103206,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"type class-of",18,"class of " + LTypeEl.DestType.FName),ErrorEl)}
               else this.RaiseMsg(20180511123859,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,this.GetResolverResultDescription(RHS,false),18,"class of " + LTypeEl.DestType.FName),ErrorEl);
            };
          } else {
            Result = this.CheckClassIsClass(RTypeEl.DestType,LTypeEl.DestType);
            if ((Result === 2147483647) && RaiseOnIncompatible) this.RaiseMsg(20170216152500,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"class of " + RTypeEl.DestType.PathName(),18,"class of " + LTypeEl.DestType.PathName()),ErrorEl);
          };
        } else if ($lt95.isPrototypeOf(RHS.IdentEl) && (this.ResolveAliasType(RHS.IdentEl,true).$class.ClassType() === $lt94)) {
          Result = this.CheckClassIsClass(RTypeEl,LTypeEl.DestType);
          if ((Result === 2147483647) && RaiseOnIncompatible) this.RaiseMsg(20170216152501,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,RTypeEl.FName,18,"class of " + LTypeEl.DestType.PathName()),ErrorEl);
          return Result;
        };
      } else if ($lt100.isPrototypeOf(LTypeEl)) {
        if (RHS.BaseType === 30) return 0;
        if ((LTypeEl.$class.ClassType() === RTypeEl.$class.ClassType()) && (0 in RHS.Flags)) {
          if (this.CheckProcTypeCompatibility(LTypeEl,RTypeEl,true,ErrorEl,RaiseOnIncompatible)) return 0;
        };
        if (RaiseOnIncompatible) {
          if ($lt100.isPrototypeOf(RTypeEl) && (0 in RHS.Flags)) this.RaiseMsg(20170404154738,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,$mod.GetElementTypeName(RTypeEl),18,$mod.GetElementTypeName(LTypeEl)),ErrorEl);
        };
      } else if (LTypeEl.$class.ClassType() === $lt102) {
        LArray = LTypeEl;
        if ((rtl.length(LArray.Ranges) === 0) && (RTypeEl.$class.ClassType() === $lt102)) {
          RArray = RTypeEl;
          if (rtl.length(RArray.Ranges) === 1) {
            if ((3 in this.FCurrentParser.GetCurrentModeSwitches()) && !this.IsOpenArray(LArray)) {
              if (RaiseOnIncompatible) this.RaiseIncompatibleTypeDesc(20180620115341,3028,[],"static array","dynamic array",ErrorEl);
              return 2147483647;
            };
          } else if (rtl.length(RArray.Ranges) > 1) {
            if (RaiseOnIncompatible) this.RaiseIncompatibleTypeDesc(20180620115235,3028,[],"multi dimensional static array","dynamic array",ErrorEl);
            return 2147483647;
          } else if (!(5 in this.FOptions)) {
            if (this.IsOpenArray(LArray)) {}
            else if (this.IsOpenArray(RArray)) {
              if (RaiseOnIncompatible) this.RaiseIncompatibleTypeDesc(20180620115515,3028,[],"open array","dynamic array",ErrorEl);
              return 2147483647;
            } else {
              if ((3 in this.FCurrentParser.GetCurrentModeSwitches()) && (LArray !== RArray)) {
                return RaiseIncompatType(20190215112626);
              };
            };
          };
          if (LArray.ElType === null) {
            if (RArray.ElType === null) {
              Result = 0}
             else {
              CurTVarRec = this.GetTVarRec(LArray);
              if (this.ResolveAliasType(RArray.ElType,true) === CurTVarRec) {
                Result = 0}
               else return RaiseIncompatType(20190215112715);
            };
          } else if (RArray.ElType === null) {
            return RaiseIncompatType(20190215112907)}
           else {
            Result = this.CheckElTypeCompatibility(LArray.ElType,RArray.ElType,2);
            if (Result === 2147483647) if (RaiseOnIncompatible) {
              this.GetIncompatibleTypeDesc$1(LArray.ElType,RArray.ElType,{get: function () {
                  return GotDesc;
                }, set: function (v) {
                  GotDesc = v;
                }},{get: function () {
                  return ExpDesc;
                }, set: function (v) {
                  ExpDesc = v;
                }});
              this.RaiseMsg(20170328110050,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"array of " + GotDesc,18,"array of " + ExpDesc),ErrorEl);
            } else return 2147483647;
          };
        };
      } else if (LTypeEl.$class.ClassType() === $lt98) {
        if ($lt94.isPrototypeOf(RTypeEl) && (RTypeEl.ObjKind === 2) && this.IsTGUID(LTypeEl)) {
          return this.cInterfaceToTGUID;
        };
      } else if (LTypeEl.$class.ClassType() === $lt99) {}
      else if (RTypeEl.$class.ClassType() === $lt119) {
        if (LTypeEl.$class.ClassType() === $lt119) {
          this.ComputeElement(LTypeEl.EnumType,DstResolved,{},null);
          this.ComputeElement(RTypeEl.EnumType,SrcResolved,{},null);
          if ((SrcResolved.LoTypeEl !== null) && (SrcResolved.LoTypeEl === DstResolved.LoTypeEl)) {
            Result = 0}
           else if ($lt62.isPrototypeOf(SrcResolved.LoTypeEl.FData) && $lt62.isPrototypeOf(DstResolved.LoTypeEl.FData) && ($lp4(SrcResolved.LoTypeEl.FName,DstResolved.LoTypeEl.FName) === 0)) {
            Result = 0}
           else if (RaiseOnIncompatible) {
            this.RaiseIncompatibleTypeRes(20170216152510,3028,[],SrcResolved,DstResolved,ErrorEl)}
           else return 2147483647;
        } else return RaiseIncompatType(20190215112924);
      } else if (LTypeEl.$class.ClassType() === $lt97) {
        if (RTypeEl.$class.ClassType() === $lt97) {
          Result = this.CheckAssignCompatibilityPointerType(LTypeEl.DestType,RTypeEl.DestType,ErrorEl,false);
          if (Result === 2147483647) return RaiseIncompatType(20190215112927);
        };
      };
      if (Result === -1) return RaiseIncompatType(20190215112931);
      if (!(0 in RHS.Flags)) return RaiseIncompatType(20190215112934);
      return Result;
    };
    this.CheckAssignCompatibilityArrayType = function (LHS, RHS, ErrorEl, RaiseOnIncompatible) {
      var $Self = this;
      var Result = 0;
      function Check_ArrayOfChar_String(ArrType, ArrLength, ElTypeResolved, Expr, ErrorEl) {
        var Value = null;
        var ElBT = 0;
        var l = 0;
        var S = "";
        if (Expr === null) return;
        ElBT = $Self.GetActualBaseType(ElTypeResolved.BaseType);
        if (rtl.length(ArrType.Ranges) === 0) {
          Result = 0;
          return;
        };
        Value = $Self.Eval(Expr,rtl.createSet(2),true);
        try {
          var $tmp = Value.Kind;
          if ($tmp === 8) {
            if (ElBT === 6) {
              l = Value.S.length}
             else {
              S = Value.S;
              l = S.length;
            };
          } else {
            return;
          };
          if (ArrLength !== l) {
            $Self.RaiseMsg(20170913113216,3047,rtl.getResStr($lm5,"sExpectXArrayElementsButFoundY"),$lp6(18,$lp5(ArrLength),18,$lp5(l)),ErrorEl);
          };
          Result = 0;
        } finally {
          $lp12({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
        };
      };
      function CheckRange(ArrType, RangeIndex, Values, ErrorEl) {
        var ElTypeResolved = $lt59.$new();
        function CheckArrOfCharAssignString() {
          $Self.ComputeElement(ArrType.ElType,ElTypeResolved,rtl.createSet(4),null);
          if (ElTypeResolved.BaseType in $mod.btAllChars) Result = 10000;
        };
        var Range = null;
        var Value = null;
        var Expr = null;
        var RangeResolved = $lt59.$new();
        var ValueResolved = $lt59.$new();
        var i = 0;
        var ExpectedCount = 0;
        var ValCnt = 0;
        var IsLastRange = false;
        var IsConstExpr = false;
        var ArrayValues = [];
        var LeftResult = 0;
        var ExprCompFlags = {};
        var BuiltInProc = null;
        var Ref = null;
        var RArrayType = null;
        if (!(0 in RHS.Flags)) return;
        if ((Values.BaseType === 2) && (RangeIndex === 0) && (Values.LoTypeEl === ArrType)) {
          Result = 0;
          return;
        };
        Expr = Values.ExprEl;
        if ((Expr === null) && $lt117.isPrototypeOf(Values.IdentEl) && (Values.IdentEl.VarType === null)) Expr = Values.IdentEl.Expr;
        IsConstExpr = (Expr !== null) && $Self.fExprEvaluator.IsConst(Expr);
        if (IsConstExpr) {
          ExprCompFlags = rtl.createSet(3)}
         else ExprCompFlags = {};
        if (Expr !== null) {
          if ($Self.IsEmptyArrayExpr(Values)) {
            if (rtl.length(ArrType.Ranges) === 0) {
              if (RaiseOnIncompatible) $Self.MarkArrayExprRecursive(Values.ExprEl,ArrType);
              Result = 0;
              return;
            };
          } else if ($Self.IsArrayOperatorAdd(Expr) && !(Values.BaseType in $mod.btAllStrings)) {
            if (rtl.length(ArrType.Ranges) > 0) return;
            $Self.ComputeElement(Expr.Left,ValueResolved,rtl.refSet(ExprCompFlags),null);
            CheckRange(ArrType,RangeIndex,$lt59.$clone(ValueResolved),ErrorEl);
            if (Result === 2147483647) return;
            LeftResult = Result;
            Result = 2147483647;
            $Self.ComputeElement(Expr.Right,ValueResolved,rtl.refSet(ExprCompFlags),null);
            CheckRange(ArrType,RangeIndex,$lt59.$clone(ValueResolved),ErrorEl);
            if (Result === 2147483647) return;
            if (Result < LeftResult) Result = LeftResult;
            return;
          } else if ((Expr !== null) && (Expr.$class.ClassType() === $lt145) && (Expr.Kind === 10)) {
            if ($lt55.isPrototypeOf(Expr.Value.FData)) {
              Ref = Expr.Value.FData;
              if ($lt83.isPrototypeOf(Ref.FDeclaration) && $lt64.isPrototypeOf(Ref.FDeclaration.FData)) {
                BuiltInProc = Ref.FDeclaration.FData;
                ArrayValues = Expr.Params;
                if (BuiltInProc.BuiltIn === 23) {
                  Result = 0;
                  for (var $l = 0, $end = rtl.length(ArrayValues) - 1; $l <= $end; $l++) {
                    i = $l;
                    LeftResult = Result;
                    Result = 2147483647;
                    $Self.ComputeElement(ArrayValues[i],ValueResolved,rtl.refSet(ExprCompFlags),null);
                    CheckRange(ArrType,RangeIndex,$lt59.$clone(ValueResolved),ErrorEl);
                    if (Result === 2147483647) return;
                    if (Result < LeftResult) Result = LeftResult;
                  };
                  return;
                } else if (BuiltInProc.BuiltIn === 25) {
                  $Self.ComputeElement(ArrayValues[0],ValueResolved,rtl.refSet(ExprCompFlags),null);
                  CheckRange(ArrType,RangeIndex,$lt59.$clone(ValueResolved),ErrorEl);
                  return;
                };
              };
            };
          };
        };
        ExpectedCount = -1;
        if (rtl.length(ArrType.Ranges) === 0) {
          if (Expr !== null) {
            if (Expr.$class.ClassType() === $lt149) {
              ExpectedCount = rtl.length(Expr.Values)}
             else if ((Expr.$class.ClassType() === $lt145) && (Expr.Kind === 4)) {
              ExpectedCount = rtl.length(Expr.Params)}
             else if (Values.BaseType in $mod.btAllStringAndChars) {
              CheckArrOfCharAssignString();
              return;
            } else {
              return;
            };
          } else {
            if ((Values.BaseType !== 2) || (Values.LoTypeEl.$class.ClassType() !== $lt102)) {
              if (Values.BaseType in $mod.btAllStringAndChars) {
                CheckArrOfCharAssignString();
              };
              return;
            };
            RArrayType = Values.LoTypeEl;
            if (rtl.length(RArrayType.Ranges) > 0) {
              if (RaiseOnIncompatible) $Self.RaiseXExpectedButYFound(20180622104834,"dynamic array","static array",ErrorEl);
              return;
            };
            $Self.ComputeElement($Self.GetArrayElType(ArrType),ElTypeResolved,rtl.createSet(4),null);
            ElTypeResolved.Flags = rtl.includeSet(ElTypeResolved.Flags,1);
            $Self.ComputeElement($Self.GetArrayElType(RArrayType),ValueResolved,rtl.createSet(4),null);
            ValueResolved.Flags = rtl.includeSet(ValueResolved.Flags,0);
            Result = $Self.CheckAssignResCompatibility(ElTypeResolved,ValueResolved,ErrorEl,RaiseOnIncompatible);
            return;
          };
          Range = null;
          IsLastRange = true;
        } else {
          Range = ArrType.Ranges[RangeIndex];
          ExpectedCount = $Self.GetRangeLength(Range);
          if (ExpectedCount === 0) {
            $Self.ComputeElement(Range,RangeResolved,rtl.createSet(3),null);
            $Self.RaiseNotYetImplemented(20170222232409,Expr,"range " + $mod.GetResolverResultDbg(RangeResolved));
          };
          IsLastRange = (RangeIndex + 1) === rtl.length(ArrType.Ranges);
          if (Expr === null) {
            if ((ValueResolved.BaseType === 2) && (ValueResolved.LoTypeEl.$class.ClassType() === $lt102)) ;
            return;
          };
        };
        if (IsLastRange) {
          $Self.ComputeElement(ArrType.ElType,ElTypeResolved,rtl.createSet(4),null);
          ElTypeResolved.ExprEl = Range;
          ElTypeResolved.Flags = rtl.includeSet(ElTypeResolved.Flags,1);
        } else ElTypeResolved.BaseType = 0;
        if ((Expr !== null) && ((Expr.$class.ClassType() === $lt149) || ($lt145.isPrototypeOf(Expr) && (Expr.Kind === 4)))) {
          if ($lt105.isPrototypeOf(ErrorEl.FParent)) {
            if (3 in $Self.FCurrentParser.GetCurrentModeSwitches()) {
              if (rtl.length(ArrType.Ranges) > 0) {
                if (Expr.$class.ClassType() !== $lt149) {
                  if (RaiseOnIncompatible) $Self.RaiseXExpectedButYFound(20180615121203,"(","[",ErrorEl);
                  return;
                };
              } else {
                if (Expr.$class.ClassType() === $lt149) {
                  if (RaiseOnIncompatible) $Self.RaiseXExpectedButYFound(20180615122953,"[","(",ErrorEl);
                  return;
                };
              };
            } else {
              if (Expr.$class.ClassType() !== $lt149) {
                if (RaiseOnIncompatible) $Self.RaiseXExpectedButYFound(20170913181208,"(","[",ErrorEl);
                return;
              };
            };
          };
          if (Expr.$class.ClassType() === $lt149) {
            ArrayValues = Expr.Values}
           else ArrayValues = Expr.Params;
          ValCnt = rtl.length(ArrayValues);
          ExprCompFlags = rtl.includeSet(ExprCompFlags,2);
          for (var $l1 = 0, $end1 = ExpectedCount - 1; $l1 <= $end1; $l1++) {
            i = $l1;
            if (i === ValCnt) {
              if (ValCnt > 0) ErrorEl = ArrayValues[ValCnt - 1];
              $Self.RaiseMsg(20170222233001,3047,rtl.getResStr($lm5,"sExpectXArrayElementsButFoundY"),$lp6(18,$lp5(ExpectedCount),18,$lp5(ValCnt)),ErrorEl);
            };
            Value = ArrayValues[i];
            $Self.ComputeElement(Value,ValueResolved,rtl.refSet(ExprCompFlags),null);
            if (IsLastRange) {
              Result = $Self.CheckAssignResCompatibility(ElTypeResolved,ValueResolved,Value,RaiseOnIncompatible);
              if (Result === 2147483647) return;
              $Self.CheckAssignExprRange(ElTypeResolved,Value);
            } else {
              CheckRange(ArrType,RangeIndex + 1,$lt59.$clone(ValueResolved),Value);
            };
          };
          if (ExpectedCount < ValCnt) {
            ErrorEl = ArrayValues[ExpectedCount];
            if (RaiseOnIncompatible) $Self.RaiseMsg(20170222233605,3047,rtl.getResStr($lm5,"sExpectXArrayElementsButFoundY"),$lp6(18,$lp5(ExpectedCount),18,$lp5(ValCnt)),ErrorEl);
            return;
          };
          if (RaiseOnIncompatible && (Expr.$class.ClassType() === $lt145)) $Self.MarkArrayExpr(Expr,ArrType);
        } else {
          if (!IsLastRange) {
            if (RaiseOnIncompatible) $Self.RaiseMsg(20170223095307,3047,rtl.getResStr($lm5,"sExpectXArrayElementsButFoundY"),$lp6(18,$lp5(ExpectedCount),9,"1"),ErrorEl);
            return;
          };
          if (ElTypeResolved.BaseType in $mod.btAllChars) if (Values.BaseType in $mod.btAllStrings) {
            Check_ArrayOfChar_String(ArrType,ExpectedCount,ElTypeResolved,Expr,ErrorEl);
            return;
          } else if (Values.BaseType === 6) {
            Check_ArrayOfChar_String(ArrType,ExpectedCount,ElTypeResolved,Expr,ErrorEl);
            return;
          };
          if (ExpectedCount > 1) {
            if (RaiseOnIncompatible) {
              $Self.RaiseMsg(20170913103143,3047,rtl.getResStr($lm5,"sExpectXArrayElementsButFoundY"),$lp6(18,$lp5(ExpectedCount),9,"1"),ErrorEl);
            };
            return;
          };
          Result = $Self.CheckAssignResCompatibility(ElTypeResolved,Values,ErrorEl,RaiseOnIncompatible);
          if (Result === 2147483647) return;
          if (Expr !== null) $Self.CheckAssignExprRange(ElTypeResolved,Expr);
        };
      };
      var LArrType = null;
      Result = 2147483647;
      if ((LHS.BaseType !== 2) || !$lt102.isPrototypeOf(LHS.LoTypeEl)) this.RaiseInternalError(20170222230012,"");
      LArrType = LHS.LoTypeEl;
      if ((LArrType.ElType === null) && (0 in RHS.Flags) && (RHS.BaseType in rtl.createSet(35,36))) {
        return 0;
      };
      CheckRange(LArrType,0,$lt59.$clone(RHS),ErrorEl);
      if ((Result === 2147483647) && RaiseOnIncompatible) this.RaiseIncompatibleTypeRes(20180622104721,3028,[],RHS,LHS,ErrorEl);
      return Result;
    };
    this.CheckAssignCompatibilityPointerType = function (LTypeEl, RTypeEl, ErrorEl, RaiseOnIncompatible) {
      var Result = 0;
      var LeftResolved = $lt59.$new();
      var RightResolved = $lt59.$new();
      this.ComputeElement(LTypeEl,LeftResolved,rtl.createSet(1),null);
      this.ComputeElement(RTypeEl,RightResolved,rtl.createSet(1),null);
      LeftResolved.Flags = rtl.includeSet(LeftResolved.Flags,1);
      RightResolved.Flags = rtl.includeSet(RightResolved.Flags,0);
      Result = this.CheckAssignResCompatibility(LeftResolved,RightResolved,ErrorEl,RaiseOnIncompatible);
      return Result;
    };
    this.CheckEqualCompatibilityUserType = function (LHS, RHS, ErrorEl, RaiseOnIncompatible) {
      var $Self = this;
      var Result = 0;
      var LTypeEl = null;
      var RTypeEl = null;
      var AResolved = $lt59.$new();
      var BResolved = $lt59.$new();
      function IncompatibleElements() {
        var Result = 0;
        Result = 2147483647;
        if (!RaiseOnIncompatible) return Result;
        $Self.RaiseIncompatibleType(20170216152513,3028,[],LTypeEl,RTypeEl,ErrorEl);
        return Result;
      };
      if (LHS.LoTypeEl === null) this.RaiseInternalError(20161007223118,"");
      if (RHS.LoTypeEl === null) this.RaiseInternalError(20161007223119,"");
      LTypeEl = LHS.LoTypeEl;
      RTypeEl = RHS.LoTypeEl;
      if (LTypeEl === RTypeEl) return 0;
      if (LTypeEl.$class.ClassType() === $lt94) {
        if (RTypeEl.$class.ClassType() === $lt94) {
          Result = this.CheckSrcIsADstType(LHS,RHS);
          if (Result === 2147483647) Result = this.CheckSrcIsADstType(RHS,LHS);
          if ((Result === 2147483647) && RaiseOnIncompatible) this.RaiseIncompatibleTypeRes(20180324190757,3029,[],LHS,RHS,ErrorEl);
          return Result;
        } else if (RTypeEl.$class.ClassType() === $lt98) {
          if ((LTypeEl.ObjKind === 2) && this.IsTGUID(RTypeEl)) return this.cInterfaceToTGUID;
        };
        return IncompatibleElements();
      } else if (LTypeEl.$class.ClassType() === $lt96) {
        if (RTypeEl.$class.ClassType() === $lt96) {
          Result = this.CheckClassIsClass(LTypeEl.DestType,RTypeEl.DestType);
          if (Result === 2147483647) Result = this.CheckClassIsClass(RTypeEl.DestType,LTypeEl.DestType);
          if ((Result === 2147483647) && RaiseOnIncompatible) this.RaiseIncompatibleTypeRes(20180324190804,3029,[],LHS,RHS,ErrorEl);
          return Result;
        };
        return IncompatibleElements();
      } else if (LTypeEl.$class.ClassType() === $lt99) {
        if (!RaiseOnIncompatible) return 2147483647;
        if (RTypeEl.$class.ClassType() === $lt112) {
          this.RaiseIncompatibleType(20170216152523,3028,[],LTypeEl,RTypeEl,ErrorEl)}
         else return IncompatibleElements();
      } else if (LTypeEl.$class.ClassType() === $lt98) {
        if (RTypeEl.$class.ClassType() === $lt94) {
          if ((RTypeEl.ObjKind === 2) && this.IsTGUID(LTypeEl)) return this.cInterfaceToTGUID;
        };
      } else if (LTypeEl.$class.ClassType() === $lt119) {
        if (RTypeEl.$class.ClassType() === $lt119) {
          this.ComputeElement(LTypeEl.EnumType,AResolved,{},null);
          this.ComputeElement(RTypeEl.EnumType,BResolved,{},null);
          if ((AResolved.LoTypeEl !== null) && (AResolved.LoTypeEl === BResolved.LoTypeEl)) return 0;
          if ($lt62.isPrototypeOf(AResolved.LoTypeEl.FData) && $lt62.isPrototypeOf(BResolved.LoTypeEl.FData) && ($lp4(AResolved.LoTypeEl.FName,BResolved.LoTypeEl.FName) === 0)) return 0;
          if (RaiseOnIncompatible) {
            this.RaiseIncompatibleTypeRes(20170216152524,3028,[],AResolved,BResolved,ErrorEl)}
           else return 2147483647;
        } else return IncompatibleElements();
      } else if ($lt100.isPrototypeOf(LTypeEl)) {
        if ($lt100.isPrototypeOf(RTypeEl)) {
          if (this.CheckProcTypeCompatibility(LTypeEl,RTypeEl,false,null,false)) return 0;
        } else return IncompatibleElements();
      } else if (LTypeEl.$class.ClassType() === $lt97) {
        if (RTypeEl.$class.ClassType() === $lt97) return 0;
      };
      return IncompatibleElements();
      return Result;
    };
    this.CheckTypeCast = function (El, Params, RaiseOnError) {
      var Result = 0;
      var Param = null;
      var ParamResolved = $lt59.$new();
      var ResolvedEl = $lt59.$new();
      if (rtl.length(Params.Params) !== 1) {
        if (RaiseOnError) this.RaiseMsg(20170216152526,3034,rtl.getResStr($lm5,"sWrongNumberOfParametersForTypeCast"),$lp6(18,El.FName),Params);
        return 2147483647;
      };
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(2),null);
      this.ComputeElement(El,ResolvedEl,rtl.createSet(4),null);
      Result = this.CheckTypeCastRes(ParamResolved,ResolvedEl,Param,RaiseOnError);
      return Result;
    };
    this.CheckTypeCastRes = function (FromResolved, ToResolved, ErrorEl, RaiseOnError) {
      var $Self = this;
      var Result = 0;
      function WarnClassTypesAreNotRelated(GotType, ExpType) {
        var GotDesc = "";
        var ExpDesc = "";
        $Self.GetIncompatibleTypeDesc$1(GotType,ExpType,{get: function () {
            return GotDesc;
          }, set: function (v) {
            GotDesc = v;
          }},{get: function () {
            return ExpDesc;
          }, set: function (v) {
            ExpDesc = v;
          }});
        $Self.LogMsg(20200209140450,2,3142,rtl.getResStr($lm5,"sClassTypesAreNotRelatedXY"),$lp6(18,GotDesc,18,ExpDesc),ErrorEl);
      };
      var ToTypeEl = null;
      var FromTypeEl = null;
      var ToTypeBaseType = 0;
      var C = null;
      var ToProcType = null;
      var FromProcType = null;
      var TemplType = null;
      var i = 0;
      var ConToken = 0;
      var ConEl = null;
      var ToClassType = null;
      var FromClassType = null;
      Result = 2147483647;
      ToTypeEl = ToResolved.LoTypeEl;
      if ((ToTypeEl !== null) && (0 in FromResolved.Flags)) {
        C = ToTypeEl.$class.ClassType();
        if (FromResolved.BaseType === 4) {
          Result = 3;
        } else if (C === $lt83) {
          if ($lt62.isPrototypeOf(ToTypeEl.FData)) {
            if (ToTypeEl === FromResolved.LoTypeEl) return 0;
            if ((FromResolved.BaseType === 2) && (FromResolved.LoTypeEl.$class.ClassType() === $lt104)) return 0;
            ToTypeBaseType = rtl.as(ToTypeEl.FData,$lt62).BaseType;
            if (ToTypeBaseType === FromResolved.BaseType) {
              Result = 0}
             else if (ToTypeBaseType in $mod.btAllInteger) {
              if (FromResolved.BaseType in rtl.unionSet($mod.btArrayRangeTypes,rtl.createSet(37,14))) {
                Result = 3}
               else if (FromResolved.BaseType === 2) {
                FromTypeEl = FromResolved.LoTypeEl;
                if (FromTypeEl.$class.ClassType() === $lt99) Result = 3;
              };
            } else if (ToTypeBaseType in $mod.btAllFloats) {
              if (FromResolved.BaseType in $mod.btAllFloats) {
                Result = 3}
               else if (FromResolved.BaseType in $mod.btAllInteger) Result = 3;
            } else if (ToTypeBaseType in $mod.btAllBooleans) {
              if (FromResolved.BaseType in $mod.btAllBooleans) {
                Result = 3}
               else if (FromResolved.BaseType in $mod.btAllInteger) Result = 3;
            } else if (ToTypeBaseType in $mod.btAllChars) {
              if (FromResolved.BaseType in rtl.unionSet($mod.btArrayRangeTypes,rtl.createSet(37))) {
                Result = 3}
               else if (FromResolved.BaseType === 2) {
                FromTypeEl = FromResolved.LoTypeEl;
                if (FromTypeEl.$class.ClassType() === $lt99) Result = 3;
              };
            } else if (ToTypeBaseType in $mod.btAllStrings) {
              if (FromResolved.BaseType in $mod.btAllStringAndChars) {
                Result = 3}
               else if ((FromResolved.BaseType === 29) && (ToTypeBaseType in $mod.btAllStringPointer)) Result = 0;
            } else if (ToTypeBaseType === 29) {
              if (FromResolved.BaseType in rtl.unionSet(rtl.createSet(29),$mod.btAllStringPointer)) {
                Result = 0}
               else if (FromResolved.BaseType === 2) {
                FromTypeEl = FromResolved.LoTypeEl;
                C = FromTypeEl.$class.ClassType();
                if ((C === $lt94) || (C === $lt96) || (C === $lt97) || ((C === $lt102) && this.IsDynArray(FromTypeEl,true))) {
                  Result = 0}
                 else if ((C === $lt100) || (C === $lt101)) {
                  FromProcType = FromTypeEl;
                  if (FromProcType.GetIsOfObject()) {
                    if (7 in this.FOptions) {
                      Result = 3}
                     else if (RaiseOnError) this.RaiseMsg(20170416183615,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,$mod.GetElementTypeName(FromProcType) + " " + $lm4.ProcTypeModifiers[0],18,this.GetBaseTypeNames(29)),ErrorEl);
                  } else if (FromProcType.GetIsNested()) {
                    if (RaiseOnError) this.RaiseMsg(20170416183800,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,$mod.GetElementTypeName(FromProcType) + " " + $lm4.ProcTypeModifiers[1],18,this.GetBaseTypeNames(29)),ErrorEl);
                  } else if (FromProcType.GetIsReference()) {
                    if (6 in this.FOptions) {
                      Result = 3}
                     else if (RaiseOnError) this.RaiseMsg(20170419144311,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,$mod.GetElementTypeName(FromProcType) + " " + $lm4.ProcTypeModifiers[4],18,this.GetBaseTypeNames(29)),ErrorEl);
                  } else Result = 3;
                };
              };
            };
          };
        } else if (C === $lt94) {
          ToClassType = ToTypeEl;
          if (FromResolved.BaseType === 2) {
            FromTypeEl = FromResolved.LoTypeEl;
            if (FromTypeEl.$class.ClassType() === $lt94) {
              FromClassType = FromTypeEl;
              if ($lt95.isPrototypeOf(FromResolved.IdentEl)) this.RaiseMsg(20170404162606,3054,rtl.getResStr($lm5,"sCannotTypecastAType"),[],ErrorEl);
              if (FromClassType.ObjKind === ToClassType.ObjKind) {
                Result = this.CheckSrcIsADstType(FromResolved,ToResolved);
                if (Result === 2147483647) Result = this.CheckSrcIsADstType(ToResolved,FromResolved);
              } else if (ToClassType.ObjKind === 2) {
                if ((FromClassType.ObjKind === 1) && !FromClassType.IsExternal) {
                  Result = 3;
                };
              } else if (FromClassType.ObjKind === 2) {
                if ((ToClassType.ObjKind === 1) && !ToClassType.IsExternal) {
                  Result = 3;
                };
              };
              if (Result === 2147483647) Result = this.CheckTypeCastClassInstanceToClass(FromResolved,ToResolved,ErrorEl);
              if ((Result === 2147483647) && (FromClassType.ObjKind === ToClassType.ObjKind)) {
                if (RaiseOnError) WarnClassTypesAreNotRelated(FromClassType,ToClassType);
                Result = 10000;
              };
            } else if (FromTypeEl.$class.ClassType() === $lt104) {
              TemplType = FromTypeEl;
              if (rtl.length(TemplType.Constraints) === 0) {
                Result = 0;
              } else for (var $l = 0, $end = rtl.length(TemplType.Constraints) - 1; $l <= $end; $l++) {
                i = $l;
                ConEl = TemplType.Constraints[i];
                ConToken = this.GetGenericConstraintKeyword(ConEl);
                var $tmp = ConToken;
                if ($tmp === 96) {}
                else if (($tmp === 47) || ($tmp === 50)) {
                  Result = 0}
                 else {
                  Result = 0;
                  break;
                };
              };
            };
          } else if (FromResolved.BaseType === 29) {
            if (this.IsBaseType(FromResolved.LoTypeEl,29,false)) Result = 0;
          } else if (FromResolved.BaseType === 30) Result = 0;
        } else if (C === $lt104) {
          TemplType = ToTypeEl;
          FromTypeEl = FromResolved.LoTypeEl;
          if ((FromTypeEl !== null) && (FromTypeEl.$class.ClassType() === $lt104)) return 0;
          for (var $l1 = 0, $end1 = rtl.length(TemplType.Constraints) - 1; $l1 <= $end1; $l1++) {
            i = $l1;
            ConEl = TemplType.Constraints[i];
            ConToken = this.GetGenericConstraintKeyword(ConEl);
            var $tmp1 = ConToken;
            if ($tmp1 === 96) {
              if (FromResolved.BaseType === 2) {
                if (FromTypeEl.$class.ClassType() === $lt98) {
                  Result = 0}
                 else if (FromTypeEl.$class.ClassType() === $lt93) Result = 0;
              }}
             else if (($tmp1 === 47) || ($tmp1 === 50)) {
              Result = 0}
             else {
              Result = 0;
              break;
            };
          };
        } else if (C === $lt96) {
          if (FromResolved.BaseType === 2) {
            if (FromResolved.LoTypeEl.$class.ClassType() === $lt96) {
              if ($lt95.isPrototypeOf(FromResolved.IdentEl)) this.RaiseMsg(20170404162604,3054,rtl.getResStr($lm5,"sCannotTypecastAType"),[],ErrorEl);
              ToTypeEl = ToTypeEl.DestType;
              FromTypeEl = FromResolved.LoTypeEl.DestType;
              Result = this.CheckClassesAreRelated(ToTypeEl,FromTypeEl);
            };
          } else if (FromResolved.BaseType === 29) {
            if (this.IsBaseType(FromResolved.LoTypeEl,29,false)) Result = 0;
          } else if (FromResolved.BaseType === 30) Result = 0;
        } else if (C === $lt98) {
          if (FromResolved.BaseType === 2) {
            if (FromResolved.LoTypeEl.$class.ClassType() === $lt98) {
              Result = 0;
            };
          };
        } else if ((C === $lt99) || (C === $lt103)) {
          if (this.CheckIsOrdinal(FromResolved,ErrorEl,true)) Result = 0;
        } else if (C === $lt102) {
          if (FromResolved.BaseType === 2) {
            if (FromResolved.LoTypeEl.$class.ClassType() === $lt102) Result = this.CheckTypeCastArray(FromResolved.LoTypeEl,ToTypeEl,ErrorEl,RaiseOnError);
          } else if (FromResolved.BaseType === 29) {
            if (this.IsDynArray(ToResolved.LoTypeEl,true) && this.IsBaseType(FromResolved.LoTypeEl,29,false)) Result = 0;
          } else if (FromResolved.BaseType === 30) {
            if (this.IsDynArray(ToResolved.LoTypeEl,true)) Result = 0;
          };
        } else if ((C === $lt100) || (C === $lt101)) {
          ToProcType = ToTypeEl;
          if (this.IsBaseType(FromResolved.LoTypeEl,29,false)) {
            if (ToProcType.GetIsOfObject()) {
              if (7 in this.FOptions) {
                Result = 3}
               else if (RaiseOnError) this.RaiseMsg(20170416183940,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,this.GetBaseTypeNames(29),18,ToProcType.ElementTypeName() + " " + $lm4.ProcTypeModifiers[0]),ErrorEl);
            } else if (ToProcType.GetIsNested()) {
              if (RaiseOnError) this.RaiseMsg(20170416184149,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,this.GetBaseTypeNames(29),18,ToProcType.ElementTypeName() + " " + $lm4.ProcTypeModifiers[1]),ErrorEl);
            } else if (ToProcType.GetIsReference()) {
              if (7 in this.FOptions) {
                Result = 3}
               else if (RaiseOnError) this.RaiseMsg(20170419144357,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,this.GetBaseTypeNames(29),18,ToProcType.ElementTypeName() + " " + $lm4.ProcTypeModifiers[4]),ErrorEl);
            } else Result = 3;
          } else if (FromResolved.BaseType === 2) {
            FromTypeEl = FromResolved.LoTypeEl;
            if ($lt100.isPrototypeOf(FromTypeEl)) {
              FromProcType = FromTypeEl;
              if (ToProcType.GetIsReference()) {
                Result = 3}
               else if (FromProcType.GetIsReference()) {
                Result = 3}
               else if ((FromProcType.GetIsOfObject() !== ToProcType.GetIsOfObject()) && !(7 in this.FOptions)) {
                if (RaiseOnError) this.RaiseMsg(20170416183109,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,$mod.GetElementTypeName(FromProcType) + $lp14(FromProcType.GetIsOfObject()," " + $lm4.ProcTypeModifiers[0],""),18,ToProcType.ElementTypeName() + $lp14(ToProcType.GetIsOfObject()," " + $lm4.ProcTypeModifiers[0],"")),ErrorEl);
              } else if (FromProcType.GetIsNested() !== ToProcType.GetIsNested()) {
                if (RaiseOnError) this.RaiseMsg(20170416183305,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,$mod.GetElementTypeName(FromProcType) + $lp14(FromProcType.GetIsNested()," " + $lm4.ProcTypeModifiers[1],""),18,ToProcType.ElementTypeName() + $lp14(ToProcType.GetIsNested()," " + $lm4.ProcTypeModifiers[1],"")),ErrorEl);
              } else Result = 3;
            };
          } else if (FromResolved.BaseType === 31) {
            FromTypeEl = FromResolved.LoTypeEl;
            if ($lt100.isPrototypeOf(FromTypeEl)) {
              FromProcType = FromTypeEl;
              if ((3 in this.FCurrentParser.GetCurrentModeSwitches()) && (FromResolved.IdentEl === null) && (FromResolved.LoTypeEl.FName !== "")) {}
              else if (ToProcType.GetIsReference()) {
                Result = 3}
               else if (FromResolved.IdentEl === null) {
                Result = 3}
               else if ((FromProcType.GetIsOfObject() !== ToProcType.GetIsOfObject()) && !(7 in this.FOptions)) {
                if (RaiseOnError) this.RaiseMsg(20181210151058,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,$mod.GetElementTypeName(FromProcType) + $lp14(FromProcType.GetIsOfObject()," " + $lm4.ProcTypeModifiers[0],""),18,ToProcType.ElementTypeName() + $lp14(ToProcType.GetIsOfObject()," " + $lm4.ProcTypeModifiers[0],"")),ErrorEl);
              } else if (FromProcType.GetIsNested() !== ToProcType.GetIsNested()) {
                if (RaiseOnError) this.RaiseMsg(20181210151102,3035,rtl.getResStr($lm5,"sIllegalTypeConversionTo"),$lp6(18,$mod.GetElementTypeName(FromProcType) + $lp14(FromProcType.GetIsNested()," " + $lm4.ProcTypeModifiers[1],""),18,ToProcType.ElementTypeName() + $lp14(ToProcType.GetIsNested()," " + $lm4.ProcTypeModifiers[1],"")),ErrorEl);
              } else Result = 3;
            };
          } else if (FromResolved.BaseType === 30) Result = 0;
        } else if (C === $lt97) {
          if (FromResolved.BaseType in rtl.createSet(29,30)) {
            Result = 0}
           else if (FromResolved.BaseType === 2) {
            FromTypeEl = FromResolved.LoTypeEl;
            C = FromTypeEl.$class.ClassType();
            if ((C === $lt97) || (C === $lt96) || (C === $lt94) || C.InheritsFrom($lt100) || this.IsDynArray(FromTypeEl,true)) Result = 3;
          };
        };
      } else if (ToTypeEl !== null) {
        if (FromResolved.BaseType === 2) {
          FromTypeEl = FromResolved.LoTypeEl;
          if ((FromTypeEl.$class.ClassType() === $lt94) && (FromTypeEl === FromResolved.IdentEl) && (ToResolved.BaseType === 2)) {
            ToTypeEl = ToResolved.LoTypeEl;
            if ((ToTypeEl.$class.ClassType() === $lt96) && (ToTypeEl === ToResolved.IdentEl)) {
              ToTypeEl = ToTypeEl.DestType;
              Result = this.CheckClassesAreRelated(ToTypeEl,FromTypeEl);
            };
          };
        };
        if ((Result === 2147483647) && RaiseOnError) {
          if ($lt95.isPrototypeOf(FromResolved.IdentEl)) this.RaiseMsg(20170404162610,3054,rtl.getResStr($lm5,"sCannotTypecastAType"),[],ErrorEl);
        };
      };
      if (Result === 2147483647) {
        if (RaiseOnError) this.RaiseIncompatibleTypeRes(20170216152528,3035,[],FromResolved,ToResolved,ErrorEl);
        return Result;
      };
      return Result;
    };
    this.CheckTypeCastArray = function (FromType, ToType, ErrorEl, RaiseOnError) {
      var $Self = this;
      var Result = 0;
      function NextDim(ArrType, NextIndex, ElTypeResolved) {
        var Result = false;
        NextIndex.set(NextIndex.get() + 1);
        if (NextIndex.get() < rtl.length(ArrType.get().Ranges)) {
          ElTypeResolved.BaseType = 0;
          return true;
        };
        $Self.ComputeElement($Self.GetArrayElType(ArrType.get()),ElTypeResolved,rtl.createSet(4),null);
        if ((ElTypeResolved.BaseType !== 2) || (ElTypeResolved.LoTypeEl.$class.ClassType() !== $lt102)) return false;
        ArrType.set(ElTypeResolved.LoTypeEl);
        NextIndex.set(0);
        Result = true;
        return Result;
      };
      var FromIndex = 0;
      var ToIndex = 0;
      var FromElTypeRes = $lt59.$new();
      var ToElTypeRes = $lt59.$new();
      var StartFromType = null;
      var StartToType = null;
      if (!RaiseOnError) {
        if ((ToType.GenericTemplateTypes !== null) && (ToType.GenericTemplateTypes.FCount > 0)) return 3;
      };
      StartFromType = FromType;
      StartToType = ToType;
      Result = 2147483647;
      FromIndex = 0;
      ToIndex = 0;
      do {
        if (rtl.length(ToType.Ranges) === 0) ;
        if (!NextDim({get: function () {
            return FromType;
          }, set: function (v) {
            FromType = v;
          }},{get: function () {
            return FromIndex;
          }, set: function (v) {
            FromIndex = v;
          }},FromElTypeRes)) {
          if (NextDim({get: function () {
              return ToType;
            }, set: function (v) {
              ToType = v;
            }},{get: function () {
              return ToIndex;
            }, set: function (v) {
              ToIndex = v;
            }},ToElTypeRes)) {
            break;
          };
          FromElTypeRes.Flags = rtl.includeSet(FromElTypeRes.Flags,0);
          FromElTypeRes.IdentEl = null;
          Result = this.CheckTypeCastRes(FromElTypeRes,ToElTypeRes,ErrorEl,false);
          break;
        } else {
          if (!NextDim({get: function () {
              return ToType;
            }, set: function (v) {
              ToType = v;
            }},{get: function () {
              return ToIndex;
            }, set: function (v) {
              ToIndex = v;
            }},ToElTypeRes)) {
            break;
          };
        };
      } while (!false);
      if ((Result === 2147483647) && RaiseOnError) this.RaiseIncompatibleType(20170331124643,3035,[],StartFromType,StartToType,ErrorEl);
      return Result;
    };
    this.CheckSrcIsADstType = function (ResolvedSrcType, ResolvedDestType) {
      var Result = 0;
      Result = this.CheckClassIsClass(ResolvedSrcType.LoTypeEl,ResolvedDestType.LoTypeEl);
      return Result;
    };
    this.CheckClassIsClass = function (SrcType, DestType) {
      var $Self = this;
      var Result = 0;
      function CheckSpecialized(SrcScope, DestScope) {
        var Result = false;
        var SrcParams = [];
        var DestParams = [];
        var i = 0;
        var SrcParam = null;
        var DestParam = null;
        var SrcParamScope = null;
        var DestParamScope = null;
        var SrcSpecializedFromItem = null;
        var DestSpecializedFromItem = null;
        SrcSpecializedFromItem = SrcScope.SpecializedFromItem;
        DestSpecializedFromItem = DestScope.SpecializedFromItem;
        if (SrcSpecializedFromItem === null) return false;
        if (DestSpecializedFromItem === null) return false;
        if (SrcSpecializedFromItem.GenericEl !== DestSpecializedFromItem.GenericEl) return false;
        SrcParams = SrcSpecializedFromItem.Params;
        DestParams = DestSpecializedFromItem.Params;
        for (var $l = 0, $end = rtl.length(SrcParams) - 1; $l <= $end; $l++) {
          i = $l;
          SrcParam = $Self.ResolveAliasType(SrcParams[i],true);
          DestParam = $Self.ResolveAliasType(DestParams[i],true);
          if ($lt104.isPrototypeOf(SrcParam) || $lt104.isPrototypeOf(DestParam) || (SrcParam === DestParam)) {}
          else if ($lt93.isPrototypeOf(SrcParam) && $lt93.isPrototypeOf(DestParam)) {
            SrcParamScope = rtl.as(SrcParam.FData,$lt27);
            DestParamScope = rtl.as(DestParam.FData,$lt27);
            if (!CheckSpecialized(SrcParamScope,DestParamScope)) return false;
          } else return false;
        };
        Result = true;
        return Result;
      };
      var SrcClassEl = null;
      var SrcScope = null;
      var DestScope = null;
      var GenericType = null;
      if (DestType === null) return 2147483647;
      DestType = this.ResolveAliasType(DestType,true);
      if (DestType.$class.ClassType() !== $lt94) return 2147483647;
      DestScope = rtl.as(DestType.FData,$lt34);
      Result = 0;
      while (SrcType !== null) {
        if (SrcType === DestType) {
          return Result}
         else if (SrcType.$class.ClassType() === $lt157) {
          SrcType = SrcType.DestType}
         else if (SrcType.$class.ClassType() === $lt158) {
          SrcType = SrcType.DestType;
          Result += 1;
        } else if (SrcType.$class.ClassType() === $lt155) {
          if ($lt5.isPrototypeOf(SrcType.FData)) {
            SrcType = SrcType.FData.SpecializedType}
           else SrcType = SrcType.DestType;
        } else if (SrcType.$class.ClassType() === $lt94) {
          SrcClassEl = SrcType;
          if (SrcClassEl.IsForward) {
            SrcType = rtl.as(rtl.as(SrcClassEl.FData,$lt55).FDeclaration,$lt95)}
           else {
            if ((SrcClassEl.GenericTemplateTypes !== null) && (SrcClassEl.GenericTemplateTypes.FCount > 0)) {
              if (DestScope.SpecializedFromItem !== null) {
                GenericType = DestScope.SpecializedFromItem.GenericEl;
                if (SrcType === GenericType) return Result;
              };
            };
            SrcScope = rtl.as(SrcClassEl.FData,$lt34);
            if ((SrcScope.SpecializedFromItem !== null) && (DestScope.SpecializedFromItem !== null) && CheckSpecialized(SrcScope,DestScope)) return Result;
            SrcType = SrcScope.DirectAncestor;
            Result += 1;
          };
        } else return 2147483647;
      };
      Result = 2147483647;
      return Result;
    };
    this.CheckClassesAreRelated = function (TypeA, TypeB) {
      var Result = 0;
      Result = this.CheckClassIsClass(TypeA,TypeB);
      if (Result !== 2147483647) return Result;
      Result = this.CheckClassIsClass(TypeB,TypeA);
      return Result;
    };
    this.CheckAssignCompatibilityClasses = function (LType, RType) {
      var Result = 0;
      Result = 2147483647;
      if (LType === null) ;
      if (RType === null) ;
      return Result;
    };
    this.GetClassImplementsIntf = function (ClassEl, Intf) {
      var Result = null;
      Result = null;
      while (ClassEl !== null) {
        if ((ClassEl === Intf) || (this.IndexOfImplementedInterface(ClassEl,Intf) >= 0)) return ClassEl;
        ClassEl = rtl.as(this.GetPasClassAncestor(ClassEl,true),$lt94);
      };
      return Result;
    };
    this.CheckProcOverloadCompatibility = function (Proc1, Proc2) {
      var Result = false;
      var ProcArgs1 = null;
      var ProcArgs2 = null;
      var TemplTypes1 = null;
      var TemplTypes2 = null;
      var i = 0;
      var Comp = 0;
      Result = false;
      if ((Proc1.NameParts !== null) || (Proc2.NameParts !== null)) {
        TemplTypes1 = this.GetProcTemplateTypes(Proc1);
        TemplTypes2 = this.GetProcTemplateTypes(Proc2);
        if (TemplTypes1 === null) {
          if (TemplTypes2 !== null) return Result;
        } else if (TemplTypes2 === null) {
          return Result}
         else if (TemplTypes1.FCount !== TemplTypes2.FCount) return Result;
      };
      ProcArgs1 = Proc1.ProcType.Args;
      ProcArgs2 = Proc2.ProcType.Args;
      if (ProcArgs1.FCount !== ProcArgs2.FCount) return Result;
      for (var $l = 0, $end = ProcArgs1.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Comp = this.CheckProcArgCompatibility(rtl.getObject(ProcArgs1.Get(i)),rtl.getObject(ProcArgs2.Get(i)));
        if (Comp > 0) return Result;
      };
      Result = true;
      return Result;
    };
    this.CheckProcTypeCompatibility = function (Proc1, Proc2, IsAssign, ErrorEl, RaiseOnIncompatible) {
      var $Self = this;
      var Result = false;
      function ModifierError(Modifier) {
        var Result = false;
        Result = false;
        if (!RaiseOnIncompatible) return Result;
        $Self.RaiseMsg(20170402112049,3052,rtl.getResStr($lm5,"sXModifierMismatchY"),$lp6(18,$mod.GetElementTypeName(Proc1),18,$lm4.ProcTypeModifiers[Modifier]),ErrorEl);
        return Result;
      };
      var ProcArgs1 = null;
      var ProcArgs2 = null;
      var i = 0;
      var ExpectedArg = null;
      var ActualArg = null;
      var ResultType1 = null;
      var ResultType2 = null;
      Result = false;
      if (Proc1.$class.ClassType() !== Proc2.$class.ClassType()) {
        if (RaiseOnIncompatible) this.RaiseXExpectedButYFound(20170402112353,$mod.GetElementTypeName(Proc1),$mod.GetElementTypeName(Proc2),ErrorEl);
        return Result;
      };
      if (Proc1.GetIsReference()) {
        if (IsAssign) ;
      } else if (Proc2.GetIsReference()) {
        if (IsAssign) return ModifierError(4);
      } else if ($lt163.isPrototypeOf(Proc2.FParent)) {
        if (IsAssign) return ModifierError(4);
      } else {
        if (Proc1.GetIsNested() !== Proc2.GetIsNested()) return ModifierError(1);
        if (Proc1.GetIsOfObject() !== Proc2.GetIsOfObject()) {
          if (6 in this.FOptions) {
            return ModifierError(0)}
           else if (Proc1.GetIsNested()) {}
          else return ModifierError(0);
        };
      };
      if (Proc1.CallingConvention !== Proc2.CallingConvention) {
        if ((8 in this.FOptions) && (Proc1.CallingConvention === 6) && (Proc2.CallingConvention === 0)) {}
        else {
          if (RaiseOnIncompatible) this.RaiseMsg(20170402112253,3018,rtl.getResStr($lm5,"sCallingConventionMismatch"),[],ErrorEl);
          return Result;
        };
      };
      ProcArgs1 = Proc1.Args;
      ProcArgs2 = Proc2.Args;
      if (ProcArgs1.FCount !== ProcArgs2.FCount) {
        if (RaiseOnIncompatible) this.RaiseMsg(20170902142829,3071,rtl.getResStr($lm5,"sIncompatibleTypesGotParametersExpected"),$lp6(18,$lp5(ProcArgs1.FCount),18,$lp5(ProcArgs2.FCount)),ErrorEl);
        return Result;
      };
      for (var $l = 0, $end = ProcArgs1.FCount - 1; $l <= $end; $l++) {
        i = $l;
        ExpectedArg = rtl.getObject(ProcArgs1.Get(i));
        ActualArg = rtl.getObject(ProcArgs2.Get(i));
        if (this.CheckProcArgCompatibility(ExpectedArg,ActualArg) > 1) {
          if (RaiseOnIncompatible) {
            if (ExpectedArg.Access !== ActualArg.Access) this.RaiseMsg(20170404151541,3006,rtl.getResStr($lm5,"sIncompatibleTypeArgNo"),$lp6(18,$lp5(i + 1),18,"access modifier " + $lm4.AccessDescriptions[ActualArg.Access],18,$lm4.AccessDescriptions[ExpectedArg.Access]),ErrorEl);
            this.RaiseIncompatibleType(20170404151538,3006,$lp6(18,$lp5(i + 1)),ExpectedArg.ArgType,ActualArg.ArgType,ErrorEl);
          };
          return Result;
        };
      };
      if ($lt101.isPrototypeOf(Proc1)) {
        ResultType1 = Proc1.ResultEl.ResultType;
        ResultType2 = Proc2.ResultEl.ResultType;
        if (this.CheckElTypeCompatibility(ResultType1,ResultType2,1) > 1) {
          if (RaiseOnIncompatible) this.RaiseIncompatibleType(20170402112648,3019,[],ResultType1,ResultType2,ErrorEl);
          return Result;
        };
        if (Proc1.GetIsAsync() !== Proc2.GetIsAsync()) this.RaiseMsg(20200524112519,3052,rtl.getResStr($lm5,"sXModifierMismatchY"),$lp6(18,"procedure type",18,"async"),ErrorEl);
      };
      Result = true;
      return Result;
    };
    this.CheckProcArgCompatibility = function (Arg1, Arg2) {
      var Result = 0;
      if (Arg1.Access !== Arg2.Access) return 2147483647;
      Result = this.CheckElTypeCompatibility(Arg1.ArgType,Arg2.ArgType,1);
      return Result;
    };
    this.CheckElTypeCompatibility = function (Arg1, Arg2, ResolveAlias) {
      var Result = 0;
      var Arg1Resolved = $lt59.$new();
      var Arg2Resolved = $lt59.$new();
      var C = null;
      var Arr1 = null;
      var Arr2 = null;
      var TemplType1 = null;
      var TemplType2 = null;
      var Templates1 = null;
      var Templates2 = null;
      var ProcArgs1 = null;
      var ProcArgs2 = null;
      var i = 0;
      var Proc1 = null;
      var Proc2 = null;
      if (Arg1 === Arg2) return 0;
      this.ComputeElement(Arg1,Arg1Resolved,rtl.createSet(4),null);
      this.ComputeElement(Arg2,Arg2Resolved,rtl.createSet(4),null);
      if (this.IsGenericTemplType(Arg1Resolved)) {
        Result = 1;
        if (Arg1Resolved.LoTypeEl === Arg2Resolved.LoTypeEl) {
          return 0}
         else if (this.IsGenericTemplType(Arg2Resolved)) {
          TemplType1 = Arg1Resolved.LoTypeEl;
          TemplType2 = Arg2Resolved.LoTypeEl;
          if ($lt90.isPrototypeOf(TemplType1.FParent) && $lt90.isPrototypeOf(TemplType2.FParent)) {
            Templates1 = this.GetProcTemplateTypes(TemplType1.FParent);
            Templates2 = this.GetProcTemplateTypes(TemplType2.FParent);
            i = Templates1.IndexOf(TemplType1);
            if ((i >= 0) && (i === Templates2.IndexOf(TemplType2))) return 0;
          };
        };
        return Result;
      } else if (this.IsGenericTemplType(Arg2Resolved)) return 1;
      if ((Arg1Resolved.BaseType !== Arg2Resolved.BaseType) || (Arg1Resolved.LoTypeEl === null) || (Arg2Resolved.LoTypeEl === null)) return 2147483647;
      if (ResolveAlias === 1) {
        if (this.IsSameType(Arg1Resolved.HiTypeEl,Arg2Resolved.HiTypeEl,1)) return 0;
      } else {
        if (this.IsSameType(Arg1Resolved.LoTypeEl,Arg2Resolved.LoTypeEl,0)) return 0;
      };
      if (Arg1Resolved.BaseType === 2) {
        C = Arg1Resolved.LoTypeEl.$class.ClassType();
        if (C !== Arg2Resolved.LoTypeEl.$class.ClassType()) return 2147483647;
        if (C === $lt102) {
          Arr1 = Arg1Resolved.LoTypeEl;
          Arr2 = Arg2Resolved.LoTypeEl;
          if (rtl.length(Arr1.Ranges) !== rtl.length(Arr2.Ranges)) return 2147483647;
          if (rtl.length(Arr1.Ranges) > 0) this.RaiseNotYetImplemented(20170328093733,Arr1.Ranges[0],"anonymous static array");
          Result = this.CheckElTypeCompatibility(this.GetArrayElType(Arr1),this.GetArrayElType(Arr2),ResolveAlias);
          return Result;
        } else if (C.InheritsFrom($lt100) && !(3 in this.FCurrentParser.GetCurrentModeSwitches())) {
          Proc1 = Arg1Resolved.LoTypeEl;
          Proc2 = Arg2Resolved.LoTypeEl;
          if (Proc1.CallingConvention !== Proc2.CallingConvention) return 2147483647;
          if (rtl.neSet(Proc1.Modifiers,Proc2.Modifiers)) return 2147483647;
          if (Proc1.VarArgsType !== Proc2.VarArgsType) {
            Result = this.CheckElTypeCompatibility(Proc1.VarArgsType,Proc2.VarArgsType,ResolveAlias);
            if (Result === 2147483647) return Result;
          };
          ProcArgs1 = Proc1.Args;
          ProcArgs2 = Proc2.Args;
          if (ProcArgs1.FCount !== ProcArgs2.FCount) return 2147483647;
          for (var $l = 0, $end = ProcArgs1.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Result = this.CheckProcArgCompatibility(rtl.getObject(ProcArgs1.Get(i)),rtl.getObject(ProcArgs2.Get(i)));
            if (Result > 1) return 2147483647;
          };
          return 0;
        };
      };
      Result = 2147483647;
      return Result;
    };
    this.CheckCanBeLHS = function (ResolvedEl, ErrorOnFalse, ErrorEl) {
      var Result = false;
      var El = null;
      Result = false;
      El = ResolvedEl.IdentEl;
      if (El === null) {
        if ($lt143.isPrototypeOf(ResolvedEl.ExprEl) && (ResolvedEl.ExprEl.OpCode === 25)) {}
        else {
          if (ErrorOnFalse) {
            if ((ResolvedEl.LoTypeEl !== null) && (ResolvedEl.ExprEl !== null)) {
              this.RaiseXExpectedButYFound(20170216152727,"identifier",$mod.GetElementTypeName(ResolvedEl.LoTypeEl),ResolvedEl.ExprEl)}
             else this.RaiseVarExpected(20170216152426,ErrorEl,ResolvedEl.IdentEl);
          };
          return Result;
        };
      };
      if (rtl.neSet(rtl.intersectSet(rtl.createSet(1,2),ResolvedEl.Flags),{})) return !this.IsVariableConst(El,ErrorEl,ErrorOnFalse);
      if (!ErrorOnFalse) return Result;
      if ($lt88.isPrototypeOf(ResolvedEl.IdentEl)) {
        this.RaiseMsg(20170216152427,3027,rtl.getResStr($lm5,"sPropertyNotWritable"),[],ErrorEl)}
       else if ($lt117.isPrototypeOf(ResolvedEl.IdentEl)) {
        this.RaiseMsg(20180430012042,3110,rtl.getResStr($lm5,"sCantAssignValuesToConstVariable"),[],ErrorEl)}
       else this.RaiseMsg(20170216152429,3008,rtl.getResStr($lm5,"sVariableIdentifierExpected"),[],ErrorEl);
      return Result;
    };
    this.CheckAssignCompatibility = function (LHS, RHS, RaiseOnIncompatible, ErrorEl) {
      var Result = 0;
      var LeftResolved = $lt59.$new();
      var RightResolved = $lt59.$new();
      var Flags = {};
      var IsProcType = false;
      if (ErrorEl === null) ErrorEl = RHS;
      this.ComputeElement(LHS,LeftResolved,rtl.createSet(1),null);
      Flags = {};
      IsProcType = this.IsProcedureType(LeftResolved,true);
      if (IsProcType) if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
        Flags = rtl.includeSet(Flags,1)}
       else Flags = rtl.includeSet(Flags,2);
      this.ComputeElement(RHS,RightResolved,rtl.refSet(Flags),null);
      Result = this.CheckAssignResCompatibility(LeftResolved,RightResolved,ErrorEl,RaiseOnIncompatible);
      if ($lt153.isPrototypeOf(RHS)) this.CheckAssignExprRange(LeftResolved,RHS);
      return Result;
    };
    this.CheckAssignExprRange = function (LeftResolved, RHS) {
      var LRangeValue = null;
      var RValue = null;
      var Int = 0;
      var MinVal = 0;
      var MaxVal = 0;
      var RangeExpr = null;
      var C = null;
      var EnumType = null;
      var bt = 0;
      var LTypeEl = null;
      LTypeEl = LeftResolved.LoTypeEl;
      if ((LTypeEl !== null) && ((LTypeEl.$class.ClassType() === $lt102) || (LTypeEl.$class.ClassType() === $lt98))) return;
      if ($lt96.isPrototypeOf(LTypeEl)) return;
      RValue = this.Eval(RHS,rtl.createSet(3),true);
      if (RValue === null) return;
      LRangeValue = null;
      try {
        if (RValue.Kind === 13) {}
        else if (LeftResolved.BaseType === 1) {
          this.CheckAssignExprRangeToCustom(LeftResolved,RValue,RHS)}
         else if (LeftResolved.BaseType === 34) {
          C = LTypeEl.$class.ClassType();
          if (C === $lt103) {
            RangeExpr = LTypeEl.RangeExpr;
            LRangeValue = this.Eval(RangeExpr,rtl.createSet(0),false);
          } else if (C === $lt99) {
            EnumType = LTypeEl;
            LRangeValue = $lt165.$create("CreateValue",[1,EnumType,0,EnumType.Values.FCount - 1]);
          } else if (C === $lt83) {
            if ($lt62.isPrototypeOf(LTypeEl.FData)) {
              bt = this.GetActualBaseType(LTypeEl.FData.BaseType);
              if ((bt in $mod.btAllIntegerNoQWord) && this.GetIntegerRange(bt,{get: function () {
                  return MinVal;
                }, set: function (v) {
                  MinVal = v;
                }},{get: function () {
                  return MaxVal;
                }, set: function (v) {
                  MaxVal = v;
                }})) {
                LRangeValue = $lt165.$create("CreateValue",[2,null,MinVal,MaxVal])}
               else if (bt === 15) {
                LRangeValue = $lt165.$create("CreateValue",[4,null,0,1])}
               else if (bt === 6) {
                LRangeValue = $lt165.$create("CreateValue",[3,null,0,0xffff])}
               else this.RaiseNotYetImplemented(20170714205110,RHS,"");
            } else this.RaiseNotYetImplemented(20170714204803,RHS,"");
          } else this.RaiseNotYetImplemented(20170714193100,RHS,"");
          this.fExprEvaluator.IsSetCompatible(RValue,RHS,LRangeValue,true);
        } else if ($lt103.isPrototypeOf(LTypeEl)) {
          RangeExpr = LTypeEl.RangeExpr;
          LRangeValue = this.Eval(RangeExpr,rtl.createSet(0),true);
          if (LeftResolved.BaseType === 34) {
            this.fExprEvaluator.IsSetCompatible(RValue,RHS,LRangeValue,true)}
           else this.fExprEvaluator.IsInRange$1(RValue,RHS,LRangeValue,RangeExpr,true);
        } else if ((LeftResolved.BaseType in $mod.btAllIntegerNoQWord) && this.GetIntegerRange(LeftResolved.BaseType,{get: function () {
            return MinVal;
          }, set: function (v) {
            MinVal = v;
          }},{get: function () {
            return MaxVal;
          }, set: function (v) {
            MaxVal = v;
          }})) {
          var $tmp = RValue.Kind;
          if ($tmp === 4) {
            if ((MinVal > RValue.Int) || (MaxVal < RValue.Int)) this.fExprEvaluator.EmitRangeCheckConst$1(20170530093126,$lp5(RValue.Int),MinVal,MaxVal,RHS,2)}
           else if ($tmp === 5) {
            if ((RValue.UInt > 9007199254740991) || (MinVal > RValue.UInt) || (MaxVal < RValue.UInt)) this.fExprEvaluator.EmitRangeCheckConst(20170530093616,$lp5(RValue.UInt),$lp5(MinVal),$lp5(MaxVal),RHS,2)}
           else if ($tmp === 6) {
            if (RValue.IsInt({get: function () {
                return Int;
              }, set: function (v) {
                Int = v;
              }})) {
              if ((MinVal > Int) || (MaxVal < Int)) this.fExprEvaluator.EmitRangeCheckConst$1(20170802133307,$lp5(Int),MinVal,MaxVal,RHS,1);
            } else {
              this.RaiseRangeCheck(20170802133750,RHS);
            }}
           else if ($tmp === 7) {
            if (RValue.IsInt({get: function () {
                return Int;
              }, set: function (v) {
                Int = v;
              }})) {
              if ((MinVal > Int) || (MaxVal < Int)) this.fExprEvaluator.EmitRangeCheckConst$1(20180421171325,$lp5(Int),MinVal,MaxVal,RHS,1);
            } else {
              this.RaiseRangeCheck(20180421171438,RHS);
            }}
           else {
            this.RaiseNotYetImplemented(20170530092731,RHS,"");
          };
        } else if (RValue.Kind in rtl.createSet(2,3)) {}
        else if (LeftResolved.BaseType in rtl.createSet(10,11,14)) {}
        else if (LeftResolved.BaseType in $mod.btAllChars) {
          var $tmp1 = RValue.Kind;
          if ($tmp1 === 8) {
            Int = this.fExprEvaluator.StringToOrd(RValue,RHS)}
           else {
            this.RaiseNotYetImplemented(20170714171218,RHS,"");
          };
          var $tmp2 = this.GetActualBaseType(LeftResolved.BaseType);
          if ($tmp2 === 6) MaxVal = 0xffff;
          if (Int > MaxVal) this.fExprEvaluator.EmitRangeCheckConst(20170714171911,"#" + $lp5(Int),"#0","#" + $lp5(MaxVal),RHS,2);
        } else if (LeftResolved.BaseType in $mod.btAllStrings) {}
        else if (LeftResolved.BaseType === 2) {}
        else if (LeftResolved.BaseType === 37) {
          if ($lt144.isPrototypeOf(LeftResolved.ExprEl) && (LeftResolved.ExprEl.Kind === 7)) {
            LRangeValue = this.Eval(LeftResolved.ExprEl,rtl.createSet(0),true);
            try {
              var $tmp3 = LRangeValue.Kind;
              if ($tmp3 === 10) {
                var $tmp4 = LRangeValue.ElKind;
                if ($tmp4 === 1) {
                  if (RValue.Kind !== 9) {
                    this.RaiseNotYetImplemented(20171009171251,RHS,"")}
                   else if ((RValue.Index < LRangeValue.RangeStart) || (RValue.Index > LRangeValue.RangeEnd)) this.fExprEvaluator.EmitRangeCheckConst(20171009171442,RValue.AsString(),LRangeValue.ElementAsString(LRangeValue.RangeStart),LRangeValue.ElementAsString(LRangeValue.RangeEnd),RHS,2)}
                 else {
                  this.RaiseNotYetImplemented(20171009165348,LeftResolved.ExprEl,"");
                };
              } else {
                this.RaiseNotYetImplemented(20171009165326,LeftResolved.ExprEl,"");
              };
            } finally {
              $lp12({get: function () {
                  return LRangeValue;
                }, set: function (v) {
                  LRangeValue = v;
                }});
            };
          } else this.RaiseNotYetImplemented(20171009171005,RHS,"");
        } else {
          this.RaiseNotYetImplemented(20170530095243,RHS,"");
        };
      } finally {
        $lp12({get: function () {
            return RValue;
          }, set: function (v) {
            RValue = v;
          }});
        $lp12({get: function () {
            return LRangeValue;
          }, set: function (v) {
            LRangeValue = v;
          }});
      };
    };
    this.CheckAssignExprRangeToCustom = function (LeftResolved, RValue, RHS) {
      if (LeftResolved.BaseType !== 1) return;
      if (RValue === null) return;
      if (RHS === null) ;
    };
    this.CheckAssignResCompatibility = function (LHS, RHS, ErrorEl, RaiseOnIncompatible) {
      var Result = 0;
      var LTypeEl = null;
      var RTypeEl = null;
      var Handled = false;
      var C = null;
      var LBT = 0;
      var RBT = 0;
      var LRange = null;
      var RValue = null;
      var Value = null;
      var RightSubResolved = $lt59.$new();
      var wc = "\x00";
      Result = -1;
      Handled = false;
      Result = this.CheckAssignCompatibilityCustom(LHS,RHS,ErrorEl,RaiseOnIncompatible,{get: function () {
          return Handled;
        }, set: function (v) {
          Handled = v;
        }});
      if (Handled && (Result >= 0) && (Result < 2147483647)) return Result;
      if (!Handled) {
        LBT = this.GetActualBaseType(LHS.BaseType);
        RBT = this.GetActualBaseType(RHS.BaseType);
        if (this.IsGenericTemplType(LHS)) {
          if (!RaiseOnIncompatible) ErrorEl = null;
          Result = this.CheckTemplateFitsParamRes(LHS.LoTypeEl,RHS,0,ErrorEl);
          return Result;
        } else if (this.IsGenericTemplType(RHS)) {
          if (!RaiseOnIncompatible) ErrorEl = null;
          Result = this.CheckTemplateFitsParamRes(RHS.LoTypeEl,LHS,1,ErrorEl);
          return Result;
        };
        if (LHS.LoTypeEl === null) {
          if (LBT === 4) {
            Result = 10000;
          } else this.RaiseNotYetImplemented(20160922163631,LHS.IdentEl,"");
        } else if (LBT === RBT) {
          if (LBT === 2) {
            return this.CheckAssignCompatibilityUserType(LHS,RHS,ErrorEl,RaiseOnIncompatible)}
           else {
            if (this.IsSameType(LHS.HiTypeEl,RHS.HiTypeEl,1) && this.HasExactType(RHS)) {
              Result = 0}
             else Result = 2;
          };
        } else if ((LBT in $mod.btAllBooleans) && (RBT in $mod.btAllBooleans)) {
          Result = 3}
         else if (LBT in $mod.btAllChars) {
          if (RBT in $mod.btAllChars) {
            var $tmp = LBT;
            if ($tmp === 6) {
              Result = 100000}
             else {
              this.RaiseNotYetImplemented(20170728132440,ErrorEl,this.GetBaseTypeNames(LBT));
            };
          } else if ((RBT === 37) && (RHS.SubType in $mod.btAllChars)) {
            if (LBT === 6) return 3;
            this.RaiseNotYetImplemented(20171108195216,ErrorEl,"");
          };
        } else if (LBT in $mod.btAllStrings) {
          if (RBT in $mod.btAllStringAndChars) {
            var $tmp1 = LBT;
            if (($tmp1 === 8) || ($tmp1 === 9)) {
              Result = 3}
             else {
              this.RaiseNotYetImplemented(20170417195208,ErrorEl,this.GetBaseTypeNames(LBT));
            };
          } else if (RBT === 2) {
            RTypeEl = RHS.LoTypeEl;
            if (RTypeEl.$class.ClassType() === $lt94) {
              if ((RTypeEl.ObjKind === 2) && this.IsTGUIDString(LHS)) return this.cInterfaceToString;
            } else if (RTypeEl.$class.ClassType() === $lt98) {
              if (this.IsTGUID(RTypeEl)) Result = this.cTGUIDToString;
            };
          };
        } else if ((LBT in $mod.btAllInteger) && (RBT in $mod.btAllInteger)) {
          Result = (37 + LBT) - RBT;
          var $tmp2 = LBT;
          if (($tmp2 === 19) || ($tmp2 === 20)) {
            Result += 100000}
           else if (($tmp2 === 21) || ($tmp2 === 22)) {
            if (!(RBT in rtl.createSet(19,20))) Result += 100000}
           else if ($tmp2 === 23) {
            if (!(RBT in rtl.createSet(19,20,21,22))) Result += 100000}
           else if ($tmp2 === 24) {
            if (!(RBT in rtl.createSet(19,20,21,22,23))) Result += 100000}
           else if (($tmp2 === 25) || ($tmp2 === 26)) {
            if (!(RBT in rtl.createSet(19,20,21,22,23,24))) Result += 100000}
           else if ($tmp2 === 27) {
            if (!(RBT in rtl.createSet(19,20,21,22,25,26))) Result += 100000}
           else if ($tmp2 === 28) {
            if (!(RBT in rtl.createSet(19,20,21,22,25,26,27))) Result += 100000}
           else {
            this.RaiseNotYetImplemented(20170417205301,ErrorEl,this.GetBaseTypeNames(LBT));
          };
        } else if ((LBT in $mod.btAllFloats) && (RBT in $mod.btAllFloats)) {
          Result = (74 + LBT) - RBT;
          var $tmp3 = LBT;
          if ($tmp3 === 10) {
            if (RBT > 10) Result += 100000}
           else if ($tmp3 === 11) {
            if (RBT > 11) Result += 100000}
           else if (($tmp3 === 12) || ($tmp3 === 13)) {
            if (RBT > 13) Result += 100000}
           else if ($tmp3 === 14) {
            Result += 100000}
           else {
            this.RaiseNotYetImplemented(20170417205910,ErrorEl,this.GetBaseTypeNames(LBT));
          };
        } else if ((LBT in $mod.btAllFloats) && (RBT in $mod.btAllInteger)) {
          Result = (400000 + LBT) - RBT;
          var $tmp4 = LBT;
          if ($tmp4 === 10) {
            if (RBT > 23) Result += 100000}
           else if ($tmp4 === 11) {
            if (RBT > 27) Result += 100000}
           else if (($tmp4 === 12) || ($tmp4 === 13)) {
            if (RBT > 13) Result += 100000}
           else if ($tmp4 === 14) {
            if (!(RBT in rtl.createSet(19,20,21,22,24,23,25,26))) Result += 100000}
           else {
            this.RaiseNotYetImplemented(20170417205911,ErrorEl,this.GetBaseTypeNames(LBT));
          };
        } else if (LBT === 30) {
          if (RaiseOnIncompatible) this.RaiseMsg(20170216152431,3043,rtl.getResStr($lm5,"sCantAssignValuesToAnAddress"),[],ErrorEl);
          return 2147483647;
        } else if (LBT === 37) {
          if ($lt144.isPrototypeOf(LHS.ExprEl) && (LHS.ExprEl.Kind === 7)) {
            LRange = this.Eval(LHS.ExprEl,rtl.createSet(0),true);
            RValue = null;
            try {
              var $tmp5 = LRange.Kind;
              if ($tmp5 === 10) {
                var $tmp6 = LRange.ElKind;
                if ($tmp6 === 1) {
                  if (RHS.BaseType === 2) {
                    if (this.IsSameType(LRange.ElType,RHS.LoTypeEl,2)) {
                      return 0;
                    };
                  }}
                 else if ($tmp6 === 2) {
                  if (RHS.BaseType in $mod.btAllInteger) {
                    RValue = this.Eval$1(RHS,rtl.createSet(3),true);
                    if (RValue !== null) ;
                    return 3;
                  }}
                 else if ($tmp6 === 3) {
                  if (RHS.BaseType in $mod.btAllStringAndChars) {
                    RValue = this.Eval$1(RHS,rtl.createSet(3),true);
                    if (RValue !== null) {
                      var $tmp7 = RValue.Kind;
                      if ($tmp7 === 8) {
                        if (RValue.S.length !== 1) return 2147483647;
                        wc = RValue.S.charAt(0);
                      } else if ($tmp7 === 13) {
                        return 3}
                       else {
                        this.RaiseNotYetImplemented(20171108192232,ErrorEl,"");
                      };
                      if ((wc.charCodeAt() < LRange.RangeStart) || (wc.charCodeAt() > LRange.RangeEnd)) return 2147483647;
                    };
                    return 3;
                  }}
                 else if ($tmp6 === 4) if (RHS.BaseType === 15) {
                  RValue = this.Eval$1(RHS,rtl.createSet(3),true);
                  if (RValue !== null) ;
                  return 3;
                };
              };
            } finally {
              $lp12({get: function () {
                  return LRange;
                }, set: function (v) {
                  LRange = v;
                }});
              $lp12({get: function () {
                  return RValue;
                }, set: function (v) {
                  RValue = v;
                }});
            };
          };
        } else if (LBT === 34) {
          if (RBT === 36) {
            if (RHS.SubType === 0) {
              Result = 0}
             else if (this.IsSameType(LHS.HiTypeEl,RHS.HiTypeEl,1) && this.HasExactType(RHS)) {
              Result = 0}
             else if (LHS.SubType === RHS.SubType) {
              Result = 2}
             else if ((LHS.SubType in $mod.btAllBooleans) && (RHS.SubType in $mod.btAllBooleans)) {
              Result = 3}
             else if ((LHS.SubType in $mod.btAllInteger) && (RHS.SubType in $mod.btAllInteger)) {
              Result = 3;
            } else if ((LHS.SubType in $mod.btAllChars) && (RHS.SubType in $mod.btAllChars)) {
              Result = 3;
            };
          };
        } else if (LBT in rtl.createSet(35,36,3,31)) {
          if (RaiseOnIncompatible) this.RaiseMsg(20170216152432,3044,rtl.getResStr($lm5,"sIllegalExpression"),[],ErrorEl);
          return 2147483647;
        } else if ((LHS.IdentEl === null) && (LHS.ExprEl === null)) {
          if (RaiseOnIncompatible) this.RaiseMsg(20170216152434,3044,rtl.getResStr($lm5,"sIllegalExpression"),[],ErrorEl);
          return 2147483647;
        } else if (RBT === 30) {
          if (LBT === 29) {
            Result = 0}
           else if (LBT === 2) {
            LTypeEl = LHS.LoTypeEl;
            C = LTypeEl.$class.ClassType();
            if ((C === $lt94) || (C === $lt96) || (C === $lt97) || C.InheritsFrom($lt100) || this.IsDynArray(LTypeEl,true)) Result = 0;
          };
        } else if (RBT === 31) {
          if ((3 in this.FCurrentParser.GetCurrentModeSwitches()) && $lt100.isPrototypeOf(LHS.LoTypeEl) && $lt90.isPrototypeOf(RHS.IdentEl)) {
            if (this.CheckProcTypeCompatibility(LHS.LoTypeEl,RHS.IdentEl.ProcType,true,ErrorEl,RaiseOnIncompatible)) return 0;
          } else if ($lt100.isPrototypeOf(LHS.LoTypeEl) && $lt151.isPrototypeOf(RHS.ExprEl)) {
            if (this.CheckProcTypeCompatibility(LHS.LoTypeEl,RHS.ExprEl.Proc.ProcType,true,ErrorEl,RaiseOnIncompatible)) return 0;
          };
        } else if (LBT === 29) {
          if (RBT === 29) {
            LTypeEl = LHS.LoTypeEl;
            RTypeEl = RHS.LoTypeEl;
            if (this.IsBaseType(LTypeEl,29,false)) {
              Result = 0}
             else if (this.IsBaseType(RTypeEl,29,false)) {
              Result = 10000}
             else if (this.IsSameType(LTypeEl,RTypeEl,2)) {
              Result = 0}
             else if ((LTypeEl.$class.ClassType() === $lt97) && (RTypeEl.$class.ClassType() === $lt97)) Result = this.CheckAssignCompatibility(LTypeEl.DestType,RTypeEl.DestType,RaiseOnIncompatible,null);
          } else if (this.IsBaseType(LHS.LoTypeEl,29,false)) {
            if (RBT === 2) {
              RTypeEl = RHS.LoTypeEl;
              C = RTypeEl.$class.ClassType();
              if (C === $lt94) {
                return 10000}
               else if (C === $lt96) {
                Result = 10000}
               else if (C === $lt102) {
                if (this.IsDynArray(RTypeEl,true)) Result = 10000;
              } else if ((C === $lt100) || (C === $lt101)) {
                Result = 100000}
               else if (C === $lt97) Result = 0;
            };
          };
        } else if (LBT === 2) {
          LTypeEl = LHS.LoTypeEl;
          if (LTypeEl.$class.ClassType() === $lt102) {
            Result = this.CheckAssignCompatibilityArrayType(LHS,RHS,ErrorEl,RaiseOnIncompatible)}
           else if (LTypeEl.$class.ClassType() === $lt99) {
            if ((RHS.BaseType === 37) && (RHS.SubType === 2)) {
              RTypeEl = RHS.LoTypeEl;
              if (RTypeEl.$class.ClassType() === $lt103) {
                this.ComputeElement(RTypeEl.RangeExpr.Left,RightSubResolved,rtl.createSet(3),null);
                if ((RightSubResolved.BaseType === 2) && this.IsSameType(LTypeEl,RightSubResolved.LoTypeEl,2)) {
                  Result = 0;
                };
              };
            };
          } else if (LTypeEl.$class.ClassType() === $lt98) {
            if ((RBT in $mod.btAllStrings) && this.IsTGUID(LTypeEl) && (0 in RHS.Flags)) {
              Value = this.Eval$1(RHS,rtl.createSet(1),true);
              try {
                if (Value === null) if (RaiseOnIncompatible) {
                  this.RaiseXExpectedButYFound(20180414105916,"string literal","string",ErrorEl)}
                 else return 2147483647;
              } finally {
                $lp12({get: function () {
                    return Value;
                  }, set: function (v) {
                    Value = v;
                  }});
              };
              Result = this.cStringToTGUID;
            };
          } else if (LTypeEl.$class.ClassType() === $lt97) {
            if (RHS.BaseType === 29) {
              RTypeEl = RHS.LoTypeEl;
              if (this.IsBaseType(RTypeEl,29,false)) {
                Result = 10000}
               else {
                Result = this.CheckAssignCompatibilityPointerType(LTypeEl.DestType,RTypeEl,ErrorEl,false);
              };
            };
          };
        };
      };
      if ((Result >= 0) && (Result < 2147483647)) {
        if (!(0 in RHS.Flags)) {
          if (RaiseOnIncompatible) {
            this.RaiseVarExpected(20170318235637,ErrorEl,RHS.IdentEl);
          };
          return 2147483647;
        };
        return Result;
      };
      if (!RaiseOnIncompatible) return 2147483647;
      this.RaiseIncompatibleTypeRes(20170216152437,3028,[],RHS,LHS,ErrorEl);
      return Result;
    };
    this.CheckEqualElCompatibility = function (Left, Right, ErrorEl, RaiseOnIncompatible, SetReferenceFlags) {
      var Result = 0;
      var LFlags = {};
      var RFlags = {};
      var LeftResolved = $lt59.$new();
      var RightResolved = $lt59.$new();
      var LeftErrorEl = null;
      var RightErrorEl = null;
      Result = 2147483647;
      if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
        LFlags = {}}
       else LFlags = rtl.createSet(2);
      if (SetReferenceFlags) LFlags = rtl.includeSet(LFlags,0);
      this.ComputeElement(Left,LeftResolved,rtl.refSet(LFlags),null);
      if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
        RFlags = rtl.refSet(LFlags)}
       else {
        if (LeftResolved.BaseType === 30) {
          RFlags = rtl.createSet(2)}
         else if (this.IsProcedureType(LeftResolved,true)) {
          RFlags = rtl.createSet(2)}
         else RFlags = {};
      };
      if (SetReferenceFlags) RFlags = rtl.includeSet(RFlags,0);
      this.ComputeElement(Right,RightResolved,rtl.refSet(RFlags),null);
      if (ErrorEl === null) {
        LeftErrorEl = Left;
        RightErrorEl = Right;
      } else {
        LeftErrorEl = ErrorEl;
        RightErrorEl = ErrorEl;
      };
      Result = this.CheckEqualResCompatibility(LeftResolved,RightResolved,LeftErrorEl,RaiseOnIncompatible,RightErrorEl);
      return Result;
    };
    this.CheckEqualResCompatibility = function (LHS, RHS, LErrorEl, RaiseOnIncompatible, RErrorEl) {
      var Result = 0;
      var LTypeEl = null;
      var RTypeEl = null;
      var ResolvedEl = $lt59.$new();
      Result = 2147483647;
      if (RErrorEl === null) RErrorEl = LErrorEl;
      if (!(0 in LHS.Flags)) {
        if (LHS.BaseType === 2) {
          LTypeEl = LHS.LoTypeEl;
          if ((LTypeEl.$class.ClassType() === $lt94) && (this.ResolveAliasTypeEl(LHS.IdentEl) === LTypeEl)) {
            if (RHS.BaseType === 30) {
              return 0}
             else if (RHS.BaseType in $mod.btAllStrings) {
              if ((0 in RHS.Flags) && (LTypeEl.ObjKind === 2) && this.IsTGUIDString(RHS)) return this.cInterfaceToString;
            } else if (RHS.BaseType === 2) {
              RTypeEl = RHS.LoTypeEl;
              if ((RTypeEl.$class.ClassType() === $lt96) && (0 in RHS.Flags) && (LTypeEl.ObjKind === 1)) {
                return 0}
               else if ((RTypeEl.$class.ClassType() === $lt98) && (0 in RHS.Flags) && (LTypeEl.ObjKind === 2) && this.IsTGUID(RTypeEl)) return this.cInterfaceToTGUID;
            };
          };
        };
        this.RaiseMsg(20170216152438,3038,rtl.getResStr($lm5,"sNotReadable"),[],LErrorEl);
      };
      if (!(0 in RHS.Flags)) {
        if (RHS.BaseType === 2) {
          RTypeEl = RHS.LoTypeEl;
          if ((RTypeEl.$class.ClassType() === $lt94) && (this.ResolveAliasTypeEl(RHS.IdentEl) === RTypeEl)) {
            if (LHS.BaseType === 30) {
              return 0}
             else if (LHS.BaseType in $mod.btAllStrings) {
              if ((0 in LHS.Flags) && (RTypeEl.ObjKind === 2) && this.IsTGUIDString(LHS)) return this.cInterfaceToString;
            } else if (LHS.BaseType === 2) {
              LTypeEl = LHS.LoTypeEl;
              if ((LTypeEl.$class.ClassType() === $lt96) && (0 in LHS.Flags) && (RTypeEl.ObjKind === 1)) {
                return 0}
               else if ((LTypeEl.$class.ClassType() === $lt98) && (0 in LHS.Flags) && (RTypeEl.ObjKind === 2) && this.IsTGUID(LTypeEl)) return this.cInterfaceToTGUID;
            };
          };
        };
        this.RaiseMsg(20170216152440,3038,rtl.getResStr($lm5,"sNotReadable"),[],RErrorEl);
      };
      if (this.IsGenericTemplType(LHS)) {
        Result = this.CheckTemplateFitsParamRes(LHS.LoTypeEl,RHS,2,null);
        if (Result !== 2147483647) return Result;
      } else if (this.IsGenericTemplType(RHS)) {
        Result = this.CheckTemplateFitsParamRes(RHS.LoTypeEl,LHS,2,null);
        if (Result !== 2147483647) return Result;
      };
      if ((LHS.BaseType === 1) || (RHS.BaseType === 1)) {
        Result = this.CheckEqualCompatibilityCustomType(LHS,RHS,LErrorEl,RaiseOnIncompatible);
        if ((Result === 2147483647) && RaiseOnIncompatible) this.RaiseIncompatibleTypeRes(20170330010727,3028,[],RHS,LHS,LErrorEl);
        return Result;
      } else if (LHS.BaseType === RHS.BaseType) {
        if (LHS.BaseType === 2) {
          return this.CheckEqualCompatibilityUserType(LHS,RHS,LErrorEl,RaiseOnIncompatible)}
         else return 0;
      } else if (LHS.BaseType in $mod.btAllInteger) {
        if (RHS.BaseType in rtl.unionSet($mod.btAllInteger,$mod.btAllFloats)) {
          return 3}
         else if ((RHS.BaseType === 37) && (RHS.SubType in $mod.btAllInteger)) return 3;
      } else if (LHS.BaseType in $mod.btAllFloats) {
        if (RHS.BaseType in rtl.unionSet($mod.btAllInteger,$mod.btAllFloats)) return 3;
      } else if (LHS.BaseType in $mod.btAllBooleans) {
        if (RHS.BaseType in $mod.btAllBooleans) {
          return 3}
         else if ((RHS.BaseType === 37) && (RHS.SubType in $mod.btAllBooleans)) return 3;
      } else if (LHS.BaseType in $mod.btAllStringAndChars) {
        if (RHS.BaseType in $mod.btAllStringAndChars) {
          return 3}
         else if ((RHS.BaseType === 37) && (RHS.SubType in $mod.btAllChars)) {
          return 3}
         else if (RHS.BaseType === 2) {
          RTypeEl = RHS.LoTypeEl;
          if (RTypeEl.$class.ClassType() === $lt94) {
            if ((RTypeEl.ObjKind === 2) && this.IsTGUIDString(LHS)) return this.cInterfaceToString;
          } else if ((RTypeEl.$class.ClassType() === $lt98) && this.IsTGUID(RTypeEl)) return this.cTGUIDToString;
        };
      } else if (LHS.BaseType === 30) {
        if (RHS.BaseType in rtl.createSet(29,30)) {
          return 0}
         else if (RHS.BaseType === 2) {
          LTypeEl = RHS.LoTypeEl;
          if ((LTypeEl.$class.ClassType() === $lt94) || (LTypeEl.$class.ClassType() === $lt96) || (LTypeEl.$class.ClassType() === $lt97) || $lt100.isPrototypeOf(LTypeEl) || this.IsDynArray(LTypeEl,true)) return 0;
        };
        if (RaiseOnIncompatible) {
          this.RaiseIncompatibleTypeRes(20170216152442,3028,[],RHS,LHS,RErrorEl)}
         else return 2147483647;
      } else if (RHS.BaseType === 30) {
        if (LHS.BaseType === 29) {
          return 0}
         else if (LHS.BaseType === 2) {
          LTypeEl = LHS.LoTypeEl;
          if ((LTypeEl.$class.ClassType() === $lt94) || (LTypeEl.$class.ClassType() === $lt96) || (LTypeEl.$class.ClassType() === $lt97) || $lt100.isPrototypeOf(LTypeEl) || this.IsDynArray(LTypeEl,true)) return 0;
        };
        if (RaiseOnIncompatible) {
          this.RaiseIncompatibleTypeRes(20170216152444,3028,[],RHS,LHS,LErrorEl)}
         else return 2147483647;
      } else if (LHS.BaseType === 29) {
        if (RHS.BaseType === 2) {
          RTypeEl = RHS.LoTypeEl;
          if (RTypeEl.$class.ClassType() === $lt97) {
            return 0}
           else if (RTypeEl.$class.ClassType() === $lt94) {
            return 3}
           else if (RTypeEl.$class.ClassType() === $lt96) return 3;
        };
      } else if (LHS.BaseType in rtl.createSet(34,36)) {
        if (RHS.BaseType in rtl.createSet(34,36)) {
          if (LHS.LoTypeEl === null) return 0;
          if (RHS.LoTypeEl === null) return 0;
          if (this.IsSameType(LHS.LoTypeEl,RHS.LoTypeEl,2)) return 0;
          if ((LHS.SubType === RHS.SubType) && (LHS.SubType in rtl.unionSet(rtl.unionSet($mod.btAllBooleans,$mod.btAllInteger),$mod.btAllChars))) return 0;
          if (((LHS.SubType in $mod.btAllBooleans) && (RHS.SubType in $mod.btAllBooleans)) || ((LHS.SubType in $mod.btAllInteger) && (RHS.SubType in $mod.btAllInteger))) return 3;
          if (RaiseOnIncompatible) {
            this.RaiseMsg(20170216152446,3028,rtl.getResStr($lm5,"sIncompatibleTypesGotExpected"),$lp6(18,"set of " + this.GetBaseTypeNames(LHS.SubType),18,"set of " + this.GetBaseTypeNames(RHS.SubType)),LErrorEl)}
           else return 2147483647;
        };
      } else if (LHS.BaseType === 37) {
        if (LHS.SubType in $mod.btAllInteger) {
          if (RHS.BaseType in $mod.btAllInteger) {
            return 3}
           else if ((RHS.BaseType === 37) && (RHS.SubType in $mod.btAllInteger)) return 3;
        } else if (LHS.SubType in $mod.btAllBooleans) {
          if (RHS.BaseType in $mod.btAllBooleans) {
            return 3}
           else if ((RHS.BaseType === 37) && (RHS.SubType in $mod.btAllBooleans)) return 3;
        } else if (LHS.SubType in $mod.btAllChars) {
          if (RHS.BaseType in $mod.btAllStringAndChars) {
            return 3}
           else if ((RHS.BaseType === 37) && (RHS.SubType in $mod.btAllChars)) return 3;
        } else if (LHS.SubType === 2) {
          LTypeEl = LHS.LoTypeEl;
          if (LTypeEl.$class.ClassType() === $lt103) {
            this.ComputeElement(LTypeEl.RangeExpr.Left,ResolvedEl,rtl.createSet(3),null);
            if (ResolvedEl.BaseType === 2) {
              LTypeEl = ResolvedEl.LoTypeEl;
              if (LTypeEl.$class.ClassType() === $lt99) {
                if (RHS.BaseType === 2) {
                  RTypeEl = RHS.LoTypeEl;
                  if (LTypeEl === RTypeEl) return 3;
                };
              };
            };
          };
        };
      } else if (LHS.BaseType === 2) {
        LTypeEl = LHS.LoTypeEl;
        if (LTypeEl.$class.ClassType() === $lt99) {
          if (RHS.BaseType === 37) {
            RTypeEl = RHS.LoTypeEl;
            if (RTypeEl.$class.ClassType() === $lt103) {
              this.ComputeElement(RTypeEl.RangeExpr.Left,ResolvedEl,rtl.createSet(3),null);
              if (ResolvedEl.BaseType === 2) {
                RTypeEl = ResolvedEl.LoTypeEl;
                if (LTypeEl === RTypeEl) return 3;
              };
            };
          };
        } else if (LTypeEl.$class.ClassType() === $lt94) {
          if (RHS.BaseType === 29) {
            return 3}
           else if (LTypeEl.ObjKind === 2) {
            if (RHS.BaseType in $mod.btAllStrings) {
              if (this.IsTGUIDString(RHS)) return this.cInterfaceToString;
            } else if (RHS.BaseType === 2) {
              RTypeEl = RHS.LoTypeEl;
              if ((RTypeEl.$class.ClassType() === $lt98) && this.IsTGUID(RTypeEl)) return this.cInterfaceToTGUID;
            };
          };
        } else if (LTypeEl.$class.ClassType() === $lt96) {
          if (RHS.BaseType === 29) return 3;
        } else if (LTypeEl.$class.ClassType() === $lt98) {
          if (this.IsTGUID(LTypeEl)) {
            if (RHS.BaseType in $mod.btAllStrings) {
              return this.cTGUIDToString}
             else if (RHS.BaseType === 2) {
              RTypeEl = RHS.LoTypeEl;
              if ((RTypeEl.$class.ClassType() === $lt94) && (RTypeEl.ObjKind === 2)) return this.cInterfaceToTGUID;
            };
          };
        } else if (LTypeEl.$class.ClassType() === $lt97) {
          if (RHS.BaseType === 29) return 0;
        };
      };
      if (RaiseOnIncompatible) {
        this.RaiseIncompatibleTypeRes(20170216152449,3028,[],RHS,LHS,RErrorEl)}
       else return 2147483647;
      return Result;
    };
    this.IsVariableConst = function (El, PosEl, RaiseIfConst) {
      var Result = false;
      var CurEl = null;
      var VarResolved = $lt59.$new();
      var Loop = null;
      Result = false;
      CurEl = PosEl;
      while (CurEl !== null) {
        if (CurEl.$class.ClassType() === $lt131) {
          Loop = CurEl;
          if (Loop.VariableName !== PosEl) {
            this.ComputeElement(Loop.VariableName,VarResolved,rtl.createSet(1),null);
            if (VarResolved.IdentEl === El) {
              if (RaiseIfConst) this.RaiseMsg(20180430100719,3111,rtl.getResStr($lm5,"sIllegalAssignmentToForLoopVar"),$lp6(18,El.FName),PosEl);
              return true;
            };
          };
        };
        CurEl = CurEl.FParent;
      };
      return Result;
    };
    this.ResolvedElCanBeVarParam = function (ResolvedEl, PosEl, RaiseIfConst) {
      var $Self = this;
      var Result = false;
      function NotLocked(El) {
        var Result = false;
        Result = !$Self.IsVariableConst(El,PosEl,RaiseIfConst);
        return Result;
      };
      var IdentEl = null;
      Result = false;
      if (rtl.neSet(rtl.intersectSet(rtl.createSet(0,1),ResolvedEl.Flags),rtl.createSet(0,1))) return Result;
      if (ResolvedEl.IdentEl === null) return true;
      IdentEl = ResolvedEl.IdentEl;
      if (IdentEl.$class.ClassType() === $lt105) return NotLocked(IdentEl);
      if (IdentEl.$class.ClassType() === $lt117) {
        if (IdentEl.IsConst) {
          if (RaiseIfConst) this.RaiseMsg(20180430100719,3110,rtl.getResStr($lm5,"sCantAssignValuesToConstVariable"),[],PosEl);
          return false;
        };
        return NotLocked(IdentEl);
      };
      if (IdentEl.$class.ClassType() === $lt106) {
        if (IdentEl.Access in rtl.createSet(1,4)) {
          if (RaiseIfConst) this.RaiseMsg(20180430100843,3110,rtl.getResStr($lm5,"sCantAssignValuesToConstVariable"),[],PosEl);
          return false;
        };
        Result = IdentEl.Access in rtl.createSet(0,2,3);
        return Result && NotLocked(IdentEl);
      };
      if (IdentEl.$class.ClassType() === $lt141) return NotLocked(IdentEl);
      if ((2 in this.FOptions) && (IdentEl.$class.ClassType() === $lt88)) return NotLocked(IdentEl);
      return Result;
    };
    this.ResolvedElIsClassOrRecordInstance = function (ResolvedEl) {
      var Result = false;
      var TypeEl = null;
      var C = null;
      Result = false;
      if (ResolvedEl.BaseType !== 2) return Result;
      TypeEl = ResolvedEl.LoTypeEl;
      if (TypeEl === null) return Result;
      if (TypeEl.$class.ClassType() === $lt94) {
        if (TypeEl.ObjKind !== 1) return Result;
      } else if (TypeEl.$class.ClassType() === $lt98) {}
      else return Result;
      if (ResolvedEl.IdentEl !== null) {
        C = ResolvedEl.IdentEl.$class.ClassType();
        if (C.InheritsFrom($lt105) || (C === $lt106) || (C === $lt141)) return true;
      };
      return Result;
    };
    this.GetResolver = function (El) {
      var Result = null;
      var Module = null;
      var Scope = null;
      Result = null;
      if (El === null) return Result;
      Module = El.GetModule();
      if (Module === null) return Result;
      Scope = rtl.as(Module.FData,$lt15);
      if (Scope === null) return Result;
      Result = rtl.as(Scope.Owner,$lt74);
      return Result;
    };
    this.ElHasModeSwitch = function (El, ms) {
      var Result = false;
      Result = ms in this.GetElModeSwitches(El);
      return Result;
    };
    this.GetElModeSwitches = function (El) {
      var Result = {};
      var C = null;
      while (El !== null) {
        if (El.FData !== null) {
          C = El.FData.$class.ClassType();
          if (C.InheritsFrom($lt37)) {
            return El.FData.ModeSwitches}
           else if (C.InheritsFrom($lt22)) return El.FData.ModeSwitches;
        };
        El = El.FParent;
      };
      Result = rtl.refSet(this.FCurrentParser.GetCurrentModeSwitches());
      return Result;
    };
    this.ElHasBoolSwitch = function (El, bs) {
      var Result = false;
      Result = bs in this.GetElBoolSwitches(El);
      return Result;
    };
    this.GetElBoolSwitches = function (El) {
      var Result = {};
      var C = null;
      Result = rtl.refSet(this.FCurrentParser.FScanner.FCurrentBoolSwitches);
      while (El !== null) {
        if (El.FData !== null) {
          C = El.FData.$class.ClassType();
          if (C.InheritsFrom($lt37)) {
            return El.FData.BoolSwitches}
           else if (C.InheritsFrom($lt22)) {
            return El.FData.BoolSwitches}
           else if (C.InheritsFrom($lt15)) return El.FData.BoolSwitches;
        };
        El = El.FParent;
      };
      return Result;
    };
    this.GetProcTypeDescription = function (ProcType, Flags) {
      var Result = "";
      var Args = null;
      var Templates = null;
      var i = 0;
      var Arg = null;
      var ArgType = null;
      var Proc = null;
      if (ProcType === null) return "nil";
      Result = ProcType.$class.TypeName();
      if (ProcType.GetIsReference()) Result = $lm4.ProcTypeModifiers[4] + " " + Result;
      if ($lt90.isPrototypeOf(ProcType.FParent)) {
        Proc = ProcType.FParent;
        if (0 in Flags) {
          if (1 in Flags) {
            Result = Result + " " + Proc.FullName()}
           else Result = Result + " " + Proc.FName;
        };
        Templates = this.GetProcTemplateTypes(Proc);
        if (Templates !== null) Result = Result + $lp9(Templates.FCount);
      };
      Args = ProcType.Args;
      if (Args.FCount > 0) {
        Result = Result + "(";
        for (var $l = 0, $end = Args.FCount - 1; $l <= $end; $l++) {
          i = $l;
          if (i > 0) Result = Result + ";";
          Arg = rtl.getObject(Args.Get(i));
          if ($lm4.AccessNames[Arg.Access] !== "") Result = Result + $lm4.AccessNames[Arg.Access];
          if (Arg.ArgType === null) {
            Result = Result + "untyped"}
           else {
            ArgType = Arg.ArgType;
            if (2 in Flags) ArgType = $mod.ResolveSimpleAliasType(ArgType);
            Result = Result + this.GetTypeDescription(ArgType,1 in Flags);
          };
        };
        Result = Result + ")";
      };
      if (ProcType.GetIsOfObject()) Result = Result + " " + $lm4.ProcTypeModifiers[0];
      if (ProcType.GetIsNested()) Result = Result + " " + $lm4.ProcTypeModifiers[1];
      if ($lm4.cCallingConventions[ProcType.CallingConvention] !== "") Result = Result + ";" + $lm4.cCallingConventions[ProcType.CallingConvention];
      return Result;
    };
    this.GetResolverResultDescription = function (T, OnlyType) {
      var $Self = this;
      var Result = "";
      function GetSubTypeName() {
        var Result = "";
        if ((T.LoTypeEl !== null) && (T.LoTypeEl.FName !== "")) {
          Result = T.LoTypeEl.FName}
         else Result = $Self.GetBaseTypeNames(T.SubType);
        return Result;
      };
      var ArrayEl = null;
      var $tmp = T.BaseType;
      if ($tmp === 3) {
        return $mod.GetElementTypeName(T.IdentEl) + " " + T.IdentEl.FName}
       else if ($tmp === 30) {
        return "nil"}
       else if ($tmp === 37) {
        Result = "range of " + GetSubTypeName()}
       else if ($tmp === 34) {
        Result = "set of " + GetSubTypeName()}
       else if ($tmp === 35) {
        Result = "array of " + GetSubTypeName()}
       else if ($tmp === 36) {
        Result = "set/array literal of " + GetSubTypeName()}
       else if ($tmp === 2) {
        if (T.LoTypeEl.$class.ClassType() === $lt96) {
          Result = "class of " + T.LoTypeEl.DestType.FName}
         else if (T.LoTypeEl.$class.ClassType() === $lt157) {
          Result = T.LoTypeEl.DestType.FName}
         else if (T.LoTypeEl.$class.ClassType() === $lt158) {
          Result = "type " + T.LoTypeEl.DestType.FName}
         else if (T.LoTypeEl.$class.ClassType() === $lt102) {
          ArrayEl = T.LoTypeEl;
          if (rtl.length(ArrayEl.Ranges) === 0) {
            if (ArrayEl.ElType === null) {
              Result = "array of const"}
             else {
              Result = "array of " + ArrayEl.ElType.FName;
              if (this.IsOpenArray(ArrayEl)) Result = "open " + Result;
            };
          } else Result = "static array[] of " + ArrayEl.ElType.FName;
        } else if ($lt100.isPrototypeOf(T.LoTypeEl)) {
          Result = this.GetProcTypeDescription(T.LoTypeEl,{})}
         else if (T.LoTypeEl.FName !== "") {
          Result = T.LoTypeEl.FName}
         else Result = T.LoTypeEl.ElementTypeName();
      } else if ($tmp === 1) {
        Result = T.LoTypeEl.FName}
       else {
        Result = this.GetBaseTypeNames(T.BaseType);
      };
      if (!OnlyType && (T.LoTypeEl !== T.IdentEl) && (T.IdentEl !== null)) Result = T.IdentEl.FName + ":" + Result;
      return Result;
    };
    this.GetTypeDescription = function (aType, AddPath) {
      var $Self = this;
      var Result = "";
      function GetName() {
        var Result = "";
        var s = "";
        var Spec = null;
        var P = null;
        var i = 0;
        var GenScope = null;
        var Params = [];
        Result = aType.FName;
        if (Result === "") {
          if ($lt102.isPrototypeOf(aType)) {
            if (rtl.length(aType.Ranges) > 0) {
              Result = "static array"}
             else if (aType.ElType === null) {
              Result = "array of const"}
             else if ($Self.IsOpenArray(aType)) {
              Result = "open array"}
             else Result = "dynamic array";
          } else if ($lt155.isPrototypeOf(aType)) {
            Spec = aType;
            if ($lt5.isPrototypeOf(Spec.FData)) return $Self.GetTypeDescription(Spec.FData.SpecializedType,false);
            Result = $Self.GetTypeDescription(Spec.DestType,true) + "<";
            for (var $l = 0, $end = Spec.Params.FCount - 1; $l <= $end; $l++) {
              i = $l;
              P = rtl.getObject(Spec.Params.Get(i));
              if ($lt95.isPrototypeOf(P)) Result = Result + $Self.GetTypeDescription(P,false);
              if (i > 0) Result = Result + ",";
            };
            Result = Result + ">";
          } else Result = $mod.GetElementTypeName(aType);
        } else if ($lt93.isPrototypeOf(aType)) {
          i = $Self.GetTypeParameterCount(aType);
          if (i > 0) {
            Result = Result + $lp9($Self.GetTypeParameterCount(aType))}
           else if ($lt27.isPrototypeOf(aType.FData)) {
            GenScope = aType.FData;
            if ((GenScope.SpecializedFromItem !== null) && $mod.IsValidIdent(aType.FName,false,false)) {
              Params = GenScope.SpecializedFromItem.Params;
              Result = Result + "<";
              for (var $l1 = 0, $end1 = rtl.length(Params) - 1; $l1 <= $end1; $l1++) {
                i = $l1;
                Result = Result + $Self.GetTypeDescription(Params[i],AddPath);
                if (i > 0) Result = Result + ",";
              };
              Result = Result + ">";
            };
          };
        };
        if (AddPath) {
          s = aType.ParentPath();
          if ((s !== "") && (s !== ".")) Result = s + "." + Result;
        };
        return Result;
      };
      if (aType === null) return "untyped";
      Result = GetName();
      if (aType.$class.ClassType() === $lt83) {
        if ($lt64.isPrototypeOf(aType.FData)) Result = Result + "()";
        return Result;
      };
      return Result;
    };
    this.GetTypeDescription$1 = function (R, AddPath) {
      var Result = "";
      var s = "";
      Result = this.GetTypeDescription(R.LoTypeEl,AddPath);
      if (R.BaseType in rtl.createSet(34,35,36)) Result = this.GetBaseTypeNames(R.BaseType) + " of " + Result;
      if ((R.LoTypeEl !== null) && (R.IdentEl === R.LoTypeEl)) {
        s = $mod.GetElementTypeName(R.LoTypeEl);
        if (s !== "") {
          Result = s + " " + Result}
         else Result = "type " + Result;
      };
      return Result;
    };
    this.GetBaseDescription = function (R, AddPath) {
      var Result = "";
      if (R.BaseType === 2) {
        Result = this.GetTypeDescription$1(R,AddPath)}
       else if ((R.BaseType === 29) && !this.IsBaseType(R.LoTypeEl,29,false)) {
        Result = "^" + this.GetTypeDescription$1(R,AddPath)}
       else Result = this.GetBaseTypeNames(R.BaseType);
      return Result;
    };
    this.GetProcFirstImplEl = function (Proc) {
      var Result = null;
      var Scope = null;
      var Body = null;
      Result = null;
      if (Proc === null) return Result;
      if (Proc.Body !== null) {
        Body = Proc.Body.Body}
       else Body = null;
      if (Body === null) {
        if (Proc.FData === null) return Result;
        Scope = rtl.as(Proc.FData,$lt37);
        Proc = Scope.ImplProc;
        if (Proc === null) return Result;
        if (Proc.Body === null) return Result;
        Body = Proc.Body.Body;
        if (Body === null) return Result;
      };
      if (Body.Elements === null) return Result;
      if (Body.Elements.FCount === 0) return Result;
      Result = rtl.getObject(Body.Elements.Get(0));
      return Result;
    };
    this.GetProcTemplateTypes = function (Proc) {
      var Result = null;
      var NameParts = null;
      if (Proc.NameParts === null) return null;
      NameParts = rtl.getObject(Proc.NameParts.Get(Proc.NameParts.FCount - 1));
      Result = NameParts.Templates;
      if ((Result !== null) && (Result.FCount === 0)) return null;
      return Result;
    };
    this.GetProcName = function (Proc, WithTemplates) {
      var Result = "";
      var NameParts = null;
      var i = 0;
      var j = 0;
      var NamePart = null;
      var TemplType = null;
      var Templates = null;
      if (Proc === null) return "(nil)";
      Result = Proc.FName;
      if (WithTemplates) {
        NameParts = Proc.NameParts;
        if (NameParts === null) return Result;
        Result = "";
        for (var $l = 0, $end = NameParts.FCount - 1; $l <= $end; $l++) {
          i = $l;
          NamePart = rtl.getObject(NameParts.Get(i));
          if (i > 0) Result = Result + ".";
          Result = Result + NamePart.Name;
          Templates = NamePart.Templates;
          if ((Templates !== null) && (Templates.FCount > 0)) {
            for (var $l1 = 0, $end1 = Templates.FCount - 1; $l1 <= $end1; $l1++) {
              j = $l1;
              TemplType = rtl.getObject(NamePart.Templates.Get(j));
              if (j === 0) {
                Result = Result + "<"}
               else Result = Result + ",";
              Result = Result + TemplType.FName;
            };
            Result = Result + ">";
          };
        };
      };
      return Result;
    };
    this.GetPasPropertyAncestor = function (El, WithRedeclarations) {
      var Result = null;
      Result = null;
      if (El === null) return Result;
      if (!WithRedeclarations && (El.VarType !== null)) return Result;
      if (El.FData === null) return Result;
      Result = El.FData.AncestorProp;
      return Result;
    };
    this.GetPasPropertyType = function (El) {
      var Result = null;
      Result = null;
      while (El !== null) {
        if (El.VarType !== null) return El.VarType;
        El = this.GetPasPropertyAncestor(El,false);
      };
      return Result;
    };
    this.GetPasPropertyArgs = function (El) {
      var Result = null;
      while (El !== null) {
        if (El.VarType !== null) return El.FArgs;
        El = this.GetPasPropertyAncestor(El,false);
      };
      Result = null;
      return Result;
    };
    this.GetPasPropertyGetter = function (El) {
      var Result = null;
      var DeclEl = null;
      Result = null;
      while (El !== null) {
        if (El.ReadAccessor !== null) {
          DeclEl = rtl.as(El.ReadAccessor.FData,$lt55).FDeclaration;
          Result = DeclEl;
          return Result;
        };
        El = this.GetPasPropertyAncestor(El,false);
      };
      return Result;
    };
    this.GetPasPropertySetter = function (El) {
      var Result = null;
      var DeclEl = null;
      Result = null;
      while (El !== null) {
        if (El.WriteAccessor !== null) {
          DeclEl = rtl.as(El.WriteAccessor.FData,$lt55).FDeclaration;
          Result = DeclEl;
          return Result;
        };
        El = this.GetPasPropertyAncestor(El,false);
      };
      return Result;
    };
    this.GetPasPropertyIndex = function (El) {
      var Result = null;
      Result = null;
      while (El !== null) {
        if (El.IndexExpr !== null) {
          Result = El.IndexExpr;
          return Result;
        };
        El = this.GetPasPropertyAncestor(El,false);
      };
      return Result;
    };
    this.GetPasPropertyStoredExpr = function (El) {
      var Result = null;
      Result = null;
      while (El !== null) {
        if (El.StoredAccessor !== null) {
          Result = El.StoredAccessor;
          return Result;
        };
        El = this.GetPasPropertyAncestor(El,false);
      };
      return Result;
    };
    this.GetPasPropertyDefaultExpr = function (El) {
      var Result = null;
      Result = null;
      while (El !== null) {
        if (El.DefaultExpr !== null) {
          Result = El.DefaultExpr;
          return Result;
        } else if (El.IsNodefault) return null;
        El = this.GetPasPropertyAncestor(El,false);
      };
      return Result;
    };
    this.GetPasClassAncestor = function (ClassEl, SkipAlias) {
      var Result = null;
      var DeclEl = null;
      var ClassScope = null;
      Result = null;
      if (ClassEl === null) return Result;
      if (ClassEl.FData === null) return Result;
      if (ClassEl.IsForward) {
        DeclEl = rtl.as(ClassEl.FData,$lt55).FDeclaration;
        ClassEl = rtl.as($mod.NoNil(DeclEl),$lt94);
        Result = ClassEl;
      } else {
        ClassScope = rtl.as(ClassEl.FData,$lt34);
        if (!(0 in ClassScope.Flags)) return Result;
        if (SkipAlias) {
          if (ClassScope.AncestorScope === null) return Result;
          Result = ClassScope.AncestorScope.FElement;
        } else Result = ClassScope.DirectAncestor;
      };
      return Result;
    };
    this.GetParentProcBody = function (El) {
      var Result = null;
      while (El !== null) {
        if ($lt89.isPrototypeOf(El)) return El;
        El = El.FParent;
      };
      Result = null;
      return Result;
    };
    this.ProcHasImplElements = function (Proc) {
      var Result = false;
      Result = this.GetProcFirstImplEl(Proc) !== null;
      return Result;
    };
    this.IndexOfImplementedInterface = function (ClassEl, aType) {
      var Result = 0;
      var List = null;
      var i = 0;
      if (aType === null) return -1;
      aType = this.ResolveAliasType(aType,true);
      List = ClassEl.Interfaces;
      for (var $l = 0, $end = List.FCount - 1; $l <= $end; $l++) {
        i = $l;
        if (this.ResolveAliasType(rtl.getObject(List.Get(i)),true) === aType) return i;
      };
      Result = -1;
      return Result;
    };
    this.GetLoop = function (El) {
      var Result = null;
      while (El !== null) {
        if ((El.$class.ClassType() === $lt126) || (El.$class.ClassType() === $lt128) || (El.$class.ClassType() === $lt131)) return El;
        El = El.FParent;
      };
      Result = null;
      return Result;
    };
    this.ResolveAliasType = function (aType, SkipTypeAlias) {
      var Result = null;
      var C = null;
      var SpecType = null;
      while (aType !== null) {
        C = aType.$class.ClassType();
        if (C === $lt157) {
          aType = aType.DestType}
         else if ((C === $lt158) && SkipTypeAlias) {
          aType = aType.DestType}
         else if ((C === $lt94) && aType.IsForward && $lt55.isPrototypeOf(aType.FData)) {
          aType = rtl.as($mod.NoNil(aType.FData.FDeclaration),$lt95)}
         else if (C === $lt155) {
          SpecType = aType;
          if (SpecType.SubType !== null) {
            aType = SpecType.SubType}
           else {
            if ($lt5.isPrototypeOf(SpecType.FData)) return SpecType.FData.SpecializedType;
            aType = SpecType.DestType;
          };
        } else return aType;
      };
      Result = null;
      return Result;
    };
    this.ResolveAliasTypeEl = function (El) {
      var Result = null;
      if ($lt95.isPrototypeOf(El)) {
        Result = this.ResolveAliasType(El,true)}
       else Result = null;
      return Result;
    };
    this.ExprIsAddrTarget = function (El) {
      var Result = false;
      var Parent = null;
      var Prop = null;
      var C = null;
      Result = false;
      if (El === null) return Result;
      if (!this.IsNameExpr(El)) return Result;
      do {
        Parent = El.FParent;
        C = Parent.$class.ClassType();
        if (C === $lt143) {
          if (Parent.OpCode === 24) return true;
        } else if (C === $lt144) {
          if (Parent.Right !== El) return Result;
          if (Parent.OpCode !== 27) return Result;
        } else if (C === $lt145) {
          if (Parent.Value !== El) return Result;
        } else if (C === $lt88) {
          Prop = Parent;
          Result = (Prop.ReadAccessor === El) || (Prop.WriteAccessor === El) || (Prop.StoredAccessor === El);
          return Result;
        } else if (C === $lt123) {
          if (Parent.Right !== El) return Result;
          if (3 in this.FCurrentParser.GetCurrentModeSwitches()) return true;
          return Result;
        } else if (C === $lt166) {
          return true}
         else return Result;
        El = Parent;
      } while (!false);
      return Result;
    };
    this.IsNameExpr = function (El) {
      var Result = false;
      Result = (El.$class.ClassType() === $lt142) && (El.Kind === 0);
      return Result;
    };
    this.GetNameExprValue = function (El) {
      var Result = "";
      if (El === null) {
        Result = ""}
       else if (El.$class.ClassType() === $lt142) {
        if (El.Kind === 0) {
          Result = El.Value}
         else Result = "";
      } else Result = "";
      return Result;
    };
    this.GetNextDottedExpr = function (El) {
      var Result = null;
      var Bin = null;
      var C = null;
      Result = null;
      if (El === null) return Result;
      do {
        if (!$lt144.isPrototypeOf(El.FParent)) return Result;
        Bin = El.FParent;
        if (Bin.OpCode !== 27) return Result;
        if (El === Bin.Right) {
          El = Bin}
         else {
          El = Bin.Right;
          do {
            C = El.$class.ClassType();
            if (C === $lt142) {
              if (El.Kind !== 0) this.RaiseNotYetImplemented(20170502163825,El,"");
              return El;
            } else if (C === $lt144) {
              if (El.OpCode !== 27) this.RaiseNotYetImplemented(20170502163718,El,"");
              El = El.Left;
            } else if (C === $lt145) {
              if (!(El.Kind in rtl.createSet(10,11))) this.RaiseNotYetImplemented(20170502163908,El,"");
              El = El.Value;
            };
          } while (!(El === null));
          this.RaiseNotYetImplemented(20170502163953,Bin,"");
        };
      } while (!false);
      return Result;
    };
    this.GetRightMostExpr = function (El) {
      var Result = null;
      var C = null;
      Result = El;
      while (Result !== null) {
        El = Result;
        C = Result.$class.ClassType();
        if (C === $lt144) {
          if (Result.OpCode !== 27) return Result;
          Result = Result.Right;
        } else return Result;
      };
      return Result;
    };
    this.GetParamsOfNameExpr = function (El, ParentParams) {
      var Parent = null;
      var Bin = null;
      var Params = null;
      var InlineSpec = null;
      ParentParams.InlineSpec = null;
      ParentParams.Params = null;
      if (!this.IsNameExpr(El)) return;
      Parent = El.FParent;
      if (Parent === null) return;
      if (Parent.$class.ClassType() === $lt152) {
        InlineSpec = Parent;
        if (InlineSpec.NameExpr !== El) return;
        ParentParams.InlineSpec = InlineSpec;
        El = InlineSpec;
        Parent = El.FParent;
        if (Parent === null) return;
      };
      if (Parent.$class.ClassType() === $lt144) {
        Bin = Parent;
        if ((Bin.OpCode !== 27) || (Bin.Right !== El)) return;
        El = Bin;
        Parent = El.FParent;
      };
      if (Parent.$class.ClassType() !== $lt145) return;
      Params = Parent;
      if (Params.Value !== El) return;
      if (!(Params.Kind in rtl.createSet(10,11))) return;
      ParentParams.Params = Params;
    };
    this.GetUsesUnitInFilename = function (InFileExpr) {
      var Result = "";
      var Value = null;
      if (!$lt142.isPrototypeOf(InFileExpr)) this.RaiseXExpectedButYFound(20180221234828,"string literal",$mod.GetElementTypeName(InFileExpr),InFileExpr);
      Value = this.fExprEvaluator.Eval(InFileExpr,rtl.createSet(0));
      try {
        if (Value === null) this.RaiseXExpectedButYFound(20180222000004,"string literal",$mod.GetElementTypeName(InFileExpr),InFileExpr);
        var $tmp = Value.Kind;
        if ($tmp === 8) {
          Result = Value.S}
         else {
          this.RaiseXExpectedButYFound(20180222000122,"string literal",Value.AsDebugString(),InFileExpr);
        };
      } finally {
        $lp12({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      return Result;
    };
    this.GetPathEndIdent = function (El, AllowCall) {
      var Result = null;
      var Bin = null;
      Result = null;
      if (AllowCall && $lt145.isPrototypeOf(El)) El = El.Value;
      while ($lt144.isPrototypeOf(El)) {
        Bin = El;
        if (Bin.OpCode === 27) {
          El = Bin.Right}
         else return null;
      };
      if ($lt142.isPrototypeOf(El) && (El.Kind === 0)) Result = El;
      return Result;
    };
    this.GetNewInstanceExpr = function (El) {
      var Result = null;
      var C = null;
      Result = null;
      while (El !== null) {
        if ($lt55.isPrototypeOf(El.FData) && (3 in El.FData.Flags)) return El;
        C = El.$class.ClassType();
        if (C === $lt144) {
          if (El.OpCode === 27) {
            El = El.Right}
           else return Result;
        } else if (C === $lt145) {
          El = El.Value}
         else return Result;
      };
      return Result;
    };
    this.ParentNeedsExprResult = function (El) {
      var Result = false;
      var C = null;
      var P = null;
      if ((El === null) || (El.FParent === null)) return false;
      Result = false;
      P = El.FParent;
      C = P.$class.ClassType();
      if (C === $lt144) {
        if (P.Right === El) {
          if ((P.OpCode === 27) || ((P.OpCode === 0) && $lt148.isPrototypeOf(P.Left))) {
            Result = this.ParentNeedsExprResult(P)}
           else Result = true;
        } else Result = true;
      } else if (C === $lt152) {
        Result = this.ParentNeedsExprResult(P)}
       else if (C.InheritsFrom($lt153)) {
        Result = true}
       else if ((C === $lt112) || (C === $lt106) || (C === $lt105) || (C === $lt166)) {
        Result = true}
       else if (C === $lt94) {
        Result = P.GUIDExpr === El}
       else if (C === $lt88) {
        Result = (P.IndexExpr === El) || (P.DispIDExpr === El) || (P.DefaultExpr === El)}
       else if (C === $lt90) {
        Result = (P.LibraryExpr === El) || (P.DispIDExpr === El)}
       else if (C === $lt126) {
        Result = P.ConditionExpr === El}
       else if (C === $lt127) {
        Result = P.ConditionExpr === El}
       else if (C === $lt128) {
        Result = P.ConditionExpr === El}
       else if (C === $lt137) {
        Result = P.Expressions.IndexOf(El) >= 0}
       else if (C === $lt129) {
        Result = P.CaseExpr === El}
       else if (C === $lt139) {
        Result = P.Expressions.IndexOf(El) >= 0}
       else if (C === $lt131) {
        Result = (P.StartExpr === El) || (P.EndExpr === El)}
       else if (C === $lt123) {
        Result = P.Right === El}
       else if (C === $lt134) Result = P.ExceptAddr === El;
      return Result;
    };
    this.GetReference_ConstructorType = function (Ref, Expr) {
      var Result = $lt59.$new();
      var TypeEl = null;
      TypeEl = rtl.as(Ref.Context,$lt56).Typ;
      if (TypeEl === null) {
        this.RaiseNotYetImplemented(20190125205339,Expr,"")}
       else if ($lt107.isPrototypeOf(TypeEl)) {
        $mod.SetResolverValueExpr(Result,2,TypeEl,TypeEl,Expr,rtl.createSet(0))}
       else {
        this.ComputeElement(TypeEl,Result,rtl.createSet(4),null);
        Result.ExprEl = Expr;
        Result.Flags = rtl.createSet(0);
      };
      return Result;
    };
    this.GetParamsValueRef = function (Params) {
      var Result = null;
      var El = null;
      Result = null;
      if (Params === null) return Result;
      El = Params.Value;
      while (El !== null) {
        if ($lt55.isPrototypeOf(El.FData)) return El.FData;
        if (El.$class.ClassType() === $lt152) {
          El = El.NameExpr}
         else if ((El.$class.ClassType() === $lt144) && (El.OpCode === 27)) {
          El = El.Right}
         else return Result;
      };
      return Result;
    };
    this.GetSetType = function (ResolvedSet) {
      var Result = null;
      var IdentEl = null;
      var aType = null;
      var C = null;
      Result = null;
      if (ResolvedSet.BaseType === 34) {
        IdentEl = ResolvedSet.IdentEl;
        if (IdentEl === null) return Result;
        C = IdentEl.$class.ClassType();
        if ((C === $lt105) || (C === $lt117)) {
          aType = IdentEl.VarType}
         else if (C === $lt88) {
          aType = this.GetPasPropertyType(IdentEl)}
         else if (C === $lt106) {
          aType = IdentEl.ArgType}
         else if (C.InheritsFrom($lt90) && $lt101.isPrototypeOf(IdentEl.ProcType)) {
          aType = IdentEl.ProcType.ResultEl.ResultType}
         else if (C === $lt119) {
          return IdentEl}
         else return Result;
        if (aType.$class.ClassType() === $lt119) Result = aType;
      } else if (ResolvedSet.BaseType === 2) {
        if (ResolvedSet.LoTypeEl.$class.ClassType() === $lt119) if (ResolvedSet.HiTypeEl.$class.ClassType() === $lt119) {
          Result = ResolvedSet.HiTypeEl}
         else Result = ResolvedSet.LoTypeEl;
      };
      return Result;
    };
    this.IsDynArray = function (TypeEl, OptionalOpenArray) {
      var Result = false;
      TypeEl = this.ResolveAliasType(TypeEl,true);
      if ((TypeEl === null) || (TypeEl.$class.ClassType() !== $lt102)) return false;
      if (rtl.length(TypeEl.Ranges) !== 0) return false;
      if (OptionalOpenArray && (5 in this.FOptions)) {
        Result = true}
       else Result = (TypeEl.FParent === null) || (TypeEl.FParent.$class.ClassType() !== $lt106);
      return Result;
    };
    this.IsOpenArray = function (TypeEl) {
      var Result = false;
      Result = (TypeEl !== null) && (TypeEl.$class.ClassType() === $lt102) && (rtl.length(TypeEl.Ranges) === 0) && (TypeEl.FParent !== null) && (TypeEl.FParent.$class.ClassType() === $lt106);
      return Result;
    };
    this.IsArrayOfConst = function (TypeEl) {
      var Result = false;
      Result = (TypeEl !== null) && (TypeEl.$class.ClassType() === $lt102) && (TypeEl.ElType === null);
      return Result;
    };
    this.GetArrayElType = function (ArrType) {
      var Result = null;
      Result = ArrType.ElType;
      if (Result === null) Result = this.GetTVarRec(ArrType);
      return Result;
    };
    this.IsEmptyArrayExpr = function (ResolvedEl) {
      var Result = false;
      Result = (ResolvedEl.BaseType in rtl.createSet(34,36,35)) && (ResolvedEl.SubType === 0);
      return Result;
    };
    this.IsClassMethod = function (El) {
      var Result = false;
      var C = null;
      if (El === null) return false;
      C = El.$class.ClassType();
      Result = (C === $lt120) || (C === $lt121) || (C === $lt161) || (C === $lt162) || (C === $lt191);
      return Result;
    };
    this.IsClassField = function (El) {
      var Result = false;
      var C = null;
      if (((El.$class.ClassType() === $lt105) || (El.$class.ClassType() === $lt117)) && rtl.neSet(rtl.intersectSet(rtl.createSet(4,5),El.VarModifiers),{})) {
        C = El.FParent.$class.ClassType();
        Result = (C === $lt94) || (C === $lt98);
      } else Result = false;
      return Result;
    };
    this.MethodIsStatic = function (El) {
      var Result = false;
      Result = El.IsStatic() || (El.$class.ClassType() === $lt120) || (El.$class.ClassType() === $lt121);
      return Result;
    };
    this.IsMethod_SelfIsClass = function (El) {
      var Result = false;
      var C = null;
      if (El === null) return false;
      C = El.$class.ClassType();
      Result = ((C === $lt161) || (C === $lt162) || (C === $lt191)) && !El.IsStatic();
      return Result;
    };
    this.IsHelperMethod = function (El) {
      var Result = false;
      Result = $lt90.isPrototypeOf(El) && $lt94.isPrototypeOf(El.FParent) && (El.FParent.HelperForType !== null);
      return Result;
    };
    this.IsHelper = function (El) {
      var Result = false;
      Result = (El !== null) && (El.$class.ClassType() === $lt94) && (El.HelperForType !== null);
      return Result;
    };
    this.IsExternalClass_Name = function (aClass, ExtName) {
      var Result = false;
      var AncestorScope = null;
      Result = false;
      if (aClass === null) return Result;
      while (aClass !== null) {
        if (aClass.ExternalName === ExtName) return true;
        AncestorScope = rtl.as(aClass.FData,$lt34).AncestorScope;
        if (AncestorScope === null) return Result;
        aClass = rtl.as($mod.NoNil(AncestorScope.FElement),$lt94);
      };
      return Result;
    };
    this.IsProcedureType = function (ResolvedEl, HasValue) {
      var Result = false;
      var TypeEl = null;
      if (ResolvedEl.BaseType !== 2) return false;
      TypeEl = ResolvedEl.LoTypeEl;
      if (!$lt100.isPrototypeOf(TypeEl)) return false;
      if (HasValue && !(0 in ResolvedEl.Flags)) return false;
      Result = true;
      return Result;
    };
    this.IsArrayType = function (ResolvedEl) {
      var Result = false;
      Result = (ResolvedEl.BaseType === 2) && $lt102.isPrototypeOf(ResolvedEl.LoTypeEl);
      return Result;
    };
    this.IsArrayExpr = function (Expr) {
      var Result = null;
      var Ref = null;
      Result = null;
      if (Expr === null) return Result;
      if (Expr.Kind !== 4) return Result;
      if (!$lt55.isPrototypeOf(Expr.FData)) return Result;
      Ref = Expr.FData;
      if ($lt102.isPrototypeOf(Ref.FDeclaration)) Result = Ref.FDeclaration;
      return Result;
    };
    this.IsArrayOperatorAdd = function (Expr) {
      var Result = false;
      Result = (Expr !== null) && (Expr.$class.ClassType() === $lt144) && (Expr.OpCode === 1) && this.ElHasModeSwitch(Expr,44);
      return Result;
    };
    this.IsTypeCast = function (Params) {
      var Result = false;
      var Value = null;
      var Ref = null;
      var Decl = null;
      var C = null;
      Result = false;
      if ((Params === null) || (Params.Kind !== 10)) return Result;
      Value = Params.Value;
      if (!this.IsNameExpr(Value)) return Result;
      if (!$lt55.isPrototypeOf(Value.FData)) return Result;
      Ref = Value.FData;
      Decl = Ref.FDeclaration;
      C = Decl.$class.ClassType();
      if ((C === $lt157) || (C === $lt158)) {
        Decl = this.ResolveAliasType(Decl,true);
        C = Decl.$class.ClassType();
      };
      if ((C === $lt100) || (C === $lt101)) {
        return true}
       else if ((C === $lt94) || (C === $lt96) || (C === $lt99) || (C === $lt98) || (C === $lt102) || (C === $lt155) || (C === $lt104)) {
        return true}
       else if ((C === $lt83) && $lt62.isPrototypeOf(Decl.FData)) return true;
      return Result;
    };
    this.IsGenericTemplType = function (ResolvedEl) {
      var Result = false;
      Result = (ResolvedEl.BaseType === 2) && (ResolvedEl.LoTypeEl.$class.ClassType() === $lt104);
      return Result;
    };
    this.GetTypeParameterCount = function (aType) {
      var Result = 0;
      if (aType === null) return 0;
      if (aType.GenericTemplateTypes === null) return 0;
      Result = aType.GenericTemplateTypes.FCount;
      return Result;
    };
    this.GetGenericConstraintKeyword = function (El) {
      var Result = 0;
      var Prim = null;
      if ((El === null) || (El.$class.ClassType() !== $lt142)) return 0;
      Prim = El;
      if (Prim.Kind !== 0) return 0;
      var $tmp = $lp1(Prim.Value);
      if ($tmp === "record") {
        Result = 96}
       else if ($tmp === "class") {
        Result = 47}
       else if ($tmp === "constructor") {
        Result = 50}
       else {
        Result = 0;
      };
      return Result;
    };
    this.GetGenericConstraintErrorEl = function (ConstraintEl, TemplType) {
      var Result = null;
      if ($lt153.isPrototypeOf(ConstraintEl) || (ConstraintEl.FParent === TemplType)) {
        Result = ConstraintEl}
       else Result = TemplType;
      return Result;
    };
    this.GetSpecializedEl = function (El, GenericEl, Params) {
      var Result = null;
      var Data = null;
      var GenScope = null;
      var GenericTemplateList = null;
      var i = 0;
      var j = 0;
      var Param = null;
      var ParamsResolved = [];
      var ResolvedEl = $lt59.$new();
      var SpecializedElList = null;
      var Item = null;
      var SrcModule = null;
      var SrcModuleScope = null;
      var SrcResolver = null;
      var IsSelf = false;
      var GenericType = null;
      var GenericProc = null;
      var ProcScope = null;
      Result = null;
      if ((El.$class.ClassType() === $lt155) && (El.FData !== null)) this.RaiseNotYetImplemented(20190726142522,El,"");
      GenScope = null;
      GenericType = null;
      GenericProc = null;
      if ($lt93.isPrototypeOf(GenericEl)) {
        GenericType = GenericEl;
        if (!$lt27.isPrototypeOf(GenericEl.FData)) this.RaiseMsg(20190726194316,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,this.GetTypeDescription(GenericType,false)),El);
        GenScope = GenericEl.FData;
        if (!$lt94.isPrototypeOf(GenericType) && (GenScope.GenericStep < 1)) this.RaiseMsg(20190807205038,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,this.GetTypeDescription(GenericType,false)),El);
        GenericTemplateList = GenericType.GenericTemplateTypes;
      } else if ($lt90.isPrototypeOf(GenericEl)) {
        GenericProc = GenericEl;
        if (!$lt37.isPrototypeOf(GenericProc.FData)) this.RaiseMsg(20190919132733,3001,rtl.getResStr($lm5,"sIdentifierNotFound"),$lp6(18,GenericProc.FName),El);
        ProcScope = GenericProc.FData;
        if (ProcScope.DeclarationProc !== null) this.RaiseNotYetImplemented(20190920182602,El,"");
        GenScope = ProcScope;
        if (GenScope.GenericStep < 1) this.RaiseMsg(20190920120649,3107,rtl.getResStr($lm5,"sTypeXIsNotYetCompletelyDefined"),$lp6(18,$mod.GetElementDbgPath(GenericProc)),El);
        GenericTemplateList = this.GetProcTemplateTypes(GenericProc);
      } else this.RaiseNotYetImplemented(20190919132603,GenericEl,"");
      SpecializedElList = GenScope.SpecializedItems;
      if (GenericTemplateList === null) this.RaiseMsg(20190905111703,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"generic templates",18,GenericEl.FName),El);
      if (GenericTemplateList.FCount !== Params.FCount) this.RaiseMsg(20190905111704,3010,rtl.getResStr($lm5,"sXExpectedButYFound"),$lp6(18,"type with " + $lp5(Params.FCount) + " generic template(s)",18,GenericEl.FName + $lp9(GenericTemplateList.FCount)),El);
      ParamsResolved = rtl.arraySetLength(ParamsResolved,null,Params.FCount);
      IsSelf = true;
      for (var $l = 0, $end = Params.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Param = rtl.getObject(Params.Get(i));
        this.ComputeElement(Param,ResolvedEl,rtl.createSet(4),null);
        ParamsResolved[i] = ResolvedEl.LoTypeEl;
        if (ResolvedEl.LoTypeEl !== rtl.getObject(GenericTemplateList.Get(i))) IsSelf = false;
      };
      if (IsSelf) return GenericEl;
      if (SpecializedElList === null) {
        SpecializedElList = $lt91.$create("Create$3",[true]);
        if (GenScope !== null) {
          GenScope.SpecializedItems = SpecializedElList}
         else this.RaiseNotYetImplemented(20190919133159,El,"");
      };
      i = SpecializedElList.GetCount() - 1;
      Item = null;
      while (i >= 0) {
        Item = SpecializedElList.GetItem(i);
        j = rtl.length(Item.Params) - 1;
        while (j >= 0) {
          if (!this.IsSameType(Item.Params[j],ParamsResolved[j],0) && (this.CheckElTypeCompatibility(Item.Params[j],ParamsResolved[j],0) > 0)) break;
          j -= 1;
        };
        if (j < 0) break;
        Item = null;
        i -= 1;
      };
      if (Item === null) {
        SrcModule = GenericEl.GetModule();
        SrcModuleScope = rtl.as(SrcModule.FData,$lt15);
        SrcResolver = rtl.as(SrcModuleScope.Owner,$lt74);
        Item = SrcResolver.CreateSpecializedItem(El,GenericEl,ParamsResolved);
      };
      Result = Item.FSpecializedEl;
      if (El.$class.ClassType() === $lt155) {
        Data = $lt5.$create("Create$1");
        this.AddResolveData(El,Data,1);
        Data.SpecializedType = rtl.as(Result,$lt93);
      };
      return Result;
    };
    this.FinishGenericClassOrRecIntf = function (Scope) {
      var El = null;
      var SpecializedItems = null;
      var i = 0;
      var SpecializedItem = null;
      var OldScopeState = $lt79.$new();
      El = rtl.as(Scope.FElement,$lt93);
      if (Scope.GenericStep !== 0) this.RaiseNotYetImplemented(20200219124544,El,"");
      Scope.GenericStep = 1;
      SpecializedItems = Scope.SpecializedItems;
      if (SpecializedItems !== null) for (var $l = 0, $end = SpecializedItems.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        SpecializedItem = SpecializedItems.GetItem(i);
        SpecializedItem.GenericEl = El;
        if (SpecializedItem.Step !== 0) continue;
        this.InitSpecializeScopes(El,OldScopeState);
        this.SpecializeGenericIntf(SpecializedItem);
        this.RestoreSpecializeScopes(OldScopeState);
      };
    };
    this.FinishSpecializations = function (Scope) {
      var SpecializedItems = null;
      var i = 0;
      SpecializedItems = Scope.SpecializedItems;
      if (SpecializedItems === null) return;
      for (var $l = 0, $end = SpecializedItems.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        this.SpecializeGenericImpl(SpecializedItems.GetItem(i));
      };
    };
    this.CheckPendingForwardProcs = function (El) {
      var i = 0;
      var DeclEl = null;
      var Proc = null;
      var aClassOrRec = null;
      var ClassOrRecScope = null;
      if (this.IsElementSkipped(El)) return;
      if ($lt156.isPrototypeOf(El)) {
        for (var $l = 0, $end = El.Declarations.FCount - 1; $l <= $end; $l++) {
          i = $l;
          DeclEl = rtl.getObject(El.Declarations.Get(i));
          if ($lt90.isPrototypeOf(DeclEl)) {
            Proc = DeclEl;
            if ($mod.ProcNeedsImplProc(Proc) && (Proc.FData.ImplProc === null)) this.RaiseMsg(20170216152219,3015,rtl.getResStr($lm5,"sForwardProcNotResolved"),$lp6(18,$mod.GetElementTypeName(Proc),18,Proc.FName),Proc);
          };
        };
      } else if ($lt107.isPrototypeOf(El)) {
        aClassOrRec = El;
        if ($lt94.isPrototypeOf(aClassOrRec)) {
          if (aClassOrRec.ObjKind in rtl.createSet(2,6)) return;
          if (aClassOrRec.IsForward) return;
          if (aClassOrRec.IsExternal) return;
        };
        ClassOrRecScope = rtl.as(aClassOrRec.FData,$lt30);
        if (ClassOrRecScope.SpecializedFromItem !== null) return;
        if (ClassOrRecScope.GenericStep !== 1) this.RaiseNotYetImplemented(20190804115324,El,"");
        for (var $l1 = 0, $end1 = aClassOrRec.Members.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          DeclEl = rtl.getObject(aClassOrRec.Members.Get(i));
          if ($lt90.isPrototypeOf(DeclEl)) {
            Proc = DeclEl;
            if (Proc.IsAbstract() || Proc.IsExternal()) continue;
            if (Proc.FData.ImplProc === null) {
              this.RaiseMsg(20170216152221,3015,rtl.getResStr($lm5,"sForwardProcNotResolved"),$lp6(18,$mod.GetElementTypeName(Proc),18,Proc.FName),Proc);
            };
          };
        };
        ClassOrRecScope.GenericStep = 2;
        if (ClassOrRecScope.SpecializedItems !== null) this.FinishSpecializations(ClassOrRecScope);
      };
    };
    this.IsFullySpecialized = function (El) {
      var Result = false;
      var GenScope = null;
      var Params = [];
      var i = 0;
      if ((El.GenericTemplateTypes !== null) && (El.GenericTemplateTypes.FCount > 0)) return false;
      if (!$lt27.isPrototypeOf(El.FData)) return true;
      GenScope = El.FData;
      if (GenScope.SpecializedFromItem === null) return true;
      Params = GenScope.SpecializedFromItem.Params;
      for (var $l = 0, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
        i = $l;
        if ($lt104.isPrototypeOf(Params[i])) return false;
      };
      Result = true;
      return Result;
    };
    this.IsFullySpecialized$1 = function (Proc) {
      var Result = false;
      var Templates = null;
      var ProcScope = null;
      var Params = [];
      var i = 0;
      if (Proc.FData === null) return false;
      ProcScope = Proc.FData;
      if (ProcScope.DeclarationProc !== null) {
        Proc = ProcScope.DeclarationProc;
        ProcScope = Proc.FData;
      };
      Templates = this.GetProcTemplateTypes(Proc);
      if ((Templates !== null) && (Templates.FCount > 0)) return false;
      if (ProcScope.SpecializedFromItem === null) return true;
      Params = ProcScope.SpecializedFromItem.Params;
      for (var $l = 0, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
        i = $l;
        if ($lt104.isPrototypeOf(Params[i])) return false;
      };
      Result = true;
      return Result;
    };
    this.IsTGUID = function (RecTypeEl) {
      var Result = false;
      var Members = null;
      var El = null;
      var i = 0;
      var MemberIndex = 0;
      Result = false;
      if (!$lp7(RecTypeEl.FName,"TGUID")) return Result;
      if ($lp7(RecTypeEl.GetModule().FName,"system")) return true;
      Members = RecTypeEl.Members;
      i = 1;
      for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
        MemberIndex = $l;
        El = rtl.getObject(Members.Get(MemberIndex));
        if (El.$class.ClassType() !== $lt105) continue;
        if ($lp7(El.FName,"D" + $lp5(i))) {
          if (i === 4) return true;
          i += 1;
        };
      };
      Result = true;
      return Result;
    };
    this.IsTGUIDString = function (ResolvedEl) {
      var Result = false;
      var TypeEl = null;
      var C = null;
      var IdentEl = null;
      if (!(ResolvedEl.BaseType in $mod.btAllStrings)) return false;
      if ((ResolvedEl.ExprEl !== null) && (ResolvedEl.LoTypeEl !== null)) return true;
      IdentEl = ResolvedEl.IdentEl;
      if (IdentEl !== null) {
        C = IdentEl.$class.ClassType();
        if (C.InheritsFrom($lt105)) {
          TypeEl = IdentEl.VarType}
         else if (C === $lt106) {
          TypeEl = IdentEl.ArgType}
         else if (C === $lt141) {
          TypeEl = IdentEl.ResultType}
         else TypeEl = null;
        while (TypeEl !== null) {
          if ((TypeEl.$class.ClassType() === $lt157) || (TypeEl.$class.ClassType() === $lt158)) {
            if ($lp7(TypeEl.FName,"TGUIDString")) return true;
            TypeEl = TypeEl.DestType;
          } else break;
        };
      };
      Result = false;
      return Result;
    };
    this.IsCustomAttribute = function (El) {
      var Result = false;
      var ClassEl = null;
      var ClassScope = null;
      var aModule = null;
      Result = false;
      if ((El === null) || (El.$class.ClassType() !== $lt94)) return Result;
      ClassEl = El;
      if (ClassEl.IsExternal || (ClassEl.ObjKind !== 1)) return Result;
      while (!$lp7(ClassEl.FName,"TCustomAttribute")) {
        ClassScope = rtl.as(ClassEl.FData,$lt34);
        if (ClassScope.AncestorScope === null) return Result;
        ClassEl = ClassScope.AncestorScope.FElement;
      };
      if (!$lt116.isPrototypeOf(ClassEl.FParent)) return Result;
      aModule = ClassEl.GetModule();
      Result = this.IsSystemUnit(aModule);
      return Result;
    };
    this.IsSystemUnit = function (El) {
      var Result = false;
      var Section = null;
      Result = false;
      if (El === null) return Result;
      if ($lp7(El.FName,"system")) return true;
      if (El.$class.ClassType() === $lt113) {
        Section = El.ProgramSection}
       else if (El.$class.ClassType() === $lt114) {
        Section = El.LibrarySection}
       else Section = El.InterfaceSection;
      Result = rtl.length(Section.UsesClause) === 0;
      return Result;
    };
    this.GetAttributeCallsEl = function (El) {
      var Result = [];
      var Parent = null;
      var C = null;
      var Members = null;
      var i = 0;
      Result = [];
      if (El === null) return Result;
      if ($lt34.isPrototypeOf(El.FData) && (El.FData.SpecializedFromItem != null)) {
        Result = this.GetAttributeCallsEl(El.FData.SpecializedFromItem.GenericEl)}
       else {
        Parent = El.FParent;
        if (Parent === null) return Result;
        C = Parent.$class.ClassType();
        if (C.InheritsFrom($lt156)) {
          Members = Parent.Declarations}
         else if (C.InheritsFrom($lt107)) {
          Members = Parent.Members}
         else return Result;
        i = Members.IndexOf(El);
        if (i < 0) return Result;
        Result = this.GetAttributeCalls(Members,i);
      };
      return Result;
    };
    this.GetAttributeCalls = function (Members, Index) {
      var $Self = this;
      var Result = [];
      function AddAttributesInFront(Members, i) {
        var j = 0;
        var l = 0;
        var k = 0;
        var Calls = [];
        j = i;
        while ((j > 0) && (rtl.getObject(Members.Get(j - 1)).$class.ClassType() === $lt154)) j -= 1;
        l = 0;
        while (j < i) {
          Calls = rtl.getObject(Members.Get(j)).Calls;
          Result = rtl.arraySetLength(Result,null,l + rtl.length(Calls));
          for (var $l = 0, $end = rtl.length(Calls) - 1; $l <= $end; $l++) {
            k = $l;
            Result[l] = Calls[k];
            l += 1;
          };
          j += 1;
        };
      };
      var El = null;
      var CurEl = null;
      Result = [];
      El = rtl.getObject(Members.Get(Index));
      AddAttributesInFront(Members,Index);
      if ((El.$class.ClassType() === $lt94) && !El.IsForward) do {
        Index -= 1;
        if (Index < 1) break;
        CurEl = rtl.getObject(Members.Get(Index));
        if ((CurEl.$class.ClassType() === $lt94) && CurEl.IsForward && $lt55.isPrototypeOf(CurEl.FData) && (CurEl.FData.FDeclaration === El)) {
          AddAttributesInFront(Members,Index);
          break;
        };
        if ($lt34.isPrototypeOf(CurEl.FData)) if (CurEl.FData.SpecializedFromItem != null) {
          AddAttributesInFront(Members,Index)}
         else break;
      } while (!false);
      return Result;
    };
    this.ProcNeedsParams = function (El) {
      var Result = false;
      Result = (El.Args.FCount > 0) && (rtl.getObject(El.Args.Get(0)).ValueExpr === null);
      return Result;
    };
    this.ProcHasSelf = function (El) {
      var Result = false;
      var C = null;
      if (El.IsStatic()) return false;
      C = El.FParent.$class.ClassType();
      if (C.InheritsFrom($lt116) || (C === $lt89)) return false;
      C = El.$class.ClassType();
      if ((C === $lt120) || (C === $lt121)) return false;
      Result = true;
      return Result;
    };
    this.CreateProcSelfArg = function (Proc) {
      var SelfArg = null;
      var SelfType = null;
      var LoSelfType = null;
      var ProcScope = null;
      var ClassOrRecScope = null;
      var ClassRecType = null;
      if (Proc.IsStatic() || Proc.IsExternal()) return;
      if ((Proc.$class.ClassType() === $lt120) || (Proc.$class.ClassType() === $lt121)) return;
      ProcScope = Proc.FData;
      ClassOrRecScope = ProcScope.ClassRecScope;
      if (ClassOrRecScope === null) return;
      ClassRecType = ClassOrRecScope.FElement;
      if ((Proc.$class.ClassType() === $lt161) || (Proc.$class.ClassType() === $lt162)) {
        if ($lt34.isPrototypeOf(ClassOrRecScope) && (ClassOrRecScope.CanonicalClassOf !== null)) {
          SelfArg = this.CreateOwnedElement($lt106,"Self",Proc);
          ProcScope.SelfArg = SelfArg;
          SelfArg.Access = 1;
          SelfArg.ArgType = ClassOrRecScope.CanonicalClassOf;
        } else this.RaiseInternalError(20190106121745,"");
      } else {
        SelfArg = this.CreateOwnedElement($lt106,"Self",Proc);
        ProcScope.SelfArg = SelfArg;
        SelfType = ClassRecType;
        if ((SelfType.$class.ClassType() === $lt94) && (SelfType.HelperForType !== null)) {
          SelfType = SelfType.HelperForType;
        };
        LoSelfType = this.ResolveAliasType(SelfType,true);
        if ($lt94.isPrototypeOf(LoSelfType) && (LoSelfType.ObjKind === 1)) {
          SelfArg.Access = 1}
         else SelfArg.Access = 2;
        SelfArg.ArgType = SelfType;
      };
    };
    this.IsProcOverride = function (AncestorProc, DescendantProc) {
      var Result = false;
      var Proc = null;
      var OverriddenProc = null;
      Result = false;
      if (AncestorProc === null) return Result;
      if (DescendantProc === null) return Result;
      Proc = DescendantProc;
      if (!Proc.IsOverride()) return Result;
      if (!AncestorProc.IsOverride() && !AncestorProc.IsVirtual()) return Result;
      do {
        OverriddenProc = Proc.FData.OverriddenProc;
        if (AncestorProc === OverriddenProc) return true;
        Proc = OverriddenProc;
      } while (!(Proc === null));
      return Result;
    };
    this.IsProcOverload = function (Proc) {
      var Result = false;
      var ProcScope = null;
      if (Proc.IsOverload()) {
        return true}
       else if (Proc.IsOverride() && $lt37.isPrototypeOf(Proc.FData)) {
        ProcScope = Proc.FData;
        if (2 in ProcScope.Flags) return true;
      };
      Result = false;
      return Result;
    };
    this.GetTopLvlProc = function (El) {
      var Result = null;
      Result = null;
      while (El !== null) {
        if ($lt90.isPrototypeOf(El)) Result = El;
        El = El.FParent;
      };
      return Result;
    };
    this.GetParentProc = function (El, GetDeclProc) {
      var Result = null;
      var ProcScope = null;
      Result = null;
      while (El !== null) {
        if ($lt90.isPrototypeOf(El)) {
          Result = El;
          if (GetDeclProc && $lt37.isPrototypeOf(El.FData)) {
            ProcScope = El.FData;
            if (ProcScope.DeclarationProc !== null) Result = ProcScope.DeclarationProc;
          };
          return Result;
        };
        El = El.FParent;
      };
      return Result;
    };
    this.GetRangeLength = function (RangeExpr) {
      var Result = 0;
      var Range = null;
      Result = 0;
      Range = this.Eval(RangeExpr,rtl.createSet(0),true);
      if (Range === null) this.RaiseNotYetImplemented(20170910210416,RangeExpr,"");
      try {
        var $tmp = Range.Kind;
        if ($tmp === 10) {
          Result = (Range.RangeEnd - Range.RangeStart) + 1}
         else if ($tmp === 11) {
          Result = (Range.RangeEnd - Range.RangeStart) + 1}
         else {
          this.RaiseNotYetImplemented(20170910210554,RangeExpr,"");
        };
      } finally {
        $lp12({get: function () {
            return Range;
          }, set: function (v) {
            Range = v;
          }});
      };
      return Result;
    };
    this.EvalRangeLimit = function (RangeExpr, Flags, EvalLow, ErrorEl) {
      var Result = null;
      var Range = null;
      var EnumType = null;
      Result = null;
      Range = this.Eval(RangeExpr,rtl.unionSet(Flags,rtl.createSet(0)),true);
      if (Range === null) this.RaiseNotYetImplemented(20170601191258,RangeExpr,"");
      var $tmp = Range.Kind;
      if ($tmp === 10) {
        var $tmp1 = Range.ElKind;
        if ($tmp1 === 1) {
          EnumType = rtl.as($mod.NoNil(Range.ElType),$lt99);
          if (EvalLow) {
            Result = $lt168.$create("CreateValue",[Range.RangeStart,rtl.getObject(EnumType.Values.Get(0))])}
           else Result = $lt168.$create("CreateValue",[Range.RangeEnd,rtl.getObject(EnumType.Values.Get(EnumType.Values.FCount - 1))]);
        } else if ($tmp1 === 2) {
          if (EvalLow) {
            Result = $lt169.$create("CreateValue",[Range.RangeStart])}
           else Result = $lt169.$create("CreateValue",[Range.RangeEnd])}
         else if ($tmp1 === 3) {
          if (EvalLow) {
            Result = $lt173.$create("CreateValue",[String.fromCharCode(Range.RangeStart)])}
           else Result = $lt173.$create("CreateValue",[String.fromCharCode(Range.RangeEnd)]);
        } else if ($tmp1 === 4) {
          if (EvalLow) {
            Result = $lt172.$create("CreateValue",[Range.RangeStart !== 0])}
           else Result = $lt172.$create("CreateValue",[Range.RangeEnd !== 0])}
         else {
          $lp12({get: function () {
              return Range;
            }, set: function (v) {
              Range = v;
            }});
          this.RaiseNotYetImplemented(20170601195240,ErrorEl,"");
        };
      } else if ($tmp === 11) {
        if (EvalLow) {
          Result = $lt192.$create("CreateValue",[Range.RangeStart])}
         else Result = $lt192.$create("CreateValue",[Range.RangeEnd])}
       else {
        $lp12({get: function () {
            return Range;
          }, set: function (v) {
            Range = v;
          }});
        this.RaiseNotYetImplemented(20170601195336,ErrorEl,"");
      };
      $lp12({get: function () {
          return Range;
        }, set: function (v) {
          Range = v;
        }});
      return Result;
    };
    this.EvalTypeRange = function (Decl, Flags) {
      var Result = null;
      var C = null;
      var BaseTypeData = null;
      Result = null;
      Decl = this.ResolveAliasType(Decl,true);
      C = Decl.$class.ClassType();
      if (C === $lt103) {
        Result = this.fExprEvaluator.Eval(Decl.RangeExpr,rtl.refSet(Flags));
        if ((Result !== null) && (Result.IdentEl === null)) {
          Result.IdentEl = Decl;
          return Result;
        };
      } else if (C === $lt99) {
        Result = $lt165.$create("CreateValue",[1,Decl,0,Decl.Values.FCount - 1]);
        Result.IdentEl = Decl;
        return Result;
      } else if (C === $lt83) {
        if ($lt62.isPrototypeOf(Decl.FData)) {
          BaseTypeData = Decl.FData;
          var $tmp = BaseTypeData.BaseType;
          if ($tmp === 5) {
            Result = $lt165.$create("Create$1");
            Result.ElKind = 3;
            Result.RangeStart = 0;
            Result.RangeEnd = 0xffff;
          } else if ($tmp === 6) {
            Result = $lt165.$create("CreateValue",[3,null,0,0xffff])}
           else if (($tmp === 15) || ($tmp === 16) || ($tmp === 17)) {
            Result = $lt165.$create("CreateValue",[4,null,0,1])}
           else if (($tmp === 19) || ($tmp === 20) || ($tmp === 21) || ($tmp === 22) || ($tmp === 25) || ($tmp === 26) || ($tmp === 24) || ($tmp === 23) || ($tmp === 28) || ($tmp === 27) || ($tmp === 14)) {
            Result = $lt165.$create("Create$1");
            Result.ElKind = 2;
            this.GetIntegerRange(BaseTypeData.BaseType,{p: Result, get: function () {
                return this.p.RangeStart;
              }, set: function (v) {
                this.p.RangeStart = v;
              }},{p: Result, get: function () {
                return this.p.RangeEnd;
              }, set: function (v) {
                this.p.RangeEnd = v;
              }});
          };
        };
      };
      return Result;
    };
    this.HasTypeInfo = function (El) {
      var Result = false;
      Result = false;
      if (El === null) return Result;
      if ($lt62.isPrototypeOf(El.FData)) return true;
      if (El.FParent === null) return Result;
      if ($lt95.isPrototypeOf(El.FParent)) {
        if (!this.HasTypeInfo(El.FParent)) return Result;
      } else if (this.ElHasModeSwitch(El,53)) {
        return Result}
       else if ($lt163.isPrototypeOf(El.FParent)) return Result;
      Result = true;
      return Result;
    };
    this.IsAnonymousElType = function (El) {
      var Result = false;
      var aName = "";
      var i = 0;
      var l = 0;
      var j = 0;
      Result = false;
      if (this.FAnonymousElTypePostfix === "") return Result;
      aName = El.FName;
      l = this.FAnonymousElTypePostfix.length;
      i = aName.length;
      do {
        i -= l;
        if (i > 0) {
          j = i;
          while ((j <= l) && (aName.charAt((i + j) - 1) === this.FAnonymousElTypePostfix.charAt(j - 1))) j += 1;
          if (j > l) {
            Result = true;
            continue;
          };
        };
        if (!Result) return Result;
        Result = $mod.IsValidIdent($lp11(aName,i + l),false,false);
        return Result;
      } while (!false);
      return Result;
    };
    this.GetActualBaseType = function (bt) {
      var Result = 0;
      var $tmp = bt;
      if ($tmp === 5) {
        Result = this.FBaseTypeChar}
       else if ($tmp === 7) {
        Result = this.FBaseTypeString}
       else if ($tmp === 12) {
        Result = this.FBaseTypeExtended}
       else {
        Result = bt;
      };
      return Result;
    };
    this.GetCombinedBoolean = function (Bool1, Bool2, ErrorEl) {
      var Result = 0;
      if (Bool1 === Bool2) return Bool1;
      var $tmp = Bool1;
      if ($tmp === 15) {
        Result = Bool2}
       else if ($tmp === 16) {
        if (Bool2 !== 15) Result = Bool2}
       else if ($tmp === 17) {
        if (!(Bool2 in rtl.createSet(15,16))) Result = Bool2}
       else if ($tmp === 18) {
        if (!(Bool2 in rtl.createSet(15,16,17))) Result = Bool2}
       else {
        this.RaiseNotYetImplemented(20170420093805,ErrorEl,"");
      };
      return Result;
    };
    this.GetCombinedInt = function (Int1, Int2, ErrorEl) {
      var Result = 0;
      var Precision1 = 0;
      var Precision2 = 0;
      var Signed1 = false;
      var Signed2 = false;
      if (Int1.BaseType === Int2.BaseType) return Result;
      this.GetIntegerProps(Int1.BaseType,{get: function () {
          return Precision1;
        }, set: function (v) {
          Precision1 = v;
        }},{get: function () {
          return Signed1;
        }, set: function (v) {
          Signed1 = v;
        }});
      this.GetIntegerProps(Int2.BaseType,{get: function () {
          return Precision2;
        }, set: function (v) {
          Precision2 = v;
        }},{get: function () {
          return Signed2;
        }, set: function (v) {
          Signed2 = v;
        }});
      if (Precision1 === Precision2) {
        if (Signed1 !== Signed2) Precision1 = Math.max(Precision1,Precision2) + 1;
      };
      Result = this.GetIntegerBaseType(Math.max(Precision1,Precision2),Signed1 || Signed2,ErrorEl);
      return Result;
    };
    this.GetIntegerProps = function (bt, Precision, Signed) {
      var $tmp = bt;
      if ($tmp === 19) {
        Precision.set(8);
        Signed.set(false);
      } else if ($tmp === 20) {
        Precision.set(8);
        Signed.set(true);
      } else if ($tmp === 21) {
        Precision.set(16);
        Signed.set(false);
      } else if ($tmp === 22) {
        Precision.set(16);
        Signed.set(true);
      } else if ($tmp === 24) {
        Precision.set(23);
        Signed.set(true);
      } else if ($tmp === 23) {
        Precision.set(22);
        Signed.set(false);
      } else if ($tmp === 25) {
        Precision.set(32);
        Signed.set(false);
      } else if ($tmp === 26) {
        Precision.set(32);
        Signed.set(true);
      } else if ($tmp === 28) {
        Precision.set(53);
        Signed.set(true);
      } else if ($tmp === 27) {
        Precision.set(52);
        Signed.set(false);
      } else {
        this.RaiseInternalError(20170420095727,"");
      };
    };
    this.GetIntegerRange = function (bt, MinVal, MaxVal) {
      var Result = false;
      Result = true;
      if (bt === 12) bt = this.FBaseTypeExtended;
      var $tmp = bt;
      if ($tmp === 19) {
        MinVal.set(0);
        MaxVal.set(255);
      } else if ($tmp === 20) {
        MinVal.set(-128);
        MaxVal.set(127);
      } else if ($tmp === 21) {
        MinVal.set(0);
        MaxVal.set(65535);
      } else if ($tmp === 22) {
        MinVal.set(-32768);
        MaxVal.set(32767);
      } else if ($tmp === 25) {
        MinVal.set(0);
        MaxVal.set(4294967295);
      } else if ($tmp === 26) {
        MinVal.set(-2147483648);
        MaxVal.set(2147483647);
      } else if (($tmp === 10) || ($tmp === 24)) {
        MinVal.set(-16777216);
        MaxVal.set(16777216);
      } else if ($tmp === 23) {
        MinVal.set(0);
        MaxVal.set(16777216);
      } else if (($tmp === 11) || ($tmp === 28)) {
        MinVal.set(-9007199254740991);
        MaxVal.set(9007199254740991);
      } else if ($tmp === 27) {
        MinVal.set(0);
        MaxVal.set(9007199254740991);
      } else if ($tmp === 14) {
        MinVal.set(-922337203685477);
        MaxVal.set(922337203685477);
      } else {
        Result = false;
      };
      return Result;
    };
    this.GetIntegerBaseType = function (Precision, Signed, ErrorEl) {
      var Result = 0;
      if (Precision <= 8) {
        if (Signed) {
          Result = 20}
         else Result = 19;
        if (this.GetBaseTypes(Result) !== null) return Result;
      };
      if (Precision <= 16) {
        if (Signed) {
          Result = 22}
         else Result = 21;
        if (this.GetBaseTypes(Result) !== null) return Result;
      };
      if ((Precision <= 22) && !Signed && (this.GetBaseTypes(23) !== null)) return 23;
      if ((Precision <= 23) && Signed && (this.GetBaseTypes(24) !== null)) return 24;
      if (Precision <= 32) {
        if (Signed) {
          Result = 26}
         else Result = 25;
        if (this.GetBaseTypes(Result) !== null) return Result;
      };
      if ((Precision <= 52) && !Signed && (this.GetBaseTypes(27) !== null)) return 27;
      if ((Precision <= 53) && Signed && (this.GetBaseTypes(28) !== null)) return 28;
      if (ErrorEl !== null) {
        this.RaiseRangeCheck(20170420100336,ErrorEl)}
       else Result = 0;
      return Result;
    };
    this.GetSmallestIntegerBaseType = function (MinVal, MaxVal) {
      var Result = 0;
      var V = 0;
      if (MinVal > MaxVal) MinVal = MaxVal;
      if (MinVal < 0) {
        if (MaxVal > -(MinVal + 1)) {
          V = MaxVal}
         else V = -(MinVal + 1);
        if (V <= 127) {
          Result = 20}
         else if (V <= 32767) {
          Result = 22}
         else if ((this.GetBaseTypes(24) !== null) && (V <= 16777216)) {
          Result = 24}
         else if (V <= 2147483647) {
          Result = 26}
         else if ((this.GetBaseTypes(28) !== null) && (V <= 9007199254740991)) {
          Result = 28}
         else {
          Result = $lt.btIntDouble;
          if (this.GetBaseTypes(Result) === null) Result = this.FBaseTypeExtended;
        };
      } else {
        V = MaxVal;
        if (V <= 255) {
          Result = 19}
         else if (V <= 65535) {
          Result = 21}
         else if ((this.GetBaseTypes(23) !== null) && (V <= 16777216)) {
          Result = 23}
         else if (V <= 4294967295) {
          Result = 25}
         else if ((this.GetBaseTypes(27) !== null) && (V <= 9007199254740991)) {
          Result = 27}
         else {
          Result = $lt.btIntDouble;
          if (this.GetBaseTypes(Result) === null) Result = this.FBaseTypeExtended;
        };
      };
      return Result;
    };
    this.GetCombinedChar = function (Char1, Char2, ErrorEl) {
      var Result = 0;
      var bt1 = 0;
      var bt2 = 0;
      bt1 = this.GetActualBaseType(Char1.BaseType);
      bt2 = this.GetActualBaseType(Char2.BaseType);
      if (bt1 === bt2) return bt1;
      if (!(bt1 in $mod.btAllChars)) this.RaiseInternalError(20170420103128,"");
      Result = 6;
      if (Result === this.FBaseTypeChar) Result = 5;
      if (ErrorEl === null) ;
      return Result;
    };
    this.GetCombinedString = function (Str1, Str2, ErrorEl) {
      var Result = 0;
      var bt1 = 0;
      var bt2 = 0;
      bt1 = this.GetActualBaseType(Str1.BaseType);
      bt2 = this.GetActualBaseType(Str2.BaseType);
      if (bt1 === bt2) return bt1;
      var $tmp = bt1;
      if ($tmp === 6) {
        var $tmp1 = bt2;
        if ($tmp1 === 8) {
          Result = 8}
         else if (($tmp1 === 7) || ($tmp1 === 9)) {
          Result = 9}
         else {
          this.RaiseNotYetImplemented(20170420103808,ErrorEl,"");
        };
      } else if ($tmp === 7) {
        var $tmp2 = bt2;
        if (($tmp2 === 6) || ($tmp2 === 9)) {
          Result = 9}
         else if ($tmp2 === 8) {
          Result = 8}
         else {
          this.RaiseNotYetImplemented(20170420121201,ErrorEl,"");
        };
      } else if ($tmp === 8) {
        var $tmp3 = bt2;
        if (($tmp3 === 5) || ($tmp3 === 6) || ($tmp3 === 8)) {
          Result = 8}
         else if (($tmp3 === 7) || ($tmp3 === 9)) {
          Result = 9}
         else {
          this.RaiseNotYetImplemented(20170420121532,ErrorEl,"");
        };
      } else if ($tmp === 9) {
        Result = 9}
       else {
        this.RaiseNotYetImplemented(20170420103153,ErrorEl,"");
      };
      if (Result === this.FBaseTypeChar) {
        Result = 5}
       else if (Result === this.FBaseTypeString) Result = 7;
      return Result;
    };
    this.IsElementSkipped = function (El) {
      var Result = false;
      Result = El === null;
      return Result;
    };
    this.GetFirstSection = function (WithUnitImpl) {
      var Result = null;
      var Module = null;
      Result = null;
      Module = this.FRootElement;
      if (Module === null) return Result;
      if ($lt113.isPrototypeOf(Module)) {
        Result = Module.ProgramSection}
       else if ($lt114.isPrototypeOf(Module)) {
        Result = Module.LibrarySection}
       else {
        Result = Module.InterfaceSection;
        if (WithUnitImpl && (Result === null)) Result = Module.ImplementationSection;
      };
      return Result;
    };
    this.GetLastSection = function () {
      var Result = null;
      var Module = null;
      Result = null;
      Module = this.FRootElement;
      if (Module === null) return Result;
      if ($lt113.isPrototypeOf(Module)) {
        Result = Module.ProgramSection}
       else if ($lt114.isPrototypeOf(Module)) {
        Result = Module.LibrarySection}
       else if (Module.ImplementationSection !== null) {
        Result = Module.ImplementationSection}
       else Result = Module.InterfaceSection;
      return Result;
    };
    this.GetParentSection = function (El) {
      var Result = null;
      while (El !== null) {
        if ($lt116.isPrototypeOf(El)) return El;
        El = El.FParent;
      };
      Result = null;
      return Result;
    };
    this.FindUsedUnitInSection = function (aMod, Section) {
      var Result = null;
      var Clause = [];
      var i = 0;
      Result = null;
      if (Section === null) return Result;
      Clause = Section.UsesClause;
      for (var $l = 0, $end = rtl.length(Clause) - 1; $l <= $end; $l++) {
        i = $l;
        if (Clause[i].Module === aMod) return Clause[i];
      };
      return Result;
    };
    this.FirstSectionUsesUnit = function (aModule) {
      var Result = false;
      var aSection = null;
      Result = false;
      aSection = this.GetFirstSection(false);
      if (aSection === null) return Result;
      Result = this.FindUsedUnitInSection(aModule,aSection) !== null;
      return Result;
    };
    this.ImplementationUsesUnit = function (aModule, NotInIntf) {
      var Result = false;
      var MyModule = null;
      Result = false;
      MyModule = this.FRootElement;
      if (MyModule === null) return Result;
      if (this.FindUsedUnitInSection(aModule,MyModule.ImplementationSection) === null) return Result;
      if (NotInIntf) Result = !this.FirstSectionUsesUnit(aModule);
      return Result;
    };
    var SHIFT_SIZE = [4,8,8,8,16,16,16,16,32,32];
    this.GetShiftAndMaskForLoHiFunc = function (BaseType, isLoFunc, Mask) {
      var Result = 0;
      if ((BaseType >= $lt.btByte) && (BaseType <= $lt.btIntDouble)) {
        if (3 in this.FCurrentParser.GetCurrentModeSwitches()) {
          Result = 8}
         else Result = SHIFT_SIZE[BaseType - 19];
        var $tmp = Result;
        if ($tmp === 8) {
          Mask.set(0xFF)}
         else if ($tmp === 16) {
          Mask.set(0xFFFF)}
         else if ($tmp === 32) {
          Mask.set(0xFFFFFFFF)}
         else {
          Mask.set(0xF);
        };
        if (isLoFunc) Result = 0;
      } else {
        this.RaiseInternalError(20190130122300,"");
        Result = -1;
      };
      return Result;
    };
  });
  this.GetTreeDbg = function (El, Indent) {
    var Result = "";
    function LineBreak(SubIndent) {
      Indent += SubIndent;
      Result = Result + $lm.LineEnding + $lp23(" ",Indent);
    };
    var i = 0;
    var l = 0;
    if (El === null) return "nil";
    Result = El.FName + ":" + El.$classname + "=";
    if ($lt153.isPrototypeOf(El)) {
      if (El.$class.ClassType() !== $lt144) Result = Result + $lm4.OpcodeStrings[El.OpCode];
      if (El.$class.ClassType() === $lt143) {
        Result = Result + $mod.GetTreeDbg(El.Operand,Indent)}
       else if (El.$class.ClassType() === $lt144) {
        Result = Result + "Left={" + $mod.GetTreeDbg(El.Left,Indent) + "}" + $lm4.OpcodeStrings[El.OpCode] + "Right={" + $mod.GetTreeDbg(El.Right,Indent) + "}"}
       else if (El.$class.ClassType() === $lt142) {
        Result = Result + El.Value}
       else if (El.$class.ClassType() === $lt146) {
        Result = Result + $lp14(El.Value,"true","false")}
       else if (El.$class.ClassType() === $lt147) {
        Result = Result + "nil"}
       else if (El.$class.ClassType() === $lt148) {
        Result = Result + "inherited"}
       else if (El.$class.ClassType() === $lt184) {
        Result = Result + "Self"}
       else if (El.$class.ClassType() === $lt145) {
        LineBreak(2);
        Result = Result + $mod.GetTreeDbg(El.Value,Indent) + "(";
        l = rtl.length(El.Params);
        if (l > 0) {
          Indent += 2;
          for (var $l = 0, $end = l - 1; $l <= $end; $l++) {
            i = $l;
            LineBreak(0);
            Result = Result + $mod.GetTreeDbg(El.Params[i],Indent);
            if (i < (l - 1)) Result = Result + ",";
          };
          Indent -= 2;
        };
        Result = Result + ")";
      } else if (El.$class.ClassType() === $lt150) {
        Result = Result + "(";
        l = rtl.length(El.Fields);
        if (l > 0) {
          Indent += 2;
          for (var $l1 = 0, $end1 = l - 1; $l1 <= $end1; $l1++) {
            i = $l1;
            LineBreak(0);
            Result = Result + El.Fields[i].Name + ":" + $mod.GetTreeDbg(El.Fields[i].ValueExp,Indent);
            if (i < (l - 1)) Result = Result + ",";
          };
          Indent -= 2;
        };
        Result = Result + ")";
      } else if (El.$class.ClassType() === $lt149) {
        Result = Result + "[";
        l = rtl.length(El.Values);
        if (l > 0) {
          Indent += 2;
          for (var $l2 = 0, $end2 = l - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            LineBreak(0);
            Result = Result + $mod.GetTreeDbg(El.Values[i],Indent);
            if (i < (l - 1)) Result = Result + ",";
          };
          Indent -= 2;
        };
        Result = Result + "]";
      };
    } else if ($lt90.isPrototypeOf(El)) {
      Result = Result + $mod.GetTreeDbg(El.ProcType,Indent);
    } else if ($lt100.isPrototypeOf(El)) {
      if (El.GetIsReference()) Result = Result + " " + $lm4.ProcTypeModifiers[1];
      Result = Result + "(";
      l = El.Args.FCount;
      if (l > 0) {
        Indent += 2;
        for (var $l3 = 0, $end3 = l - 1; $l3 <= $end3; $l3++) {
          i = $l3;
          LineBreak(0);
          Result = Result + $mod.GetTreeDbg(rtl.getObject(El.Args.Get(i)),Indent);
          if (i < (l - 1)) Result = Result + ";";
        };
        Indent -= 2;
      };
      Result = Result + ")";
      if ($lt90.isPrototypeOf(El) && $lt101.isPrototypeOf(El.ProcType)) Result = Result + ":" + $mod.GetTreeDbg(El.ProcType.ResultEl,Indent);
      if (El.GetIsOfObject()) Result = Result + " " + $lm4.ProcTypeModifiers[0];
      if (El.GetIsNested()) Result = Result + " " + $lm4.ProcTypeModifiers[1];
      if ($lm4.cCallingConventions[El.CallingConvention] !== "") Result = Result + "; " + $lm4.cCallingConventions[El.CallingConvention];
    } else if (El.$class.ClassType() === $lt141) {
      Result = Result + $mod.GetTreeDbg(El.ResultType,Indent)}
     else if (El.$class.ClassType() === $lt106) {
      if ($lm4.AccessNames[El.Access] !== "") Result = Result + $lm4.AccessNames[El.Access];
      if (El.ArgType === null) {
        Result = Result + "untyped"}
       else Result = Result + $mod.GetTreeDbg(El.ArgType,Indent);
    } else if (El.$class.ClassType() === $lt83) {
      if ($lt64.isPrototypeOf(El.FData)) Result = Result + El.FData.Signature;
    };
    return Result;
  };
  this.GetResolverResultDbg = function (T) {
    var Result = "";
    var HiTypeEl = null;
    Result = "[bt=" + $mod.ResBaseTypeNames[T.BaseType];
    if (T.SubType !== 0) Result = Result + " Sub=" + $mod.ResBaseTypeNames[T.SubType];
    Result = Result + " Ident=" + $lp2(T.IdentEl);
    HiTypeEl = $mod.ResolveSimpleAliasType(T.HiTypeEl);
    if (HiTypeEl !== T.LoTypeEl) {
      Result = Result + " LoType=" + $lp2(T.LoTypeEl) + " HiTypeEl=" + $lp2(HiTypeEl)}
     else Result = Result + " Type=" + $lp2(T.LoTypeEl);
    Result = Result + " Expr=" + $lp2(T.ExprEl) + " Flags=" + $mod.ResolverResultFlagsToStr(T.Flags) + "]";
    return Result;
  };
  this.ResolverResultFlagsToStr = function (Flags) {
    var Result = "";
    var f = 0;
    var s = "";
    Result = "";
    for (var $l in Flags) {
      f = +$l;
      if (Result !== "") Result = Result + ",";
      s = $lt58[f];
      Result = Result + s;
    };
    Result = "[" + Result + "]";
    return Result;
  };
  this.GetElementTypeName = function (El) {
    var Result = "";
    var C = null;
    if (El === null) return "?";
    C = El.$class.ClassType();
    if (C === $lt142) {
      Result = $lm4.ExprKindNames[El.Kind]}
     else if (C === $lt143) {
      Result = "unary " + $lm4.OpcodeStrings[El.OpCode]}
     else if (C === $lt144) {
      Result = $lm4.ExprKindNames[El.Kind]}
     else if (C === $lt94) {
      Result = $lm4.ObjKindNames[El.ObjKind]}
     else if (C === $lt83) {
      Result = El.FName}
     else {
      Result = $mod.GetElementTypeName$1(C);
      if (Result === "") Result = El.ElementTypeName();
    };
    return Result;
  };
  this.GetElementTypeName$1 = function (C) {
    var Result = "";
    if (C === null) return "nil";
    if (C === $lt142) {
      Result = "primitive expression"}
     else if (C === $lt143) {
      Result = "unary expression"}
     else if (C === $lt144) {
      Result = "binary expression"}
     else if (C === $lt146) {
      Result = "boolean const"}
     else if (C === $lt147) {
      Result = "nil"}
     else if (C === $lt157) {
      Result = "alias"}
     else if (C === $lt97) {
      Result = "pointer"}
     else if (C === $lt158) {
      Result = "type alias"}
     else if (C === $lt96) {
      Result = "class of"}
     else if (C === $lt155) {
      Result = "specialize"}
     else if (C === $lt152) {
      Result = "inline-specialize"}
     else if (C === $lt103) {
      Result = "range"}
     else if (C === $lt102) {
      Result = "array"}
     else if (C === $lt193) {
      Result = "file"}
     else if (C === $lt112) {
      Result = "enum value"}
     else if (C === $lt99) {
      Result = "enum type"}
     else if (C === $lt119) {
      Result = "set"}
     else if (C === $lt98) {
      Result = "record"}
     else if (C === $lt94) {
      Result = "class"}
     else if (C === $lt106) {
      Result = "parameter"}
     else if (C === $lt100) {
      Result = "procedural type"}
     else if (C === $lt141) {
      Result = "function result"}
     else if (C === $lt101) {
      Result = "functional type"}
     else if (C === $lt174) {
      Result = "string[]"}
     else if (C === $lt105) {
      Result = "var"}
     else if (C === $lt166) {
      Result = "export"}
     else if (C === $lt117) {
      Result = "const"}
     else if (C === $lt88) {
      Result = "property"}
     else if (C === $lt90) {
      Result = "procedure"}
     else if (C === $lt111) {
      Result = "function"}
     else if (C === $lt179) {
      Result = "operator"}
     else if (C === $lt191) {
      Result = "class operator"}
     else if (C === $lt108) {
      Result = "constructor"}
     else if (C === $lt120) {
      Result = "class constructor"}
     else if (C === $lt160) {
      Result = "destructor"}
     else if (C === $lt121) {
      Result = "class destructor"}
     else if (C === $lt161) {
      Result = "class procedure"}
     else if (C === $lt162) {
      Result = "class function"}
     else if (C === $lt163) {
      Result = "anonymous procedure"}
     else if (C === $lt164) {
      Result = "anonymous function"}
     else if (C === $lt159) {
      Result = "method resolution"}
     else if (C === $lt109) {
      Result = "interfacesection"}
     else if (C === $lt110) {
      Result = "implementation"}
     else if (C === $lt186) {
      Result = "program section"}
     else if (C === $lt187) {
      Result = "library section"}
     else Result = C.$classname;
    return Result;
  };
  this.GetElementDbgPath = function (El) {
    var Result = "";
    if (El === null) return "nil";
    Result = "";
    while (El !== null) {
      if (Result !== "") Result = "." + Result;
      if (El.FName !== "") {
        Result = El.FName + Result}
       else Result = $mod.GetElementTypeName(El) + Result;
      El = El.FParent;
    };
    return Result;
  };
  this.ResolveSimpleAliasType = function (aType) {
    var Result = null;
    var C = null;
    while (aType !== null) {
      C = aType.$class.ClassType();
      if (C === $lt157) {
        aType = aType.DestType}
       else if ((C === $lt94) && aType.IsForward && $lt55.isPrototypeOf(aType.FData)) {
        aType = rtl.as($mod.NoNil(aType.FData.FDeclaration),$lt95)}
       else return aType;
    };
    Result = null;
    return Result;
  };
  this.SetResolverIdentifier = function (ResolvedType, BaseType, IdentEl, LoTypeEl, HiTypeEl, Flags) {
    if ($lt153.isPrototypeOf(IdentEl)) throw $lt81.$create("Create$1",["20170729101017"]);
    ResolvedType.BaseType = BaseType;
    ResolvedType.SubType = 0;
    ResolvedType.IdentEl = IdentEl;
    ResolvedType.HiTypeEl = HiTypeEl;
    ResolvedType.LoTypeEl = LoTypeEl;
    ResolvedType.ExprEl = null;
    ResolvedType.Flags = rtl.refSet(Flags);
  };
  this.SetResolverTypeExpr = function (ResolvedType, BaseType, LoTypeEl, HiTypeEl, Flags) {
    ResolvedType.BaseType = BaseType;
    ResolvedType.SubType = 0;
    ResolvedType.IdentEl = null;
    ResolvedType.HiTypeEl = HiTypeEl;
    ResolvedType.LoTypeEl = LoTypeEl;
    ResolvedType.ExprEl = null;
    ResolvedType.Flags = rtl.refSet(Flags);
  };
  this.SetResolverValueExpr = function (ResolvedType, BaseType, LoTypeEl, HiTypeEl, ExprEl, Flags) {
    ResolvedType.BaseType = BaseType;
    ResolvedType.SubType = 0;
    ResolvedType.IdentEl = null;
    ResolvedType.HiTypeEl = HiTypeEl;
    ResolvedType.LoTypeEl = LoTypeEl;
    ResolvedType.ExprEl = ExprEl;
    ResolvedType.Flags = rtl.refSet(Flags);
  };
  this.ProcNeedsImplProc = function (Proc) {
    var Result = false;
    Result = true;
    if (Proc.IsExternal()) return false;
    if (Proc.IsForward()) return Result;
    if (Proc.FParent.$class.ClassType() === $lt109) return Result;
    if (Proc.FParent.$class.ClassType() === $lt94) {
      if (!Proc.IsAbstract()) return Result;
    };
    Result = false;
    return Result;
  };
  this.ProcNeedsBody = function (Proc) {
    var Result = false;
    var C = null;
    if (Proc.IsForward() || Proc.IsExternal()) return false;
    C = Proc.FParent.$class.ClassType();
    if ((C === $lt109) || C.InheritsFrom($lt94)) return false;
    Result = true;
    return Result;
  };
  this.ProcHasGroupOverload = function (Proc) {
    var Result = false;
    var Data = null;
    if (Proc.IsOverload()) return true;
    Data = Proc.FData;
    Result = $lt37.isPrototypeOf(Data) && (0 in Data.Flags);
    return Result;
  };
  this.ClearHelperList = function (List) {
    var i = 0;
    if (rtl.length(List.get()) === 0) return;
    for (var $l = 0, $end = rtl.length(List.get()) - 1; $l <= $end; $l++) {
      i = $l;
      rtl.free(List.get(),i);
    };
    List.set([]);
  };
  this.ChompDottedIdentifier = function (Identifier) {
    var Result = "";
    var p = 0;
    var Lvl = 0;
    Result = Identifier;
    p = Identifier.length;
    Lvl = 0;
    while (p > 0) {
      var $tmp = Identifier.charAt(p - 1);
      if ($tmp === ".") {
        if (Lvl === 0) break}
       else if ($tmp === ">") {
        Lvl += 1}
       else if ($tmp === "<") Lvl -= 1;
      p -= 1;
    };
    Result = $lp11(Identifier,p - 1);
    return Result;
  };
  this.FirstDottedIdentifier = function (Identifier) {
    var Result = "";
    var p = 0;
    var l = 0;
    p = 1;
    l = Identifier.length;
    do {
      if (p > l) {
        return Identifier}
       else if (Identifier.charCodeAt(p - 1) in rtl.createSet(60,46)) {
        return $lp11(Identifier,p - 1)}
       else p += 1;
    } while (!false);
    return Result;
  };
  this.LastDottedIdentifier = function (Identifier) {
    var Result = "";
    var p = 0;
    var Lvl = 0;
    var EndP = 0;
    p = Identifier.length;
    EndP = p;
    Lvl = 0;
    while (p > 0) {
      var $tmp = Identifier.charAt(p - 1);
      if ($tmp === ".") {
        if (Lvl === 0) break}
       else if ($tmp === ">") {
        Lvl += 1}
       else if ($tmp === "<") {
        Lvl -= 1;
        EndP = p - 1;
      };
      p -= 1;
    };
    Result = $lp16(Identifier,p + 1,EndP - p);
    return Result;
  };
  this.IsDottedIdentifierPrefix = function (Prefix, Identifier) {
    var Result = false;
    var l = 0;
    l = Prefix.length;
    if ((l > Identifier.length) || ($lp4(Prefix,$lp11(Identifier,l)) !== 0)) return false;
    Result = (Identifier.length === l) || (Identifier.charAt((l + 1) - 1) === ".");
    return Result;
  };
  this.GetFirstDotPos = function (Identifier) {
    var Result = 0;
    var l = 0;
    var Lvl = 0;
    Result = 1;
    l = Identifier.length;
    Lvl = 0;
    do {
      if (Result > l) return -1;
      var $tmp = Identifier.charAt(Result - 1);
      if ($tmp === ".") {
        if (Lvl === 0) return Result}
       else if ($tmp === "<") {
        Lvl += 1}
       else if ($tmp === ">") Lvl -= 1;
      Result += 1;
    } while (!false);
    return Result;
  };
  this.GetLastDotPos = function (Identifier) {
    var Result = 0;
    var Lvl = 0;
    Result = Identifier.length;
    Lvl = 0;
    while (Result > 0) {
      var $tmp = Identifier.charAt(Result - 1);
      if ($tmp === ".") {
        if (Lvl === 0) return Result}
       else if ($tmp === ">") {
        Lvl += 1}
       else if ($tmp === "<") Lvl -= 1;
      Result -= 1;
    };
    return Result;
  };
  var Alpha = rtl.createSet(null,65,90,null,97,122,95);
  var AlphaNum = rtl.unionSet(Alpha,rtl.createSet(null,48,57));
  var Dot = ".";
  this.IsValidIdent = function (Ident, AllowDots, StrictDots) {
    var Result = false;
    var First = false;
    var I = 0;
    var Len = 0;
    Len = Ident.length;
    if (Len < 1) return false;
    First = true;
    for (var $l = 1, $end = Len; $l <= $end; $l++) {
      I = $l;
      if (First) {
        Result = Ident.charCodeAt(I - 1) in Alpha;
        First = false;
      } else if (AllowDots && (Ident.charAt(I - 1) === Dot)) {
        if (StrictDots) {
          Result = I < Len;
          First = true;
        };
      } else Result = Ident.charCodeAt(I - 1) in AlphaNum;
      if (!Result) break;
    };
    return Result;
  };
  this.NoNil = function (o) {
    var Result = null;
    if (o === null) throw $lt81.$create("Create$1",[""]);
    Result = o;
    return Result;
  };
  this.dbgs$3 = function (a) {
    var Result = "";
    Result = $lt10[a];
    return Result;
  };
});
rtl.module("PasUseAnalyzer",["System","JS","Classes","SysUtils","Types","contnrs","PasTree","PScanner","PasResolveEval","PasResolver"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lm = pas.PasResolver;
  var $lt10 = $lm.EPasResolve;
  var $lm1 = pas.System;
  var $lt11 = $lm1.TObject;
  var $lm2 = pas.SysUtils;
  var $lt12 = $lm2.Exception;
  var $lm3 = pas.Classes;
  var $lt13 = $lm3.TFPList;
  var $lp = $lm2.FreeAndNil;
  var $lm4 = pas.PasTree;
  var $lt14 = $lm4.TPasProperty;
  var $lt15 = $lm4.TPasType;
  var $lt16 = $lm4.TPasClassType;
  var $lp1 = $lm.dbgs$3;
  var $lp2 = $lm2.IntToStr;
  var $lm5 = pas.PasResolveEval;
  var $lp3 = $lm5.GetObjPath;
  var $lt17 = $lm4.TPasProcedure;
  var $lt18 = $lm4.TInitializationSection;
  var $lt19 = $lm4.TFinalizationSection;
  var $lt20 = $lm4.TPasUnresolvedSymbolRef;
  var $lt21 = $lm4.TInterfaceSection;
  var $lt22 = $lm.TPasProcedureScope;
  var $lt23 = $lm.TPasInitialFinalizationScope;
  var $lp4 = $lm5.GetObjName;
  var $lt24 = $lm4.TPasGenericType;
  var $lt25 = $lm.TPasGenericScope;
  var $lt26 = $lm4.TPasVariable;
  var $lt27 = $lm4.TPasArgument;
  var $lt28 = $lm4.TPasResultElement;
  var $lt29 = $lm4.TPasResString;
  var $lt30 = $lm4.TPasExpr;
  var $lt31 = $lm4.TPasEnumValue;
  var $lt32 = $lm4.TPasMethodResolution;
  var $lt33 = $lm4.TPasModule;
  var $lt34 = $lm4.TPasUsesUnit;
  var $lt35 = $lm.TPasResolverResult;
  var $lt36 = $lm4.TPasConst;
  var $lt37 = $lm4.TPasAliasType;
  var $lt38 = $lm4.TPasTypeAliasType;
  var $lt39 = $lm4.TPasEnumType;
  var $lt40 = $lm4.TPasSetType;
  var $lt41 = $lm4.TPasRangeType;
  var $lt42 = $lm4.TPasArrayType;
  var $lt43 = $lm4.TPasPointerType;
  var $lt44 = $lm4.TPasAttributes;
  var $lt45 = $lm4.TPasClassOfType;
  var $lt46 = $lm4.TPasRecordType;
  var $lt47 = $lm4.TPasProcedureType;
  var $lt48 = $lm4.TPasFunctionType;
  var $lt49 = $lm4.TPasSpecializeType;
  var $lt50 = $lm.TPasSpecializeTypeData;
  var $lt51 = $lm4.TPasGenericTemplateType;
  var $lt52 = $lm4.TPasMembersType;
  var $lt53 = $lm4.TPasProgram;
  var $lt54 = $lm4.TPasLibrary;
  var $lt55 = $lm.TPasModuleScope;
  var $lt56 = $lm4.TPasExportSymbol;
  var $lt57 = $lm4.TPasImplElement;
  var $lt58 = $lm4.TPasImplBlock;
  var $lt59 = $lm4.TPasImplSimple;
  var $lt60 = $lm4.TPasImplAssign;
  var $lt61 = $lm4.TPasImplAsmStatement;
  var $lt62 = $lm4.TPasImplBeginBlock;
  var $lt63 = $lm4.TPasImplCaseOf;
  var $lt64 = $lm4.TPasImplCaseStatement;
  var $lt65 = $lm4.TPasImplCaseElse;
  var $lt66 = $lm4.TPasImplForLoop;
  var $lt67 = $lm.TPasForLoopScope;
  var $lt68 = $lm4.TPasImplIfElse;
  var $lt69 = $lm4.TPasImplCommand;
  var $lt70 = $lm4.TPasImplLabelMark;
  var $lt71 = $lm4.TPasImplRepeatUntil;
  var $lt72 = $lm4.TPasImplWhileDo;
  var $lt73 = $lm4.TPasImplWithDo;
  var $lt74 = $lm4.TPasImplExceptOn;
  var $lt75 = $lm4.TPasImplRaise;
  var $lt76 = $lm4.TPasImplTry;
  var $lt77 = $lm.TPRParentParams;
  var $lt78 = $lm.TResolvedReference;
  var $lt79 = $lm.TResolvedRefCtxAttrProc;
  var $lt80 = $lm.TPasRecordScope;
  var $lt81 = $lm4.TBinaryExpr;
  var $lt82 = $lm4.TPasVariant;
  var $lt83 = $lm.TResElDataBuiltInProc;
  var $lt84 = $lm4.TPrimitiveExpr;
  var $lt85 = $lm4.TBoolConstExpr;
  var $lt86 = $lm4.TNilExpr;
  var $lt87 = $lm4.TUnaryExpr;
  var $lt88 = $lm4.TParamsExpr;
  var $lt89 = $lm4.TArrayValues;
  var $lt90 = $lm4.TRecordValues;
  var $lt91 = $lm4.TInheritedExpr;
  var $lt92 = $lm4.TProcedureExpr;
  var $lt93 = $lm4.TInlineSpecializeExpr;
  var $lt94 = $lm4.TPasConstructor;
  var $lt95 = $lm4.TPasDestructor;
  var $lt96 = $lm.TResElDataBaseType;
  var $lt97 = $lm.TPasClassIntfMap;
  var $lt98 = $lm.TPasClassScope;
  var $lt99 = $lm4.TPasClassConstructor;
  var $lt100 = $lm4.TPasClassDestructor;
  var $lp5 = $lm2.LowerCase;
  var $lp6 = $lm2.CompareText;
  var $lp7 = $lm1.VarRecs;
  var $lp8 = $lm2.RightStr;
  var $lp9 = $lm5.GetElementNameAndParams;
  var $lt101 = $lm4.TImplementationSection;
  var $lt102 = $lm4.TProgramSection;
  var $lt103 = $lm4.TLibrarySection;
  var $lm6 = pas.PScanner;
  var $lp10 = $lm6.SafeFormat;
  var $lp11 = $lm6.CreateMsgArgs;
  this.nPAParameterInOverrideNotUsed = 4501;
  this.sPAParameterInOverrideNotUsed = 'Parameter "%s" not used';
  this.nPAFieldNotUsed = 4502;
  this.sPAFieldNotUsed = 'Field "%s" not used';
  this.nPAFieldIsAssignedButNeverUsed = 4503;
  this.sPAFieldIsAssignedButNeverUsed = 'Field "%s" is assigned but never used';
  this.nPAUnitNotUsed = 5023;
  this.sPAUnitNotUsed = 'Unit "%s" not used in %s';
  this.nPAParameterNotUsed = 5024;
  this.sPAParameterNotUsed = 'Parameter "%s" not used';
  this.nPALocalVariableNotUsed = 5025;
  this.sPALocalVariableNotUsed = 'Local variable "%s" not used';
  this.nPAValueParameterIsAssignedButNeverUsed = 5026;
  this.sPAValueParameterIsAssignedButNeverUsed = 'Value parameter "%s" is assigned but never used';
  this.nPALocalVariableIsAssignedButNeverUsed = 5027;
  this.sPALocalVariableIsAssignedButNeverUsed = 'Local variable "%s" is assigned but never used';
  this.nPALocalXYNotUsed = 5028;
  this.sPALocalXYNotUsed = 'Local %s "%s" not used';
  this.nPAPrivateFieldIsNeverUsed = 5029;
  this.sPAPrivateFieldIsNeverUsed = 'Private field "%s" is never used';
  this.nPAPrivateFieldIsAssignedButNeverUsed = 5030;
  this.sPAPrivateFieldIsAssignedButNeverUsed = 'Private field "%s" is assigned but never used';
  this.nPAPrivateMethodIsNeverUsed = 5031;
  this.sPAPrivateMethodIsNeverUsed = 'Private method "%s" is never used';
  this.nPAFunctionResultDoesNotSeemToBeSet = 5033;
  this.sPAFunctionResultDoesNotSeemToBeSet = "Function result does not seem to be set";
  this.nPAPrivateTypeXNeverUsed = 5071;
  this.sPAPrivateTypeXNeverUsed = 'Private type "%s" never used';
  this.nPAPrivateConstXNeverUsed = 5072;
  this.sPAPrivateConstXNeverUsed = 'Private const "%s" never used';
  this.nPAPrivatePropertyXNeverUsed = 5073;
  this.sPAPrivatePropertyXNeverUsed = 'Private property "%s" never used';
  rtl.createClass(this,"EPasAnalyzer",$lt10,function () {
    $lt = this;
  });
  rtl.createClass(this,"TPAMessage",$lt11,function () {
    $lt1 = this;
    this.$init = function () {
      $lt11.$init.call(this);
      this.FRefCount = 0;
      this.Id = 0;
      this.MsgType = 0;
      this.MsgNumber = 0;
      this.MsgText = "";
      this.MsgPattern = "";
      this.Args = [];
      this.PosEl = null;
      this.Filename = "";
      this.Row = 0;
      this.Col = 0;
    };
    this.$final = function () {
      this.Args = undefined;
      this.PosEl = undefined;
      $lt11.$final.call(this);
    };
    this.Create$1 = function () {
      this.FRefCount = 1;
      return this;
    };
    this.Release = function () {
      if (this.FRefCount === 0) throw $lt12.$create("Create$1",[""]);
      this.FRefCount -= 1;
      if (this.FRefCount === 0) this.$destroy("Destroy");
    };
  });
  $lt2 = this.TPAIdentifierAccess = {"0": "paiaNone", paiaNone: 0, "1": "paiaRead", paiaRead: 1, "2": "paiaWrite", paiaWrite: 2, "3": "paiaReadWrite", paiaReadWrite: 3, "4": "paiaWriteRead", paiaWriteRead: 4};
  rtl.createClass(this,"TPAElement",$lt11,function () {
    $lt3 = this;
    this.$init = function () {
      $lt11.$init.call(this);
      this.FElement = null;
      this.Access = 0;
    };
    this.$final = function () {
      this.FElement = undefined;
      $lt11.$final.call(this);
    };
    this.SetElement = function (AValue) {
      if (this.FElement === AValue) return;
      this.FElement = AValue;
    };
    this.Destroy = function () {
      this.SetElement(null);
      $lt11.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPAOverrideList",$lt11,function () {
    $lt4 = this;
    this.$init = function () {
      $lt11.$init.call(this);
      this.FElement = null;
      this.FOverrides = null;
    };
    this.$final = function () {
      this.FElement = undefined;
      this.FOverrides = undefined;
      $lt11.$final.call(this);
    };
    this.GetOverrides = function (Index) {
      var Result = null;
      Result = rtl.getObject(this.FOverrides.Get(Index));
      return Result;
    };
    this.SetElement = function (AValue) {
      if (this.FElement === AValue) return;
      this.FElement = AValue;
    };
    this.Create$1 = function () {
      this.FOverrides = $lt13.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FOverrides;
        }, set: function (v) {
          this.p.FOverrides = v;
        }});
      this.SetElement(null);
      $lt11.Destroy.call(this);
    };
    this.Add = function (OverrideEl) {
      this.FOverrides.Add(OverrideEl);
    };
    this.Count = function () {
      var Result = 0;
      Result = this.FOverrides.FCount;
      return Result;
    };
    this.IndexOf = function (OverrideEl) {
      var Result = 0;
      Result = this.FOverrides.IndexOf(OverrideEl);
      return Result;
    };
  });
  rtl.createClass(this,"TPasAnalyzerKeySet",$lt11,function () {
    $lt5 = this;
    this.$init = function () {
      $lt11.$init.call(this);
      this.FItems = null;
      this.FCount = 0;
      this.FItemToName = null;
      this.FKeyToName = null;
    };
    this.$final = function () {
      this.FItems = undefined;
      this.FItemToName = undefined;
      this.FKeyToName = undefined;
      $lt11.$final.call(this);
    };
    this.Create$1 = function (OnItemToName, OnKeyToName) {
      this.FItemToName = OnItemToName;
      this.FKeyToName = OnKeyToName;
      this.FItems = new Object();
      return this;
    };
    this.Destroy = function () {
      this.FItems = null;
      $lt11.Destroy.call(this);
    };
    this.Clear = function () {
      this.FItems = new Object();
      this.FCount = 0;
    };
    this.FreeItems = function () {
      var List = [];
      var i = 0;
      List = Object.getOwnPropertyNames(this.FItems);
      for (var $l = 0, $end = rtl.length(List) - 1; $l <= $end; $l++) {
        i = $l;
        rtl.getObject(this.FItems[List[i]]).$destroy("Destroy");
      };
      this.FItems = new Object();
      this.FCount = 0;
    };
    this.Add = function (Item, CheckDuplicates) {
      if (CheckDuplicates) if (this.ContainsItem(Item)) throw $lt12.$create("Create$1",["[20181101151755] TPasAnalyzerSet.Add duplicate"]);
      this.FItems["%" + this.FItemToName(Item)] = Item;
      this.FCount += 1;
    };
    this.ContainsItem = function (Item) {
      var Result = false;
      Result = this.FItems.hasOwnProperty("%" + this.FItemToName(Item));
      return Result;
    };
    this.ContainsKey = function (Key) {
      var Result = false;
      Result = this.FItems.hasOwnProperty("%" + this.FKeyToName(Key));
      return Result;
    };
    this.FindItem = function (Item) {
      var Result = null;
      var aName = "";
      aName = "%" + this.FItemToName(Item);
      if (!this.FItems.hasOwnProperty(aName)) {
        return null}
       else Result = this.FItems[aName];
      return Result;
    };
    this.FindKey = function (Key) {
      var Result = null;
      var aName = "";
      aName = "%" + this.FKeyToName(Key);
      if (!this.FItems.hasOwnProperty(aName)) {
        return null}
       else Result = this.FItems[aName];
      return Result;
    };
    this.Count = function () {
      var Result = 0;
      Result = this.FCount;
      return Result;
    };
  });
  $lt6 = this.TPasAnalyzerOption = {"0": "paoOnlyExports", paoOnlyExports: 0, "1": "paoImplReferences", paoImplReferences: 1, "2": "paoSkipGenericProc", paoSkipGenericProc: 2};
  $lt7 = this.TPAUseMode = {"0": "paumElement", paumElement: 0, "1": "paumAllPasUsable", paumAllPasUsable: 1, "2": "paumAllExports", paumAllExports: 2, "3": "paumTypeInfo", paumTypeInfo: 3};
  this.PAUseModeToPSRefAccess = [1,1,1,5];
  $lt8 = this.TPAOtherCheckedEl = {"0": "pocClassConstructor", pocClassConstructor: 0};
  rtl.createClass(this,"TPasAnalyzer",$lt11,function () {
    $lt9 = this;
    this.$init = function () {
      $lt11.$init.call(this);
      this.FModeChecked = rtl.arraySetLength(null,null,4);
      this.FOtherChecked = rtl.arraySetLength(null,null,1);
      this.FOnMessage = null;
      this.FOptions = {};
      this.FOverrideLists = null;
      this.FResolver = null;
      this.FScopeModule = null;
      this.FUsedElements = null;
    };
    this.$final = function () {
      this.FModeChecked = undefined;
      this.FOtherChecked = undefined;
      this.FOnMessage = undefined;
      this.FOptions = undefined;
      this.FOverrideLists = undefined;
      this.FResolver = undefined;
      this.FScopeModule = undefined;
      this.FUsedElements = undefined;
      $lt11.$final.call(this);
    };
    this.UseElType = function (El, aType, Mode) {
      if (aType === null) return;
      this.MarkImplScopeRef(El,aType,$mod.PAUseModeToPSRefAccess[Mode]);
      this.UseType(aType,Mode);
    };
    this.AddOverride = function (OverriddenEl, OverrideEl) {
      var Result = false;
      var Item = null;
      var OverriddenPAEl = null;
      var TypeEl = null;
      Item = this.FOverrideLists.FindKey(OverriddenEl);
      if (Item === null) {
        Item = $lt4.$create("Create$1");
        Item.SetElement(OverriddenEl);
        this.FOverrideLists.Add(Item,false);
      } else {
        if (Item.IndexOf(OverrideEl) >= 0) return false;
      };
      Item.Add(OverrideEl);
      Result = true;
      OverriddenPAEl = this.FindElement(OverriddenEl);
      if (OverriddenPAEl !== null) {
        if (OverrideEl.$class.ClassType() === $lt14) {
          if ($lt15.isPrototypeOf(OverriddenEl)) {
            TypeEl = this.FResolver.ResolveAliasTypeEl(OverriddenEl);
            if ((TypeEl.$class.ClassType() === $lt16) && (TypeEl.ObjKind === 2)) {
              this.UseVariable(OverrideEl,1,false);
              return Result;
            };
          };
          this.RaiseNotSupported(20180328221736,OverrideEl,$mod.GetElModName(OverriddenEl));
        } else this.UseElement(OverrideEl,0,true);
      };
      return Result;
    };
    this.SetOptions = function (AValue) {
      if (rtl.eqSet(this.FOptions,AValue)) return;
      this.FOptions = rtl.refSet(AValue);
    };
    this.UpdateAccess = function (IsWrite, IsRead, Usage) {
      if (IsRead) {
        var $tmp = Usage.Access;
        if ($tmp === 0) {
          Usage.Access = 1}
         else if ($tmp === 1) {}
        else if ($tmp === 2) {
          Usage.Access = 4}
         else if ($tmp === 3) {}
        else if ($tmp === 4) {}
        else {
          this.RaiseInconsistency(20170311183122,"");
        };
      };
      if (IsWrite) {
        var $tmp1 = Usage.Access;
        if ($tmp1 === 0) {
          Usage.Access = 2}
         else if ($tmp1 === 1) {
          Usage.Access = 3}
         else if ($tmp1 === 2) {}
        else if ($tmp1 === 3) {}
        else if ($tmp1 === 4) {}
        else {
          this.RaiseInconsistency(20170311183127,"");
        };
      };
    };
    this.OnUseScopeRef = function (Data, DeclScope) {
      if (DeclScope === null) ;
      while (Data !== null) {
        var $tmp = Data.Access;
        if ($tmp === 0) {}
        else if ($tmp === 1) {
          this.UseElement(Data.FElement,1,false)}
         else if ($tmp === 2) {
          this.UseElement(Data.FElement,2,false)}
         else if ($tmp === 3) {
          this.UseElement(Data.FElement,3,false)}
         else if ($tmp === 4) {
          this.UseElement(Data.FElement,2,false);
          this.UseElement(Data.FElement,1,false);
        } else if ($tmp === 5) {
          this.UseTypeInfo(Data.FElement)}
         else {
          this.RaiseNotSupported(20180228191928,Data.FElement,$lp1(Data.Access));
        };
        Data = Data.NextSameName;
      };
    };
    this.RaiseInconsistency = function (Id, Msg) {
      throw $lt.$create("Create$1",["[" + $lp2(Id) + "]: " + Msg]);
    };
    this.RaiseNotSupported = function (Id, El, Msg) {
      var s = "";
      var E = null;
      s = "[" + $lp2(Id) + "]: Element=" + $lp3(El);
      if (Msg !== "") s = s + " " + Msg;
      E = $lt.$create("Create$1",[s]);
      E.SetPasElement(El);
      throw E;
    };
    this.FindTopImplScope = function (El) {
      var Result = null;
      var ProcScope = null;
      var C = null;
      var ImplProc = null;
      Result = null;
      while (El !== null) {
        C = El.$class.ClassType();
        if (C.InheritsFrom($lt17)) {
          ProcScope = El.FData;
          if (ProcScope.DeclarationProc !== null) ProcScope = ProcScope.DeclarationProc.FData;
          ImplProc = ProcScope.ImplProc;
          if (ImplProc === null) ImplProc = ProcScope.FElement;
          if (ImplProc.Body !== null) Result = ProcScope;
        } else if ((C === $lt18) || (C === $lt19)) Result = El.FData;
        El = El.FParent;
      };
      return Result;
    };
    this.Add = function (El, CheckDuplicate, aClass) {
      var Result = null;
      if (El === null) this.RaiseInconsistency(20170308093407,"");
      if (CheckDuplicate && this.PAElementExists(El)) this.RaiseInconsistency(20170304201318,"");
      if (aClass === null) aClass = $lt3;
      Result = aClass.$create("Create");
      Result.SetElement(El);
      this.FUsedElements.Add(Result,true);
      return Result;
    };
    this.PAElementExists = function (El) {
      var Result = false;
      Result = this.FUsedElements.ContainsKey(El);
      return Result;
    };
    this.CreateTree = function () {
      this.FUsedElements = $lt5.$create("Create$1",[$mod.PAElement_ElToHashName,$mod.PasElementToHashName]);
    };
    this.MarkElementAsUsed = function (El, aClass) {
      var $Self = this;
      var Result = false;
      function MarkModule(CurModule) {
        var Result = false;
        if ($Self.PAElementExists(CurModule)) return false;
        $Self.Add(CurModule,true,null);
        Result = true;
        return Result;
      };
      var CurModule = null;
      if (El === null) return false;
      CurModule = El.GetModule();
      if (CurModule === null) {
        if (El.$class.ClassType() === $lt20) return false;
        this.RaiseInconsistency(20170308093540,$mod.GetElModName(El));
      };
      if (this.FScopeModule !== null) {
        if (CurModule !== this.FScopeModule) {
          MarkModule(CurModule);
          return false;
        };
      };
      if (this.PAElementExists(El)) return false;
      this.Add(El,false,aClass);
      Result = true;
      if (this.FScopeModule === null) {
        if (this.IsIdentifier(El)) if (MarkModule(CurModule)) this.UseModule(CurModule,0);
      };
      return Result;
    };
    this.ElementVisited = function (El, Mode) {
      var Result = false;
      if (El === null) return true;
      if (this.FModeChecked[Mode].ContainsItem(El)) return true;
      Result = false;
      this.FModeChecked[Mode].Add(El,false);
      return Result;
    };
    this.MarkImplScopeRef = function (El, RefEl, Access) {
      var $Self = this;
      function CheckImplRef() {
        var ElImplScope = null;
        var RefElImplScope = null;
        ElImplScope = $Self.FindTopImplScope(El);
        if (ElImplScope === null) return;
        RefElImplScope = $Self.FindTopImplScope(RefEl);
        if (RefElImplScope === ElImplScope) return;
        if ((RefEl.FName === "") && !$lt21.isPrototypeOf(RefEl)) return;
        if (RefEl === ElImplScope.FElement) return;
        if ($lt22.isPrototypeOf(ElImplScope)) {
          ElImplScope.AddReference(RefEl,Access)}
         else if ($lt23.isPrototypeOf(ElImplScope)) {
          ElImplScope.AddReference(RefEl,Access)}
         else $Self.RaiseInconsistency(20180302142933,$lp4(ElImplScope));
      };
      if (RefEl === null) return;
      if (RefEl.FParent === El) return;
      if (1 in this.FOptions) CheckImplRef();
    };
    this.IsGenericElement = function (El) {
      var Result = false;
      var C = null;
      C = El.$class.ClassType();
      if (C.InheritsFrom($lt17)) {
        Result = El.NameParts !== null}
       else if (C.InheritsFrom($lt24)) {
        Result = El.GenericTemplateTypes !== null}
       else Result = false;
      return Result;
    };
    this.CanSkipGenericType = function (El) {
      var $Self = this;
      var Result = false;
      function RaiseHalfSpecialized() {
        var GenScope = null;
        var Item = null;
        if ((El.GenericTemplateTypes !== null) && (El.GenericTemplateTypes.FCount > 0)) $Self.RaiseNotSupported(20190817151437,El,"");
        if (!$lt25.isPrototypeOf(El.FData)) $Self.RaiseNotSupported(20190826141320,El,$lp4(El.FData));
        GenScope = El.FData;
        Item = GenScope.SpecializedFromItem;
        if (Item === null) $Self.RaiseNotSupported(20190826141352,El,"");
        if (Item.FSpecializedEl === null) $Self.RaiseNotSupported(20190826141516,El,"");
        if (Item.FirstSpecialize === null) $Self.RaiseNotSupported(20190826141649,El,"");
        $Self.RaiseNotSupported(20190826141540,El,"SpecializedAt:" + $lp3(Item.FirstSpecialize) + " " + $Self.FResolver.GetElementSourcePosStr(Item.FirstSpecialize));
      };
      Result = false;
      if (this.FScopeModule === null) {
        if (!this.FResolver.IsFullySpecialized(El)) RaiseHalfSpecialized();
      } else {
        if ((El.GenericTemplateTypes !== null) && (El.GenericTemplateTypes.FCount > 0)) {}
        else if (!this.FResolver.IsFullySpecialized(El)) return true;
      };
      return Result;
    };
    this.CanSkipGenericProc = function (DeclProc) {
      var $Self = this;
      var Result = false;
      function RaiseHalfSpecialized() {
        var Templates = null;
        var ProcScope = null;
        var Item = null;
        Templates = $Self.FResolver.GetProcTemplateTypes(DeclProc);
        if ((Templates !== null) && (Templates.FCount > 0)) $Self.RaiseNotSupported(20191016132828,DeclProc,"");
        if (!$lt22.isPrototypeOf(DeclProc.FData)) $Self.RaiseNotSupported(20191016132836,DeclProc,$lp4(DeclProc.FData));
        ProcScope = DeclProc.FData;
        Item = ProcScope.SpecializedFromItem;
        if (Item === null) $Self.RaiseNotSupported(20191016133013,DeclProc,"");
        if (Item.FSpecializedEl === null) $Self.RaiseNotSupported(20191016133017,DeclProc,"");
        if (Item.FirstSpecialize === null) $Self.RaiseNotSupported(20191016133019,DeclProc,"");
        $Self.RaiseNotSupported(20191016133022,DeclProc,"SpecializedAt:" + $lp3(Item.FirstSpecialize) + " " + $Self.FResolver.GetElementSourcePosStr(Item.FirstSpecialize));
      };
      var Templates = null;
      var Parent = null;
      Result = false;
      if (this.FScopeModule === null) {
        if (!this.FResolver.IsFullySpecialized$1(DeclProc)) RaiseHalfSpecialized();
      } else {
        Templates = this.FResolver.GetProcTemplateTypes(DeclProc);
        if ((Templates !== null) && (Templates.FCount > 0)) {
          if (2 in this.FOptions) return true;
        } else if (!this.FResolver.IsFullySpecialized$1(DeclProc)) {
          return true}
         else if (2 in this.FOptions) {
          Parent = DeclProc.FParent;
          while (Parent !== null) {
            if ($lt24.isPrototypeOf(Parent)) {
              Templates = Parent.GenericTemplateTypes;
              if ((Templates !== null) && (Templates.FCount > 0)) return true;
            };
            Parent = Parent.FParent;
          };
        };
      };
      return Result;
    };
    this.UseElement = function (El, Access, UseFull) {
      var C = null;
      if (El === null) return;
      C = El.$class.ClassType();
      if (C.InheritsFrom($lt15)) {
        this.UseType(El,0)}
       else if (C.InheritsFrom($lt26)) {
        this.UseVariable(El,Access,UseFull)}
       else if (C === $lt27) {
        this.UseArgument(El,Access)}
       else if (C === $lt28) {
        this.UseResultElement(El,Access)}
       else if (C === $lt29) {
        this.UseResourcestring(El)}
       else if (C.InheritsFrom($lt17)) {
        this.UseProcedure(El)}
       else if (C.InheritsFrom($lt30)) {
        this.UseExpr(El)}
       else if (C === $lt31) {
        this.UseExpr(El.Value)}
       else if (C === $lt32) {}
      else if (C.InheritsFrom($lt33) || (C === $lt34)) {}
      else this.RaiseNotSupported(20170307090947,El,"");
      do {
        El = El.FParent;
        if (!$lt15.isPrototypeOf(El)) break;
        this.UseType(El,0);
      } while (!false);
    };
    this.UseTypeInfo = function (El) {
      var $Self = this;
      function UseSubEl(SubEl) {
        if (SubEl === null) return;
        $Self.MarkImplScopeRef(El,SubEl,5);
        $Self.UseTypeInfo(SubEl);
      };
      var C = null;
      var Members = null;
      var Args = null;
      var i = 0;
      var Member = null;
      var Param = null;
      var MemberResolved = $lt35.$new();
      var Prop = null;
      var ProcType = null;
      var ClassEl = null;
      var ArrType = null;
      var SpecType = null;
      var Rec = null;
      if (this.ElementVisited(El,3)) return;
      C = El.$class.ClassType();
      if (C === $lt20) {}
      else if ((C === $lt26) || (C === $lt36)) {
        UseSubEl(El.VarType)}
       else if (C === $lt27) {
        UseSubEl(El.ArgType)}
       else if (C === $lt14) {
        Prop = El;
        Args = this.FResolver.GetPasPropertyArgs(Prop);
        for (var $l = 0, $end = Args.FCount - 1; $l <= $end; $l++) {
          i = $l;
          UseSubEl(rtl.getObject(Args.Get(i)).ArgType);
        };
        UseSubEl(this.FResolver.GetPasPropertyType(Prop));
        this.UseElement(this.FResolver.GetPasPropertyGetter(Prop),1,false);
        this.UseElement(this.FResolver.GetPasPropertySetter(Prop),1,false);
        this.UseElement(this.FResolver.GetPasPropertyIndex(Prop),1,false);
        this.UseElement(this.FResolver.GetPasPropertyStoredExpr(Prop),1,false);
        this.UseElement(this.FResolver.GetPasPropertyDefaultExpr(Prop),1,false);
      } else if ((C === $lt37) || (C === $lt38)) {
        UseSubEl(El.DestType)}
       else if (C === $lt39) {}
      else if (C === $lt40) {
        UseSubEl(El.EnumType)}
       else if (C === $lt41) {}
      else if (C === $lt42) {
        ArrType = El;
        if (this.CanSkipGenericType(ArrType)) return;
        UseSubEl(ArrType.ElType);
        for (var $l1 = 0, $end1 = rtl.length(ArrType.Ranges) - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          Member = ArrType.Ranges[i];
          this.FResolver.ComputeElement(Member,MemberResolved,rtl.createSet(3),null);
          UseSubEl(MemberResolved.HiTypeEl);
        };
      } else if (C === $lt43) {
        UseSubEl(El.DestType)}
       else if (C === $lt16) {
        ClassEl = El;
        if (this.CanSkipGenericType(ClassEl)) return;
        if (ClassEl.ObjKind === 2) {
          Members = ClassEl.Members;
          for (var $l2 = 0, $end2 = Members.FCount - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            Member = rtl.getObject(Members.Get(i));
            if (Member.$class.ClassType() === $lt44) continue;
            if (this.IsGenericElement(Member)) continue;
            if (this.IsUsed(Member)) this.UseTypeInfo(Member);
          };
        };
      } else if (C === $lt45) {}
      else if (C === $lt46) {
        Rec = El;
        if (this.CanSkipGenericType(Rec)) return;
        Members = Rec.Members;
        for (var $l3 = 0, $end3 = Members.FCount - 1; $l3 <= $end3; $l3++) {
          i = $l3;
          Member = rtl.getObject(Members.Get(i));
          if (Member.$class.ClassType() === $lt44) continue;
          if (this.IsGenericElement(Member)) continue;
          UseSubEl(Member);
        };
        UseSubEl(Rec.VariantEl);
        if (Rec.Variants !== null) for (var $l4 = 0, $end4 = Rec.Variants.FCount - 1; $l4 <= $end4; $l4++) {
          i = $l4;
          UseSubEl(rtl.getObject(Rec.Variants.Get(i)));
        };
      } else if (C.InheritsFrom($lt17)) {
        UseSubEl(El.ProcType)}
       else if (C.InheritsFrom($lt47)) {
        ProcType = El;
        if (this.CanSkipGenericType(ProcType)) return;
        for (var $l5 = 0, $end5 = ProcType.Args.FCount - 1; $l5 <= $end5; $l5++) {
          i = $l5;
          UseSubEl(rtl.getObject(ProcType.Args.Get(i)).ArgType);
        };
        if ($lt48.isPrototypeOf(El) && (El.ResultEl !== null)) UseSubEl(El.ResultEl.ResultType);
      } else if (C === $lt28) {
        UseSubEl(El.ResultType)}
       else if (C === $lt49) {
        SpecType = El;
        if ($lt50.isPrototypeOf(SpecType.FData)) UseSubEl(El.FData.SpecializedType);
        for (var $l6 = 0, $end6 = SpecType.Params.FCount - 1; $l6 <= $end6; $l6++) {
          i = $l6;
          Param = rtl.getObject(SpecType.Params.Get(i));
          if ($lt51.isPrototypeOf(Param)) continue;
          UseSubEl(Param);
        };
      } else if (C === $lt51) {
        if (this.FScopeModule === null) this.RaiseNotSupported(20190817110226,El,"");
      } else {
        this.RaiseNotSupported(20170414153904,El,"");
      };
      this.UseElement(El,0,true);
      this.UseAttributes(El);
      if ($lt52.isPrototypeOf(El.FParent)) this.UseTypeInfo(El.FParent);
    };
    this.UseAttributes = function (El) {
      var Result = false;
      var Calls = [];
      var i = 0;
      Calls = this.FResolver.GetAttributeCallsEl(El);
      Result = rtl.length(Calls) > 0;
      for (var $l = 0, $end = rtl.length(Calls) - 1; $l <= $end; $l++) {
        i = $l;
        this.UseExpr(Calls[i]);
      };
      return Result;
    };
    this.UseModule = function (aModule, Mode) {
      var $Self = this;
      var Result = false;
      function UseInitFinal(ImplBlock) {
        var Scope = null;
        if (ImplBlock === null) return;
        Scope = ImplBlock.FData;
        $Self.UseScopeReferences(Scope.References);
        if ((Scope.References === null) && $Self.IsImplBlockEmpty(ImplBlock)) return;
        if (!$Self.PAElementExists(aModule)) $Self.Add(aModule,true,null);
        $Self.UseImplBlock(ImplBlock,true);
      };
      var ModScope = null;
      if (this.ElementVisited(aModule,Mode)) return false;
      Result = true;
      if (Mode in rtl.createSet(2,1)) {
        if ($lt53.isPrototypeOf(aModule)) {
          this.UseSection(aModule.ProgramSection,Mode)}
         else if ($lt54.isPrototypeOf(aModule)) {
          this.UseSection(aModule.LibrarySection,Mode)}
         else {
          this.UseSection(aModule.InterfaceSection,Mode);
        };
      };
      UseInitFinal(aModule.InitializationSection);
      UseInitFinal(aModule.FinalizationSection);
      ModScope = rtl.as(aModule.FData,$lt55);
      if (ModScope.FRangeErrorClass !== null) this.UseClassOrRecType(ModScope.FRangeErrorClass,0);
      if (ModScope.FRangeErrorConstructor !== null) this.UseProcedure(ModScope.FRangeErrorConstructor);
      if (Mode === 0) if (!this.PAElementExists(aModule)) this.Add(aModule,true,null);
      return Result;
    };
    this.UseSection = function (Section, Mode) {
      var i = 0;
      var UsedModule = null;
      var Decl = null;
      var OnlyExports = false;
      var UsesClause = [];
      var C = null;
      if (Mode === 0) this.RaiseInconsistency(20170317172721,"");
      if (this.ElementVisited(Section,Mode)) return;
      OnlyExports = Mode === 2;
      if (Mode === 1) this.MarkElementAsUsed(Section,null);
      UsesClause = Section.UsesClause;
      for (var $l = 0, $end = rtl.length(UsesClause) - 1; $l <= $end; $l++) {
        i = $l;
        if ($lt33.isPrototypeOf(UsesClause[i].Module)) {
          UsedModule = UsesClause[i].Module;
          if (this.FScopeModule === null) {
            this.UseModule(UsedModule,2)}
           else {
            if (this.IsImplBlockEmpty(UsedModule.InitializationSection) && this.IsImplBlockEmpty(UsedModule.FinalizationSection)) continue;
            if (!this.PAElementExists(UsedModule)) this.Add(UsedModule,true,null);
            this.UseImplBlock(UsedModule.InitializationSection,true);
            this.UseImplBlock(UsedModule.FinalizationSection,true);
          };
        };
      };
      for (var $l1 = 0, $end1 = Section.Declarations.FCount - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        Decl = rtl.getObject(Section.Declarations.Get(i));
        C = Decl.$class.ClassType();
        if (C.InheritsFrom($lt17)) {
          if (OnlyExports && rtl.eqSet(rtl.intersectSet(rtl.createSet(4,10),Decl.FModifiers),{})) continue;
          this.UseProcedure(Decl);
        } else if (C.InheritsFrom($lt15)) {
          if (OnlyExports) continue;
          this.UseType(Decl,Mode);
        } else if (C.InheritsFrom($lt26)) {
          if (OnlyExports && rtl.eqSet(rtl.intersectSet(rtl.createSet(3,2),Decl.VarModifiers),{})) continue;
          this.UseVariable(Decl,0,true);
        } else if (C === $lt29) {
          if (OnlyExports) continue;
          this.UseResourcestring(Decl);
        } else if (C === $lt44) {}
        else if (C === $lt56) {
          this.UseExportSymbol(Decl)}
         else this.RaiseNotSupported(20170306165213,Decl,"");
      };
    };
    this.UseImplBlock = function (Block, Mark) {
      var i = 0;
      var El = null;
      if (Block === null) return;
      if (Mark && !this.MarkElementAsUsed(Block,null)) return;
      for (var $l = 0, $end = Block.Elements.FCount - 1; $l <= $end; $l++) {
        i = $l;
        El = rtl.getObject(Block.Elements.Get(i));
        if ($lt57.isPrototypeOf(El)) {
          this.UseImplElement(El)}
         else this.RaiseNotSupported(20170306195110,El,"");
      };
    };
    this.UseImplElement = function (El) {
      var C = null;
      var ForLoop = null;
      var CaseOf = null;
      var i = 0;
      var j = 0;
      var CaseSt = null;
      var WithDo = null;
      var SubEl = null;
      var ParentEl = null;
      var ForScope = null;
      if (El === null) return;
      C = El.$class.ClassType();
      if (C === $lt58) {
        this.UseImplBlock(El,false)}
       else if (C === $lt59) {
        this.UseExpr(El.Expr)}
       else if (C === $lt60) {
        this.UseExpr(El.Left);
        this.UseExpr(El.Right);
      } else if (C === $lt61) {}
      else if (C === $lt62) {
        this.UseImplBlock(El,false)}
       else if (C === $lt63) {
        CaseOf = El;
        this.UseExpr(CaseOf.CaseExpr);
        for (var $l = 0, $end = CaseOf.Elements.FCount - 1; $l <= $end; $l++) {
          i = $l;
          SubEl = rtl.getObject(CaseOf.Elements.Get(i));
          if (SubEl.$class.ClassType() === $lt64) {
            CaseSt = SubEl;
            for (var $l1 = 0, $end1 = CaseSt.Expressions.FCount - 1; $l1 <= $end1; $l1++) {
              j = $l1;
              this.UseExpr(rtl.as(rtl.getObject(CaseSt.Expressions.Get(j)),$lt30));
            };
            this.UseImplElement(CaseSt.Body);
          } else if (SubEl.$class.ClassType() === $lt65) {
            this.UseImplBlock(SubEl,false)}
           else this.RaiseNotSupported(20170307195329,SubEl,"");
        };
      } else if (C === $lt66) {
        ForLoop = El;
        this.UseExpr(ForLoop.VariableName);
        this.UseExpr(ForLoop.StartExpr);
        this.UseExpr(ForLoop.EndExpr);
        ForScope = rtl.as(ForLoop.FData,$lt67);
        if (ForScope !== null) {
          this.MarkImplScopeRef(ForLoop,ForScope.GetEnumerator,1);
          this.UseProcedure(ForScope.GetEnumerator);
          this.MarkImplScopeRef(ForLoop,ForScope.MoveNext,1);
          this.UseProcedure(ForScope.MoveNext);
          this.MarkImplScopeRef(ForLoop,ForScope.Current,1);
          this.UseVariable(ForScope.Current,1,false);
        };
        this.UseImplElement(ForLoop.Body);
      } else if (C === $lt68) {
        this.UseExpr(El.ConditionExpr);
        this.UseImplElement(El.IfBranch);
        this.UseImplElement(El.ElseBranch);
      } else if (C === $lt69) {}
      else if (C === $lt70) {}
      else if (C === $lt71) {
        this.UseImplBlock(El,false);
        this.UseExpr(El.ConditionExpr);
      } else if (C === $lt72) {
        this.UseExpr(El.ConditionExpr);
        this.UseImplElement(El.Body);
      } else if (C === $lt73) {
        WithDo = El;
        for (var $l2 = 0, $end2 = WithDo.Expressions.FCount - 1; $l2 <= $end2; $l2++) {
          i = $l2;
          this.UseExpr(rtl.as(rtl.getObject(WithDo.Expressions.Get(i)),$lt30));
        };
        this.UseImplElement(WithDo.Body);
      } else if (C === $lt74) {
        this.UseElType(El,El.TypeEl,0);
        this.UseImplElement(El.Body);
      } else if (C === $lt75) {
        if (El.ExceptObject !== null) {
          this.UseExpr(El.ExceptObject)}
         else {
          ParentEl = El.FParent;
          while (ParentEl !== null) {
            if ($lt74.isPrototypeOf(ParentEl)) {
              this.UseVariable(ParentEl.VarEl,1,false);
              break;
            };
            ParentEl = ParentEl.FParent;
          };
        };
        this.UseExpr(El.ExceptAddr);
      } else if (C === $lt76) {
        this.UseImplBlock(El,false);
        this.UseImplBlock(El.FinallyExcept,false);
        this.UseImplBlock(El.ElseBranch,false);
      } else this.RaiseNotSupported(20170307162715,El,"");
    };
    this.UseExpr = function (El) {
      var $Self = this;
      function UseSystemExit() {
        var Params = [];
        var SubEl = null;
        var Proc = null;
        var ProcScope = null;
        var ParentParams = $lt77.$new();
        $Self.FResolver.GetParamsOfNameExpr(El,ParentParams);
        if (ParentParams.Params === null) return;
        Params = ParentParams.Params.Params;
        if (rtl.length(Params) < 1) return;
        SubEl = El.FParent;
        while ((SubEl !== null) && !$lt17.isPrototypeOf(SubEl)) SubEl = SubEl.FParent;
        if (SubEl === null) return;
        Proc = SubEl;
        if (!$lt48.isPrototypeOf(Proc.ProcType)) $Self.RaiseNotSupported(20190825203504,El,"");
        ProcScope = rtl.as(Proc.FData,$lt22);
        if (ProcScope.DeclarationProc !== null) Proc = ProcScope.DeclarationProc;
        SubEl = Proc.ProcType.ResultEl;
        $Self.UseElement(SubEl,2,false);
      };
      function UseBuiltInFuncTypeInfo() {
        var ParentParams = $lt77.$new();
        var ParamResolved = $lt35.$new();
        var SubEl = null;
        var Params = [];
        var ProcScope = null;
        var Proc = null;
        $Self.FResolver.GetParamsOfNameExpr(El,ParentParams);
        if (ParentParams.Params === null) $Self.RaiseNotSupported(20190225150136,El,"");
        Params = ParentParams.Params.Params;
        if (rtl.length(Params) !== 1) $Self.RaiseNotSupported(20180226144217,El.FParent,"");
        $Self.FResolver.ComputeElement(Params[0],ParamResolved,rtl.createSet(1),null);
        if (ParamResolved.IdentEl === null) $Self.RaiseNotSupported(20180628155107,Params[0],"");
        if ($lt17.isPrototypeOf(ParamResolved.IdentEl) && $lt48.isPrototypeOf(ParamResolved.IdentEl.ProcType)) {
          Proc = ParamResolved.IdentEl;
          ProcScope = rtl.as(Proc.FData,$lt22);
          if (ProcScope.DeclarationProc !== null) Proc = ProcScope.DeclarationProc;
          SubEl = Proc.ProcType.ResultEl.ResultType;
          $Self.MarkImplScopeRef(El,SubEl,5);
          $Self.UseTypeInfo(SubEl);
        } else {
          SubEl = ParamResolved.IdentEl;
          $Self.MarkImplScopeRef(El,SubEl,5);
          $Self.UseTypeInfo(SubEl);
        };
      };
      var Ref = null;
      var C = null;
      var Params = [];
      var i = 0;
      var BuiltInProc = null;
      var Decl = null;
      var ModScope = null;
      var Access = 0;
      var Bin = null;
      var Left = null;
      if (El === null) return;
      Ref = null;
      if ($lt78.isPrototypeOf(El.FData)) {
        Ref = El.FData;
        Decl = Ref.FDeclaration;
        Access = Ref.Access;
        this.MarkImplScopeRef(El,Decl,$lm.ResolvedToPSRefAccess[Access]);
        this.UseElement(Decl,Access,false);
        if (Ref.Context !== null) {
          if (Ref.Context.$class.ClassType() === $lt79) this.UseProcedure(Ref.Context.Proc);
        };
        if (this.FResolver.IsNameExpr(El)) {
          if (Ref.WithExprScope !== null) {
            if ($lt80.isPrototypeOf(Ref.WithExprScope.ClassRecScope)) {
              this.UseExprRef(El,Ref.WithExprScope.Expr,Access,false);
              return;
            };
          };
          if ($lt26.isPrototypeOf(Decl) && $lt81.isPrototypeOf(El.FParent) && (El.FParent.Right === El)) {
            if ($lt46.isPrototypeOf(Decl.FParent) || $lt82.isPrototypeOf(Decl.FParent)) {
              this.UseExprRef(El.FParent,El.FParent.Left,Access,false);
            };
          };
        };
        if (7 in Ref.Flags) this.UseRecordFields(El);
        if ($lt20.isPrototypeOf(Decl)) {
          if ($lt83.isPrototypeOf(Decl.FData)) {
            BuiltInProc = Decl.FData;
            var $tmp = BuiltInProc.BuiltIn;
            if ($tmp === 7) {
              UseSystemExit();
              return;
            } else if ($tmp === 28) {
              UseBuiltInFuncTypeInfo();
              return;
            } else if ($tmp === 30) {
              ModScope = rtl.as(this.FResolver.FRootElement.FData,$lt55);
              if (ModScope.FAssertClass !== null) this.UseElType(El,ModScope.FAssertClass,0);
            };
          };
        };
      };
      this.UseExpr(El.Format1);
      this.UseExpr(El.Format2);
      C = El.$class.ClassType();
      if ((C === $lt84) || (C === $lt85) || (C === $lt86)) {}
      else if (C === $lt81) {
        Bin = El;
        if (Bin.OpCode === 1) {
          Left = Bin;
          while (Left.$class.ClassType() === $lt81) {
            Bin = Left;
            if (Bin.OpCode !== 1) break;
            Left = Bin.Left;
          };
          this.UseExpr(Left);
          do {
            Bin = Left.FParent;
            this.UseExpr(Bin.Right);
            Left = Bin;
          } while (!(Left === El));
        } else {
          this.UseExpr(Bin.Left);
          this.UseExpr(Bin.Right);
        };
      } else if (C === $lt87) {
        this.UseExpr(El.Operand)}
       else if (C === $lt88) {
        this.UseExpr(El.Value);
        Params = El.Params;
        for (var $l = 0, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
          i = $l;
          this.UseExpr(Params[i]);
        };
      } else if (C === $lt89) {
        Params = El.Values;
        for (var $l1 = 0, $end1 = rtl.length(Params) - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          this.UseExpr(Params[i]);
        };
      } else if (C === $lt90) {
        for (var $l2 = 0, $end2 = rtl.length(El.Fields) - 1; $l2 <= $end2; $l2++) {
          i = $l2;
          this.UseExpr(El.Fields[i].ValueExp);
        };
      } else if (C === $lt91) {
        this.UseInheritedExpr(El)}
       else if (C === $lt92) {
        this.UseProcedure(El.Proc)}
       else if (C === $lt93) {
        this.UseInlineSpecializeExpr(El)}
       else this.RaiseNotSupported(20170307085444,El,"");
    };
    this.UseExprRef = function (El, Expr, Access, UseFull) {
      var Ref = null;
      var C = null;
      var Bin = null;
      var Params = null;
      var ValueResolved = $lt35.$new();
      var Unary = null;
      C = Expr.$class.ClassType();
      if (C === $lt81) {
        Bin = Expr;
        if (Bin.OpCode in rtl.createSet(27,0)) this.UseExprRef(El,Bin.Right,Access,UseFull);
      } else if (C === $lt88) {
        Params = Expr;
        var $tmp = Params.Kind;
        if ($tmp === 10) {
          if (this.FResolver.IsTypeCast(Params)) {
            this.UseExprRef(El,Params.Params[0],Access,UseFull)}
           else this.UseExprRef(El,Params.Value,Access,UseFull)}
         else if ($tmp === 11) {
          this.FResolver.ComputeElement(Params.Value,ValueResolved,{},null);
          if (!this.FResolver.IsDynArray(ValueResolved.LoTypeEl,true)) this.UseExprRef(El,Params.Value,Access,UseFull);
        } else if ($tmp === 4) {}
        else {
          this.RaiseNotSupported(20170403173817,Params,"");
        };
      } else if ((C === $lt84) && (Expr.Kind === 0)) {
        if ($lt78.isPrototypeOf(Expr.FData)) {
          Ref = Expr.FData;
          this.MarkImplScopeRef(El,Ref.FDeclaration,$lm.ResolvedToPSRefAccess[Access]);
          this.UseElement(Ref.FDeclaration,Access,UseFull);
        };
      } else if (C === $lt87) {
        Unary = Expr;
        if (Unary.OpCode in rtl.createSet(1,2,24,25,26)) {
          this.UseExprRef(El,Unary.Operand,1,false)}
         else this.RaiseNotSupported(20181015193334,Expr,$lm4.OpcodeStrings[Unary.OpCode]);
      } else if (C === $lt93) {
        this.UseExprRef(El,Expr.NameExpr,Access,UseFull)}
       else if ((Access === 1) && ((C === $lt84) || (C === $lt86) || (C === $lt85) || (C === $lt87))) {}
      else {
        this.RaiseNotSupported(20170306102159,Expr,"");
      };
    };
    this.UseInheritedExpr = function (El) {
      var P = null;
      var ProcScope = null;
      var Proc = null;
      var Args = null;
      var i = 0;
      var Arg = null;
      if ((El.FParent.$class.ClassType() === $lt81) && (El.FParent.OpCode === 0)) return;
      P = El.FParent;
      while (!P.$class.InheritsFrom($lt17)) P = P.FParent;
      ProcScope = rtl.as(P.FData,$lt22);
      if (ProcScope.DeclarationProc !== null) {
        Proc = ProcScope.DeclarationProc}
       else Proc = P;
      Args = Proc.ProcType.Args;
      for (var $l = 0, $end = Args.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Arg = rtl.getObject(Args.Get(i));
        var $tmp = Arg.Access;
        if (($tmp === 0) || ($tmp === 1) || ($tmp === 4)) {
          this.UseArgument(Arg,1)}
         else if ($tmp === 2) {
          this.UseArgument(Arg,4)}
         else if ($tmp === 3) {
          this.UseArgument(Arg,5)}
         else {
          this.RaiseNotSupported(20171107175406,Arg,"");
        };
      };
    };
    this.UseInlineSpecializeExpr = function (El) {
      var i = 0;
      for (var $l = 0, $end = El.Params.FCount - 1; $l <= $end; $l++) {
        i = $l;
        this.UseType(rtl.getObject(El.Params.Get(i)),0);
      };
      this.UseExpr(El.NameExpr);
    };
    this.UseScopeReferences = function (Refs) {
      if (Refs === null) return;
      Refs.References.ForEachCall(rtl.createCallback(this,"OnUseScopeRef"),Refs.FScope);
    };
    this.UseProcedure = function (Proc) {
      var $Self = this;
      function UseOverrides(CurProc) {
        var OverrideList = null;
        var i = 0;
        var OverrideProc = null;
        OverrideList = $Self.FOverrideLists.FindKey(CurProc);
        if (OverrideList === null) return;
        i = 0;
        while (i < OverrideList.Count()) {
          OverrideProc = rtl.as(OverrideList.GetOverrides(i),$lt17);
          $Self.UseProcedure(OverrideProc);
          i += 1;
        };
      };
      var ProcScope = null;
      var ImplProc = null;
      var ClassScope = null;
      var Name = "";
      var Identifier = null;
      var El = null;
      var ClassEl = null;
      if (Proc === null) return;
      ProcScope = rtl.as(Proc.FData,$lt22);
      if (ProcScope.DeclarationProc !== null) return;
      if (this.CanSkipGenericProc(Proc)) return;
      if (!this.MarkElementAsUsed(Proc,null)) return;
      if ($lt52.isPrototypeOf(Proc.FParent)) this.UseClassOrRecType(Proc.FParent,0);
      this.UseProcedureType(Proc.ProcType);
      this.UseScopeReferences(ProcScope.References);
      ImplProc = Proc;
      if (ProcScope.ImplProc !== null) ImplProc = ProcScope.ImplProc;
      if (ImplProc.Body !== null) this.UseImplBlock(ImplProc.Body.Body,false);
      if (Proc.IsOverride() && (ProcScope.OverriddenProc !== null)) this.AddOverride(ProcScope.OverriddenProc,Proc);
      if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,0),Proc.FModifiers),{}) || ((Proc.FParent.$class.ClassType() === $lt16) && (Proc.FParent.ObjKind === 2))) UseOverrides(Proc);
      if ($lt16.isPrototypeOf(Proc.FParent)) {
        ClassScope = Proc.FParent.FData;
        ClassEl = ClassScope.FElement;
        if ((ClassEl.ObjKind === 2) && this.IsTypeInfoUsed(ClassEl)) this.UseTypeInfo(Proc);
        if ((Proc.$class.ClassType() === $lt94) || (Proc.$class.ClassType() === $lt95)) {
          if (ClassScope.AncestorScope === null) {
            if (Proc.$class.ClassType() === $lt94) {
              Name = "AfterConstruction"}
             else Name = "BeforeDestruction";
            Identifier = ClassScope.FindLocalIdentifier(Name);
            while (Identifier !== null) {
              El = Identifier.FElement;
              if ((El.$class.ClassType() === $lt17) && (El.ProcType.Args.FCount === 0)) {
                this.UseProcedure(El);
                break;
              };
              Identifier = Identifier.NextSameIdentifier;
            };
          };
        };
      };
    };
    this.UseProcedureType = function (ProcType) {
      var i = 0;
      var Arg = null;
      if (!this.MarkElementAsUsed(ProcType,null)) return;
      if (this.CanSkipGenericType(ProcType)) this.RaiseNotSupported(20190817151651,ProcType,"");
      for (var $l = 0, $end = ProcType.Args.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Arg = rtl.getObject(ProcType.Args.Get(i));
        this.UseElType(ProcType,Arg.ArgType,0);
        this.UseExpr(Arg.ValueExpr);
      };
      if ($lt48.isPrototypeOf(ProcType)) this.UseElType(ProcType,ProcType.ResultEl.ResultType,0);
    };
    this.UseType = function (El, Mode) {
      var C = null;
      var i = 0;
      var ArrType = null;
      if (El === null) return;
      C = El.$class.ClassType();
      if (Mode === 2) {
        if ((C === $lt46) || (C === $lt16)) this.UseClassOrRecType(El,Mode);
      } else {
        if (C === $lt20) {
          if ($lt96.isPrototypeOf(El.FData) || $lt83.isPrototypeOf(El.FData)) {}
          else this.RaiseNotSupported(20170307101353,El,"");
        } else if ((C === $lt37) || (C === $lt38) || (C === $lt45)) {
          if (!this.MarkElementAsUsed(El,null)) return;
          this.UseElType(El,El.DestType,Mode);
          if (C === $lt38) this.UseExpr(El.Expr);
        } else if (C === $lt42) {
          ArrType = El;
          if (this.CanSkipGenericType(ArrType)) return;
          if (!this.MarkElementAsUsed(ArrType,null)) return;
          for (var $l = 0, $end = rtl.length(ArrType.Ranges) - 1; $l <= $end; $l++) {
            i = $l;
            this.UseExpr(ArrType.Ranges[i]);
          };
          this.UseElType(El,ArrType.ElType,Mode);
        } else if ((C === $lt46) || (C === $lt16)) {
          this.UseClassOrRecType(El,Mode)}
         else if (C === $lt39) {
          if (!this.MarkElementAsUsed(El,null)) return;
          for (var $l1 = 0, $end1 = El.Values.FCount - 1; $l1 <= $end1; $l1++) {
            i = $l1;
            this.UseElement(rtl.getObject(El.Values.Get(i)),1,false);
          };
        } else if (C === $lt43) {
          if (!this.MarkElementAsUsed(El,null)) return;
          this.UseElType(El,El.DestType,Mode);
        } else if (C === $lt41) {
          if (!this.MarkElementAsUsed(El,null)) return;
          this.UseExpr(El.RangeExpr);
        } else if (C === $lt40) {
          if (!this.MarkElementAsUsed(El,null)) return;
          this.UseElType(El,El.EnumType,Mode);
        } else if (C.InheritsFrom($lt47)) {
          if (this.CanSkipGenericType(El)) return;
          this.UseProcedureType(El);
        } else if (C === $lt49) {
          this.UseSpecializeType(El,Mode)}
         else if (C === $lt51) {}
        else this.RaiseNotSupported(20170306170315,El,"");
        if (Mode === 1) this.UseTypeInfo(El);
      };
    };
    this.UseClassOrRecType = function (El, Mode) {
      var $Self = this;
      function UseDelegations() {
        var OverrideList = null;
        var i = 0;
        var Prop = null;
        OverrideList = $Self.FOverrideLists.FindKey(El);
        if (OverrideList === null) return;
        i = 0;
        while (i < OverrideList.Count()) {
          Prop = rtl.as(OverrideList.GetOverrides(i),$lt14);
          $Self.UseVariable(Prop,1,false);
          i += 1;
        };
      };
      function MarkAllInterfaceImplementations(Scope) {
        var i = 0;
        var j = 0;
        var o = null;
        var map = null;
        if (Scope.Interfaces === null) return;
        for (var $l = 0, $end = Scope.Interfaces.FCount - 1; $l <= $end; $l++) {
          i = $l;
          o = rtl.getObject(Scope.Interfaces.Get(i));
          if ($lt14.isPrototypeOf(o)) {
            $Self.UseVariable(o,1,false)}
           else if ($lt97.isPrototypeOf(o)) {
            map = o;
            do {
              if (map.Intf !== null) $Self.UseClassOrRecType(map.Intf,0);
              if (map.Procs !== null) for (var $l1 = 0, $end1 = map.Procs.FCount - 1; $l1 <= $end1; $l1++) {
                j = $l1;
                $Self.UseProcedure(rtl.getObject(map.Procs.Get(j)));
              };
              map = map.AncestorMap;
            } while (!(map === null));
          } else $Self.RaiseNotSupported(20180405190114,El,$lp4(o));
        };
      };
      var i = 0;
      var Member = null;
      var AllPublished = false;
      var FirstTime = false;
      var IsCOMInterfaceRoot = false;
      var ProcScope = null;
      var ClassScope = null;
      var Ref = null;
      var j = 0;
      var List = null;
      var ProcList = null;
      var o = null;
      var map = null;
      var ImplProc = null;
      var IntfProc = null;
      var Proc = null;
      var aClass = null;
      var C = null;
      FirstTime = true;
      var $tmp = Mode;
      if ($tmp === 2) {
        return}
       else if ($tmp === 1) {
        if (this.CanSkipGenericType(El)) return;
        if (this.MarkElementAsUsed(El,null)) {
          this.ElementVisited(El,Mode)}
         else {
          if (this.ElementVisited(El,Mode)) return;
          FirstTime = false;
        };
      } else if ($tmp === 0) {
        if (this.CanSkipGenericType(El)) return;
        if (!this.MarkElementAsUsed(El,null)) return;
      } else {
        this.RaiseInconsistency(20170414152143,$lp2(Mode));
      };
      if ((this.FScopeModule !== null) && (this.FScopeModule !== El.GetModule())) return;
      aClass = null;
      ClassScope = null;
      IsCOMInterfaceRoot = false;
      if (El.$class.ClassType() === $lt16) {
        aClass = El;
        if (aClass.IsForward) {
          Ref = rtl.as(aClass.FData,$lt78);
          this.UseClassOrRecType(rtl.as(Ref.FDeclaration,$lt16),Mode);
          return;
        };
        ClassScope = rtl.as(aClass.FData,$lt98);
        if (FirstTime) {
          this.UseElType(El,ClassScope.DirectAncestor,0);
          this.UseElType(El,aClass.HelperForType,0);
          this.UseExpr(aClass.GUIDExpr);
          if (aClass.ObjKind === 2) {
            UseDelegations();
            if ((aClass.InterfaceType === 0) && (aClass.AncestorType === null)) IsCOMInterfaceRoot = true;
          };
          if ((aClass.ObjKind === 1) && (this.FScopeModule !== null) && (ClassScope.Interfaces !== null)) MarkAllInterfaceImplementations(ClassScope);
        };
      } else if ($lt46.isPrototypeOf(El)) {
        if ((Mode !== 1) && this.FResolver.IsTGUID(El)) for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Member = rtl.getObject(El.Members.Get(i));
          if ($lt26.isPrototypeOf(Member)) this.UseVariable(Member,0,true);
        };
      } else this.RaiseNotSupported(20181229103139,El,"");
      AllPublished = Mode !== 2;
      for (var $l1 = 0, $end1 = El.Members.FCount - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        Member = rtl.getObject(El.Members.Get(i));
        C = Member.$class.ClassType();
        if (FirstTime && C.InheritsFrom($lt17)) {
          Proc = Member;
          ProcScope = rtl.as(Member.FData,$lt22);
          if ((this.FScopeModule === null) && !this.FResolver.IsFullySpecialized$1(Proc)) continue;
          if (Proc.IsOverride() && (ProcScope.OverriddenProc !== null)) {
            this.AddOverride(ProcScope.OverriddenProc,Member);
            if (this.FScopeModule !== null) {
              this.UseProcedure(Proc);
              continue;
            };
          } else if ((Proc.$class.ClassType() === $lt99) || (Proc.$class.ClassType() === $lt100)) {
            this.UseProcedure(Proc);
            continue;
          };
          if (IsCOMInterfaceRoot) {
            var $tmp1 = $lp5(Member.FName);
            if ($tmp1 === "queryinterface") {
              if (Proc.ProcType.Args.FCount === 2) {
                this.UseProcedure(Proc);
                continue;
              }}
             else if ($tmp1 === "_addref") {
              if (Proc.ProcType.Args.FCount === 0) {
                this.UseProcedure(Proc);
                continue;
              }}
             else if ($tmp1 === "_release") if (Proc.ProcType.Args.FCount === 0) {
              this.UseProcedure(Proc);
              continue;
            };
          };
          if (Proc.MessageExpr !== null) {
            this.UseProcedure(Proc);
            continue;
          };
        } else if (C === $lt44) continue;
        if (AllPublished && ((Member.Visibility === 4) || El.HasExtRTTI(Member))) {
          if (!FirstTime) continue;
          if ($lt24.isPrototypeOf(Member)) {
            if (!this.FResolver.IsFullySpecialized(Member)) continue;
          };
          this.UseTypeInfo(Member);
        } else if (Mode === 0) {
          continue}
         else if (Member.Visibility in rtl.createSet(1,6)) {
          continue}
         else if ((Member.Visibility in rtl.createSet(2,7)) && this.IsModuleInternal(El)) {
          continue}
         else if (Mode === 1) {
          if (C === $lt14) {
            this.UseTypeInfo(Member);
          } else if (C.InheritsFrom($lt15)) {
            this.UseType(Member,Mode);
          };
        };
        this.UseElement(Member,0,true);
      };
      if (FirstTime && (ClassScope !== null)) {
        List = ClassScope.Interfaces;
        if (List !== null) for (var $l2 = 0, $end2 = List.FCount - 1; $l2 <= $end2; $l2++) {
          i = $l2;
          o = rtl.getObject(List.Get(i));
          if ($lt14.isPrototypeOf(o)) {
            this.AddOverride(rtl.getObject(aClass.Interfaces.Get(i)),o);
          } else if ($lt97.isPrototypeOf(o)) {
            map = o;
            while (map !== null) {
              ProcList = map.Procs;
              if (ProcList !== null) for (var $l3 = 0, $end3 = ProcList.FCount - 1; $l3 <= $end3; $l3++) {
                j = $l3;
                ImplProc = rtl.getObject(ProcList.Get(j));
                if (ImplProc === null) continue;
                IntfProc = rtl.as(rtl.getObject(map.Intf.Members.Get(j)),$lt17);
                this.AddOverride(IntfProc,ImplProc);
              };
              map = map.AncestorMap;
            };
          } else this.RaiseNotSupported(20180328224632,aClass,$lp4(o));
        };
      };
      if (this.UseAttributes(El) && (El.$class.ClassType() === $lt16)) this.UseTypeInfo(El);
    };
    this.UseSpecializeType = function (El, Mode) {
      var Param = null;
      var i = 0;
      if (!this.MarkElementAsUsed(El,null)) return;
      if ($lt50.isPrototypeOf(El.FData)) this.UseElType(El,El.FData.SpecializedType,Mode);
      for (var $l = 0, $end = El.Params.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Param = rtl.getObject(El.Params.Get(i));
        if ($lt51.isPrototypeOf(Param)) continue;
        this.UseElement(Param,1,false);
      };
      this.UseElType(El,El.SubType,Mode);
    };
    this.UseVariable = function (El, Access, UseFull) {
      var $Self = this;
      var Usage = null;
      var UseRead = false;
      var UseWrite = false;
      function UpdateVarAccess(IsRead, IsWrite) {
        if (IsRead) {
          var $tmp = Usage.Access;
          if ($tmp === 0) {
            Usage.Access = 1;
            UseRead = true;
          } else if ($tmp === 1) {}
          else if ($tmp === 2) {
            Usage.Access = 4;
            UseRead = true;
          } else if ($tmp === 3) {}
          else if ($tmp === 4) {}
          else {
            $Self.RaiseInconsistency(20170311182420,"");
          };
        };
        if (IsWrite) {
          var $tmp1 = Usage.Access;
          if ($tmp1 === 0) {
            Usage.Access = 2;
            UseWrite = true;
          } else if ($tmp1 === 1) {
            Usage.Access = 3;
            UseWrite = true;
          } else if ($tmp1 === 2) {}
          else if ($tmp1 === 3) {}
          else if ($tmp1 === 4) {}
          else {
            $Self.RaiseInconsistency(20170311182536,"");
          };
        };
      };
      var Prop = null;
      var i = 0;
      var IsRead = false;
      var IsWrite = false;
      var CanRead = false;
      var CanWrite = false;
      var ClassEl = null;
      if (El === null) return;
      if (El.$class.ClassType() === $lt14) {
        Prop = El;
        if ($lt16.isPrototypeOf(Prop.FParent)) {
          ClassEl = Prop.FParent;
          if ((ClassEl.ObjKind === 2) && this.IsTypeInfoUsed(ClassEl)) {
            UseFull = true;
            this.UseTypeInfo(Prop);
          };
        };
      } else Prop = null;
      IsRead = false;
      IsWrite = false;
      if (UseFull) if (Prop !== null) {
        CanRead = this.FResolver.GetPasPropertyGetter(Prop) !== null;
        CanWrite = this.FResolver.GetPasPropertySetter(Prop) !== null;
        if (CanRead) {
          if (CanWrite) {
            Access = 3}
           else Access = 1;
        } else if (CanWrite) {
          Access = 2}
         else Access = 0;
      } else Access = 1;
      var $tmp = Access;
      if ($tmp === 0) {}
      else if ($tmp === 1) {
        IsRead = true}
       else if ($tmp === 2) {
        IsWrite = true}
       else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
        IsRead = true;
        IsWrite = true;
      } else if ($tmp === 6) {
        this.RaiseInconsistency(20170307153439,"")}
       else {
        this.RaiseInconsistency(20170308120949,"");
      };
      UseRead = false;
      UseWrite = false;
      if (this.MarkElementAsUsed(El,null)) {
        Usage = this.FindElement(El);
        if (El.Expr !== null) Usage.Access = 2;
        UpdateVarAccess(IsRead,IsWrite);
        this.UseElType(El,El.VarType,0);
        this.UseExpr(El.Expr);
        this.UseExpr(El.LibraryName);
        this.UseExpr(El.ExportName);
        this.UseExpr(El.AbsoluteExpr);
        if (Prop !== null) {
          for (var $l = 0, $end = Prop.FArgs.FCount - 1; $l <= $end; $l++) {
            i = $l;
            this.UseElType(Prop,rtl.getObject(Prop.FArgs.Get(i)).ArgType,0);
          };
          this.UseExpr(Prop.IndexExpr);
        };
      } else {
        if ((this.FScopeModule !== null) && (this.FScopeModule !== El.GetModule())) return;
        Usage = this.FindElement(El);
        if (Usage === null) return;
        UpdateVarAccess(IsRead,IsWrite);
      };
      if (Prop !== null) {
        if (UseRead) this.UseElement(this.FResolver.GetPasPropertyGetter(Prop),1,false);
        if (UseWrite) this.UseElement(this.FResolver.GetPasPropertySetter(Prop),2,false);
      };
    };
    this.UseResourcestring = function (El) {
      if (!this.MarkElementAsUsed(El,null)) return;
      this.UseExpr(El.Expr);
    };
    this.UseExportSymbol = function (El) {
      var Ref = null;
      var Decl = null;
      var ProcType = null;
      var aType = null;
      if (!this.MarkElementAsUsed(El,null)) return;
      if ($lt78.isPrototypeOf(El.FData)) {
        Ref = El.FData;
        Decl = Ref.FDeclaration;
        if (Decl !== null) {
          this.UseElement(Decl,Ref.Access,true);
          if ($lt17.isPrototypeOf(Decl)) {
            ProcType = Decl.ProcType;
            if ($lt48.isPrototypeOf(ProcType)) {
              aType = ProcType.ResultEl.ResultType;
              this.UseType(aType,1);
            };
          } else if ($lt26.isPrototypeOf(Decl)) {
            aType = Decl.VarType;
            this.UseType(aType,1);
          };
        };
      };
      this.UseExpr(El.NameExpr);
      this.UseExpr(El.ExportName);
      this.UseExpr(El.ExportIndex);
    };
    this.UseArgument = function (El, Access) {
      var Usage = null;
      var IsRead = false;
      var IsWrite = false;
      IsRead = false;
      IsWrite = false;
      var $tmp = Access;
      if ($tmp === 0) {}
      else if ($tmp === 1) {
        IsRead = true}
       else if ($tmp === 2) {
        IsWrite = true}
       else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
        IsRead = true;
        IsWrite = true;
      } else if ($tmp === 6) {
        this.RaiseInconsistency(20170308121031,"")}
       else {
        this.RaiseInconsistency(20170308121037,"");
      };
      if (this.MarkElementAsUsed(El,null)) {
        Usage = this.FindElement(El);
      } else {
        if ((this.FScopeModule !== null) && (this.FScopeModule !== El.GetModule())) return;
        Usage = this.FindElement(El);
        if (Usage === null) this.RaiseNotSupported(20170308121928,El,"");
      };
      this.UpdateAccess(IsWrite,IsRead,Usage);
    };
    this.UseResultElement = function (El, Access) {
      var IsRead = false;
      var IsWrite = false;
      var Usage = null;
      IsRead = false;
      IsWrite = false;
      var $tmp = Access;
      if ($tmp === 0) {}
      else if ($tmp === 1) {
        IsRead = true}
       else if ($tmp === 2) {
        IsWrite = true}
       else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
        IsRead = true;
        IsWrite = true;
      } else if ($tmp === 6) {
        this.RaiseInconsistency(20170308122319,"")}
       else {
        this.RaiseInconsistency(20170308122324,"");
      };
      if (this.MarkElementAsUsed(El,null)) {
        Usage = this.FindElement(El);
      } else {
        if ((this.FScopeModule !== null) && (this.FScopeModule !== El.GetModule())) return;
        Usage = this.FindElement(El);
        if (Usage === null) this.RaiseNotSupported(20170308122333,El,"");
      };
      this.UpdateAccess(IsWrite,IsRead,Usage);
    };
    this.UseRecordFields = function (El) {
      var $Self = this;
      function UseVar(V) {
        var ResolvedEl = $lt35.$new();
        $Self.UseElement(V,1,false);
        $Self.FResolver.ComputeElement(V.VarType,ResolvedEl,{},V);
        if ($lt46.isPrototypeOf(ResolvedEl.LoTypeEl)) UseRec(ResolvedEl.LoTypeEl);
      };
      function UseRec(Rec) {
        var Members = null;
        var i = 0;
        var Member = null;
        var C = null;
        var Variant = null;
        Members = Rec.Members;
        for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Member = rtl.getObject(Members.Get(i));
          C = Member.$class.ClassType();
          if (C === $lt26) UseVar(Member);
        };
        if ($lt26.isPrototypeOf(Rec.VariantEl)) UseVar(Rec.VariantEl);
        if (Rec.Variants !== null) for (var $l1 = 0, $end1 = Rec.Variants.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          Variant = rtl.getObject(Rec.Variants.Get(i));
          UseRec(Variant.Members);
        };
      };
      var ResolvedEl = $lt35.$new();
      this.FResolver.ComputeElement(El,ResolvedEl,{},null);
      if ($lt46.isPrototypeOf(ResolvedEl.LoTypeEl)) UseRec(ResolvedEl.LoTypeEl);
    };
    this.EmitElementHints = function (El) {
      var C = null;
      if (El === null) return;
      C = El.$class.ClassType();
      if (C.InheritsFrom($lt26)) {
        this.EmitVariableHints(El)}
       else if (C.InheritsFrom($lt15)) {
        this.EmitTypeHints(El)}
       else if (C.InheritsFrom($lt17)) {
        this.EmitProcedureHints(El)}
       else if (C === $lt32) {}
      else this.RaiseInconsistency(20170312093126,"");
    };
    this.EmitSectionHints = function (Section) {
      var i = 0;
      var UsedModule = null;
      var aModule = null;
      var UsesClause = [];
      var Use = null;
      var PosEl = null;
      if (Section === null) return;
      aModule = Section.GetModule();
      UsesClause = Section.UsesClause;
      for (var $l = 0, $end = rtl.length(UsesClause) - 1; $l <= $end; $l++) {
        i = $l;
        Use = UsesClause[i];
        if ($lt33.isPrototypeOf(Use.Module)) {
          UsedModule = Use.Module;
          if ($lp6(UsedModule.FName,"system") === 0) continue;
          if (!this.PAElementExists(UsedModule)) {
            PosEl = Use.Expr;
            if (PosEl === null) PosEl = Use;
            this.EmitMessage(20170311191725,4,5023,$mod.sPAUnitNotUsed,$lp7(18,UsedModule.FName,18,aModule.FName),PosEl);
          };
        };
      };
      this.EmitDeclarationsHints(Section);
    };
    this.EmitDeclarationsHints = function (El) {
      var i = 0;
      var Decl = null;
      var Usage = null;
      for (var $l = 0, $end = El.Declarations.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Decl = rtl.getObject(El.Declarations.Get(i));
        if ($lt26.isPrototypeOf(Decl)) {
          this.EmitVariableHints(Decl)}
         else if ($lt15.isPrototypeOf(Decl)) {
          this.EmitTypeHints(Decl)}
         else if ($lt17.isPrototypeOf(Decl)) {
          this.EmitProcedureHints(Decl)}
         else if (Decl.$class.ClassType() === $lt44) {}
        else {
          Usage = this.FindElement(Decl);
          if (Usage === null) {
            if (this.IsSpecializedGenericType(Decl)) continue;
            this.EmitMessage(20170311231734,4,5028,$mod.sPALocalXYNotUsed,$lp7(18,Decl.ElementTypeName(),18,Decl.FName),Decl);
          };
        };
      };
    };
    this.EmitTypeHints = function (El) {
      var $Self = this;
      function IsRightStr(s, right) {
        var Result = false;
        Result = (right !== "") && ($lp8(s,right.length) === right);
        return Result;
      };
      var C = null;
      var Usage = null;
      var i = 0;
      var Member = null;
      var SpecEl = null;
      var Members = null;
      var GenScope = null;
      var SpecializedItems = null;
      Usage = this.FindElement(El);
      if (Usage === null) {
        if (this.IsSpecializedGenericType(El)) return;
        if ($lt25.isPrototypeOf(El.FData)) {
          GenScope = El.FData;
          SpecializedItems = GenScope.SpecializedItems;
          if (SpecializedItems !== null) for (var $l = 0, $end = SpecializedItems.GetCount() - 1; $l <= $end; $l++) {
            i = $l;
            SpecEl = SpecializedItems.GetItem(i).FSpecializedEl;
            if (this.FindElement(SpecEl) !== null) return;
          };
        };
        if (IsRightStr(El.FName,this.FResolver.FAnonymousElTypePostfix)) return;
        if (El.Visibility in rtl.createSet(1,6)) {
          this.EmitMessage(20170312000020,4,5071,$mod.sPAPrivateTypeXNeverUsed,$lp7(18,El.FullName()),El)}
         else {
          if ($lt16.isPrototypeOf(El) && (El.ObjKind === 2)) return;
          this.EmitMessage(20170312000025,4,5028,$mod.sPALocalXYNotUsed,$lp7(18,El.ElementTypeName(),18,$lp9(El,3)),El);
        };
        return;
      };
      Members = null;
      C = El.$class.ClassType();
      if (C === $lt46) {
        Members = El.Members}
       else if (C === $lt16) {
        if (El.IsForward) return;
        Members = El.Members;
      };
      if (Members !== null) for (var $l1 = 0, $end1 = Members.FCount - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        Member = rtl.getObject(Members.Get(i));
        if (Member.$class.ClassType() === $lt44) continue;
        this.EmitElementHints(Member);
      };
    };
    this.EmitVariableHints = function (El) {
      var Usage = null;
      Usage = this.FindElement(El);
      if (Usage === null) {
        if (El.Visibility in rtl.createSet(1,6)) {
          if (El.$class.ClassType() === $lt36) {
            this.EmitMessage(20170311234602,4,5072,$mod.sPAPrivateConstXNeverUsed,$lp7(18,El.FullName()),El)}
           else if (El.$class.ClassType() === $lt14) {
            this.EmitMessage(20170311234634,4,5073,$mod.sPAPrivatePropertyXNeverUsed,$lp7(18,El.FullName()),El)}
           else this.EmitMessage(20170311231412,4,5029,$mod.sPAPrivateFieldIsNeverUsed,$lp7(18,El.FullName()),El);
        } else if (El.$class.ClassType() === $lt26) {
          if ($lt52.isPrototypeOf(El.FParent)) {
            this.EmitMessage(20201229033108,4,4502,$mod.sPAFieldNotUsed,$lp7(18,El.FName),El)}
           else this.EmitMessage(20170311234201,4,5025,$mod.sPALocalVariableNotUsed,$lp7(18,El.FName),El);
        } else this.EmitMessage(20170314221334,4,5028,$mod.sPALocalXYNotUsed,$lp7(18,El.ElementTypeName(),18,El.FName),El);
      } else if (Usage.Access === 2) {
        if ((1 in El.VarModifiers) || (El.$class.ClassType() === $lt14) || ($lt16.isPrototypeOf(El.FParent) && El.FParent.IsExternal)) return;
        if (El.Visibility in rtl.createSet(1,6)) {
          this.EmitMessage(20170311234159,4,5030,$mod.sPAPrivateFieldIsAssignedButNeverUsed,$lp7(18,El.FullName()),El)}
         else if ($lt52.isPrototypeOf(El.FParent)) {
          this.EmitMessage(20201229033618,4,4503,$mod.sPAFieldIsAssignedButNeverUsed,$lp7(18,El.FName),El)}
         else this.EmitMessage(20170311233825,4,5027,$mod.sPALocalVariableIsAssignedButNeverUsed,$lp7(18,El.FName),El);
      };
    };
    this.EmitProcedureHints = function (El) {
      var Args = null;
      var i = 0;
      var Arg = null;
      var Usage = null;
      var ProcScope = null;
      var DeclProc = null;
      var ImplProc = null;
      var SpecializedItems = null;
      var SpecEl = null;
      ProcScope = rtl.as(El.FData,$lt22);
      if (ProcScope.DeclarationProc === null) {
        DeclProc = El}
       else DeclProc = ProcScope.DeclarationProc;
      if (ProcScope.ImplProc === null) {
        ImplProc = El}
       else ImplProc = ProcScope.ImplProc;
      if ((ProcScope.ClassRecScope !== null) && (ProcScope.ClassRecScope.SpecializedFromItem !== null)) return;
      if (!this.PAElementExists(DeclProc)) {
        if (ProcScope.DeclarationProc !== null) return;
        if (ProcScope.SpecializedFromItem !== null) return;
        SpecializedItems = ProcScope.SpecializedItems;
        if (SpecializedItems !== null) for (var $l = 0, $end = SpecializedItems.GetCount() - 1; $l <= $end; $l++) {
          i = $l;
          SpecEl = SpecializedItems.GetItem(i).FSpecializedEl;
          if (this.FindElement(SpecEl) !== null) return;
        };
        if (El.Visibility in rtl.createSet(1,6)) {
          this.EmitMessage(20170312093348,4,5031,$mod.sPAPrivateMethodIsNeverUsed,$lp7(18,El.FullName()),El)}
         else this.EmitMessage(20170312093418,4,5028,$mod.sPALocalXYNotUsed,$lp7(18,El.ElementTypeName(),18,El.FName),El);
        return;
      };
      if (rtl.neSet(rtl.intersectSet(rtl.createSet(2,9,12),DeclProc.FModifiers),{})) return;
      if (rtl.neSet(rtl.intersectSet(rtl.createSet(9),ImplProc.FModifiers),{})) return;
      if ($lt16.isPrototypeOf(El.FParent)) {
        if (El.FParent.ObjKind === 2) return;
      };
      if (ProcScope.DeclarationProc === null) {
        Args = El.ProcType.Args;
        for (var $l1 = 0, $end1 = Args.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          Arg = rtl.getObject(Args.Get(i));
          Usage = this.FindElement(Arg);
          if ((Usage === null) || (Usage.Access === 0)) {
            if ($lt47.isPrototypeOf(Arg.FParent) && $lt17.isPrototypeOf(Arg.FParent.FParent) && rtl.neSet(rtl.intersectSet(rtl.createSet(0,3),Arg.FParent.FParent.FModifiers),{})) {
              this.EmitMessage(20180625153623,4,4501,$mod.sPAParameterInOverrideNotUsed,$lp7(18,Arg.FName),Arg)}
             else this.EmitMessage(20170312094401,4,5024,$mod.sPAParameterNotUsed,$lp7(18,Arg.FName),Arg);
          } else {
            if ((Usage.Access === 2) && !(Arg.Access in rtl.createSet(3,2))) this.EmitMessage(20170312095348,4,5026,$mod.sPAValueParameterIsAssignedButNeverUsed,$lp7(18,Arg.FName),Arg);
          };
        };
        if ($lt48.isPrototypeOf(El.ProcType)) this.EmitFunctionResultHints(El);
      };
      if (El.Body !== null) {
        this.EmitDeclarationsHints(El.Body);
      };
    };
    this.EmitFunctionResultHints = function (El) {
      var FuncType = null;
      var Usage = null;
      var TypeEl = null;
      var Members = null;
      var i = 0;
      var Member = null;
      var HasFields = false;
      var PosEl = null;
      var ProcScope = null;
      FuncType = El.GetFT();
      Usage = this.FindElement(FuncType.ResultEl);
      if ((Usage === null) || (Usage.Access in rtl.createSet(0,1))) {
        TypeEl = this.FResolver.ResolveAliasType(FuncType.ResultEl.ResultType,true);
        if ($lt46.isPrototypeOf(TypeEl)) {
          Members = TypeEl.Members;
          HasFields = false;
          for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
            i = $l;
            Member = rtl.getObject(Members.Get(i));
            if (Member.$class.ClassType() === $lt26) {
              HasFields = true;
              break;
            };
          };
          if (!HasFields) return;
        };
        PosEl = FuncType.ResultEl;
        ProcScope = rtl.as(El.FData,$lt22);
        if ((ProcScope.ImplProc !== null) && (ProcScope.ImplProc.GetFT().ResultEl !== null)) PosEl = ProcScope.ImplProc.GetFT().ResultEl;
        this.EmitMessage(20170313214038,4,5033,$mod.sPAFunctionResultDoesNotSeemToBeSet,[],PosEl);
      };
    };
    this.Create$1 = function () {
      var m = 0;
      var oc = 0;
      this.CreateTree();
      for (var $l = 0; $l <= 3; $l++) {
        m = $l;
        this.FModeChecked[m] = $mod.CreatePasElementSet();
      };
      for (var $l1 = 0; $l1 <= 0; $l1++) {
        oc = $l1;
        this.FOtherChecked[oc] = $mod.CreatePasElementSet();
      };
      this.FOverrideLists = $lt5.$create("Create$1",[$mod.PAOverrideList_ElToHashName,$mod.PasElementToHashName]);
      return this;
    };
    this.Destroy = function () {
      var m = 0;
      var oc = 0;
      this.Clear();
      $lp({p: this, get: function () {
          return this.p.FOverrideLists;
        }, set: function (v) {
          this.p.FOverrideLists = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FUsedElements;
        }, set: function (v) {
          this.p.FUsedElements = v;
        }});
      for (var $l = 0; $l <= 3; $l++) {
        m = $l;
        $lp({a: m, p: this.FModeChecked, get: function () {
            return this.p[this.a];
          }, set: function (v) {
            this.p[this.a] = v;
          }});
      };
      for (var $l1 = 0; $l1 <= 0; $l1++) {
        oc = $l1;
        $lp({a: oc, p: this.FOtherChecked, get: function () {
            return this.p[this.a];
          }, set: function (v) {
            this.p[this.a] = v;
          }});
      };
      $lt11.Destroy.call(this);
    };
    this.Clear = function () {
      var m = 0;
      var oc = 0;
      this.FOverrideLists.FreeItems();
      this.FUsedElements.FreeItems();
      for (var $l = 0; $l <= 3; $l++) {
        m = $l;
        this.FModeChecked[m].Clear();
      };
      for (var $l1 = 0; $l1 <= 0; $l1++) {
        oc = $l1;
        this.FOtherChecked[oc].Clear();
      };
    };
    this.AnalyzeModule = function (aModule) {
      var Mode = 0;
      if (this.FResolver === null) this.RaiseInconsistency(20170314223032,"TPasAnalyzer.AnalyzeModule missing Resolver");
      if (this.FUsedElements.Count() > 0) this.RaiseInconsistency(20170315153243,"");
      this.FScopeModule = aModule;
      if ($lt53.isPrototypeOf(aModule) || $lt54.isPrototypeOf(aModule)) {
        Mode = 2}
       else Mode = 1;
      this.UseModule(aModule,Mode);
    };
    this.AnalyzeWholeProgram = function (aStartModule) {
      if (this.FResolver === null) this.RaiseInconsistency(20170315153201,"TPasAnalyzer.AnalyzeWholeProgram missing Resolver");
      if (this.FUsedElements.Count() > 0) this.RaiseInconsistency(20170315153252,"");
      this.FScopeModule = null;
      this.UseModule(aStartModule,2);
      this.MarkElementAsUsed(aStartModule,null);
    };
    this.EmitModuleHints = function (aModule) {
      if (aModule.$class.ClassType() === $lt53) {
        this.EmitSectionHints(aModule.ProgramSection)}
       else if (aModule.$class.ClassType() === $lt54) {
        this.EmitSectionHints(aModule.LibrarySection)}
       else {
        this.EmitSectionHints(aModule.InterfaceSection);
        this.EmitSectionHints(aModule.ImplementationSection);
      };
    };
    this.FindElement = function (El) {
      var Result = null;
      Result = this.FUsedElements.FindKey(El);
      return Result;
    };
    this.FindUsedElement = function (El) {
      var Result = null;
      var ProcScope = null;
      if (!this.IsIdentifier(El)) return null;
      if ($lt17.isPrototypeOf(El)) {
        ProcScope = rtl.as(El.FData,$lt22);
        if ((ProcScope !== null) && (ProcScope.DeclarationProc !== null)) El = ProcScope.DeclarationProc;
      };
      Result = this.FindElement(El);
      return Result;
    };
    this.IsUsed = function (El) {
      var Result = false;
      Result = this.FindUsedElement(El) !== null;
      return Result;
    };
    this.IsTypeInfoUsed = function (El) {
      var Result = false;
      Result = this.FModeChecked[3].ContainsItem(El);
      return Result;
    };
    this.IsModuleInternal = function (El) {
      var Result = false;
      var C = null;
      if (El === null) return true;
      C = El.$class.ClassType();
      if (C === $lt21) {
        return false}
       else if (C === $lt101) {
        return true}
       else if ((C === $lt102) || (C === $lt103)) return true;
      if (this.IsExport(El)) return false;
      var $tmp = El.Visibility;
      if (($tmp === 1) || ($tmp === 6)) {
        return true}
       else if ($tmp === 4) return false;
      Result = this.IsModuleInternal(El.FParent);
      return Result;
    };
    this.IsExport = function (El) {
      var Result = false;
      if ($lt26.isPrototypeOf(El)) {
        Result = rtl.neSet(rtl.intersectSet(rtl.createSet(3,2),El.VarModifiers),{})}
       else if ($lt17.isPrototypeOf(El)) {
        Result = rtl.neSet(rtl.intersectSet(rtl.createSet(4,10),El.FModifiers),{})}
       else Result = false;
      return Result;
    };
    this.IsIdentifier = function (El) {
      var Result = false;
      var C = null;
      C = El.$class.ClassType();
      Result = C.InheritsFrom($lt15) || C.InheritsFrom($lt26) || C.InheritsFrom($lt17) || C.InheritsFrom($lt33) || (C === $lt27) || (C === $lt29);
      return Result;
    };
    this.IsImplBlockEmpty = function (El) {
      var Result = false;
      Result = true;
      if ((El === null) || (El.Elements.FCount === 0)) return Result;
      Result = false;
      return Result;
    };
    this.IsSpecializedGenericType = function (El) {
      var Result = false;
      if ($lt24.isPrototypeOf(El) && $lt25.isPrototypeOf(El.FData) && (El.FData.SpecializedFromItem !== null)) return true;
      Result = false;
      return Result;
    };
    this.EmitMessage = function (Id, MsgType, MsgNumber, Fmt, Args, PosEl) {
      var Msg = null;
      var El = null;
      var ProcScope = null;
      var ModScope = null;
      var Scanner = null;
      var State = 0;
      if (MsgType >= 2) {
        El = PosEl;
        while (El !== null) {
          if ($lt17.isPrototypeOf(El)) {
            ProcScope = rtl.as(El.FData,$lt22);
            if (ProcScope.ImplProc !== null) ProcScope = rtl.as(ProcScope.ImplProc.FData,$lt22);
            var $tmp = MsgType;
            if ($tmp === 4) {
              if (!(22 in ProcScope.BoolSwitches)) return}
             else if ($tmp === 3) {
              if (!(23 in ProcScope.BoolSwitches)) return}
             else if ($tmp === 2) if (!(24 in ProcScope.BoolSwitches)) return;
            break;
          } else if ($lt33.isPrototypeOf(El)) {
            ModScope = rtl.as(El.FData,$lt55);
            var $tmp1 = MsgType;
            if ($tmp1 === 4) {
              if (!(22 in ModScope.BoolSwitches)) return}
             else if ($tmp1 === 3) {
              if (!(23 in ModScope.BoolSwitches)) return}
             else if ($tmp1 === 2) if (!(24 in ModScope.BoolSwitches)) return;
            break;
          };
          El = El.FParent;
        };
        if ((this.FResolver !== null) && (this.FResolver.FCurrentParser !== null)) {
          Scanner = this.FResolver.FCurrentParser.FScanner;
          if (Scanner !== null) {
            State = Scanner.GetWarnMsgState(MsgNumber);
            var $tmp2 = State;
            if ($tmp2 === 2) {
              return;
            } else if ($tmp2 === 3) MsgType = 1;
          };
        };
      };
      Msg = $lt1.$create("Create$1");
      Msg.Id = Id;
      Msg.MsgType = MsgType;
      Msg.MsgNumber = MsgNumber;
      Msg.MsgPattern = Fmt;
      Msg.MsgText = $lp10(Fmt,Args);
      $lp11({p: Msg, get: function () {
          return this.p.Args;
        }, set: function (v) {
          this.p.Args = v;
        }},Args);
      Msg.PosEl = PosEl;
      Msg.Filename = PosEl.SourceFilename;
      this.FResolver.$class.UnmangleSourceLineNumber(PosEl.SourceLinenumber,{p: Msg, get: function () {
          return this.p.Row;
        }, set: function (v) {
          this.p.Row = v;
        }},{p: Msg, get: function () {
          return this.p.Col;
        }, set: function (v) {
          this.p.Col = v;
        }});
      this.EmitMessage$1(Msg);
    };
    this.EmitMessage$1 = function (Msg) {
      if (!(this.FOnMessage != null)) {
        Msg.Release();
        return;
      };
      try {
        this.FOnMessage(this,Msg);
      } finally {
        Msg.Release();
      };
    };
  });
  this.PasElementToHashName = function (Item) {
    var Result = "";
    Result = "" + Item.FPasElementId;
    return Result;
  };
  this.PAElement_ElToHashName = function (Item) {
    var Result = "";
    Result = "" + Item.FElement.FPasElementId;
    return Result;
  };
  this.PAOverrideList_ElToHashName = function (Item) {
    var Result = "";
    Result = "" + Item.FElement.FPasElementId;
    return Result;
  };
  this.CreatePasElementSet = function () {
    var Result = null;
    Result = $lt5.$create("Create$1",[$mod.PasElementToHashName,null]);
    return Result;
  };
  this.GetElModName = function (El) {
    var Result = "";
    var aModule = null;
    if (El === null) return "nil";
    Result = El.PathName() + ":" + El.$classname;
    aModule = El.GetModule();
    if (aModule === El) return Result;
    if (aModule === null) Result = "NilModule." + Result;
    return Result;
  };
});
rtl.module("jsbase",["System","JS"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lm = pas.System;
  var $lt2 = $lm.TObject;
  this.MinSafeIntDouble = -0x1fffffffffffff;
  this.MaxSafeIntDouble = 0x1fffffffffffff;
  $lt = this.TJSType = {"0": "jstUNDEFINED", jstUNDEFINED: 0, "1": "jstNull", jstNull: 1, "2": "jstBoolean", jstBoolean: 2, "3": "jstNumber", jstNumber: 3, "4": "jstString", jstString: 4, "5": "jstObject", jstObject: 5, "6": "jstReference", jstReference: 6, "7": "jstCompletion", jstCompletion: 7};
  rtl.createClass(this,"TJSValue",$lt2,function () {
    $lt1 = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.FValueType = 0;
      this.FValue = undefined;
      this.FCustomValue = "";
    };
    this.ClearValue = function (ANewValue) {
      var $tmp = this.FValueType;
      if ($tmp === 0) {
        this.FValue = undefined}
       else if ($tmp === 4) {
        this.FValue = ""}
       else if ($tmp === 3) {
        this.FValue = 0}
       else if ($tmp === 2) {
        this.FValue = false}
       else {
        this.FValue = null;
      };
      this.FValueType = ANewValue;
      this.FCustomValue = "";
    };
    this.GetAsBoolean = function () {
      var Result = false;
      if (this.FValueType === 2) {
        Result = !(this.FValue == false)}
       else Result = false;
      return Result;
    };
    this.GetAsNumber = function () {
      var Result = 0.0;
      if (this.FValueType === 3) {
        Result = rtl.getNumber(this.FValue)}
       else Result = 0.0;
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      if (this.FValueType === 4) {
        Result = "" + this.FValue}
       else Result = "";
      return Result;
    };
    this.GetIsNull = function () {
      var Result = false;
      Result = this.FValueType === 1;
      return Result;
    };
    this.GetIsUndefined = function () {
      var Result = false;
      Result = this.FValueType === 0;
      return Result;
    };
    this.SetAsBoolean = function (AValue) {
      this.ClearValue(2);
      this.FValue = AValue;
    };
    this.SetAsNumber = function (AValue) {
      this.ClearValue(3);
      this.FValue = AValue;
    };
    this.SetAsString = function (AValue) {
      this.ClearValue(4);
      this.FValue = AValue;
    };
    this.SetIsNull = function (AValue) {
      if (AValue) {
        this.ClearValue(1)}
       else if (this.GetIsNull()) this.ClearValue(0);
    };
    this.SetIsUndefined = function (AValue) {
      if (AValue) {
        this.ClearValue(0)}
       else if (this.GetIsUndefined()) this.ClearValue(1);
    };
    this.Create$1 = function () {
      this.SetIsUndefined(true);
      return this;
    };
    this.Destroy = function () {
      this.ClearValue(0);
      $lt2.Destroy.call(this);
    };
  });
  var HexChars = rtl.createSet(null,48,57,null,97,102,null,65,70);
  this.IsValidJSIdentifier = function (Name, AllowEscapeSeq) {
    var Result = false;
    var p = 0;
    var l = 0;
    var i = 0;
    Result = false;
    if (Name === "") return Result;
    l = Name.length;
    p = 1;
    while (p <= l) {
      var $tmp = Name.charAt(p - 1);
      if (($tmp >= "0") && ($tmp <= "9")) {
        if (p === 1) {
          return Result}
         else p += 1}
       else if ((($tmp >= "a") && ($tmp <= "z")) || (($tmp >= "A") && ($tmp <= "Z")) || ($tmp === "_") || ($tmp === "$")) {
        p += 1}
       else if ($tmp === "\\") {
        if (!AllowEscapeSeq) return Result;
        p += 1;
        if (p > l) return Result;
        if (Name.charAt(p - 1) === "x") {
          p += 1;
          if ((p > l) || !(Name.charCodeAt(p - 1) in HexChars)) return Result;
          p += 1;
          if ((p > l) || !(Name.charCodeAt(p - 1) in HexChars)) return Result;
        } else if (Name.charAt(p - 1) === "u") {
          p += 1;
          if (p > l) return Result;
          if (Name.charAt(p - 1) === "{") {
            i = 0;
            do {
              p += 1;
              if (p > l) return Result;
              var $tmp1 = Name.charAt(p - 1);
              if ($tmp1 === "}") {
                break}
               else if (($tmp1 >= "0") && ($tmp1 <= "9")) {
                i = ((i * 16) + Name.charCodeAt(p - 1)) - 48}
               else if (($tmp1 >= "a") && ($tmp1 <= "f")) {
                i = (((i * 16) + Name.charCodeAt(p - 1)) - 97) + 10}
               else if (($tmp1 >= "A") && ($tmp1 <= "F")) {
                i = (((i * 16) + Name.charCodeAt(p - 1)) - 65) + 10}
               else {
                return Result;
              };
              if (i > 0xFFFF) return Result;
            } while (!false);
            if ((i >= 0xD800) && (i < 0xE000)) return Result;
            p += 1;
          } else {
            for (i = 1; i <= 4; i++) {
              p += 1;
              if ((p > l) || !(Name.charCodeAt(p - 1) in HexChars)) return Result;
            };
          };
        } else return Result;
      } else if (($tmp === "‌") || ($tmp === "‍")) {
        p += 1}
       else if ((($tmp >= "ª") && ($tmp <= "\u2000")) || (($tmp >= "‎") && ($tmp <= "퟿"))) {
        p += 1}
       else if (($tmp >= "\uD800") && ($tmp <= "\uDFFF")) {
        return Result}
       else if (($tmp >= "") && ($tmp <= "\uFFFF")) {
        p += 1}
       else {
        return Result;
      };
    };
    Result = true;
    return Result;
  };
  this.StrToJSString = function (S) {
    var Result = "";
    Result = S;
    return Result;
  };
  this.JSStringToString = function (S) {
    var Result = "";
    Result = S;
    return Result;
  };
});
rtl.module("jstoken",["System"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  $lt = this.TJSToken = {"0": "tjsUnknown", tjsUnknown: 0, "1": "tjsEOF", tjsEOF: 1, "2": "tjsWhiteSpace", tjsWhiteSpace: 2, "3": "tjsChar", tjsChar: 3, "4": "tjsString", tjsString: 4, "5": "tjsIdentifier", tjsIdentifier: 5, "6": "tjsNumber", tjsNumber: 6, "7": "tjsComment", tjsComment: 7, "8": "tjsREGEX", tjsREGEX: 8, "9": "tjsRESERVED", tjsRESERVED: 9, "10": "tjsANDAND", tjsANDAND: 10, "11": "tjsANDEQ", tjsANDEQ: 11, "12": "tjsBraceOpen", tjsBraceOpen: 12, "13": "tjsBraceClose", tjsBraceClose: 13, "14": "tjsSQuaredBraceOpen", tjsSQuaredBraceOpen: 14, "15": "tjsSQuaredBraceClose", tjsSQuaredBraceClose: 15, "16": "tjsCurlyBraceOpen", tjsCurlyBraceOpen: 16, "17": "tjsCurlyBraceClose", tjsCurlyBraceClose: 17, "18": "tjsCOMMA", tjsCOMMA: 18, "19": "tjsCOLON", tjsCOLON: 19, "20": "tjsDOT", tjsDOT: 20, "21": "tjsSEMICOLON", tjsSEMICOLON: 21, "22": "tjsASSIGN", tjsASSIGN: 22, "23": "tjsGT", tjsGT: 23, "24": "tjsLT", tjsLT: 24, "25": "tjsConditional", tjsConditional: 25, "26": "tjsPLUS", tjsPLUS: 26, "27": "tjsMINUS", tjsMINUS: 27, "28": "tjsMUL", tjsMUL: 28, "29": "tjsDIV", tjsDIV: 29, "30": "tjsPower", tjsPower: 30, "31": "tjsAnd", tjsAnd: 31, "32": "tjsOR", tjsOR: 32, "33": "tjsInv", tjsInv: 33, "34": "tjsMod", tjsMod: 34, "35": "tjsXOR", tjsXOR: 35, "36": "tjsNot", tjsNot: 36, "37": "tjsEQ", tjsEQ: 37, "38": "tjsGE", tjsGE: 38, "39": "tjsLE", tjsLE: 39, "40": "tjsLSHIFT", tjsLSHIFT: 40, "41": "tjsLSHIFTEQ", tjsLSHIFTEQ: 41, "42": "tjsMINUSEQ", tjsMINUSEQ: 42, "43": "tjsMINUSMINUS", tjsMINUSMINUS: 43, "44": "tjsMODEQ", tjsMODEQ: 44, "45": "tjsDIVEQ", tjsDIVEQ: 45, "46": "tjsXOREq", tjsXOREq: 46, "47": "tjsNE", tjsNE: 47, "48": "tjsOREQ", tjsOREQ: 48, "49": "tjsOROR", tjsOROR: 49, "50": "tjsPLUSEQ", tjsPLUSEQ: 50, "51": "tjsPLUSPLUS", tjsPLUSPLUS: 51, "52": "tjsURSHIFT", tjsURSHIFT: 52, "53": "tjsURSHIFTEQ", tjsURSHIFTEQ: 53, "54": "tjsRSHIFT", tjsRSHIFT: 54, "55": "tjsRSHIFTEQ", tjsRSHIFTEQ: 55, "56": "tjsSEQ", tjsSEQ: 56, "57": "tjsSNE", tjsSNE: 57, "58": "tjsMULEQ", tjsMULEQ: 58, "59": "tjsArrow", tjsArrow: 59, "60": "tjsEllipsis", tjsEllipsis: 60, "61": "tjsAWAIT", tjsAWAIT: 61, "62": "tjsBREAK", tjsBREAK: 62, "63": "tjsCASE", tjsCASE: 63, "64": "tjsCATCH", tjsCATCH: 64, "65": "tjsCLASS", tjsCLASS: 65, "66": "tjsCONST", tjsCONST: 66, "67": "tjsCONTINUE", tjsCONTINUE: 67, "68": "tjsDEBUGGER", tjsDEBUGGER: 68, "69": "tjsDEFAULT", tjsDEFAULT: 69, "70": "tjsDELETE", tjsDELETE: 70, "71": "tjsDO", tjsDO: 71, "72": "tjsELSE", tjsELSE: 72, "73": "tjsENUM", tjsENUM: 73, "74": "tjsEXPORT", tjsEXPORT: 74, "75": "tjsEXTENDS", tjsEXTENDS: 75, "76": "tjsFALSE", tjsFALSE: 76, "77": "tjsFINALLY", tjsFINALLY: 77, "78": "tjsFOR", tjsFOR: 78, "79": "tjsFUNCTION", tjsFUNCTION: 79, "80": "tjsIF", tjsIF: 80, "81": "tjsIMPORT", tjsIMPORT: 81, "82": "tjsIN", tjsIN: 82, "83": "tjsINSTANCEOF", tjsINSTANCEOF: 83, "84": "tjsLet", tjsLet: 84, "85": "tjsNEW", tjsNEW: 85, "86": "tjsNULL", tjsNULL: 86, "87": "tjsRETURN", tjsRETURN: 87, "88": "tjsSUPER", tjsSUPER: 88, "89": "tjsSWITCH", tjsSWITCH: 89, "90": "tjsTHIS", tjsTHIS: 90, "91": "tjsTHROW", tjsTHROW: 91, "92": "tjsTrue", tjsTrue: 92, "93": "tjsTRY", tjsTRY: 93, "94": "tjsTYPEOF", tjsTYPEOF: 94, "95": "tjsVAR", tjsVAR: 95, "96": "tjsVOID", tjsVOID: 96, "97": "tjsWHILE", tjsWHILE: 97, "98": "tjsWITH", tjsWITH: 98, "99": "tjsYield", tjsYield: 99};
  this.TokenInfos = ["unknown","EOF","whitespace","AnsiChar","String","identifier","number","comment","regular expression","reserved word","&&","&=","(",")","[","]","{","}",",",":",".",";","=",">","<","?","+","-","*","/","**","&","|","~","%","^","!","==",">=","<=","<<","<<=","-=","--","%=","/=","^=","!=","|=","||","+=","++",">>>",">>>=",">>",">>=","===","!==","*=","=>","...","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","false","finally","for","function","if","import","in","instanceof","let","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","yield"];
});
rtl.module("jstree",["System","Classes","SysUtils","jsbase","jstoken"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lt19 = null;
  var $lt20 = null;
  var $lt21 = null;
  var $lt22 = null;
  var $lt23 = null;
  var $lt24 = null;
  var $lt25 = null;
  var $lt26 = null;
  var $lt27 = null;
  var $lt28 = null;
  var $lt29 = null;
  var $lt30 = null;
  var $lt31 = null;
  var $lt32 = null;
  var $lt33 = null;
  var $lt34 = null;
  var $lt35 = null;
  var $lt36 = null;
  var $lt37 = null;
  var $lt38 = null;
  var $lt39 = null;
  var $lt40 = null;
  var $lt41 = null;
  var $lt42 = null;
  var $lt43 = null;
  var $lt44 = null;
  var $lt45 = null;
  var $lt46 = null;
  var $lt47 = null;
  var $lt48 = null;
  var $lt49 = null;
  var $lt50 = null;
  var $lt51 = null;
  var $lt52 = null;
  var $lt53 = null;
  var $lt54 = null;
  var $lt55 = null;
  var $lt56 = null;
  var $lt57 = null;
  var $lt58 = null;
  var $lt59 = null;
  var $lt60 = null;
  var $lt61 = null;
  var $lt62 = null;
  var $lt63 = null;
  var $lt64 = null;
  var $lt65 = null;
  var $lt66 = null;
  var $lt67 = null;
  var $lt68 = null;
  var $lt69 = null;
  var $lt70 = null;
  var $lt71 = null;
  var $lt72 = null;
  var $lt73 = null;
  var $lt74 = null;
  var $lt75 = null;
  var $lt76 = null;
  var $lt77 = null;
  var $lt78 = null;
  var $lt79 = null;
  var $lt80 = null;
  var $lt81 = null;
  var $lt82 = null;
  var $lt83 = null;
  var $lt84 = null;
  var $lt85 = null;
  var $lt86 = null;
  var $lt87 = null;
  var $lt88 = null;
  var $lt89 = null;
  var $lt90 = null;
  var $lt91 = null;
  var $lt92 = null;
  var $lt93 = null;
  var $lt94 = null;
  var $lt95 = null;
  var $lt96 = null;
  var $lt97 = null;
  var $lt98 = null;
  var $lt99 = null;
  var $lt100 = null;
  var $lt101 = null;
  var $lt102 = null;
  var $lt103 = null;
  var $lt104 = null;
  var $lt105 = null;
  var $lt106 = null;
  var $lt107 = null;
  var $lt108 = null;
  var $lt109 = null;
  var $lt110 = null;
  var $lt111 = null;
  var $lt112 = null;
  var $lt113 = null;
  var $lt114 = null;
  var $lt115 = null;
  var $lt116 = null;
  var $lt117 = null;
  var $lt118 = null;
  var $lt119 = null;
  var $lm = pas.System;
  var $lt120 = $lm.TObject;
  var $lm1 = pas.Classes;
  var $lt121 = $lm1.TStringList;
  var $lm2 = pas.SysUtils;
  var $lp = $lm2.FreeAndNil;
  var $lm3 = pas.jsbase;
  var $lt122 = $lm3.TJSValue;
  var $lt123 = $lm1.TCollectionItem;
  var $lt124 = $lm1.TCollection;
  var $lm4 = pas.jstoken;
  var $lt125 = $lm1.TPersistent;
  rtl.createClass(this,"TJSObject",$lt120,function () {
    $lt = this;
  });
  rtl.createClass(this,"TJSLabel",$lt,function () {
    $lt1 = this;
    this.$init = function () {
      $lt.$init.call(this);
      this.FName = "";
    };
  });
  rtl.createClass(this,"TJSFuncDef",$lt,function () {
    $lt2 = this;
    this.$init = function () {
      $lt.$init.call(this);
      this.FBody = null;
      this.FIsAsync = false;
      this.FIsEmpty = false;
      this.FName = "";
      this.FParams = null;
      this.FResultType = null;
      this.FTypedParams = null;
      this.FGenericParams = null;
    };
    this.$final = function () {
      this.FBody = undefined;
      this.FParams = undefined;
      this.FResultType = undefined;
      this.FTypedParams = undefined;
      this.FGenericParams = undefined;
      $lt.$final.call(this);
    };
    this.Create$1 = function () {
      this.FParams = $lt121.$create("Create$1");
      this.FTypedParams = $lt115.$create("Create$2");
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FGenericParams;
        }, set: function (v) {
          this.p.FGenericParams = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FTypedParams;
        }, set: function (v) {
          this.p.FTypedParams = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FBody;
        }, set: function (v) {
          this.p.FBody = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FParams;
        }, set: function (v) {
          this.p.FParams = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FResultType;
        }, set: function (v) {
          this.p.FResultType = v;
        }});
      $lt120.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSElement",$lt,function () {
    $lt3 = this;
    this.GlobalFreeHook = null;
    this.$init = function () {
      $lt.$init.call(this);
      this.FLine = 0;
      this.FColumn = 0;
      this.FSource = "";
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      this.FLine = ALine;
      this.FColumn = AColumn;
      this.FSource = ASource;
      return this;
    };
    this.Destroy = function () {
      if (this.GlobalFreeHook != null) this.GlobalFreeHook(this);
      $lt120.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSStatement",$lt3,function () {
    $lt4 = this;
  });
  rtl.createClass(this,"TJSEmptyBlockStatement",$lt4,function () {
    $lt5 = this;
  });
  rtl.createClass(this,"TJSEmptyStatement",$lt4,function () {
    $lt6 = this;
  });
  rtl.createClass(this,"TJSLiteral",$lt3,function () {
    $lt7 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FValue = null;
    };
    this.$final = function () {
      this.FValue = undefined;
      $lt3.$final.call(this);
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      this.FValue = $lt122.$create("Create$1");
      $lt3.Create$1.call(this,ALine,AColumn,ASource);
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FValue;
        }, set: function (v) {
          this.p.FValue = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSRegularExpressionLiteral",$lt3,function () {
    $lt8 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FPattern = null;
      this.FPatternFlags = null;
    };
    this.$final = function () {
      this.FPattern = undefined;
      this.FPatternFlags = undefined;
      $lt3.$final.call(this);
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      $lt3.Create$1.call(this,ALine,AColumn,ASource);
      this.FPattern = $lt122.$create("Create$1");
      this.FPatternFlags = $lt122.$create("Create$1");
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FPattern;
        }, set: function (v) {
          this.p.FPattern = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FPatternFlags;
        }, set: function (v) {
          this.p.FPatternFlags = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSPrimaryExpression",$lt3,function () {
    $lt9 = this;
  });
  rtl.createClass(this,"TJSPrimaryExpressionThis",$lt9,function () {
    $lt10 = this;
  });
  rtl.createClass(this,"TJSPrimaryExpressionIdent",$lt9,function () {
    $lt11 = this;
    this.$init = function () {
      $lt9.$init.call(this);
      this.FName = "";
    };
  });
  rtl.createClass(this,"TJSArrayLiteralElement",$lt123,function () {
    $lt12 = this;
    this.$init = function () {
      $lt123.$init.call(this);
      this.FExpr = null;
      this.FElementIndex = 0;
    };
    this.$final = function () {
      this.FExpr = undefined;
      $lt123.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FExpr;
        }, set: function (v) {
          this.p.FExpr = v;
        }});
      $lt123.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSArrayLiteralElements",$lt124,function () {
    $lt13 = this;
    this.GetE = function (AIndex) {
      var Result = null;
      Result = this.GetItem(AIndex);
      return Result;
    };
    this.AddElement = function () {
      var Result = null;
      Result = this.Add();
      return Result;
    };
  });
  rtl.createClass(this,"TJSArrayLiteral",$lt3,function () {
    $lt14 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FElements = null;
    };
    this.$final = function () {
      this.FElements = undefined;
      $lt3.$final.call(this);
    };
    this.GetCount = function () {
      var Result = 0;
      Result = this.FElements.GetCount();
      return Result;
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      $lt3.Create$1.call(this,ALine,AColumn,ASource);
      this.FElements = $lt13.$create("Create$1",[$lt12]);
      return this;
    };
    this.AddElement = function (El) {
      var ArrEl = null;
      ArrEl = this.FElements.AddElement();
      ArrEl.FElementIndex = this.FElements.GetCount() - 1;
      ArrEl.FExpr = El;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FElements;
        }, set: function (v) {
          this.p.FElements = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSObjectLiteralElement",$lt123,function () {
    $lt15 = this;
    this.$init = function () {
      $lt123.$init.call(this);
      this.FExpr = null;
      this.FName = "";
    };
    this.$final = function () {
      this.FExpr = undefined;
      $lt123.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FExpr;
        }, set: function (v) {
          this.p.FExpr = v;
        }});
      $lt123.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSObjectLiteralElements",$lt124,function () {
    $lt16 = this;
    this.GetE = function (AIndex) {
      var Result = null;
      Result = this.GetItem(AIndex);
      return Result;
    };
    this.AddElement = function () {
      var Result = null;
      Result = this.Add();
      return Result;
    };
  });
  rtl.createClass(this,"TJSObjectLiteral",$lt3,function () {
    $lt17 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FElements = null;
    };
    this.$final = function () {
      this.FElements = undefined;
      $lt3.$final.call(this);
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      $lt3.Create$1.call(this,ALine,AColumn,ASource);
      this.FElements = $lt16.$create("Create$1",[$lt15]);
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FElements;
        }, set: function (v) {
          this.p.FElements = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSArguments",$lt14,function () {
    $lt18 = this;
  });
  rtl.createClass(this,"TJSMemberExpression",$lt3,function () {
    $lt19 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FMExpr = null;
    };
    this.$final = function () {
      this.FMExpr = undefined;
      $lt3.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FMExpr;
        }, set: function (v) {
          this.p.FMExpr = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSNewMemberExpression",$lt19,function () {
    $lt20 = this;
    this.$init = function () {
      $lt19.$init.call(this);
      this.FArgs = null;
    };
    this.$final = function () {
      this.FArgs = undefined;
      $lt19.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FArgs;
        }, set: function (v) {
          this.p.FArgs = v;
        }});
      $lt19.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSDotMemberExpression",$lt19,function () {
    $lt21 = this;
    this.$init = function () {
      $lt19.$init.call(this);
      this.FName = "";
    };
  });
  rtl.createClass(this,"TJSBracketMemberExpression",$lt19,function () {
    $lt22 = this;
    this.$init = function () {
      $lt19.$init.call(this);
      this.FName = null;
    };
    this.$final = function () {
      this.FName = undefined;
      $lt19.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FName;
        }, set: function (v) {
          this.p.FName = v;
        }});
      $lt19.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSCallExpression",$lt3,function () {
    $lt23 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FArgs = null;
      this.FExpr = null;
    };
    this.$final = function () {
      this.FArgs = undefined;
      this.FExpr = undefined;
      $lt3.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FExpr;
        }, set: function (v) {
          this.p.FExpr = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FArgs;
        }, set: function (v) {
          this.p.FArgs = v;
        }});
      $lt3.Destroy.call(this);
    };
    this.AddArg = function (El) {
      this.FArgs.FElements.AddElement().FExpr = El;
    };
    this.InsertArg = function (Index, El) {
      var NewEl = null;
      NewEl = this.FArgs.FElements.Insert(Index);
      NewEl.FExpr = El;
    };
  });
  rtl.createClass(this,"TJSUnary",$lt3,function () {
    $lt24 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FA = null;
    };
    this.$final = function () {
      this.FA = undefined;
      $lt3.$final.call(this);
    };
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.PostFixOperatorToken = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.PrefixOperator = function () {
      var Result = "";
      var T = 0;
      T = this.PrefixOperatorToken();
      if (T === 0) {
        Result = ""}
       else {
        Result = $lm4.TokenInfos[T];
        if (T in rtl.createSet(94,96,70,91,61,99)) Result = Result + " ";
      };
      return Result;
    };
    this.PostFixOperator = function () {
      var Result = "";
      var T = 0;
      T = this.PostFixOperatorToken();
      if (T === 0) {
        Result = ""}
       else Result = $lm4.TokenInfos[T];
      return Result;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FA;
        }, set: function (v) {
          this.p.FA = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSDeclarationStatement",$lt3,function () {
    $lt25 = this;
  });
  $lt26 = this.TJSVarType = {"0": "vtVar", vtVar: 0, "1": "vtLet", vtLet: 1, "2": "vtConst", vtConst: 2};
  rtl.createClass(this,"TJSVariableStatement",$lt25,function () {
    $lt27 = this;
    this.$init = function () {
      $lt25.$init.call(this);
      this.FA = null;
      this.FVarType = 0;
    };
    this.$final = function () {
      this.FA = undefined;
      $lt25.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FA;
        }, set: function (v) {
          this.p.FA = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSExpressionStatement",$lt24,function () {
    $lt28 = this;
  });
  rtl.createClass(this,"TJSThrowStatement",$lt24,function () {
    $lt29 = this;
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 91;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryExpression",$lt24,function () {
    $lt30 = this;
  });
  rtl.createClass(this,"TJSAwaitExpression",$lt30,function () {
    $lt31 = this;
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 61;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryPlusExpression",$lt30,function () {
    $lt32 = this;
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 26;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryMinusExpression",$lt30,function () {
    $lt33 = this;
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 27;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryInvExpression",$lt30,function () {
    $lt34 = this;
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 33;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryNotExpression",$lt30,function () {
    $lt35 = this;
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 36;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryPostPlusPlusExpression",$lt30,function () {
    $lt36 = this;
    this.PostFixOperatorToken = function () {
      var Result = 0;
      Result = 51;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryPostMinusMinusExpression",$lt30,function () {
    $lt37 = this;
    this.PostFixOperatorToken = function () {
      var Result = 0;
      Result = 43;
      return Result;
    };
  });
  rtl.createClass(this,"TJSUnaryBracketsExpression",$lt30,function () {
    $lt38 = this;
    this.PrefixOperatorToken = function () {
      var Result = 0;
      Result = 12;
      return Result;
    };
    this.PostFixOperatorToken = function () {
      var Result = 0;
      Result = 13;
      return Result;
    };
  });
  rtl.createClass(this,"TJSBinary",$lt3,function () {
    $lt39 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FA = null;
      this.FB = null;
    };
    this.$final = function () {
      this.FA = undefined;
      this.FB = undefined;
      $lt3.$final.call(this);
    };
    this.Destroy = function () {
      var $Self = this;
      function FreeListOfBins(El, ListA) {
        var BinCnt = 0;
        var SubBin = null;
        var Bins = [];
        Bins = rtl.arraySetLength(Bins,null,8);
        BinCnt = 0;
        while ($lt39.isPrototypeOf(El)) {
          SubBin = El;
          if (BinCnt === rtl.length(Bins)) Bins = rtl.arraySetLength(Bins,null,BinCnt * 2);
          Bins[BinCnt] = SubBin;
          BinCnt += 1;
          if (ListA) {
            El = SubBin.FA}
           else El = SubBin.FB;
        };
        while (BinCnt > 0) {
          BinCnt -= 1;
          SubBin = Bins[BinCnt];
          $lp({p: SubBin, get: function () {
              return this.p.FA;
            }, set: function (v) {
              this.p.FA = v;
            }});
          $lp({p: SubBin, get: function () {
              return this.p.FB;
            }, set: function (v) {
              this.p.FB = v;
            }});
        };
      };
      if ($lt39.isPrototypeOf(this.FA)) FreeListOfBins(this.FA,true);
      if ($lt39.isPrototypeOf(this.FB)) FreeListOfBins(this.FB,false);
      $lp({p: this, get: function () {
          return this.p.FA;
        }, set: function (v) {
          this.p.FA = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FB;
        }, set: function (v) {
          this.p.FB = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSStatementList",$lt39,function () {
    $lt40 = this;
  });
  rtl.createClass(this,"TJSVariableDeclarationList",$lt39,function () {
    $lt41 = this;
  });
  rtl.createClass(this,"TJSWithStatement",$lt39,function () {
    $lt42 = this;
  });
  rtl.createClass(this,"TJSBinaryExpression",$lt39,function () {
    $lt43 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.OperatorString = function () {
      var Result = "";
      var T = 0;
      T = this.OperatorToken();
      if (T !== 0) {
        Result = $lm4.TokenInfos[T];
      } else Result = "";
      return Result;
    };
    this.AllowCompact = function () {
      var Result = false;
      Result = true;
      return Result;
    };
  });
  rtl.createClass(this,"TJSLogicalOrExpression",$lt43,function () {
    $lt44 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 49;
      return Result;
    };
  });
  rtl.createClass(this,"TJSLogicalAndExpression",$lt43,function () {
    $lt45 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 10;
      return Result;
    };
  });
  rtl.createClass(this,"TJSBitwiseAndExpression",$lt43,function () {
    $lt46 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 31;
      return Result;
    };
  });
  rtl.createClass(this,"TJSBitwiseOrExpression",$lt43,function () {
    $lt47 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 32;
      return Result;
    };
  });
  rtl.createClass(this,"TJSBitwiseXOrExpression",$lt43,function () {
    $lt48 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 35;
      return Result;
    };
  });
  rtl.createClass(this,"TJSEqualityExpression",$lt43,function () {
    $lt49 = this;
  });
  rtl.createClass(this,"TJSEqualityExpressionEQ",$lt49,function () {
    $lt50 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 37;
      return Result;
    };
  });
  rtl.createClass(this,"TJSEqualityExpressionNE",$lt49,function () {
    $lt51 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 47;
      return Result;
    };
  });
  rtl.createClass(this,"TJSEqualityExpressionSEQ",$lt49,function () {
    $lt52 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 56;
      return Result;
    };
  });
  rtl.createClass(this,"TJSEqualityExpressionSNE",$lt49,function () {
    $lt53 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 57;
      return Result;
    };
  });
  rtl.createClass(this,"TJSRelationalExpression",$lt43,function () {
    $lt54 = this;
  });
  rtl.createClass(this,"TJSRelationalExpressionLT",$lt54,function () {
    $lt55 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 24;
      return Result;
    };
  });
  rtl.createClass(this,"TJSRelationalExpressionGT",$lt54,function () {
    $lt56 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 23;
      return Result;
    };
  });
  rtl.createClass(this,"TJSRelationalExpressionLE",$lt54,function () {
    $lt57 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 39;
      return Result;
    };
  });
  rtl.createClass(this,"TJSRelationalExpressionGE",$lt54,function () {
    $lt58 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 38;
      return Result;
    };
  });
  rtl.createClass(this,"TJSRelationalExpressionIn",$lt54,function () {
    $lt59 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 82;
      return Result;
    };
    this.AllowCompact = function () {
      var Result = false;
      Result = false;
      return Result;
    };
  });
  rtl.createClass(this,"TJSRelationalExpressionInstanceOf",$lt54,function () {
    $lt60 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 83;
      return Result;
    };
    this.AllowCompact = function () {
      var Result = false;
      Result = false;
      return Result;
    };
  });
  rtl.createClass(this,"TJSShiftExpression",$lt43,function () {
    $lt61 = this;
  });
  rtl.createClass(this,"TJSLShiftExpression",$lt61,function () {
    $lt62 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 40;
      return Result;
    };
  });
  rtl.createClass(this,"TJSRShiftExpression",$lt61,function () {
    $lt63 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 54;
      return Result;
    };
  });
  rtl.createClass(this,"TJSURShiftExpression",$lt61,function () {
    $lt64 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 52;
      return Result;
    };
  });
  rtl.createClass(this,"TJSAdditiveExpression",$lt43,function () {
    $lt65 = this;
  });
  rtl.createClass(this,"TJSAdditiveExpressionPlus",$lt65,function () {
    $lt66 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 26;
      return Result;
    };
  });
  rtl.createClass(this,"TJSAdditiveExpressionMinus",$lt65,function () {
    $lt67 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 27;
      return Result;
    };
  });
  rtl.createClass(this,"TJSMultiplicativeExpression",$lt43,function () {
    $lt68 = this;
  });
  rtl.createClass(this,"TJSMultiplicativeExpressionMul",$lt68,function () {
    $lt69 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 28;
      return Result;
    };
  });
  rtl.createClass(this,"TJSMultiplicativeExpressionDiv",$lt68,function () {
    $lt70 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 29;
      return Result;
    };
  });
  rtl.createClass(this,"TJSMultiplicativeExpressionMod",$lt68,function () {
    $lt71 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 34;
      return Result;
    };
  });
  rtl.createClass(this,"TJSPowerExpression",$lt43,function () {
    $lt72 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 30;
      return Result;
    };
  });
  rtl.createClass(this,"TJSCommaExpression",$lt43,function () {
    $lt73 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 18;
      return Result;
    };
  });
  rtl.createClass(this,"TJSConditionalExpression",$lt3,function () {
    $lt74 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FA = null;
      this.FB = null;
      this.FC = null;
    };
    this.$final = function () {
      this.FA = undefined;
      this.FB = undefined;
      this.FC = undefined;
      $lt3.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FB;
        }, set: function (v) {
          this.p.FB = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FA;
        }, set: function (v) {
          this.p.FA = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FC;
        }, set: function (v) {
          this.p.FC = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSDebuggerStatement",$lt4,function () {
    $lt75 = this;
  });
  rtl.createClass(this,"TJSAssignStatement",$lt4,function () {
    $lt76 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FExpr = null;
      this.FLHS = null;
    };
    this.$final = function () {
      this.FExpr = undefined;
      this.FLHS = undefined;
      $lt4.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FLHS;
        }, set: function (v) {
          this.p.FLHS = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FExpr;
        }, set: function (v) {
          this.p.FExpr = v;
        }});
      $lt3.Destroy.call(this);
    };
    this.OperatorToken = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.OperatorString = function () {
      var Result = "";
      var t = 0;
      t = this.OperatorToken();
      if (0 !== t) {
        Result = $lm4.TokenInfos[t]}
       else Result = "";
      return Result;
    };
  });
  rtl.createClass(this,"TJSSimpleAssignStatement",$lt76,function () {
    $lt77 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 22;
      return Result;
    };
  });
  rtl.createClass(this,"TJSMulEqAssignStatement",$lt76,function () {
    $lt78 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 58;
      return Result;
    };
  });
  rtl.createClass(this,"TJSDivEqAssignStatement",$lt76,function () {
    $lt79 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 45;
      return Result;
    };
  });
  rtl.createClass(this,"TJSAddEqAssignStatement",$lt76,function () {
    $lt80 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 50;
      return Result;
    };
  });
  rtl.createClass(this,"TJSSubEqAssignStatement",$lt76,function () {
    $lt81 = this;
    this.OperatorToken = function () {
      var Result = 0;
      Result = 42;
      return Result;
    };
  });
  rtl.createClass(this,"TJSVarDeclaration",$lt3,function () {
    $lt82 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FInit = null;
      this.FName = "";
      this.FOwnsType = false;
      this.FTyped = null;
    };
    this.$final = function () {
      this.FInit = undefined;
      this.FTyped = undefined;
      $lt3.$final.call(this);
    };
    this.Destroy = function () {
      if (this.FOwnsType) $lp({p: this, get: function () {
          return this.p.FTyped;
        }, set: function (v) {
          this.p.FTyped = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FInit;
        }, set: function (v) {
          this.p.FInit = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSIfStatement",$lt4,function () {
    $lt83 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FBFalse = null;
      this.FBTrue = null;
      this.FCond = null;
    };
    this.$final = function () {
      this.FBFalse = undefined;
      this.FBTrue = undefined;
      this.FCond = undefined;
      $lt4.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FCond;
        }, set: function (v) {
          this.p.FCond = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FBTrue;
        }, set: function (v) {
          this.p.FBTrue = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FBFalse;
        }, set: function (v) {
          this.p.FBFalse = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSTargetStatement",$lt4,function () {
    $lt84 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FTargetName = "";
    };
  });
  rtl.createClass(this,"TJSBodyStatement",$lt84,function () {
    $lt85 = this;
    this.$init = function () {
      $lt84.$init.call(this);
      this.FBody = null;
    };
    this.$final = function () {
      this.FBody = undefined;
      $lt84.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FBody;
        }, set: function (v) {
          this.p.FBody = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSCondLoopStatement",$lt85,function () {
    $lt86 = this;
    this.$init = function () {
      $lt85.$init.call(this);
      this.FCond = null;
    };
    this.$final = function () {
      this.FCond = undefined;
      $lt85.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FCond;
        }, set: function (v) {
          this.p.FCond = v;
        }});
      $lt85.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSWhileStatement",$lt86,function () {
    $lt87 = this;
  });
  rtl.createClass(this,"TJSDoWhileStatement",$lt87,function () {
    $lt88 = this;
  });
  rtl.createClass(this,"TJSForStatement",$lt86,function () {
    $lt89 = this;
    this.$init = function () {
      $lt86.$init.call(this);
      this.FIncr = null;
      this.FInit = null;
    };
    this.$final = function () {
      this.FIncr = undefined;
      this.FInit = undefined;
      $lt86.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FIncr;
        }, set: function (v) {
          this.p.FIncr = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FInit;
        }, set: function (v) {
          this.p.FInit = v;
        }});
      $lt86.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSForInStatement",$lt85,function () {
    $lt90 = this;
    this.$init = function () {
      $lt85.$init.call(this);
      this.FLhs = null;
      this.FList = null;
    };
    this.$final = function () {
      this.FLhs = undefined;
      this.FList = undefined;
      $lt85.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FList;
        }, set: function (v) {
          this.p.FList = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FLhs;
        }, set: function (v) {
          this.p.FLhs = v;
        }});
      $lt85.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSAliasElement",$lt123,function () {
    $lt91 = this;
    this.$init = function () {
      $lt123.$init.call(this);
      this.FName = "";
      this.FAlias = "";
    };
  });
  rtl.createClass(this,"TJSAliasElements",$lt124,function () {
    $lt92 = this;
  });
  rtl.createClass(this,"TJSNamedImportElement",$lt91,function () {
    $lt93 = this;
  });
  rtl.createClass(this,"TJSNamedImportElements",$lt92,function () {
    $lt94 = this;
    this.GetE = function (AIndex) {
      var Result = null;
      Result = this.GetItem(AIndex);
      return Result;
    };
  });
  rtl.createClass(this,"TJSImportStatement",$lt4,function () {
    $lt95 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FDefaultBinding = "";
      this.FExpression = null;
      this.FModuleName = "";
      this.FNamedImports = null;
      this.FNameSpaceImport = "";
    };
    this.$final = function () {
      this.FExpression = undefined;
      this.FNamedImports = undefined;
      $lt4.$final.call(this);
    };
    this.GetHaveNamedImports = function () {
      var Result = false;
      Result = this.FNamedImports != null;
      return Result;
    };
    this.GetNamedImports = function () {
      var Result = null;
      if (this.FNamedImports === null) this.FNamedImports = $lt94.$create("Create$1",[$lt93]);
      Result = this.FNamedImports;
      return Result;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FNamedImports;
        }, set: function (v) {
          this.p.FNamedImports = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FExpression;
        }, set: function (v) {
          this.p.FExpression = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSExportNameElement",$lt91,function () {
    $lt96 = this;
  });
  rtl.createClass(this,"TJSExportNameElements",$lt92,function () {
    $lt97 = this;
    this.GetE = function (AIndex) {
      var Result = null;
      Result = this.GetItem(AIndex);
      return Result;
    };
  });
  rtl.createClass(this,"TJSExportStatement",$lt4,function () {
    $lt98 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FDeclaration = null;
      this.FIsDefault = false;
      this.FModuleName = "";
      this.FNamedExports = null;
      this.FNameSpaceExport = "";
    };
    this.$final = function () {
      this.FDeclaration = undefined;
      this.FNamedExports = undefined;
      $lt4.$final.call(this);
    };
    this.GetHaveNamedExports = function () {
      var Result = false;
      Result = this.FNamedExports != null;
      return Result;
    };
    this.GetNamedExports = function () {
      var Result = null;
      if (this.FNamedExports === null) this.FNamedExports = $lt97.$create("Create$1",[$lt96]);
      Result = this.FNamedExports;
      return Result;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FNamedExports;
        }, set: function (v) {
          this.p.FNamedExports = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FDeclaration;
        }, set: function (v) {
          this.p.FDeclaration = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSContinueStatement",$lt84,function () {
    $lt99 = this;
  });
  rtl.createClass(this,"TJSBreakStatement",$lt84,function () {
    $lt100 = this;
  });
  rtl.createClass(this,"TJSReturnStatement",$lt4,function () {
    $lt101 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FExpr = null;
    };
    this.$final = function () {
      this.FExpr = undefined;
      $lt4.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FExpr;
        }, set: function (v) {
          this.p.FExpr = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSCaseElement",$lt123,function () {
    $lt102 = this;
    this.$init = function () {
      $lt123.$init.call(this);
      this.FBody = null;
      this.FExpr = null;
    };
    this.$final = function () {
      this.FBody = undefined;
      this.FExpr = undefined;
      $lt123.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FExpr;
        }, set: function (v) {
          this.p.FExpr = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FBody;
        }, set: function (v) {
          this.p.FBody = v;
        }});
      $lt123.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSCaseElements",$lt124,function () {
    $lt103 = this;
    this.GetC = function (AIndex) {
      var Result = null;
      Result = this.GetItem(AIndex);
      return Result;
    };
    this.AddCase = function () {
      var Result = null;
      Result = this.Add();
      return Result;
    };
  });
  rtl.createClass(this,"TJSSwitchStatement",$lt84,function () {
    $lt104 = this;
    this.$init = function () {
      $lt84.$init.call(this);
      this.FCases = null;
      this.FCond = null;
      this.FDefault = null;
    };
    this.$final = function () {
      this.FCases = undefined;
      this.FCond = undefined;
      this.FDefault = undefined;
      $lt84.$final.call(this);
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      $lt3.Create$1.call(this,ALine,AColumn,ASource);
      this.FCases = $lt103.$create("Create$1",[$lt102]);
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FCases;
        }, set: function (v) {
          this.p.FCases = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FCond;
        }, set: function (v) {
          this.p.FCond = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSLabeledStatement",$lt24,function () {
    $lt105 = this;
    this.$init = function () {
      $lt24.$init.call(this);
      this.FLabel = null;
    };
    this.$final = function () {
      this.FLabel = undefined;
      $lt24.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FLabel;
        }, set: function (v) {
          this.p.FLabel = v;
        }});
      $lt24.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSTryStatement",$lt4,function () {
    $lt106 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FBCatch = null;
      this.FBFinally = null;
      this.FBlock = null;
      this.FIdent = "";
    };
    this.$final = function () {
      this.FBCatch = undefined;
      this.FBFinally = undefined;
      this.FBlock = undefined;
      $lt4.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FBlock;
        }, set: function (v) {
          this.p.FBlock = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FBCatch;
        }, set: function (v) {
          this.p.FBCatch = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FBFinally;
        }, set: function (v) {
          this.p.FBFinally = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSTryCatchFinallyStatement",$lt106,function () {
    $lt107 = this;
  });
  rtl.createClass(this,"TJSTryCatchStatement",$lt106,function () {
    $lt108 = this;
  });
  rtl.createClass(this,"TJSTryFinallyStatement",$lt106,function () {
    $lt109 = this;
  });
  rtl.createClass(this,"TJSFunctionStatement",$lt4,function () {
    $lt110 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FFuncDef = null;
    };
    this.$final = function () {
      this.FFuncDef = undefined;
      $lt4.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FFuncDef;
        }, set: function (v) {
          this.p.FFuncDef = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSFunctionBody",$lt24,function () {
    $lt111 = this;
  });
  rtl.createClass(this,"TJSElementNode",$lt123,function () {
    $lt112 = this;
    this.$init = function () {
      $lt123.$init.call(this);
      this.FIsAmbient = false;
      this.FIsExport = false;
      this.FNode = null;
    };
    this.$final = function () {
      this.FNode = undefined;
      $lt123.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FNode;
        }, set: function (v) {
          this.p.FNode = v;
        }});
      $lt123.Destroy.call(this);
    };
    this.Assign = function (aSource) {
      if ($lt112.isPrototypeOf(aSource)) {
        this.FIsAmbient = aSource.FIsAmbient;
        this.FIsExport = aSource.FIsExport;
        this.FNode = aSource.FNode;
      } else $lt125.Assign.call(this,aSource);
    };
  });
  rtl.createClass(this,"TJSElementNodes",$lt124,function () {
    $lt113 = this;
    this.$init = function () {
      $lt124.$init.call(this);
      this.FClearNodes = false;
      this.FNodeType = "";
    };
    this.GetN = function (AIndex) {
      var Result = null;
      Result = this.GetItem(AIndex);
      return Result;
    };
    this.Destroy = function () {
      if (this.FClearNodes) this.ClearNodes();
      $lt124.Destroy.call(this);
    };
    this.ClearNodes = function () {
      var I = 0;
      for (var $l = 0, $end = this.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        this.GetN(I).FNode = null;
      };
    };
    this.AddNode = function (aIsAmbient, aIsExport) {
      var Result = null;
      Result = this.Add();
      Result.FIsAmbient = aIsAmbient;
      Result.FIsExport = aIsExport;
      return Result;
    };
    this.InsertNode = function (Index) {
      var Result = null;
      Result = this.Insert(Index);
      return Result;
    };
  });
  rtl.createClass(this,"TJSTypedParam",$lt112,function () {
    $lt114 = this;
    this.$init = function () {
      $lt112.$init.call(this);
      this.FDestructured = null;
      this.FIsInferred = false;
      this.FIsOptional = false;
      this.FIsSpread = false;
      this.FName = "";
    };
    this.$final = function () {
      this.FDestructured = undefined;
      $lt112.$final.call(this);
    };
    this.Assign = function (Source) {
      if ($lt114.isPrototypeOf(Source)) {
        this.FDestructured = Source.FDestructured;
        this.FIsInferred = Source.FIsInferred;
        this.FIsOptional = Source.FIsOptional;
        this.FIsSpread = Source.FIsSpread;
        this.FName = Source.FName;
      };
      $lt112.Assign.call(this,Source);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FDestructured;
        }, set: function (v) {
          this.p.FDestructured = v;
        }});
      $lt112.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSTypedParams",$lt113,function () {
    $lt115 = this;
    this.GetParams = function (aIndex) {
      var Result = null;
      Result = this.GetItem(aIndex);
      return Result;
    };
    this.Create$2 = function () {
      $lt124.Create$1.call(this,$lt114);
      return this;
    };
    this.AddParam = function (aName) {
      var Result = null;
      Result = rtl.as(this.Add(),$lt114);
      Result.FName = aName;
      return Result;
    };
  });
  rtl.createClass(this,"TJSSourceElements",$lt3,function () {
    $lt116 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FClasses = null;
      this.FEnums = null;
      this.FFunctions = null;
      this.FInterfaces = null;
      this.FModules = null;
      this.FNamespaces = null;
      this.FStatements = null;
      this.FTypes = null;
      this.FVars = null;
    };
    this.$final = function () {
      this.FClasses = undefined;
      this.FEnums = undefined;
      this.FFunctions = undefined;
      this.FInterfaces = undefined;
      this.FModules = undefined;
      this.FNamespaces = undefined;
      this.FStatements = undefined;
      this.FTypes = undefined;
      this.FVars = undefined;
      $lt3.$final.call(this);
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      var $Self = this;
      function CN(aName, DoClear) {
        var Result = null;
        Result = $lt113.$create("Create$1",[$lt112]);
        Result.FNodeType = aName;
        Result.FClearNodes = DoClear;
        return Result;
      };
      $lt3.Create$1.call(this,ALine,AColumn,ASource);
      this.FClasses = CN("Classes",true);
      this.FEnums = CN("Enums",true);
      this.FFunctions = CN("Functions",false);
      this.FInterfaces = CN("Interfaces",true);
      this.FModules = CN("Modules",true);
      this.FNamespaces = CN("Namespaces",true);
      this.FStatements = CN("Statements",false);
      this.FTypes = CN("Types",true);
      this.FVars = CN("Vars",true);
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FVars;
        }, set: function (v) {
          this.p.FVars = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FTypes;
        }, set: function (v) {
          this.p.FTypes = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FNamespaces;
        }, set: function (v) {
          this.p.FNamespaces = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FModules;
        }, set: function (v) {
          this.p.FModules = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FInterfaces;
        }, set: function (v) {
          this.p.FInterfaces = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FFunctions;
        }, set: function (v) {
          this.p.FFunctions = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FEnums;
        }, set: function (v) {
          this.p.FEnums = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FClasses;
        }, set: function (v) {
          this.p.FClasses = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FStatements;
        }, set: function (v) {
          this.p.FStatements = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSTypeDef",$lt3,function () {
    $lt117 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FTypeGuard = null;
      this.FExtendsCond = null;
      this.FExtendsTrue = null;
      this.FExtendsFalse = null;
    };
    this.$final = function () {
      this.FTypeGuard = undefined;
      this.FExtendsCond = undefined;
      this.FExtendsTrue = undefined;
      this.FExtendsFalse = undefined;
      $lt3.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FTypeGuard;
        }, set: function (v) {
          this.p.FTypeGuard = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FExtendsCond;
        }, set: function (v) {
          this.p.FExtendsCond = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FExtendsTrue;
        }, set: function (v) {
          this.p.FExtendsTrue = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FExtendsFalse;
        }, set: function (v) {
          this.p.FExtendsFalse = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSStructuredTypeDef",$lt117,function () {
    $lt118 = this;
    this.$init = function () {
      $lt117.$init.call(this);
      this.FTypeParams = null;
      this.FValues = null;
    };
    this.$final = function () {
      this.FTypeParams = undefined;
      this.FValues = undefined;
      $lt117.$final.call(this);
    };
    this.Create$1 = function (ALine, AColumn, ASource) {
      $lt3.Create$1.call(this,ALine,AColumn,ASource);
      this.FValues = $lt113.$create("Create$1",[$lt112]);
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FTypeParams;
        }, set: function (v) {
          this.p.FTypeParams = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FValues;
        }, set: function (v) {
          this.p.FValues = v;
        }});
      $lt117.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TJSObjectTypeDef",$lt118,function () {
    $lt119 = this;
  });
});
rtl.module("jswriter",["System","JS","SysUtils","Classes","jsbase","jstree"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lm = pas.System;
  var $lt6 = $lm.TObject;
  var $lp = $lm.StringOfChar;
  var $lp1 = $lm.Copy;
  var $lp2 = $lm.Pos;
  var $lp3 = $lm.Frac;
  var $lp4 = $lm.Delete;
  var $lm1 = pas.SysUtils;
  var $lp5 = $lm1.LeftStr;
  var $lp6 = $lm.val$8;
  var $lp7 = $lm.Insert;
  var $lp8 = $lm.val$6;
  var $lp9 = $lm1.IntToStr;
  var $lm2 = pas.jstree;
  var $lt7 = $lm2.TJSArguments;
  var $lm3 = pas.jsbase;
  var $lp10 = $lm3.IsValidJSIdentifier;
  var $lt8 = $lm2.TJSNewMemberExpression;
  var $lt9 = $lm2.TJSPrimaryExpression;
  var $lt10 = $lm2.TJSDotMemberExpression;
  var $lt11 = $lm2.TJSBracketMemberExpression;
  var $lt12 = $lm2.TJSCallExpression;
  var $lt13 = $lm2.TJSLiteral;
  var $lt14 = $lm2.TJSStatementList;
  var $lt15 = $lm2.TJSEmptyBlockStatement;
  var $lt16 = $lm2.TJSDoWhileStatement;
  var $lt17 = $lm2.TJSTryCatchFinallyStatement;
  var $lt18 = $lm2.TJSTryCatchStatement;
  var $lt19 = $lm2.TJSTryFinallyStatement;
  var $lt20 = $lm2.TJSForStatement;
  var $lt21 = $lm2.TJSSwitchStatement;
  var $lt22 = $lm2.TJSForInStatement;
  var $lt23 = $lm2.TJSWhileStatement;
  var $lt24 = $lm2.TJSContinueStatement;
  var $lt25 = $lm2.TJSBreakStatement;
  var $lp11 = $lm.VarRecs;
  var $lt26 = $lm2.TJSSourceElements;
  var $lt27 = $lm2.TJSPrimaryExpressionThis;
  var $lt28 = $lm2.TJSPrimaryExpressionIdent;
  var $lt29 = $lm2.TJSLogicalOrExpression;
  var $lt30 = $lm2.TJSLogicalAndExpression;
  var $lt31 = $lm2.TJSBinaryExpression;
  var $lt32 = $lm2.TJSCommaExpression;
  var $lt33 = $lm2.TJSBitwiseAndExpression;
  var $lt34 = $lm2.TJSBitwiseOrExpression;
  var $lt35 = $lm2.TJSBitwiseXOrExpression;
  var $lt36 = $lm2.TJSAdditiveExpressionPlus;
  var $lt37 = $lm2.TJSAdditiveExpressionMinus;
  var $lt38 = $lm2.TJSMultiplicativeExpressionMul;
  var $lt39 = $lm2.TJSEmptyStatement;
  var $lt40 = $lm2.TJSDebuggerStatement;
  var $lt41 = $lm2.TJSArrayLiteral;
  var $lt42 = $lm2.TJSObjectLiteral;
  var $lt43 = $lm2.TJSMemberExpression;
  var $lt44 = $lm2.TJSRegularExpressionLiteral;
  var $lt45 = $lm2.TJSLabeledStatement;
  var $lt46 = $lm2.TJSFunctionBody;
  var $lt47 = $lm2.TJSVariableStatement;
  var $lt48 = $lm2.TJSUnary;
  var $lt49 = $lm2.TJSVariableDeclarationList;
  var $lt50 = $lm2.TJSWithStatement;
  var $lt51 = $lm2.TJSBinary;
  var $lt52 = $lm2.TJSConditionalExpression;
  var $lt53 = $lm2.TJSAssignStatement;
  var $lt54 = $lm2.TJSVarDeclaration;
  var $lt55 = $lm2.TJSIfStatement;
  var $lt56 = $lm2.TJSImportStatement;
  var $lt57 = $lm2.TJSExportStatement;
  var $lt58 = $lm2.TJSTargetStatement;
  var $lt59 = $lm2.TJSReturnStatement;
  var $lt60 = $lm2.TJSTryStatement;
  var $lt61 = $lm2.TJSFunctionStatement;
  var $lt62 = $lm1.Exception;
  rtl.createClass(this,"TTextWriter",$lt6,function () {
    $lt = this;
    this.$init = function () {
      $lt6.$init.call(this);
      this.FCurElement = null;
      this.FCurLine = 0;
      this.FCurColumn = 0;
      this.FLineBreak = "";
      this.FOnWriting = null;
    };
    this.$final = function () {
      this.FCurElement = undefined;
      this.FOnWriting = undefined;
      $lt6.$final.call(this);
    };
    this.SetCurElement = function (AValue) {
      this.FCurElement = AValue;
    };
    this.Writing = function () {
      if (this.FOnWriting != null) this.FOnWriting(this);
    };
    this.Create$1 = function () {
      this.FCurLine = 1;
      this.FCurColumn = 1;
      this.FLineBreak = $lm.sLineBreak;
      return this;
    };
    this.Write = function (S) {
      var Result = 0;
      var c = "\x00";
      var l = 0;
      var p = 0;
      if (S === "") return Result;
      this.Writing();
      Result = this.DoWrite(S);
      l = S.length;
      p = 1;
      while (p <= l) {
        c = S.charAt(p - 1);
        var $tmp = c;
        if (($tmp === "\n") || ($tmp === "\r")) {
          this.FCurColumn = 1;
          this.FCurLine += 1;
          p += 1;
          if ((p <= l) && (S.charCodeAt(p - 1) in rtl.createSet(10,13)) && (c !== S.charAt(p - 1))) p += 1;
        } else {
          this.FCurColumn += 1;
          p += 1;
        };
      };
      return Result;
    };
    this.WriteLn = function (S) {
      var Result = 0;
      Result = this.Write(S);
      Result = Result + this.Write(this.FLineBreak);
      return Result;
    };
  });
  rtl.createClass(this,"TBufferWriter",$lt,function () {
    $lt1 = this;
    this.$init = function () {
      $lt.$init.call(this);
      this.FBufPos = 0;
      this.FCapacity = 0;
      this.FBuffer = [];
    };
    this.$final = function () {
      this.FBuffer = undefined;
      $lt.$final.call(this);
    };
    this.GetAsString = function () {
      var Result = "";
      if (this.FBufPos < rtl.length(this.FBuffer)) this.FBuffer.length = this.FBufPos;
      Result = this.FBuffer.join("");
      return Result;
    };
    this.GetBufferLength = function () {
      var Result = 0;
      Result = this.FBufPos;
      return Result;
    };
    this.SetCapacity = function (AValue) {
      if (this.FCapacity === AValue) return;
      this.FCapacity = AValue;
    };
    this.DoWrite = function (S) {
      var Result = 0;
      Result = S.length * 2;
      if (Result === 0) return Result;
      this.FBuffer.push(S);
      this.FBufPos += 1;
      this.FCapacity = this.FBufPos;
      return Result;
    };
    this.Create$2 = function (ACapacity) {
      $lt.Create$1.call(this);
      this.SetCapacity(ACapacity);
      return this;
    };
  });
  $lt2 = this.TJSEscapeQuote = {"0": "jseqSingle", jseqSingle: 0, "1": "jseqDouble", jseqDouble: 1, "2": "jseqBoth", jseqBoth: 2};
  $lt3 = this.TWriteOption = {"0": "woCompact", woCompact: 0, "1": "woTabIndent", woTabIndent: 1, "2": "woEmptyStatementAsComment", woEmptyStatementAsComment: 2, "3": "woQuoteElementNames", woQuoteElementNames: 3, "4": "woCompactArrayLiterals", woCompactArrayLiterals: 4, "5": "woCompactObjectLiterals", woCompactObjectLiterals: 5, "6": "woCompactArguments", woCompactArguments: 6};
  rtl.createClass(this,"TJSWriter",$lt6,function () {
    $lt4 = this;
    this.$init = function () {
      $lt6.$init.call(this);
      this.FCurIndent = 0;
      this.FFreeWriter = false;
      this.FIndentChar = "\x00";
      this.FIndentSize = 0;
      this.FLastChar = "\x00";
      this.FLinePos = 0;
      this.FOptions = {};
      this.FSkipCurlyBrackets = false;
      this.FSkipRoundBrackets = false;
      this.FWriter = null;
    };
    this.$final = function () {
      this.FOptions = undefined;
      this.FWriter = undefined;
      $lt6.$final.call(this);
    };
    this.SetOptions = function (AValue) {
      if (rtl.eqSet(this.FOptions,AValue)) return;
      this.FOptions = rtl.refSet(AValue);
      if (1 in this.FOptions) {
        this.FIndentChar = "\t"}
       else this.FIndentChar = " ";
    };
    this.Error = function (Msg) {
      throw $lt5.$create("Create$1",[Msg]);
    };
    this.Error$1 = function (Fmt, Args) {
      throw $lt5.$create("CreateFmt",[Fmt,Args]);
    };
    this.WriteIndent = function () {
      if ((this.FLinePos === 0) && (this.FCurIndent > 0)) {
        this.FLinePos = this.FWriter.Write($lp(this.FIndentChar,this.FCurIndent));
        this.FLastChar = this.FIndentChar;
      };
    };
    this.Write = function (S) {
      this.WriteIndent();
      if (S === "") return;
      this.FLinePos = this.FLinePos + this.FWriter.Write(S);
      this.FLastChar = S.charAt(S.length - 1);
    };
    this.WriteLn = function (S) {
      this.WriteIndent();
      this.FWriter.WriteLn(S);
      this.FLastChar = "\n";
      this.FLinePos = 0;
    };
    var TabWidth = 4;
    this.WriteValue = function (V) {
      var $Self = this;
      function GetLineIndent(S, p) {
        var Result = 0;
        var h = 0;
        var l = 0;
        h = p.get();
        l = S.length;
        Result = 0;
        while (h <= l) {
          var $tmp = S.charAt(h - 1);
          if ($tmp === "\t") {
            Result = Result + (4 - (Result % 4))}
           else if ($tmp === " ") {
            Result += 1}
           else {
            break;
          };
          h += 1;
        };
        p.set(h);
        return Result;
      };
      function SkipToNextLineEnd(S, p) {
        var Result = 0;
        var l = 0;
        l = S.length;
        while ((p <= l) && !(S.charCodeAt(p - 1) in rtl.createSet(10,13))) p += 1;
        Result = p;
        return Result;
      };
      function SkipToNextLineStart(S, p) {
        var Result = 0;
        var l = 0;
        l = S.length;
        while (p <= l) {
          var $tmp = S.charAt(p - 1);
          if (($tmp === "\n") || ($tmp === "\r")) {
            if ((p < l) && (S.charCodeAt((p + 1) - 1) in rtl.createSet(10,13)) && (S.charAt(p - 1) !== S.charAt((p + 1) - 1))) {
              p += 2}
             else p += 1;
            break;
          } else {
            p += 1;
          };
        };
        Result = p;
        return Result;
      };
      var S = "";
      var S2 = "";
      var JS = "";
      var p = 0;
      var StartP = 0;
      var MinIndent = 0;
      var CurLineIndent = 0;
      var j = 0;
      var Exp = 0;
      var Code = 0;
      var i = 0;
      var D = 0.0;
      var AsNumber = 0.0;
      if (V.FCustomValue !== "") {
        JS = V.FCustomValue;
        if (JS === "") return;
        p = SkipToNextLineStart(JS,1);
        if (p > JS.length) {
          this.Write(JS);
          return;
        };
        MinIndent = -1;
        do {
          CurLineIndent = GetLineIndent(JS,{get: function () {
              return p;
            }, set: function (v) {
              p = v;
            }});
          if ((MinIndent < 0) || (MinIndent > CurLineIndent)) MinIndent = CurLineIndent;
          p = SkipToNextLineStart(JS,p);
        } while (!(p > JS.length));
        p = 1;
        GetLineIndent(JS,{get: function () {
            return p;
          }, set: function (v) {
            p = v;
          }});
        do {
          StartP = p;
          p = SkipToNextLineEnd(JS,StartP);
          this.Write($lp1(JS,StartP,p - StartP));
          if (p > JS.length) break;
          this.Write($lm.sLineBreak);
          p = SkipToNextLineStart(JS,p);
          CurLineIndent = GetLineIndent(JS,{get: function () {
              return p;
            }, set: function (v) {
              p = v;
            }});
          this.Write($lp(this.FIndentChar,(this.FCurIndent + CurLineIndent) - MinIndent));
        } while (!false);
        return;
      };
      var $tmp = V.FValueType;
      if ($tmp === 0) {
        S = "undefined"}
       else if ($tmp === 1) {
        S = "null"}
       else if ($tmp === 2) {
        if (V.GetAsBoolean()) {
          S = "true"}
         else S = "false"}
       else if ($tmp === 4) {
        JS = V.GetAsString();
        if ($lp2('"',JS) > 0) {
          JS = "'" + this.EscapeString(JS,0) + "'"}
         else JS = '"' + this.EscapeString(JS,1) + '"';
        this.Write(JS);
        return;
      } else if ($tmp === 3) {
        AsNumber = V.GetAsNumber();
        if (($lp3(AsNumber) === 0) && (AsNumber >= -9007199254740991) && (AsNumber <= 9007199254740991)) {
          S = "" + Math.round(AsNumber);
        } else {
          S = rtl.floatToStr(AsNumber);
          if (S.charAt(0) === " ") $lp4({get: function () {
              return S;
            }, set: function (v) {
              S = v;
            }},1,1);
          i = $lp2("E",S);
          if (i > 2) {
            j = i - 2;
            var $tmp1 = S.charAt(j - 1);
            if ($tmp1 === "0") {
              while ((j > 1) && (S.charAt(j - 1) === "0")) j -= 1;
              if (S.charAt(j - 1) === ".") j += 1;
              S2 = $lp5(S,j) + $lp1(S,i,S.length);
              $lp6(S2,{get: function () {
                  return D;
                }, set: function (v) {
                  D = v;
                }},{get: function () {
                  return Code;
                }, set: function (v) {
                  Code = v;
                }});
              if ((Code === 0) && (D === AsNumber)) S = S2;
            } else if ($tmp1 === "9") {
              while ((j > 1) && (S.charAt(j - 1) === "9")) j -= 1;
              S2 = $lp5(S,j) + $lp1(S,i,S.length);
              if (S.charAt(j - 1) === ".") $lp7("0",{get: function () {
                  return S2;
                }, set: function (v) {
                  S2 = v;
                }},j + 1);
              do {
                var $tmp2 = S2.charAt(j - 1);
                if (($tmp2 >= "0") && ($tmp2 <= "8")) {
                  S2 = rtl.setCharAt(S2,j - 1,String.fromCharCode(S2.charCodeAt(j - 1) + 1));
                  break;
                } else if ($tmp2 === "9") {
                  S2 = rtl.setCharAt(S2,j - 1,"0")}
                 else if ($tmp2 === ".") ;
                j -= 1;
                if ((j === 0) || !(S2.charCodeAt(j - 1) in rtl.createSet(null,48,57,46))) {
                  $lp8($lp1(S,i + 1,S.length),{get: function () {
                      return Exp;
                    }, set: function (v) {
                      Exp = v;
                    }},{get: function () {
                      return Code;
                    }, set: function (v) {
                      Code = v;
                    }});
                  if (Code === 0) {
                    S2 = "1E" + $lp9(Exp + 1);
                    if (S.charAt(0) === "-") S2 = "-" + S2;
                  };
                  break;
                };
              } while (!false);
              $lp6(S2,{get: function () {
                  return D;
                }, set: function (v) {
                  D = v;
                }},{get: function () {
                  return Code;
                }, set: function (v) {
                  Code = v;
                }});
              if ((Code === 0) && (D === AsNumber)) S = S2;
            } else {
              if (S.charAt(i - 1 - 1) === "0") {
                S2 = $impl.LeftStr(S,i - 2) + $lp1(S,i,S.length);
                $lp6(S2,{get: function () {
                    return D;
                  }, set: function (v) {
                    D = v;
                  }},{get: function () {
                    return Code;
                  }, set: function (v) {
                    Code = v;
                  }});
                if ((Code === 0) && (D === AsNumber)) S = S2;
              };
            };
          };
          i = $lp2("E",S);
          if (i > 0) {
            $lp8($lp1(S,i + 1,S.length),{get: function () {
                return Exp;
              }, set: function (v) {
                Exp = v;
              }},{get: function () {
                return Code;
              }, set: function (v) {
                Code = v;
              }});
            if (Code === 0) {
              if (Exp === 0) {
                $lp4({get: function () {
                    return S;
                  }, set: function (v) {
                    S = v;
                  }},i,S.length)}
               else if ((Exp >= -6) && (Exp <= 6)) {
                $lp4({get: function () {
                    return S;
                  }, set: function (v) {
                    S = v;
                  }},i,S.length);
                if (S.charAt(S.length - 1) === "0") $lp4({get: function () {
                    return S;
                  }, set: function (v) {
                    S = v;
                  }},S.length,1);
                if (S.charAt(S.length - 1) === ".") $lp4({get: function () {
                    return S;
                  }, set: function (v) {
                    S = v;
                  }},S.length,1);
                S2 = S + "E" + $lp9(Exp);
                j = $lp2(".",S);
                if (j > 0) {
                  $lp4({get: function () {
                      return S;
                    }, set: function (v) {
                      S = v;
                    }},j,1);
                } else {
                  j = S.length + 1;
                };
                if (Exp < 0) {
                  while (Exp < 0) {
                    if ((j > 1) && (S.charCodeAt(j - 1 - 1) in rtl.createSet(null,48,57))) {
                      j -= 1}
                     else $lp7("0",{get: function () {
                        return S;
                      }, set: function (v) {
                        S = v;
                      }},j);
                    Exp += 1;
                  };
                  $lp7(".",{get: function () {
                      return S;
                    }, set: function (v) {
                      S = v;
                    }},j);
                  if ((j === 1) || !(S.charCodeAt(j - 1 - 1) in rtl.createSet(null,48,57))) $lp7("0",{get: function () {
                      return S;
                    }, set: function (v) {
                      S = v;
                    }},j);
                  if (S.charAt(S.length - 1) === "0") $lp4({get: function () {
                      return S;
                    }, set: function (v) {
                      S = v;
                    }},S.length,1);
                } else {
                  while (Exp > 0) {
                    if ((j <= S.length) && (S.charCodeAt(j - 1) in rtl.createSet(null,48,57))) {
                      j += 1}
                     else $lp7("0",{get: function () {
                        return S;
                      }, set: function (v) {
                        S = v;
                      }},j);
                    Exp -= 1;
                  };
                  if (j <= S.length) $lp7(".",{get: function () {
                      return S;
                    }, set: function (v) {
                      S = v;
                    }},j);
                };
                if (S.length > S2.length) S = S2;
              } else {
                S = $impl.LeftStr(S,i) + $lp9(Exp);
                if ((i >= 4) && (S.charAt(i - 1 - 1) === "0") && (S.charAt(i - 2 - 1) === ".")) $lp4({get: function () {
                    return S;
                  }, set: function (v) {
                    S = v;
                  }},i - 2,2);
              };
            };
          };
        };
      } else if ($tmp === 5) {}
      else if ($tmp === 6) {}
      else if ($tmp === 7) ;
      if (S === "") return;
      var $tmp3 = S.charAt(0);
      if ($tmp3 === "+") {
        if (this.FLastChar === "+") this.Write(" ")}
       else if ($tmp3 === "-") if (this.FLastChar === "-") this.Write(" ");
      this.Write(S);
    };
    this.WriteRegularExpressionLiteral = function (El) {
      this.Write("/");
      this.Write(this.EscapeString(El.FPattern.GetAsString(),2));
      this.Write("/");
      if (El.FPatternFlags != null) this.Write(this.EscapeString(El.FPatternFlags.GetAsString(),2));
    };
    var Keywords = ["var","let","const"];
    this.WriteVariableStatement = function (El) {
      this.Write(Keywords[El.FVarType] + " ");
      this.FSkipRoundBrackets = true;
      this.WriteJS(El.FA);
    };
    this.WriteEmptyBlockStatement = function (El) {
      if (El === null) ;
      if (0 in this.FOptions) {
        this.Write("{}")}
       else {
        this.WriteLn("{");
        this.Write("}");
      };
    };
    this.WriteEmptyStatement = function (El) {
      if (El === null) ;
      if (2 in this.FOptions) this.Write("/* Empty statement */");
    };
    this.WriteDebuggerStatement = function (E) {
      if (E === null) ;
      this.Write("debugger");
    };
    this.WriteLiteral = function (El) {
      this.WriteValue(El.FValue);
    };
    this.WriteArrayLiteral = function (El) {
      var Chars = ["[]","()"];
      var i = 0;
      var C = 0;
      var isArgs = false;
      var WC = false;
      var MultiLine = false;
      var BC = "";
      isArgs = $lt7.isPrototypeOf(El);
      BC = Chars[+isArgs];
      C = El.FElements.GetCount() - 1;
      if (C === -1) {
        this.Write(BC);
        return;
      };
      WC = (0 in this.FOptions) || (!isArgs && (4 in this.FOptions)) || (isArgs && (6 in this.FOptions));
      MultiLine = !WC && (C > 4);
      if (MultiLine) {
        this.WriteLn(BC.charAt(0));
        this.Indent();
      } else this.Write(BC.charAt(0));
      for (var $l = 0, $end = C; $l <= $end; $l++) {
        i = $l;
        this.FSkipRoundBrackets = true;
        this.WriteJS(El.FElements.GetE(i).FExpr);
        if (i < C) if (WC) {
          this.Write(",")}
         else if (MultiLine) {
          this.WriteLn(",")}
         else this.Write(", ");
      };
      if (MultiLine) {
        this.WriteLn("");
        this.Undent();
      };
      this.FWriter.SetCurElement(El);
      this.Write(BC.charAt(1));
    };
    this.WriteObjectLiteral = function (El) {
      var i = 0;
      var C = 0;
      var QE = false;
      var WC = false;
      var S = "";
      var Prop = null;
      C = El.FElements.GetCount() - 1;
      QE = 3 in this.FOptions;
      if (C === -1) {
        this.Write("{}");
        return;
      };
      WC = (0 in this.FOptions) || (5 in this.FOptions);
      if (WC) {
        this.Write("{")}
       else {
        this.WriteLn("{");
        this.Indent();
      };
      for (var $l = 0, $end = C; $l <= $end; $l++) {
        i = $l;
        Prop = El.FElements.GetE(i);
        this.FWriter.SetCurElement(Prop.FExpr);
        S = Prop.FName;
        if (QE || !$lp10(S,false)) {
          if ((S.length > 1) && (((S.charAt(0) === '"') && (S.charAt(S.length - 1) === '"')) || ((S.charAt(0) === "'") && (S.charAt(S.length - 1) === "'")))) {}
          else S = $mod.QuoteJSString(S,"\x00");
        };
        this.Write(S + ": ");
        this.Indent();
        this.FSkipRoundBrackets = true;
        this.WriteJS(Prop.FExpr);
        if (i < C) if (WC) {
          this.Write(", ")}
         else this.WriteLn(",");
        this.Undent();
      };
      this.FSkipRoundBrackets = false;
      if (!WC) {
        this.WriteLn("");
        this.Undent();
      };
      this.FWriter.SetCurElement(El);
      this.Write("}");
    };
    this.WriteMemberExpression = function (El) {
      var MExpr = null;
      var Args = null;
      if ($lt8.isPrototypeOf(El)) this.Write("new ");
      MExpr = El.FMExpr;
      if ($lt9.isPrototypeOf(MExpr) || $lt10.isPrototypeOf(MExpr) || $lt11.isPrototypeOf(MExpr) || ($lt12.isPrototypeOf(MExpr) && !$lt8.isPrototypeOf(El)) || $lt13.isPrototypeOf(MExpr)) {
        this.WriteJS(MExpr);
        this.FWriter.SetCurElement(El);
      } else {
        this.Write("(");
        this.WriteJS(MExpr);
        this.FWriter.SetCurElement(El);
        this.Write(")");
      };
      if ($lt10.isPrototypeOf(El)) {
        this.Write(".");
        this.Write(El.FName);
      } else if ($lt11.isPrototypeOf(El)) {
        this.Write("[");
        this.FSkipRoundBrackets = true;
        this.WriteJS(El.FName);
        this.FWriter.SetCurElement(El);
        this.FSkipRoundBrackets = false;
        this.Write("]");
      } else if ($lt8.isPrototypeOf(El)) {
        Args = El.FArgs;
        if (Args != null) {
          this.FWriter.SetCurElement(Args);
          this.WriteArrayLiteral(Args);
        } else this.Write("()");
      };
    };
    this.WriteCallExpression = function (El) {
      this.WriteJS(El.FExpr);
      if (El.FArgs != null) {
        this.FWriter.SetCurElement(El.FArgs);
        this.WriteArrayLiteral(El.FArgs);
      } else {
        this.FWriter.SetCurElement(El);
        this.Write("()");
      };
    };
    this.WriteSwitchStatement = function (El) {
      var C = false;
      var I = 0;
      var EC = null;
      C = 0 in this.FOptions;
      this.Write("switch (");
      if (El.FCond != null) {
        this.FSkipRoundBrackets = true;
        this.WriteJS(El.FCond);
        this.FWriter.SetCurElement(El);
        this.FSkipRoundBrackets = false;
      };
      if (C) {
        this.Write(") {")}
       else this.WriteLn(") {");
      for (var $l = 0, $end = El.FCases.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        EC = El.FCases.GetC(I);
        if (EC === El.FDefault) {
          this.Write("default")}
         else {
          this.FWriter.SetCurElement(EC.FExpr);
          this.Write("case ");
          this.FSkipRoundBrackets = true;
          this.WriteJS(EC.FExpr);
          this.FSkipRoundBrackets = false;
        };
        if (EC.FBody != null) {
          this.FSkipCurlyBrackets = true;
          if (C) {
            this.Write(": ")}
           else this.WriteLn(":");
          this.Indent();
          this.WriteJS(EC.FBody);
          this.Undent();
          if ($lt14.isPrototypeOf(EC.FBody) || $lt15.isPrototypeOf(EC.FBody)) {
            if (C) {
              if (I < (El.FCases.GetCount() - 1)) this.Write(" ");
            } else this.WriteLn("");
          } else if (C) {
            this.Write("; ")}
           else this.WriteLn(";");
        } else {
          if (C) {
            this.Write(": ")}
           else this.WriteLn(":");
        };
      };
      this.FWriter.SetCurElement(El);
      this.Write("}");
    };
    this.WriteUnary = function (El) {
      var S = "";
      this.FSkipRoundBrackets = false;
      S = El.$class.PrefixOperator();
      if (S !== "") {
        var $tmp = S.charAt(0);
        if ($tmp === "+") {
          if (this.FLastChar === "+") this.Write(" ")}
         else if ($tmp === "-") if (this.FLastChar === "-") this.Write(" ");
        this.Write(S);
      };
      this.WriteJS(El.FA);
      S = El.$class.PostFixOperator();
      if (S !== "") {
        this.FWriter.SetCurElement(El);
        var $tmp1 = S.charAt(0);
        if ($tmp1 === "+") {
          if (this.FLastChar === "+") this.Write(" ")}
         else if ($tmp1 === "-") if (this.FLastChar === "-") this.Write(" ");
        this.Write(S);
      };
    };
    this.WriteAssignStatement = function (El) {
      var S = "";
      this.WriteJS(El.FLHS);
      this.FWriter.SetCurElement(El);
      S = El.$class.OperatorString();
      if (!(0 in this.FOptions)) S = " " + S + " ";
      this.Write(S);
      this.FSkipRoundBrackets = true;
      this.WriteJS(El.FExpr);
      this.FSkipRoundBrackets = false;
    };
    this.WriteForInStatement = function (El) {
      this.Write("for (");
      if (El.FLhs != null) {
        this.WriteJS(El.FLhs);
        this.FWriter.SetCurElement(El);
      };
      this.Write(" in ");
      if (El.FList != null) {
        this.WriteJS(El.FList);
        this.FWriter.SetCurElement(El);
      };
      this.Write(") ");
      if (El.FBody != null) this.WriteJS(El.FBody);
    };
    this.WriteWhileStatement = function (El) {
      if ($lt16.isPrototypeOf(El)) {
        this.Write("do ");
        if (El.FBody != null) {
          this.FSkipCurlyBrackets = false;
          this.WriteJS(El.FBody);
          this.FWriter.SetCurElement(El);
        };
        this.Write(" while (");
        if (El.FCond != null) {
          this.FSkipRoundBrackets = true;
          this.WriteJS(El.FCond);
          this.FWriter.SetCurElement(El);
          this.FSkipRoundBrackets = false;
        };
        this.Write(")");
      } else {
        this.Write("while (");
        if (El.FCond != null) {
          this.FSkipRoundBrackets = true;
          this.WriteJS(El.FCond);
          this.FWriter.SetCurElement(El);
          this.FSkipRoundBrackets = false;
        };
        this.Write(") ");
        if (El.FBody != null) this.WriteJS(El.FBody);
      };
    };
    this.WriteImportStatement = function (El) {
      var I = 0;
      var N = null;
      var needFrom = false;
      this.Write("import ");
      needFrom = false;
      if (El.FDefaultBinding !== "") {
        this.Write(El.FDefaultBinding + " ");
        if ((El.FNameSpaceImport !== "") || El.GetHaveNamedImports()) this.Write(", ");
        needFrom = true;
      };
      if (El.FNameSpaceImport !== "") {
        this.Write("* as " + El.FNameSpaceImport + " ");
        needFrom = true;
      };
      if (El.GetHaveNamedImports()) {
        needFrom = true;
        this.Write("{ ");
        for (var $l = 0, $end = El.GetNamedImports().GetCount() - 1; $l <= $end; $l++) {
          I = $l;
          N = El.GetNamedImports().GetE(I);
          if (I > 0) this.Write(", ");
          this.Write(N.FName + " ");
          if (N.FAlias !== "") this.Write("as " + N.FAlias + " ");
        };
        this.Write("} ");
      };
      if (needFrom) this.Write("from ");
      this.Write('"' + El.FModuleName + '"');
    };
    this.WriteExportStatement = function (El) {
      var I = 0;
      var N = null;
      this.Write("export ");
      if (El.FIsDefault) this.Write("default ");
      if (El.FDeclaration != null) {
        this.WriteJS(El.FDeclaration)}
       else if (El.FNameSpaceExport !== "") {
        if (El.FNameSpaceExport !== "*") {
          this.Write("* as " + El.FNameSpaceExport)}
         else this.Write("*");
        if (El.FModuleName !== "") this.Write(' from "' + El.FModuleName + '"');
      } else if (El.GetHaveNamedExports()) {
        this.Write("{ ");
        for (var $l = 0, $end = El.GetNamedExports().GetCount() - 1; $l <= $end; $l++) {
          I = $l;
          N = El.GetNamedExports().GetE(I);
          if (I > 0) this.Write(", ");
          this.Write(N.FName);
          if (N.FAlias !== "") this.Write(" as " + N.FAlias);
        };
        this.Write(" }");
        if (El.FModuleName !== "") this.Write(' from "' + El.FModuleName + '"');
      };
    };
    this.WriteForStatement = function (El) {
      this.Write("for (");
      if (El.FInit != null) this.WriteJS(El.FInit);
      this.Write("; ");
      if (El.FCond != null) {
        this.FSkipRoundBrackets = true;
        this.WriteJS(El.FCond);
        this.FSkipRoundBrackets = false;
      };
      this.Write("; ");
      if (El.FIncr != null) this.WriteJS(El.FIncr);
      this.FWriter.SetCurElement(El);
      this.Write(") ");
      if (El.FBody != null) this.WriteJS(El.FBody);
    };
    this.WriteIfStatement = function (El) {
      var HasBTrue = false;
      var C = false;
      var HasBFalse = false;
      var BTrueNeedBrackets = false;
      C = 0 in this.FOptions;
      this.Write("if (");
      this.FSkipRoundBrackets = true;
      this.WriteJS(El.FCond);
      this.FWriter.SetCurElement(El);
      this.FSkipRoundBrackets = false;
      this.Write(")");
      if (!C) this.Write(" ");
      HasBTrue = !this.IsEmptyStatement(El.FBTrue);
      HasBFalse = !this.IsEmptyStatement(El.FBFalse);
      if (HasBTrue) {
        BTrueNeedBrackets = HasBFalse && !$lt14.isPrototypeOf(El.FBTrue) && !$lt15.isPrototypeOf(El.FBTrue);
        if (BTrueNeedBrackets) if (C) {
          this.Write("{")}
         else {
          this.WriteLn("{");
          this.Indent();
        };
        this.WriteJS(El.FBTrue);
        if (BTrueNeedBrackets) if (C) {
          this.Write("}")}
         else {
          this.Undent();
          this.WriteLn("}");
        };
      };
      if (HasBFalse) {
        this.FWriter.SetCurElement(El.FBFalse);
        if (!HasBTrue) {
          if (C) {
            this.Write("{}")}
           else this.WriteLn("{}");
        } else this.Write(" ");
        this.Write("else ");
        this.WriteJS(El.FBFalse);
      } else this.FWriter.SetCurElement(El);
    };
    this.WriteSourceElements = function (El) {
      var $Self = this;
      var C = false;
      function WriteElements(Elements) {
        var I = 0;
        var E = null;
        if (Elements === null) return;
        for (var $l = 0, $end = Elements.GetCount() - 1; $l <= $end; $l++) {
          I = $l;
          E = Elements.GetN(I).FNode;
          $Self.WriteJS(E);
          if (!C) {
            $Self.WriteLn(";")}
           else if (I < (Elements.GetCount() - 1)) {
            $Self.Write("; ")}
           else $Self.Write(";");
        };
      };
      C = 0 in this.FOptions;
      WriteElements(El.FVars);
      WriteElements(El.FFunctions);
      WriteElements(El.FStatements);
    };
    this.WriteStatementList = function (El) {
      var $Self = this;
      var C = false;
      var LastEl = null;
      var ElStack = [];
      var ElStackIndex = 0;
      function WriteNonListEl(CurEl) {
        if ($Self.IsEmptyStatement(CurEl)) return;
        if (LastEl !== null) {
          if ($Self.FLastChar !== ";") $Self.Write(";");
          if (C) {
            $Self.Write(" ")}
           else $Self.WriteLn("");
        };
        $Self.WriteJS(CurEl);
        LastEl = CurEl;
      };
      function Push(CurEl) {
        if (CurEl === null) return;
        if (ElStackIndex === rtl.length(ElStack)) ElStack = rtl.arraySetLength(ElStack,null,ElStackIndex + 8);
        ElStack[ElStackIndex] = CurEl;
        ElStackIndex += 1;
      };
      function Pop() {
        var Result = null;
        if (ElStackIndex === 0) return null;
        ElStackIndex -= 1;
        Result = ElStack[ElStackIndex];
        return Result;
      };
      var B = false;
      var CurEl = null;
      var List = null;
      C = 0 in this.FOptions;
      B = !this.FSkipCurlyBrackets;
      this.FSkipCurlyBrackets = true;
      if (B) {
        this.Write("{");
        this.Indent();
        if (!C) this.WriteLn("");
      };
      LastEl = null;
      ElStackIndex = 0;
      CurEl = El;
      while (CurEl !== null) {
        if ($lt14.isPrototypeOf(CurEl)) {
          List = CurEl;
          if ($lt14.isPrototypeOf(List.FA)) {
            Push(List.FB);
            CurEl = List.FA;
          } else {
            WriteNonListEl(List.FA);
            if ($lt14.isPrototypeOf(List.FB)) {
              CurEl = List.FB}
             else {
              WriteNonListEl(List.FB);
              CurEl = null;
            };
          };
        } else {
          WriteNonListEl(CurEl);
          CurEl = null;
        };
        if (CurEl === null) CurEl = Pop();
      };
      if ((LastEl !== null) && !C) if (this.FLastChar === ";") {
        this.WriteLn("")}
       else this.WriteLn(";");
      if (B) {
        this.Undent();
        this.FWriter.SetCurElement(El);
        this.Write("}");
      };
    };
    this.WriteTryStatement = function (El) {
      var C = false;
      C = 0 in this.FOptions;
      this.Write("try {");
      if (!this.IsEmptyStatement(El.FBlock)) {
        if (!C) this.WriteLn("");
        this.FSkipCurlyBrackets = true;
        this.Indent();
        this.WriteJS(El.FBlock);
        if (!C && !$lt14.isPrototypeOf(El.FBlock)) this.WriteLn("");
        this.Undent();
      };
      this.FWriter.SetCurElement(El);
      this.Write("}");
      if ($lt17.isPrototypeOf(El) || $lt18.isPrototypeOf(El)) {
        this.Write(" catch");
        if (El.FIdent !== "") this.Write(" (" + El.FIdent + ")");
        if (C) {
          this.Write(" {")}
         else this.WriteLn(" {");
        if (!this.IsEmptyStatement(El.FBCatch)) {
          this.FSkipCurlyBrackets = true;
          this.Indent();
          this.WriteJS(El.FBCatch);
          this.Undent();
          if (!C && !$lt14.isPrototypeOf(El.FBCatch)) this.WriteLn("");
        };
        this.FWriter.SetCurElement(El);
        this.Write("}");
      };
      if ($lt17.isPrototypeOf(El) || $lt19.isPrototypeOf(El)) {
        if (C) {
          this.Write(" finally {")}
         else this.WriteLn(" finally {");
        if (!this.IsEmptyStatement(El.FBFinally)) {
          this.Indent();
          this.FSkipCurlyBrackets = true;
          this.WriteJS(El.FBFinally);
          this.Undent();
          if (!C && !$lt14.isPrototypeOf(El.FBFinally)) this.WriteLn("");
        };
        this.FWriter.SetCurElement(El);
        this.Write("}");
      };
    };
    this.WriteVarDeclaration = function (El) {
      this.Write(El.FName);
      if (El.FInit != null) {
        this.Write(" = ");
        this.FSkipRoundBrackets = true;
        this.WriteJS(El.FInit);
        this.FSkipRoundBrackets = false;
      };
    };
    this.WriteWithStatement = function (El) {
      this.Write("with (");
      this.FSkipRoundBrackets = true;
      this.WriteJS(El.FA);
      this.FSkipRoundBrackets = false;
      this.FWriter.SetCurElement(El);
      if (0 in this.FOptions) {
        this.Write(") ")}
       else this.WriteLn(")");
      this.Indent();
      this.WriteJS(El.FB);
      this.Undent();
    };
    this.WriteVarDeclarationList = function (El) {
      this.WriteJS(El.FA);
      if (El.FB != null) {
        this.Write(", ");
        this.WriteJS(El.FB);
      };
    };
    this.WriteConditionalExpression = function (El) {
      var NeedBrackets = false;
      NeedBrackets = true;
      if (NeedBrackets) {
        this.Write("(");
        this.FSkipRoundBrackets = true;
      };
      this.WriteJS(El.FA);
      this.Write(" ? ");
      if (El.FB !== null) this.WriteJS(El.FB);
      this.Write(" : ");
      if (El.FC !== null) this.WriteJS(El.FC);
      if (NeedBrackets) this.Write(")");
    };
    this.WriteFunctionBody = function (El) {
      if (!this.IsEmptyStatement(El.FA)) this.WriteJS(El.FA);
    };
    this.WriteFunctionDeclarationStatement = function (El) {
      if (El.FFuncDef != null) this.WriteFuncDef(El.FFuncDef);
    };
    this.WriteLabeledStatement = function (El) {
      if (El.FLabel != null) {
        this.Write(El.FLabel.FName);
        if (0 in this.FOptions) {
          this.Write(": ")}
         else this.WriteLn(":");
      };
      this.WriteJS(El.FA);
    };
    this.WriteReturnStatement = function (El) {
      if (El.FExpr === null) {
        this.Write("return")}
       else {
        this.Write("return ");
        this.FSkipRoundBrackets = true;
        this.WriteJS(El.FExpr);
        this.FSkipRoundBrackets = false;
      };
    };
    this.WriteTargetStatement = function (El) {
      var TN = "";
      TN = El.FTargetName;
      if ($lt20.isPrototypeOf(El)) {
        this.WriteForStatement(El)}
       else if ($lt21.isPrototypeOf(El)) {
        this.WriteSwitchStatement(El)}
       else if ($lt22.isPrototypeOf(El)) {
        this.WriteForInStatement(El)}
       else if ($lt23.isPrototypeOf(El)) {
        this.WriteWhileStatement(El)}
       else if ($lt24.isPrototypeOf(El)) {
        if (TN !== "") {
          this.Write("continue " + TN)}
         else this.Write("continue");
      } else if ($lt25.isPrototypeOf(El)) {
        if (TN !== "") {
          this.Write("break " + TN)}
         else this.Write("break");
      } else this.Error$1('Unknown target statement class: "%s"',$lp11(18,El.$classname));
    };
    this.WriteFuncDef = function (FD) {
      var C = false;
      var I = 0;
      var A = null;
      var LastEl = null;
      var OldParams = null;
      var TypedParams = null;
      LastEl = this.FWriter.FCurElement;
      C = 0 in this.FOptions;
      if (FD.FIsAsync) this.Write("async ");
      this.Write("function ");
      if (FD.FName !== "") this.Write(FD.FName);
      this.Write("(");
      TypedParams = FD.FTypedParams;
      if (TypedParams.GetCount() > 0) {
        for (var $l = 0, $end = TypedParams.GetCount() - 1; $l <= $end; $l++) {
          I = $l;
          this.Write(TypedParams.GetParams(I).FName);
          if (I < (TypedParams.GetCount() - 1)) if (C) {
            this.Write(",")}
           else this.Write(", ");
        };
      } else {
        OldParams = FD.FParams;
        for (var $l1 = 0, $end1 = OldParams.GetCount() - 1; $l1 <= $end1; $l1++) {
          I = $l1;
          this.Write(OldParams.Get(I));
          if (I < (OldParams.GetCount() - 1)) if (C) {
            this.Write(",")}
           else this.Write(", ");
        };
      };
      this.Write(") {");
      if (!(C || FD.FIsEmpty)) {
        this.WriteLn("");
        this.Indent();
      };
      if (FD.FBody != null) {
        this.FSkipCurlyBrackets = true;
        this.WriteJS(FD.FBody);
        A = FD.FBody.FA;
        if ((A != null) && !$lt14.isPrototypeOf(A) && !$lt26.isPrototypeOf(A) && !$lt15.isPrototypeOf(A)) {
          if (this.FLastChar !== ";") this.Write(";");
          if (C) {
            this.Write(" ")}
           else this.WriteLn("");
        };
      };
      this.FWriter.SetCurElement(LastEl);
      if (C) {
        this.Write("}")}
       else {
        this.Undent();
        this.Write("}");
      };
    };
    this.WritePrimaryExpression = function (El) {
      if ($lt27.isPrototypeOf(El)) {
        this.Write("this")}
       else if ($lt28.isPrototypeOf(El)) {
        this.Write(El.FName)}
       else this.Error$1(rtl.getResStr($mod,"SErrUnknownJSClass"),$lp11(18,El.$classname));
    };
    this.WriteBinary = function (El) {
      var $Self = this;
      var ElC = null;
      var S = "";
      function WriteRight(Bin) {
        $Self.FSkipRoundBrackets = (Bin.FB.$class.ClassType() === ElC) && ((ElC === $lt29) || (ElC === $lt30));
        $Self.Write(S);
        $Self.WriteJS(Bin.FB);
        $Self.FWriter.SetCurElement(Bin);
      };
      var AllowCompact = false;
      var WithBrackets = false;
      var Left = null;
      var SubBin = null;
      var Binaries = [];
      var BinariesCnt = 0;
      WithBrackets = !this.FSkipRoundBrackets;
      if (WithBrackets) this.Write("(");
      this.FSkipRoundBrackets = false;
      ElC = El.$class.ClassType();
      Left = El.FA;
      AllowCompact = false;
      S = "";
      if ($lt31.isPrototypeOf(El)) {
        S = El.$class.OperatorString();
        AllowCompact = El.$class.AllowCompact();
      };
      if (!(AllowCompact && (0 in this.FOptions))) {
        if ($lt32.isPrototypeOf(El)) {
          S = S + " "}
         else S = " " + S + " ";
      };
      if ($lt31.isPrototypeOf(Left) && (Left.$class.ClassType() === ElC) && ((ElC === $lt29) || (ElC === $lt30) || (ElC === $lt33) || (ElC === $lt34) || (ElC === $lt35) || (ElC === $lt36) || (ElC === $lt37) || (ElC === $lt38))) {
        Binaries = rtl.arraySetLength(Binaries,null,8);
        BinariesCnt = 0;
        while ($lt31.isPrototypeOf(Left)) {
          SubBin = Left;
          if (SubBin.$class.ClassType() !== ElC) break;
          if (BinariesCnt === rtl.length(Binaries)) Binaries = rtl.arraySetLength(Binaries,null,BinariesCnt * 2);
          Binaries[BinariesCnt] = SubBin;
          BinariesCnt += 1;
          Left = SubBin.FA;
        };
        this.WriteJS(Left);
        this.FWriter.SetCurElement(El);
        while (BinariesCnt > 0) {
          BinariesCnt -= 1;
          WriteRight(Binaries[BinariesCnt]);
        };
      } else {
        this.WriteJS(Left);
        this.FWriter.SetCurElement(El);
      };
      WriteRight(El);
      if (WithBrackets) this.Write(")");
    };
    this.IsEmptyStatement = function (El) {
      var Result = false;
      if (El === null) return true;
      if ((El.$class.ClassType() === $lt39) && !(2 in this.FOptions)) return true;
      Result = false;
      return Result;
    };
    this.EscapeString = function (S, Quote) {
      var Result = "";
      var I = 0;
      var J = 0;
      var L = 0;
      var R = "";
      var c = 0;
      I = 1;
      J = 1;
      R = "";
      L = S.length;
      while (I <= L) {
        c = S.charCodeAt(I - 1);
        if ((c in rtl.createSet(null,0,31,34,39,92)) || (c >= 0xff00) || ((c >= 0xD800) && (c <= 0xDFFF)) || (c === 0x1680) || ((c >= 0x2000) && (c <= 0x200A)) || (c === 0x2028) || (c === 0x205F) || (c === 0x3000)) {
          R = R + $lp1(S,J,I - J);
          var $tmp = c;
          if ($tmp === 92) {
            R = R + "\\\\"}
           else if ($tmp === 34) {
            if (Quote === 0) {
              R = R + '"'}
             else R = R + '\\"'}
           else if ($tmp === 39) {
            if (Quote === 1) {
              R = R + "'"}
             else R = R + "\\'"}
           else if ((($tmp >= 0) && ($tmp <= 7)) || ($tmp === 11) || (($tmp >= 14) && ($tmp <= 31))) {
            R = R + "\\x" + rtl.hexStr(c,2)}
           else if ($tmp === 8) {
            R = R + "\\b"}
           else if ($tmp === 9) {
            R = R + "\\t"}
           else if ($tmp === 10) {
            R = R + "\\n"}
           else if ($tmp === 12) {
            R = R + "\\f"}
           else if ($tmp === 13) {
            R = R + "\\r"}
           else if (($tmp >= 0xD800) && ($tmp <= 0xDBFF)) {
            if (I < L) {
              c = S.charCodeAt((I + 1) - 1);
              if ((c >= 0xDC00) && (c <= 0xDFFF)) {
                R = R + $lp1(S,I,2);
                I += 1;
              } else {
                R = R + "\\u" + rtl.hexStr(S.charCodeAt(I - 1),4);
              };
            } else R = R + "\\u" + rtl.hexStr(c,4);
          } else if (($tmp >= 0xDC00) && ($tmp <= 0xDFFF)) {
            R = R + "\\u" + rtl.hexStr(c,4);
          } else {
            R = R + "\\u" + rtl.hexStr(c,4);
          };
          J = I + 1;
        };
        I += 1;
      };
      R = R + $lp1(S,J,I - 1);
      Result = R;
      return Result;
    };
    this.Create$1 = function (AWriter) {
      this.FWriter = AWriter;
      this.FIndentChar = " ";
      this.FOptions = {};
      return this;
    };
    this.Destroy = function () {
      if (this.FFreeWriter) {
        rtl.free(this,"FWriter");
        this.FWriter = null;
      };
      $lt6.Destroy.call(this);
    };
    this.WriteJS = function (El) {
      var C = null;
      this.FWriter.SetCurElement(El);
      C = El.$class.ClassType();
      if (C === $lt15) {
        this.WriteEmptyBlockStatement(El)}
       else if (C === $lt39) {
        this.WriteEmptyStatement(El)}
       else if (C === $lt40) {
        this.WriteDebuggerStatement(El)}
       else if (C === $lt13) {
        this.WriteLiteral(El)}
       else if (C.InheritsFrom($lt9)) {
        this.WritePrimaryExpression(El)}
       else if (C.InheritsFrom($lt41)) {
        this.WriteArrayLiteral(El)}
       else if (C === $lt42) {
        this.WriteObjectLiteral(El)}
       else if (C.InheritsFrom($lt43)) {
        this.WriteMemberExpression(El)}
       else if (C === $lt44) {
        this.WriteRegularExpressionLiteral(El)}
       else if (C === $lt12) {
        this.WriteCallExpression(El)}
       else if (C === $lt45) {
        this.WriteLabeledStatement(El)}
       else if (C === $lt46) {
        this.WriteFunctionBody(El)}
       else if (C === $lt47) {
        this.WriteVariableStatement(El)}
       else if (C.InheritsFrom($lt48)) {
        this.WriteUnary(El)}
       else if (C === $lt49) {
        this.WriteVarDeclarationList(El)}
       else if (C === $lt14) {
        this.WriteStatementList(El)}
       else if (C === $lt50) {
        this.WriteWithStatement(El)}
       else if (C.InheritsFrom($lt51)) {
        this.WriteBinary(El)}
       else if (C === $lt52) {
        this.WriteConditionalExpression(El)}
       else if (C.InheritsFrom($lt53)) {
        this.WriteAssignStatement(El)}
       else if (C === $lt54) {
        this.WriteVarDeclaration(El)}
       else if (C === $lt55) {
        this.WriteIfStatement(El)}
       else if (C === $lt56) {
        this.WriteImportStatement(El)}
       else if (C === $lt57) {
        this.WriteExportStatement(El)}
       else if (C.InheritsFrom($lt58)) {
        this.WriteTargetStatement(El)}
       else if (C === $lt59) {
        this.WriteReturnStatement(El)}
       else if (C.InheritsFrom($lt60)) {
        this.WriteTryStatement(El)}
       else if (C === $lt61) {
        this.WriteFunctionDeclarationStatement(El)}
       else if (C === $lt26) {
        this.WriteSourceElements(El)}
       else if (El === null) {
        this.Error(rtl.getResStr($mod,"SErrNilNode"))}
       else this.Error$1(rtl.getResStr($mod,"SErrUnknownJSClass"),$lp11(18,El.$classname));
      this.FSkipCurlyBrackets = false;
    };
    this.Indent = function () {
      this.FCurIndent += this.FIndentSize;
    };
    this.Undent = function () {
      if (this.FCurIndent >= this.FIndentSize) {
        this.FCurIndent -= this.FIndentSize}
       else this.FCurIndent = 0;
    };
  });
  rtl.createClass(this,"EJSWriter",$lt62,function () {
    $lt5 = this;
  });
  this.QuoteJSString = function (S, Quote) {
    var Result = "";
    var i = 0;
    var j = 0;
    var Count = 0;
    if (Quote === "\x00") {
      if ($lp2('"',S) > 0) {
        Quote = "'"}
       else Quote = '"';
    };
    Result = "" + Quote;
    Count = S.length;
    i = 0;
    j = 0;
    while (i < Count) {
      i += 1;
      if (S.charAt(i - 1) === Quote) {
        Result = Result + $lp1(S,1 + j,i - j) + Quote;
        j = i;
      };
    };
    if (i !== j) Result = Result + $lp1(S,1 + j,i - j);
    Result = Result + Quote;
    return Result;
  };
  $mod.$implcode = function () {
    $impl.LeftStr = function (s, Count) {
      var Result = "";
      Result = $lp1(s,1,Count);
      return Result;
    };
    $mod.$resourcestrings = {SErrUnknownJSClass: {org: "Unknown javascript element class : %s"}, SErrNilNode: {org: "Nil node in Javascript"}};
  };
},[]);
rtl.module("JSSrcMap",["System","JS","Classes","SysUtils","fpjson"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lm = pas.SysUtils;
  var $lt6 = $lm.Exception;
  var $lm1 = pas.System;
  var $lt7 = $lm1.TObject;
  var $lm2 = pas.Classes;
  var $lt8 = $lm2.TStringList;
  var $lt9 = $lm2.TFPList;
  var $lp = $lm.FreeAndNil;
  var $lp1 = $lm1.VarRecs;
  var $lm3 = pas.fpjson;
  var $lt10 = $lm3.TJSONObject;
  var $lt11 = $lm3.TJSONArray;
  var $lt12 = $lm3.TJSONNull;
  var $lt13 = $lm.ERangeError;
  this.Base64Chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  rtl.createClass(this,"EJSSourceMap",$lt6,function () {
    $lt = this;
  });
  rtl.createClass(this,"TSourceMapSegment",$lt7,function () {
    $lt1 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Index = 0;
      this.GeneratedLine = 0;
      this.GeneratedColumn = 0;
      this.SrcFileIndex = 0;
      this.SrcLine = 0;
      this.SrcColumn = 0;
      this.NameIndex = 0;
    };
  });
  rtl.createClass(this,"TSourceMapSrc",$lt7,function () {
    $lt2 = this;
    this.$init = function () {
      $lt7.$init.call(this);
      this.Filename = "";
      this.TranslatedFilename = "";
      this.Source = "";
    };
  });
  $lt3 = this.TSourceMapOption = {"0": "smoAddMonotonous", smoAddMonotonous: 0, "1": "smoAutoLineStart", smoAutoLineStart: 1, "2": "smoSafetyHeader", smoSafetyHeader: 2, "3": "smoAllowSrcLine0", smoAllowSrcLine0: 3};
  this.DefaultSourceMapOptions = rtl.createSet(0,2);
  rtl.createClass(this,"TSourceMap",$lt7,function () {
    $lt4 = this;
    rtl.createClass(this,"TStringToIndex",$lt7,function () {
      $lt5 = this;
      this.$init = function () {
        $lt7.$init.call(this);
        this.FItems = null;
      };
      this.$final = function () {
        this.FItems = undefined;
        $lt7.$final.call(this);
      };
      this.Create$1 = function () {
        this.FItems = new Object();
        return this;
      };
      this.Destroy = function () {
        this.FItems = null;
        $lt7.Destroy.call(this);
      };
      this.Clear = function () {
        this.FItems = new Object();
      };
      this.Add = function (Value, Index) {
        this.FItems["%" + Value] = Index;
      };
      this.FindValue = function (Value) {
        var Result = 0;
        if (this.FItems.hasOwnProperty("%" + Value)) {
          Result = rtl.trunc(this.FItems["%" + Value])}
         else Result = -1;
        return Result;
      };
    },"TSourceMap.TStringToIndex");
    this.$init = function () {
      $lt7.$init.call(this);
      this.FGeneratedFilename = "";
      this.FNames = null;
      this.FNameToIndex = null;
      this.FItems = null;
      this.FOptions = {};
      this.FSorted = false;
      this.FSourceRoot = "";
      this.FSources = null;
      this.FSourceToIndex = null;
      this.FVersion = 0;
    };
    this.$final = function () {
      this.FNames = undefined;
      this.FNameToIndex = undefined;
      this.FItems = undefined;
      this.FOptions = undefined;
      this.FSources = undefined;
      this.FSourceToIndex = undefined;
      $lt7.$final.call(this);
    };
    this.GetNames = function (Index) {
      var Result = "";
      Result = this.FNames.Get(Index);
      return Result;
    };
    this.GetItems = function (Index) {
      var Result = null;
      Result = rtl.getObject(this.FItems.Get(Index));
      return Result;
    };
    this.GetSourceContents = function (Index) {
      var Result = "";
      Result = rtl.getObject(this.FSources.Get(Index)).Source;
      return Result;
    };
    this.GetSourceFiles = function (Index) {
      var Result = "";
      Result = rtl.getObject(this.FSources.Get(Index)).Filename;
      return Result;
    };
    this.GetSourceTranslatedFiles = function (Index) {
      var Result = "";
      Result = rtl.getObject(this.FSources.Get(Index)).TranslatedFilename;
      return Result;
    };
    this.SetGeneratedFilename = function (AValue) {
      if (this.FGeneratedFilename === AValue) return;
      this.FGeneratedFilename = AValue;
    };
    this.SetSourceContents = function (Index, AValue) {
      rtl.getObject(this.FSources.Get(Index)).Source = AValue;
    };
    this.SetSourceTranslatedFiles = function (Index, AValue) {
      rtl.getObject(this.FSources.Get(Index)).TranslatedFilename = AValue;
    };
    this.Create$1 = function (aGeneratedFilename) {
      this.FOptions = rtl.refSet($mod.DefaultSourceMapOptions);
      this.FVersion = 3;
      this.FNames = $lt8.$create("Create$1");
      this.FNameToIndex = $lt5.$create("Create$1");
      this.FItems = $lt9.$create("Create");
      this.FSources = $lt9.$create("Create");
      this.FSourceToIndex = $lt5.$create("Create$1");
      this.SetGeneratedFilename(aGeneratedFilename);
      this.FSorted = true;
      return this;
    };
    this.Destroy = function () {
      this.Clear();
      $lp({p: this, get: function () {
          return this.p.FSourceToIndex;
        }, set: function (v) {
          this.p.FSourceToIndex = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FSources;
        }, set: function (v) {
          this.p.FSources = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FItems;
        }, set: function (v) {
          this.p.FItems = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FNameToIndex;
        }, set: function (v) {
          this.p.FNameToIndex = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FNames;
        }, set: function (v) {
          this.p.FNames = v;
        }});
      $lt7.Destroy.call(this);
    };
    this.Clear = function () {
      var i = 0;
      this.FGeneratedFilename = "";
      this.FSourceToIndex.Clear();
      for (var $l = 0, $end = this.FSources.FCount - 1; $l <= $end; $l++) {
        i = $l;
        rtl.getObject(this.FSources.Get(i)).$destroy("Destroy");
      };
      this.FSources.Clear();
      for (var $l1 = 0, $end1 = this.FItems.FCount - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        rtl.getObject(this.FItems.Get(i)).$destroy("Destroy");
      };
      this.FItems.Clear();
      this.FNameToIndex.Clear();
      this.FNames.Clear();
      this.FSourceRoot = "";
      this.FSorted = true;
    };
    this.AddMapping = function (GeneratedLine, GeneratedCol, SourceFile, SrcLine, SrcCol, Name) {
      var $Self = this;
      var Result = null;
      function RaiseInvalid(Msg) {
        throw $lt.$create("CreateFmt",['%s (GeneratedLine=%d GeneratedCol=%d SrcFile="%s" SrcLine=%d SrcCol=%d Name="%s")',$lp1(18,Msg,0,GeneratedLine,0,GeneratedCol,18,SourceFile,0,SrcLine,0,SrcCol,18,Name)]);
      };
      var NodeCnt = 0;
      var OtherNode = null;
      if (GeneratedLine < 1) RaiseInvalid("invalid GeneratedLine");
      if (GeneratedCol < 0) RaiseInvalid("invalid GeneratedCol");
      if (SourceFile === "") {
        if (this.Count() === 0) RaiseInvalid("missing source file");
        if (SrcLine !== 1) RaiseInvalid("invalid SrcLine");
        if (SrcCol !== 0) RaiseInvalid("invalid SrcCol");
        if (Name !== "") RaiseInvalid("invalid Name");
      } else {
        if (SrcLine < 1) {
          if ((SrcLine < 0) || !(3 in this.FOptions)) RaiseInvalid("invalid SrcLine");
        };
        if (SrcCol < 0) RaiseInvalid("invalid SrcCol");
      };
      NodeCnt = this.Count();
      if (NodeCnt > 0) {
        OtherNode = this.GetItems(NodeCnt - 1);
        if ((OtherNode.GeneratedLine > GeneratedLine) || ((OtherNode.GeneratedLine === GeneratedLine) && (OtherNode.GeneratedColumn > GeneratedCol))) {
          if (0 in this.FOptions) {
            RaiseInvalid("GeneratedLine/Col not monotonous")}
           else this.FSorted = false;
        };
      };
      Result = $lt1.$create("Create");
      Result.Index = this.FItems.FCount;
      Result.GeneratedLine = GeneratedLine;
      Result.GeneratedColumn = GeneratedCol;
      if (SourceFile === "") {
        Result.SrcFileIndex = -1}
       else Result.SrcFileIndex = this.IndexOfSourceFile(SourceFile,true);
      Result.SrcLine = SrcLine;
      Result.SrcColumn = SrcCol;
      if (Name !== "") {
        Result.NameIndex = this.IndexOfName(Name,true)}
       else Result.NameIndex = -1;
      this.FItems.Add(Result);
      return Result;
    };
    this.CreateMappings = function () {
      var $Self = this;
      var Result = "";
      var buf = null;
      function AddStr(s) {
        buf.push(s);
      };
      function AddChar(c) {
        buf.push(c);
      };
      var i = 0;
      var LastGeneratedLine = 0;
      var LastGeneratedColumn = 0;
      var j = 0;
      var LastSrcFileIndex = 0;
      var LastSrcLine = 0;
      var LastSrcColumn = 0;
      var SrcLine = 0;
      var LastNameIndex = 0;
      var Item = null;
      Result = "";
      LastGeneratedLine = 1;
      LastGeneratedColumn = 0;
      LastSrcFileIndex = 0;
      LastSrcLine = 0;
      LastSrcColumn = 0;
      LastNameIndex = 0;
      buf = new Array();
      try {
        for (var $l = 0, $end = this.Count() - 1; $l <= $end; $l++) {
          i = $l;
          Item = this.GetItems(i);
          if (LastGeneratedLine < Item.GeneratedLine) {
            LastGeneratedColumn = 0;
            for (var $l1 = LastGeneratedLine + 1, $end1 = Item.GeneratedLine; $l1 <= $end1; $l1++) {
              j = $l1;
              AddChar(";");
              if ((1 in this.FOptions) && ((j < Item.GeneratedLine) || (Item.GeneratedColumn > 0))) {
                AddStr($mod.EncodeBase64VLQ(0 - LastGeneratedColumn));
                LastGeneratedColumn = 0;
                AddStr($mod.EncodeBase64VLQ(0));
                AddStr($mod.EncodeBase64VLQ(0));
                AddStr($mod.EncodeBase64VLQ(0));
                if (j === Item.GeneratedLine) AddChar(",");
              };
            };
            LastGeneratedLine = Item.GeneratedLine;
          } else if (i > 0) {
            if ((LastGeneratedLine === Item.GeneratedLine) && (LastGeneratedColumn === Item.GeneratedColumn)) continue;
            AddChar(",");
          };
          AddStr($mod.EncodeBase64VLQ(Item.GeneratedColumn - LastGeneratedColumn));
          LastGeneratedColumn = Item.GeneratedColumn;
          if (Item.SrcFileIndex < 0) continue;
          AddStr($mod.EncodeBase64VLQ(Item.SrcFileIndex - LastSrcFileIndex));
          LastSrcFileIndex = Item.SrcFileIndex;
          SrcLine = Item.SrcLine - 1;
          AddStr($mod.EncodeBase64VLQ(SrcLine - LastSrcLine));
          LastSrcLine = SrcLine;
          AddStr($mod.EncodeBase64VLQ(Item.SrcColumn - LastSrcColumn));
          LastSrcColumn = Item.SrcColumn;
          if (Item.NameIndex < 0) continue;
          AddStr($mod.EncodeBase64VLQ(Item.NameIndex - LastNameIndex));
          LastNameIndex = Item.NameIndex;
        };
        Result = buf.join("");
      } finally {
      };
      return Result;
    };
    this.ToJSON = function () {
      var Result = null;
      var Obj = null;
      var i = 0;
      var Arr = null;
      var Mappings = "";
      Result = null;
      Mappings = this.CreateMappings();
      Obj = $lt10.$create("Create$2");
      try {
        Obj.Add$5("version",this.FVersion);
        if (this.FGeneratedFilename !== "") Obj.Add$3("file",this.FGeneratedFilename);
        if (this.FSourceRoot !== "") Obj.Add$3("sourceRoot",this.FSourceRoot);
        Arr = $lt11.$create("Create$2");
        Obj.Add$7("sources",Arr);
        for (var $l = 0, $end = this.SourceCount() - 1; $l <= $end; $l++) {
          i = $l;
          Arr.Add$3(this.GetSourceTranslatedFiles(i));
        };
        i = this.SourceCount() - 1;
        while (i >= 0) if (this.GetSourceContents(i) === "") {
          i -= 1}
         else {
          Arr = $lt11.$create("Create$2");
          Obj.Add$7("sourcesContent",Arr);
          for (var $l1 = 0, $end1 = this.SourceCount() - 1; $l1 <= $end1; $l1++) {
            i = $l1;
            if (this.GetSourceContents(i) === "") {
              Arr.Add($lt12.$create("Create$1"))}
             else Arr.Add$3(this.GetSourceContents(i));
          };
          break;
        };
        Arr = $lt11.$create("Create$2");
        Obj.Add$7("names",Arr);
        for (var $l2 = 0, $end2 = this.NameCount() - 1; $l2 <= $end2; $l2++) {
          i = $l2;
          Arr.Add$3(this.GetNames(i));
        };
        Obj.Add$3("mappings",Mappings);
        Result = Obj;
      } finally {
        if (Result === null) Obj = rtl.freeLoc(Obj);
      };
      return Result;
    };
    this.SaveToStream = function (aStream) {
      var Obj = null;
      Obj = this.ToJSON();
      try {
        if (2 in this.FOptions) {
          aStream.push($mod.DefaultSrcMapHeader());
        };
        Obj.DumpJSON(aStream);
      } finally {
        Obj = rtl.freeLoc(Obj);
      };
    };
    this.IndexOfName = function (Name, AddIfNotExists) {
      var Result = 0;
      Result = this.FNameToIndex.FindValue(Name);
      if ((Result >= 0) || !AddIfNotExists) return Result;
      Result = this.FNames.GetCount();
      this.FNames.Add(Name);
      this.FNameToIndex.Add(Name,Result);
      return Result;
    };
    this.IndexOfSourceFile = function (SrcFile, AddIfNotExists) {
      var Result = 0;
      var Src = null;
      Result = this.FSourceToIndex.FindValue(SrcFile);
      if ((Result >= 0) || !AddIfNotExists) return Result;
      Src = $lt2.$create("Create");
      Src.Filename = SrcFile;
      Src.TranslatedFilename = SrcFile;
      Result = this.FSources.FCount;
      this.FSources.Add(Src);
      this.FSourceToIndex.Add(SrcFile,Result);
      return Result;
    };
    this.Count = function () {
      var Result = 0;
      Result = this.FItems.FCount;
      return Result;
    };
    this.SourceCount = function () {
      var Result = 0;
      Result = this.FSources.FCount;
      return Result;
    };
    this.NameCount = function () {
      var Result = 0;
      Result = this.FNames.GetCount();
      return Result;
    };
  });
  this.DefaultSrcMapHeader = function () {
    var Result = "";
    Result = ")]}'" + $lm1.LineEnding;
    return Result;
  };
  this.EncodeBase64VLQ = function (i) {
    var Result = "";
    function RaiseRange() {
      throw $lt13.$create("Create$1",["EncodeBase64VLQ"]);
    };
    var digits = 0;
    Result = "";
    if (i < 0) {
      i = -i;
      if (i > Math.floor((9007199254740991 - 1) / 2)) RaiseRange();
      i = rtl.shl(i,1) + 1;
    } else {
      if (i > 4503599627370495) RaiseRange();
      i = rtl.shl(i,1);
    };
    do {
      digits = i & 31;
      i = Math.floor(i / 32);
      if (i > 0) digits += 32;
      Result = Result + $mod.Base64Chars.charAt((digits + 1) - 1);
    } while (!(i === 0));
    return Result;
  };
});
rtl.module("Pas2JSUtils",["System","Classes","SysUtils"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lm = pas.System;
  var $lp = $lm.Copy;
  var $lm1 = pas.SysUtils;
  var $lp1 = $lm1.LowerCase;
  var $lp2 = $lm.Delete;
  this.ChompPathDelim = function (Path) {
    var Result = "";
    var Len = 0;
    var MinLen = 0;
    Result = Path;
    if (Path === "") return Result;
    Len = Result.length;
    if (Result.charCodeAt(0) in $lm.AllowDirectorySeparators) {
      MinLen = 1;
      if ((Len >= 2) && (Result.charAt(1) === Result.charAt(0)) && ($lm.PathDelim === "\\")) MinLen = 2;
    } else {
      MinLen = 0;
      if (($lm.PathDelim === "\\") && (Len >= 3) && (Result.charCodeAt(0) in rtl.createSet(null,97,122,null,65,90)) && (Result.charAt(1) === ":") && (Result.charCodeAt(2) in $lm.AllowDirectorySeparators)) MinLen = 3;
    };
    while ((Len > MinLen) && (Result.charCodeAt(Len - 1) in $lm.AllowDirectorySeparators)) Len -= 1;
    if (Len < Result.length) Result = rtl.strSetLength(Result,Len);
    return Result;
  };
  this.GetNextDelimitedItem = function (List, Delimiter, Position) {
    var Result = "";
    var StartPos = 0;
    StartPos = Position.get();
    while ((Position.get() <= List.length) && (List.charAt(Position.get() - 1) !== Delimiter)) Position.set(Position.get() + 1);
    Result = $lp(List,StartPos,Position.get() - StartPos);
    if (Position.get() <= List.length) Position.set(Position.get() + 1);
    return Result;
  };
  this.NormalizeEncoding = function (Encoding) {
    var Result = "";
    var i = 0;
    Result = $lp1(Encoding);
    for (var $l = Result.length; $l >= 1; $l--) {
      i = $l;
      if (Result.charAt(i - 1) === "-") $lp2({get: function () {
          return Result;
        }, set: function (v) {
          Result = v;
        }},i,1);
    };
    return Result;
  };
  var TMode = {"0": "mNormal", mNormal: 0, "1": "mApostrophe", mApostrophe: 1, "2": "mQuote", mQuote: 2};
  this.SplitCmdLineParams = function (Params, ParamList, ReadBackslash) {
    var p = 0;
    var Mode = 0;
    var Param = "";
    p = 1;
    while (p <= Params.length) {
      while ((p <= Params.length) && (Params.charCodeAt(p - 1) in rtl.createSet(32,9,10,13))) p += 1;
      if ((p > Params.length) || (Params.charAt(p - 1) === "\x00")) break;
      Param = "";
      Mode = 0;
      while (p <= Params.length) {
        var $tmp = Params.charAt(p - 1);
        if ($tmp === "\x00") {
          break}
         else if ($tmp === "\\") {
          p += 1;
          if (ReadBackslash) {
            if ((p > Params.length) || (Params.charAt(p - 1) === "\x00")) break;
            if (Params.charCodeAt(p - 1) < 128) {
              Param += Params.charAt(p - 1);
              p += 1;
            };
          } else {
            Param += "\\";
          };
        } else if ($tmp === "'") {
          p += 1;
          var $tmp1 = Mode;
          if ($tmp1 === 0) {
            Mode = 1}
           else if ($tmp1 === 1) {
            Mode = 0}
           else if ($tmp1 === 2) Param += "'";
        } else if ($tmp === '"') {
          p += 1;
          var $tmp2 = Mode;
          if ($tmp2 === 0) {
            Mode = 2}
           else if ($tmp2 === 1) {
            Param += '"'}
           else if ($tmp2 === 2) Mode = 0;
        } else if (($tmp === " ") || ($tmp === "\t") || ($tmp === "\n") || ($tmp === "\r")) {
          if (Mode === 0) break;
          Param += Params.charAt(p - 1);
          p += 1;
        } else {
          Param += Params.charAt(p - 1);
          p += 1;
        };
      };
      ParamList.Add(Param);
    };
  };
  $mod.$implcode = function () {
    $impl.InternalInit = function () {
    };
  };
  $mod.$init = function () {
    $impl.InternalInit();
  };
},[]);
rtl.module("pas2jsresstrfile",["System","SysUtils","fpjson"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lm = pas.SysUtils;
  var $lt2 = $lm.Exception;
  var $lm1 = pas.System;
  var $lt3 = $lm1.TObject;
  var $lm2 = pas.fpjson;
  var $lt4 = $lm2.TJSONObject;
  var $lp = $lm.FreeAndNil;
  var $lp1 = $lm.IsValidIdent;
  var $lp2 = $lm1.VarRecs;
  rtl.createClass(this,"EResourceStringsFile",$lt2,function () {
    $lt = this;
  });
  rtl.createClass(this,"TResourceStringsFile",$lt3,function () {
    $lt1 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FCurrentUnit = "";
      this.FStrings = null;
      this.FUnit = null;
    };
    this.$final = function () {
      this.FStrings = undefined;
      this.FUnit = undefined;
      $lt3.$final.call(this);
    };
    this.GetStringsCount = function () {
      var Result = 0;
      var I = 0;
      Result = 0;
      for (var $l = 0, $end = this.FStrings.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        Result = Result + this.FStrings.GetItem(I).GetCount();
      };
      return Result;
    };
    this.Create$1 = function () {
      this.FStrings = $lt4.$create("Create$2");
      this.FUnit = null;
      return this;
    };
    this.Destroy = function () {
      this.FUnit = null;
      $lp({p: this, get: function () {
          return this.p.FStrings;
        }, set: function (v) {
          this.p.FStrings = v;
        }});
      $lt3.Destroy.call(this);
    };
    this.Clear = function () {
      this.FStrings.Clear();
    };
    this.StartUnit = function (aUnitName) {
      var I = 0;
      if (aUnitName === this.FCurrentUnit) return;
      if (!$lp1(aUnitName,true,true)) throw $lt.$create("CreateFmt",[rtl.getResStr($mod,"SErrInvalidUnitName"),$lp2(18,aUnitName)]);
      I = this.FStrings.IndexOfName(aUnitName,false);
      if (I !== -1) {
        this.FUnit = rtl.as(this.FStrings.GetItem(I),$lt4)}
       else {
        this.FUnit = $lt4.$create("Create$2");
        this.FStrings.Add(aUnitName,this.FUnit);
      };
      this.FCurrentUnit = aUnitName;
    };
    this.AddString = function (aName, aValue) {
      if (!$lp1(aName,false,false)) throw $lt.$create("CreateFmt",[rtl.getResStr($mod,"SErrInvalidStringName"),$lp2(18,aName)]);
      if (this.FUnit === null) throw $lt.$create("Create$1",[rtl.getResStr($mod,"SErrNoCurrentUnit")]);
      this.FUnit.Add$3(aName,aValue);
    };
    this.AsString = function () {
      var Result = "";
      Result = this.FStrings.FormatJSON($lm2.DefaultFormat,2);
      return Result;
    };
  });
  $mod.$implcode = function () {
    $mod.$resourcestrings = {SErrNoCurrentUnit: {org: "No current unit."}, SErrInvalidUnitName: {org: 'Invalid unit name: "%s"'}, SErrInvalidStringName: {org: 'Invalid TJSONStringType name: "%s"'}};
  };
},[]);
rtl.module("pas2jsresources",["System","Classes","SysUtils","Web","Pas2JSFS","jstree"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lm = pas.System;
  var $lt3 = $lm.TObject;
  var $lm1 = pas.SysUtils;
  var $lp = $lm1.ExtractFileExt;
  var $lp1 = $lm.Copy;
  var $lp2 = $lm.Pos;
  var $lp3 = $lm1.LowerCase;
  $lt = this.TResourceOutputMode = {"0": "romNone", romNone: 0, "1": "romJS", romJS: 1, "2": "romFile", romFile: 2, "3": "romExtraJS", romExtraJS: 3};
  rtl.createClass(this,"TPas2jsResourceHandler",$lt3,function () {
    $lt1 = this;
    this.$init = function () {
      $lt3.$init.call(this);
      this.FCurrentUnitName = "";
      this.FFS = null;
    };
    this.$final = function () {
      this.FFS = undefined;
      $lt3.$final.call(this);
    };
    this.GetFormat = function (aFileName, aOptions) {
      var Result = "";
      var E = "";
      Result = aOptions.GetValue("format");
      if (Result === "") {
        E = $lp(aFileName);
        if ((E !== "") && (E.charAt(0) === ".")) E = $lp1(E,2,E.length - 1);
        if ($lp2($lp3(E),";png;jpg;jpeg;bmp;ico;") > 0) {
          Result = "image/" + E}
         else if ($lp2($lp3(E),";htm;html;") > 0) {
          Result = "text/html"}
         else if ($lp2($lp3(E),";txt;lpr;pas;pp;") > 0) {
          Result = "text/text"}
         else if ($lp2($lp3(E),";js;") > 0) {
          Result = "application/javascript"}
         else if ($lp2($lp3(E),";json;") > 0) {
          Result = "application/javascript"}
         else Result = "application/octet-stream";
      };
      return Result;
    };
    this.Create$1 = function (aFS) {
      this.FFS = aFS;
      return this;
    };
    this.OutputFileExtension = function () {
      var Result = "";
      Result = "";
      return Result;
    };
    this.LoadFile = function (aFileName) {
      var Result = null;
      Result = this.FFS.LoadFile(aFileName,true);
      return Result;
    };
    this.GetFileAsBase64 = function (aFileName) {
      var Result = "";
      var F = null;
      F = this.LoadFile(aFileName);
      Result = window.atob(F.FSource);
      return Result;
    };
    this.StartUnit = function (aUnitName) {
      this.FCurrentUnitName = aUnitName;
    };
    this.ClearUnit = function () {
      this.FCurrentUnitName = "";
    };
    this.DoneUnit = function (isMainFile) {
      if (!isMainFile) this.ClearUnit();
    };
    this.WriteJS = function (aUnitName, aModule) {
      var Result = null;
      Result = aModule;
      if (aUnitName === "") ;
      return Result;
    };
  });
  rtl.createClass(this,"TNoResources",$lt1,function () {
    $lt2 = this;
    this.HandleResource = function (aFileName, Options) {
      if (aFileName === "") ;
      if (Options === null) ;
    };
    this.OutputMode = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.GetResourceCount = function () {
      var Result = 0;
      Result = 0;
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      Result = "";
      return Result;
    };
  });
});
rtl.module("pas2jshtmlresources",["System","Classes","SysUtils","pas2jsresources","Pas2JSFS"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lm = pas.pas2jsresources;
  var $lt1 = $lm.TPas2jsResourceHandler;
  var $lm1 = pas.SysUtils;
  var $lp = $lm1.Format;
  var $lm2 = pas.System;
  var $lp1 = $lm2.VarRecs;
  var $lm3 = pas.Classes;
  var $lt2 = $lm3.TStringList;
  var $lp2 = $lm1.ChangeFileExt;
  var $lp3 = $lm1.ExtractFileName;
  var $lp4 = $lm1.FreeAndNil;
  var $lt3 = $lm2.TObject;
  rtl.createClass(this,"THTMLResourceLinkHandler",$lt1,function () {
    $lt = this;
    this.$init = function () {
      $lt1.$init.call(this);
      this.FLinkType = "";
      this.FPrefix = "";
      this.FResources = null;
    };
    this.$final = function () {
      this.FResources = undefined;
      $lt1.$final.call(this);
    };
    this.GetResourceCount = function () {
      var Result = 0;
      Result = this.FResources.GetCount();
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      Result = this.FResources.GetTextStr();
      return Result;
    };
    this.CreateDataLink = function (aResourceName, aFormat, aData) {
      var Result = "";
      Result = $lp('<link rel="%s" as="script" id="%s-%s" data-unit="%s" href="data:%s;base64,%s" />',$lp1(18,this.FLinkType,18,this.FPrefix,18,aResourceName,18,this.FCurrentUnitName,18,aFormat,18,aData));
      return Result;
    };
    this.Create$1 = function (aFS) {
      $lt1.Create$1.call(this,aFS);
      this.FResources = $lt2.$create("Create$1");
      this.FPrefix = "resource";
      this.FLinkType = "preload";
      return this;
    };
    this.OutputMode = function () {
      var Result = 0;
      Result = 2;
      return Result;
    };
    this.OutputFileExtension = function () {
      var Result = "";
      Result = ".html";
      return Result;
    };
    this.HandleResource = function (aFileName, Options) {
      var S = "";
      var aFormat = "";
      var ResourceName = "";
      S = this.GetFileAsBase64(aFileName);
      aFormat = this.GetFormat(aFileName,Options);
      ResourceName = Options.GetValue("name");
      if (ResourceName === "") ResourceName = $lp2($lp3(aFileName),"");
      this.FResources.Add(this.CreateDataLink(ResourceName,aFormat,S));
    };
    this.ClearUnit = function () {
      $lt1.ClearUnit.call(this);
      this.FResources.Clear();
    };
    this.DoneUnit = function (IsMainFile) {
      if (IsMainFile) ;
    };
    this.Destroy = function () {
      $lp4({p: this, get: function () {
          return this.p.FResources;
        }, set: function (v) {
          this.p.FResources = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
});
rtl.module("pas2jsjsresources",["System","Classes","SysUtils","pas2jsresources","Pas2JSFS"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lm = pas.pas2jsresources;
  var $lt1 = $lm.TPas2jsResourceHandler;
  var $lm1 = pas.SysUtils;
  var $lp = $lm1.ChangeFileExt;
  var $lp1 = $lm1.ExtractFileName;
  var $lp2 = $lm1.Format;
  var $lm2 = pas.System;
  var $lp3 = $lm2.VarRecs;
  var $lp4 = $lm1.LowerCase;
  var $lm3 = pas.Classes;
  var $lt2 = $lm3.TStringList;
  var $lp5 = $lm1.FreeAndNil;
  var $lt3 = $lm2.TObject;
  rtl.createClass(this,"TJSResourceHandler",$lt1,function () {
    $lt = this;
    this.$init = function () {
      $lt1.$init.call(this);
      this.FResources = null;
    };
    this.$final = function () {
      this.FResources = undefined;
      $lt1.$final.call(this);
    };
    var SAddResource = 'rtl.addResource({name: "%s", unit: "%s", format: "%s", encoding: "base64", data: "%s"});';
    this.GetResourceJSStatement = function (aFileName, Options) {
      var Result = "";
      var aFormat = "";
      var aName = "";
      var aData = "";
      aData = this.GetFileAsBase64(aFileName);
      aFormat = this.GetFormat(aFileName,Options);
      aName = Options.GetValue("name");
      if (aName === "") aName = $lp($lp1(aFileName),"");
      Result = $lp2(SAddResource,$lp3(18,$lp4(aName),18,$lp4(this.FCurrentUnitName),18,aFormat,18,aData));
      return Result;
    };
    this.GetResourceCount = function () {
      var Result = 0;
      Result = this.FResources.GetCount();
      return Result;
    };
    this.GetAsString = function () {
      var Result = "";
      var I = 0;
      var N = "";
      var V = "";
      Result = "";
      for (var $l = 0, $end = this.FResources.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        this.FResources.GetNameValue(I,{get: function () {
            return N;
          }, set: function (v) {
            N = v;
          }},{get: function () {
            return V;
          }, set: function (v) {
            V = v;
          }});
        Result = Result + V + "\n";
      };
      return Result;
    };
    this.Create$1 = function (aFS) {
      $lt1.Create$1.call(this,aFS);
      this.FResources = $lt2.$create("Create$1");
      return this;
    };
    this.OutputMode = function () {
      var Result = 0;
      Result = 3;
      return Result;
    };
    this.OutputFileExtension = function () {
      var Result = "";
      Result = ".js";
      return Result;
    };
    this.HandleResource = function (aFileName, Options) {
      this.FResources.Add(this.FCurrentUnitName + "=" + this.GetResourceJSStatement(aFileName,Options));
    };
    this.Destroy = function () {
      $lp5({p: this, get: function () {
          return this.p.FResources;
        }, set: function (v) {
          this.p.FResources = v;
        }});
      $lt3.Destroy.call(this);
    };
  });
});
rtl.module("FPPas2Js",["System","Classes","SysUtils","Math","contnrs","jsbase","jstree","jswriter","PasTree","PScanner","PasResolveEval","PasResolver"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lt19 = null;
  var $lt20 = null;
  var $lt21 = null;
  var $lt22 = null;
  var $lt23 = null;
  var $lt24 = null;
  var $lt25 = null;
  var $lt26 = null;
  var $lt27 = null;
  var $lt28 = null;
  var $lt29 = null;
  var $lt30 = null;
  var $lt31 = null;
  var $lt32 = null;
  var $lt33 = null;
  var $lt34 = null;
  var $lt35 = null;
  var $lt36 = null;
  var $lt37 = null;
  var $lt38 = null;
  var $lt39 = null;
  var $lt40 = null;
  var $lt41 = null;
  var $lt42 = null;
  var $lt43 = null;
  var $lt44 = null;
  var $lt45 = null;
  var $lt46 = null;
  var $lt47 = null;
  var $lm = pas.SysUtils;
  var $lt48 = $lm.Exception;
  var $lm1 = pas.PasTree;
  var $lt49 = $lm1.TPasElementBase;
  var $lm2 = pas.System;
  var $lt50 = $lm2.TObject;
  var $lm3 = pas.PasResolver;
  var $lt51 = $lm3.TPasModuleScope;
  var $lp = $lm.FreeAndNil;
  var $lp1 = $lm.LowerCase;
  var $lt52 = $lm3.TPasResHashList;
  var $lt53 = $lm3.TPasIdentifier;
  var $lm4 = pas.Classes;
  var $lt54 = $lm4.TFPList;
  var $lt55 = $lm3.TPasSectionScope;
  var $lt56 = $lm3.TPasInitialFinalizationScope;
  var $lt57 = $lm3.TPasClassScope;
  var $lt58 = $lm3.TPasIdentifierScope;
  var $lt59 = $lm3.TPasRecordScope;
  var $lt60 = $lm3.TPasProcedureScope;
  var $lt61 = $lm4.TStringList;
  var $lt62 = $lm3.TPasArrayScope;
  var $lt63 = $lm3.TPasProcTypeScope;
  var $lt64 = $lm3.TPasWithExprScope;
  var $lt65 = $lm3.TResElDataBaseType;
  var $lm5 = pas.PScanner;
  var $lt66 = $lm5.TPascalScanner;
  var $lp2 = $lm.IntToStr;
  var $lp3 = $lm.LeftStr;
  var $lp4 = $lm2.Copy;
  var $lp5 = $lm2.Insert;
  var $lp6 = $lm2.VarRecs;
  var $lp7 = $lm.DecodeDate;
  var $lp8 = $lm.Now;
  var $lp9 = $lm.DecodeTime;
  var $lp10 = $lm.Format;
  var $lp11 = $lm.ExtractFileName;
  var $lt67 = $lm1.TPasProcedure;
  var $lp12 = $lm.GetEnvironmentVariable;
  var $lp13 = $lm.CompareText;
  var $lt68 = $lm3.TPasResolverHub;
  var $lm6 = pas.PasResolveEval;
  var $lp14 = $lm6.GetObjPath;
  var $lt69 = $lm3.TPasResolver;
  var $lt70 = $lm1.TProcedureExpr;
  var $lt71 = $lm3.TResolvedReference;
  var $lt72 = $lm1.TPasClassType;
  var $lt73 = $lm1.TPasMembersType;
  var $lt74 = $lm1.TPasProperty;
  var $lt75 = $lm1.TPasConst;
  var $lt76 = $lm1.TPasType;
  var $lt77 = $lm1.TProcedureBody;
  var $lt78 = $lm1.TPasClassFunction;
  var $lp15 = $lm3.GetElementDbgPath;
  var $lt79 = $lm1.TImplementationSection;
  var $lt80 = $lm1.TPasVariable;
  var $lt81 = $lm1.TPasRecordType;
  var $lp16 = $lm6.GetObjName;
  var $lt82 = $lm3.TPasClassOrRecordScope;
  var $lt83 = $lm1.TPasVariant;
  var $lt84 = $lm3.TPasResolverResult;
  var $lt85 = $lm1.TBinaryExpr;
  var $lt86 = $lm1.TParamsExpr;
  var $lt87 = $lm1.TPasExpr;
  var $lt88 = $lm1.TPasImplElement;
  var $lt89 = $lm1.TPasArgument;
  var $lt90 = $lm1.TPasResultElement;
  var $lt91 = $lm1.TPrimitiveExpr;
  var $lt92 = $lm1.TPasImplBlock;
  var $lt93 = $lm1.TPasFunctionType;
  var $lt94 = $lm1.TPasFunction;
  var $lt95 = $lm1.TPasPointerType;
  var $lt96 = $lm1.TPasModule;
  var $lt97 = $lm1.TPasProgram;
  var $lt98 = $lm1.TPasLibrary;
  var $lt99 = $lm1.TPasEnumType;
  var $lt100 = $lm1.TPasUnresolvedSymbolRef;
  var $lt101 = $lm1.TPasRangeType;
  var $lp17 = $lm6.ReleaseEvalValue;
  var $lp18 = $lm.SameText;
  var $lp19 = $lm3.GetElementTypeName;
  var $lt102 = $lm1.TVariableModifier;
  var $lt103 = $lm2.TGuid;
  var $lt104 = $lm1.TPasImplExceptOn;
  var $lt105 = $lm1.TPasSection;
  var $lt106 = $lm1.TNilExpr;
  var $lt107 = $lm1.TPasArrayType;
  var $lt108 = $lm1.TPasClassProcedure;
  var $lt109 = $lm1.TPasConstructor;
  var $lt110 = $lm1.TLibrarySection;
  var $lp20 = $lm3.NoNil;
  var $lt111 = $lm3.TResolvedRefCtxConstructor;
  var $lt112 = $lm1.TPasClassOfType;
  var $lp21 = $lm.Trim;
  var $lt113 = $lm1.TPasGenericType;
  var $lt114 = $lm1.TInterfaceSection;
  var $lt115 = $lm3.TPasGenericScope;
  var $lp22 = $lm3.SetResolverValueExpr;
  var $lt116 = $lm3.TPRFindData;
  var $lt117 = $lm1.TPasSetType;
  var $lt118 = $lm1.TPasProcedureType;
  var $lt119 = $lm1.TPasGenericTemplateType;
  var $lp23 = $lm3.SetResolverTypeExpr;
  var $lt120 = $lm1.TPasSpecializeType;
  var $lm7 = pas.jsbase;
  var $lp24 = $lm7.StrToJSString;
  var $lt121 = $lm6.TREVKind;
  var $lp25 = $lm.TryStringToGUID;
  var $lp26 = $lm3.SetResolverIdentifier;
  var $lt122 = $lt73.TRTTIVisibility;
  var $lm8 = pas.jstree;
  var $lt123 = $lm8.TJSSourceElements;
  var $lt124 = $lm8.TJSDotMemberExpression;
  var $lt125 = $lm8.TJSPrimaryExpressionIdent;
  var $lt126 = $lm8.TJSSwitchStatement;
  var $lt127 = $lm1.TPasImplCaseStatement;
  var $lt128 = $lm8.TJSBreakStatement;
  var $lt129 = $lm8.TJSStatementList;
  var $lt130 = $lm1.TPasAliasType;
  var $lt131 = $lm1.TPasTypeAliasType;
  var $lt132 = $lm8.TJSObjectLiteral;
  var $lt133 = $lm8.TJSSimpleAssignStatement;
  var $lt134 = $lm8.TJSVariableStatement;
  var $lp27 = $lm5.CreateMsgArgs;
  var $lt135 = $lm1.TBoolConstExpr;
  var $lt136 = $lm1.TUnaryExpr;
  var $lp28 = $lm.DeQuoteString;
  var $lt137 = $lm8.TJSLiteral;
  var $lp29 = $lm2.Pos;
  var $lp30 = $lm.CompareStr;
  var $lp31 = $lm3.ResolveSimpleAliasType;
  var $lt138 = $lm3.TPasSpecializeTypeData;
  var $lt139 = $lm1.TPasEnumValue;
  var $lt140 = $lm1.TPasDeclarations;
  var $lt141 = $lm8.TJSMemberExpression;
  var $lt142 = $lm8.TJSBracketMemberExpression;
  var $lt143 = $lm8.TJSNewMemberExpression;
  var $lt144 = $lm8.TJSCallExpression;
  var $lt145 = $lm8.TJSUnary;
  var $lt146 = $lm8.TJSBinary;
  var $lt147 = $lm8.TJSArrayLiteral;
  var $lt148 = $lm8.TJSConditionalExpression;
  var $lt149 = $lm8.TJSAssignStatement;
  var $lt150 = $lm8.TJSVarDeclaration;
  var $lt151 = $lm8.TJSIfStatement;
  var $lt152 = $lm8.TJSBodyStatement;
  var $lt153 = $lm8.TJSCondLoopStatement;
  var $lt154 = $lm8.TJSForStatement;
  var $lt155 = $lm8.TJSForInStatement;
  var $lp32 = $lm7.JSStringToString;
  var $lt156 = $lm8.TJSFunctionStatement;
  var $lt157 = $lm8.TJSFuncDef;
  var $lt158 = $lm8.TJSFunctionBody;
  var $lt159 = $lm8.TJSArguments;
  var $lp33 = $lm2.Copy$1;
  var $lt160 = $lm8.TJSReturnStatement;
  var $lt161 = $lm8.TJSUnaryPlusExpression;
  var $lt162 = $lm8.TJSEmptyBlockStatement;
  var $lt163 = $lm8.TJSVariableDeclarationList;
  var $lt164 = $lm1.TPasStringType;
  var $lt165 = $lm8.TJSTryFinallyStatement;
  var $lt166 = $lm8.TJSWhileStatement;
  var $lt167 = $lm8.TJSExportStatement;
  var $lm9 = pas.jswriter;
  var $lt168 = $lm9.TBufferWriter;
  var $lt169 = $lm9.TJSWriter;
  var $lm10 = pas.Math;
  var $lp34 = $lm10.IsInfinite;
  var $lt170 = $lm8.TJSMultiplicativeExpressionDiv;
  var $lt171 = $lm8.TJSUnaryNotExpression;
  var $lt172 = $lm8.TJSMultiplicativeExpressionMul;
  var $lp35 = $lm2.Trunc;
  var $lp36 = $lm10.Floor;
  var $lt173 = $lm1.TPasDestructor;
  var $lt174 = $lm1.TPasExportSymbol;
  var $lt175 = $lm1.TRecordValues;
  var $lt176 = $lm8.TJSLogicalAndExpression;
  var $lt177 = $lm8.TJSEqualityExpressionSEQ;
  var $lt178 = $lm1.TArrayValues;
  var $lm11 = pas.contnrs;
  var $lt179 = $lm11.TObjectList;
  var $lp37 = $lm3.GetResolverResultDbg;
  var $lt180 = $lm8.TJSRelationalExpressionGT;
  var $lt181 = $lm8.TJSUnaryBracketsExpression;
  var $lt182 = $lm1.TInlineSpecializeExpr;
  var $lt183 = $lm3.TResolvedRefCtxAttrProc;
  var $lt184 = $lm1.TPasClassConstructor;
  var $lt185 = $lm1.TPasClassDestructor;
  var $lt186 = $lm1.TPasAttributes;
  var $lt187 = $lm3.TPasClassIntfMap;
  var $lt188 = $lm1.TPasImplRaise;
  var $lt189 = $lm1.TPasImplAssign;
  var $lt190 = $lm1.TPasImplWhileDo;
  var $lt191 = $lm1.TPasImplSimple;
  var $lt192 = $lm1.TPasImplWithDo;
  var $lt193 = $lm1.TPasImplForLoop;
  var $lt194 = $lm1.TPasImplAsmStatement;
  var $lt195 = $lm8.TJSAddEqAssignStatement;
  var $lt196 = $lm8.TJSSubEqAssignStatement;
  var $lt197 = $lm8.TJSMulEqAssignStatement;
  var $lt198 = $lm8.TJSDivEqAssignStatement;
  var $lt199 = $lm3.TResElDataBuiltInProc;
  var $lt200 = $lm8.TJSThrowStatement;
  var $lt201 = $lm8.TJSDoWhileStatement;
  var $lt202 = $lm6.TResEvalInt;
  var $lt203 = $lm6.TResEvalEnum;
  var $lt204 = $lm8.TJSEqualityExpressionSNE;
  var $lt205 = $lm3.TPasForLoopScope;
  var $lt206 = $lm8.TJSAdditiveExpressionMinus;
  var $lt207 = $lm8.TJSRelationalExpressionGE;
  var $lt208 = $lm8.TJSRelationalExpressionLE;
  var $lt209 = $lm8.TJSUnaryPostMinusMinusExpression;
  var $lt210 = $lm8.TJSUnaryPostPlusPlusExpression;
  var $lp38 = $lm.TrimRight;
  var $lt211 = $lm8.TJSExpressionStatement;
  var $lt212 = $lm3.TPasWithScope;
  var $lp39 = $lm7.IsValidJSIdentifier;
  var $lt213 = $lm8.TJSPrimaryExpressionThis;
  var $lt214 = $lm8.TJSWithStatement;
  var $lt215 = $lm1.TPasImplTryFinally;
  var $lt216 = $lm8.TJSTryCatchStatement;
  var $lt217 = $lm8.TJSLogicalOrExpression;
  var $lt218 = $lm8.TJSEmptyStatement;
  var $lt219 = $lm1.TPasImplCaseElse;
  var $lp40 = $lm2.Delete;
  var $lt220 = $lm6.TResEvalSet;
  var $lt221 = $lt220.TItem;
  var $lt222 = $lm8.TJSURShiftExpression;
  var $lt223 = $lm8.TJSBitwiseAndExpression;
  var $lt224 = $lm8.TJSLShiftExpression;
  var $lt225 = $lm8.TJSRShiftExpression;
  var $lt226 = $lm8.TJSAdditiveExpressionPlus;
  var $lt227 = $lm8.TJSEqualityExpressionNE;
  var $lt228 = $lm8.TJSEqualityExpressionEQ;
  var $lt229 = $lm8.TJSContinueStatement;
  var $lt230 = $lm1.TPasImplTry;
  var $lt231 = $lm3.TResolverBaseType;
  var $lt232 = $lt231.btIntDouble;
  var $lt233 = $lm8.TJSAwaitExpression;
  var $lt234 = $lm8.TJSMultiplicativeExpressionMod;
  var $lt235 = $lm8.TJSRelationalExpressionLT;
  var $lt236 = $lm8.TJSRelationalExpressionInstanceOf;
  var $lt237 = $lm1.TInheritedExpr;
  var $lt238 = $lm8.TJSBitwiseOrExpression;
  var $lt239 = $lm8.TJSBitwiseXOrExpression;
  var $lt240 = $lm8.TJSPowerExpression;
  var $lt241 = $lm8.TJSRelationalExpressionIn;
  var $lp41 = $lm2.val$8;
  var $lp42 = $lm2.val;
  var $lt242 = $lm1.TPasResString;
  var $lt243 = $lm8.TJSUnaryMinusExpression;
  var $lt244 = $lm8.TJSUnaryInvExpression;
  var $lt245 = $lm1.TPasLabels;
  var $lt246 = $lm1.TPasImplLabelMark;
  var $lt247 = $lm1.TPasImplCommand;
  var $lt248 = $lm1.TPasPackage;
  var $lt249 = $lm1.TPasElement;
  var $lt250 = $lm1.TPasImplStatement;
  var $lt251 = $lm1.TPasImplIfElse;
  var $lt252 = $lm1.TPasImplRepeatUntil;
  var $lt253 = $lm1.TPasImplBeginBlock;
  var $lt254 = $lm1.TInitializationSection;
  var $lt255 = $lm1.TFinalizationSection;
  var $lt256 = $lm1.TPasImplCaseOf;
  var $lp43 = $lm.UpperCase;
  var $lt257 = $lm1.TPasMethodResolution;
  this.nPasElementNotSupported = 4001;
  this.nNotSupportedX = 4002;
  this.nUnaryOpcodeNotSupported = 4003;
  this.nBinaryOpcodeNotSupported = 4004;
  this.nInvalidNumber = 4005;
  this.nInitializedArraysNotSupported = 4006;
  this.nMemberExprMustBeIdentifier = 4007;
  this.nCantWriteSetLiteral = 4008;
  this.nInvalidAbsoluteLocation = 4009;
  this.nForInJSArrDefaultGetterNotExtBracketAccessor = 4010;
  this.nMissingExternalName = 4012;
  this.nVirtualMethodNameMustMatchExternal = 4013;
  this.nPublishedNameMustMatchExternal = 4014;
  this.nInvalidVariableModifier = 4015;
  this.nAWaitOnlyInAsyncProcedure = 4016;
  this.nNewInstanceFunctionMustBeVirtual = 4017;
  this.nNewInstanceFunctionMustHaveTwoParameters = 4018;
  this.nNewInstanceFunctionMustNotHaveOverloadAtX = 4019;
  this.nBracketAccessorOfExternalClassMustHaveOneParameter = 4020;
  this.nTypeXCannotBePublished = 4021;
  this.nNestedInheritedNeedsParameters = 4022;
  this.nFreeNeedsVar = 4023;
  this.nDuplicateGUIDXInYZ = 4024;
  this.nCantCallExtBracketAccessor = 4025;
  this.nJSNewNotSupported = 4026;
  this.nHelperClassMethodForExtClassMustBeStatic = 4027;
  this.nDuplicateMessageIdXAtY = 4029;
  this.nDispatchRequiresX = 4030;
  this.nConstRefNotForXAsConst = 4031;
  this.ExtClassBracketAccessor = "[]";
  this.IsExtModePasClassInstance = 1;
  this.IsExtModePasClass = 2;
  this.ExtRTTIVisPrivate = 0;
  this.ExtRTTIVisProtected = 1;
  this.ExtRTTIVisPublic = 2;
  this.ExtRTTIVisPublished = 3;
  this.ExtRTTIVisPublicPublished = 4;
  this.ExtRTTIVisStrictPrivate = 5;
  this.ExtRTTIVisStrictProtected = 6;
  this.ExtRTTIVisDefaultField = 2;
  this.ExtRTTIVisDefaultMethod = 2;
  this.ExtRTTIVisDefaultProperty = 4;
  $lt = this.TPas2JSBuiltInName = {"0": "pbifnArray_Concat", pbifnArray_Concat: 0, "1": "pbifnArray_ConcatN", pbifnArray_ConcatN: 1, "2": "pbifnArray_Copy", pbifnArray_Copy: 2, "3": "pbifnArray_DeleteR", pbifnArray_DeleteR: 3, "4": "pbifnArray_Equal", pbifnArray_Equal: 4, "5": "pbifnArray_Insert", pbifnArray_Insert: 5, "6": "pbifnArray_Managed", pbifnArray_Managed: 6, "7": "pbifnArray_Length", pbifnArray_Length: 7, "8": "pbifnArray_Push", pbifnArray_Push: 8, "9": "pbifnArray_PushN", pbifnArray_PushN: 9, "10": "pbifnArray_Reference", pbifnArray_Reference: 10, "11": "pbifnArray_SetLength", pbifnArray_SetLength: 11, "12": "pbifnArray_Static_Clone", pbifnArray_Static_Clone: 12, "13": "pbifnAs", pbifnAs: 13, "14": "pbifnAsExt", pbifnAsExt: 14, "15": "pbifnBitwiseLongwordFix", pbifnBitwiseLongwordFix: 15, "16": "pbifnBitwiseNativeIntAnd", pbifnBitwiseNativeIntAnd: 16, "17": "pbifnBitwiseNativeIntOr", pbifnBitwiseNativeIntOr: 17, "18": "pbifnBitwiseNativeIntShl", pbifnBitwiseNativeIntShl: 18, "19": "pbifnBitwiseNativeIntShr", pbifnBitwiseNativeIntShr: 19, "20": "pbifnBitwiseNativeIntXor", pbifnBitwiseNativeIntXor: 20, "21": "pbifnCheckMethodCall", pbifnCheckMethodCall: 21, "22": "pbifnCheckVersion", pbifnCheckVersion: 22, "23": "pbifnClassAncestorFunc", pbifnClassAncestorFunc: 23, "24": "pbifnClassInstanceFree", pbifnClassInstanceFree: 24, "25": "pbifnClassInstanceNew", pbifnClassInstanceNew: 25, "26": "pbifnClassInitSpecialize", pbifnClassInitSpecialize: 26, "27": "pbifnCreateClass", pbifnCreateClass: 27, "28": "pbifnCreateClassExt", pbifnCreateClassExt: 28, "29": "pbifnCreateHelper", pbifnCreateHelper: 29, "30": "pbifnGetChar", pbifnGetChar: 30, "31": "pbifnGetNumber", pbifnGetNumber: 31, "32": "pbifnGetObject", pbifnGetObject: 32, "33": "pbifnGetResourcestring", pbifnGetResourcestring: 33, "34": "pbifnHelperNew", pbifnHelperNew: 34, "35": "pbifnIntf_AddRef", pbifnIntf_AddRef: 35, "36": "pbifnIntf_Release", pbifnIntf_Release: 36, "37": "pbifnIntfAddMap", pbifnIntfAddMap: 37, "38": "pbifnIntfAsClass", pbifnIntfAsClass: 38, "39": "pbifnIntfAsIntfT", pbifnIntfAsIntfT: 39, "40": "pbifnIntfCreate", pbifnIntfCreate: 40, "41": "pbifnIntfCreateTGUID", pbifnIntfCreateTGUID: 41, "42": "pbifnIntfExprRefsAdd", pbifnIntfExprRefsAdd: 42, "43": "pbifnIntfExprRefsCreate", pbifnIntfExprRefsCreate: 43, "44": "pbifnIntfExprRefsFree", pbifnIntfExprRefsFree: 44, "45": "pbifnIntfGetGUIDR", pbifnIntfGetGUIDR: 45, "46": "pbifnIntfGetIntfT", pbifnIntfGetIntfT: 46, "47": "pbifnIntfGuidRToStr", pbifnIntfGuidRToStr: 47, "48": "pbifnIntfIsClass", pbifnIntfIsClass: 48, "49": "pbifnIntfIsIntf", pbifnIntfIsIntf: 49, "50": "pbifnIntfToClass", pbifnIntfToClass: 50, "51": "pbifnIntfSetIntfL", pbifnIntfSetIntfL: 51, "52": "pbifnIntfSetIntfP", pbifnIntfSetIntfP: 52, "53": "pbifnIntfStrToGUIDR", pbifnIntfStrToGUIDR: 53, "54": "pbifnIntfQueryIntfIsT", pbifnIntfQueryIntfIsT: 54, "55": "pbifnIntfQueryIntfT", pbifnIntfQueryIntfT: 55, "56": "pbifnIs", pbifnIs: 56, "57": "pbifnIsExt", pbifnIsExt: 57, "58": "pbifnFloatToStr", pbifnFloatToStr: 58, "59": "pbifnValEnum", pbifnValEnum: 59, "60": "pbifnFreeLocalVar", pbifnFreeLocalVar: 60, "61": "pbifnFreeVar", pbifnFreeVar: 61, "62": "pbifnLibraryMain", pbifnLibraryMain: 62, "63": "pbifnOverflowCheckInt", pbifnOverflowCheckInt: 63, "64": "pbifnProcType_Create", pbifnProcType_Create: 64, "65": "pbifnProcType_CreateSafe", pbifnProcType_CreateSafe: 65, "66": "pbifnProcType_Equal", pbifnProcType_Equal: 66, "67": "pbifnProgramMain", pbifnProgramMain: 67, "68": "pbifnRaiseException", pbifnRaiseException: 68, "69": "pbifnRangeCheckArrayRead", pbifnRangeCheckArrayRead: 69, "70": "pbifnRangeCheckArrayWrite", pbifnRangeCheckArrayWrite: 70, "71": "pbifnRangeCheckChar", pbifnRangeCheckChar: 71, "72": "pbifnRangeCheckInt", pbifnRangeCheckInt: 72, "73": "pbifnRangeCheckGetCharAt", pbifnRangeCheckGetCharAt: 73, "74": "pbifnRangeCheckSetCharAt", pbifnRangeCheckSetCharAt: 74, "75": "pbifnRecordAssign", pbifnRecordAssign: 75, "76": "pbifnRecordClone", pbifnRecordClone: 76, "77": "pbifnRecordCreateType", pbifnRecordCreateType: 77, "78": "pbifnRecordEqual", pbifnRecordEqual: 78, "79": "pbifnRecordNew", pbifnRecordNew: 79, "80": "pbifnRTTIAddField", pbifnRTTIAddField: 80, "81": "pbifnRTTIAddFields", pbifnRTTIAddFields: 81, "82": "pbifnRTTIAddMethod", pbifnRTTIAddMethod: 82, "83": "pbifnRTTIAddProperty", pbifnRTTIAddProperty: 83, "84": "pbifnRTTIInherited", pbifnRTTIInherited: 84, "85": "pbifnRTTINewClass", pbifnRTTINewClass: 85, "86": "pbifnRTTINewClassRef", pbifnRTTINewClassRef: 86, "87": "pbifnRTTINewDynArray", pbifnRTTINewDynArray: 87, "88": "pbifnRTTINewEnum", pbifnRTTINewEnum: 88, "89": "pbifnRTTINewExtClass", pbifnRTTINewExtClass: 89, "90": "pbifnRTTINewInt", pbifnRTTINewInt: 90, "91": "pbifnRTTINewInterface", pbifnRTTINewInterface: 91, "92": "pbifnRTTINewMethodVar", pbifnRTTINewMethodVar: 92, "93": "pbifnRTTINewPointer", pbifnRTTINewPointer: 93, "94": "pbifnRTTINewProcSig", pbifnRTTINewProcSig: 94, "95": "pbifnRTTINewProcVar", pbifnRTTINewProcVar: 95, "96": "pbifnRTTINewRecord", pbifnRTTINewRecord: 96, "97": "pbifnRTTINewRefToProcVar", pbifnRTTINewRefToProcVar: 97, "98": "pbifnRTTINewSet", pbifnRTTINewSet: 98, "99": "pbifnRTTINewStaticArray", pbifnRTTINewStaticArray: 99, "100": "pbifnSetCharAt", pbifnSetCharAt: 100, "101": "pbifnSet_Clone", pbifnSet_Clone: 101, "102": "pbifnSet_Create", pbifnSet_Create: 102, "103": "pbifnSet_Difference", pbifnSet_Difference: 103, "104": "pbifnSet_Equal", pbifnSet_Equal: 104, "105": "pbifnSet_Exclude", pbifnSet_Exclude: 105, "106": "pbifnSet_GreaterEqual", pbifnSet_GreaterEqual: 106, "107": "pbifnSet_Include", pbifnSet_Include: 107, "108": "pbifnSet_Intersect", pbifnSet_Intersect: 108, "109": "pbifnSet_LowerEqual", pbifnSet_LowerEqual: 109, "110": "pbifnSet_NotEqual", pbifnSet_NotEqual: 110, "111": "pbifnSet_Reference", pbifnSet_Reference: 111, "112": "pbifnSet_SymDiffSet", pbifnSet_SymDiffSet: 112, "113": "pbifnSet_Union", pbifnSet_Union: 113, "114": "pbifnSpaceLeft", pbifnSpaceLeft: 114, "115": "pbifnStringSetLength", pbifnStringSetLength: 115, "116": "pbifnTrunc", pbifnTrunc: 116, "117": "pbifnUnitInit", pbifnUnitInit: 117, "118": "pbivnExceptObject", pbivnExceptObject: 118, "119": "pbivnIntfExprRefs", pbivnIntfExprRefs: 119, "120": "pbivnIntfGUID", pbivnIntfGUID: 120, "121": "pbivnIntfKind", pbivnIntfKind: 121, "122": "pbivnIntfMaps", pbivnIntfMaps: 122, "123": "pbivnIntfRefCnt", pbivnIntfRefCnt: 123, "124": "pbivnImplementation", pbivnImplementation: 124, "125": "pbivnImplCode", pbivnImplCode: 125, "126": "pbivnMessageInt", pbivnMessageInt: 126, "127": "pbivnMessageStr", pbivnMessageStr: 127, "128": "pbivnLibrary", pbivnLibrary: 128, "129": "pbivnLibraryVars", pbivnLibraryVars: 129, "130": "pbivnLocalModuleRef", pbivnLocalModuleRef: 130, "131": "pbivnLocalProcRef", pbivnLocalProcRef: 131, "132": "pbivnLocalTypeRef", pbivnLocalTypeRef: 132, "133": "pbivnLoop", pbivnLoop: 133, "134": "pbivnLoopEnd", pbivnLoopEnd: 134, "135": "pbivnLoopIn", pbivnLoopIn: 135, "136": "pbivnModule", pbivnModule: 136, "137": "pbivnModules", pbivnModules: 137, "138": "pbivnPtrClass", pbivnPtrClass: 138, "139": "pbivnPtrRecord", pbivnPtrRecord: 139, "140": "pbivnProcOk", pbivnProcOk: 140, "141": "pbivnProgram", pbivnProgram: 141, "142": "pbivnResourceStrings", pbivnResourceStrings: 142, "143": "pbivnResourceStringOrig", pbivnResourceStringOrig: 143, "144": "pbivnRTL", pbivnRTL: 144, "145": "pbivnRTTI", pbivnRTTI: 145, "146": "pbivnRTTIArray_Dims", pbivnRTTIArray_Dims: 146, "147": "pbivnRTTIArray_ElType", pbivnRTTIArray_ElType: 147, "148": "pbivnRTTIClassRef_InstanceType", pbivnRTTIClassRef_InstanceType: 148, "149": "pbivnRTTIEnum_EnumType", pbivnRTTIEnum_EnumType: 149, "150": "pbivnRTTIInt_MaxValue", pbivnRTTIInt_MaxValue: 150, "151": "pbivnRTTIInt_MinValue", pbivnRTTIInt_MinValue: 151, "152": "pbivnRTTIInt_OrdType", pbivnRTTIInt_OrdType: 152, "153": "pbivnRTTILocal", pbivnRTTILocal: 153, "154": "pbivnRTTIMemberAttributes", pbivnRTTIMemberAttributes: 154, "155": "pbivnRTTIMethodKind", pbivnRTTIMethodKind: 155, "156": "pbivnRTTIPointer_RefType", pbivnRTTIPointer_RefType: 156, "157": "pbivnRTTIProcFlags", pbivnRTTIProcFlags: 157, "158": "pbivnRTTIProc_InitSpec", pbivnRTTIProc_InitSpec: 158, "159": "pbivnRTTIProcVar_ProcSig", pbivnRTTIProcVar_ProcSig: 159, "160": "pbivnRTTIPropDefault", pbivnRTTIPropDefault: 160, "161": "pbivnRTTIPropIndex", pbivnRTTIPropIndex: 161, "162": "pbivnRTTIPropStored", pbivnRTTIPropStored: 162, "163": "pbivnRTTISet_CompType", pbivnRTTISet_CompType: 163, "164": "pbivnRTTITypeAttributes", pbivnRTTITypeAttributes: 164, "165": "pbivnRTTIExtClass_Ancestor", pbivnRTTIExtClass_Ancestor: 165, "166": "pbivnRTTIExtClass_JSClass", pbivnRTTIExtClass_JSClass: 166, "167": "pbivnSelf", pbivnSelf: 167, "168": "pbivnTObjectDestroy", pbivnTObjectDestroy: 168, "169": "pbivnWith", pbivnWith: 169, "170": "pbitnAnonymousPostfix", pbitnAnonymousPostfix: 170, "171": "pbitnIntDouble", pbitnIntDouble: 171, "172": "pbitnTI", pbitnTI: 172, "173": "pbitnTIClass", pbitnTIClass: 173, "174": "pbitnTIClassRef", pbitnTIClassRef: 174, "175": "pbitnTIDynArray", pbitnTIDynArray: 175, "176": "pbitnTIEnum", pbitnTIEnum: 176, "177": "pbitnTIExtClass", pbitnTIExtClass: 177, "178": "pbitnTIHelper", pbitnTIHelper: 178, "179": "pbitnTIInteger", pbitnTIInteger: 179, "180": "pbitnTIInterface", pbitnTIInterface: 180, "181": "pbitnTIMethodVar", pbitnTIMethodVar: 181, "182": "pbitnTIPointer", pbitnTIPointer: 182, "183": "pbitnTIProcVar", pbitnTIProcVar: 183, "184": "pbitnTIRecord", pbitnTIRecord: 184, "185": "pbitnTIRefToProcVar", pbitnTIRefToProcVar: 185, "186": "pbitnTISet", pbitnTISet: 186, "187": "pbitnTIStaticArray", pbitnTIStaticArray: 187, "188": "pbitnUIntDouble", pbitnUIntDouble: 188};
  this.Pas2JSBuiltInNames = ["arrayConcat","arrayConcatN","arrayCopy","arrayDeleteR","arrayEq","arrayInsert","arrayManaged","length","arrayPush","arrayPushN","arrayRef","arraySetLength","$clone","as","asExt","lw","and","or","shl","shr","xor","checkMethodCall","checkVersion","$ancestorfunc","$destroy","$create","$initSpec","createClass","createClassExt","createHelper","getChar","getNumber","getObject","getResStr","$new","_AddRef","_Release","addIntf","intfAsClass","intfAsIntfT","createInterface","createTGUID","ref","createIntfRefs","free","getIntfGUIDR","getIntfT","guidrToStr","intfIsClass","intfIsIntfT","intfToClass","setIntfL","setIntfP","strToGUIDR","queryIntfIsT","queryIntfT","is","isExt","floatToStr","valEnum","freeLoc","free","$main","oc","createCallback","createSafeCallback","eqCallback","$main","raiseE","rcArrR","rcArrW","rcc","rc","rcCharAt","rcSetCharAt","$assign","$clone","recNewT","$eq","$new","addField","addFields","addMethod","addProperty","$inherited","$Class","$ClassRef","$DynArray","$Enum","$ExtClass","$Int","$Interface","$MethodVar","$Pointer","newTIProcSig","$ProcVar","$Record","$RefToProcVar","$Set","$StaticArray","setCharAt","cloneSet","createSet","diffSet","eqSet","excludeSet","geSet","includeSet","intersectSet","leSet","neSet","refSet","symDiffSet","unionSet","spaceLeft","strSetLength","trunc","$init","$e","$ir","$guid","$kind","$intfmaps","R","$impl","$implcode","$msgint","$msgstr","library","vars","$lm","$lp","$lt","$l","$end","$in","$mod","pas","$class","$record","$ok","program","$resourcestrings","org","rtl","$rtti","dims","eltype","instancetype","enumtype","maxvalue","minvalue","ordtype","$r","attr","methodkind","reftype","flags","init","procsig","Default","index","stored","comptype","attr","ancestor","jsclass","$Self","tObjectDestroy","$with","$a","NativeInt","tTypeInfo","tTypeInfoClass","tTypeInfoClassRef","tTypeInfoDynArray","tTypeInfoEnum","tTypeInfoExtClass","tTypeInfoHelper","tTypeInfoInteger","tTypeInfoInterface","tTypeInfoMethodVar","tTypeInfoPointer","tTypeInfoProcVar","tTypeInfoRecord","tTypeInfoRefToProcVar","tTypeInfoSet","tTypeInfoStaticArray","NativeUInt"];
  this.JSReservedWords = ["__extends","_super","anonymous","apply","array","await","bind","break","call","case","catch","class","constructor","continue","default","delete","do","each","else","enum","escape","eval","export","extends","false","for","function","getPrototypeOf","hasOwnProperty","if","implements","import","in","instanceof","interface","isPrototypeOf","let","new","null","package","private","propertyIsEnumerable","protected","prototype","public","return","static","super","switch","this","throw","toLocaleString","toString","true","try","undefined","var","while","with","yield"];
  this.JSReservedGlobalWords = ["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","FormData","Generator","GeneratorFunction","Infinity","Int16Array","Int32Array","Int8Array","InternalError","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","arguments","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","isFinite","isNaN","parseFloat","parseInt","unescape","uneval","valueOf"];
  rtl.createClass(this,"EPas2JS",$lt48,function () {
    $lt1 = this;
    this.$init = function () {
      $lt48.$init.call(this);
      this.PasElement = null;
      this.MsgNumber = 0;
      this.Args = [];
      this.Id = 0;
      this.MsgType = 0;
    };
    this.$final = function () {
      this.PasElement = undefined;
      this.Args = undefined;
      $lt48.$final.call(this);
    };
  });
  $lt2 = this.TPasToJsPlatform = {"0": "PlatformBrowser", PlatformBrowser: 0, "1": "PlatformNodeJS", PlatformNodeJS: 1, "2": "PlatformElectron", PlatformElectron: 2, "3": "PlatformModule", PlatformModule: 3};
  this.PasToJsPlatformNames = ["Browser","NodeJS","Electron","Module"];
  $lt3 = this.TPasToJsProcessor = {"0": "ProcessorECMAScript5", ProcessorECMAScript5: 0, "1": "ProcessorECMAScript6", ProcessorECMAScript6: 1};
  this.PasToJsProcessorNames = ["ECMAScript5","ECMAScript6"];
  $lt4 = this.TPas2jsBaseType = {"0": "pbtNone", pbtNone: 0, "1": "pbtJSValue", pbtJSValue: 1};
  this.Pas2jsBaseTypeNames = ["None","JSValue"];
  $lt5 = this.TPas2jsBuiltInProc = {"0": "pbpDebugger", pbpDebugger: 0, "1": "pbpAWait", pbpAWait: 1};
  this.Pas2jsBuiltInProcNames = ["Debugger","AWait"];
  this.ClassVarModifiersType = rtl.createSet(4,5);
  this.LowJSBoolean = false;
  this.HighJSBoolean = true;
  rtl.createClass(this,"TPas2JsElementData",$lt49,function () {
    $lt6 = this;
    this.$init = function () {
      $lt49.$init.call(this);
      this.FElement = null;
      this.Owner = null;
      this.Next = null;
    };
    this.$final = function () {
      this.FElement = undefined;
      this.Owner = undefined;
      this.Next = undefined;
      $lt49.$final.call(this);
    };
    this.SetElement = function (AValue) {
      var Data = null;
      if (this.FElement === AValue) return;
      if (this.FElement !== null) {
        Data = this.FElement;
        while (Data.FData !== this) if ($lt49.isPrototypeOf(Data.FData)) {
          Data = Data.FData}
         else {
          throw $lt1.$create("Create$1",[""]);
        };
        Data.FData = this.FData;
      };
      this.FElement = AValue;
      if (this.FElement !== null) {
        Data = this.FElement;
        while ($lt49.isPrototypeOf(Data.FData)) Data = Data.FData;
        if (Data.FData !== null) {
          throw $lt1.$create("Create$1",[""]);
        };
        Data.FData = this;
      };
    };
    this.Destroy = function () {
      this.SetElement(null);
      this.Next = null;
      this.Owner = null;
      $lt50.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPas2JSStoredLocalVar",$lt49,function () {
    $lt7 = this;
    this.$init = function () {
      $lt49.$init.call(this);
      this.Name = "";
      this.Element = null;
    };
    this.$final = function () {
      this.Element = undefined;
      $lt49.$final.call(this);
    };
  });
  $lt8 = this.TPas2JSModuleScopeFlag = {"0": "p2msfPromiseSearched", p2msfPromiseSearched: 0};
  rtl.createClass(this,"TPas2JSModuleScope",$lt51,function () {
    $lt9 = this;
    this.$init = function () {
      $lt51.$init.call(this);
      this.FJSPromiseClass = null;
      this.FlagsJS = {};
      this.SystemVarRecs = null;
      this.StoreJSLocalVars = [];
    };
    this.$final = function () {
      this.FJSPromiseClass = undefined;
      this.FlagsJS = undefined;
      this.SystemVarRecs = undefined;
      this.StoreJSLocalVars = undefined;
      $lt51.$final.call(this);
    };
    this.SetJSPromiseClass = function (AValue) {
      if (this.FJSPromiseClass === AValue) return;
      this.FJSPromiseClass = AValue;
    };
    this.ClearStoreJSLocalVars = function () {
      var i = 0;
      for (var $l = 0, $end = rtl.length(this.StoreJSLocalVars) - 1; $l <= $end; $l++) {
        i = $l;
        $lp({a: i, p: this.StoreJSLocalVars, get: function () {
            return this.p[this.a];
          }, set: function (v) {
            this.p[this.a] = v;
          }});
      };
      this.StoreJSLocalVars = [];
    };
    this.Destroy = function () {
      this.ClearStoreJSLocalVars();
      this.SetJSPromiseClass(null);
      $lt51.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPas2jsElevatedLocals",$lt50,function () {
    $lt10 = this;
    this.$init = function () {
      $lt50.$init.call(this);
      this.FElevatedLocals = null;
    };
    this.$final = function () {
      this.FElevatedLocals = undefined;
      $lt50.$final.call(this);
    };
    this.InternalAdd = function (Item) {
      var OldItem = null;
      var LoName = "";
      LoName = $lp1(Item.Identifier);
      OldItem = this.FElevatedLocals.Find(LoName);
      if (OldItem !== null) {
        Item.NextSameIdentifier = OldItem;
        this.FElevatedLocals.Remove(LoName);
      };
      this.FElevatedLocals.Add(LoName,Item);
    };
    this.OnClear = function (Item, Dummy) {
      var Ident = null;
      if (Dummy === null) ;
      while (Item !== null) {
        Ident = Item;
        Item = Item.NextSameIdentifier;
        Ident = rtl.freeLoc(Ident);
      };
    };
    this.Create$1 = function () {
      $lt50.Create.call(this);
      this.FElevatedLocals = $lt52.$create("Create$1");
      return this;
    };
    this.Destroy = function () {
      this.FElevatedLocals.ForEachCall(rtl.createCallback(this,"OnClear"),null);
      this.FElevatedLocals = null;
      $lt50.Destroy.call(this);
    };
    this.Find = function (Identifier) {
      var Result = null;
      Result = this.FElevatedLocals.Find($lp1(Identifier));
      return Result;
    };
    this.Add = function (Identifier, El) {
      var Result = null;
      var Item = null;
      Item = $lt53.$create("Create");
      Item.Identifier = Identifier;
      Item.SetElement(El);
      this.InternalAdd(Item);
      Result = Item;
      return Result;
    };
  });
  rtl.createClass(this,"TPas2JSPrecompiledJS",$lt50,function () {
    $lt11 = this;
    this.$init = function () {
      $lt50.$init.call(this);
      this.BodyJS = "";
      this.EmptyJS = false;
      this.GlobalJS = null;
      this.ShortRefs = null;
    };
    this.$final = function () {
      this.GlobalJS = undefined;
      this.ShortRefs = undefined;
      $lt50.$final.call(this);
    };
    this.AddShortRef = function (El) {
      if (this.ShortRefs === null) this.ShortRefs = $lt54.$create("Create");
      if (this.ShortRefs.IndexOf(El) < 0) this.ShortRefs.Add(El);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.GlobalJS;
        }, set: function (v) {
          this.p.GlobalJS = v;
        }});
      $lp({p: this, get: function () {
          return this.p.ShortRefs;
        }, set: function (v) {
          this.p.ShortRefs = v;
        }});
      $lt50.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPas2JSSectionScope",$lt55,function () {
    $lt12 = this;
    this.$init = function () {
      $lt55.$init.call(this);
      this.ElevatedLocals = null;
      this.Renamed = false;
    };
    this.$final = function () {
      this.ElevatedLocals = undefined;
      $lt55.$final.call(this);
    };
    this.Create$1 = function () {
      $lt55.Create$1.call(this);
      this.ElevatedLocals = $lt10.$create("Create$1");
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.ElevatedLocals;
        }, set: function (v) {
          this.p.ElevatedLocals = v;
        }});
      $lt55.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPas2JSInitialFinalizationScope",$lt56,function () {
    $lt13 = this;
    this.$init = function () {
      $lt56.$init.call(this);
      this.ImplJS = null;
    };
    this.$final = function () {
      this.ImplJS = undefined;
      $lt56.$final.call(this);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.ImplJS;
        }, set: function (v) {
          this.p.ImplJS = v;
        }});
      $lt56.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPas2JSClassScope",$lt57,function () {
    $lt14 = this;
    this.$init = function () {
      $lt57.$init.call(this);
      this.JSName = "";
      this.NewInstanceFunction = null;
      this.GUID = "";
      this.ElevatedLocals = null;
      this.MemberOverloadsRenamed = false;
      this.DispatchField = "";
      this.DispatchStrField = "";
      this.MsgIntToProc = null;
      this.MsgStrToProc = null;
    };
    this.$final = function () {
      this.NewInstanceFunction = undefined;
      this.ElevatedLocals = undefined;
      this.MsgIntToProc = undefined;
      this.MsgStrToProc = undefined;
      $lt57.$final.call(this);
    };
    this.Create$1 = function () {
      $lt58.Create$1.call(this);
      this.ElevatedLocals = $lt10.$create("Create$1");
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.ElevatedLocals;
        }, set: function (v) {
          this.p.ElevatedLocals = v;
        }});
      $lp({p: this, get: function () {
          return this.p.MsgIntToProc;
        }, set: function (v) {
          this.p.MsgIntToProc = v;
        }});
      $lp({p: this, get: function () {
          return this.p.MsgStrToProc;
        }, set: function (v) {
          this.p.MsgStrToProc = v;
        }});
      $lt57.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPas2JSRecordScope",$lt59,function () {
    $lt15 = this;
    this.$init = function () {
      $lt59.$init.call(this);
      this.JSName = "";
      this.MemberOverloadsRenamed = false;
      this.Managed = false;
    };
  });
  rtl.createClass(this,"TPas2JSProcedureScope",$lt60,function () {
    $lt16 = this;
    this.$init = function () {
      $lt60.$init.call(this);
      this.OverloadName = "";
      this.JSName = "";
      this.ResultVarName = "";
      this.BodyOverloadsRenamed = false;
      this.ImplJS = null;
    };
    this.$final = function () {
      this.ImplJS = undefined;
      $lt60.$final.call(this);
    };
    this.AddGlobalJS = function (JS) {
      if (this.ImplJS === null) throw $lt48.$create("Create$1",["[20201018120133] TPas2JSProcedureScope.AddGlobalJS"]);
      if (this.ImplJS.GlobalJS === null) this.ImplJS.GlobalJS = $lt61.$create("Create$1");
      this.ImplJS.GlobalJS.Add(JS);
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.ImplJS;
        }, set: function (v) {
          this.p.ImplJS = v;
        }});
      $lt60.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TPas2JSArrayScope",$lt62,function () {
    $lt17 = this;
    this.$init = function () {
      $lt62.$init.call(this);
      this.JSName = "";
      this.Managed = false;
    };
  });
  rtl.createClass(this,"TPas2JSProcTypeScope",$lt63,function () {
    $lt18 = this;
    this.$init = function () {
      $lt63.$init.call(this);
      this.JSName = "";
    };
  });
  rtl.createClass(this,"TPas2JSWithExprScope",$lt64,function () {
    $lt19 = this;
    this.$init = function () {
      $lt64.$init.call(this);
      this.WithVarName = "";
    };
  });
  rtl.createClass(this,"TPas2JSOverloadChgThisScope",$lt58,function () {
    $lt20 = this;
  });
  rtl.createClass(this,"TResElDataPas2JSBaseType",$lt65,function () {
    $lt21 = this;
    this.$init = function () {
      $lt65.$init.call(this);
      this.JSBaseType = 0;
    };
  });
  this.msAllPas2jsModeSwitchesReadOnly = rtl.createSet(10,12,18,21,23,24,27,29,38,40,50,51);
  this.msAllPas2jsModeSwitches = rtl.unionSet(this.msAllPas2jsModeSwitchesReadOnly,rtl.createSet(3,2,15,20,25,34,52,39,44,47,53,45,49,54,55));
  this.bsAllPas2jsBoolSwitchesReadOnly = rtl.createSet(7);
  this.bsAllPas2jsBoolSwitches = rtl.unionSet(this.bsAllPas2jsBoolSwitchesReadOnly,rtl.createSet(3,15,9,11,14,22,23,24,25,26,27));
  this.vsAllPas2jsValueSwitchesReadOnly = {};
  this.vsAllPas2jsValueSwitches = rtl.unionSet(this.vsAllPas2jsValueSwitchesReadOnly,rtl.createSet(0,1,2));
  this.po_Pas2js = rtl.unionSet($lm3.po_Resolver,rtl.createSet(4,3,12,13,15,20));
  this.btAllJSBaseTypes = rtl.createSet(5,6,7,9,11,14,15,16,17,18,19,20,21,22,25,26,27,28,29);
  this.bfAllJSBaseProcs = $lm3.bfAllStandardProcs;
  this.btAllJSStrings = rtl.createSet(7,9);
  this.btAllJSChars = rtl.createSet(5,6);
  this.btAllJSStringAndChars = rtl.unionSet(this.btAllJSStrings,this.btAllJSChars);
  this.btAllJSFloats = rtl.createSet(11);
  this.btAllJSBooleans = rtl.createSet(15,16,17,18);
  this.btAllJSInteger = rtl.createSet(19,20,21,22,25,26,28,27,14);
  this.btAllJSValueSrcTypes = rtl.unionSet(rtl.unionSet(rtl.unionSet(rtl.unionSet(rtl.createSet(30,4,29,34),this.btAllJSInteger),this.btAllJSStringAndChars),this.btAllJSFloats),this.btAllJSBooleans);
  this.btAllJSValueTypeCastTo = rtl.unionSet(rtl.unionSet(rtl.unionSet(rtl.unionSet(this.btAllJSInteger,this.btAllJSStringAndChars),this.btAllJSFloats),this.btAllJSBooleans),rtl.createSet(29));
  this.btAllJSRangeCheckTypes = rtl.unionSet(this.btAllJSInteger,this.btAllJSChars);
  this.btAllJSOverflowAddSubType = rtl.createSet(28,27,14);
  this.btAllJSOverflowMultType = rtl.createSet(25,26,28,27,14);
  this.DefaultPasResolverOptions = rtl.createSet(0,1,2,3,4,5,6,7,8);
  $lt22 = this.TPasToJsConverterOption = {"0": "coLowerCase", coLowerCase: 0, "1": "coSwitchStatement", coSwitchStatement: 1, "2": "coEnumNumbers", coEnumNumbers: 2, "3": "coUseStrict", coUseStrict: 3, "4": "coNoTypeInfo", coNoTypeInfo: 4, "5": "coEliminateDeadCode", coEliminateDeadCode: 5, "6": "coStoreImplJS", coStoreImplJS: 6, "7": "coRTLVersionCheckMain", coRTLVersionCheckMain: 7, "8": "coRTLVersionCheckSystem", coRTLVersionCheckSystem: 8, "9": "coRTLVersionCheckUnit", coRTLVersionCheckUnit: 9, "10": "coShortRefGlobals", coShortRefGlobals: 10, "11": "coObfuscateLocalIdentifiers", coObfuscateLocalIdentifiers: 11};
  this.DefaultPasToJSOptions = rtl.createSet(0);
  rtl.createClass(this,"TPas2jsPasScanner",$lt66,function () {
    $lt23 = this;
    this.$init = function () {
      $lt66.$init.call(this);
      this.FCompilerVersion = "";
      this.FResolver = null;
      this.FTargetPlatform = 0;
      this.FTargetProcessor = 0;
      this.GlobalConvOptsEnabled = {};
      this.GlobalConvOptsDisabled = {};
    };
    this.$final = function () {
      this.FResolver = undefined;
      this.GlobalConvOptsEnabled = undefined;
      this.GlobalConvOptsDisabled = undefined;
      $lt66.$final.call(this);
    };
    this.HandleInclude = function (Param) {
      var $Self = this;
      var Result = 0;
      function SetStr(s) {
        var i = 0;
        var h = "";
        Result = 4;
        if (s === "") {
          s = "''"}
         else for (var $l = s.length; $l >= 1; $l--) {
          i = $l;
          var $tmp = s.charAt(i - 1);
          if ((($tmp >= "\x00") && ($tmp <= "\x1F")) || ($tmp === "")) {
            h = "#" + $lp2(s.charCodeAt(i - 1));
            if (i > 1) h = "'" + h;
            if ((i < s.length) && (s.charAt((i + 1) - 1) !== "#")) h = h + "'";
            s = $lp3(s,i - 1) + h + $lp4(s,i + 1,s.length);
          } else {
            if (i === s.length) s = s + "'";
            if (s.charAt(i - 1) === "'") $lp5("'",{get: function () {
                return s;
              }, set: function (v) {
                s = v;
              }},i);
            if (i === 1) s = "'" + s;
          };
        };
        $Self.SetCurTokenString(s);
      };
      function SetInteger(i) {
        Result = 6;
        $Self.SetCurTokenString($lp2(i));
      };
      var Year = 0;
      var Month = 0;
      var Day = 0;
      var Hour = 0;
      var Minute = 0;
      var Second = 0;
      var MilliSecond = 0;
      var i = 0;
      var Scope = null;
      if ((Param !== "") && (Param.charAt(0) === "%")) {
        if ((Param.length < 3) || (Param.charAt(Param.length - 1) !== "%")) {
          SetStr("");
          this.DoLog$1(2,1028,rtl.getResStr($lm5,"SWarnIllegalCompilerDirectiveX"),$lp6(18,"$i " + Param),false);
          return Result;
        };
        if (Param.length > 255) {
          SetStr("");
          this.DoLog$1(2,1028,rtl.getResStr($lm5,"SWarnIllegalCompilerDirectiveX"),$lp6(18,"$i " + $lp4(Param,1,255) + "..."),false);
          return Result;
        };
        var $tmp = $lp1(Param);
        if ($tmp === "%date%") {
          $lp7($lp8(),{get: function () {
              return Year;
            }, set: function (v) {
              Year = v;
            }},{get: function () {
              return Month;
            }, set: function (v) {
              Month = v;
            }},{get: function () {
              return Day;
            }, set: function (v) {
              Day = v;
            }});
          SetStr($lp2(Year) + "/" + $lp2(Month) + "/" + $lp2(Day));
          return Result;
        } else if ($tmp === "%time%") {
          $lp9($lp8(),{get: function () {
              return Hour;
            }, set: function (v) {
              Hour = v;
            }},{get: function () {
              return Minute;
            }, set: function (v) {
              Minute = v;
            }},{get: function () {
              return Second;
            }, set: function (v) {
              Second = v;
            }},{get: function () {
              return MilliSecond;
            }, set: function (v) {
              MilliSecond = v;
            }});
          SetStr($lp10("%2d:%2d:%2d",$lp6(0,Hour,0,Minute,0,Second)));
          return Result;
        } else if (($tmp === "%pas2jstarget%") || ($tmp === "%fpctarget%") || ($tmp === "%pas2jstargetos%") || ($tmp === "%fpctargetos%")) {
          SetStr($mod.PasToJsPlatformNames[this.FTargetPlatform]);
          return Result;
        } else if (($tmp === "%pas2jstargetcpu%") || ($tmp === "%fpctargetcpu%")) {
          SetStr($mod.PasToJsProcessorNames[this.FTargetProcessor]);
          return Result;
        } else if (($tmp === "%pas2jsversion%") || ($tmp === "%fpcversion%")) {
          SetStr(this.FCompilerVersion);
          return Result;
        } else if ($tmp === "%file%") {
          SetStr(this.FCurFilename);
          return Result;
        } else if ($tmp === "%filename%") {
          SetStr($lp11(this.FCurFilename));
          return Result;
        } else if (($tmp === "%unit%") || ($tmp === "%module%")) {
          SetStr(this.FCurModulename);
          return Result;
        } else if ($tmp === "%line%") {
          SetStr($lp2(this.FCurRow));
          return Result;
        } else if ($tmp === "%linenum%") {
          SetInteger(this.FCurRow);
          return Result;
        } else if ($tmp === "%currentroutine%") {
          if (this.FResolver !== null) for (var $l = this.FResolver.FScopeCount - 1; $l >= 0; $l--) {
            i = $l;
            Scope = this.FResolver.GetScopes(i);
            if ($lt67.isPrototypeOf(Scope.FElement) && (Scope.FElement.FName !== "")) {
              SetStr(Scope.FElement.FName);
              return Result;
            };
          };
          SetStr("<anonymous>");
          return Result;
        } else {
          SetStr($lp12($lp4(Param,2,Param.length - 2)));
          return Result;
        };
      };
      Result = $lt66.HandleInclude.call(this,Param);
      return Result;
    };
    this.DoHandleOptimization = function (OptName, OptValue) {
      var $Self = this;
      function HandleBoolean(o, IsGlobalSwitch) {
        var Enable = false;
        Enable = false;
        var $tmp = $lp1(OptValue);
        if (($tmp === "") || ($tmp === "on") || ($tmp === "+")) {
          Enable = true}
         else if (($tmp === "off") || ($tmp === "-")) {
          Enable = false}
         else {
          $Self.Error$1(1032,rtl.getResStr($lm5,"SErrWrongSwitchToggle"),[]);
        };
        if (IsGlobalSwitch && $Self.FSkipGlobalSwitches) {
          $Self.DoLog$1(2,1029,rtl.getResStr($lm5,"SMisplacedGlobalCompilerSwitch"),[],false);
          return;
        };
        if (Enable) {
          $Self.GlobalConvOptsEnabled = rtl.includeSet($Self.GlobalConvOptsEnabled,o);
          $Self.GlobalConvOptsDisabled = rtl.excludeSet($Self.GlobalConvOptsDisabled,o);
        } else {
          $Self.GlobalConvOptsDisabled = rtl.includeSet($Self.GlobalConvOptsDisabled,o);
          $Self.GlobalConvOptsEnabled = rtl.excludeSet($Self.GlobalConvOptsEnabled,o);
        };
      };
      var $tmp = $lp1(OptName);
      if ($tmp === "enumnumbers") {
        HandleBoolean(2,true)}
       else if ($tmp === "usestrict") {
        HandleBoolean(3,true)}
       else if ($tmp === "jsshortrefglobals") {
        HandleBoolean(10,true)}
       else if ($tmp === "jsobfuscatelocalidentifiers") {
        HandleBoolean(11,true)}
       else {
        this.DoLog$1(2,1028,rtl.getResStr($lm5,"SWarnIllegalCompilerDirectiveX"),$lp6(18,"optimization " + OptName),false);
      };
    };
    this.ReadNonPascalTillEndToken = function (StopAtLineEnd) {
      var $Self = this;
      var Result = 0;
      var StartPos = 0;
      var MyTokenPos = 0;
      var s = "";
      var l = 0;
      function CommitTokenPos() {
        $Self.FTokenPos = MyTokenPos;
      };
      function Add() {
        var AddLen = 0;
        AddLen = MyTokenPos - StartPos;
        if (AddLen === 0) {
          $Self.SetCurTokenString("")}
         else {
          $Self.SetCurTokenString($Self.GetTokenString() + $lp4($Self.FCurLine,StartPos,AddLen));
          StartPos = MyTokenPos;
        };
      };
      function DoEndOfLine() {
        var Result$1 = false;
        Add();
        if (StopAtLineEnd) {
          Result = 118;
          CommitTokenPos();
          $Self.SetCurToken(118);
          $Self.FetchLine();
          return true;
        };
        if (!$Self.FetchLine()) {
          Result = 0;
          $Self.SetCurToken(0);
          return true;
        };
        s = $Self.FCurLine;
        l = s.length;
        MyTokenPos = 1;
        StartPos = MyTokenPos;
        Result$1 = false;
        return Result$1;
      };
      function HandleEscape() {
        MyTokenPos += 1;
        if ((MyTokenPos <= l) && (s.charAt(MyTokenPos - 1) > "\x1F")) MyTokenPos += 1;
      };
      this.SetCurTokenString("");
      s = this.FCurLine;
      l = s.length;
      MyTokenPos = this.FTokenPos;
      StartPos = MyTokenPos;
      do {
        if (MyTokenPos > l) if (DoEndOfLine()) return Result;
        var $tmp = s.charAt(MyTokenPos - 1);
        if ($tmp === "\\") {
          HandleEscape()}
         else if ($tmp === "'") {
          MyTokenPos += 1;
          do {
            if (MyTokenPos > l) this.Error(1002,rtl.getResStr($lm5,"SErrOpenString"));
            var $tmp1 = s.charAt(MyTokenPos - 1);
            if ($tmp1 === "\\") {
              HandleEscape()}
             else if ($tmp1 === "'") {
              MyTokenPos += 1;
              break;
            } else if (($tmp1 === "\n") || ($tmp1 === "\r")) {
              break;
            } else {
              MyTokenPos += 1;
            };
          } while (!false);
        } else if ($tmp === '"') {
          MyTokenPos += 1;
          do {
            if (MyTokenPos > l) this.Error(1002,rtl.getResStr($lm5,"SErrOpenString"));
            var $tmp2 = s.charAt(MyTokenPos - 1);
            if ($tmp2 === "\\") {
              HandleEscape()}
             else if ($tmp2 === '"') {
              MyTokenPos += 1;
              break;
            } else if (($tmp2 === "\n") || ($tmp2 === "\r")) {
              break;
            } else {
              MyTokenPos += 1;
            };
          } while (!false);
        } else if ($tmp === "`") {
          MyTokenPos += 1;
          do {
            while (MyTokenPos > l) if (DoEndOfLine()) {
              if (!StopAtLineEnd) this.Error(1002,rtl.getResStr($lm5,"SErrOpenString"));
              return Result;
            };
            var $tmp3 = s.charAt(MyTokenPos - 1);
            if ($tmp3 === "\\") {
              HandleEscape()}
             else if ($tmp3 === "`") {
              MyTokenPos += 1;
              break;
            } else {
              MyTokenPos += 1;
            };
          } while (!false);
        } else if ($tmp === "/") {
          MyTokenPos += 1;
          if ((MyTokenPos <= l) && (s.charAt(MyTokenPos - 1) === "/")) {
            do {
              MyTokenPos += 1;
            } while (!((MyTokenPos > l) || (s.charCodeAt(MyTokenPos - 1) in rtl.createSet(10,13))));
          };
        } else if ((($tmp >= "0") && ($tmp <= "9")) || (($tmp >= "A") && ($tmp <= "Z")) || (($tmp >= "a") && ($tmp <= "z")) || ($tmp === "_")) {
          if (($lp13($lp4(s,MyTokenPos,3),"end") === 0) && (((MyTokenPos + 3) > l) || !(s.charCodeAt((MyTokenPos + 3) - 1) in $impl.IdentChars))) {
            Add();
            if (this.GetTokenString() !== "") {
              Result = 1;
              CommitTokenPos();
              this.SetCurToken(Result);
              return Result;
            };
            Result = 58;
            this.SetCurTokenString($lp4(s,MyTokenPos,3));
            MyTokenPos += 3;
            CommitTokenPos();
            this.SetCurToken(Result);
            return Result;
          } else {
            while ((MyTokenPos <= l) && (s.charCodeAt(MyTokenPos - 1) in $impl.IdentChars)) MyTokenPos += 1;
          };
        } else {
          MyTokenPos += 1;
        };
      } while (!false);
      return Result;
    };
  });
  rtl.createClass(this,"TPas2JSResolverHub",$lt68,function () {
    $lt24 = this;
    this.$init = function () {
      $lt68.$init.call(this);
      this.FJSDelaySpecialize = null;
    };
    this.$final = function () {
      this.FJSDelaySpecialize = undefined;
      $lt68.$final.call(this);
    };
    this.GetJSDelaySpecializes = function (Index) {
      var Result = null;
      Result = rtl.getObject(this.FJSDelaySpecialize.Get(Index));
      return Result;
    };
    this.Create$1 = function (TheOwner) {
      $lt68.Create$1.call(this,TheOwner);
      this.FJSDelaySpecialize = $lt54.$create("Create");
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FJSDelaySpecialize;
        }, set: function (v) {
          this.p.FJSDelaySpecialize = v;
        }});
      $lt50.Destroy.call(this);
    };
    this.Reset = function () {
      $lt68.Reset.call(this);
      this.FJSDelaySpecialize.Clear();
    };
    this.AddJSDelaySpecialize = function (SpecType) {
      if (this.FJSDelaySpecialize.IndexOf(SpecType) >= 0) throw $lt1.$create("Create$1",["TPas2JSResolverHub.AddJSDelaySpecialize " + $lp14(SpecType)]);
      this.FJSDelaySpecialize.Add(SpecType);
    };
    this.JSDelaySpecializeCount = function () {
      var Result = 0;
      Result = this.FJSDelaySpecialize.FCount;
      return Result;
    };
  });
  rtl.createClass(this,"TPas2JSResolver",$lt69,function () {
    $lt25 = this;
    rtl.recNewT(this,"THasAnoFuncData",function () {
      $lt26 = this;
      this.Expr = null;
      this.$eq = function (b) {
        return this.Expr === b.Expr;
      };
      this.$assign = function (s) {
        this.Expr = s.Expr;
        return this;
      };
    });
    rtl.recNewT(this,"THasElReadingDeclData",function () {
      $lt27 = this;
      this.Decl = null;
      this.El = null;
      this.$eq = function (b) {
        return (this.Decl === b.Decl) && (this.El === b.El);
      };
      this.$assign = function (s) {
        this.Decl = s.Decl;
        this.El = s.El;
        return this;
      };
    });
    rtl.recNewT(this,"TPRFindExtSystemClass",function () {
      $lt28 = this;
      this.JSName = "";
      this.ErrorPosEl = null;
      this.Found = null;
      this.ElScope = null;
      this.StartScope = null;
      this.$eq = function (b) {
        return (this.JSName === b.JSName) && (this.ErrorPosEl === b.ErrorPosEl) && (this.Found === b.Found) && (this.ElScope === b.ElScope) && (this.StartScope === b.StartScope);
      };
      this.$assign = function (s) {
        this.JSName = s.JSName;
        this.ErrorPosEl = s.ErrorPosEl;
        this.Found = s.Found;
        this.ElScope = s.ElScope;
        this.StartScope = s.StartScope;
        return this;
      };
    });
    this.cJSValueConversion = 2 * 10000;
    this.$init = function () {
      $lt69.$init.call(this);
      this.FJSBaseTypes = rtl.arraySetLength(null,null,2);
      this.FJSBuiltInProcs = rtl.arraySetLength(null,null,2);
      this.FExternalNames = null;
      this.FFirstElementData = null;
      this.FLastElementData = null;
      this.FOverloadScopes = null;
    };
    this.$final = function () {
      this.FJSBaseTypes = undefined;
      this.FJSBuiltInProcs = undefined;
      this.FExternalNames = undefined;
      this.FFirstElementData = undefined;
      this.FLastElementData = undefined;
      this.FOverloadScopes = undefined;
      $lt69.$final.call(this);
    };
    this.InternalAdd = function (Item) {
      var OldItem = null;
      var aName = "";
      aName = Item.Identifier;
      OldItem = this.FExternalNames.Find(aName);
      if (OldItem !== null) {
        Item.NextSameIdentifier = OldItem;
        this.FExternalNames.Remove(aName);
      };
      this.FExternalNames.Add(aName,Item);
    };
    this.OnClearHashItem = function (Item, Dummy) {
      var Ident = null;
      if (Dummy === null) ;
      while (Item !== null) {
        Ident = Item;
        Item = Item.NextSameIdentifier;
        Ident = rtl.freeLoc(Ident);
      };
    };
    this.OnHasAnonymousEl = function (El, arg) {
      if ((El === null) || (arg.Expr !== null) || (El.$class.ClassType() !== $lt70)) return;
      arg.Expr = El;
    };
    this.OnHasElReadingDecl = function (El, arg) {
      var Ref = null;
      if (arg.El !== null) return;
      if ($lt71.isPrototypeOf(El.FData)) {
        Ref = El.FData;
        if ((Ref.FDeclaration === arg.Decl) && (Ref.Access in $lm3.rraAllRead)) {
          arg.El = El;
        };
      };
    };
    this.OnFindExtSystemClass = function (El, ElScope, StartScope, FindExtSystemClassData, Abort) {
      var aClass = null;
      if (FindExtSystemClassData.Found !== null) return;
      if (!$lt72.isPrototypeOf(El)) return;
      aClass = El;
      if (!aClass.IsExternal) return;
      if ($lt73.isPrototypeOf(aClass.FParent)) return;
      if (aClass.ExternalName !== FindExtSystemClassData.JSName) return;
      FindExtSystemClassData.Found = aClass;
      FindExtSystemClassData.ElScope = ElScope;
      FindExtSystemClassData.StartScope = StartScope;
      Abort.set(true);
    };
    this.HasOverloadIndex = function (El, WithElevatedLocal) {
      var Result = false;
      var C = null;
      var ProcScope = null;
      C = El.$class.ClassType();
      if (C === $lt74) {
        return false}
       else if ((C === $lt75) || C.InheritsFrom($lt76)) {
        if (!WithElevatedLocal && $lt77.isPrototypeOf(El.FParent)) return false;
        if ((C === $lt72) && El.IsForward) return false;
      } else if (C.InheritsFrom($lt67)) {
        if (El.IsOverride()) return true;
        if (El.Visibility === 4) return false;
        ProcScope = El.FData;
        if (ProcScope.DeclarationProc !== null) return false;
        if (ProcScope.SpecializedFromItem !== null) return false;
      };
      Result = true;
      return Result;
    };
    this.GetOverloadIndex = function (Identifier, StopAt) {
      var Result = 0;
      var El = null;
      Result = 0;
      while (Identifier !== null) {
        El = Identifier.FElement;
        Identifier = Identifier.NextSameIdentifier;
        if (El === StopAt) {
          Result = 0}
         else if (this.HasOverloadIndex(El,false)) Result += 1;
      };
      return Result;
    };
    this.GetOverloadAt = function (Identifier, Index) {
      var Result = null;
      var El = null;
      var CurIdent = null;
      var Count = 0;
      if (Identifier === null) return null;
      Count = 0;
      CurIdent = Identifier;
      while (CurIdent !== null) {
        El = CurIdent.FElement;
        CurIdent = CurIdent.NextSameIdentifier;
        if (this.HasOverloadIndex(El,false)) Count += 1;
      };
      if (Count <= Index.get()) {
        Index.set(Index.get() - 1);
        return null;
      };
      CurIdent = Identifier;
      while (CurIdent !== null) {
        if (this.HasOverloadIndex(CurIdent.FElement,false)) {
          Count -= 1;
          if (Index.get() === Count) {
            Index.set(0);
            Result = CurIdent;
            return Result;
          };
        };
        CurIdent = CurIdent.NextSameIdentifier;
      };
      return Result;
    };
    this.GetOverloadIndex$1 = function (El) {
      var Result = 0;
      var i = 0;
      var j = 0;
      var MaxDepth = 0;
      var Identifier = null;
      var Scope = null;
      var CurEl = null;
      var ThisChanged = false;
      var ElevatedLocals = null;
      Result = 0;
      if (!this.HasOverloadIndex(El,true)) return Result;
      ThisChanged = false;
      MaxDepth = this.FOverloadScopes.FCount - 1;
      for (var $l = MaxDepth; $l >= 0; $l--) {
        i = $l;
        Scope = rtl.getObject(this.FOverloadScopes.Get(i));
        if (Scope.$class.ClassType() === $lt20) {
          ThisChanged = true;
          continue;
        };
        if (i < MaxDepth) {
          ElevatedLocals = this.GetElevatedLocals(Scope);
          if (ElevatedLocals !== null) {
            Identifier = ElevatedLocals.Find(El.FName);
            j = 0;
            while (Identifier !== null) {
              CurEl = Identifier.FElement;
              Identifier = Identifier.NextSameIdentifier;
              if (CurEl === El) {
                j = 0}
               else j += 1;
            };
            Result += j;
          };
        };
        if (!ThisChanged) {
          Identifier = Scope.FindLocalIdentifier(El.FName);
          Result += this.GetOverloadIndex(Identifier,El);
        };
      };
      if (ThisChanged) return Result;
      Identifier = this.FindExternalName(El.FName);
      Result += this.GetOverloadIndex(Identifier,El);
      return Result;
    };
    this.GetOverloadAt$1 = function (aName, Index) {
      var Result = null;
      var i = 0;
      var MaxDepth = 0;
      var Scope = null;
      var Skip = false;
      var ElevatedLocals = null;
      Result = null;
      Skip = false;
      MaxDepth = this.FOverloadScopes.FCount - 1;
      for (var $l = MaxDepth; $l >= 0; $l--) {
        i = $l;
        Scope = rtl.getObject(this.FOverloadScopes.Get(i));
        if (Scope.$class.ClassType() === $lt20) {
          Skip = true;
          continue;
        };
        if (i < MaxDepth) {
          ElevatedLocals = this.GetElevatedLocals(Scope);
          if (ElevatedLocals !== null) {
            Result = ElevatedLocals.Find(aName);
            Result = this.GetOverloadAt(Result,{get: function () {
                return Index;
              }, set: function (v) {
                Index = v;
              }});
            if (Result !== null) return Result;
          };
        };
        if (!Skip) {
          Result = Scope.FindLocalIdentifier(aName);
          Result = this.GetOverloadAt(Result,{get: function () {
              return Index;
            }, set: function (v) {
              Index = v;
            }});
          if (Result !== null) return Result;
        };
      };
      if (Skip) return Result;
      Result = this.FindExternalName(aName);
      Result = this.GetOverloadAt(Result,{get: function () {
          return Index;
        }, set: function (v) {
          Index = v;
        }});
      return Result;
    };
    this.GetElevatedLocals = function (Scope) {
      var Result = null;
      var C = null;
      C = Scope.$class.ClassType();
      if (C === $lt12) {
        Result = Scope.ElevatedLocals}
       else if (C === $lt14) {
        Result = Scope.ElevatedLocals}
       else Result = null;
      return Result;
    };
    this.RenameOverload = function (El) {
      var $Self = this;
      var Result = false;
      var OverloadIndex = 0;
      function GetDuplicate() {
        var Result = null;
        var Duplicate = null;
        Duplicate = $Self.GetOverloadAt$1(El.FName,0);
        Result = Duplicate.FElement;
        return Result;
      };
      var NewName = "";
      var Duplicate = null;
      var ProcScope = null;
      OverloadIndex = this.GetOverloadIndex$1(El);
      if (OverloadIndex === 0) {
        Result = false}
       else {
        if ((El.$class.ClassType() === $lt78) && (El.FParent.$class.ClassType() === $lt72) && (El.FParent.FData.NewInstanceFunction === El)) {
          Duplicate = GetDuplicate();
          this.RaiseMsg(20170324234324,4019,rtl.getResStr($mod,"sNewInstanceFunctionMustNotHaveOverloadAtX"),$lp6(18,this.GetElementSourcePosStr(Duplicate)),El);
        };
        if (El.Visibility === 4) {
          Duplicate = GetDuplicate();
          this.RaiseMsg(20170413220924,3009,rtl.getResStr($lm6,"sDuplicateIdentifier"),$lp6(18,Duplicate.FName,18,this.GetElementSourcePosStr(Duplicate)),El);
        };
        NewName = El.FName + "$" + $lp2(OverloadIndex);
        if ($lt16.isPrototypeOf(El.FData)) {
          ProcScope = El.FData;
          ProcScope.OverloadName = NewName;
          if (ProcScope.DeclarationProc !== null) this.RaiseInternalError(20180322233222,$lp15(El));
          if (ProcScope.ImplProc !== null) ProcScope.ImplProc.FData.OverloadName = NewName;
          if (ProcScope.SpecializedFromItem !== null) this.RenameSpecialized(ProcScope.SpecializedFromItem);
        } else El.FName = NewName;
        Result = true;
      };
      return Result;
    };
    this.RenameOverloadsInSection = function (aSection) {
      var IntfSection = null;
      var OldScopeCount = 0;
      var Scope = null;
      if (aSection === null) return;
      Scope = rtl.as(aSection.FData,$lt12);
      if (Scope.Renamed) this.RaiseNotYetImplemented(20200601231236,aSection,"");
      IntfSection = null;
      OldScopeCount = this.FOverloadScopes.FCount;
      if (aSection.$class.ClassType() === $lt79) {
        IntfSection = this.FRootElement.InterfaceSection;
        this.PushOverloadScope(rtl.as(IntfSection.FData,$lt58));
      };
      this.PushOverloadScope(rtl.as(aSection.FData,$lt58));
      this.RenameOverloads(aSection,aSection.Declarations);
      this.RenameSubOverloads(aSection.Declarations);
      this.RestoreOverloadScopeLvl(OldScopeCount);
      Scope.Renamed = true;
    };
    this.RenameOverloads = function (DeclEl, Declarations) {
      var i = 0;
      var El = null;
      var Proc = null;
      var ProcScope = null;
      var OvrProcScope = null;
      var ImplProcScope = null;
      var C = null;
      if (DeclEl === null) ;
      for (var $l = 0, $end = Declarations.FCount - 1; $l <= $end; $l++) {
        i = $l;
        El = rtl.getObject(Declarations.Get(i));
        C = El.$class.ClassType();
        if (C.InheritsFrom($lt67)) {
          Proc = El;
          ProcScope = rtl.as(Proc.FData,$lt16);
          if (ProcScope.DeclarationProc !== null) {
            continue}
           else if (Proc.IsOverride()) {
            if (ProcScope.OverriddenProc === null) this.RaiseInternalError(20171205183502,"");
            OvrProcScope = ProcScope.OverriddenProc.FData;
            if (OvrProcScope.OverloadName !== "") {
              ProcScope.OverloadName = OvrProcScope.OverloadName;
              if (ProcScope.ImplProc !== null) {
                ImplProcScope = ProcScope.ImplProc.FData;
                ImplProcScope.OverloadName = ProcScope.OverloadName;
                ImplProcScope.JSName = ProcScope.JSName;
              };
            };
            continue;
          } else if (Proc.IsExternal()) {
            continue;
          } else {
            this.RenameOverload(Proc);
          };
        } else if (C.InheritsFrom($lt76)) {
          if ($lt77.isPrototypeOf(El.FParent)) this.RenameOverload(El);
        } else if (C === $lt75) {
          this.RenameOverload(El)}
         else if (C.InheritsFrom($lt80)) {
          if (El.FParent.$class.ClassType() === $lt72) this.RenameOverload(El);
        };
      };
    };
    this.RenameSubOverloads = function (Declarations) {
      var i = 0;
      var OldScopeCount = 0;
      var El = null;
      var Proc = null;
      var ImplProc = null;
      var ProcScope = null;
      var ImplProcScope = null;
      var C = null;
      var ProcBody = null;
      for (var $l = 0, $end = Declarations.FCount - 1; $l <= $end; $l++) {
        i = $l;
        El = rtl.getObject(Declarations.Get(i));
        C = El.$class.ClassType();
        if (C.InheritsFrom($lt67)) {
          Proc = El;
          ProcScope = rtl.as(Proc.FData,$lt16);
          ImplProc = ProcScope.ImplProc;
          if (ImplProc !== null) {
            ImplProcScope = ImplProc.FData}
           else {
            ImplProc = Proc;
            ImplProcScope = ProcScope;
          };
          ProcBody = ImplProc.Body;
          if ((ProcBody !== null) && !ImplProcScope.BodyOverloadsRenamed) {
            ImplProcScope.BodyOverloadsRenamed = true;
            OldScopeCount = this.FOverloadScopes.FCount;
            if ((ImplProcScope.ClassRecScope !== null) && !$lt73.isPrototypeOf(Proc.FParent)) {
              this.PushOverloadClassOrRecScopes(ImplProcScope.ClassRecScope,true);
            };
            this.PushOverloadScope(ImplProcScope);
            this.RenameOverloads(ProcBody,ProcBody.Declarations);
            this.RenameSubOverloads(ProcBody.Declarations);
            this.PopOverloadScope();
            this.RestoreOverloadScopeLvl(OldScopeCount);
          };
        } else if ((C === $lt72) || (C === $lt81)) this.RenameMembers(El);
      };
    };
    this.RenameMembers = function (El) {
      var OldScopeCount = 0;
      var ClassEl = null;
      var ClassOrRecScope = null;
      var RecScope = null;
      var ClassScope = null;
      OldScopeCount = this.FOverloadScopes.FCount;
      if (El.$class.ClassType() === $lt72) {
        ClassEl = El;
        if (ClassEl.IsForward) return;
        ClassScope = rtl.as(El.FData,$lt14);
        if (ClassScope.MemberOverloadsRenamed) return;
        ClassScope.MemberOverloadsRenamed = true;
        ClassOrRecScope = ClassScope;
      } else {
        RecScope = rtl.as(El.FData,$lt15);
        if (RecScope.MemberOverloadsRenamed) return;
        RecScope.MemberOverloadsRenamed = true;
        ClassOrRecScope = RecScope;
      };
      this.PushOverloadClassOrRecScopes(ClassOrRecScope,false);
      this.RenameOverloads(El,El.Members);
      this.RenameSubOverloads(El.Members);
      this.RestoreOverloadScopeLvl(OldScopeCount);
    };
    this.RenameSpecialized = function (SpecializedItem) {
      var GenScope = null;
      var NewName = "";
      if (SpecializedItem === null) return;
      NewName = SpecializedItem.GenericEl.FName + "$G" + $lp2(SpecializedItem.Index + 1);
      GenScope = SpecializedItem.FSpecializedEl.FData;
      if ($lt14.isPrototypeOf(GenScope)) {
        GenScope.JSName = NewName}
       else if ($lt15.isPrototypeOf(GenScope)) {
        GenScope.JSName = NewName}
       else if ($lt17.isPrototypeOf(GenScope)) {
        GenScope.JSName = NewName}
       else if ($lt18.isPrototypeOf(GenScope)) {
        GenScope.JSName = NewName}
       else if ($lt16.isPrototypeOf(GenScope)) {}
      else this.RaiseNotYetImplemented(20200906203342,SpecializedItem.FSpecializedEl,$lp16(GenScope));
    };
    this.PushOverloadScopeSkip = function () {
      this.FOverloadScopes.Add($lt20.$create("Create$1"));
    };
    this.PushOverloadScope = function (Scope) {
      if ((this.FOverloadScopes.FCount > 0) && (rtl.getObject(this.FOverloadScopes.Get(this.FOverloadScopes.FCount - 1)) === Scope)) this.RaiseNotYetImplemented(20200602000045,Scope.FElement,"");
      this.FOverloadScopes.Add(Scope);
    };
    this.PushOverloadClassOrRecScopes = function (Scope, WithParents) {
      var Result = 0;
      var CurScope = null;
      var aParent = null;
      Result = this.FOverloadScopes.FCount;
      do {
        this.PushOverloadScopeSkip();
        CurScope = Scope;
        do {
          this.PushOverloadScope(CurScope);
          if ($lt14.isPrototypeOf(CurScope)) {
            CurScope = CurScope.AncestorScope}
           else break;
        } while (!(CurScope === null));
        if (!WithParents) return Result;
        aParent = Scope.FElement.FParent;
        if (!$lt73.isPrototypeOf(aParent)) return Result;
        Scope = rtl.as(aParent.FData,$lt82);
      } while (!false);
      return Result;
    };
    this.PopOverloadScope = function () {
      var i = 0;
      var Scope = null;
      i = this.FOverloadScopes.FCount - 1;
      if (i < 0) this.RaiseInternalError(20200723125456,"");
      Scope = rtl.getObject(this.FOverloadScopes.Get(i));
      if (Scope.$class.ClassType() === $lt20) Scope = rtl.freeLoc(Scope);
      this.FOverloadScopes.Delete(i);
    };
    this.RestoreOverloadScopeLvl = function (OldScopeCount) {
      while (this.FOverloadScopes.FCount > OldScopeCount) this.PopOverloadScope();
    };
    this.ClearOverloadScopes = function () {
      if (this.FOverloadScopes === null) return;
      while (this.FOverloadScopes.FCount > 0) this.PopOverloadScope();
      $lp({p: this, get: function () {
          return this.p.FOverloadScopes;
        }, set: function (v) {
          this.p.FOverloadScopes = v;
        }});
    };
    this.AddType = function (El) {
      $lt69.AddType.call(this,El);
      if ($lt77.isPrototypeOf(El.FParent)) this.AddElevatedLocal(El);
    };
    this.AddRecordType = function (El, TypeParams) {
      $lt69.AddRecordType.apply(this,arguments);
      if ((El.FName === "") && (El.FParent.$class.ClassType() !== $lt83)) {
        this.RaiseNotYetImplemented(20190408224556,El,"anonymous record type");
      };
      if ($lt77.isPrototypeOf(El.FParent)) this.AddElevatedLocal(El);
    };
    this.AddRecordVariant = function (El) {
      this.RaiseMsg(20220323145350,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"variant record"),El);
    };
    this.AddClassType = function (El, TypeParams) {
      $lt69.AddClassType.call(this,El,TypeParams);
    };
    this.AddEnumType = function (El) {
      $lt69.AddEnumType.call(this,El);
      if ($lt77.isPrototypeOf(El.FParent)) this.AddElevatedLocal(El);
    };
    this.ResolveImplAsm = function (El) {
      var Lines = null;
      Lines = El.FTokens;
      if (Lines === null) return;
    };
    this.ResolveNameExpr = function (El, aName, Access) {
      var $Self = this;
      function CheckTObjectFree(Ref) {
        var Bin = null;
        var Left = null;
        var LeftResolved = $lt84.$new();
        var IdentEl = null;
        var C = null;
        if (!$Self.IsTObjectFreeMethod(El)) return;
        if (Ref.WithExprScope !== null) {
          if ($Self.GetNewInstanceExpr(Ref.WithExprScope.Expr) !== null) return;
          $Self.RaiseMsg(20170517092407,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
        };
        C = El.FParent.$class.ClassType();
        if (C === $lt85) {
          Bin = El.FParent;
          if ((Bin.Right !== El) || (Bin.OpCode !== 27)) $Self.RaiseMsg(20170516151950,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
          if (1 in Ref.Flags) {}
          else if ($lt86.isPrototypeOf(Bin.FParent)) {
            if ($lt87.isPrototypeOf(Bin.FParent.FParent)) $Self.RaiseMsg(20170516161345,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
          } else if ($lt88.isPrototypeOf(Bin.FParent)) {}
          else {
            $Self.RaiseMsg(20170516160347,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
          };
          Left = Bin.Left;
          $Self.ComputeElement(Left,LeftResolved,{},null);
          if (!(0 in LeftResolved.Flags)) $Self.RaiseMsg(20170516152300,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
          if (!(1 in LeftResolved.Flags)) $Self.RaiseMsg(20170516152307,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
          IdentEl = LeftResolved.IdentEl;
          if (IdentEl === null) $Self.RaiseMsg(20170516152401,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
          if (IdentEl.$class.ClassType() === $lt89) return;
          if ((IdentEl.$class.ClassType() === $lt80) || (IdentEl.$class.ClassType() === $lt75)) return;
          if ((IdentEl.$class.ClassType() === $lt90) && $lt91.isPrototypeOf(Left)) {
            return;
          };
          $Self.RaiseMsg(20170516152455,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
        } else if (C.InheritsFrom($lt92)) {
          return;
        };
        $Self.RaiseMsg(20170516152454,4023,rtl.getResStr($mod,"sFreeNeedsVar"),[],El);
      };
      function CheckResultEl(Ref) {
        var CurEl = null;
        var Lvl = 0;
        var ProcScope = null;
        var CurProcScope = null;
        var FuncType = null;
        Lvl = 0;
        CurEl = El;
        CurProcScope = null;
        while (CurEl !== null) {
          if ($lt67.isPrototypeOf(CurEl) && $lt93.isPrototypeOf(CurEl.ProcType)) {
            Lvl += 1;
            if (!$lt16.isPrototypeOf(CurEl.FData)) $Self.RaiseInternalError(20181210231858,"");
            ProcScope = CurEl.FData;
            if ($lt94.isPrototypeOf(ProcScope.DeclarationProc)) {
              FuncType = ProcScope.DeclarationProc.ProcType}
             else FuncType = CurEl.ProcType;
            if (Lvl === 1) {
              if (FuncType.ResultEl === Ref.FDeclaration) return;
              if (ProcScope.ResultVarName !== "") return;
              CurProcScope = ProcScope;
            };
          };
          CurEl = CurEl.FParent;
        };
        if (Lvl < 2) $Self.RaiseNotYetImplemented(20171003112020,El,"");
        CurProcScope.ResultVarName = $lm3.ResolverResultVar + "$" + $lp2(Lvl - 1);
      };
      var Ref = null;
      $lt69.ResolveNameExpr.call(this,El,aName,Access);
      if ($lt71.isPrototypeOf(El.FData)) {
        Ref = El.FData;
        if ($lp13(aName,"free") === 0) {
          CheckTObjectFree(Ref)}
         else if ($lt90.isPrototypeOf(Ref.FDeclaration)) {
          CheckResultEl(Ref)}
         else if (this.IsExternalClassConstructor(Ref.FDeclaration)) this.CheckExternalClassConstructor(Ref);
      };
    };
    this.ResolveFuncParamsExpr = function (Params, Access) {
      var Value = null;
      var Ref = null;
      $lt69.ResolveFuncParamsExpr.call(this,Params,Access);
      Value = Params.Value;
      if ($lt71.isPrototypeOf(Value.FData)) {
        Ref = Value.FData;
        if (this.IsExternalClassConstructor(Ref.FDeclaration)) this.CheckExternalClassConstructor(Ref);
      };
    };
    this.FinishInterfaceSection = function (Section) {
      $lt69.FinishInterfaceSection.call(this,Section);
      if (this.FOverloadScopes === null) {
        this.FOverloadScopes = $lt54.$create("Create");
        this.RenameOverloadsInSection(Section);
      };
    };
    this.FinishTypeSectionEl = function (El) {
      var C = null;
      var TypeEl = null;
      $lt69.FinishTypeSectionEl.call(this,El);
      C = El.$class.ClassType();
      if (C === $lt95) {
        TypeEl = this.ResolveAliasType(El.DestType,true);
        if (TypeEl.$class.ClassType() === $lt81) {}
        else this.RaiseMsg(20180423105726,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"pointer of " + El.DestType.FName),El);
      };
    };
    this.FinishModule = function (CurModule) {
      var ModuleClass = null;
      $lt69.FinishModule.call(this,CurModule);
      if (this.FOverloadScopes === null) this.FOverloadScopes = $lt54.$create("Create");
      try {
        ModuleClass = CurModule.$class.ClassType();
        if (ModuleClass === $lt96) {
          this.RenameOverloadsInSection(CurModule.ImplementationSection)}
         else if (ModuleClass === $lt97) {
          this.RenameOverloadsInSection(CurModule.ProgramSection)}
         else if (CurModule.$class.ClassType() === $lt98) {
          this.RenameOverloadsInSection(CurModule.LibrarySection)}
         else this.RaiseNotYetImplemented(20170221000032,CurModule,"");
      } finally {
        this.ClearOverloadScopes();
      };
    };
    this.FinishEnumType = function (El) {
      var i = 0;
      var EnumValue = null;
      $lt69.FinishEnumType.call(this,El);
      for (var $l = 0, $end = El.Values.FCount - 1; $l <= $end; $l++) {
        i = $l;
        EnumValue = rtl.getObject(El.Values.Get(i));
        if (EnumValue.Value !== null) this.RaiseNotYetImplemented(20180126202434,EnumValue,"enum const");
      };
    };
    this.FinishSetType = function (El) {
      var TypeEl = null;
      var C = null;
      var RangeValue = null;
      var bt = 0;
      $lt69.FinishSetType.call(this,El);
      TypeEl = this.ResolveAliasType(El.EnumType,true);
      C = TypeEl.$class.ClassType();
      if (C === $lt99) {
        return}
       else if (C === $lt100) {
        if ($lt65.isPrototypeOf(TypeEl.FData)) {
          bt = TypeEl.FData.BaseType;
          if (bt in rtl.createSet(15,19,20,22,21,5,6)) return;
          this.RaiseMsg(20171110150000,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"set of " + TypeEl.FName),El);
        };
      } else if (C === $lt101) {
        RangeValue = this.Eval(TypeEl.RangeExpr,rtl.createSet(0),true);
        try {
          var $tmp = RangeValue.Kind;
          if ($tmp === 10) {
            if ((RangeValue.RangeEnd - RangeValue.RangeStart) > 0xffff) {
              this.RaiseMsg(20171110150159,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"set of " + TypeEl.FName),El);
            };
            return;
          } else {
            this.RaiseMsg(20171110145211,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"set of " + TypeEl.FName),El);
          };
        } finally {
          $lp17({get: function () {
              return RangeValue;
            }, set: function (v) {
              RangeValue = v;
            }});
        };
      };
      this.RaiseMsg(20170415182320,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"set of " + TypeEl.FName),El);
    };
    this.FinishRecordType = function (El) {
      if ((El.Variants !== null) && (El.Variants.FCount > 0)) this.RaiseMsg(20180104205309,3081,rtl.getResStr($lm6,"sXIsNotSupported"),$lp6(18,"variant record"),rtl.getObject(El.Variants.Get(0)));
      $lt69.FinishRecordType.call(this,El);
    };
    this.FinishClassType = function (El) {
      var Scope = null;
      var CurScope = null;
      var Value = null;
      $lt69.FinishClassType.call(this,El);
      if (El.IsExternal) {
        if (El.ExternalName === "") this.RaiseMsg(20170321151109,4012,rtl.getResStr($mod,"sMissingExternalName"),[],El);
        this.AddExternalPath(El.ExternalName,El);
        if (rtl.neSet(El.RTTIVisibility.Fields,{})) this.RaiseNotYetImplemented(20250103153804,El,"RTTI for external class");
        if (rtl.neSet(El.RTTIVisibility.Methods,{})) this.RaiseNotYetImplemented(20250103153905,El,"RTTI for external class");
        if (rtl.neSet(El.RTTIVisibility.Properties,{})) this.RaiseNotYetImplemented(20250103153913,El,"RTTI for external class");
      };
      if (El.IsPacked()) this.RaiseMsg(20180326155616,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"packed"),El);
      if (El.IsForward) return;
      Scope = rtl.as(El.FData,$lt14);
      var $tmp = El.ObjKind;
      if ($tmp === 2) {
        if (!(El.InterfaceType in rtl.createSet(0,1))) this.RaiseMsg(20180326155612,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,$lm1.InterfaceTypeNames[El.InterfaceType]),El);
        if (El.GUIDExpr !== null) {
          Value = this.Eval(El.GUIDExpr,rtl.createSet(0),true);
          try {
            var $tmp1 = Value.Kind;
            if ($tmp1 === 8) {
              Scope.GUID = Value.S}
             else {
              this.RaiseXExpectedButYFound(20180326160602,"string literal",El.GUIDExpr.ElementTypeName(),El.GUIDExpr);
            };
          } finally {
            $lp17({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
        } else {
          Scope.GUID = this.GenerateGUID(El);
        };
        CurScope = Scope;
        do {
          CurScope = CurScope.AncestorScope;
          if (CurScope === null) break;
          if ($lp18(CurScope.GUID,Scope.GUID)) this.RaiseMsg(20180330232206,4024,rtl.getResStr($mod,"sDuplicateGUIDXInYZ"),$lp6(18,Scope.GUID,18,El.FName,18,CurScope.FElement.FName),El);
        } while (!false);
      };
      $lp({p: Scope, get: function () {
          return this.p.MsgIntToProc;
        }, set: function (v) {
          this.p.MsgIntToProc = v;
        }});
      $lp({p: Scope, get: function () {
          return this.p.MsgStrToProc;
        }, set: function (v) {
          this.p.MsgStrToProc = v;
        }});
    };
    this.FinishArrayType = function (El) {
      var ElType = null;
      $lt69.FinishArrayType.call(this,El);
      ElType = this.ResolveAliasType(El.ElType,true);
      if (this.IsManagedJSType(ElType)) {
        if (rtl.length(El.Ranges) > 0) this.RaiseMsg(20250623180523,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"static array of COM-interface"),El);
        if (El.FData === null) this.CreateScope(El,this.FScopeClass_Array);
        rtl.as(El.FData,$lt17).Managed = true;
      };
    };
    this.FinishAncestors = function (aClass) {
      var IntfList = null;
      var i = 0;
      var j = 0;
      var Scope = null;
      var IntfScope = null;
      var IntfType = null;
      var OrigIntfType = null;
      var GUIDs = null;
      $lt69.FinishAncestors.call(this,aClass);
      if ($lt81.isPrototypeOf(aClass.FParent)) {
        if (!(aClass.ObjKind in rtl.unionSet(rtl.createSet(1),$lm1.okAllHelpers))) this.RaiseNotYetImplemented(20190105143752,aClass,$lp19(aClass) + " inside record");
      };
      Scope = aClass.FData;
      if (Scope === null) return;
      Scope.DispatchField = this.FCurrentParser.FScanner.GetCurrentValueSwitch(1);
      Scope.DispatchStrField = this.FCurrentParser.FScanner.GetCurrentValueSwitch(2);
      IntfList = aClass.Interfaces;
      GUIDs = $lt61.$create("Create$1");
      try {
        for (var $l = 0, $end = IntfList.FCount - 1; $l <= $end; $l++) {
          i = $l;
          OrigIntfType = rtl.getObject(IntfList.Get(i));
          IntfType = this.ResolveAliasType(OrigIntfType,true);
          IntfScope = IntfType.FData;
          j = GUIDs.IndexOf(IntfScope.GUID);
          if (j >= 0) this.RaiseMsg(20180330231220,4024,rtl.getResStr($mod,"sDuplicateGUIDXInYZ"),$lp6(18,IntfScope.GUID,18,OrigIntfType.FName,18,GUIDs.GetObject(j).FName),aClass);
          GUIDs.AddObject(IntfScope.GUID,OrigIntfType);
        };
      } finally {
        GUIDs = rtl.freeLoc(GUIDs);
      };
    };
    var ClassFieldModifiersAllowed = rtl.createSet(4,5,1,2);
    var RecordVarModifiersAllowed = rtl.createSet(4,5,1,2);
    var LocalVarModifiersAllowed = {};
    var ImplementationVarModifiersAllowed = rtl.createSet(1);
    var SectionVarModifiersAllowed = rtl.createSet(1,2);
    this.FinishVariable = function (El) {
      var $Self = this;
      function RaiseVarModifierNotSupported(Allowed) {
        var s = "";
        var m = 0;
        s = "";
        for (var $l = 0; $l <= 6; $l++) {
          m = $l;
          if ((m in El.VarModifiers) && !(m in Allowed)) {
            s = $lt102[m];
            $Self.RaiseMsg(20170322134418,4015,rtl.getResStr($mod,"sInvalidVariableModifier"),$lp6(18,$lm1.VariableModifierNames[m]),El);
          };
        };
      };
      var ExtName = "";
      var ParentC = null;
      var AbsExpr = null;
      var ResolvedAbsol = $lt84.$new();
      var AbsIdent = null;
      var TypeEl = null;
      var ElTypeEl = null;
      var GUID = $lt103.$new();
      $lt69.FinishVariable.call(this,El);
      ParentC = El.FParent.$class.ClassType();
      if (El.AbsoluteExpr !== null) {
        if (1 in El.VarModifiers) this.RaiseMsg(20171226105002,3052,rtl.getResStr($lm6,"sXModifierMismatchY"),$lp6(18,"absolute",18,"external"),El.AbsoluteExpr);
        AbsExpr = El.AbsoluteExpr;
        this.ComputeElement(AbsExpr,ResolvedAbsol,rtl.createSet(1),null);
        AbsIdent = ResolvedAbsol.IdentEl;
        if (ParentC === $lt77) {
          if ($lt77.isPrototypeOf(AbsIdent.FParent) || $lt89.isPrototypeOf(AbsIdent) || $lt90.isPrototypeOf(AbsIdent)) {}
          else {
            this.RaiseMsg(20171226102424,4009,rtl.getResStr($mod,"sInvalidAbsoluteLocation"),[],El.AbsoluteExpr);
          };
        } else {
          this.RaiseMsg(20170728133340,4015,rtl.getResStr($mod,"sInvalidVariableModifier"),$lp6(18,"absolute"),El);
        };
      };
      if (ParentC === $lt72) {
        RaiseVarModifierNotSupported(ClassFieldModifiersAllowed);
        if (El.FParent.IsExternal) {
          if (El.Visibility === 4) this.RaiseMsg(20170413221516,3053,rtl.getResStr($lm6,"sSymbolCannotBePublished"),[],El);
          if (!(1 in El.VarModifiers)) {
            if ((El.$class.ClassType() === $lt80) || (El.$class.ClassType() === $lt75)) {
              if (El.ExportName !== null) this.RaiseMsg(20170322134321,4015,rtl.getResStr($mod,"sInvalidVariableModifier"),$lp6(18,"export name"),El.ExportName);
              El.ExportName = $lt91.$create("Create$3",[El,2,"'" + El.FName + "'"]);
              this.FOwnedElements.Add(El.ExportName);
            };
            El.VarModifiers = rtl.includeSet(El.VarModifiers,1);
          };
          if ((El.$class.ClassType() === $lt75) && (El.Expr !== null)) El.IsConst = true;
        };
      } else if (ParentC === $lt81) {
        RaiseVarModifierNotSupported(RecordVarModifiersAllowed);
        if (this.IsManagedJSType(El.VarType)) this.RaiseMsg(20180404135105,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"COM-interface as record member"),El);
        if ((El.$class.ClassType() === $lt75) && (El.Expr !== null) && (1 in El.VarModifiers)) El.IsConst = true;
      } else if (ParentC === $lt77) {
        RaiseVarModifierNotSupported(LocalVarModifiersAllowed);
        if (El.$class.ClassType() === $lt75) {
          this.AddElevatedLocal(El);
        };
      } else if (ParentC === $lt104) {
        RaiseVarModifierNotSupported(LocalVarModifiersAllowed)}
       else if (ParentC === $lt79) {
        RaiseVarModifierNotSupported(ImplementationVarModifiersAllowed)}
       else if (ParentC.InheritsFrom($lt105)) {
        RaiseVarModifierNotSupported(SectionVarModifiersAllowed);
      } else {
        this.RaiseNotYetImplemented(20170324151259,El,"");
      };
      if (1 in El.VarModifiers) {
        if (El.LibraryName !== null) this.RaiseMsg(20170227094227,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"library"),El.ExportName);
        if (El.ExportName === null) this.RaiseMsg(20170227100750,4012,rtl.getResStr($mod,"sMissingExternalName"),[],El);
        ExtName = this.ComputeConstString(El.ExportName,true,true);
        if ((El.Visibility === 4) && (ExtName !== El.FName)) this.RaiseMsg(20170407002940,4014,rtl.getResStr($mod,"sPublishedNameMustMatchExternal"),[],El.ExportName);
        if ($lt105.isPrototypeOf(El.FParent) || ((El.$class.ClassType() === $lt75) && $lt67.isPrototypeOf(El.FParent))) this.AddExternalPath(ExtName,El.ExportName);
      };
      if (El.VarType !== null) {
        TypeEl = this.ResolveAliasType(El.VarType,true);
        if (TypeEl.$class.ClassType() === $lt95) {
          ElTypeEl = this.ResolveAliasType(TypeEl.DestType,true);
          if (ElTypeEl.$class.ClassType() === $lt81) {}
          else this.RaiseMsg(20180423110113,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"pointer"),El);
        };
        if (El.Expr !== null) {
          if (this.IsManagedJSType(TypeEl)) {
            if ($lt106.isPrototypeOf(El.Expr)) {}
            else this.RaiseMsg(20250623135850,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"initial value of managed type"),El.Expr);
          };
          if (TypeEl.$class.ClassType() === $lt81) {
            if (this.GetAssignGUIDString(TypeEl,El.Expr,GUID)) ;
          };
        };
      };
    };
    this.FinishArgument = function (El) {
      var TypeEl = null;
      var ElTypeEl = null;
      var C = null;
      $lt69.FinishArgument.call(this,El);
      if (El.ArgType !== null) {
        TypeEl = this.ResolveAliasType(El.ArgType,true);
        C = TypeEl.$class.ClassType();
        if (C === $lt95) {
          ElTypeEl = this.ResolveAliasType(TypeEl.DestType,true);
          if (ElTypeEl.$class.ClassType() === $lt81) {}
          else this.RaiseMsg(20180423110239,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"pointer"),El);
        };
        if (El.Access === 4) {
          if ((C === $lt81) || (C === $lt107)) {}
          else this.LogMsg(20191215133912,2,4031,rtl.getResStr($mod,"sConstRefNotForXAsConst"),$lp6(18,$lp19(TypeEl)),El);
        };
      };
    };
    this.FinishProcedureType = function (El) {
      var Proc = null;
      var pm = 0;
      var ExtName = "";
      var C = null;
      var AClassOrRec = null;
      var ClassOrRecScope = null;
      var AClass = null;
      var ClassScope = null;
      var ptm = 0;
      var TypeEl = null;
      var ElTypeEl = null;
      var HelperForType = null;
      var FuncType = null;
      $lt69.FinishProcedureType.call(this,El);
      if ($lt93.isPrototypeOf(El)) {
        FuncType = El;
        if (FuncType.ResultEl !== null) {
          TypeEl = this.ResolveAliasType(FuncType.ResultEl.ResultType,true);
          if (TypeEl.$class.ClassType() === $lt95) {
            ElTypeEl = this.ResolveAliasType(TypeEl.DestType,true);
            if (ElTypeEl.$class.ClassType() === $lt81) {}
            else this.RaiseMsg(20180423110824,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"pointer"),El);
          };
        };
      };
      if ($lt67.isPrototypeOf(El.FParent)) {
        Proc = El.FParent;
        if (El.CallingConvention !== 0) this.RaiseMsg(20170211214731,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,$lm1.cCallingConventions[El.CallingConvention]),Proc);
        for (var $l in Proc.FModifiers) {
          pm = +$l;
          if (!(pm in rtl.createSet(0,2,3,5,6,7,8,9,10,12,13))) this.RaiseNotYetImplemented(20170208142159,El,"modifier " + $lm1.ModifierNames[pm]);
        };
        for (var $l1 in Proc.ProcType.Modifiers) {
          ptm = +$l1;
          if (!(ptm in rtl.createSet(0,3,2,5))) this.RaiseNotYetImplemented(20170411171454,El,"modifier " + $lm1.ProcTypeModifiers[ptm]);
        };
        if (rtl.leSet(rtl.createSet(10,12),Proc.FModifiers)) this.RaiseMsg(20170324150149,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,Proc.ElementTypeName(),18,"public, external"),Proc);
        if (Proc.PublicName !== null) this.RaiseMsg(20170324150417,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"public name"),Proc.PublicName);
        if (Proc.DispIDExpr !== null) this.RaiseMsg(20190303225224,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"dispid"),Proc.DispIDExpr);
        if (Proc.MessageExpr !== null) {
          if (!$lt72.isPrototypeOf(Proc.FParent) || (Proc.FParent.ObjKind !== 1)) this.RaiseMsg(20190303231445,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,"message",18,"at non class method"),Proc.MessageExpr);
          if (Proc.FParent.IsExternal) this.RaiseMsg(20190304002235,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,"message",18,"in external class"),Proc.MessageExpr);
          this.AddMessageIdToClassScope(Proc,true);
        };
        if ($lt73.isPrototypeOf(Proc.FParent)) {
          AClassOrRec = Proc.FParent;
          ClassOrRecScope = rtl.as(AClassOrRec.FData,$lt82);
          if ($lt14.isPrototypeOf(ClassOrRecScope)) {
            AClass = AClassOrRec;
            ClassScope = ClassOrRecScope;
            if (AClass.IsExternal) {
              if (!(12 in Proc.FModifiers)) {
                if (Proc.LibrarySymbolName !== null) this.RaiseMsg(20170322142158,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,Proc.ElementTypeName(),18,"symbol name"),Proc.LibrarySymbolName);
                Proc.FModifiers = rtl.unionSet(Proc.FModifiers,rtl.createSet(12));
                Proc.LibrarySymbolName = $lt91.$create("Create$3",[Proc,2,"'" + Proc.FName + "'"]);
                this.FOwnedElements.Add(Proc.LibrarySymbolName);
              };
              if (Proc.Visibility === 4) this.RaiseMsg(20170413221327,3053,rtl.getResStr($lm6,"sSymbolCannotBePublished"),[],Proc);
              C = Proc.$class.ClassType();
              if ((C === $lt67) || (C === $lt94)) {}
              else if ((C === $lt108) || (C === $lt78)) {}
              else if (C === $lt109) {
                if (Proc.IsVirtual()) this.RaiseMsg(20170323100447,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,Proc.ElementTypeName(),18,"virtual,external"),Proc);
                this.ComputeConstString(Proc.LibrarySymbolName,true,true);
              } else this.RaiseMsg(20170322163210,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,Proc.ElementTypeName()),Proc);
            } else {
              var $tmp = AClass.ObjKind;
              if ($tmp === 1) {
                if ((ClassScope.NewInstanceFunction === null) && (Proc.$class.ClassType() === $lt78) && (ClassScope.AncestorScope !== null) && ClassScope.AncestorScope.FElement.IsExternal && (Proc.Visibility in rtl.createSet(2,3,4)) && (Proc.GetFT().ResultEl.ResultType === AClassOrRec) && rtl.eqSet(rtl.diffSet(Proc.FModifiers,rtl.createSet(0,9)),{}) && rtl.eqSet(rtl.intersectSet(Proc.ProcType.Modifiers,rtl.createSet(0)),rtl.createSet(0))) {
                  ClassScope.NewInstanceFunction = Proc;
                  this.CheckNewInstanceFunction(ClassScope);
                };
              } else if ($tmp === 2) {
                for (var $l2 in Proc.FModifiers) {
                  pm = +$l2;
                  if (!(pm in rtl.createSet(5,7))) this.RaiseMsg(20180329141108,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,Proc.ElementTypeName(),18,$lm1.ModifierNames[pm]),Proc);
                };
              } else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
                HelperForType = this.ResolveAliasType(AClass.HelperForType,true);
                if (HelperForType.$class.ClassType() === $lt72) {
                  if (HelperForType.IsExternal) {
                    if (this.IsClassMethod(Proc) && !(2 in El.Modifiers)) this.RaiseMsg(20190201165259,4027,rtl.getResStr($mod,"sHelperClassMethodForExtClassMustBeStatic"),[],El);
                    if (Proc.$class.ClassType() === $lt109) this.RaiseNotYetImplemented(20190206153655,El,"");
                  };
                };
                if (Proc.IsExternal()) {
                  if (!$lt73.isPrototypeOf(HelperForType)) this.RaiseMsg(20190314225457,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"external method in type helper"),El);
                };
              };
            };
          } else {
            AClass = null;
            ClassScope = null;
          };
        };
        if (12 in Proc.FModifiers) {
          if (Proc.IsOverride()) this.RaiseMsg(20170321101715,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,Proc.ElementTypeName(),18,"override,external"),Proc);
          if (Proc.LibraryExpr !== null) this.RaiseMsg(20170211220712,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"external library name"),Proc.LibraryExpr);
          if (Proc.LibrarySymbolName === null) this.RaiseMsg(20170227095454,4012,rtl.getResStr($mod,"sMissingExternalName"),$lp6(18,"missing external name"),Proc);
          for (pm in rtl.createSet(9,13,15,8)) if (pm in Proc.FModifiers) this.RaiseMsg(20170323100842,3016,rtl.getResStr($lm6,"sInvalidXModifierY"),$lp6(18,Proc.ElementTypeName(),18,$lm1.ModifierNames[pm]),Proc);
          ExtName = this.ComputeConstString(Proc.LibrarySymbolName,true,true);
          if (Proc.IsVirtual() && (Proc.FName !== ExtName)) this.RaiseMsg(20170321090049,4013,rtl.getResStr($mod,"sVirtualMethodNameMustMatchExternal"),[],Proc.LibrarySymbolName);
          if (Proc.Visibility === 4) {
            if (Proc.FName !== ExtName) this.RaiseMsg(20170407002940,4014,rtl.getResStr($mod,"sPublishedNameMustMatchExternal"),[],Proc.LibrarySymbolName);
            if (ExtName === $mod.ExtClassBracketAccessor) this.RaiseMsg(20170409211805,3053,rtl.getResStr($lm6,"sSymbolCannotBePublished"),[],Proc.LibrarySymbolName);
          };
          if ($lt105.isPrototypeOf(Proc.FParent)) this.AddExternalPath(ExtName,Proc.LibrarySymbolName);
        };
      } else {
        if (!(El.CallingConvention in rtl.createSet(0,6))) this.RaiseMsg(20200516134717,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,$lm1.cCallingConventions[El.CallingConvention]),El);
      };
    };
    this.FinishProperty = function (PropEl) {
      var Getter = null;
      var Setter = null;
      var GetterIsBracketAccessor = false;
      var SetterIsBracketAccessor = false;
      var Arg = null;
      var ArgResolved = $lt84.$new();
      var ParentC = null;
      var IndexExpr = null;
      var PropArgs = null;
      $lt69.FinishProperty.call(this,PropEl);
      ParentC = PropEl.FParent.$class.ClassType();
      if (ParentC === $lt72) {
        if (PropEl.FParent.IsExternal) {
          if (PropEl.Visibility === 4) this.RaiseMsg(20170413221703,3053,rtl.getResStr($lm6,"sSymbolCannotBePublished"),[],PropEl);
        };
      } else if (ParentC === $lt81) {}
      else this.RaiseNotYetImplemented(20190105144817,PropEl,"");
      Getter = this.GetPasPropertyGetter(PropEl);
      GetterIsBracketAccessor = this.IsExternalBracketAccessor(Getter);
      Setter = this.GetPasPropertySetter(PropEl);
      SetterIsBracketAccessor = this.IsExternalBracketAccessor(Setter);
      IndexExpr = this.GetPasPropertyIndex(PropEl);
      PropArgs = this.GetPasPropertyArgs(PropEl);
      if (GetterIsBracketAccessor) {
        if ((PropArgs.FCount !== 1) || (IndexExpr !== null)) this.RaiseMsg(20170403001743,4020,rtl.getResStr($mod,"sBracketAccessorOfExternalClassMustHaveOneParameter"),[],PropEl);
      };
      if (SetterIsBracketAccessor) {
        if ((PropArgs.FCount !== 1) || (IndexExpr !== null)) this.RaiseMsg(20170403001806,4020,rtl.getResStr($mod,"sBracketAccessorOfExternalClassMustHaveOneParameter"),[],PropEl);
      };
      if (GetterIsBracketAccessor || SetterIsBracketAccessor) {
        Arg = rtl.getObject(PropArgs.Get(0));
        if (!(Arg.Access in rtl.createSet(0,1))) this.RaiseMsg(20170403090225,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,'default or "const"',18,$lm1.AccessNames[Arg.Access]),PropEl);
        this.ComputeElement(Arg,ArgResolved,rtl.createSet(4),Arg);
        if (!(ArgResolved.BaseType in rtl.unionSet(rtl.unionSet(rtl.unionSet($mod.btAllJSInteger,$mod.btAllJSStringAndChars),$mod.btAllJSBooleans),$mod.btAllJSFloats))) this.RaiseMsg(20170403090628,3028,rtl.getResStr($lm6,"sIncompatibleTypesGotExpected"),$lp6(18,this.GetResolverResultDescription(ArgResolved,true),18,"string"),Arg);
      };
    };
    this.FinishProcParamAccess = function (ProcType, Params) {
      $lt69.FinishProcParamAccess.call(this,ProcType,Params);
      this.FindCreatorArrayOfConst(ProcType.Args,Params);
    };
    this.FinishPropertyParamAccess = function (Params, Prop) {
      var Args = null;
      $lt69.FinishPropertyParamAccess.call(this,Params,Prop);
      Args = this.GetPasPropertyArgs(Prop);
      if (Args === null) this.RaiseNotYetImplemented(20190215210914,Params,$lp16(Prop));
      this.FindCreatorArrayOfConst(Args,Params);
    };
    this.FinishExportSymbol = function (El) {
      var ResolvedEl = $lt84.$new();
      var DeclEl = null;
      var C = null;
      var Proc = null;
      var V = null;
      if ($lt110.isPrototypeOf(El.FParent)) {}
      else this.RaiseMsg(20210106224720,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"non library export"),El.ExportIndex);
      if (El.ExportIndex !== null) this.RaiseMsg(20210106223403,4002,rtl.getResStr($mod,"sNotSupportedX"),$lp6(18,"export index"),El.ExportIndex);
      $lt69.FinishExportSymbol.call(this,El);
      this.ComputeElement(El,ResolvedEl,{},null);
      DeclEl = ResolvedEl.IdentEl;
      if (DeclEl === null) this.RaiseMsg(20210106223620,3145,rtl.getResStr($lm6,"sSymbolCannotBeExportedFromALibrary"),[],El);
      if ($lt90.isPrototypeOf(DeclEl)) DeclEl = DeclEl.FParent.FParent;
      C = DeclEl.$class.ClassType();
      if (DeclEl.FParent === null) this.RaiseMsg(20220206142534,3145,rtl.getResStr($lm6,"sSymbolCannotBeExportedFromALibrary"),[],El);
      if ($lt105.isPrototypeOf(DeclEl.FParent)) {}
      else if ($lt67.isPrototypeOf(DeclEl) && DeclEl.IsStatic()) {}
      else this.RaiseMsg(20210106224436,3145,rtl.getResStr($lm6,"sSymbolCannotBeExportedFromALibrary"),[],El);
      if (!$lt110.isPrototypeOf(El.FParent)) this.RaiseMsg(20211022224239,3145,rtl.getResStr($lm6,"sSymbolCannotBeExportedFromALibrary"),[],El);
      if (C.InheritsFrom($lt67)) {
        Proc = DeclEl;
        if (Proc.IsExternal() || Proc.IsAbstract()) this.RaiseMsg(20211021225630,3145,rtl.getResStr($lm6,"sSymbolCannotBeExportedFromALibrary"),[],El);
      } else if ((C === $lt80) || (C === $lt75)) {
        V = DeclEl;
        if (1 in V.VarModifiers) this.RaiseMsg(20211021225634,3145,rtl.getResStr($lm6,"sSymbolCannotBeExportedFromALibrary"),[],El);
      } else {
        this.RaiseMsg(20210106223621,3145,rtl.getResStr($lm6,"sSymbolCannotBeExportedFromALibrary"),[],El);
      };
    };
    this.ComputeArgumentExpr = function (ArgResolved, Access, Expr, ExprResolved, SetReferenceFlags) {
      var RightEl = null;
      var Ref = null;
      $lt69.ComputeArgumentExpr.call(this,ArgResolved,Access,Expr,ExprResolved,SetReferenceFlags);
      if (SetReferenceFlags && (Access in rtl.createSet(0,1)) && ((ArgResolved.BaseType === 4) || this.IsJSBaseType$1(ArgResolved,1,true)) && $lt81.isPrototypeOf(ExprResolved.LoTypeEl)) {
        RightEl = this.GetRightMostExpr(Expr);
        if ($lt71.isPrototypeOf(RightEl.FData)) {
          Ref = RightEl.FData;
          Ref.Flags = rtl.includeSet(Ref.Flags,7);
        };
      };
    };
    this.FindCreatorArrayOfConst = function (Args, ErrorEl) {
      var i = 0;
      var Arg = null;
      for (var $l = 0, $end = Args.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Arg = rtl.getObject(Args.Get(i));
        if (!this.IsArrayOfConst(Arg.ArgType)) continue;
        this.FindProc_ArrLitToArrayOfConst(ErrorEl);
      };
    };
    this.FindProc_ArrLitToArrayOfConst = function (ErrorEl) {
      var Result = null;
      var aMod = null;
      var UtilsMod = null;
      var ModScope = null;
      var SectionScope = null;
      var Identifier = null;
      var El = null;
      var FuncType = null;
      aMod = this.FRootElement;
      ModScope = rtl.as(aMod.FData,$lt9);
      Result = ModScope.SystemVarRecs;
      if (Result !== null) return Result;
      UtilsMod = this.FindUsedUnitname("system",aMod);
      if (UtilsMod === null) this.RaiseIdentifierNotFound(20190215211531,"System.VarRecs",ErrorEl);
      if (UtilsMod.InterfaceSection === null) this.RaiseIdentifierNotFound(20190215211538,"System.VarRecs",ErrorEl);
      SectionScope = rtl.as($lp20(UtilsMod.InterfaceSection.FData),$lt55);
      Identifier = SectionScope.FindLocalIdentifier("VarRecs");
      if (Identifier === null) this.RaiseIdentifierNotFound(20190215211551,"System.VarRecs",ErrorEl);
      El = Identifier.FElement;
      if (El.$class.ClassType() !== $lt94) this.RaiseXExpectedButYFound(20190215211559,"function System.VarRecs",$lp19(El),ErrorEl);
      Result = El;
      ModScope.SystemVarRecs = Result;
      FuncType = rtl.as(Result.ProcType,$lt93);
      if (FuncType.Args.FCount > 0) this.RaiseXExpectedButYFound(20190215211953,"function System.VarRecs with 0 args",$lp2(FuncType.Args.FCount),ErrorEl);
      if (rtl.neSet(FuncType.Modifiers,rtl.createSet(3))) this.RaiseXExpectedButYFound(20190215212151,"function System.VarRecs; varargs","?",ErrorEl);
      if (FuncType.CallingConvention !== 0) this.RaiseXExpectedButYFound(20190215211824,"function System.VarRecs with default calling convention",$lm1.cCallingConventions[FuncType.CallingConvention],ErrorEl);
      return Result;
    };
    this.FindSystemExternalClassType = function (aClassName, JSName, ErrorEl) {
      var Result = null;
      var Data = $lt28.$new();
      var Abort = false;
      Data.$assign($lt28.$new());
      Data.ErrorPosEl = ErrorEl;
      Data.JSName = JSName;
      Abort = false;
      this.IterateGlobalElements(aClassName,rtl.createCallback(this,"OnFindExtSystemClass"),Data,{get: function () {
          return Abort;
        }, set: function (v) {
          Abort = v;
        }});
      Result = Data.Found;
      if ((ErrorEl !== null) && (Result === null)) this.RaiseIdentifierNotFound(20200526095647,aClassName + " = class external name '" + JSName + "'",ErrorEl);
      return Result;
    };
    this.FindTJSPromise = function (ErrorEl) {
      var Result = null;
      var aMod = null;
      var ModScope = null;
      aMod = this.FRootElement;
      ModScope = rtl.as(aMod.FData,$lt9);
      Result = ModScope.FJSPromiseClass;
      if (0 in ModScope.FlagsJS) return Result;
      Result = this.FindSystemExternalClassType("TJSPromise","Promise",ErrorEl);
      ModScope.SetJSPromiseClass(Result);
      ModScope.FlagsJS = rtl.includeSet(ModScope.FlagsJS,0);
      return Result;
    };
    this.CheckExternalClassConstructor = function (Ref) {
      var TypeEl = null;
      if (!$lt111.isPrototypeOf(Ref.Context)) this.RaiseMsg(20180511165144,4026,rtl.getResStr($mod,"sJSNewNotSupported"),[],Ref.FElement);
      TypeEl = Ref.Context.Typ;
      if (TypeEl.$class.ClassType() === $lt72) {
        if (!TypeEl.IsExternal) this.RaiseMsg(20180511165316,4026,rtl.getResStr($mod,"sJSNewNotSupported"),[],Ref.FElement);
      } else if (TypeEl.$class.ClassType() === $lt112) {
        TypeEl = this.ResolveAliasType(TypeEl.DestType,true);
        if (TypeEl.$class.ClassType() === $lt72) {
          if (!TypeEl.IsExternal) this.RaiseMsg(20180511175309,4026,rtl.getResStr($mod,"sJSNewNotSupported"),[],Ref.FElement);
        };
      };
    };
    this.CheckConditionExpr = function (El, ResolvedEl) {
      if ((ResolvedEl.BaseType === 1) && this.IsJSBaseType$1(ResolvedEl,1,false)) return;
      $lt69.CheckConditionExpr.call(this,El,ResolvedEl);
    };
    this.CheckNewInstanceFunction = function (ClassScope) {
      var Proc = null;
      var Args = null;
      var Arg = null;
      var ResolvedArg = $lt84.$new();
      Proc = ClassScope.NewInstanceFunction;
      if (!Proc.IsVirtual()) this.RaiseMsg(20170324231040,4017,rtl.getResStr($mod,"sNewInstanceFunctionMustBeVirtual"),[],Proc);
      Args = Proc.ProcType.Args;
      if (Args.FCount < 2) this.RaiseMsg(20170324232247,4018,rtl.getResStr($mod,"sNewInstanceFunctionMustHaveTwoParameters"),[],Proc.ProcType);
      Arg = rtl.getObject(Args.Get(0));
      if (Arg.Access !== 0) this.RaiseMsg(20170324232655,3006,rtl.getResStr($lm6,"sIncompatibleTypeArgNo"),$lp6(9,"1",18,$lm1.AccessNames[Arg.Access],18,"default (none)"),Arg);
      if (Arg.ArgType === null) this.RaiseMsg(20170324233201,3006,rtl.getResStr($lm6,"sIncompatibleTypeArgNo"),$lp6(9,"1",18,"untyped",18,"String"),Arg);
      this.ComputeElement(Arg.ArgType,ResolvedArg,rtl.createSet(4),null);
      if (ResolvedArg.BaseType !== 7) this.RaiseMsg(20170324233348,3006,rtl.getResStr($lm6,"sIncompatibleTypeArgNo"),$lp6(9,"1",18,this.GetResolverResultDescription(ResolvedArg,false),18,"String"),Arg);
      Arg = rtl.getObject(Args.Get(1));
      if (Arg.Access !== 1) this.RaiseMsg(20170324233457,3006,rtl.getResStr($lm6,"sIncompatibleTypeArgNo"),$lp6(9,"2",18,$lm1.AccessNames[Arg.Access],18,"const"),Arg);
      if (Arg.ArgType !== null) this.RaiseMsg(20170324233508,3006,rtl.getResStr($lm6,"sIncompatibleTypeArgNo"),$lp6(9,"2",18,"type",18,"untyped"),Arg);
    };
    this.AddExternalName = function (aName, El) {
      var Result = null;
      var Item = null;
      Item = $lt53.$create("Create");
      Item.Identifier = aName;
      Item.SetElement(El);
      this.InternalAdd(Item);
      Result = Item;
      return Result;
    };
    this.FindExternalName = function (aName) {
      var Result = null;
      Result = this.FExternalNames.Find(aName);
      return Result;
    };
    this.AddExternalPath = function (aName, El) {
      var p = 0;
      aName = $lp21(aName);
      if (aName === "") return;
      this.AddExternalName(aName,El);
      p = 1;
      while ((p <= aName.length) && (aName.charCodeAt(p - 1) in rtl.createSet(null,97,122,null,65,90,null,48,57,95,36))) p += 1;
      if (p > aName.length) return;
      this.AddExternalName($lp3(aName,p - 1),El);
    };
    this.AddElevatedLocal = function (El) {
      var i = 0;
      var ElevatedLocals = null;
      var Scope = null;
      var ProcScope = null;
      i = this.FScopeCount - 1;
      while (i >= 0) {
        Scope = this.GetScopes(i);
        if ($lt16.isPrototypeOf(Scope)) {
          ProcScope = Scope;
          if (ProcScope.ClassRecScope !== null) Scope = ProcScope.ClassRecScope;
        };
        ElevatedLocals = this.GetElevatedLocals(Scope);
        if (ElevatedLocals !== null) {
          ElevatedLocals.Add(El.FName,El);
          return;
        };
        i -= 1;
      };
      this.RaiseNotYetImplemented(20180420131358,El,"");
    };
    this.ClearElementData = function () {
      var Data = null;
      var Next = null;
      Data = this.FFirstElementData;
      while (Data !== null) {
        Next = Data.Next;
        Data = rtl.freeLoc(Data);
        Data = Next;
      };
      this.FFirstElementData = null;
      this.FLastElementData = null;
      this.FExternalNames.ForEachCall(rtl.createCallback(this,"OnClearHashItem"),null);
      this.FExternalNames.Clear();
    };
    this.GenerateGUID = function (El) {
      var Result = "";
      var Name = "";
      var i = 0;
      var BytePos = 0;
      var BitPos = 0;
      var v = 0;
      var Member = null;
      var Bytes = rtl.arraySetLength(null,0,16);
      var List = null;
      var Scope = null;
      Name = El.PathName();
      Scope = El.FData;
      if (Scope.AncestorScope !== null) {
        Name = Scope.AncestorScope.GUID + Name;
      };
      List = $lt61.$create("Create$1");
      for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Member = rtl.getObject(El.Members.Get(i));
        if ($lt67.isPrototypeOf(Member)) List.Add(Member.FName);
      };
      List.Sort();
      for (var $l1 = 0, $end1 = List.GetCount() - 1; $l1 <= $end1; $l1++) {
        i = $l1;
        Name = Name + "," + List.Get(i);
      };
      List = rtl.freeLoc(List);
      BytePos = 0;
      BitPos = 0;
      for (var $l2 = 1, $end2 = Name.length; $l2 <= $end2; $l2++) {
        i = $l2;
        v = (Bytes[BytePos] << 8) + Bytes[(BytePos + 1) & 15];
        v = v + (Name.charCodeAt(i - 1) << (11 - BitPos));
        Bytes[BytePos] = (v >>> 8) & 0xff;
        Bytes[(BytePos + 1) & 15] = v & 0xff;
        BitPos += 5;
        if (BitPos > 7) {
          BitPos -= 8;
          BytePos = (BytePos + 1) & 15;
        };
      };
      Bytes[6] = (Bytes[6] & 0xf) + (3 << 4);
      Bytes[8] = (Bytes[8] & 0x3f) + (2 << 6);
      Result = "{";
      for (i = 0; i <= 3; i++) Result = Result + rtl.hexStr(Bytes[i],2);
      Result = Result + "-";
      for (i = 4; i <= 5; i++) Result = Result + rtl.hexStr(Bytes[i],2);
      Result = Result + "-";
      for (i = 6; i <= 7; i++) Result = Result + rtl.hexStr(Bytes[i],2);
      Result = Result + "-";
      for (i = 8; i <= 9; i++) Result = Result + rtl.hexStr(Bytes[i],2);
      Result = Result + "-";
      for (i = 10; i <= 15; i++) Result = Result + rtl.hexStr(Bytes[i],2);
      Result = Result + "}";
      return Result;
    };
    this.CheckCallAsyncFuncResult = function (Param, ResolvedEl) {
      var Result = false;
      var PathEnd = null;
      var Ref = null;
      var Decl = null;
      var DeclFunc = null;
      Result = false;
      PathEnd = this.GetPathEndIdent(Param,true);
      if ((PathEnd !== null) && $lt71.isPrototypeOf(PathEnd.FData)) {
        Ref = PathEnd.FData;
        Decl = Ref.FDeclaration;
        if ($lt94.isPrototypeOf(Decl)) {
          DeclFunc = Decl;
          if (DeclFunc.IsAsync()) {
            this.ComputeResultElement(DeclFunc.GetFT().ResultEl,ResolvedEl,{},PathEnd);
            return true;
          };
        };
      };
      ResolvedEl.$assign($lt84.$new());
      return Result;
    };
    this.SpecializeGenericIntf = function (SpecializedItem) {
      var El = null;
      $lt69.SpecializeGenericIntf.call(this,SpecializedItem);
      this.RenameSpecialized(SpecializedItem);
      El = SpecializedItem.FSpecializedEl;
      if ($lt113.isPrototypeOf(El) && this.IsFullySpecialized(El) && (this.SpecializeParamsNeedDelay(SpecializedItem) !== null)) this.FHub.AddJSDelaySpecialize(El);
    };
    this.SpecializeGenericImpl = function (SpecializedItem) {
      var El = null;
      $lt69.SpecializeGenericImpl.call(this,SpecializedItem);
      El = SpecializedItem.FSpecializedEl;
      if ($lt73.isPrototypeOf(El)) {
        if (this.FOverloadScopes === null) {
          this.FOverloadScopes = $lt54.$create("Create");
          try {
            this.RenameMembers(El);
          } finally {
            this.ClearOverloadScopes();
          };
        };
      };
    };
    this.SpecializeProcedure = function (GenEl, SpecEl, SpecializedItem) {
      var GenProcScope = null;
      var SpecProcScope = null;
      GenProcScope = rtl.as(GenEl.FData,$lt16);
      SpecProcScope = rtl.as(SpecEl.FData,$lt16);
      if (SpecializedItem === null) {
        SpecProcScope.OverloadName = GenProcScope.OverloadName;
        SpecProcScope.JSName = GenProcScope.JSName;
      };
      $lt69.SpecializeProcedure.call(this,GenEl,SpecEl,SpecializedItem);
    };
    this.SpecializeParamsNeedDelay = function (SpecializedItem) {
      var Result = null;
      var Gen = null;
      var GenMod = null;
      var ParamMod = null;
      var Params = [];
      var Param = null;
      var i = 0;
      var GenSection = null;
      var ParamSection = null;
      var ParamResolver = null;
      var GenResolver = null;
      Result = null;
      if (SpecializedItem === null) return Result;
      Gen = SpecializedItem.GenericEl;
      GenSection = this.GetParentSection(Gen);
      if (!$lt114.isPrototypeOf(GenSection)) return Result;
      GenMod = null;
      GenResolver = null;
      Params = SpecializedItem.Params;
      for (var $l = 0, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
        i = $l;
        Param = this.ResolveAliasType(Params[i],false);
        if (Param.$class.ClassType() === $lt100) continue;
        if ($lt115.isPrototypeOf(Param.FData) && (Param.FData.GenericStep < 1)) return Param;
        ParamSection = this.GetParentSection(Param);
        if (ParamSection === GenSection) continue;
        ParamMod = ParamSection.GetModule();
        if (GenMod === null) GenMod = GenSection.GetModule();
        if (ParamMod === GenMod) return Param;
        if ($lt79.isPrototypeOf(ParamSection)) return Param;
        if (GenResolver === null) GenResolver = this.GetResolver(GenMod);
        ParamResolver = this.GetResolver(ParamMod);
        if ((ParamResolver.FFinishedInterfaceIndex > GenResolver.FFinishedInterfaceIndex) || (ParamResolver.FFinishedInterfaceIndex === 0)) return Param;
      };
      return Result;
    };
    this.IsSpecializedNonStaticMethod = function (ProcType) {
      var Result = false;
      var Proc = null;
      var Scope = null;
      if (!$lt67.isPrototypeOf(ProcType.FParent)) return false;
      Proc = ProcType.FParent;
      if (Proc.IsStatic() || Proc.IsExternal()) return false;
      if (!$lt73.isPrototypeOf(Proc.FParent)) return false;
      Scope = Proc.FData;
      if (Scope.SpecializedFromItem === null) return false;
      Result = true;
      return Result;
    };
    this.AddJSBaseType = function (aName, Typ) {
      var Result = null;
      var El = null;
      El = this.AddCustomBaseType(aName,$lt21);
      if (Typ !== 0) this.FJSBaseTypes[Typ] = El;
      Result = El.FData;
      Result.JSBaseType = Typ;
      return Result;
    };
    this.CheckAssignCompatibilityCustom = function (LHS, RHS, ErrorEl, RaiseOnIncompatible, Handled) {
      var Result = 0;
      var LeftBaseType = 0;
      var LArray = null;
      var ElTypeResolved = $lt84.$new();
      var LTypeEl = null;
      var RTypeEl = null;
      var TIName = "";
      Result = 2147483647;
      if (LHS.BaseType === 1) {
        if (!$lt100.isPrototypeOf(LHS.LoTypeEl)) {
          this.RaiseInternalError(20170325114554,"");
        };
        if (!$lt21.isPrototypeOf(LHS.LoTypeEl.FData)) return Result;
        Handled.set(true);
        LeftBaseType = LHS.LoTypeEl.FData.JSBaseType;
        if (LeftBaseType === 1) {
          if (0 in RHS.Flags) {
            if (RHS.BaseType in $mod.btAllJSValueSrcTypes) {
              Result = 20000}
             else if (RHS.BaseType === 1) {
              if (this.IsJSBaseType$1(RHS,1,false)) Result = 0;
            } else if (RHS.BaseType === 2) {
              Result = 20000}
             else if ((RHS.BaseType === 31) && (RHS.IdentEl === null)) {
              Result = 0;
            };
          } else if (RHS.BaseType === 2) {
            if (RHS.IdentEl !== null) {
              if (RHS.IdentEl.$class.ClassType() === $lt72) Result = 20000;
            };
          };
        };
      } else if (LHS.BaseType === 2) {
        LTypeEl = LHS.LoTypeEl;
        RTypeEl = RHS.LoTypeEl;
        if ((LTypeEl.$class.ClassType() === $lt107) && (0 in RHS.Flags)) {
          LArray = LTypeEl;
          if (rtl.length(LArray.Ranges) > 0) return Result;
          if ((RHS.BaseType !== 2) || (RTypeEl.$class.ClassType() !== $lt107)) return Result;
          this.ComputeElement(this.GetArrayElType(LArray),ElTypeResolved,rtl.createSet(4),null);
          if (this.IsJSBaseType$1(ElTypeResolved,1,false)) {
            Handled.set(true);
            Result = 20000;
          };
        } else if ((LTypeEl.$class.ClassType() === $lt72) && (0 in RHS.Flags) && (RHS.BaseType === 29) && this.IsSameType(RTypeEl,this.GetBaseTypes(29),0)) {
          TIName = $mod.Pas2JSBuiltInNames[144] + "." + $mod.Pas2JSBuiltInNames[172];
          if (this.IsExternalClass_Name(LTypeEl,TIName)) {
            Handled.set(true);
            Result = 10000;
          };
        };
      };
      if (RaiseOnIncompatible) ;
      if (ErrorEl === null) ;
      return Result;
    };
    this.CheckTypeCastClassInstanceToClass = function (FromClassRes, ToClassRes, ErrorEl) {
      var Result = 0;
      var ToClass = null;
      var FromClass = null;
      var ToClassScope = null;
      var FromClassScope = null;
      var ToSpecItem = null;
      var FromSpecItem = null;
      var i = 0;
      var ToParam = null;
      var FromParam = null;
      if (FromClassRes.BaseType === 30) return 0;
      ToClass = rtl.as(ToClassRes.LoTypeEl,$lt72);
      ToClassScope = rtl.as(ToClass.FData,$lt14);
      if (ToClassScope.AncestorScope === null) return 10000 + 1;
      ToSpecItem = ToClassScope.SpecializedFromItem;
      if (ToSpecItem !== null) {
        FromClass = rtl.as(FromClassRes.LoTypeEl,$lt72);
        FromClassScope = rtl.as(FromClass.FData,$lt14);
        FromSpecItem = FromClassScope.SpecializedFromItem;
        if (FromSpecItem !== null) {
          if (FromSpecItem.GenericEl === ToSpecItem.GenericEl) {
            Result = 10000 + 1;
            for (var $l = 0, $end = rtl.length(FromSpecItem.Params) - 1; $l <= $end; $l++) {
              i = $l;
              FromParam = FromSpecItem.Params[i];
              ToParam = ToSpecItem.Params[i];
              if (this.IsSameType(FromParam,ToParam,2) || this.IsJSBaseType(FromParam,1) || this.IsJSBaseType(ToParam,1)) {}
              else {
                Result = 2147483647;
                break;
              };
            };
            if (Result < 2147483647) return Result;
          };
        };
      };
      Result = 2147483647;
      if (ErrorEl === null) ;
      return Result;
    };
    this.CheckEqualCompatibilityCustomType = function (LHS, RHS, ErrorEl, RaiseOnIncompatible) {
      var Result = 0;
      var LeftBaseType = 0;
      Result = 2147483647;
      if (LHS.BaseType === 1) {
        if (!$lt100.isPrototypeOf(LHS.LoTypeEl)) {
          this.RaiseInternalError(20170330005841,"");
        };
        if (!$lt21.isPrototypeOf(LHS.LoTypeEl.FData)) return Result;
        LeftBaseType = LHS.LoTypeEl.FData.JSBaseType;
        if (LeftBaseType === 1) {
          if (0 in LHS.Flags) {
            if (0 in RHS.Flags) {
              if (RHS.BaseType in $mod.btAllJSValueSrcTypes) {
                Result = 20000}
               else if (RHS.BaseType === 1) {
                if (this.IsJSBaseType$1(RHS,1,false)) Result = 0;
              } else if (RHS.BaseType === 2) Result = 20000;
            } else if (RHS.BaseType === 2) {
              if (RHS.IdentEl !== null) {
                if (RHS.IdentEl.$class.ClassType() === $lt72) Result = 20000;
              };
            };
          };
        };
      } else if (RHS.BaseType === 1) {
        return this.CheckEqualCompatibilityCustomType(RHS,LHS,ErrorEl,RaiseOnIncompatible)}
       else this.RaiseInternalError(20170330005725,"");
      return Result;
    };
    this.CheckForIn = function (Loop, VarResolved, InResolved) {
      var Result = false;
      var TypeEl = null;
      var ArgResolved = $lt84.$new();
      var LengthResolved = $lt84.$new();
      var PropResultResolved = $lt84.$new();
      if (InResolved.BaseType === 1) {
        if (this.IsJSBaseType$1(InResolved,1,true)) {
          if (!(VarResolved.BaseType in $lm3.btAllStrings)) this.RaiseXExpectedButYFound(20180423185800,"string",this.GetResolverResultDescription(VarResolved,true),Loop.StartExpr);
          return true;
        };
      } else if (InResolved.BaseType === 2) {
        TypeEl = InResolved.LoTypeEl;
        if ((TypeEl.$class.ClassType() === $lt72) && TypeEl.IsExternal) {
          if (this.IsForInExtArray(Loop,VarResolved,InResolved,ArgResolved,LengthResolved,PropResultResolved)) return true;
          if (!(VarResolved.BaseType in $lm3.btAllStrings)) this.RaiseXExpectedButYFound(20180423191611,"string",this.GetResolverResultDescription(VarResolved,true),Loop.StartExpr);
          return true;
        };
      };
      Result = false;
      return Result;
    };
    this.ComputeUnaryNot = function (El, ResolvedEl, Flags) {
      if (ResolvedEl.BaseType === 1) {
        if (this.IsJSBaseType$1(ResolvedEl,1,true)) {
          $lp22(ResolvedEl,15,this.GetBaseTypes(15),this.GetBaseTypes(15),El,rtl.createSet(0));
          return;
        };
      };
      $lt69.ComputeUnaryNot.call(this,El,ResolvedEl,rtl.refSet(Flags));
    };
    this.ComputeBinaryExprRes = function (Bin, ResolvedEl, Flags, LeftResolved, RightResolved) {
      var $Self = this;
      function SetBaseType(BaseType) {
        $lp22(ResolvedEl,BaseType,$Self.GetBaseTypes(BaseType),$Self.GetBaseTypes(BaseType),Bin,rtl.createSet(0));
      };
      var RightTypeEl = null;
      if ((LeftResolved.BaseType === 1) || (RightResolved.BaseType === 1)) {
        var $tmp = Bin.OpCode;
        if ($tmp === 21) if (this.IsJSBaseType$1(LeftResolved,1,true)) {
          if ($lt76.isPrototypeOf(RightResolved.IdentEl) && $lt72.isPrototypeOf(this.ResolveAliasType(RightResolved.IdentEl,true))) {
            SetBaseType(15);
            return;
          };
          RightTypeEl = RightResolved.LoTypeEl;
          if ($lt112.isPrototypeOf(RightTypeEl)) {
            SetBaseType(15);
            return;
          };
        };
      };
      $lt69.ComputeBinaryExprRes.call(this,Bin,ResolvedEl,rtl.refSet(Flags),LeftResolved,RightResolved);
    };
    this.BI_Exit_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var CtxProc = null;
      var ParamResolved = $lt84.$new();
      var Param = null;
      if ($lt86.isPrototypeOf(Expr) && (rtl.length(Expr.Params) === 1)) {
        Params = Expr;
        CtxProc = this.GetParentProc(Expr,true);
        if ((CtxProc !== null) && CtxProc.IsAsync()) {
          Param = Params.Params[0];
          this.ComputeElement(Param,ParamResolved,{},null);
          if ((0 in ParamResolved.Flags) && (ParamResolved.BaseType === 2) && $lt72.isPrototypeOf(ParamResolved.LoTypeEl) && this.IsPromiseClass(ParamResolved.LoTypeEl)) {
            return 3;
          };
        };
      };
      Result = $lt69.BI_Exit_OnGetCallCompatibility.call(this,Proc,Expr,RaiseOnError);
      return Result;
    };
    this.BI_Val_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt84.$new();
      var bt = 0;
      var C = null;
      Result = $lt69.BI_Val_OnGetCallCompatibility.apply(this,arguments);
      Params = Expr;
      Param = Params.Params[1];
      this.ComputeElement(Param,ParamResolved,{},null);
      Result = 2147483647;
      bt = ParamResolved.BaseType;
      if (bt === 37) bt = ParamResolved.SubType;
      if (bt === 2) {
        C = ParamResolved.LoTypeEl.$class.ClassType();
        if ((C === $lt99) || (C === $lt101)) Result = 0;
      };
      if (Result === 2147483647) return this.CheckRaiseTypeArgNo(20181214142349,2,Param,ParamResolved,"enum variable",RaiseOnError);
      return Result;
    };
    this.BI_TypeInfo_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      var Param = null;
      var ParamResolved = $lt84.$new();
      var C = null;
      var TIName = "";
      var FindData = $lt116.$new();
      var Abort = false;
      var bt = 0;
      var jbt = 0;
      var TypeEl = null;
      var FoundClass = null;
      var ScopeDepth = 0;
      var TemplType = null;
      var ConEl = null;
      var ConToken = 0;
      var ResultEl = null;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      if (ParamResolved.LoTypeEl === null) this.RaiseInternalError(20170413090726,"");
      if ((ParamResolved.BaseType === 31) && $lt94.isPrototypeOf(ParamResolved.IdentEl)) {
        ResultEl = ParamResolved.IdentEl.GetFT().ResultEl;
        this.ComputeResultElement(ResultEl,ParamResolved,{},null);
        ParamResolved.Flags = rtl.includeSet(ParamResolved.Flags,0);
        if (ParamResolved.LoTypeEl === null) this.RaiseInternalError(20170421124923,"");
      };
      TypeEl = ParamResolved.LoTypeEl;
      C = TypeEl.$class.ClassType();
      TIName = "";
      if (C === $lt100) {
        if ($lt21.isPrototypeOf(TypeEl.FData)) {
          jbt = TypeEl.FData.JSBaseType;
          if (jbt === 1) TIName = $mod.Pas2JSBuiltInNames[172];
        } else if ($lt65.isPrototypeOf(TypeEl.FData)) {
          bt = TypeEl.FData.BaseType;
          if (bt in rtl.unionSet($mod.btAllJSInteger,rtl.createSet(14))) {
            TIName = $mod.Pas2JSBuiltInNames[179]}
           else if (bt in rtl.createSet(7,5,11,15)) {
            TIName = $mod.Pas2JSBuiltInNames[172]}
           else if (bt === 29) TIName = $mod.Pas2JSBuiltInNames[182];
        };
      } else if (ParamResolved.BaseType === 2) {
        if (C === $lt99) {
          TIName = $mod.Pas2JSBuiltInNames[176]}
         else if (C === $lt117) {
          TIName = $mod.Pas2JSBuiltInNames[186]}
         else if (C.InheritsFrom($lt118)) {
          if (TypeEl.GetIsReference()) {
            TIName = $mod.Pas2JSBuiltInNames[185]}
           else if (TypeEl.GetIsOfObject()) {
            TIName = $mod.Pas2JSBuiltInNames[181]}
           else TIName = $mod.Pas2JSBuiltInNames[183];
        } else if (C === $lt81) {
          TIName = $mod.Pas2JSBuiltInNames[184]}
         else if (C === $lt72) {
          var $tmp = TypeEl.ObjKind;
          if ($tmp === 1) {
            if (TypeEl.IsExternal) {
              TIName = $mod.Pas2JSBuiltInNames[177]}
             else TIName = $mod.Pas2JSBuiltInNames[173]}
           else if ($tmp === 2) {
            TIName = $mod.Pas2JSBuiltInNames[180]}
           else if (($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {
            TIName = $mod.Pas2JSBuiltInNames[178]}
           else {
            this.RaiseNotYetImplemented(20180328195807,Param,"");
          };
        } else if (C === $lt112) {
          if (0 in ParamResolved.Flags) {
            TIName = $mod.Pas2JSBuiltInNames[173]}
           else TIName = $mod.Pas2JSBuiltInNames[174];
        } else if (C === $lt107) {
          if (rtl.length(TypeEl.Ranges) > 0) {
            TIName = $mod.Pas2JSBuiltInNames[187]}
           else TIName = $mod.Pas2JSBuiltInNames[175];
        } else if (C === $lt95) {
          TIName = $mod.Pas2JSBuiltInNames[182]}
         else if (C === $lt119) {
          TemplType = TypeEl;
          if (rtl.length(TemplType.Constraints) > 0) {
            ConEl = TemplType.Constraints[0];
            ConToken = this.GetGenericConstraintKeyword(ConEl);
            var $tmp1 = ConToken;
            if ($tmp1 === 96) {
              TIName = $mod.Pas2JSBuiltInNames[184]}
             else if (($tmp1 === 47) || ($tmp1 === 50)) {
              TIName = $mod.Pas2JSBuiltInNames[173]}
             else {
              if (!$lt76.isPrototypeOf(ConEl)) this.RaiseNotYetImplemented(20191018180031,ConEl,$lp14(Param));
              TypeEl = this.ResolveAliasType(ConEl,true);
              if ($lt72.isPrototypeOf(TypeEl)) {
                var $tmp2 = TypeEl.ObjKind;
                if ($tmp2 === 1) {
                  if (TypeEl.IsExternal) {
                    TIName = $mod.Pas2JSBuiltInNames[177]}
                   else TIName = $mod.Pas2JSBuiltInNames[173]}
                 else if ($tmp2 === 2) {
                  TIName = $mod.Pas2JSBuiltInNames[180]}
                 else {
                  this.RaiseNotYetImplemented(20200927100825,ConEl,$lp14(Param));
                };
              } else this.RaiseNotYetImplemented(20191018180131,ConEl,$lp14(Param));
            };
          };
          if (TIName === "") {
            TIName = $mod.Pas2JSBuiltInNames[172];
          };
        };
      } else if (ParamResolved.BaseType === 34) {
        if ($lt117.isPrototypeOf(ParamResolved.IdentEl)) TIName = $mod.Pas2JSBuiltInNames[186];
      } else if (ParamResolved.BaseType === 37) {
        this.ConvertRangeToElement(ParamResolved);
        if (ParamResolved.BaseType in $mod.btAllJSInteger) {
          TIName = $mod.Pas2JSBuiltInNames[179]}
         else if (ParamResolved.BaseType in rtl.createSet(5,15)) {
          TIName = $mod.Pas2JSBuiltInNames[172]}
         else if (ParamResolved.BaseType === 2) {
          TypeEl = ParamResolved.LoTypeEl;
          C = TypeEl.$class.ClassType();
          if (C === $lt99) TIName = $mod.Pas2JSBuiltInNames[176];
        };
      } else if (C === $lt101) {
        if (ParamResolved.BaseType in $mod.btAllJSInteger) {
          TIName = $mod.Pas2JSBuiltInNames[179]}
         else if (ParamResolved.BaseType in rtl.createSet(5,15)) TIName = $mod.Pas2JSBuiltInNames[172];
      };
      if (TIName === "") {
        this.RaiseNotYetImplemented(20170413091852,Param,"");
      };
      ScopeDepth = this.StashSubExprScopes();
      FindData.$assign($lt116.$new());
      FindData.ErrorPosEl = Params;
      Abort = false;
      this.IterateElements(TIName,rtl.createCallback(this,"OnFindFirst"),FindData,{get: function () {
          return Abort;
        }, set: function (v) {
          Abort = v;
        }});
      this.RestoreStashedScopes(ScopeDepth);
      if ($lt76.isPrototypeOf(FindData.Found)) {
        TypeEl = this.ResolveAliasType(FindData.Found,true);
        if (TypeEl.$class.ClassType() === $lt72) {
          FoundClass = FindData.Found;
          if (FoundClass.IsExternal && (FoundClass.ExternalName === ($mod.Pas2JSBuiltInNames[144] + "." + TIName))) {
            $lp23(ResolvedEl,2,FoundClass,FindData.Found,rtl.createSet(0));
            return;
          };
        };
      };
      $lp23(ResolvedEl,29,this.GetBaseTypes(29),this.GetBaseTypes(29),rtl.createSet(0));
      if (Proc === null) ;
    };
    this.BI_Debugger_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var Result = 0;
      if ($lt86.isPrototypeOf(Expr)) {
        Result = this.CheckBuiltInMaxParamCount(Proc,Expr,0,RaiseOnError,"")}
       else Result = 0;
      return Result;
    };
    this.BI_AWait_OnGetCallCompatibility = function (Proc, Expr, RaiseOnError) {
      var $Self = this;
      var Result = 0;
      var Params = null;
      var Param = null;
      var ParamResolved = $lt84.$new();
      var Param2Resolved = $lt84.$new();
      var ParentProc = null;
      var TypeEl = null;
      function CheckProcedureAsync(Proc) {
        var Result = false;
        Result = Proc.GetIsAsync() || ($lt93.isPrototypeOf(Proc) && $lt72.isPrototypeOf(Proc.ResultEl.ResultType) && $Self.IsPromiseClass(rtl.as(Proc.ResultEl.ResultType,$lt72))) || ($lt120.isPrototypeOf(Proc.ResultEl.ResultType) && $Self.IsPromiseClass(rtl.as(Proc.ResultEl.ResultType.DestType,$lt72)));
        if (!Result) {
          if (RaiseOnError) $Self.RaiseMsg(20201229232446,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,rtl.getResStr($mod,"sAsyncFunctionOrPromise"),18,$Self.GetResolverResultDescription(ParamResolved,false)),Expr);
        };
        return Result;
      };
      Result = 2147483647;
      ParentProc = this.GetParentProc(Expr,true);
      if ((ParentProc === null) || !ParentProc.IsAsync()) {
        if (RaiseOnError) this.RaiseMsg(20200519153349,4016,rtl.getResStr($mod,"sAWaitOnlyInAsyncProcedure"),[],Expr);
        return Result;
      };
      if (!this.CheckBuiltInMinParamCount(Proc,Expr,1,RaiseOnError)) return Result;
      Params = Expr;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      if (0 in ParamResolved.Flags) {
        Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
        if (Result === 2147483647) return Result;
        TypeEl = ParamResolved.LoTypeEl;
        if ($lt90.isPrototypeOf(ParamResolved.IdentEl)) {
          if (!CheckProcedureAsync(ParamResolved.IdentEl.FParent)) return 2147483647;
        } else if ((ParamResolved.BaseType === 2) && $lt118.isPrototypeOf(TypeEl)) {
          if (!CheckProcedureAsync(TypeEl)) return 2147483647;
        } else if ((ParamResolved.BaseType === 2) && $lt67.isPrototypeOf(ParamResolved.IdentEl)) {
          if (!CheckProcedureAsync(ParamResolved.IdentEl.ProcType)) return 2147483647;
        } else {
          if (RaiseOnError) {
            this.RaiseMsg(20201229224920,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"async function",18,this.GetResolverResultDescription(ParamResolved,false)),Expr)}
           else return 2147483647;
        };
      } else if (ParamResolved.BaseType === 31) {
        if ($lt87.isPrototypeOf(Expr.FParent)) {
          if (RaiseOnError) this.RaiseMsg(20200523232827,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"async function",18,this.GetResolverResultDescription(ParamResolved,false)),Expr);
          return Result;
        };
        Result = this.CheckBuiltInMaxParamCount(Proc,Params,1,RaiseOnError,"");
      } else {
        TypeEl = ParamResolved.LoTypeEl;
        if ($lt100.isPrototypeOf(TypeEl) && $lt65.isPrototypeOf(TypeEl.FData)) {}
        else if ((TypeEl !== null) && $lt76.isPrototypeOf(ParamResolved.IdentEl)) {
          if ((ParamResolved.BaseType === 2) && $lt72.isPrototypeOf(ParamResolved.LoTypeEl) && this.IsPromiseClass(ParamResolved.LoTypeEl)) {
            return this.CheckRaiseTypeArgNo(20201120001741,1,Param,ParamResolved,"non Promise type",RaiseOnError);
          };
        } else return this.CheckRaiseTypeArgNo(20200519151816,1,Param,ParamResolved,"jsvalue",RaiseOnError);
        if (rtl.length(Params.Params) < 2) {
          if (RaiseOnError) this.RaiseMsg(20200520090749,3005,rtl.getResStr($lm6,"sWrongNumberOfParametersForCallTo"),$lp6(18,$impl.AwaitSignature2),Params);
          return 2147483647;
        };
        Param = Params.Params[1];
        if (this.CheckCallAsyncFuncResult(Param,Param2Resolved)) {
          if ((Param2Resolved.BaseType === 2) && $lt72.isPrototypeOf(Param2Resolved.LoTypeEl) && this.IsPromiseClass(Param2Resolved.LoTypeEl)) {}
          else {
            ParamResolved.Flags = rtl.createSet(0,1);
            ParamResolved.IdentEl = null;
            Result = this.CheckParamResCompatibility(Param,Param2Resolved,ParamResolved,1,RaiseOnError,false);
            return Result;
          };
        } else {
          this.ComputeElement(Param,Param2Resolved,{},null);
          if (!(0 in Param2Resolved.Flags)) return this.CheckRaiseTypeArgNo(20200520091707,2,Param,Param2Resolved,"instance of TJSPromise",RaiseOnError);
          if ((Param2Resolved.BaseType === 2) && $lt72.isPrototypeOf(Param2Resolved.LoTypeEl) && this.IsPromiseClass(Param2Resolved.LoTypeEl)) {}
          else if (this.IsJSBaseType$1(Param2Resolved,1,false)) {}
          else if ($lt89.isPrototypeOf(Param2Resolved.IdentEl) && (Param2Resolved.LoTypeEl === null)) {}
          else return this.CheckRaiseTypeArgNo(20200520091708,2,Param,Param2Resolved,"TJSPromise",RaiseOnError);
        };
        Result = this.CheckBuiltInMaxParamCount(Proc,Params,2,RaiseOnError,$impl.AwaitSignature2);
      };
      return Result;
    };
    this.BI_AWait_OnGetCallResult = function (Proc, Params, ResolvedEl) {
      var Param = null;
      Param = Params.Params[0];
      if (rtl.length(Params.Params) === 1) {
        if (this.CheckCallAsyncFuncResult(Param,ResolvedEl)) {
          if ((ResolvedEl.BaseType === 2) && $lt72.isPrototypeOf(ResolvedEl.LoTypeEl) && this.IsPromiseClass(ResolvedEl.LoTypeEl)) this.RaiseMsg(20201229235932,3005,rtl.getResStr($lm6,"sWrongNumberOfParametersForCallTo"),$lp6(18,$impl.AwaitSignature2),Param);
          return;
        };
      };
      this.ComputeElement(Param,ResolvedEl,{},null);
      ResolvedEl.IdentEl = null;
      ResolvedEl.Flags = rtl.includeSet(ResolvedEl.Flags,0);
      if (Proc === null) ;
    };
    this.BI_AWait_OnEval = function (Proc, Params, Flags, Evaluated) {
      var Param = null;
      var ParamResolved = $lt84.$new();
      Evaluated.set(null);
      if (rtl.length(Params.Params) !== 1) return;
      Param = Params.Params[0];
      this.ComputeElement(Param,ParamResolved,{},null);
      Evaluated.set(this.Eval(Param,rtl.refSet(Flags),true));
      if (Proc === null) ;
    };
    this.BI_AWait_OnFinishParamsExpr = function (Proc, Params) {
      var P = [];
      var Param = null;
      var PathEnd = null;
      var Ref = null;
      var Decl = null;
      var IdentEl = null;
      var SubEl = null;
      var ResolvedEl = $lt84.$new();
      var ParamResolved = $lt84.$new();
      var Implicit = false;
      var IsPromise = false;
      var TypeEl = null;
      if (Proc === null) ;
      P = Params.Params;
      if (rtl.length(P) === 0) ;
      Param = P[0];
      this.FinishCallArgAccess(Param,1);
      if (rtl.length(P) === 1) {
        PathEnd = this.GetPathEndIdent(Param,false);
        if ((PathEnd !== null) && $lt71.isPrototypeOf(PathEnd.FData)) {
          Ref = PathEnd.FData;
          Decl = Ref.FDeclaration;
          Implicit = false;
          if ($lt80.isPrototypeOf(Decl) || (Decl.$class.ClassType() === $lt89)) {
            this.ComputeElement(Decl,ResolvedEl,rtl.createSet(2),null);
            if (this.IsProcedureType(ResolvedEl,true)) Implicit = true;
          } else if ($lt67.isPrototypeOf(Decl)) Implicit = true;
          if (Implicit) {
            Ref.Flags = rtl.excludeSet(Ref.Flags,2);
            Ref.Flags = rtl.includeSet(Ref.Flags,1);
          };
        } else {
          this.ComputeElement(Param,ParamResolved,{},null);
          IsPromise = false;
          TypeEl = ParamResolved.LoTypeEl;
          IdentEl = ParamResolved.IdentEl;
          if (TypeEl.$class.ClassType() === $lt72) {
            IsPromise = this.IsPromiseClass(TypeEl)}
           else if ((ParamResolved.BaseType === 31) && (IdentEl === null) && $lt118.isPrototypeOf(TypeEl)) {
            IsPromise = TypeEl.GetIsAsync()}
           else if ($lt67.isPrototypeOf(IdentEl)) {
            IsPromise = ParamResolved.IdentEl.IsAsync()}
           else if ($lt90.isPrototypeOf(IdentEl)) {
            SubEl = IdentEl.FParent;
            if ($lt93.isPrototypeOf(SubEl)) IsPromise = SubEl.GetIsAsync();
          };
          if (!IsPromise) this.LogMsg(20201116000324,4,3144,rtl.getResStr($lm6,"sAwaitWithoutPromise"),[],Param);
        };
      };
      if (rtl.length(P) > 1) this.FinishCallArgAccess(P[1],1);
      if (rtl.length(P) > 2) this.RaiseNotYetImplemented(20200525142451,Params,"");
    };
    this.IsPromiseClass = function (aClass) {
      var Result = false;
      Result = this.IsExternalClass_Name(aClass,"Promise");
      return Result;
    };
    this.Create$3 = function () {
      var bt = 0;
      $lt69.Create$2.call(this);
      this.cInterfaceToTGUID = 10000 + 2;
      this.cInterfaceToString = 10000 + 1;
      this.FExternalNames = $lt52.$create("Create$1");
      this.FStoreSrcColumns = true;
      this.FOptions = rtl.unionSet(this.FOptions,$mod.DefaultPasResolverOptions);
      this.FScopeClass_Class = $lt14;
      this.FScopeClass_InitialFinalization = $lt13;
      this.FScopeClass_Module = $lt9;
      this.FScopeClass_Proc = $lt16;
      this.FScopeClass_Record = $lt15;
      this.FScopeClass_Array = $lt17;
      this.FScopeClass_ProcType = $lt18;
      this.FScopeClass_Section = $lt12;
      this.FScopeClass_WithExpr = $lt19;
      for (var $l = 1; $l <= 1; $l++) {
        bt = $l;
        this.AddJSBaseType($mod.Pas2jsBaseTypeNames[bt],bt);
      };
      this.FAnonymousElTypePostfix = $mod.Pas2JSBuiltInNames[170];
      this.FBaseTypeChar = 6;
      this.FBaseTypeString = 9;
      this.FBaseTypeLength = 28;
      return this;
    };
    this.Destroy = function () {
      this.ClearElementData();
      this.FExternalNames = null;
      this.ClearOverloadScopes();
      $lt69.Destroy.call(this);
    };
    this.ClearBuiltInIdentifiers = function () {
      var bt = 0;
      var pbp = 0;
      $lt69.ClearBuiltInIdentifiers.call(this);
      for (var $l = 0; $l <= 1; $l++) {
        bt = $l;
        this.FJSBaseTypes[bt] = null;
      };
      for (var $l1 = 0; $l1 <= 1; $l1++) {
        pbp = $l1;
        this.FJSBuiltInProcs[pbp] = null;
      };
    };
    this.IsJSBaseType = function (TypeEl, Typ) {
      var Result = false;
      Result = $lt100.isPrototypeOf(TypeEl) && ($lp13(TypeEl.FName,$mod.Pas2jsBaseTypeNames[Typ]) === 0) && $lt21.isPrototypeOf(TypeEl.FData);
      return Result;
    };
    this.IsJSBaseType$1 = function (TypeResolved, Typ, HasValue) {
      var Result = false;
      if ((TypeResolved.BaseType !== 1) || !this.IsJSBaseType(TypeResolved.LoTypeEl,Typ)) return false;
      if (HasValue && !(0 in TypeResolved.Flags)) return false;
      Result = true;
      return Result;
    };
    this.AddObjFPCBuiltInIdentifiers = function (TheBaseTypes, TheBaseProcs) {
      var InvalidTypes = {};
      var bt = 0;
      var InvalidProcs = {};
      var bf = 0;
      InvalidTypes = rtl.diffSet(TheBaseTypes,$mod.btAllJSBaseTypes);
      if (rtl.neSet(InvalidTypes,{})) for (var $l in InvalidTypes) {
        bt = +$l;
        this.RaiseInternalError(20170409180202,this.GetBaseTypeNames(bt));
      };
      InvalidProcs = rtl.diffSet(TheBaseProcs,$mod.bfAllJSBaseProcs);
      if (rtl.neSet(InvalidProcs,{})) for (var $l1 in InvalidProcs) {
        bf = +$l1;
        this.RaiseInternalError(20170409180246,$lm3.ResolverBuiltInProcNames[bf]);
      };
      $lt69.AddObjFPCBuiltInIdentifiers.call(this,rtl.diffSet(TheBaseTypes,rtl.createSet(27,28)),TheBaseProcs);
      if (27 in TheBaseTypes) this.AddBaseType($mod.Pas2JSBuiltInNames[188],27);
      if (28 in TheBaseTypes) this.AddBaseType($mod.Pas2JSBuiltInNames[171],28);
      this.FJSBuiltInProcs[0] = this.AddBuiltInProc($mod.Pas2jsBuiltInProcNames[0],"procedure Debugger",rtl.createCallback(this,"BI_Debugger_OnGetCallCompatibility"),null,null,null,0,rtl.createSet(0));
      this.FJSBuiltInProcs[1] = this.AddBuiltInProc($mod.Pas2jsBuiltInProcNames[1],"function await(const Expr: T): T",rtl.createCallback(this,"BI_AWait_OnGetCallCompatibility"),rtl.createCallback(this,"BI_AWait_OnGetCallResult"),rtl.createCallback(this,"BI_AWait_OnEval"),rtl.createCallback(this,"BI_AWait_OnFinishParamsExpr"),0,rtl.createSet(0));
    };
    this.CheckTypeCastRes = function (FromResolved, ToResolved, ErrorEl, RaiseOnError) {
      var $Self = this;
      var Result = 0;
      function Incompatible(Id) {
        var Result = 0;
        if (RaiseOnError) $Self.RaiseIncompatibleTypeRes(Id,3035,[],FromResolved,ToResolved,ErrorEl);
        Result = 2147483647;
        return Result;
      };
      var JSBaseType = 0;
      var C = null;
      var ToClass = null;
      var ToTypeEl = null;
      var FromTypeEl = null;
      Result = 2147483647;
      if (0 in FromResolved.Flags) {
        if (ToResolved.BaseType === 1) {
          ToTypeEl = ToResolved.LoTypeEl;
          if (!$lt100.isPrototypeOf(ToTypeEl)) this.RaiseInternalError(20170325142826,"");
          if ($lt21.isPrototypeOf(ToTypeEl.FData)) {
            JSBaseType = ToTypeEl.FData.JSBaseType;
            if (JSBaseType === 1) {
              if (FromResolved.BaseType in $mod.btAllJSValueSrcTypes) {
                Result = 3}
               else if (FromResolved.BaseType === 1) {
                if (this.IsJSBaseType$1(FromResolved,1,false)) Result = 0;
              } else if (FromResolved.BaseType === 2) Result = 3;
            };
            return Result;
          };
        } else if (FromResolved.BaseType === 1) {
          FromTypeEl = FromResolved.LoTypeEl;
          if (!$lt100.isPrototypeOf(FromTypeEl)) this.RaiseInternalError(20170325143016,"");
          if ($lt21.isPrototypeOf(FromTypeEl.FData)) {
            JSBaseType = FromTypeEl.FData.JSBaseType;
            if (JSBaseType === 1) {
              if (ToResolved.BaseType in $mod.btAllJSValueTypeCastTo) {
                Result = 3}
               else if (ToResolved.BaseType === 2) {
                Result = 3;
              };
            };
            return Result;
          };
        } else if (ToResolved.BaseType === 2) {
          ToTypeEl = ToResolved.LoTypeEl;
          C = ToTypeEl.$class.ClassType();
          if (C === $lt72) {
            ToClass = ToTypeEl;
            if (ToClass.IsExternal) {
              if (FromResolved.BaseType in $mod.btAllJSStringAndChars) {
                if (this.IsExternalClass_Name(ToClass,"String")) return 0;
              } else if (FromResolved.BaseType === 35) {
                if (this.IsExternalClass_Name(ToClass,"Array")) return 0;
              } else if (FromResolved.BaseType === 2) {
                FromTypeEl = FromResolved.LoTypeEl;
                if (FromTypeEl.$class.ClassType() === $lt107) {
                  if (this.IsExternalClass_Name(ToClass,"Array") || this.IsExternalClass_Name(ToClass,"Object")) return 0;
                } else if (FromTypeEl.$class.ClassType() === $lt81) {
                  if (this.IsExternalClass_Name(ToClass,"Object")) return 0;
                } else if (FromTypeEl.$class.ClassType() === $lt112) {
                  if (this.IsExternalClass_Name(ToClass,"Object")) return 0;
                } else if (FromTypeEl.$class.InheritsFrom($lt118)) {
                  if (this.IsExternalClass_Name(ToClass,"Function") || this.IsExternalClass_Name(ToClass,"Object")) return 0;
                } else if (FromTypeEl.$class.ClassType() === $lt72) {
                  if (FromTypeEl.IsExternal && (3 in this.FCurrentParser.GetCurrentModeSwitches()) && !(27 in this.FCurrentParser.FScanner.FCurrentBoolSwitches)) return 2;
                };
              };
            };
          } else if (C === $lt107) {
            if (FromResolved.BaseType === 2) {
              FromTypeEl = FromResolved.LoTypeEl;
              if ((FromTypeEl.$class.ClassType() === $lt72) && FromTypeEl.IsExternal && (this.IsExternalClass_Name(FromTypeEl,"Array") || this.IsExternalClass_Name(FromTypeEl,"Object"))) {
                return 3;
              };
            };
          } else if (C === $lt81) {
            if (FromResolved.BaseType === 4) {}
            else if (FromResolved.BaseType === 2) {
              FromTypeEl = FromResolved.LoTypeEl;
              if (FromTypeEl === ToTypeEl) {
                return 2}
               else return Incompatible(20180503134526);
            } else return Incompatible(20180503134528);
          } else if (C.InheritsFrom($lt118)) {
            if (FromResolved.BaseType === 2) {
              FromTypeEl = FromResolved.LoTypeEl;
              if (FromTypeEl.$class.ClassType() === $lt72) {
                if (this.IsExternalClass_Name(FromTypeEl,"Function")) return 3;
              };
            };
          };
        };
      } else if ($lt76.isPrototypeOf(FromResolved.IdentEl)) {
        FromTypeEl = this.ResolveAliasType(FromResolved.IdentEl,true);
        if (ToResolved.BaseType === 2) {
          ToTypeEl = ToResolved.LoTypeEl;
          if ((ToTypeEl.$class.ClassType() === $lt72) && ToTypeEl.IsExternal && (ToTypeEl.ExternalName === "Object")) {
            if ((FromTypeEl.$class.ClassType() === $lt72) || (FromTypeEl.$class.ClassType() === $lt81)) return 10000 + 1;
          };
        };
      };
      Result = $lt69.CheckTypeCastRes.call(this,FromResolved,ToResolved,ErrorEl,RaiseOnError);
      return Result;
    };
    this.ExtractPasStringLiteral = function (El, S) {
      var $Self = this;
      var Result = "";
      var p = 0;
      var StartP = 0;
      var l = 0;
      function Err(id) {
        $Self.RaiseMsg(id,3147,rtl.getResStr($lm6,"sIllegalCharConst"),[],El);
      };
      function ReadNumber() {
        var Result = 0;
        var c = "\x00";
        Result = 0;
        p += 1;
        if (p > l) Err(20170207155121);
        if (S.charAt(p - 1) === "$") {
          p += 1;
          StartP = p;
          while (p <= l) {
            c = S.charAt(p - 1);
            var $tmp = c;
            if (($tmp >= "0") && ($tmp <= "9")) {
              Result = ((Result * 16) + c.charCodeAt()) - 48}
             else if (($tmp >= "a") && ($tmp <= "f")) {
              Result = (((Result * 16) + c.charCodeAt()) - 97) + 10}
             else if (($tmp >= "A") && ($tmp <= "F")) {
              Result = (((Result * 16) + c.charCodeAt()) - 65) + 10}
             else {
              break;
            };
            if (Result > 0x10ffff) Err(20170207164657);
            p += 1;
          };
          if (p === StartP) Err(20170207164956);
        } else {
          StartP = p;
          while (p <= l) {
            c = S.charAt(p - 1);
            var $tmp1 = c;
            if (($tmp1 >= "0") && ($tmp1 <= "9")) {
              Result = ((Result * 10) + c.charCodeAt()) - 48}
             else {
              break;
            };
            if (Result > 0x10ffff) Err(20170207171140);
            p += 1;
          };
          if (p === StartP) Err(20170207171148);
        };
        return Result;
      };
      var c = "\x00";
      var i = 0;
      var j = 0;
      Result = "";
      if (S === "") this.RaiseInternalError(20170207154543,"");
      p = 1;
      l = S.length;
      while (p <= l) {
        var $tmp = S.charAt(p - 1);
        if ($tmp === "'") {
          p += 1;
          StartP = p;
          do {
            if (p > l) Err(20170207155120);
            c = S.charAt(p - 1);
            var $tmp1 = c;
            if ($tmp1 === "'") {
              if (p > StartP) Result = Result + $lp24($lp4(S,StartP,p - StartP));
              p += 1;
              StartP = p;
              if ((p > l) || (S.charAt(p - 1) !== "'")) break;
              Result = Result + "'";
              p += 1;
              StartP = p;
            } else {
              p += 1;
            };
          } while (!false);
          if (p > StartP) Result = Result + $lp24($lp4(S,StartP,p - StartP));
        } else if ($tmp === "#") {
          i = ReadNumber();
          if ((i >= 0xD800) && (i <= 0xDFFF) && (p < l) && (S.charAt(p - 1) === "#")) {
            j = ReadNumber();
            if ((j >= 0xDC00) && (j < 0xDFFF)) {
              Result = Result + $mod.CodePointToJSString(((i & 0x3FF) << 10) + (j & 0x3ff) + 0x10000)}
             else Result = Result + $mod.CodePointToJSString(i) + $mod.CodePointToJSString(j);
          } else Result = Result + $mod.CodePointToJSString(i);
        } else if ($tmp === "^") {
          p += 1;
          if (p > l) Err(20181025125920);
          c = S.charAt(p - 1);
          var $tmp2 = c;
          if (($tmp2 >= "a") && ($tmp2 <= "z")) {
            Result = Result + String.fromCharCode((c.charCodeAt() - 97) + 1)}
           else if (($tmp2 >= "A") && ($tmp2 <= "Z")) {
            Result = Result + String.fromCharCode((c.charCodeAt() - 65) + 1)}
           else {
            Err(20170207160412);
          };
          p += 1;
        } else {
          Err(20170207154653);
        };
      };
      return Result;
    };
    this.ComputeConstString = function (Expr, StoreCustomData, NotEmpty) {
      var Result = "";
      var Value = null;
      Result = "";
      if (Expr === null) this.RaiseInternalError(20170215123600,"");
      Value = this.Eval(Expr,rtl.createSet(2),StoreCustomData);
      if (Value !== null) try {
        var $tmp = Value.Kind;
        if ($tmp === 8) {
          Result = Value.S}
         else {
          Result = $lt121[Value.Kind];
          this.RaiseXExpectedButYFound(20170211221121,"string literal",Result,Expr);
        };
      } finally {
        $lp17({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      if (NotEmpty && (Result === "")) this.RaiseXExpectedButYFound(20170321085318,"string literal","empty",Expr);
      return Result;
    };
    this.CheckAssignExprRangeToCustom = function (LeftResolved, RValue, RHS) {
      var LeftBaseType = 0;
      if (LeftResolved.BaseType !== 1) return;
      if (!$lt100.isPrototypeOf(LeftResolved.LoTypeEl)) {
        this.RaiseInternalError(20170902165913,"");
      };
      if (!$lt21.isPrototypeOf(LeftResolved.LoTypeEl.FData)) return;
      LeftBaseType = LeftResolved.LoTypeEl.FData.JSBaseType;
      if (LeftBaseType === 1) {}
      else this.RaiseNotYetImplemented(20170902170153,RHS,"");
      if (RHS === null) ;
      if (RValue === null) ;
    };
    this.CheckAssignCompatibilityClasses = function (LType, RType) {
      var Result = 0;
      var LeftScope = null;
      var RightScope = null;
      var LeftSpecItem = null;
      var RightSpecItem = null;
      var i = 0;
      var LeftParam = null;
      var RightParam = null;
      Result = 2147483647;
      if (LType.IsExternal && RType.IsExternal) {
        LeftScope = LType.FData;
        RightScope = RType.FData;
        LeftSpecItem = LeftScope.SpecializedFromItem;
        RightSpecItem = RightScope.SpecializedFromItem;
        if ((LeftSpecItem !== null) && (RightSpecItem !== null) && (LeftSpecItem.GenericEl === RightSpecItem.GenericEl)) {
          Result = 0;
          for (var $l = 0, $end = rtl.length(LeftSpecItem.Params) - 1; $l <= $end; $l++) {
            i = $l;
            LeftParam = LeftSpecItem.Params[i];
            RightParam = RightSpecItem.Params[i];
            if (this.IsSameType(LeftParam,RightParam,2) || this.IsJSBaseType(LeftParam,1)) {}
            else {
              Result = 2147483647;
              break;
            };
          };
        };
      };
      return Result;
    };
    this.HasStaticArrayCloneFunc = function (Arr) {
      var Result = false;
      var l = 0;
      var ElType = null;
      l = rtl.length(Arr.Ranges);
      var $tmp = l;
      if ($tmp === 0) {
        Result = false}
       else if ($tmp === 1) {
        ElType = this.ResolveAliasType(Arr.ElType,true);
        if ($lt107.isPrototypeOf(ElType)) {
          Result = rtl.length(ElType.Ranges) > 0}
         else if ($lt81.isPrototypeOf(ElType)) {
          Result = true}
         else if ($lt117.isPrototypeOf(ElType)) {
          Result = true}
         else Result = false;
      } else {
        Result = true;
      };
      return Result;
    };
    this.IsTGUID = function (TypeEl) {
      var Result = false;
      var Members = null;
      var El = null;
      var MemberIndex = 0;
      var i = 0;
      Result = false;
      if (!$lp18(TypeEl.FName,"TGUID")) return Result;
      Members = TypeEl.Members;
      i = 1;
      for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
        MemberIndex = $l;
        El = rtl.getObject(Members.Get(MemberIndex));
        if (El.$class.ClassType() !== $lt80) continue;
        if ($lp18(El.FName,"D" + $lp2(i))) {
          if (i === 4) return true;
          i += 1;
        };
      };
      return Result;
    };
    this.GetAssignGUIDString = function (TypeEl, Expr, GUID) {
      var Result = false;
      var Value = null;
      var GUIDStr = "";
      Result = false;
      if (Expr === null) return Result;
      if (!this.IsTGUID(TypeEl)) return Result;
      Value = this.Eval(Expr,rtl.createSet(2),true);
      try {
        var $tmp = Value.Kind;
        if ($tmp === 8) {
          GUIDStr = Value.S}
         else {
          this.RaiseXExpectedButYFound(20180415092350,"GUID string literal",Value.AsString(),Expr);
        };
        if (!$lp25(GUIDStr,GUID)) this.RaiseXExpectedButYFound(20180415092351,"GUID string literal",Value.AsString(),Expr);
        Result = true;
      } finally {
        $lp17({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      return Result;
    };
    this.CheckDispatchField = function (Proc, Switch) {
      var ProcScope = null;
      var ClassScope = null;
      var FieldName = "";
      var Args = null;
      var Members = null;
      var Arg = null;
      var ArgType = null;
      var i = 0;
      var Member = null;
      var MemberResolved = $lt84.$new();
      Args = Proc.ProcType.Args;
      if (Args.FCount !== 1) this.RaiseNotYetImplemented(20190311213959,Proc,"");
      Arg = rtl.getObject(Args.Get(0));
      if (Arg.ArgType === null) return;
      ProcScope = Proc.FData;
      ClassScope = ProcScope.ClassRecScope;
      FieldName = "";
      while (ClassScope !== null) {
        var $tmp = Switch;
        if ($tmp === 1) {
          if (ClassScope.DispatchField !== "") {
            FieldName = ClassScope.DispatchField;
            break;
          }}
         else if ($tmp === 2) {
          if (ClassScope.DispatchStrField !== "") {
            FieldName = ClassScope.DispatchStrField;
            break;
          }}
         else {
          this.RaiseNotYetImplemented(20190311213650,Proc,"");
        };
        ClassScope = rtl.as(ClassScope.AncestorScope,$lt14);
      };
      if (FieldName === "") return;
      ArgType = this.ResolveAliasType(Arg.ArgType,true);
      if (!$lt73.isPrototypeOf(ArgType)) {
        this.LogMsg(20190311214257,2,4030,rtl.getResStr($mod,"sDispatchRequiresX"),$lp6(18,"record type"),Arg);
        return;
      };
      Members = ArgType.Members;
      for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Member = rtl.getObject(Members.Get(i));
        if ($lp18(Member.FName,FieldName)) {
          if (Member.$class.ClassType() !== $lt80) {
            this.LogMsg(20190311215218,2,4030,rtl.getResStr($mod,"sDispatchRequiresX"),$lp6(18,'field variable "' + FieldName + '"'),Arg);
            return;
          };
          this.ComputeElement(Member.VarType,MemberResolved,rtl.createSet(4),Arg);
          var $tmp1 = Switch;
          if ($tmp1 === 1) {
            if (!(MemberResolved.BaseType in $mod.btAllJSInteger)) {
              this.LogMsg(20190311215215,2,4030,rtl.getResStr($mod,"sDispatchRequiresX"),$lp6(18,'integer field "' + FieldName + '"'),Arg);
              return;
            }}
           else if ($tmp1 === 2) if (!(MemberResolved.BaseType in $mod.btAllJSStrings)) {
            this.LogMsg(20190312125025,2,4030,rtl.getResStr($mod,"sDispatchRequiresX"),$lp6(18,'string field "' + FieldName + '"'),Arg);
            return;
          };
          if (Member.FName !== FieldName) {
            this.LogMsg(20190311221651,2,4030,rtl.getResStr($mod,"sDispatchRequiresX"),$lp6(18,'field name to match exactly "' + FieldName + '"'),Arg);
            return;
          };
          return;
        };
      };
      this.LogMsg(20190311214710,2,4030,rtl.getResStr($mod,"sDispatchRequiresX"),$lp6(18,'record field "' + FieldName + '"'),Arg);
    };
    this.AddMessageStr = function (MsgToProc, S, Proc) {
      var i = 0;
      if (MsgToProc.get() === null) {
        MsgToProc.set($lt61.$create("Create$1"))}
       else {
        for (var $l = 0, $end = MsgToProc.get().GetCount() - 1; $l <= $end; $l++) {
          i = $l;
          if (MsgToProc.get().Get(i) === S) this.RaiseMsg(20190303233647,4029,rtl.getResStr($mod,"sDuplicateMessageIdXAtY"),$lp6(18,S,18,this.GetElementSourcePosStr(MsgToProc.get().GetObject(i).MessageExpr)),Proc.MessageExpr);
        };
      };
      MsgToProc.get().AddObject(S,Proc);
    };
    this.AddMessageIdToClassScope = function (Proc, EmitHints) {
      var AClass = null;
      var ClassScope = null;
      var Expr = null;
      var Value = null;
      AClass = Proc.FParent;
      ClassScope = AClass.FData;
      Expr = Proc.MessageExpr;
      Value = this.Eval(Expr,rtl.createSet(0),true);
      if (Value === null) this.RaiseMsg(20190303225651,3124,rtl.getResStr($lm6,"sIllegalExpressionAfterX"),$lp6(18,"message modifier"),Expr);
      try {
        var $tmp = Value.Kind;
        if ($tmp === 8) {
          this.AddMessageStr({p: ClassScope, get: function () {
              return this.p.MsgStrToProc;
            }, set: function (v) {
              this.p.MsgStrToProc = v;
            }},Value.S,Proc);
          if (EmitHints) this.CheckDispatchField(Proc,2);
        } else if ($tmp === 4) {
          this.AddMessageStr({p: ClassScope, get: function () {
              return this.p.MsgIntToProc;
            }, set: function (v) {
              this.p.MsgIntToProc = v;
            }},$lp2(Value.Int),Proc);
          if (EmitHints) this.CheckDispatchField(Proc,1);
        } else {
          this.RaiseXExpectedButYFound(20190303225849,"integer constant",Value.AsString(),Expr);
        };
      } finally {
        $lp17({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
    };
    this.ComputeResultElement = function (El, ResolvedEl, Flags, StartEl) {
      var Proc = null;
      var ProcType = null;
      var JSPromiseClass = null;
      if ((5 in Flags) && $lt118.isPrototypeOf(El.FParent)) {
        ProcType = El.FParent;
        if ($lt67.isPrototypeOf(ProcType.FParent)) {
          Proc = ProcType.FParent;
          if (Proc.IsAsync()) {
            JSPromiseClass = this.FindTJSPromise(null);
            if (JSPromiseClass !== null) {
              $lp26(ResolvedEl,2,El,JSPromiseClass,JSPromiseClass,rtl.createSet(0,1));
              return;
            };
          };
        };
      };
      $lt69.ComputeResultElement.call(this,El,ResolvedEl,rtl.refSet(Flags),StartEl);
    };
    this.ComputeProcAsyncResult = function (El, ResolvedEl, Flags, StartEl) {
      var Result = false;
      var JSPromiseClass = null;
      JSPromiseClass = this.FindTJSPromise(null);
      if (JSPromiseClass === null) {
        return false}
       else {
        $lp26(ResolvedEl,2,El,JSPromiseClass,JSPromiseClass,rtl.createSet(0,1));
        return true;
      };
      if (StartEl === null) ;
      if (rtl.eqSet(Flags,{})) ;
      return Result;
    };
    this.CheckEqualCompatibilityUserType = function (LHS, RHS, ErrorEl, RaiseOnIncompatible) {
      var Result = 0;
      Result = $lt69.CheckEqualCompatibilityUserType.call(this,LHS,RHS,ErrorEl,RaiseOnIncompatible);
      if (Result === 2147483647) return Result;
      if ($lt107.isPrototypeOf(LHS.LoTypeEl) && (rtl.length(LHS.LoTypeEl.Ranges) > 0)) this.RaiseMsg(20200508103543,3081,rtl.getResStr($lm6,"sXIsNotSupported"),$lp6(18,"compare static array"),ErrorEl);
      if ($lt107.isPrototypeOf(RHS.LoTypeEl) && (rtl.length(RHS.LoTypeEl.Ranges) > 0)) this.RaiseMsg(20200508103544,3081,rtl.getResStr($lm6,"sXIsNotSupported"),$lp6(18,"compare static array"),ErrorEl);
      return Result;
    };
    this.RaiseMsg = function (Id, MsgNumber, Fmt, Args, ErrorPosEl) {
      $lt69.RaiseMsg.call(this,Id,MsgNumber,Fmt,Args,ErrorPosEl);
    };
    this.GetOverloadName = function (El) {
      var Result = "";
      var Data = null;
      var ProcScope = null;
      var GenScope = null;
      var GenEl = null;
      Data = El.FData;
      if ($lt115.isPrototypeOf(Data)) {
        if ($lt16.isPrototypeOf(Data)) {
          ProcScope = Data;
          if (ProcScope.SpecializedFromItem !== null) {
            GenEl = ProcScope.SpecializedFromItem.GenericEl;
            GenScope = GenEl.FData;
            Result = GenScope.OverloadName;
            if (Result === "") Result = GenEl.FName + "$";
            Result = Result + "G" + $lp2(ProcScope.SpecializedFromItem.Index + 1);
          } else Result = ProcScope.OverloadName;
        } else if ($lt17.isPrototypeOf(Data)) {
          Result = Data.JSName}
         else if ($lt18.isPrototypeOf(Data)) {
          Result = Data.JSName}
         else if ($lt15.isPrototypeOf(Data)) {
          Result = Data.JSName}
         else if ($lt14.isPrototypeOf(Data)) {
          Result = Data.JSName}
         else Result = "";
        if (Result !== "") return Result;
      };
      Result = El.FName;
      return Result;
    };
    this.GetBaseDescription = function (R, AddPath) {
      var Result = "";
      if ((R.BaseType === 1) && $lt21.isPrototypeOf(R.LoTypeEl.FData)) {
        Result = $mod.Pas2jsBaseTypeNames[R.LoTypeEl.FData.JSBaseType]}
       else Result = $lt69.GetBaseDescription.call(this,R,AddPath);
      return Result;
    };
    this.HasTypeInfo = function (El) {
      var Result = false;
      Result = $lt69.HasTypeInfo.call(this,El);
      if (!Result) return Result;
      if ($lt77.isPrototypeOf(El.FParent)) Result = false;
      return Result;
    };
    this.HasExtRTTI = function (El) {
      var Result = false;
      var Members = null;
      var i = 0;
      var ChildEl = null;
      var V = $lt122.$new();
      Result = false;
      V.$assign(El.RTTIVisibility);
      if (rtl.eqSet(V.Fields,{}) && rtl.eqSet(V.Methods,{}) && rtl.eqSet(V.Properties,{})) return Result;
      Members = El.Members;
      for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
        i = $l;
        ChildEl = rtl.getObject(Members.Get(i));
        if (El.HasExtRTTI(ChildEl)) return true;
      };
      return Result;
    };
    this.ProcHasImplElements = function (Proc) {
      var Result = false;
      var Scope = null;
      Result = $lt69.ProcHasImplElements.call(this,Proc);
      if (Result) return Result;
      Scope = rtl.as(Proc.FData,$lt16);
      if (Scope.ImplProc !== null) Scope = rtl.as(Scope.ImplProc.FData,$lt16);
      if ((Scope.ImplJS !== null) && (Scope.ImplJS.BodyJS !== "")) Result = !Scope.ImplJS.EmptyJS;
      return Result;
    };
    this.HasAnonymousFunctions = function (El) {
      var Result = false;
      var Data = $lt26.$new();
      if (El === null) return false;
      Data.$assign($lt26.$new());
      El.ForEachCall(rtl.createCallback(this,"OnHasAnonymousEl"),Data);
      Result = Data.Expr !== null;
      return Result;
    };
    this.GetTopLvlProcScope = function (El) {
      var Result = null;
      var Proc = null;
      Result = null;
      while (El !== null) {
        if ($lt67.isPrototypeOf(El)) {
          Proc = El;
          if ($lt16.isPrototypeOf(Proc.FData)) Result = Proc.FData;
          return Result;
        };
        El = El.FParent;
      };
      return Result;
    };
    this.ProcCanBePrecompiled = function (DeclProc) {
      var Result = false;
      var El = null;
      var TemplTypes = null;
      var ProcScope = null;
      var GenScope = null;
      if (this.GetProcTemplateTypes(DeclProc) !== null) return false;
      ProcScope = rtl.as(DeclProc.FData,$lt16);
      if (ProcScope.SpecializedFromItem !== null) return false;
      El = DeclProc;
      do {
        El = El.FParent;
        if (El === null) return true;
        if ($lt67.isPrototypeOf(El)) return false;
        if ($lt113.isPrototypeOf(El)) {
          TemplTypes = El.GenericTemplateTypes;
          if ((TemplTypes !== null) && (TemplTypes.FCount > 0)) return false;
          GenScope = rtl.as(El.FData,$lt115);
          if (GenScope.SpecializedFromItem !== null) return false;
        };
      } while (!false);
      return Result;
    };
    this.IsReadEqWrite = function (ExprResolved) {
      var Result = false;
      var C = null;
      var IdentEl = null;
      var Setter = null;
      var Getter = null;
      var Prop = null;
      if (!(0 in ExprResolved.Flags)) return Result;
      if (!(1 in ExprResolved.Flags)) return Result;
      Result = false;
      IdentEl = ExprResolved.IdentEl;
      if (ExprResolved.BaseType === 2) {
        if (IdentEl !== null) {
          C = IdentEl.$class.ClassType();
          if ((C === $lt80) || (C === $lt75) || (C === $lt90)) {
            return true}
           else if (C === $lt89) {
            return true}
           else if (C === $lt74) {
            Prop = IdentEl;
            Getter = this.GetPasPropertyGetter(Prop);
            if (!$lt80.isPrototypeOf(Getter)) return Result;
            Setter = this.GetPasPropertySetter(Prop);
            Result = Getter === Setter;
          };
        };
      };
      return Result;
    };
    this.IsTObjectFreeMethod = function (El) {
      var Result = false;
      var Ref = null;
      var Decl = null;
      Result = false;
      if (El === null) return Result;
      if (El.$class.ClassType() !== $lt91) return Result;
      if (!$lt71.isPrototypeOf(El.FData)) return Result;
      Ref = El.FData;
      if ($lp13(El.Value,"free") !== 0) return Result;
      Decl = Ref.FDeclaration;
      if (!(Decl.$class.ClassType() === $lt67) || (Decl.FParent.$class.ClassType() !== $lt72) || ($lp13(Decl.FParent.FName,"tobject") !== 0) || (12 in Decl.FModifiers) || (Decl.ProcType.Args.FCount > 0)) return Result;
      Result = true;
      return Result;
    };
    this.IsManagedJSType = function (TypeEl) {
      var Result = false;
      Result = false;
      if (TypeEl === null) return Result;
      TypeEl = this.ResolveAliasType(TypeEl,true);
      if ((TypeEl.$class.ClassType() === $lt72) && (TypeEl.ObjKind === 2) && (TypeEl.InterfaceType === 0)) {
        Result = true}
       else if ($lt107.isPrototypeOf(TypeEl)) {
        Result = (TypeEl.FData !== null) && rtl.as(TypeEl.FData,$lt17).Managed}
       else if ($lt81.isPrototypeOf(TypeEl)) Result = rtl.as(TypeEl.FData,$lt15).Managed;
      return Result;
    };
    this.IsExternalBracketAccessor = function (El) {
      var Result = false;
      var ExtName = "";
      if (!$lt67.isPrototypeOf(El) || (El.LibrarySymbolName === null)) return false;
      ExtName = this.ComputeConstString(El.LibrarySymbolName,false,false);
      Result = ExtName === $mod.ExtClassBracketAccessor;
      return Result;
    };
    this.IsExternalClassConstructor = function (El) {
      var Result = false;
      var P = null;
      if ((El.$class.ClassType() === $lt109) && (12 in El.FModifiers)) {
        P = El.FParent;
        if ((P !== null) && (P.$class.ClassType() === $lt72) && P.IsExternal) return true;
      };
      Result = false;
      return Result;
    };
    this.IsForInExtArray = function (Loop, VarResolved, InResolved, ArgResolved, LengthResolved, PropResultResolved) {
      var Result = false;
      var TypeEl = null;
      var aClass = null;
      var ClassScope = null;
      var DefProp = null;
      var Arg0 = null;
      var Getter = null;
      var ClassDotScope = null;
      var Ident = null;
      var LengthVar = null;
      Result = false;
      ArgResolved.$assign($lt84.$new());
      LengthResolved.$assign($lt84.$new());
      PropResultResolved.$assign($lt84.$new());
      TypeEl = InResolved.LoTypeEl;
      if ((TypeEl.$class.ClassType() !== $lt72) || !TypeEl.IsExternal) {
        return Result;
      };
      aClass = TypeEl;
      ClassScope = aClass.FData;
      DefProp = ClassScope.DefaultProperty;
      if ((DefProp === null) || (DefProp.FArgs.FCount !== 1)) {
        return Result;
      };
      Arg0 = rtl.getObject(DefProp.FArgs.Get(0));
      if (!(Arg0.Access in rtl.createSet(0,1))) {
        return Result;
      };
      this.ComputeElement(Arg0,ArgResolved,{},null);
      if (!(ArgResolved.BaseType in $mod.btAllJSInteger)) {
        return Result;
      };
      ClassDotScope = this.PushClassDotScope({get: function () {
          return aClass;
        }, set: function (v) {
          aClass = v;
        }},true);
      Ident = ClassDotScope.FindIdentifier("length");
      this.PopScope();
      if ((Ident === null) || !$lt80.isPrototypeOf(Ident.FElement)) {
        return Result;
      };
      LengthVar = Ident.FElement;
      this.ComputeElement(LengthVar,LengthResolved,{},null);
      if (!this.IsSameType(LengthResolved.LoTypeEl,ArgResolved.LoTypeEl,0)) {
        return Result;
      };
      Result = true;
      Getter = this.GetPasPropertyGetter(DefProp);
      if (!this.IsExternalBracketAccessor(Getter)) this.RaiseMsg(20180519141636,4010,rtl.getResStr($mod,"sForInJSArrDefaultGetterNotExtBracketAccessor"),[],Loop.StartExpr);
      this.ComputeElement(DefProp.VarType,PropResultResolved,{},null);
      PropResultResolved.Flags = rtl.includeSet(PropResultResolved.Flags,0);
      this.CheckAssignResCompatibility(VarResolved,PropResultResolved,Loop.VariableName,true);
      return Result;
    };
    this.IsHelperMethod = function (El) {
      var Result = false;
      Result = $lt69.IsHelperMethod.call(this,El);
      if (!Result) return Result;
      Result = !El.IsExternal();
      return Result;
    };
    this.IsHelperForMember = function (El) {
      var Result = false;
      var Parent = null;
      if (El === null) return false;
      Parent = El.FParent;
      if ((Parent === null) || (Parent.$class.ClassType() !== $lt72) || (Parent.HelperForType === null)) return false;
      if ($lt67.isPrototypeOf(El)) {
        Result = El.IsExternal()}
       else if ($lt80.isPrototypeOf(El)) {
        Result = 1 in El.VarModifiers}
       else Result = false;
      return Result;
    };
    this.ImplBlockReadsDecl = function (Block, Decl) {
      var Result = false;
      var Data = $lt27.$new();
      Data.Decl = Decl;
      Data.El = null;
      Block.ForEachCall(rtl.createCallback(this,"OnHasElReadingDecl"),Data);
      Result = Data.El !== null;
      return Result;
    };
  });
  $lt29 = this.TCtxAccess = {"0": "caRead", caRead: 0, "1": "caAssign", caAssign: 1, "2": "caByReference", caByReference: 2};
  $lt30 = this.TCtxVarKind = {"0": "cvkNone", cvkNone: 0, "1": "cvkGlobal", cvkGlobal: 1, "2": "cvkCurType", cvkCurType: 2, "3": "cvkInstance", cvkInstance: 3, "4": "cvkHelperTemp", cvkHelperTemp: 4};
  this.cvkAll = rtl.createSet(null,0,4);
  rtl.createClass(this,"TConvertContext",$lt50,function () {
    $lt31 = this;
    this.$init = function () {
      $lt50.$init.call(this);
      this.PasElement = null;
      this.JSElement = null;
      this.Resolver = null;
      this.Parent = null;
      this.IsGlobal = false;
      this.Access = 0;
      this.AccessContext = null;
      this.ScannerBoolSwitches = {};
      this.ScannerModeSwitches = {};
    };
    this.$final = function () {
      this.PasElement = undefined;
      this.JSElement = undefined;
      this.Resolver = undefined;
      this.Parent = undefined;
      this.AccessContext = undefined;
      this.ScannerBoolSwitches = undefined;
      this.ScannerModeSwitches = undefined;
      $lt50.$final.call(this);
    };
    this.Create$1 = function (PasEl, JSEl, aParent) {
      this.PasElement = PasEl;
      this.JSElement = JSEl;
      this.Parent = aParent;
      if (this.Parent !== null) {
        this.Resolver = this.Parent.Resolver;
        this.Access = aParent.Access;
        this.AccessContext = aParent.AccessContext;
        this.ScannerBoolSwitches = rtl.refSet(aParent.ScannerBoolSwitches);
        this.ScannerModeSwitches = rtl.refSet(aParent.ScannerModeSwitches);
      };
      return this;
    };
    this.GetRootContext = function () {
      var Result = null;
      Result = this;
      while (Result.Parent !== null) Result = Result.Parent;
      return Result;
    };
    this.GetNonDotContext = function () {
      var Result = null;
      Result = this;
      while ($lt38.isPrototypeOf(Result)) Result = Result.Parent;
      return Result;
    };
    this.GetFunctionContext = function () {
      var Result = null;
      Result = this.GetContextOfType($lt34);
      return Result;
    };
    this.GetLocalName = function (El, Filter) {
      var Result = "";
      if (this.Parent !== null) {
        Result = this.Parent.GetLocalName(El,Filter)}
       else Result = "";
      return Result;
    };
    this.GetSelfContext = function () {
      var Result = null;
      var Ctx = null;
      var FuncContext = null;
      var V = null;
      Ctx = this;
      while (Ctx !== null) {
        if ($lt34.isPrototypeOf(Ctx)) {
          FuncContext = Ctx;
          V = FuncContext.ThisVar;
          if ($lt73.isPrototypeOf(V.Element) && (V.Kind in rtl.createSet(1,2,3))) return FuncContext;
        };
        Ctx = Ctx.Parent;
      };
      Result = null;
      return Result;
    };
    this.GetFuncContextOfPasElement = function (El) {
      var Result = null;
      var ctx = null;
      var Scope = null;
      Result = null;
      if ($lt67.isPrototypeOf(El)) {
        Scope = El.FData;
        if (Scope.ImplProc !== null) El = Scope.ImplProc;
      };
      ctx = this;
      do {
        if ((ctx.PasElement === El) && $lt34.isPrototypeOf(ctx)) return ctx;
        ctx = ctx.Parent;
      } while (!(ctx === null));
      return Result;
    };
    this.GetContextOfType = function (aType) {
      var Result = null;
      var ctx = null;
      Result = null;
      ctx = this;
      do {
        if (aType.isPrototypeOf(ctx)) return ctx;
        ctx = ctx.Parent;
      } while (!(ctx === null));
      return Result;
    };
    this.GetMainSectionContext = function () {
      var Result = null;
      var Ctx = null;
      Ctx = this;
      do {
        if ($lt36.isPrototypeOf(Ctx)) Result = Ctx;
        Ctx = Ctx.Parent;
      } while (!(Ctx === null));
      return Result;
    };
    this.CurrentModeSwitches = function () {
      var Result = {};
      if (this.Resolver === null) {
        Result = rtl.refSet($lm5.OBJFPCModeSwitches)}
       else Result = rtl.refSet(this.Resolver.FCurrentParser.GetCurrentModeSwitches());
      return Result;
    };
    this.GetGlobalFunc = function () {
      var Result = null;
      var Ctx = null;
      Ctx = this;
      while (Ctx !== null) {
        if (Ctx.IsGlobal && (Ctx.JSElement !== null) && $lt34.isPrototypeOf(Ctx)) return Ctx;
        Ctx = Ctx.Parent;
      };
      Result = null;
      return Result;
    };
  });
  rtl.createClass(this,"TRootContext",$lt31,function () {
    $lt32 = this;
    this.$init = function () {
      $lt31.$init.call(this);
      this.ResourceStrings = null;
      this.GlobalClassMethods = [];
    };
    this.$final = function () {
      this.ResourceStrings = undefined;
      this.GlobalClassMethods = undefined;
      $lt31.$final.call(this);
    };
    this.AddGlobalClassMethod = function (p) {
      this.GlobalClassMethods = rtl.arrayInsert(p,this.GlobalClassMethods,rtl.length(this.GlobalClassMethods));
    };
    this.Destroy = function () {
      $lt50.Destroy.call(this);
    };
  });
  rtl.createClass(this,"TFCLocalIdentifier",$lt50,function () {
    $lt33 = this;
    this.$init = function () {
      $lt50.$init.call(this);
      this.Element = null;
      this.Name = "";
      this.Kind = 0;
    };
    this.$final = function () {
      this.Element = undefined;
      $lt50.$final.call(this);
    };
    this.Create$1 = function (aName, TheEl, aKind) {
      this.Name = aName;
      this.Element = TheEl;
      this.Kind = aKind;
      return this;
    };
  });
  rtl.createClass(this,"TFunctionContext",$lt31,function () {
    $lt34 = this;
    this.$init = function () {
      $lt31.$init.call(this);
      this.LocalVars = [];
      this.ThisVar = null;
      this.IntfElReleases = null;
      this.ResultNeedsIntfRelease = false;
      this.IntfExprReleaseCount = 0;
      this.BodySt = null;
      this.TrySt = null;
      this.FinallyFirst = null;
      this.FinallyLast = null;
    };
    this.$final = function () {
      this.LocalVars = undefined;
      this.ThisVar = undefined;
      this.IntfElReleases = undefined;
      this.BodySt = undefined;
      this.TrySt = undefined;
      this.FinallyFirst = undefined;
      this.FinallyLast = undefined;
      $lt31.$final.call(this);
    };
    this.Create$1 = function (PasEl, JSEl, aParent) {
      $lt31.Create$1.call(this,PasEl,JSEl,aParent);
      this.ThisVar = $lt33.$create("Create$1",["this",null,0]);
      this.LocalVars = rtl.arraySetLength(this.LocalVars,null,1);
      this.LocalVars[0] = this.ThisVar;
      return this;
    };
    this.Destroy = function () {
      var i = 0;
      $lp({p: this, get: function () {
          return this.p.IntfElReleases;
        }, set: function (v) {
          this.p.IntfElReleases = v;
        }});
      for (var $l = 0, $end = rtl.length(this.LocalVars) - 1; $l <= $end; $l++) {
        i = $l;
        $lp({a: i, p: this.LocalVars, get: function () {
            return this.p[this.a];
          }, set: function (v) {
            this.p[this.a] = v;
          }});
      };
      this.ThisVar = null;
      $lt50.Destroy.call(this);
    };
    this.AddLocalVar = function (aName, El, aKind, AutoUnique) {
      var Result = null;
      var l = 0;
      var Ident = null;
      var V = null;
      var PV = null;
      Ident = this.FindLocalVar(aName,true);
      if (Ident !== null) {
        if (AutoUnique) {
          aName = this.CreateLocalIdentifier(aName,El,aKind)}
         else {
          V = this.FindLocalVar(aName,false);
          if (V === null) {}
          else if (El !== V.Element) {}
          else {
            throw $lt1.$create("Create$1",['[20200608131330] "' + aName + '" El=' + $lp14(El)]);
          };
        };
      } else if (aKind === 1) {
        PV = this.FindPrecompiledVar$1(El,true);
        if (PV !== null) aName = PV.Name;
      };
      l = rtl.length(this.LocalVars);
      this.LocalVars = rtl.arraySetLength(this.LocalVars,null,l + 1);
      Result = $lt33.$create("Create$1",[aName,El,aKind]);
      this.LocalVars[l] = Result;
      return Result;
    };
    this.AddLocalJSVar = function (aName, AutoUnique) {
      var Result = null;
      Result = this.AddLocalVar(aName,null,0,AutoUnique);
      return Result;
    };
    this.Add_InterfaceRelease = function (El) {
      if (this.IntfElReleases === null) this.IntfElReleases = $lt54.$create("Create");
      if (this.IntfElReleases.IndexOf(El) >= 0) return;
      this.IntfElReleases.Add(El);
    };
    this.CreateLocalIdentifier = function (Prefix, El, aKind) {
      var Result = "";
      var l = 0;
      var PV = null;
      if (aKind === 1) {
        PV = this.FindPrecompiledVar$1(El,true);
        if (PV !== null) return PV.Name;
      };
      Result = Prefix;
      l = 0;
      while ((this.FindLocalVar(Result,true) !== null) || ((aKind === 1) && (this.FindPrecompiledVar(Result,true) !== null))) {
        l += 1;
        Result = Prefix + $lp2(l);
      };
      return Result;
    };
    this.GetLocalName = function (El, Filter) {
      var $Self = this;
      var Result = "";
      function Check(V, FuncCtx) {
        var Result = false;
        Result = false;
        if ((V.Name !== "") && (V.Element === El) && (V.Kind in Filter)) {
          if ((V.Name === "this") && (FuncCtx !== $Self)) return Result;
          if (rtl.neSet(Filter,$mod.cvkAll)) {
            if ($Self.FindLocalVar(V.Name,true) !== V) return Result;
          };
          Result = true;
        };
        return Result;
      };
      var V = null;
      var FuncCtx = null;
      var i = 0;
      if (El === null) return "";
      FuncCtx = $Self;
      do {
        if (Check(FuncCtx.ThisVar,FuncCtx)) return "this";
        for (var $l = 0, $end = rtl.length(FuncCtx.LocalVars) - 1; $l <= $end; $l++) {
          i = $l;
          V = FuncCtx.LocalVars[i];
          if (Check(V,FuncCtx)) return V.Name;
        };
        FuncCtx = FuncCtx.Parent.GetFunctionContext();
      } while (!(FuncCtx === null));
      Result = "";
      return Result;
    };
    this.IndexOfLocalVar = function (aName) {
      var Result = 0;
      var i = 0;
      for (var $l = 0, $end = rtl.length(this.LocalVars) - 1; $l <= $end; $l++) {
        i = $l;
        if (this.LocalVars[i].Name === aName) return i;
      };
      Result = -1;
      return Result;
    };
    this.FindLocalVar = function (aName, WithParents) {
      var Result = null;
      var i = 0;
      var ParentFC = null;
      i = this.IndexOfLocalVar(aName);
      if (i >= 0) return this.LocalVars[i];
      if (!WithParents || (this.Parent === null)) return null;
      ParentFC = this.Parent.GetFunctionContext();
      if (ParentFC === null) return null;
      Result = ParentFC.FindLocalVar(aName,true);
      return Result;
    };
    this.FindPrecompiledVar = function (aName, WithParents) {
      var Result = null;
      var ParentFC = null;
      if (!WithParents || (this.Parent === null)) return null;
      ParentFC = this.Parent.GetFunctionContext();
      if (ParentFC === null) return null;
      Result = ParentFC.FindPrecompiledVar(aName,true);
      return Result;
    };
    this.FindPrecompiledVar$1 = function (El, WithParents) {
      var Result = null;
      var ParentFC = null;
      if (!WithParents || (this.Parent === null)) return null;
      ParentFC = this.Parent.GetFunctionContext();
      if (ParentFC === null) return null;
      Result = ParentFC.FindPrecompiledVar$1(El,true);
      return Result;
    };
  });
  rtl.createClass(this,"TObjectContext",$lt31,function () {
    $lt35 = this;
  });
  rtl.createClass(this,"TSectionContext",$lt34,function () {
    $lt36 = this;
    this.$init = function () {
      $lt34.$init.call(this);
      this.SrcElements = null;
      this.HeaderIndex = 0;
      this.PrecompiledVars = [];
    };
    this.$final = function () {
      this.SrcElements = undefined;
      this.PrecompiledVars = undefined;
      $lt34.$final.call(this);
    };
    this.Create$1 = function (PasEl, JSEl, aParent) {
      $lt34.Create$1.apply(this,arguments);
      this.IsGlobal = true;
      this.SrcElements = rtl.as(JSEl,$lt123);
      return this;
    };
    this.AddHeaderStatement = function (JS) {
      if (JS === null) return;
      this.SrcElements.FStatements.InsertNode(this.HeaderIndex).FNode = JS;
      this.HeaderIndex += 1;
    };
    this.FindPrecompiledVar = function (aName, WithParents) {
      var Result = null;
      var i = 0;
      for (var $l = 0, $end = rtl.length(this.PrecompiledVars) - 1; $l <= $end; $l++) {
        i = $l;
        Result = this.PrecompiledVars[i];
        if (Result.Name === aName) return Result;
      };
      if (!WithParents) return null;
      Result = $lt34.FindPrecompiledVar.call(this,aName,WithParents);
      return Result;
    };
    this.FindPrecompiledVar$1 = function (El, WithParents) {
      var Result = null;
      var i = 0;
      for (var $l = 0, $end = rtl.length(this.PrecompiledVars) - 1; $l <= $end; $l++) {
        i = $l;
        Result = this.PrecompiledVars[i];
        if (Result.Element === El) return Result;
      };
      if (!WithParents) return null;
      Result = $lt34.FindPrecompiledVar$1.call(this,El,WithParents);
      return Result;
    };
  });
  rtl.createClass(this,"TInterfaceSectionContext",$lt36,function () {
    $lt37 = this;
    this.$init = function () {
      $lt36.$init.call(this);
      this.ImplContext = null;
      this.ImplHeaderStatements = null;
      this.ImplSrcElements = null;
      this.ImplHeaderIndex = 0;
    };
    this.$final = function () {
      this.ImplContext = undefined;
      this.ImplHeaderStatements = undefined;
      this.ImplSrcElements = undefined;
      $lt36.$final.call(this);
    };
    this.Destroy = function () {
      var i = 0;
      var El = null;
      if (this.ImplHeaderStatements !== null) {
        for (var $l = 0, $end = this.ImplHeaderStatements.FCount - 1; $l <= $end; $l++) {
          i = $l;
          El = rtl.getObject(this.ImplHeaderStatements.Get(i));
          El = rtl.freeLoc(El);
        };
        $lp({p: this, get: function () {
            return this.p.ImplHeaderStatements;
          }, set: function (v) {
            this.p.ImplHeaderStatements = v;
          }});
      };
      $lt34.Destroy.call(this);
    };
    this.AddImplHeaderStatement = function (JS) {
      if (JS === null) return;
      if (this.ImplContext !== null) {
        this.ImplContext.AddHeaderStatement(JS);
      } else if (this.ImplSrcElements !== null) {
        this.ImplSrcElements.FStatements.InsertNode(this.ImplHeaderIndex).FNode = JS;
        this.ImplHeaderIndex += 1;
      } else {
        if (this.ImplHeaderStatements === null) this.ImplHeaderStatements = $lt54.$create("Create");
        this.ImplHeaderStatements.Add(JS);
      };
    };
  });
  rtl.createClass(this,"TDotContext",$lt31,function () {
    $lt38 = this;
    this.$init = function () {
      $lt31.$init.call(this);
      this.LeftResolved = $lt84.$new();
      this.JS = null;
    };
    this.$final = function () {
      this.LeftResolved = undefined;
      this.JS = undefined;
      $lt31.$final.call(this);
    };
  });
  rtl.createClass(this,"TAssignContext",$lt31,function () {
    $lt39 = this;
    this.$init = function () {
      $lt31.$init.call(this);
      this.LeftResolved = $lt84.$new();
      this.RightResolved = $lt84.$new();
      this.RightSide = null;
      this.PropertyEl = null;
      this.Call = null;
    };
    this.$final = function () {
      this.LeftResolved = undefined;
      this.RightResolved = undefined;
      this.RightSide = undefined;
      this.PropertyEl = undefined;
      this.Call = undefined;
      $lt31.$final.call(this);
    };
    this.Create$1 = function (PasEl, JSEl, aParent) {
      $lt31.Create$1.call(this,PasEl,JSEl,aParent);
      this.Access = 1;
      this.AccessContext = this;
      return this;
    };
  });
  rtl.createClass(this,"TParamContext",$lt31,function () {
    $lt40 = this;
    this.$init = function () {
      $lt31.$init.call(this);
      this.Arg = null;
      this.Expr = null;
      this.ResolvedExpr = $lt84.$new();
      this.Setter = null;
      this.ReusingReference = false;
    };
    this.$final = function () {
      this.Arg = undefined;
      this.Expr = undefined;
      this.ResolvedExpr = undefined;
      this.Setter = undefined;
      $lt31.$final.call(this);
    };
    this.Create$1 = function (PasEl, JSEl, aParent) {
      $lt31.Create$1.call(this,PasEl,JSEl,aParent);
      this.Access = 1;
      this.AccessContext = this;
      return this;
    };
  });
  this.DefaultJSWriterOptions = rtl.createSet(4,5,6);
  rtl.createClass(this,"TPasToJSConverterGlobals",$lt50,function () {
    $lt41 = this;
    this.$init = function () {
      $lt50.$init.call(this);
      this.FOwner = null;
      this.BuiltInNames = rtl.arraySetLength(null,"",189);
      this.RTLVersion = 0.0;
      this.TargetPlatform = 0;
      this.TargetProcessor = 0;
    };
    this.$final = function () {
      this.FOwner = undefined;
      this.BuiltInNames = undefined;
      $lt50.$final.call(this);
    };
    this.Create$1 = function (TheOwner) {
      this.FOwner = TheOwner;
      this.ResetBuiltInNames();
      return this;
    };
    this.Reset = function () {
      this.RTLVersion = 1;
      this.TargetPlatform = 0;
      this.TargetProcessor = 0;
      this.ResetBuiltInNames();
    };
    this.ResetBuiltInNames = function () {
      var n = 0;
      for (var $l = 0; $l <= 188; $l++) {
        n = $l;
        this.BuiltInNames[n] = $mod.Pas2JSBuiltInNames[n];
      };
    };
  });
  $lt42 = this.TRefPathKind = {"0": "rpkPath", rpkPath: 0, "1": "rpkPathWithDot", rpkPathWithDot: 1, "2": "rpkPathAndName", rpkPathAndName: 2};
  rtl.createClass(this,"TPasToJSConverter",$lt50,function () {
    $lt43 = this;
    $lt44 = this.TMemberFunc = {"0": "mfInit", mfInit: 0, "1": "mfFinalize", mfFinalize: 1};
    rtl.recNewT(this,"TCreateRefPathData",function () {
      $lt45 = this;
      this.El = null;
      this.Full = false;
      this.Ref = null;
      this.$eq = function (b) {
        return (this.El === b.El) && (this.Full === b.Full) && (this.Ref === b.Ref);
      };
      this.$assign = function (s) {
        this.El = s.El;
        this.Full = s.Full;
        this.Ref = s.Ref;
        return this;
      };
    });
    this.pfVar = 1;
    this.pfConst = 2;
    this.pfOut = 4;
    this.pfArray = 8;
    this.pfStatic = 1;
    this.pfVarargs = 2;
    this.pfExternal = 4;
    this.pfSafeCall = 8;
    this.pfAsync = 0x10;
    this.pfGetFunction = 1;
    this.pfSetProcedure = 2;
    this.pfStoredTrue = 0;
    this.pfStoredFalse = 4;
    this.pfStoredField = 8;
    this.pfStoredFunction = 12;
    this.pfHasIndex = 16;
    this.pfClassProperty = 32;
    $lt46 = this.TMethodKind = {"0": "mkProcedure", mkProcedure: 0, "1": "mkFunction", mkFunction: 1, "2": "mkConstructor", mkConstructor: 2, "3": "mkDestructor", mkDestructor: 3, "4": "mkClassProcedure", mkClassProcedure: 4, "5": "mkClassFunction", mkClassFunction: 5};
    $lt47 = this.TOrdType = {"0": "otSByte", otSByte: 0, "1": "otUByte", otUByte: 1, "2": "otSWord", otSWord: 2, "3": "otUWord", otUWord: 3, "4": "otSLong", otSLong: 4, "5": "otULong", otULong: 5, "6": "otSIntDouble", otSIntDouble: 6, "7": "otUIntDouble", otUIntDouble: 7};
    this.pas2js_vtInteger = 0;
    this.pas2js_vtBoolean = 1;
    this.pas2js_vtExtended = 3;
    this.pas2js_vtPointer = 5;
    this.pas2js_vtObject = 7;
    this.pas2js_vtClass = 8;
    this.pas2js_vtWideChar = 9;
    this.pas2js_vtCurrency = 12;
    this.pas2js_vtInterface = 14;
    this.pas2js_vtUnicodeString = 18;
    this.pas2js_vtNativeInt = 19;
    this.pas2js_vtJSValue = 20;
    this.$init = function () {
      $lt50.$init.call(this);
      this.FGlobals = null;
      this.FOnIsElementUsed = null;
      this.FOnIsTypeInfoUsed = null;
      this.FOptions = {};
      this.FReservedWords = [];
    };
    this.$final = function () {
      this.FGlobals = undefined;
      this.FOnIsElementUsed = undefined;
      this.FOnIsTypeInfoUsed = undefined;
      this.FOptions = undefined;
      this.FReservedWords = undefined;
      $lt50.$final.call(this);
    };
    this.GetUseEnumNumbers = function () {
      var Result = false;
      Result = 2 in this.FOptions;
      return Result;
    };
    this.GetUseLowerCase = function () {
      var Result = false;
      Result = 0 in this.FOptions;
      return Result;
    };
    this.GetUseSwitchStatement = function () {
      var Result = false;
      Result = 1 in this.FOptions;
      return Result;
    };
    this.GetBIName = function (bin) {
      var Result = "";
      Result = this.FGlobals.BuiltInNames[bin];
      return Result;
    };
    this.AddGlobalClassMethod = function (aContext, P) {
      var RootContext = null;
      RootContext = aContext.GetRootContext();
      if (!$lt32.isPrototypeOf(RootContext)) this.DoError(20190226232141,RootContext.$classname);
      RootContext.AddGlobalClassMethod(P);
    };
    this.CreatePrimitiveDotExpr = function (Path, PosEl) {
      var Result = null;
      var p = 0;
      var DotExpr = null;
      var Ident = null;
      if (Path === "") this.RaiseInconsistency(20170402230134,PosEl);
      p = $mod.PosLast(".",Path);
      if (p > 0) {
        if (PosEl !== null) {
          DotExpr = this.CreateElement($lt124,PosEl)}
         else DotExpr = $lt124.$create("Create$1",[0,0,""]);
        DotExpr.FName = $lp4(Path,p + 1,Path.length);
        DotExpr.FMExpr = this.CreatePrimitiveDotExpr($lp3(Path,p - 1),PosEl);
        Result = DotExpr;
      } else {
        if (PosEl !== null) {
          Ident = this.CreateElement($lt125,PosEl)}
         else Ident = $lt125.$create("Create$1",[0,0,""]);
        Ident.FName = Path;
        Result = Ident;
      };
      return Result;
    };
    this.CreateSubDeclJSNameExpr = function (El, JSName, AContext, PosEl) {
      var Result = null;
      var C = null;
      var VarKinds = {};
      var ParentName = "";
      C = El.$class.ClassType();
      if (C.InheritsFrom($lt76) || (C === $lt75)) {
        VarKinds = rtl.createSet(1)}
       else if (C.InheritsFrom($lt80)) {
        VarKinds = rtl.createSet(2);
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(4,5),El.VarModifiers),{})) {
          VarKinds = rtl.createSet(1)}
         else if ($lt73.isPrototypeOf(El.FParent)) {
          VarKinds = rtl.createSet(2)}
         else VarKinds = rtl.createSet(1);
      } else if ($lt77.isPrototypeOf(El.FParent)) {
        VarKinds = {}}
       else VarKinds = rtl.createSet(1);
      if (rtl.neSet(VarKinds,{})) {
        ParentName = this.GetLocalName(El.FParent,VarKinds,AContext);
        if (ParentName === "") ParentName = "this";
        if (JSName.charAt(0) === "[") {
          JSName = ParentName + JSName}
         else JSName = ParentName + "." + JSName;
      };
      Result = this.CreatePrimitiveDotExpr(JSName,PosEl);
      return Result;
    };
    this.CreateSubDeclPasNameExpr = function (El, PasName, AContext, PosEl) {
      var Result = null;
      var JSName = "";
      JSName = this.TransformToJSName(El,PasName,false,AContext);
      Result = this.CreateSubDeclJSNameExpr(El,JSName,AContext,PosEl);
      return Result;
    };
    this.CreateSubDeclNameExpr = function (El, AContext, PosEl) {
      var Result = null;
      var JSName = "";
      JSName = this.TransformElToJSName(El,AContext);
      Result = this.CreateSubDeclJSNameExpr(El,JSName,AContext,PosEl);
      return Result;
    };
    this.CreateIdentifierExpr = function (El, AContext) {
      var Result = null;
      Result = this.CreatePrimitiveDotExpr(this.TransformElToJSName(El,AContext),El);
      return Result;
    };
    this.CreateIdentifierExpr$1 = function (AName, CheckGlobal, PosEl, AContext) {
      var Result = null;
      Result = this.CreatePrimitiveDotExpr(this.TransformToJSName(PosEl,AName,CheckGlobal,AContext),PosEl);
      return Result;
    };
    this.CreateSwitchStatement = function (El, AContext) {
      var Result = null;
      var SwitchEl = null;
      var JSCaseEl = null;
      var SubEl = null;
      var St = null;
      var ok = false;
      var i = 0;
      var j = 0;
      var BreakSt = null;
      var BodySt = null;
      var StList = null;
      var Expr = null;
      Result = null;
      SwitchEl = this.CreateElement($lt126,El);
      ok = false;
      try {
        SwitchEl.FCond = this.ConvertExpression(El.CaseExpr,AContext);
        for (var $l = 0, $end = El.Elements.FCount - 1; $l <= $end; $l++) {
          i = $l;
          SubEl = rtl.getObject(El.Elements.Get(i));
          if (!$lt127.isPrototypeOf(SubEl)) continue;
          St = SubEl;
          JSCaseEl = null;
          for (var $l1 = 0, $end1 = St.Expressions.FCount - 1; $l1 <= $end1; $l1++) {
            j = $l1;
            Expr = rtl.getObject(St.Expressions.Get(j));
            JSCaseEl = SwitchEl.FCases.AddCase();
            JSCaseEl.FExpr = this.ConvertExpression(Expr,AContext);
          };
          BodySt = null;
          if (St.Body !== null) BodySt = this.ConvertElement(St.Body,AContext);
          BreakSt = this.CreateElement($lt128,St);
          if (BodySt === null) {
            BodySt = BreakSt}
           else {
            if ($lt129.isPrototypeOf(BodySt)) {
              StList = BodySt;
              this.AddToStatementList({get: function () {
                  return BodySt;
                }, set: function (v) {
                  BodySt = v;
                }},{get: function () {
                  return StList;
                }, set: function (v) {
                  StList = v;
                }},BreakSt,St);
            } else {
              StList = this.CreateElement($lt129,St);
              StList.FA = BodySt;
              StList.FB = BreakSt;
              BodySt = StList;
            };
          };
          JSCaseEl.FBody = BodySt;
        };
        if (El.ElseBranch !== null) {
          JSCaseEl = SwitchEl.FCases.AddCase();
          JSCaseEl.FBody = this.ConvertImplBlockElements(El.ElseBranch,AContext,false);
          SwitchEl.FDefault = JSCaseEl;
        };
        ok = true;
      } finally {
        if (!ok) SwitchEl = rtl.freeLoc(SwitchEl);
      };
      Result = SwitchEl;
      return Result;
    };
    this.CreateTypeDecl = function (El, AContext) {
      var Result = null;
      var C = null;
      var GlobalCtx = null;
      Result = null;
      GlobalCtx = AContext;
      if ($lt77.isPrototypeOf(El.FParent)) GlobalCtx = AContext.GetGlobalFunc();
      C = El.$class.ClassType();
      if (C === $lt72) {
        Result = this.ConvertClassType(El,GlobalCtx)}
       else if (C === $lt112) {
        Result = this.ConvertClassOfType(El,GlobalCtx)}
       else if (C === $lt81) {
        Result = this.ConvertRecordType(El,GlobalCtx)}
       else if (C === $lt99) {
        Result = this.ConvertEnumType(El,GlobalCtx)}
       else if (C === $lt117) {
        Result = this.ConvertSetType(El,GlobalCtx)}
       else if (C === $lt101) {
        Result = this.ConvertRangeType(El,GlobalCtx)}
       else if (C === $lt130) {}
      else if (C === $lt131) {
        Result = this.ConvertTypeAliasType(El,GlobalCtx)}
       else if (C === $lt95) {
        Result = this.ConvertPointerType(El,GlobalCtx)}
       else if ((C === $lt118) || (C === $lt93)) {
        Result = this.ConvertProcedureType(El,GlobalCtx)}
       else if (C === $lt107) {
        Result = this.ConvertArrayType(El,GlobalCtx)}
       else if (C === $lt120) {}
      else {
        this.RaiseNotSupported(El,AContext,20170208144053,"");
      };
      return Result;
    };
    this.CreateVarDecl = function (El, AContext) {
      var Result = null;
      var C = null;
      var V = null;
      var AssignSt = null;
      var Obj = null;
      var ObjLit = null;
      Result = null;
      if (El.AbsoluteExpr !== null) return Result;
      if (1 in El.VarModifiers) return Result;
      if ($lt35.isPrototypeOf(AContext)) {
        Obj = rtl.as(AContext.JSElement,$lt132);
        ObjLit = Obj.FElements.AddElement();
        ObjLit.FName = this.TransformElToJSName(El,AContext);
        ObjLit.FExpr = this.CreateVarInit(El,AContext);
      } else if (AContext.IsGlobal || $lt73.isPrototypeOf(El.FParent)) {
        AssignSt = this.CreateElement($lt133,El);
        Result = AssignSt;
        AssignSt.FLHS = this.CreateSubDeclNameExpr(El,AContext,null);
        AssignSt.FExpr = this.CreateVarInit(El,AContext);
      } else {
        C = this.ConvertVariable(El,AContext);
        if (C === null) this.RaiseInconsistency(20180501114300,El);
        V = this.CreateElement($lt134,El);
        V.FA = C;
        Result = V;
      };
      return Result;
    };
    this.AddToSourceElements = function (Src, El) {
      var List = null;
      var AddEl = null;
      while (El !== null) {
        if ($lt129.isPrototypeOf(El)) {
          List = rtl.as(El,$lt129);
          AddEl = List.FA;
          El = List.FB;
          List.FA = null;
          List.FB = null;
          $lp({get: function () {
              return List;
            }, set: function (v) {
              List = v;
            }});
        } else {
          AddEl = El;
          El = null;
        };
        Src.FStatements.AddNode(false,false).FNode = AddEl;
      };
    };
    this.RemoveFromSourceElements = function (Src, El) {
      var Statements = null;
      var i = 0;
      Statements = Src.FStatements;
      for (var $l = Statements.GetCount() - 1; $l >= 0; $l--) {
        i = $l;
        if (Statements.GetN(i).FNode === El) Statements.Delete(i);
      };
    };
    this.SetGlobals = function (AValue) {
      if (this.FGlobals === AValue) return;
      if ((this.FGlobals !== null) && (this.FGlobals.FOwner === this)) $lp({p: this, get: function () {
          return this.p.FGlobals;
        }, set: function (v) {
          this.p.FGlobals = v;
        }});
      this.FGlobals = AValue;
    };
    this.OnCreateReferencePathExpr = function (El, AContext, CreateRefPathData) {
      var Result = null;
      Result = this.CreateReferencePathExpr(CreateRefPathData.El,AContext,CreateRefPathData.Full,CreateRefPathData.Ref);
      if (El === null) ;
      return Result;
    };
    this.DoError = function (Id, Msg) {
      var E = null;
      E = $lt1.$create("Create$1",[Msg]);
      E.Id = Id;
      E.MsgType = 1;
      throw E;
    };
    this.DoError$2 = function (Id, MsgNumber, MsgPattern, Args, El) {
      var E = null;
      E = $lt1.$create("CreateFmt",[MsgPattern,Args]);
      E.PasElement = El;
      E.MsgNumber = MsgNumber;
      E.Id = Id;
      E.MsgType = 1;
      $lp27({p: E, get: function () {
          return this.p.Args;
        }, set: function (v) {
          this.p.Args = v;
        }},Args);
      throw E;
    };
    this.RaiseNotSupported = function (El, AContext, Id, Msg) {
      var E = null;
      if (AContext === null) ;
      E = $lt1.$create("CreateFmt",[rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,$lp16(El) + " [" + $lp2(Id) + "]")]);
      if (Msg !== "") E.fMessage = E.fMessage + ": " + Msg;
      E.PasElement = El;
      E.MsgNumber = 4001;
      E.Args = rtl.arraySetLength(E.Args,"",1);
      E.Args[0] = El.$classname;
      E.Id = Id;
      E.MsgType = 1;
      throw E;
    };
    this.RaiseIdentifierNotFound = function (Identifier, El, Id) {
      var E = null;
      E = $lt1.$create("CreateFmt",[rtl.getResStr($lm6,"sIdentifierNotFound"),$lp6(18,Identifier)]);
      E.PasElement = El;
      E.MsgNumber = 3001;
      E.Args = rtl.arraySetLength(E.Args,"",1);
      E.Args[0] = Identifier;
      E.Id = Id;
      E.MsgType = 1;
      throw E;
    };
    this.RaiseInconsistency = function (Id, El) {
      var s = "";
      s = "TPasToJSConverter.RaiseInconsistency[" + $lp2(Id) + "]: you found a bug";
      if (El !== null) {
        s = s + $lp15(El);
        if (El.FName !== "") {
          s = s + El.FName}
         else s = s + $lp19(El);
        s = s + " at " + $lt25.GetDbgSourcePosStr(El);
      };
      throw $lt48.$create("Create$1",[s]);
    };
    this.GetExpressionValueType = function (El, AContext) {
      var $Self = this;
      var Result = 0;
      function CombineValueType(A, B) {
        var Result = 0;
        if (A === 0) {
          Result = B}
         else if (B === 0) {
          Result = A}
         else Result = A;
        return Result;
      };
      var A = 0;
      var B = 0;
      if ($lt135.isPrototypeOf(El)) {
        Result = 2}
       else if ($lt91.isPrototypeOf(El)) {
        var $tmp = El.Kind;
        if ($tmp === 0) {
          Result = this.GetPasIdentValueType(El.FName,AContext)}
         else if ($tmp === 1) {
          Result = 3}
         else if (($tmp === 2) || ($tmp === 3)) {
          Result = 4}
         else if ($tmp === 4) {
          Result = 0}
         else if ($tmp === 5) {
          Result = 1}
         else if ($tmp === 6) {
          Result = 2}
         else if ($tmp === 7) {
          Result = 0}
         else if ($tmp === 10) {
          Result = 0}
         else if ($tmp === 11) {
          Result = 0}
         else if ($tmp === 12) {
          Result = 0}
         else if ($tmp === 13) {
          Result = 0}
         else if ($tmp === 14) Result = 5;
      } else if ($lt136.isPrototypeOf(El)) {
        Result = this.GetExpressionValueType(El.Operand,AContext)}
       else if ($lt85.isPrototypeOf(El)) {
        A = this.GetExpressionValueType(El.Left,AContext);
        B = this.GetExpressionValueType(El.Right,AContext);
        Result = CombineValueType(A,B);
      } else Result = 0;
      return Result;
    };
    this.GetPasIdentValueType = function (AName, AContext) {
      var Result = 0;
      if (AContext === null) ;
      if (AName === "") ;
      Result = 0;
      return Result;
    };
    this.ComputeConstString = function (Expr, AContext, NotEmpty) {
      var Result = "";
      var Prim = null;
      if (AContext.Resolver !== null) {
        Result = AContext.Resolver.ComputeConstString(Expr,false,NotEmpty)}
       else {
        Result = "";
        if ($lt91.isPrototypeOf(Expr)) {
          Prim = Expr;
          var $tmp = Prim.Kind;
          if ($tmp === 2) {
            Result = Prim.Value;
            Result = $lp28(Result,"'");
          } else {
            this.RaiseNotSupported(Prim,AContext,20170215124733,"");
          };
        } else this.RaiseNotSupported(Expr,AContext,20170322121331,"");
      };
      return Result;
    };
    this.IsLiteralInteger = function (El, number) {
      var Result = false;
      var Value = null;
      Result = false;
      if (!$lt137.isPrototypeOf(El)) return Result;
      Value = El.FValue;
      if (Value.FValueType === 3) try {
        number.set(Math.round(Value.GetAsNumber()));
        if (number.get() === Value.GetAsNumber()) return true;
      } catch ($e) {
      };
      return Result;
    };
    this.IsLiteralNull = function (El) {
      var Result = false;
      Result = $lt137.isPrototypeOf(El) && El.FValue.GetIsNull();
      return Result;
    };
    this.GetOverloadName = function (El, AContext) {
      var Result = "";
      if (AContext.Resolver !== null) {
        Result = AContext.Resolver.GetOverloadName(El)}
       else Result = El.FName;
      return Result;
    };
    this.CanClashWithGlobal = function (El) {
      var Result = false;
      var C = null;
      C = El.$class.ClassType();
      if (C === $lt89) {
        Result = true}
       else if ($lt77.isPrototypeOf(El.FParent)) {
        Result = true}
       else if ($lt104.isPrototypeOf(El.FParent)) {
        Result = true}
       else Result = false;
      return Result;
    };
    this.TransformToJSName = function (ErrorEl, AName, CheckGlobal, AContext) {
      var Result = "";
      var i = 0;
      var c = "\x00";
      if (AContext === null) ;
      if ($lp29(".",AName) > 0) this.RaiseInconsistency(20170203164711,ErrorEl);
      if (this.GetUseLowerCase()) {
        Result = $lp1(AName)}
       else Result = AName;
      if (!this.IsReservedWord(Result,CheckGlobal)) return Result;
      for (var $l = 1, $end = Result.length; $l <= $end; $l++) {
        i = $l;
        c = Result.charAt(i - 1);
        var $tmp = c;
        if ((($tmp >= "a") && ($tmp <= "z")) || (($tmp >= "A") && ($tmp <= "Z"))) {
          Result = rtl.setCharAt(Result,i - 1,String.fromCharCode(c.charCodeAt() ^ 32));
          if (!this.IsReservedWord(Result,CheckGlobal)) return Result;
        };
      };
      this.RaiseNotSupported(ErrorEl,AContext,20170203131832,"");
      return Result;
    };
    this.TransformElToJSName = function (El, AContext) {
      var Result = "";
      var aType = null;
      if ($lt67.isPrototypeOf(El) && (El.LibrarySymbolName !== null)) {
        Result = this.ComputeConstString(El.LibrarySymbolName,AContext,true)}
       else if ($lt80.isPrototypeOf(El) && (El.ExportName !== null)) {
        Result = this.ComputeConstString(El.ExportName,AContext,true)}
       else if ($lt76.isPrototypeOf(El)) {
        if (AContext.Resolver !== null) {
          aType = AContext.Resolver.ResolveAliasType(El,true)}
         else aType = El;
        if ((aType.$class.ClassType() === $lt72) && aType.IsExternal) {
          Result = aType.ExternalName}
         else Result = this.TransformToJSName(El,this.GetOverloadName(aType,AContext),this.CanClashWithGlobal(aType),AContext);
      } else Result = this.TransformToJSName(El,this.GetOverloadName(El,AContext),this.CanClashWithGlobal(El),AContext);
      return Result;
    };
    this.TransformModuleName = function (El, AddModulesPrefix, AContext) {
      var Result = "";
      var p = 0;
      var StartP = 0;
      var aName = "";
      var Part = "";
      if (AddModulesPrefix) {
        Result = this.GetLocalName(El,rtl.createSet(1),AContext);
        if (Result !== "") return Result;
      };
      if (El.$class.ClassType() === $lt97) {
        Result = this.GetBIName(141)}
       else if (El.$class.ClassType() === $lt98) {
        Result = this.GetBIName(128)}
       else {
        Result = "";
        aName = El.FName;
        p = 1;
        while (p <= aName.length) {
          StartP = p;
          while ((p <= aName.length) && (aName.charAt(p - 1) !== ".")) p += 1;
          Part = $lp4(aName,StartP,p - StartP);
          Part = this.TransformToJSName(El,Part,false,AContext);
          if (Result !== "") Result = Result + ".";
          Result = Result + Part;
          p += 1;
        };
      };
      if (AddModulesPrefix) {
        if ($lp29(".",Result) > 0) {
          Result = this.GetBIName(137) + '["' + Result + '"]'}
         else Result = this.GetBIName(137) + "." + Result;
        if (10 in this.FOptions) Result = this.CreateGlobalAliasForeign(El,Result,AContext);
      };
      return Result;
    };
    this.IsReservedWord = function (aName, CheckGlobal) {
      var Result = false;
      var l = 0;
      var r = 0;
      var m = 0;
      var cmp = 0;
      Result = true;
      if (aName === this.GetBIName(137)) return Result;
      if (aName === this.GetBIName(144)) return Result;
      l = 0;
      r = 59;
      while (l <= r) {
        m = rtl.trunc((l + r) / 2);
        cmp = $lp30(aName,$mod.JSReservedWords[m]);
        if (cmp > 0) {
          l = m + 1}
         else if (cmp < 0) {
          r = m - 1}
         else return Result;
      };
      l = 0;
      r = rtl.length(this.FReservedWords) - 1;
      while (l <= r) {
        m = rtl.trunc((l + r) / 2);
        cmp = $lp30(aName,this.FReservedWords[m]);
        if (cmp > 0) {
          l = m + 1}
         else if (cmp < 0) {
          r = m - 1}
         else return Result;
      };
      if (CheckGlobal) {
        l = 0;
        r = 52;
        while (l <= r) {
          m = rtl.trunc((l + r) / 2);
          cmp = $lp30(aName,$mod.JSReservedGlobalWords[m]);
          if (cmp > 0) {
            l = m + 1}
           else if (cmp < 0) {
            r = m - 1}
           else return Result;
        };
      };
      Result = false;
      return Result;
    };
    this.GetTypeInfoName = function (El, AContext, ErrorEl, Full) {
      var Result = "";
      var C = null;
      var bt = 0;
      var jbt = 0;
      var CurEl = null;
      var aName = "";
      Result = "";
      El = $lp31(El);
      if (El === null) this.RaiseInconsistency(20170409172756,El);
      C = El.$class.ClassType();
      if (C === $lt120) {
        if (!$lt138.isPrototypeOf(El.FData)) this.RaiseInconsistency(20200220113319,El);
        El = El.FData.SpecializedType;
        C = El.$class.ClassType();
      };
      if ((El === AContext.PasElement) && !Full) {
        if ($lt73.isPrototypeOf(El)) {
          Result = this.GetBIName(153);
          return Result;
        } else this.RaiseNotSupported(ErrorEl,AContext,20170905150746,"cannot typeinfo itself");
      };
      if (C === $lt100) {
        if (El.FName === "") this.DoError$2(20170905150752,4021,rtl.getResStr($mod,"sTypeXCannotBePublished"),$lp6(18,"typeinfo of anonymous " + El.ElementTypeName()),ErrorEl);
        if ($lt65.isPrototypeOf(El.FData)) {
          bt = El.FData.BaseType;
          var $tmp = bt;
          if ($tmp === 6) {
            bt = 5}
           else if ($tmp === 9) {
            bt = 7}
           else if ($tmp === 14) bt = 28;
          var $tmp1 = bt;
          if (($tmp1 === 20) || ($tmp1 === 19) || ($tmp1 === 22) || ($tmp1 === 21) || ($tmp1 === 26) || ($tmp1 === 25) || ($tmp1 === 28) || ($tmp1 === 27) || ($tmp1 === 7) || ($tmp1 === 5) || ($tmp1 === 11) || ($tmp1 === 15) || ($tmp1 === 29)) {
            Result = this.GetBIName(144) + "." + $lp1(AContext.Resolver.GetBaseTypeNames(bt));
            return Result;
          } else if ($tmp1 === 1) if ($lt21.isPrototypeOf(El.FData)) {
            jbt = El.FData.JSBaseType;
            var $tmp2 = jbt;
            if ($tmp2 === 1) {
              Result = this.GetBIName(144) + "." + $lp1($mod.Pas2jsBaseTypeNames[jbt]);
              return Result;
            };
          };
        };
      } else if ((C === $lt99) || (C === $lt117) || (C === $lt72) || (C === $lt112) || (C === $lt107) || (C === $lt118) || (C === $lt93) || (C === $lt95) || (C === $lt131) || (C === $lt81) || (C === $lt101)) {
        CurEl = $lp31(El);
        do {
          if (CurEl.FName !== "") {
            Result = CurEl.FName + Result;
          } else {
            Result = this.GetBIName(170) + Result;
          };
          CurEl = CurEl.FParent;
          if (CurEl === null) break;
          C = CurEl.$class.ClassType();
          if ((C === $lt72) || (C === $lt81)) {
            Result = "." + Result}
           else if (C.InheritsFrom($lt76) || (C === $lt80) || (C === $lt75) || (C === $lt89) || (C === $lt74)) {}
          else break;
        } while (!false);
        if ($lt105.isPrototypeOf(CurEl)) return Result;
      };
      aName = El.FName;
      if (aName === "") aName = El.$classname;
      this.DoError$2(20170409173329,4021,rtl.getResStr($mod,"sTypeXCannotBePublished"),$lp6(18,aName),ErrorEl);
      return Result;
    };
    this.TransformArgName = function (Arg, AContext) {
      var Result = "";
      Result = Arg.FName;
      if (($lp13(Result,"Self") === 0) && $lt67.isPrototypeOf(Arg.FParent)) {
        Result = AContext.GetLocalName(Arg,$mod.cvkAll);
        if (Result === "") {
          this.RaiseNotSupported(Arg,AContext,20190205190114,$lp16(Arg.FParent));
        };
      } else Result = this.TransformToJSName(Arg,Result,true,AContext);
      return Result;
    };
    this.CreateGlobalAliasForeign = function (El, JSPath, AContext) {
      var Result = "";
      var ElModule = null;
      var MyModule = null;
      var aResolver = null;
      var SectionContext = null;
      var FuncContext = null;
      var Expr = null;
      var V = null;
      var AssignSt = null;
      var ElClass = null;
      Result = JSPath;
      if ($lt100.isPrototypeOf(El)) return Result;
      ElModule = El.GetModule();
      aResolver = AContext.Resolver;
      MyModule = aResolver.FRootElement;
      if (ElModule === MyModule) {
        return Result;
      } else {
        SectionContext = AContext.GetMainSectionContext();
        FuncContext = AContext.GetFunctionContext();
        ElClass = El.$class.ClassType();
        if (ElClass.InheritsFrom($lt76)) {
          Result = this.GetBIName(132)}
         else if (ElClass.InheritsFrom($lt67)) {
          Result = this.GetBIName(131)}
         else if (ElClass === $lt139) {
          Result = this.GetBIName(132)}
         else if (ElClass.InheritsFrom($lt96)) {
          Result = this.GetBIName(130)}
         else this.RaiseNotSupported(El,AContext,20200608160225,"");
        Result = FuncContext.CreateLocalIdentifier(Result,El,1);
        SectionContext.AddLocalVar(Result,El,1,true);
        if (6 in this.FOptions) this.StoreImplJSLocal(El,AContext);
        if (aResolver.ImplementationUsesUnit(ElModule,true)) {
          Expr = this.CreateLiteralNull(El);
          V = this.CreateVarStatement(Result,Expr,El);
          this.AddHeaderStatement(V,El,SectionContext);
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = this.CreatePrimitiveDotExpr(Result,El);
          AssignSt.FExpr = this.CreatePrimitiveDotExpr(JSPath,El);
          this.AddImplHeaderStatement(AssignSt,El,AContext);
        } else {
          Expr = this.CreatePrimitiveDotExpr(JSPath,El);
          V = this.CreateVarStatement(Result,Expr,El);
          this.AddHeaderStatement(V,El,SectionContext);
        };
      };
      return Result;
    };
    this.CreateGlobalAliasNull = function (El, Prefix, SectionContext) {
      var Result = null;
      var V = null;
      Result = SectionContext.AddLocalVar(this.GetBIName(Prefix),El,1,true);
      V = this.CreateVarStatement(Result.Name,this.CreateLiteralNull(El),El);
      this.AddHeaderStatement(V,El,SectionContext);
      return Result;
    };
    this.CreateGlobalAlias_List = function (ElRefList, AContext) {
      var i = 0;
      var SectionContext = null;
      var El = null;
      if (ElRefList === null) return;
      if (ElRefList.FCount === 0) return;
      SectionContext = AContext.GetMainSectionContext();
      for (var $l = 0, $end = ElRefList.FCount - 1; $l <= $end; $l++) {
        i = $l;
        El = rtl.getObject(ElRefList.Get(i));
        this.CreateGlobalElPath(El,SectionContext);
      };
    };
    this.IsElementUsed = function (El) {
      var Result = false;
      if (this.FOnIsElementUsed != null) {
        Result = this.FOnIsElementUsed(this,El)}
       else Result = true;
      return Result;
    };
    this.IsSystemUnit = function (aModule) {
      var Result = false;
      Result = ($lp13(aModule.FName,"system") === 0) && (aModule.$class.ClassType() === $lt96);
      return Result;
    };
    this.HasTypeInfo = function (El, AContext) {
      var Result = false;
      Result = false;
      if (4 in this.FOptions) return Result;
      if (AContext.Resolver === null) return Result;
      if (!AContext.Resolver.HasTypeInfo(El)) return Result;
      if ((this.FOnIsTypeInfoUsed != null) && !this.FOnIsTypeInfoUsed(this,El)) return Result;
      Result = true;
      return Result;
    };
    this.IsClassRTTICreatedBefore = function (aClass, Before, AConText) {
      var Result = false;
      var Decls = null;
      var i = 0;
      var List = null;
      var C = null;
      var aParent = null;
      var Decl = null;
      Result = false;
      aParent = aClass.FParent;
      if (aParent !== Before.FParent) return true;
      if (!aParent.$class.InheritsFrom($lt140)) this.RaiseInconsistency(20170412101457,aClass);
      Decls = aParent;
      List = Decls.Declarations;
      for (var $l = 0, $end = List.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Decl = rtl.getObject(List.Get(i));
        if (Decl === Before) return Result;
        if (Decl === aClass) return true;
        C = Decl.$class.ClassType();
        if (C === $lt72) {
          if (Decl.IsForward && $lt71.isPrototypeOf(Decl.FData) && (Decl.FData.FDeclaration === aClass)) return true;
        } else if (C === $lt112) {
          if (AConText.Resolver.ResolveAliasType(Decl.DestType,true) === aClass) return true;
        };
      };
      return Result;
    };
    this.IsExprTemporaryVar = function (Expr) {
      var Result = false;
      var Params = null;
      var Ref = null;
      var C = null;
      if ($lt71.isPrototypeOf(Expr.FData)) {
        Ref = Expr.FData;
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,1),Ref.Flags),{})) return true;
      };
      C = Expr.$class.ClassType();
      if (C === $lt86) {
        Params = Expr;
        if (Params.Kind === 10) return true;
      } else if (C.InheritsFrom($lt85)) return true;
      Result = false;
      return Result;
    };
    this.IsExprPropertySetterConst = function (Expr, AContext) {
      var Result = false;
      var Bin = null;
      var Ref = null;
      var Prop = null;
      var Setter = null;
      var Arg = null;
      var Args = null;
      if ($lt85.isPrototypeOf(Expr)) {
        Bin = Expr;
        if (Bin.OpCode === 27) Expr = Bin.Right;
      };
      if ($lt71.isPrototypeOf(Expr.FData)) {
        Ref = Expr.FData;
        if ($lt74.isPrototypeOf(Ref.FDeclaration)) {
          Prop = Ref.FDeclaration;
          Setter = AContext.Resolver.GetPasPropertySetter(Prop);
          if ($lt67.isPrototypeOf(Setter)) {
            Args = Setter.ProcType.Args;
            if (Args.FCount > 0) {
              Arg = rtl.getObject(Args.Get(Args.FCount - 1));
              if ($lt89.isPrototypeOf(Arg) && (Arg.Access in rtl.createSet(1,4))) return true;
            };
          };
        };
      };
      Result = false;
      return Result;
    };
    this.FindAvailableLocalName = function (aName, JSExpr) {
      var $Self = this;
      var StartJSName = "";
      var JSName = "";
      var n = 0;
      var Changed = false;
      function Next() {
        var ch = "\x00";
        Changed = true;
        if ((n === 0) && (JSName.length === 1)) {
          ch = JSName.charAt(0);
          var $tmp = ch;
          if (($tmp >= "a") && ($tmp <= "x")) {
            JSName = String.fromCharCode(ch.charCodeAt() + 1)}
           else if ($tmp === "z") JSName = "a";
          if (JSName === StartJSName) {
            n = 1;
            JSName = StartJSName + $lp2(n);
          };
        } else {
          n += 1;
          JSName = StartJSName + $lp2(n);
        };
      };
      function Find(El) {
        var C = null;
        var Call = null;
        var i = 0;
        if (El === null) return;
        C = El.$class.ClassType();
        if (C === $lt125) {
          if (El.FName === JSName) Next();
        } else if (C.InheritsFrom($lt141)) {
          Find(El.FMExpr);
          if (C === $lt142) {
            Find(El.FName)}
           else if (C === $lt143) {
            var $with = El.FArgs.FElements;
            for (var $l = 0, $end = $with.GetCount() - 1; $l <= $end; $l++) {
              i = $l;
              Find($with.GetE(i).FExpr);
            };
          };
        } else if (C === $lt144) {
          Call = El;
          Find(Call.FExpr);
          if (Call.FArgs !== null) {
            var $with1 = Call.FArgs.FElements;
            for (var $l1 = 0, $end1 = $with1.GetCount() - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              Find($with1.GetE(i).FExpr);
            };
          };
        } else if (C.InheritsFrom($lt145)) {
          Find(El.FA)}
         else if (C.InheritsFrom($lt146)) {
          Find(El.FA);
          Find(El.FB);
        } else if (C === $lt147) {
          var $with2 = El.FElements;
          for (var $l2 = 0, $end2 = $with2.GetCount() - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            Find($with2.GetE(i).FExpr);
          };
        } else if (C === $lt148) {
          Find(El.FA);
          Find(El.FB);
          Find(El.FC);
        } else if (C.InheritsFrom($lt149)) {
          Find(El.FLHS);
          Find(El.FExpr);
        } else if (C === $lt150) {
          Find(El.FInit)}
         else if (C === $lt132) {
          var $with3 = El.FElements;
          for (var $l3 = 0, $end3 = $with3.GetCount() - 1; $l3 <= $end3; $l3++) {
            i = $l3;
            Find($with3.GetE(i).FExpr);
          };
        } else if (C === $lt151) {
          Find(El.FCond);
          Find(El.FBTrue);
          Find(El.FBFalse);
        } else if (C.InheritsFrom($lt152)) {
          Find(El.FBody);
          if (C.InheritsFrom($lt153)) {
            Find(El.FCond);
            if (C === $lt154) {
              Find(El.FInit);
              Find(El.FIncr);
            };
          } else if (C === $lt155) {
            Find(El.FLhs);
            Find(El.FList);
          };
        } else if (C === $lt126) {
          Find(El.FCond);
          var $with4 = El.FCases;
          for (var $l4 = 0, $end4 = $with4.GetCount() - 1; $l4 <= $end4; $l4++) {
            i = $l4;
            var $with5 = $with4.GetC(i);
            Find($with5.FExpr);
            Find($with5.FBody);
          };
          if (El.FDefault !== null) {
            var $with6 = El.FDefault;
            Find($with6.FExpr);
            Find($with6.FBody);
          };
        };
      };
      if (JSExpr === null) return;
      StartJSName = aName.get();
      JSName = StartJSName;
      n = 0;
      Changed = false;
      Find(JSExpr);
      if (!Changed) return;
      do {
        Changed = false;
        Find(JSExpr);
      } while (Changed);
      aName.set($lp32(JSName));
    };
    this.GetImplJSProcScope = function (El, Src, AContext) {
      var Result = null;
      if ((Src === null) || !(6 in this.FOptions) || (AContext.Resolver === null)) return null;
      Result = AContext.Resolver.GetTopLvlProcScope(El);
      return Result;
    };
    this.SpecializeNeedsDelay = function (El, AContext) {
      var Result = false;
      var SpecItem = null;
      var C = null;
      var Members = null;
      var ChildEl = null;
      var PasVar = null;
      var aResolver = null;
      var PasVarType = null;
      var IsRecord = false;
      var NeedInitFunction = false;
      var aClass = null;
      var ClassScope = null;
      var IntfKind = "";
      var i = 0;
      Result = false;
      aResolver = AContext.Resolver;
      if (aResolver === null) return Result;
      if (!$lt115.isPrototypeOf(El.FData)) return Result;
      SpecItem = El.FData.SpecializedFromItem;
      if (aResolver.SpecializeParamsNeedDelay(SpecItem) === null) return Result;
      if (this.HasTypeInfo(El,AContext)) return true;
      C = El.$class.ClassType();
      if (El.$class.InheritsFrom($lt73)) {
        IsRecord = C === $lt81;
        if (C === $lt72) {
          aClass = El;
          ClassScope = El.FData;
          if (aClass.ObjKind === 2) {
            IntfKind = "";
            if ((ClassScope.AncestorScope === null) && !(4 in this.FOptions)) {
              var $tmp = aClass.InterfaceType;
              if ($tmp === 0) {
                IntfKind = "com"}
               else if ($tmp === 1) {}
              else {
                this.RaiseNotSupported(El,AContext,20200905132130,"");
              };
            };
            NeedInitFunction = (2 in ClassScope.Flags) || (IntfKind !== "");
            if (!NeedInitFunction) return Result;
          };
        };
        Members = El.Members;
        for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          ChildEl = rtl.getObject(Members.Get(i));
          if (!this.IsElementUsed(ChildEl)) continue;
          if ($lt80.isPrototypeOf(ChildEl)) {
            PasVar = ChildEl;
            if (ChildEl.$class.ClassType() === $lt75) {}
            else if (ChildEl.$class.ClassType() === $lt80) {
              if (!IsRecord && rtl.eqSet(rtl.intersectSet(PasVar.VarModifiers,rtl.createSet(4,5)),{})) continue;
            } else continue;
            PasVarType = aResolver.ResolveAliasType(PasVar.VarType,true);
            if (PasVarType.$class.ClassType() === $lt81) {
              return true}
             else if ((PasVarType.$class.ClassType() === $lt107) && (rtl.length(PasVarType.Ranges) > 0)) return true;
          };
        };
      };
      return Result;
    };
    this.CreateElement = function (C, Src) {
      var Result = null;
      var Line = 0;
      var Col = 0;
      if (Src != null) {
        $lt69.UnmangleSourceLineNumber(Src.SourceLinenumber,{get: function () {
            return Line;
          }, set: function (v) {
            Line = v;
          }},{get: function () {
            return Col;
          }, set: function (v) {
            Col = v;
          }});
        Result = C.$create("Create$1",[Line,Col,Src.SourceFilename]);
      } else Result = C.$create("Create$1",[0,0,""]);
      return Result;
    };
    this.CreateFreeOrNewInstanceExpr = function (Ref, AContext) {
      var Result = null;
      var C = null;
      var SubCall = null;
      var Proc = null;
      var ProcScope = null;
      var ClassRecScope = null;
      var ClassOrRec = null;
      var ArgEx = null;
      var FunName = "";
      var ProcName = "";
      var DotExpr = null;
      Result = null;
      Proc = rtl.as(Ref.FDeclaration,$lt67);
      if (Proc.FName === "") this.RaiseInconsistency(20170125191914,Proc);
      ProcScope = rtl.as(Proc.FData,$lt60);
      ClassRecScope = ProcScope.ClassRecScope;
      ClassOrRec = ClassRecScope.FElement;
      if (ClassOrRec.FName === "") this.RaiseInconsistency(20170125191923,ClassOrRec);
      C = this.CreateCallExpression(Ref.FElement);
      try {
        ProcName = this.TransformElToJSName(Proc,AContext);
        if (ClassOrRec.$class.ClassType() === $lt81) {
          FunName = this.CreateReferencePath(Proc,AContext,1,false,Ref) + this.GetBIName(79);
          SubCall = this.CreateCallExpression(Ref.FElement);
          SubCall.FExpr = this.CreatePrimitiveDotExpr(FunName,Ref.FElement);
          DotExpr = this.CreateDotNameExpr(Ref.FElement,SubCall,ProcName);
          C.FExpr = DotExpr;
        } else {
          if (3 in Ref.Flags) {
            FunName = this.GetBIName(25)}
           else FunName = this.GetBIName(24);
          FunName = this.CreateReferencePath(Proc,AContext,1,false,Ref) + FunName;
          C.FExpr = this.CreatePrimitiveDotExpr(FunName,Ref.FElement);
          ArgEx = this.CreateLiteralString(Ref.FElement,ProcName);
          C.AddArg(ArgEx);
        };
        Result = C;
      } finally {
        if (Result === null) C = rtl.freeLoc(C);
      };
      return Result;
    };
    this.CreateFunctionSt = function (El, WithBody, WithSrc) {
      var Result = null;
      var FuncSt = null;
      FuncSt = this.CreateElement($lt156,El);
      Result = FuncSt;
      FuncSt.FFuncDef = this.CreateFunctionDef(El,WithBody,WithSrc);
      return Result;
    };
    this.CreateFunctionDef = function (El, WithBody, WithSrc) {
      var Result = null;
      Result = $lt157.$create("Create$1");
      if (WithBody) {
        Result.FBody = this.CreateElement($lt158,El);
        if (WithSrc) Result.FBody.FA = this.CreateElement($lt123,El);
      };
      return Result;
    };
    this.CreateProcedureCall = function (Call, Args, TargetProc, AContext) {
      if (Call.get() === null) Call.set(this.CreateElement($lt144,Args));
      if (((Args === null) || (rtl.length(Args.Params) === 0)) && ((TargetProc === null) || (TargetProc.Args.FCount === 0))) return;
      if (Call.get().FArgs === null) Call.get().FArgs = this.CreateElement($lt159,Args);
      this.CreateProcedureCallArgs(Call.get().FArgs.FElements,Args,TargetProc,AContext);
    };
    this.CreateProcedureCallArgs = function (Elements, Args, TargetProc, AContext) {
      var ArgContext = null;
      var i = 0;
      var Arg = null;
      var TargetArgs = null;
      var TargetArg = null;
      var OldAccess = 0;
      ArgContext = AContext.GetNonDotContext();
      i = 0;
      OldAccess = ArgContext.Access;
      if (TargetProc !== null) {
        TargetArgs = TargetProc.Args}
       else TargetArgs = null;
      if (Args !== null) while (i < rtl.length(Args.Params)) {
        if ((TargetArgs !== null) && (i < TargetArgs.FCount)) {
          TargetArg = rtl.getObject(TargetArgs.Get(i))}
         else TargetArg = null;
        Arg = this.CreateProcCallArg(Args.Params[i],TargetArg,ArgContext);
        Elements.AddElement().FExpr = Arg;
        i += 1;
      };
      if (TargetProc !== null) {
        while (i < TargetArgs.FCount) {
          TargetArg = rtl.getObject(TargetArgs.Get(i));
          if (TargetArg.ValueExpr === null) {
            if (Args === null) {
              this.RaiseNotSupported(TargetProc,AContext,20201028203457,"")}
             else this.RaiseNotSupported(Args,AContext,20170201193601,"");
          };
          AContext.Access = 0;
          Arg = this.ConvertExpression(TargetArg.ValueExpr,ArgContext);
          Elements.AddElement().FExpr = Arg;
          i += 1;
        };
      };
      ArgContext.Access = OldAccess;
    };
    this.CreateProcCallArg = function (El, TargetArg, AContext) {
      var $Self = this;
      var Result = null;
      var ExprIsTemp = false;
      var ExprIsTempValid = false;
      var ExprResolved = $lt84.$new();
      var ArgResolved = $lt84.$new();
      function ExprIsTemporaryVar() {
        var Result = false;
        if (!ExprIsTempValid) {
          ExprIsTempValid = true;
          ExprIsTemp = $Self.IsExprTemporaryVar(El);
        };
        Result = ExprIsTemp;
        return Result;
      };
      var ExprFlags = {};
      var IsRecord = false;
      var NeedVar = false;
      var ArgTypeIsArray = false;
      var aManaged = false;
      var ArgTypeEl = null;
      var ExprTypeEl = null;
      var Call = null;
      var aResolver = null;
      Result = null;
      if (TargetArg === null) {
        AContext.Access = 0;
        Result = this.ConvertExpression(El,AContext);
        return Result;
      };
      if (!(TargetArg.Access in rtl.createSet(0,2,3,1,4))) this.DoError$2(20170213220927,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,$lm1.AccessNames[TargetArg.Access]),El);
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(TargetArg,ArgResolved,{},null);
      ArgTypeEl = ArgResolved.LoTypeEl;
      IsRecord = $lt81.isPrototypeOf(ArgTypeEl);
      ArgTypeIsArray = $lt107.isPrototypeOf(ArgTypeEl);
      aManaged = false;
      if (ArgTypeIsArray) aManaged = aResolver.IsManagedJSType(ArgTypeEl);
      NeedVar = (TargetArg.Access in rtl.createSet(2,3)) && !IsRecord;
      ExprFlags = {};
      if (NeedVar) {
        ExprFlags = rtl.includeSet(ExprFlags,1)}
       else if (aResolver.IsProcedureType(ArgResolved,true)) ExprFlags = rtl.includeSet(ExprFlags,2);
      aResolver.ComputeElement(El,ExprResolved,rtl.refSet(ExprFlags),null);
      ExprIsTempValid = false;
      if ((TargetArg.ArgType === null) && $lt81.isPrototypeOf(ExprResolved.LoTypeEl)) NeedVar = false;
      if (NeedVar) {
        Result = this.CreateProcCallArgRef(El,$lt84.$clone(ExprResolved),TargetArg,AContext)}
       else {
        AContext.Access = 0;
        if (ArgTypeIsArray) {
          if (ExprResolved.BaseType === 30) {
            if (aManaged) {
              Result = this.CreateLiteralNull(El)}
             else Result = this.CreateElement($lt147,El);
            return Result;
          } else if (ExprResolved.BaseType in $lm3.btAllStringAndChars) {
            Result = this.ConvertExpression(El,AContext);
            Result = this.CreateDotSplit(El,Result);
          } else Result = this.CreateArrayInit(ArgTypeEl,El,El,AContext);
        } else if (ExprResolved.BaseType === 31) {
          if ($lt118.isPrototypeOf(ArgTypeEl) && (3 in AContext.CurrentModeSwitches()) && $lt67.isPrototypeOf(ExprResolved.IdentEl)) {
            Result = this.CreateCallback(El,$lt84.$clone(ExprResolved),ArgTypeEl.CallingConvention === 6,AContext);
          };
        };
        if (Result === null) Result = this.ConvertExpression(El,AContext);
        if ((ExprResolved.BaseType === 34) && (ExprResolved.IdentEl !== null)) {
          if (TargetArg.Access === 0) {
            Result = this.CreateReferencedSet(El,Result);
          };
        } else if (ArgResolved.BaseType === 14) {
          if (ExprResolved.BaseType !== 14) {
            Result = this.CreateMulNumber(El,Result,10000);
          };
        } else if (ExprResolved.BaseType === 14) {
          if (ArgResolved.BaseType !== 14) {
            Result = this.CreateDivideNumber(El,Result,10000);
          };
        } else if (ExprResolved.BaseType in $lm3.btAllStrings) {
          if (ArgTypeEl === null) {}
          else if (ArgTypeEl.$class.ClassType() === $lt81) {
            if (aResolver.IsTGUID(ArgTypeEl)) {
              Call = this.CreateCallExpression(El);
              Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(53),El);
              Call.AddArg(Result);
              Result = Call;
            };
          };
        } else if (ExprResolved.BaseType === 2) {
          ExprTypeEl = ExprResolved.LoTypeEl;
          if (ExprTypeEl.$class.ClassType() === $lt107) {
            if (rtl.length(ExprTypeEl.Ranges) > 0) {
              if ((TargetArg.Access === 0) && !ExprIsTemporaryVar()) {
                Result = this.CreateCloneStaticArray(El,ExprTypeEl,Result,AContext);
              };
            } else {
              if ((TargetArg.Access === 0) && (ArgResolved.BaseType === 2) && $lt107.isPrototypeOf(ArgResolved.LoTypeEl) && !$lt89.isPrototypeOf(ArgResolved.LoTypeEl.FParent) && !ExprIsTemporaryVar()) {
                if (!aManaged) Result = this.CreateArrayRef(El,Result);
              };
            };
          } else if (ExprTypeEl.$class.ClassType() === $lt72) {
            if (ArgTypeEl === null) {}
            else if (ArgResolved.BaseType in $lm3.btAllStrings) {
              if (ExprTypeEl.ObjKind === 2) {
                Result = this.CreateDotNameExpr(El,Result,this.GetBIName(120));
              };
            } else if (ArgTypeEl.$class.ClassType() === $lt81) {
              if ((ExprTypeEl.ObjKind === 2) && aResolver.IsTGUID(ArgTypeEl)) {
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(45),El);
                Call.AddArg(Result);
                Result = Call;
                if (TargetArg.Access === 0) {
                  Result = this.CreateRecordCallClone(El,ArgTypeEl,Result,AContext);
                };
              } else this.RaiseNotSupported(El,AContext,20180410160008,"");
            } else if (ArgTypeEl.$class.ClassType() === $lt72) {
              var $tmp = ExprTypeEl.ObjKind;
              if ($tmp === 1) {
                var $tmp1 = ArgTypeEl.ObjKind;
                if ($tmp1 === 1) {}
                else if ($tmp1 === 2) {
                  Call = this.CreateCallExpression(El);
                  var $tmp2 = ArgTypeEl.InterfaceType;
                  if ($tmp2 === 0) {
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(55)]);
                    Call.AddArg(Result);
                    Result = Call;
                    Call.AddArg(this.CreateReferencePathExpr(ArgTypeEl,AContext,false,null));
                    Call = this.CreateIntfRef(Call,AContext,El);
                    Result = Call;
                  } else if ($tmp2 === 1) {
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(46)]);
                    Call.AddArg(Result);
                    Result = Call;
                    Call.AddArg(this.CreateReferencePathExpr(ArgTypeEl,AContext,false,null));
                  } else {
                    this.RaiseNotSupported(El,AContext,20180401230251,$lm1.InterfaceTypeNames[ArgTypeEl.InterfaceType]);
                  };
                } else {
                  this.RaiseNotSupported(El,AContext,20180328134244,$lm1.ObjKindNames[ArgTypeEl.ObjKind]);
                };
              } else if ($tmp === 2) {
                var $tmp3 = ExprTypeEl.ObjKind;
                if ($tmp3 === 2) {}
                else {
                  this.RaiseNotSupported(El,AContext,20180328134305,$lm1.ObjKindNames[ArgTypeEl.ObjKind]);
                };
              } else {
                this.RaiseNotSupported(El,AContext,20180328134146,$lm1.ObjKindNames[ExprTypeEl.ObjKind]);
              };
            };
          } else if (ExprTypeEl.$class.ClassType() === $lt81) {
            if ((ArgResolved.BaseType in $lm3.btAllStrings) && aResolver.IsTGUID(ExprTypeEl)) {
              Call = this.CreateCallExpression(El);
              Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(47),El);
              Call.AddArg(Result);
              Result = Call;
              return Result;
            };
            if (TargetArg.Access === 0) {
              Result = this.CreateRecordCallClone(El,ExprTypeEl,Result,AContext);
            };
          } else if ($lt118.isPrototypeOf(ExprResolved.LoTypeEl) && $lt118.isPrototypeOf(ArgResolved.LoTypeEl) && (ArgResolved.LoTypeEl.CallingConvention === 6) && (ExprResolved.LoTypeEl.CallingConvention !== 6)) {
            Result = this.CreateSafeCallback(El,Result,AContext);
          };
        };
      };
      return Result;
    };
    this.CreateProcCallArgRef = function (El, ResolvedEl, TargetArg, AContext) {
      var $Self = this;
      var Result = null;
      var Obj = null;
      function AddVar(aName, Expr) {
        var ObjLit = null;
        if (Expr.get() === null) return;
        ObjLit = Obj.FElements.AddElement();
        ObjLit.FName = aName;
        ObjLit.FExpr = Expr.get();
        Expr.set(null);
      };
      function IfReadOnlyCreateRaiseE(ParamContext) {
        var Result = null;
        if (!(1 in ResolvedEl.Flags)) {
          $lp({p: ParamContext, get: function () {
              return this.p.Setter;
            }, set: function (v) {
              this.p.Setter = v;
            }});
          ParamContext.Setter = $Self.CreateRaisePropReadOnly(El);
        };
        Result = ParamContext.Setter;
        return Result;
      };
      function CreateRgCheck(SetterArgName) {
        var Result = null;
        function CreateRgCheckSt(aType) {
          var Result = null;
          Result = $Self.CreateRangeCheckCall_TypeRange(aType,$Self.CreatePrimitiveDotExpr(SetterArgName,El),AContext,El);
          return Result;
        };
        var ArgResolved = $lt84.$new();
        var TypeEl = null;
        Result = null;
        if (TargetArg.ArgType === null) return Result;
        AContext.Resolver.ComputeElement(TargetArg,ArgResolved,{},null);
        TypeEl = ArgResolved.LoTypeEl;
        if (TypeEl === null) return Result;
        if (ArgResolved.BaseType in $mod.btAllJSRangeCheckTypes) {
          Result = CreateRgCheckSt(TypeEl)}
         else if (ArgResolved.BaseType === 2) {
          if (TypeEl.$class.ClassType() === $lt99) Result = CreateRgCheckSt(TypeEl);
        } else if (ArgResolved.BaseType === 37) {
          if (ArgResolved.SubType in $mod.btAllJSRangeCheckTypes) {
            Result = CreateRgCheckSt(TypeEl)}
           else if (ArgResolved.SubType === 2) Result = CreateRgCheckSt(TypeEl);
        };
        return Result;
      };
      var ParamContext = null;
      var FullGetter = null;
      var GetPathExpr = null;
      var SetPathExpr = null;
      var GetExpr = null;
      var SetExpr = null;
      var ParamExpr = null;
      var RHS = null;
      var RgCheck = null;
      var AssignSt = null;
      var ObjLit = null;
      var FuncSt = null;
      var RetSt = null;
      var GetDotPos = 0;
      var SetDotPos = 0;
      var GetPath = "";
      var SetPath = "";
      var BracketExpr = null;
      var DotExpr = null;
      var SetterArgName = "";
      var TypeEl = null;
      var FuncContext = null;
      var aManaged = false;
      var HasCustomSetter = false;
      var Call = null;
      var StList = null;
      Obj = null;
      FullGetter = null;
      ParamContext = $lt40.$create("Create$1",[El,null,AContext]);
      GetPathExpr = null;
      SetPathExpr = null;
      GetExpr = null;
      SetExpr = null;
      SetterArgName = $impl.TempRefObjSetterArgName;
      RgCheck = null;
      try {
        ParamContext.Access = 2;
        ParamContext.Arg = TargetArg;
        ParamContext.Expr = El;
        ParamContext.ResolvedExpr.$assign(ResolvedEl);
        FullGetter = this.ConvertExpression(El,ParamContext);
        if (ParamContext.ReusingReference) {
          Result = FullGetter;
          return Result;
        };
        Obj = this.CreateElement($lt132,El);
        if (FullGetter.$class.ClassType() === $lt125) {
          SetExpr = IfReadOnlyCreateRaiseE(ParamContext);
          HasCustomSetter = SetExpr !== null;
          GetPath = FullGetter.FName;
          GetDotPos = $mod.PosLast(".",GetPath);
          if (GetDotPos > 0) {
            GetPathExpr = this.CreatePrimitiveDotExpr($lp3(GetPath,GetDotPos - 1),El);
            GetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefGetPathName + "." + $lp33(GetPath,GetDotPos + 1),El);
            if (SetExpr === null) SetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefGetPathName + "." + $lp33(GetPath,GetDotPos + 1),El);
          } else {
            GetExpr = FullGetter;
            FullGetter = null;
            if (SetExpr === null) SetExpr = this.CreatePrimitiveDotExpr(GetPath,El);
          };
          if (HasCustomSetter) {
            ParamContext.Setter = null;
            if (SetExpr.$class.ClassType() === $lt125) {
              SetPath = SetExpr.FName;
              SetDotPos = $mod.PosLast(".",SetPath);
              $lp({get: function () {
                  return SetExpr;
                }, set: function (v) {
                  SetExpr = v;
                }});
              if ($lp3(GetPath,GetDotPos) === $lp3(SetPath,SetDotPos)) {
                SetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefGetPathName + "." + $lp33(SetPath,GetDotPos + 1),El);
              } else {
                SetPathExpr = this.CreatePrimitiveDotExpr($lp3(SetPath,SetDotPos - 1),El);
                SetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefSetPathName + "." + $lp33(SetPath,GetDotPos + 1),El);
              };
            };
          };
        } else if (FullGetter.$class.ClassType() === $lt124) {
          if (ParamContext.Setter !== null) this.RaiseNotSupported(El,AContext,20170214231900,"");
          DotExpr = FullGetter;
          GetPathExpr = DotExpr.FMExpr;
          DotExpr.FMExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefGetPathName,El);
          GetExpr = DotExpr;
          FullGetter = null;
          if (1 in ResolvedEl.Flags) {
            SetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefGetPathName + "." + DotExpr.FName,El)}
           else SetExpr = IfReadOnlyCreateRaiseE(ParamContext);
        } else if (FullGetter.$class.ClassType() === $lt142) {
          if (ParamContext.Setter !== null) this.RaiseNotSupported(El,AContext,20170214215150,"");
          BracketExpr = FullGetter;
          ParamExpr = BracketExpr.FName;
          AddVar($impl.TempRefParamName,{get: function () {
              return ParamExpr;
            }, set: function (v) {
              ParamExpr = v;
            }});
          GetPathExpr = BracketExpr.FMExpr;
          BracketExpr.FMExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefGetPathName,El);
          BracketExpr.FName = this.CreatePrimitiveDotExpr("this." + $impl.TempRefParamName,El);
          GetExpr = BracketExpr;
          FullGetter = null;
          BracketExpr = this.CreateElement($lt142,El);
          SetExpr = BracketExpr;
          BracketExpr.FMExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefGetPathName,El);
          BracketExpr.FName = this.CreatePrimitiveDotExpr("this." + $impl.TempRefParamName,El);
        } else if (FullGetter.$class.ClassType() === $lt144) {
          if (ParamContext.Setter !== null) this.RaiseNotSupported(El,AContext,20190210094430,"");
          AddVar($impl.TempRefParamName,{get: function () {
              return FullGetter;
            }, set: function (v) {
              FullGetter = v;
            }});
          FullGetter = null;
          GetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefParamName,El);
          SetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefParamName,El);
        } else if (FullGetter.$class.ClassType() === $lt137) {
          GetExpr = FullGetter;
          FullGetter = null;
          SetExpr = IfReadOnlyCreateRaiseE(ParamContext);
          ParamContext.Setter = null;
        } else {
          AddVar($impl.TempRefParamName,{get: function () {
              return FullGetter;
            }, set: function (v) {
              FullGetter = v;
            }});
          FullGetter = null;
          GetExpr = this.CreatePrimitiveDotExpr("this." + $impl.TempRefParamName,El);
          SetExpr = this.CreateRaisePropReadOnly(El);
        };
        if ((SetExpr.$class.ClassType() === $lt125) || (SetExpr.$class.ClassType() === $lt124) || (SetExpr.$class.ClassType() === $lt142)) {
          this.FindAvailableLocalName({get: function () {
              return SetterArgName;
            }, set: function (v) {
              SetterArgName = v;
            }},SetExpr);
          RHS = this.CreatePrimitiveDotExpr(SetterArgName,El);
          TypeEl = ResolvedEl.LoTypeEl;
          aManaged = AContext.Resolver.IsManagedJSType(TypeEl);
          if (aManaged && (TargetArg.ArgType !== null)) {
            SetExpr = this.CreateAssignManagedVar(ResolvedEl,{get: function () {
                return SetExpr;
              }, set: function (v) {
                SetExpr = v;
              }},{get: function () {
                return RHS;
              }, set: function (v) {
                RHS = v;
              }},AContext,El);
          } else if ($lt81.isPrototypeOf(TypeEl)) {
            Call = this.CreateCallExpression(El);
            Call.FExpr = this.CreateDotNameExpr(El,SetExpr,this.GetBIName(75));
            Call.AddArg(RHS);
            SetExpr = Call;
          } else {
            AssignSt = this.CreateElement($lt133,El);
            AssignSt.FLHS = SetExpr;
            AssignSt.FExpr = RHS;
            SetExpr = AssignSt;
            if (aManaged && (TargetArg.ArgType === null)) {
              FuncContext = AContext.GetFunctionContext();
              if ($lt90.isPrototypeOf(ResolvedEl.IdentEl)) {
                FuncContext.ResultNeedsIntfRelease = true}
               else FuncContext.Add_InterfaceRelease(ResolvedEl.IdentEl);
            } else if ($lt133.isPrototypeOf(SetExpr) && (SetterArgName !== "") && (15 in AContext.ScannerBoolSwitches)) RgCheck = CreateRgCheck(SetterArgName);
          };
        } else if (SetExpr.$class.ClassType() === $lt144) {}
        else this.RaiseInconsistency(20170213225940,El);
        AddVar($impl.TempRefGetPathName,{get: function () {
            return GetPathExpr;
          }, set: function (v) {
            GetPathExpr = v;
          }});
        ObjLit = Obj.FElements.AddElement();
        ObjLit.FName = $impl.TempRefObjGetterName;
        FuncSt = this.CreateFunctionSt(El,true,false);
        ObjLit.FExpr = FuncSt;
        RetSt = this.CreateElement($lt160,El);
        FuncSt.FFuncDef.FBody.FA = RetSt;
        RetSt.FExpr = GetExpr;
        GetExpr = null;
        AddVar($impl.TempRefSetPathName,{get: function () {
            return SetPathExpr;
          }, set: function (v) {
            SetPathExpr = v;
          }});
        ObjLit = Obj.FElements.AddElement();
        ObjLit.FName = $impl.TempRefObjSetterName;
        FuncSt = this.CreateFunctionSt(El,true,false);
        ObjLit.FExpr = FuncSt;
        if (SetterArgName !== "") FuncSt.FFuncDef.FTypedParams.AddParam(SetterArgName);
        if (RgCheck !== null) {
          StList = this.CreateElement($lt129,El);
          StList.FA = RgCheck;
          StList.FB = SetExpr;
          SetExpr = StList;
        };
        FuncSt.FFuncDef.FBody.FA = SetExpr;
        SetExpr = null;
        Result = Obj;
      } finally {
        if (Result === null) {
          GetPathExpr = rtl.freeLoc(GetPathExpr);
          SetPathExpr = rtl.freeLoc(SetPathExpr);
          GetExpr = rtl.freeLoc(GetExpr);
          SetExpr = rtl.freeLoc(SetExpr);
          Obj = rtl.freeLoc(Obj);
          rtl.free(ParamContext,"Setter");
          FullGetter = rtl.freeLoc(FullGetter);
        };
        ParamContext = rtl.freeLoc(ParamContext);
      };
      return Result;
    };
    this.CreateArrayEl = function (El, AContext) {
      var Result = null;
      var JS = null;
      JS = this.ConvertExpression(El,AContext);
      Result = this.CreateArrayEl$1(El,JS,AContext);
      return Result;
    };
    this.CreateArrayEl$1 = function (El, JS, AContext) {
      var Result = null;
      var ResolvedEl = $lt84.$new();
      var ArrayType = null;
      var TypeEl = null;
      var C = null;
      Result = JS;
      AContext.Resolver.ComputeElement(El,ResolvedEl,rtl.createSet(2),null);
      if (ResolvedEl.IdentEl !== null) {
        if (ResolvedEl.BaseType === 34) {
          Result = this.CreateReferencedSet(El,Result);
        } else if (ResolvedEl.BaseType === 2) {
          TypeEl = ResolvedEl.LoTypeEl;
          C = TypeEl.$class.ClassType();
          if (C === $lt107) {
            ArrayType = TypeEl;
            if (rtl.length(ArrayType.Ranges) > 0) Result = this.CreateCloneStaticArray(El,ArrayType,Result,AContext);
          } else if (C === $lt81) {
            Result = this.CreateRecordCallClone(El,TypeEl,Result,AContext);
          };
        };
      };
      return Result;
    };
    this.CreateArgumentAccess = function (Arg, AContext, PosEl) {
      var $Self = this;
      var Result = null;
      var ArgName = "";
      function CreateSetter(SetterName, AssignContext) {
        var Result = null;
        var Call = null;
        Call = $Self.CreateCallExpression(PosEl);
        AssignContext.Call = Call;
        Call.FExpr = $Self.CreateDotNameExpr(PosEl,$Self.CreatePrimitiveDotExpr(ArgName,PosEl),SetterName);
        Call.AddArg(AssignContext.RightSide);
        AssignContext.RightSide = null;
        Result = Call;
        return Result;
      };
      var TypeEl = null;
      var IsRecord = false;
      var Call = null;
      var AssignContext = null;
      var ParamContext = null;
      ArgName = this.TransformArgName(Arg,AContext);
      TypeEl = AContext.Resolver.ResolveAliasType(Arg.ArgType,true);
      IsRecord = $lt81.isPrototypeOf(TypeEl);
      if (AContext.Access === 1) {
        AssignContext = rtl.as(AContext.AccessContext,$lt39);
        if (IsRecord) {
          if (AssignContext.Call !== null) this.RaiseNotSupported(Arg,AContext,20190105174026,"");
          Result = CreateSetter(this.GetBIName(75),AssignContext);
          return Result;
        } else if ((Arg.ArgType === null) && $lt81.isPrototypeOf(AssignContext.RightResolved.LoTypeEl) && (0 in AssignContext.RightResolved.Flags)) {
          if (AssignContext.Call !== null) this.RaiseNotSupported(Arg,AContext,20190311140048,"");
          Result = CreateSetter(this.GetBIName(75),AssignContext);
          return Result;
        };
      } else if (IsRecord && $lt40.isPrototypeOf(AContext)) {
        ParamContext = AContext;
        if (ParamContext.ResolvedExpr.BaseType === 4) {
          Result = this.CreatePrimitiveDotExpr(ArgName,PosEl);
          return Result;
        };
      };
      if ((Arg.Access in rtl.createSet(2,3)) && !IsRecord) {
        var $tmp = AContext.Access;
        if ($tmp === 0) {
          Call = this.CreateCallExpression(PosEl);
          Call.FExpr = this.CreateDotNameExpr(PosEl,this.CreatePrimitiveDotExpr(ArgName,PosEl),$impl.TempRefObjGetterName);
          Result = Call;
          return Result;
        } else if ($tmp === 1) {
          AssignContext = rtl.as(AContext.AccessContext,$lt39);
          if (AssignContext.Call !== null) this.RaiseNotSupported(Arg,AContext,20170214120606,"");
          Result = CreateSetter($impl.TempRefObjSetterName,AssignContext);
          return Result;
        } else if ($tmp === 2) {
          ParamContext = rtl.as(AContext.AccessContext,$lt40);
          ParamContext.ReusingReference = true;
          Result = this.CreatePrimitiveDotExpr(ArgName,PosEl);
          return Result;
        } else {
          this.RaiseNotSupported(Arg,AContext,20170214120739,"");
        };
      };
      Result = this.CreatePrimitiveDotExpr(ArgName,PosEl);
      return Result;
    };
    this.CreateUnaryPlus = function (Expr, El) {
      var Result = null;
      Result = this.CreateElement($lt161,El);
      Result.FA = Expr;
      return Result;
    };
    this.CreateMemberExpression = function (Members) {
      var Result = null;
      var Prim = null;
      var MExpr = null;
      var LastMExpr = null;
      var k = 0;
      var CurName = "";
      if (rtl.length(Members) < 1) this.DoError(20161024192715,"internal error: member expression needs at least one element");
      LastMExpr = null;
      for (var $l = rtl.length(Members) - 1; $l >= 1; $l--) {
        k = $l;
        CurName = Members[k];
        if (CurName === "") this.DoError(20190124114806,"internal error: member expression needs name");
        if (CurName.charAt(0) === "[") {
          if (CurName.charAt(CurName.length - 1) === "]") {
            CurName = $lp4(CurName,2,CurName.length - 2)}
           else CurName = $lp4(CurName,2,CurName.length - 1);
          MExpr = $lt142.$create("Create$1",[0,0,""]);
          Prim = $lt125.$create("Create$1",[0,0,""]);
          Prim.FName = CurName;
          MExpr.FName = Prim;
        } else {
          MExpr = $lt124.$create("Create$1",[0,0,""]);
          MExpr.FName = CurName;
        };
        if (LastMExpr === null) {
          Result = MExpr}
         else LastMExpr.FMExpr = MExpr;
        LastMExpr = MExpr;
      };
      Prim = $lt125.$create("Create$1",[0,0,""]);
      Prim.FName = Members[0];
      if (LastMExpr === null) {
        Result = Prim}
       else LastMExpr.FMExpr = Prim;
      return Result;
    };
    this.CreateCallExpression = function (El) {
      var Result = null;
      Result = this.CreateElement($lt144,El);
      Result.FArgs = this.CreateElement($lt159,El);
      return Result;
    };
    this.CreateCallCharCodeAt = function (Arg, aNumber, El) {
      var Result = null;
      Result = this.CreateCallExpression(El);
      Result.FExpr = this.CreateDotNameExpr(El,Arg,"charCodeAt");
      if (aNumber !== 0) Result.FArgs.AddElement(this.CreateLiteralNumber(El,aNumber));
      return Result;
    };
    this.CreateCallFromCharCode = function (Arg, El) {
      var Result = null;
      Result = this.CreateCallExpression(El);
      Result.FExpr = this.CreateMemberExpression(["String","fromCharCode"]);
      Result.AddArg(Arg);
      return Result;
    };
    this.CreateUsesList = function (UsesSection, AContext) {
      var Result = null;
      var ArgArray = null;
      var i = 0;
      var anUnitName = "";
      var ArgEx = null;
      var UsesClause = [];
      var aModule = null;
      UsesClause = UsesSection.UsesClause;
      ArgArray = $lt147.$create("Create$1",[0,0,""]);
      for (var $l = 0, $end = rtl.length(UsesClause) - 1; $l <= $end; $l++) {
        i = $l;
        aModule = rtl.as(UsesClause[i].Module,$lt96);
        if (!this.IsElementUsed(aModule) && !this.IsSystemUnit(aModule)) continue;
        anUnitName = this.TransformModuleName(aModule,false,AContext);
        ArgEx = this.CreateLiteralString(UsesSection,anUnitName);
        ArgArray.FElements.AddElement().FExpr = ArgEx;
      };
      Result = ArgArray;
      return Result;
    };
    this.AddToStatementList = function (First, Last, Add, Src) {
      var SL2 = null;
      if (Add === null) return;
      if ($lt129.isPrototypeOf(Add)) {
        if (Add.FA === null) {
          if (Add.FB !== null) throw $lt48.$create("Create$1",["internal error: AddToStatementList add list A=nil, B<>nil, B=" + Add.FB.$classname]);
          $lp({get: function () {
              return Add;
            }, set: function (v) {
              Add = v;
            }});
        } else if (Last.get() === null) {
          Last.set(Add);
          First.set(Last.get());
        } else {
          if (Last.get().FB !== null) {
            SL2 = this.CreateElement($lt129,Src);
            SL2.FA = Last.get().FB;
            Last.get().FB = SL2;
            Last.set(SL2);
          };
          Last.get().FB = Add;
          while ($lt129.isPrototypeOf(Last.get().FB)) Last.set(Last.get().FB);
        };
      } else {
        if (Last.get() === null) {
          Last.set(this.CreateElement($lt129,Src));
          First.set(Last.get());
          Last.get().FA = Add;
        } else if (Last.get().FB === null) {
          Last.get().FB = Add}
         else {
          while ($lt129.isPrototypeOf(Last.get().FB)) Last.set(Last.get().FB);
          SL2 = this.CreateElement($lt129,Src);
          SL2.FA = Last.get().FB;
          Last.get().FB = SL2;
          Last.set(SL2);
          Last.get().FB = Add;
        };
      };
    };
    this.AddToStatementList$1 = function (St, Add, Src) {
      var First = null;
      var Last = null;
      First = St;
      Last = St;
      while ($lt129.isPrototypeOf(Last.FB)) Last = Last.FB;
      this.AddToStatementList({get: function () {
          return First;
        }, set: function (v) {
          First = v;
        }},{get: function () {
          return Last;
        }, set: function (v) {
          Last = v;
        }},Add,Src);
    };
    this.PrependToStatementList = function (St, Add, PosEl) {
      var NewSt = null;
      if (St.get() === null) {
        St.set(Add)}
       else if ($lt162.isPrototypeOf(St.get())) {
        St.set(rtl.freeLoc(St.get()));
        St.set(Add);
      } else if ($lt129.isPrototypeOf(St.get())) {
        NewSt = this.CreateElement($lt129,PosEl);
        NewSt.FA = Add;
        NewSt.FB = St.get();
        St.set(NewSt);
      } else {
        this.RaiseNotSupported(PosEl,null,20181002154026,$lp16(St.get()));
      };
    };
    this.AddToVarStatement = function (VarStat, Add, Src) {
      var List = null;
      if (VarStat.FA === null) {
        VarStat.FA = Add}
       else {
        List = this.CreateElement($lt163,Src);
        List.FA = VarStat.FA;
        List.FB = Add;
        VarStat.FA = List;
      };
    };
    this.CreateValInit = function (PasType, Expr, El, AContext) {
      var Result = null;
      var T = null;
      var Lit = null;
      var bt = 0;
      var JSBaseType = 0;
      var C = null;
      var aResolver = null;
      var Value = null;
      T = PasType;
      aResolver = AContext.Resolver;
      if (aResolver !== null) T = aResolver.ResolveAliasType(T,true);
      if (T === null) {
        if (Expr === null) {
          if (aResolver === null) return this.CreateLiteralUndefined(El);
          this.RaiseInconsistency(20170415185745,El);
        };
        Result = this.ConvertExpression(Expr,AContext);
        if (Result === null) {
          this.RaiseNotSupported(Expr,AContext,20170415185927,"");
        };
        return Result;
      };
      C = T.$class.ClassType();
      if (C === $lt107) {
        Result = this.CreateArrayInit(T,Expr,El,AContext)}
       else if (C === $lt81) {
        Result = this.CreateRecordInit(T,Expr,El,AContext)}
       else if (Expr != null) {
        Result = this.ConvertExpression(Expr,AContext)}
       else if (C === $lt117) {
        Result = this.CreateElement($lt132,El)}
       else if ((C === $lt101) && (aResolver !== null)) {
        Value = AContext.Resolver.Eval(T.RangeExpr.Left,rtl.createSet(0),true);
        try {
          var $tmp = Value.Kind;
          if (($tmp === 4) || ($tmp === 5)) {
            Result = this.CreateLiteralNumber(El,0)}
           else {
            Result = this.ConvertConstValue(Value,AContext,El);
          };
        } finally {
          $lp17({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
        };
      } else {
        Lit = this.CreateElement($lt137,El);
        Result = Lit;
        if ((C === $lt95) || (C === $lt72) || (C === $lt112) || (C === $lt118) || (C === $lt93)) {
          Lit.FValue.SetIsNull(true)}
         else if (C === $lt164) {
          Lit.FValue.SetAsString("")}
         else if (C === $lt99) {
          Lit.FValue.SetAsNumber(0)}
         else if (C === $lt100) {
          if ($lt65.isPrototypeOf(T.FData)) {
            bt = T.FData.BaseType;
            if (bt in $mod.btAllJSInteger) {
              Lit.FValue.SetAsNumber(0)}
             else if (bt in $mod.btAllJSFloats) {
              Lit.FValue.FCustomValue = "0.0"}
             else if (bt in $mod.btAllJSChars) {
              Lit.FValue.SetAsString("\x00")}
             else if (bt in $mod.btAllJSStrings) {
              Lit.FValue.SetAsString("")}
             else if (bt in $mod.btAllJSBooleans) {
              Lit.FValue.SetAsBoolean(false)}
             else if (bt in rtl.createSet(30,29,31)) {
              Lit.FValue.SetIsNull(true)}
             else if ((bt === 1) && $lt21.isPrototypeOf(T.FData)) {
              JSBaseType = T.FData.JSBaseType;
              if (JSBaseType === 1) Lit.FValue.SetIsUndefined(true);
            } else {
              this.RaiseNotSupported(PasType,AContext,20170208162121,"");
            };
          } else if (aResolver !== null) {
            this.RaiseNotSupported(El,AContext,20170415190259,"");
          } else if (($lp13(T.FName,"longint") === 0) || ($lp13(T.FName,"int64") === 0) || ($lp13(T.FName,"real") === 0) || ($lp13(T.FName,"double") === 0) || ($lp13(T.FName,"single") === 0)) {
            Lit.FValue.SetAsNumber(0.0)}
           else if ($lp13(T.FName,"boolean") === 0) {
            Lit.FValue.SetAsBoolean(false)}
           else if (($lp13(T.FName,"string") === 0) || ($lp13(T.FName,"char") === 0)) {
            Lit.FValue.SetAsString("")}
           else {
            Lit.FValue.SetIsUndefined(true);
          };
        } else {
          this.RaiseNotSupported(PasType,AContext,20170208161506,"");
        };
      };
      if (Result === null) {
        this.RaiseNotSupported(El,AContext,20170415190103,"");
      };
      return Result;
    };
    this.CreateVarInit = function (El, AContext) {
      var Result = null;
      Result = this.CreateValInit(El.VarType,El.Expr,El,AContext);
      return Result;
    };
    this.CreateVarStatement = function (aName, Init, El) {
      var Result = null;
      Result = this.CreateElement($lt134,El);
      Result.FA = this.CreateVarDecl$1(aName,Init,El);
      return Result;
    };
    this.CreateVarDecl$1 = function (aName, Init, El) {
      var Result = null;
      Result = this.CreateElement($lt150,El);
      Result.FName = aName;
      Result.FInit = Init;
      return Result;
    };
    this.CreateExternalBracketAccessorCall = function (El, AContext) {
      var Result = null;
      var Ref = null;
      var ArgContext = null;
      var ok = false;
      var AssignSt = null;
      var IndexJS = null;
      var WithData = null;
      var Path = "";
      var BracketJS = null;
      Result = null;
      if (rtl.length(El.Params) < 1) this.RaiseInconsistency(20180511151259,El);
      if (!$lt71.isPrototypeOf(El.Value.FData)) this.RaiseInconsistency(20180511144445,El);
      Ref = El.Value.FData;
      ArgContext = AContext.GetNonDotContext();
      ok = false;
      try {
        IndexJS = this.ConvertExpression(El.Params[0],ArgContext);
        if (Ref.WithExprScope !== null) {
          WithData = rtl.as(Ref.WithExprScope,$lt19);
          Path = WithData.WithVarName;
          if (Path === "") this.RaiseNotSupported(El,AContext,20190209092417,"");
        } else {
          Path = "this";
        };
        BracketJS = this.CreateElement($lt142,El);
        Result = BracketJS;
        BracketJS.FName = IndexJS;
        BracketJS.FMExpr = this.CreatePrimitiveDotExpr(Path,El);
        if (rtl.length(El.Params) > 1) {
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = Result;
          Result = AssignSt;
          AssignSt.FExpr = this.ConvertExpression(El.Params[1],ArgContext);
        };
        if (rtl.length(El.Params) > 2) this.DoError$2(20180511144047,4025,rtl.getResStr($mod,"sCantCallExtBracketAccessor"),[],El);
        ok = true;
      } finally {
        if (!ok) Result = rtl.freeLoc(Result);
      };
      return Result;
    };
    this.CreateAssignStatement = function (LeftEl, AssignContext) {
      var Result = null;
      var LHS = null;
      var AssignSt = null;
      Result = null;
      LHS = this.ConvertExpression(LeftEl,AssignContext);
      if (AssignContext.Call !== null) {
        if (AssignContext.RightSide !== null) {
          LHS = rtl.freeLoc(LHS);
          this.RaiseInconsistency(20170207215447,LeftEl);
        };
        Result = LHS;
      } else {
        AssignSt = this.CreateElement($lt133,AssignContext.PasElement);
        AssignSt.FLHS = LHS;
        AssignSt.FExpr = AssignContext.RightSide;
        AssignContext.RightSide = null;
        Result = AssignSt;
      };
      return Result;
    };
    this.CreateGetEnumeratorLoop = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var PosEl = null;
      var CurInVar = null;
      function CreateInName() {
        var Result = null;
        var Ident = null;
        Ident = $Self.CreateElement($lt125,PosEl);
        Ident.FName = CurInVar.Name;
        Result = Ident;
        return Result;
      };
      var aResolver = null;
      var ForScope = null;
      var Statements = null;
      var VarSt = null;
      var FuncContext = null;
      var List = null;
      var GetCurrent = null;
      var J = null;
      var LHS = null;
      var RHS = null;
      var Call = null;
      var TrySt = null;
      var WhileSt = null;
      var AssignSt = null;
      var GetEnumeratorFunc = null;
      var MoveNextFunc = null;
      var CurrentProp = null;
      var DotContext = null;
      var ResolvedEl = $lt84.$new();
      var VarResolved = $lt84.$new();
      var EnumeratorTypeEl = null;
      var CurrentPropTypeEl = null;
      var NeedTryFinally = false;
      var NeedIntfRef = false;
      var IsCurrentPropCOMIntf = false;
      aResolver = AContext.Resolver;
      ForScope = El.FData;
      NeedTryFinally = true;
      NeedIntfRef = false;
      GetEnumeratorFunc = ForScope.GetEnumerator;
      if (GetEnumeratorFunc === null) this.RaiseNotSupported(El,AContext,20171225104212,"");
      if (GetEnumeratorFunc.$class.ClassType() !== $lt94) this.RaiseNotSupported(El,AContext,20171225104237,"");
      aResolver.ComputeResultElement(GetEnumeratorFunc.GetFT().ResultEl,ResolvedEl,rtl.createSet(5),null);
      EnumeratorTypeEl = ResolvedEl.LoTypeEl;
      if ($lt72.isPrototypeOf(EnumeratorTypeEl)) {
        var $tmp = EnumeratorTypeEl.ObjKind;
        if (($tmp === 1) || ($tmp === 3) || ($tmp === 4) || ($tmp === 5)) {}
        else if ($tmp === 2) {
          var $tmp1 = EnumeratorTypeEl.InterfaceType;
          if ($tmp1 === 0) {
            NeedIntfRef = true}
           else if ($tmp1 === 1) {
            NeedTryFinally = false}
           else {
            this.RaiseNotSupported(El.VariableName,AContext,20180328192842,"");
          };
        } else {
          this.RaiseNotSupported(El.VariableName,AContext,20180328192452,"");
        };
      };
      MoveNextFunc = ForScope.MoveNext;
      if (MoveNextFunc === null) this.RaiseNotSupported(El,AContext,20171225104249,"");
      if (MoveNextFunc.$class.ClassType() !== $lt94) this.RaiseNotSupported(El,AContext,20171225104256,"");
      if (MoveNextFunc.FParent.$class.ClassType() !== $lt72) this.RaiseNotSupported(El,AContext,20190208153949,"");
      if (MoveNextFunc.FParent.HelperForType !== null) this.RaiseNotSupported(El,AContext,20190208155015,"");
      CurrentProp = ForScope.Current;
      if (CurrentProp === null) this.RaiseNotSupported(El,AContext,20171225104306,"");
      if (CurrentProp.$class.ClassType() !== $lt74) this.RaiseNotSupported(El,AContext,20171225104316,"");
      if (CurrentProp.FParent.$class.ClassType() !== $lt72) this.RaiseNotSupported(El,AContext,20190208154003,"");
      CurrentPropTypeEl = AContext.Resolver.ResolveAliasType(CurrentProp.VarType,true);
      IsCurrentPropCOMIntf = $lt72.isPrototypeOf(CurrentPropTypeEl) && (CurrentPropTypeEl.ObjKind === 2) && (CurrentPropTypeEl.InterfaceType === 0);
      FuncContext = AContext.GetFunctionContext();
      PosEl = El;
      Statements = this.CreateElement($lt129,PosEl);
      DotContext = null;
      try {
        VarSt = this.CreateElement($lt134,PosEl);
        Statements.FA = VarSt;
        PosEl = El.StartExpr;
        if (aResolver.IsHelperMethod(GetEnumeratorFunc)) {
          Call = this.CreateCallHelperMethod(GetEnumeratorFunc,El.StartExpr,AContext,true)}
         else {
          List = this.ConvertExpression(El.StartExpr,AContext);
          Call = this.CreateElement($lt144,PosEl);
          Call.FExpr = this.CreateDotExpression(PosEl,List,this.CreateIdentifierExpr(GetEnumeratorFunc,AContext),true);
        };
        CurInVar = FuncContext.AddLocalVar(this.GetBIName(135),El.VariableName,0,true);
        VarSt.FA = this.CreateVarDecl$1(CurInVar.Name,Call,PosEl);
        PosEl = El.VariableName;
        TrySt = null;
        if (NeedTryFinally) {
          TrySt = this.CreateElement($lt165,PosEl);
          Statements.FB = TrySt;
        };
        WhileSt = this.CreateElement($lt166,PosEl);
        if (TrySt !== null) {
          TrySt.FBlock = WhileSt}
         else Statements.FB = WhileSt;
        Call = this.CreateElement($lt144,PosEl);
        WhileSt.FCond = Call;
        Call.FExpr = this.CreateDotExpression(PosEl,CreateInName(),this.CreateIdentifierExpr(MoveNextFunc,AContext),false);
        LHS = null;
        RHS = null;
        DotContext = null;
        try {
          LHS = this.ConvertExpression(El.VariableName,AContext);
          DotContext = $lt38.$create("Create$1",[El.StartExpr,null,AContext]);
          GetCurrent = this.CreatePropertyGet(CurrentProp,null,DotContext,PosEl);
          if (DotContext.JS !== null) this.RaiseNotSupported(El,AContext,20180509134302,$lp16(DotContext.JS));
          RHS = this.CreateDotExpression(PosEl,CreateInName(),GetCurrent,true);
          if (IsCurrentPropCOMIntf) {
            aResolver.ComputeElement(El.VariableName,VarResolved,{},null);
            WhileSt.FBody = this.CreateAssignManagedVar(VarResolved,{get: function () {
                return LHS;
              }, set: function (v) {
                LHS = v;
              }},{get: function () {
                return RHS;
              }, set: function (v) {
                RHS = v;
              }},AContext,El.VariableName);
            LHS = null;
            RHS = null;
          } else {
            AssignSt = this.CreateElement($lt133,PosEl);
            WhileSt.FBody = AssignSt;
            AssignSt.FLHS = LHS;
            LHS = null;
            AssignSt.FExpr = RHS;
            RHS = null;
          };
        } finally {
          $lp({get: function () {
              return DotContext;
            }, set: function (v) {
              DotContext = v;
            }});
          $lp({get: function () {
              return LHS;
            }, set: function (v) {
              LHS = v;
            }});
          $lp({get: function () {
              return RHS;
            }, set: function (v) {
              RHS = v;
            }});
        };
        if (El.Body !== null) {
          J = this.ConvertElement(El.Body,AContext);
          if (J !== null) {
            List = this.CreateElement($lt129,PosEl);
            List.FA = WhileSt.FBody;
            List.FB = J;
            WhileSt.FBody = List;
          };
        };
        PosEl = El.StartExpr;
        if (TrySt !== null) {
          if (NeedIntfRef) {
            Call = this.CreateCallExpression(PosEl);
            TrySt.FBFinally = Call;
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(36)]);
            Call.AddArg(CreateInName());
          } else TrySt.FBFinally = this.CreateCallRTLFreeLoc(CreateInName(),CreateInName(),PosEl);
        };
        Result = Statements;
      } finally {
        DotContext = rtl.freeLoc(DotContext);
        if (Result === null) Statements = rtl.freeLoc(Statements);
      };
      return Result;
    };
    this.CreateCallRTLFreeLoc = function (Setter, Getter, Src) {
      var Result = null;
      var Call = null;
      var AssignSt = null;
      Call = this.CreateCallExpression(Src);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(60)]);
      Call.FArgs.AddElement(Getter);
      AssignSt = this.CreateElement($lt133,Src);
      AssignSt.FLHS = Setter;
      AssignSt.FExpr = Call;
      Result = AssignSt;
      return Result;
    };
    this.CreateDotSplit = function (El, Expr) {
      var Result = null;
      var DotExpr = null;
      var Call = null;
      Call = this.CreateCallExpression(El);
      DotExpr = this.CreateElement($lt124,El);
      Call.FExpr = DotExpr;
      DotExpr.FMExpr = Expr;
      DotExpr.FName = "split";
      Call.AddArg(this.CreateLiteralJSString(El,""));
      Result = Call;
      return Result;
    };
    this.CreateExportStatement = function (VarType, AliasName, InitJS, PosEl) {
      var Result = null;
      var VarSt = null;
      var VarDecl = null;
      Result = this.CreateElement($lt167,PosEl);
      VarSt = this.CreateElement($lt134,PosEl);
      Result.FDeclaration = VarSt;
      VarSt.FVarType = VarType;
      VarDecl = this.CreateElement($lt150,PosEl);
      VarSt.FA = VarDecl;
      VarDecl.FName = AliasName;
      VarDecl.FInit = InitJS;
      return Result;
    };
    this.CreatePrecompiledJS = function (El) {
      var Result = "";
      var aWriter = null;
      var aJSWriter = null;
      aJSWriter = null;
      aWriter = $lt168.$create("Create$2",[1000]);
      try {
        aJSWriter = $lt169.$create("Create$1",[aWriter]);
        aJSWriter.SetOptions(rtl.refSet($mod.DefaultJSWriterOptions));
        aJSWriter.FIndentSize = 2;
        aJSWriter.FSkipCurlyBrackets = true;
        aJSWriter.FWriter.FLineBreak = "\n";
        aJSWriter.WriteJS(El);
        Result = aWriter.GetAsString();
      } finally {
        aJSWriter = rtl.freeLoc(aJSWriter);
        aWriter = rtl.freeLoc(aWriter);
      };
      return Result;
    };
    this.AddRTLVersionCheck = function (FuncContext, PosEl) {
      var Call = null;
      Call = this.CreateCallExpression(PosEl);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(22)]);
      Call.AddArg(this.CreateLiteralNumber(PosEl,this.FGlobals.RTLVersion));
      this.PrependToStatementList({p: FuncContext, get: function () {
          return this.p.BodySt;
        }, set: function (v) {
          this.p.BodySt = v;
        }},Call,PosEl);
    };
    this.CreateLiteralNumber = function (El, n) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.SetAsNumber(n);
      return Result;
    };
    this.CreateLiteralFloat = function (El, n) {
      var Result = null;
      var DivExpr = null;
      var Lit = null;
      if ($lp34(n)) {
        DivExpr = this.CreateElement($lt170,El);
        if (n < 0) {
          DivExpr.FA = this.CreateLiteralNumber(El,-1)}
         else DivExpr.FA = this.CreateLiteralNumber(El,1);
        DivExpr.FB = this.CreateLiteralNumber(El,0);
        Result = DivExpr;
      } else {
        Lit = this.CreateElement($lt137,El);
        Lit.FValue.SetAsNumber(n);
        Result = Lit;
      };
      return Result;
    };
    this.CreateLiteralHexNumber = function (El, n, Digits) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.SetAsNumber(n);
      Result.FValue.FCustomValue = "0x" + rtl.hexStr(n,Digits);
      return Result;
    };
    this.CreateLiteralString = function (El, s) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.SetAsString(s);
      return Result;
    };
    this.CreateLiteralJSString = function (El, s) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.SetAsString(s);
      return Result;
    };
    this.CreateLiteralBoolean = function (El, b) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.SetAsBoolean(b);
      return Result;
    };
    this.CreateLiteralNull = function (El) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.SetIsNull(true);
      return Result;
    };
    this.CreateLiteralUndefined = function (El) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.SetIsUndefined(true);
      return Result;
    };
    this.CreateLiteralCustomValue = function (El, s) {
      var Result = null;
      Result = this.CreateElement($lt137,El);
      Result.FValue.FCustomValue = s;
      return Result;
    };
    this.CreateSetLiteralElement = function (Expr, AContext) {
      var Result = null;
      var LitVal = null;
      var NewEl = null;
      var WS = "";
      var ExprResolved = $lt84.$new();
      var Call = null;
      var DotExpr = null;
      var aResolver = null;
      var bt = 0;
      var C = null;
      Result = this.ConvertExpression(Expr,AContext);
      if (Result === null) this.RaiseNotSupported(Expr,AContext,20170415192209,"");
      if (Result.$class.ClassType() === $lt137) {
        LitVal = Result.FValue;
        var $tmp = LitVal.FValueType;
        if ($tmp === 2) {
          if (LitVal.GetAsBoolean() === false) {
            NewEl = this.CreateLiteralNumber(Expr,0)}
           else NewEl = this.CreateLiteralNumber(Expr,1);
          Result = rtl.freeLoc(Result);
          return NewEl;
        } else if ($tmp === 3) {
          return Result}
         else if ($tmp === 4) {
          WS = LitVal.GetAsString();
          Result = rtl.freeLoc(Result);
          if (WS.length !== 1) this.DoError$2(20170415193254,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"char",18,"string"),Expr);
          Result = this.CreateLiteralNumber(Expr,WS.charCodeAt(1 - 1));
          return Result;
        } else {
          this.RaiseNotSupported(Expr,AContext,20170415205955,"");
        };
      } else if (Result.$class.ClassType() === $lt144) {
        Call = Result;
        if ($lt124.isPrototypeOf(Call.FExpr)) {
          DotExpr = Call.FExpr;
          if (DotExpr.FName === "charCodeAt") return Result;
          if (DotExpr.FName === "charAt") {
            DotExpr.FName = "charCodeAt";
            return Result;
          };
        };
      };
      aResolver = AContext.Resolver;
      if (aResolver !== null) {
        aResolver.ComputeElement(Expr,ExprResolved,{},null);
        bt = ExprResolved.BaseType;
        if (bt === 37) bt = ExprResolved.SubType;
        if (bt in $mod.btAllJSStringAndChars) {
          Result = this.CreateCallCharCodeAt(Result,0,Expr);
        } else if (bt in $mod.btAllJSInteger) {}
        else if (bt === 2) {
          C = ExprResolved.LoTypeEl.$class.ClassType();
          if ((C === $lt99) || (C === $lt101)) {}
          else this.RaiseNotSupported(Expr,AContext,20170415191933,"");
        } else {
          this.RaiseNotSupported(Expr,AContext,20170415191822,"");
        };
      };
      return Result;
    };
    this.CreateUnaryNot = function (El, Src) {
      var Result = null;
      Result = this.CreateElement($lt171,Src);
      Result.FA = El;
      return Result;
    };
    this.ConvertCharLiteralToInt = function (Lit, ErrorEl, AContext) {
      var JS = "";
      if (Lit.FValue.FValueType !== 4) this.RaiseInconsistency(20171112020856,ErrorEl);
      if (Lit.FValue.FCustomValue !== "") {
        JS = Lit.FValue.FCustomValue}
       else JS = Lit.FValue.GetAsString();
      if (JS.length !== 1) this.RaiseNotSupported(ErrorEl,AContext,20171112021003,"");
      Lit.FValue.SetAsNumber(JS.charCodeAt(1 - 1));
    };
    this.ClonePrimaryExpression = function (El, Src) {
      var Result = null;
      Result = this.CreateElement(El.$class.ClassType(),Src);
      if (Result.$class.ClassType() === $lt125) Result.FName = El.FName;
      return Result;
    };
    this.CreateMulNumber = function (El, JS, n) {
      var Result = null;
      var Mul = null;
      var Value = null;
      if ($lt137.isPrototypeOf(JS)) {
        Value = JS.FValue;
        var $tmp = Value.FValueType;
        if ($tmp === 0) {
          Value.SetAsNumber(NaN);
          return JS;
        } else if ($tmp === 1) {
          Value.SetAsNumber(0);
          return JS;
        } else if ($tmp === 2) {
          if (Value.GetAsBoolean()) {
            Value.SetAsNumber(n)}
           else Value.SetAsNumber(0);
          return JS;
        } else if ($tmp === 3) if (isNaN(Value.GetAsNumber()) || $lp34(Value.GetAsNumber())) {}
        else {
          Value.SetAsNumber(Value.GetAsNumber() * n);
          return JS;
        };
      };
      Mul = this.CreateElement($lt172,El);
      Result = Mul;
      Mul.FA = JS;
      Mul.FB = this.CreateLiteralNumber(El,n);
      return Result;
    };
    this.CreateDivideNumber = function (El, JS, n) {
      var Result = null;
      var Mul = null;
      var Value = null;
      if ((n !== 0) && $lt137.isPrototypeOf(JS)) {
        Value = JS.FValue;
        var $tmp = Value.FValueType;
        if ($tmp === 0) {
          Value.SetAsNumber(NaN);
          return JS;
        } else if ($tmp === 1) {
          Value.SetAsNumber(0);
          return JS;
        } else if ($tmp === 2) {
          if (Value.GetAsBoolean()) {
            Value.SetAsNumber(1 / n)}
           else Value.SetAsNumber(0);
          return JS;
        } else if ($tmp === 3) if (isNaN(Value.GetAsNumber()) || $lp34(Value.GetAsNumber())) {}
        else {
          Value.SetAsNumber(Value.GetAsNumber() / n);
          return JS;
        };
      };
      Mul = this.CreateElement($lt170,El);
      Result = Mul;
      Mul.FA = JS;
      Mul.FB = this.CreateLiteralNumber(El,n);
      return Result;
    };
    this.CreateTruncFloor = function (El, JS, FloorAndCeil) {
      var Result = null;
      var Value = null;
      var Call = null;
      if ($lt137.isPrototypeOf(JS)) {
        Value = JS.FValue;
        var $tmp = Value.FValueType;
        if ($tmp === 0) {
          Value.SetAsNumber(NaN);
          return JS;
        } else if ($tmp === 1) {
          Value.SetAsNumber(0);
          return JS;
        } else if ($tmp === 2) {
          if (Value.GetAsBoolean()) {
            Value.SetAsNumber(1)}
           else Value.SetAsNumber(0);
          return JS;
        } else if ($tmp === 3) {
          if (isNaN(Value.GetAsNumber()) || $lp34(Value.GetAsNumber())) return JS;
          if (FloorAndCeil) {
            Value.SetAsNumber($lp35(Value.GetAsNumber()))}
           else Value.SetAsNumber($lp36(Value.GetAsNumber()));
          return JS;
        };
      };
      Call = this.CreateCallExpression(El);
      Result = Call;
      if (FloorAndCeil) {
        Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(116),El)}
       else Call.FExpr = this.CreatePrimitiveDotExpr("Math.floor",El);
      Call.AddArg(JS);
      return Result;
    };
    this.CreateDotNameExpr = function (PosEl, MExpr, aName) {
      var Result = null;
      Result = this.CreateElement($lt124,PosEl);
      Result.FMExpr = MExpr;
      Result.FName = aName;
      return Result;
    };
    this.CreateDotExpression = function (aParent, Left, Right, CheckRightIntfRef) {
      var Result = null;
      var Dot = null;
      var RightParent = null;
      var Expr = null;
      var ok = false;
      var Call = null;
      Result = null;
      if (Left === null) this.RaiseInconsistency(20170201140827,aParent);
      if (Right === null) this.RaiseInconsistency(20170211192018,aParent);
      if (CheckRightIntfRef && this.IsInterfaceRef(Right)) {
        Call = Right;
        Expr = Call.FArgs.FElements.GetE(1).FExpr;
        Call.FArgs.FElements.GetE(1).FExpr = this.CreateDotExpression(aParent,Left,Expr,false);
        Result = Call;
        return Result;
      };
      ok = false;
      try {
        Result = Right;
        RightParent = null;
        do {
          if (Right.$class.ClassType() === $lt144) {
            RightParent = Right;
            Right = Right.FExpr;
            if (Right === null) {
              RightParent.FExpr = Left;
              break;
            };
          } else if (Right.$class.ClassType() === $lt142) {
            RightParent = Right;
            Right = Right.FMExpr;
            if (Right === null) {
              RightParent.FMExpr = Left;
              break;
            };
          } else if (Right.$class.ClassType() === $lt124) {
            RightParent = Right;
            Right = Right.FMExpr;
            if (Right === null) {
              RightParent.FMExpr = Left;
              break;
            };
          } else if (Right.$class.ClassType() === $lt125) {
            Dot = this.CreateElement($lt124,aParent);
            if (Result === Right) {
              Result = Dot}
             else if ($lt142.isPrototypeOf(RightParent)) {
              RightParent.FMExpr = Dot}
             else if ($lt144.isPrototypeOf(RightParent)) {
              RightParent.FExpr = Dot}
             else if ($lt124.isPrototypeOf(RightParent)) {
              RightParent.FMExpr = Dot}
             else {
              Dot = rtl.freeLoc(Dot);
              this.RaiseInconsistency(20170129141307,aParent);
            };
            Dot.FMExpr = Left;
            Dot.FName = Right.FName;
            $lp({get: function () {
                return Right;
              }, set: function (v) {
                Right = v;
              }});
            break;
          } else {
            this.DoError$2(20161024191240,4007,rtl.getResStr($mod,"sMemberExprMustBeIdentifier"),[],aParent);
          };
        } while (!false);
        ok = true;
      } finally {
        if (!ok) {
          Left = rtl.freeLoc(Left);
          $lp({get: function () {
              return Result;
            }, set: function (v) {
              Result = v;
            }});
        };
      };
      return Result;
    };
    this.CreateOverflowCheckCall = function (GetExpr, PosEl) {
      var Result = null;
      var Call = null;
      Call = this.CreateCallExpression(PosEl);
      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(63),PosEl);
      Call.AddArg(GetExpr);
      Result = Call;
      return Result;
    };
    this.CreateRangeCheckCall = function (GetExpr, MinVal, MaxVal, RTLFunc, PosEl) {
      var Result = null;
      var Call = null;
      Call = this.CreateCallExpression(PosEl);
      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(RTLFunc),PosEl);
      Call.AddArg(GetExpr);
      Call.AddArg(this.CreateLiteralNumber(PosEl,MinVal));
      Call.AddArg(this.CreateLiteralNumber(PosEl,MaxVal));
      Result = Call;
      return Result;
    };
    this.CreateRangeCheckCall_TypeRange = function (aType, GetExpr, AContext, PosEl) {
      var Result = null;
      var Value = null;
      Result = null;
      Value = AContext.Resolver.EvalTypeRange(aType,rtl.createSet(0));
      try {
        if (Value === null) this.RaiseNotSupported(PosEl,AContext,20180424111936,"range checking " + $lp16(aType));
        var $tmp = Value.Kind;
        if ($tmp === 10) {
          var $tmp1 = Value.ElKind;
          if (($tmp1 === 1) || ($tmp1 === 2)) {
            Result = this.CreateRangeCheckCall(GetExpr,Value.RangeStart,Value.RangeEnd,72,PosEl)}
           else if ($tmp1 === 3) {
            Result = this.CreateRangeCheckCall(GetExpr,Value.RangeStart,Value.RangeEnd,71,PosEl)}
           else if ($tmp1 === 4) {}
          else {
            this.RaiseNotSupported(PosEl,AContext,20190220002007,"range checking " + Value.AsDebugString());
          };
        } else {
          this.RaiseNotSupported(PosEl,AContext,20180424112010,"range checking " + Value.AsDebugString());
        };
      } finally {
        $lp17({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
        if (Result === null) GetExpr = rtl.freeLoc(GetExpr);
      };
      return Result;
    };
    this.PrepareAssignDifferentIntegers = function (El, AssignContext) {
      var $Self = this;
      function CutToUIntDouble(IntValue) {
        var Result = 0;
        Result = ((rtl.trunc(IntValue / 0x80000000) & 0x3fffff) * 0x80000000) + (IntValue & 0x7FFFFFFF);
        return Result;
      };
      var aResolver = null;
      var LeftBT = 0;
      var RightBT = 0;
      var Value = null;
      var IntValue = 0;
      var LeftMinVal = 0;
      var LeftMaxVal = 0;
      var RightMinVal = 0;
      var RightMaxVal = 0;
      var Lit = null;
      aResolver = AssignContext.Resolver;
      LeftBT = AssignContext.LeftResolved.BaseType;
      RightBT = AssignContext.RightResolved.BaseType;
      if (!aResolver.GetIntegerRange(LeftBT,{get: function () {
          return LeftMinVal;
        }, set: function (v) {
          LeftMinVal = v;
        }},{get: function () {
          return LeftMaxVal;
        }, set: function (v) {
          LeftMaxVal = v;
        }})) this.RaiseNotSupported(El.Left,AssignContext,20210815195159,"");
      if (!aResolver.GetIntegerRange(RightBT,{get: function () {
          return RightMinVal;
        }, set: function (v) {
          RightMinVal = v;
        }},{get: function () {
          return RightMaxVal;
        }, set: function (v) {
          RightMaxVal = v;
        }})) this.RaiseNotSupported(El.Right,AssignContext,20210815195228,"");
      if ((LeftMinVal <= RightMinVal) && (LeftMaxVal >= RightMaxVal)) return;
      Value = aResolver.Eval(El.Right,{},true);
      try {
        if (Value !== null) {
          var $tmp = Value.Kind;
          if ($tmp === 4) {
            IntValue = Value.Int;
            if ((IntValue >= LeftMinVal) && (IntValue <= LeftMaxVal)) return;
          } else if ($tmp === 5) {
            if (Value.UInt <= 9007199254740991) {
              IntValue = Value.UInt;
              if ((IntValue >= LeftMinVal) && (IntValue <= LeftMaxVal)) return;
            } else this.RaiseNotSupported(El.Right,AssignContext,20210815214534,"");
          } else if ($tmp === 13) {
            return}
           else {
            this.RaiseNotSupported(El.Right,AssignContext,20210815204203,"right=" + Value.AsDebugString());
          };
          var $tmp1 = LeftBT;
          if ($tmp1 === 19) {
            IntValue = IntValue & 0xFF}
           else if ($tmp1 === 20) {
            IntValue = IntValue & 0xFF;
            if (IntValue > 0x7F) IntValue = IntValue - 0x100;
          } else if ($tmp1 === 21) {
            IntValue = IntValue & 0xFFFF}
           else if ($tmp1 === 22) {
            IntValue = IntValue & 0xFFFF;
            if (IntValue > 0x7FFF) IntValue = IntValue - 0x10000;
          } else if ($tmp1 === 25) {
            IntValue = IntValue & 0xFFFFFFFF}
           else if ($tmp1 === 26) {
            IntValue = IntValue & 0xFFFFFFFF;
            if (IntValue > 0x7FFFFFFF) IntValue = IntValue - 0x100000000;
          } else if ($tmp1 === 27) {
            IntValue = CutToUIntDouble(IntValue)}
           else if ($tmp1 === 28) IntValue = CutToUIntDouble(IntValue);
          if ($lt137.isPrototypeOf(AssignContext.RightSide)) {
            Lit = AssignContext.RightSide;
            if (Lit.FValue.FValueType === 3) {
              Lit.FValue.SetAsNumber(IntValue);
              Lit.FValue.FCustomValue = "";
              return;
            };
          };
          if (AssignContext.RightSide !== null) rtl.free(AssignContext,"RightSide");
          AssignContext.RightSide = this.CreateLiteralNumber(El.Right,IntValue);
        };
      } finally {
        $lp17({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
    };
    this.CreateReferencePath = function (El, AContext, Kind, Full, Ref) {
      var $Self = this;
      var Result = "";
      var aResolver = null;
      function IsLocalVar() {
        var Result = false;
        Result = false;
        if (El.$class.ClassType() === $lt89) return true;
        if (El.$class.ClassType() === $lt90) return true;
        if (aResolver === null) return true;
        if (El.FParent === null) $Self.RaiseNotSupported(El,AContext,20170203121306,$lp16(El));
        if (El.FParent.$class.ClassType() === $lt104) return true;
        if (!$lt77.isPrototypeOf(El.FParent)) return Result;
        Result = true;
        return Result;
      };
      function Prepend(aPath, Prefix) {
        if ((aPath.get() !== "") && (aPath.get().charAt(0) !== "[")) aPath.set("." + aPath.get());
        aPath.set(Prefix + aPath.get());
      };
      function PrependClassOrRecName(Path, ClassOrRec) {
        if ((ClassOrRec.$class.ClassType() === $lt72) && ClassOrRec.IsExternal) {
          do {
            Prepend(Path,ClassOrRec.ExternalName);
            if (ClassOrRec.FParent.$class.ClassType() === $lt72) {
              ClassOrRec = rtl.as(ClassOrRec.FParent,$lt72)}
             else break;
          } while (!false)}
         else Prepend(Path,$Self.CreateGlobalTypePath(ClassOrRec,AContext));
      };
      function NeedsWithExpr() {
        var Result = false;
        var Parent = null;
        if ((Ref === null) || (Ref.WithExprScope === null)) return false;
        Parent = El.FParent;
        if ((Parent.$class.ClassType() === $lt72) && (Parent.HelperForType !== null)) {
          if (aResolver.IsHelperForMember(El)) {}
          else return false;
        };
        Result = true;
        return Result;
      };
      function ProcSelfIsInstance(Proc) {
        var Result = false;
        var C = null;
        if (Proc === null) return false;
        C = Proc.$class.ClassType();
        Result = (C === $lt94) || (C === $lt67) || (C === $lt109) || (C === $lt173);
        return Result;
      };
      function Append_GetClass(Member) {
        var P = null;
        P = Member.FParent;
        if (P === null) $Self.RaiseNotSupported(Member,AContext,20191018125004,"");
        if (P.$class.ClassType() === $lt72) {
          if (P.IsExternal) return;
          if (Result !== "") {
            Result = Result + "." + $Self.GetBIName(138)}
           else Result = $Self.GetBIName(138);
        } else if (P.$class.ClassType() === $lt81) {
          if (Result !== "") {
            Result = Result + "." + $Self.GetBIName(139)}
           else Result = $Self.GetBIName(139);
        } else $Self.RaiseNotSupported(Member,AContext,20190106110525,"");
      };
      function GetAbsoluteAlias() {
        var Result = "";
        var AbsolResolved = $lt84.$new();
        aResolver.ComputeElement(El.AbsoluteExpr,AbsolResolved,rtl.createSet(1),null);
        Result = $Self.CreateReferencePath(AbsolResolved.IdentEl,AContext,Kind,Full,Ref);
        return Result;
      };
      function ImplToDecl(El) {
        var Result = null;
        var ProcScope = null;
        Result = El;
        if ($lt60.isPrototypeOf(El.FData)) {
          ProcScope = El.FData;
          if (ProcScope.DeclarationProc !== null) Result = ProcScope.DeclarationProc;
        };
        return Result;
      };
      function IsA(SrcType, DstType) {
        var Result = false;
        var C = null;
        while (SrcType !== null) {
          if (SrcType === DstType) return true;
          C = SrcType.$class.ClassType();
          if (C === $lt72) {
            SrcType = SrcType.FData.DirectAncestor}
           else if ((C === $lt130) || (C === $lt131)) {
            SrcType = SrcType.DestType}
           else if (C === $lt120) {
            if ($lt138.isPrototypeOf(SrcType.FData)) {
              SrcType = SrcType.FData.SpecializedType}
             else $Self.RaiseInconsistency(20191027172642,SrcType);
          } else return false;
        };
        Result = false;
        return Result;
      };
      function ShortRefGlobal() {
        var Result$1 = false;
        var ElClass = null;
        var Proc = null;
        ElClass = El.$class.ClassType();
        if (ElClass.InheritsFrom($lt76)) {
          if (El.FParent.$class.ClassType() === $lt77) return false;
          Result = $Self.CreateGlobalTypePath(El,AContext);
          return true;
        } else if (ElClass.InheritsFrom($lt67)) {
          Proc = El;
          if ($Self.ProcCanHaveShortRef(Proc)) {
            if (aResolver.ProcHasSelf(Proc)) {
              aResolver.RaiseNotYetImplemented(20201030233511,El,"");
            };
            Result = $Self.CreateStaticProcPath(Proc,AContext);
            return true;
          };
        } else if (ElClass === $lt139) {
          Result = $Self.CreateGlobalElPath(El,AContext);
          return true;
        };
        Result$1 = false;
        return Result$1;
      };
      var FoundModule = null;
      var ParentEl = null;
      var CurEl = null;
      var Dot = null;
      var WithData = null;
      var ShortName = "";
      var SelfContext = null;
      var ElClass = null;
      var IsClassRec = false;
      var VarKinds = {};
      var Proc = null;
      Result = "";
      aResolver = AContext.Resolver;
      if ($lt76.isPrototypeOf(El) && (AContext !== null)) El = aResolver.ResolveAliasType(El,true);
      ElClass = El.$class.ClassType();
      if (ElClass.InheritsFrom($lt80) && (El.AbsoluteExpr !== null) && (AContext.Resolver !== null)) return GetAbsoluteAlias();
      if ($lt38.isPrototypeOf(AContext)) {
        Dot = AContext;
        if (aResolver !== null) {
          if (ElClass.InheritsFrom($lt80)) {
            if (rtl.neSet(rtl.intersectSet(rtl.intersectSet(rtl.createSet(4,5),$mod.ClassVarModifiersType),El.VarModifiers),{}) && (Dot.Access === 1) && aResolver.ResolvedElIsClassOrRecordInstance(Dot.LeftResolved)) {
              Append_GetClass(El);
            };
          } else if (aResolver.IsMethod_SelfIsClass(El) && aResolver.ResolvedElIsClassOrRecordInstance(Dot.LeftResolved)) Append_GetClass(El);
        };
      } else if (IsLocalVar()) {}
      else if (ElClass.InheritsFrom($lt67) && (El.LibrarySymbolName !== null) && !$lt73.isPrototypeOf(El.FParent)) {
        if (Kind === 2) {
          Result = this.ComputeConstString(El.LibrarySymbolName,AContext,true)}
         else Result = "";
        return Result;
      } else if (ElClass.InheritsFrom($lt80) && (El.ExportName !== null) && !$lt73.isPrototypeOf(El.FParent)) {
        if (Kind === 2) {
          Result = this.ComputeConstString(El.ExportName,AContext,true)}
         else Result = "";
        return Result;
      } else if ((ElClass === $lt72) && El.IsExternal) {
        Result = El.ExternalName;
        if ($lt73.isPrototypeOf(El.FParent)) PrependClassOrRecName({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }},El.FParent);
        return Result;
      } else if (NeedsWithExpr()) {
        WithData = rtl.as(Ref.WithExprScope,$lt19);
        if (WithData.WithVarName === "") this.RaiseNotSupported(WithData.Expr,AContext,20190209092506,$lp16(El));
        Prepend({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }},WithData.WithVarName);
        if (!(1 in WithData.Flags) && aResolver.IsMethod_SelfIsClass(El)) {
          Append_GetClass(El);
        };
      } else {
        if (El.FParent === null) this.RaiseNotSupported(El,AContext,20170201172141,$lp16(El));
        if ((10 in this.FOptions) && (Kind === 2)) {
          if (ShortRefGlobal()) return Result;
        };
        El = ImplToDecl(El);
        CurEl = El;
        do {
          ParentEl = CurEl.FParent;
          if (ParentEl === null) break;
          if ($lt77.isPrototypeOf(ParentEl)) break;
          ParentEl = ImplToDecl(ParentEl);
          IsClassRec = (ParentEl.$class.ClassType() === $lt72) || (ParentEl.$class.ClassType() === $lt81);
          if (IsClassRec) {
            if ((ParentEl.$class.ClassType() === $lt72) && (ParentEl.HelperForType !== null)) {
              if ((El === CurEl) && aResolver.IsHelperForMember(CurEl)) {
                ParentEl = aResolver.ResolveAliasType(ParentEl.HelperForType,true);
                IsClassRec = (ParentEl.$class.ClassType() === $lt72) || (ParentEl.$class.ClassType() === $lt81);
                if (!IsClassRec) this.RaiseNotSupported(El,AContext,20190926091356,"");
              } else {
                PrependClassOrRecName({get: function () {
                    return Result;
                  }, set: function (v) {
                    Result = v;
                  }},ParentEl);
                break;
              };
            };
            if (Full) {
              PrependClassOrRecName({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},ParentEl);
              break;
            };
            if ($lt80.isPrototypeOf(El)) {
              if (rtl.neSet(rtl.intersectSet(El.VarModifiers,rtl.createSet(4,5)),{})) {
                VarKinds = rtl.createSet(1,2,3)}
               else VarKinds = rtl.createSet(3);
            } else if ($lt67.isPrototypeOf(El)) {
              Proc = El;
              if (ProcSelfIsInstance(Proc)) {
                VarKinds = rtl.createSet(2,3)}
               else VarKinds = rtl.createSet(1,2,3);
            } else VarKinds = rtl.createSet(1,2,3);
            if (rtl.neSet(VarKinds,rtl.createSet(1))) {
              SelfContext = AContext.GetSelfContext();
              if ((SelfContext !== null) && IsA(SelfContext.ThisVar.Element,ParentEl)) {
                ShortName = this.GetLocalName(SelfContext.ThisVar.Element,VarKinds,AContext);
                if (ShortName === "") {
                  if (!(1 in VarKinds)) {
                    this.RaiseNotSupported(El,AContext,20200920214421,"");
                  };
                  PrependClassOrRecName({get: function () {
                      return Result;
                    }, set: function (v) {
                      Result = v;
                    }},ParentEl);
                  break;
                };
                if (ProcSelfIsInstance(SelfContext.PasElement)) {
                  if (aResolver.IsMethod_SelfIsClass(El)) Append_GetClass(El);
                };
                Prepend({get: function () {
                    return Result;
                  }, set: function (v) {
                    Result = v;
                  }},ShortName);
                break;
              };
            };
            ShortName = this.GetLocalName(ParentEl,VarKinds,AContext);
            if (ShortName !== "") {
              Prepend({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},ShortName);
              break;
            } else if ((ParentEl.$class.ClassType() === $lt72) && ParentEl.IsExternal) {
              PrependClassOrRecName({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},ParentEl);
              break;
            } else if (10 in this.FOptions) {
              PrependClassOrRecName({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},ParentEl);
              break;
            } else {
              ShortName = this.TransformElToJSName(ParentEl,AContext);
              Prepend({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},ShortName);
            };
          } else {
            ShortName = this.GetLocalName(ParentEl,rtl.createSet(1),AContext);
            if (ShortName !== "") {
              Prepend({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},ShortName);
              break;
            } else if (ParentEl.$class.ClassType() === $lt79) {
              FoundModule = ParentEl.GetModule();
              if (FoundModule === null) this.RaiseInconsistency(20161024192755,El);
              Prepend({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},this.TransformModuleName(FoundModule,true,AContext) + "." + this.GetBIName(124));
              break;
            } else if ($lt96.isPrototypeOf(ParentEl)) {
              Prepend({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},this.TransformModuleName(ParentEl,true,AContext));
              break;
            } else if (ParentEl.$class.ClassType() === $lt99) {
              Prepend({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},ParentEl.FName);
            };
          };
          CurEl = ParentEl;
        } while (!false);
      };
      var $tmp = Kind;
      if ($tmp === 1) {
        if (Result !== "") Result = Result + "."}
       else if ($tmp === 2) {
        if (10 in this.FOptions) if (ShortRefGlobal()) return Result;
        ShortName = this.TransformElToJSName(El,AContext);
        if (Result === "") {
          Result = ShortName}
         else if ((ShortName !== "") && (ShortName.charCodeAt(0) in rtl.createSet(91,40))) {
          Result = Result + ShortName}
         else Result = Result + "." + ShortName;
      };
      return Result;
    };
    this.CreateReferencePathExpr = function (El, AContext, Full, Ref) {
      var Result = null;
      var Name = "";
      var Src = null;
      Name = this.CreateReferencePath(El,AContext,2,Full,Ref);
      if (Ref !== null) {
        Src = Ref.FElement}
       else Src = null;
      Result = this.CreatePrimitiveDotExpr(Name,Src);
      return Result;
    };
    this.CreateGlobalTypePath = function (El, AContext) {
      var Result = "";
      var aType = null;
      aType = AContext.Resolver.ResolveAliasType(El,true);
      Result = this.CreateGlobalElPath(aType,AContext);
      return Result;
    };
    this.CreateStaticProcPath = function (El, AContext) {
      var Result = "";
      if (El.IsAbstract() || El.IsExternal()) {
        this.RaiseNotSupported(El,AContext,20201101185117,"")}
       else if (El.IsStatic() || $lt105.isPrototypeOf(El.FParent) || (El.FData.SpecializedFromItem !== null)) {
        Result = this.CreateGlobalElPath(El,AContext)}
       else this.RaiseNotSupported(El,AContext,20200925104007,"");
      return Result;
    };
    this.CreateGlobalElPath = function (El, AContext) {
      var Result = "";
      var ShortRefGlobals = false;
      var Parent = null;
      var CurModule = null;
      var ElClass = null;
      var aResolver = null;
      aResolver = AContext.Resolver;
      Result = AContext.GetLocalName(El,rtl.createSet(1));
      if (Result !== "") {
        if (6 in this.FOptions) this.StoreImplJSLocal(El,AContext);
        return Result;
      };
      ShortRefGlobals = 10 in this.FOptions;
      Parent = El.FParent;
      if (Parent !== null) {
        Result = AContext.GetLocalName(Parent,rtl.createSet(1));
        if (Result === "") {
          ElClass = Parent.$class.ClassType();
          if (ElClass.InheritsFrom($lt76)) {
            Result = this.CreateGlobalElPath(Parent,AContext)}
           else if (ElClass.InheritsFrom($lt105)) {
            CurModule = Parent.GetModule();
            Result = this.TransformModuleName(CurModule,true,AContext);
            if ((Parent.$class.ClassType() === $lt79) && (CurModule !== AContext.GetRootContext().PasElement.GetModule())) {
              Result = Result + "." + this.GetBIName(124);
            };
          } else if (ElClass.InheritsFrom($lt96)) {
            Result = this.TransformModuleName(Parent,true,AContext)}
           else this.RaiseNotSupported(El,AContext,20200609230526,$lp14(El));
        } else {
          if ((6 in this.FOptions) && (aResolver.GetParentProcBody(Parent) === null)) this.StoreImplJSLocal(Parent,AContext);
        };
        Result = Result + "." + this.TransformElToJSName(El,AContext);
      } else {
        if ($lt96.isPrototypeOf(El)) {
          Result = this.TransformModuleName(El,true,AContext);
          return Result;
        } else this.RaiseNotSupported(El,AContext,20201010221704,$lp14(El));
      };
      if (ShortRefGlobals) Result = this.CreateGlobalAliasForeign(El,Result,AContext);
      return Result;
    };
    this.GetLocalName = function (El, Filter, AContext) {
      var Result = "";
      if (6 in this.FOptions) {
        if (1 in Filter) {
          Result = AContext.GetLocalName(El,rtl.createSet(1));
          if (Result !== "") {
            this.StoreImplJSLocal(El,AContext);
            return Result;
          } else if (rtl.eqSet(Filter,rtl.createSet(1))) return "";
        };
      };
      Result = AContext.GetLocalName(El,Filter);
      return Result;
    };
    this.ProcCanHaveShortRef = function (Proc) {
      var Result = false;
      var C = null;
      if (Proc.IsExternal() || Proc.IsVirtual()) return false;
      C = Proc.FParent.$class.ClassType();
      if (C === $lt77) return false;
      if (C.InheritsFrom($lt105)) return true;
      if (Proc.IsStatic()) return true;
      if (Proc.FData.SpecializedFromItem !== null) return true;
      Result = false;
      return Result;
    };
    this.StoreImplJSLocal = function (El, AContext) {
      var Ctx = null;
      var CurEl = null;
      var Data = null;
      var ImplJS = null;
      Ctx = AContext;
      while (Ctx !== null) {
        CurEl = Ctx.PasElement;
        if (CurEl !== null) {
          Data = CurEl.FData;
          if ($lt16.isPrototypeOf(Data)) {
            ImplJS = Data.ImplJS;
            if (ImplJS !== null) ImplJS.AddShortRef(El);
          } else if ($lt13.isPrototypeOf(Data)) {
            ImplJS = Data.ImplJS;
            if (ImplJS !== null) ImplJS.AddShortRef(El);
          };
        };
        Ctx = Ctx.Parent;
      };
    };
    this.StoreImplJSLocals = function (ModScope, IntfContext) {
      var i = 0;
      var StoredIndex = 0;
      var CtxVar = null;
      var StoredVar = null;
      var CurName = "";
      ModScope.ClearStoreJSLocalVars();
      ModScope.StoreJSLocalVars = rtl.arraySetLength(ModScope.StoreJSLocalVars,null,rtl.length(IntfContext.LocalVars));
      StoredIndex = 0;
      for (var $l = 0, $end = rtl.length(IntfContext.LocalVars) - 1; $l <= $end; $l++) {
        i = $l;
        CtxVar = IntfContext.LocalVars[i];
        if ((CtxVar.Element === null) || (CtxVar.Kind !== 1)) continue;
        if ($lt77.isPrototypeOf(CtxVar.Element.FParent)) continue;
        CurName = CtxVar.Name;
        if ((CurName === "") || (CurName === "this") || (CurName === this.GetBIName(136)) || (CurName === this.GetBIName(124))) continue;
        StoredVar = $lt7.$create("Create");
        StoredVar.Name = CurName;
        StoredVar.Element = CtxVar.Element;
        ModScope.StoreJSLocalVars[StoredIndex] = StoredVar;
        StoredIndex += 1;
      };
      ModScope.StoreJSLocalVars = rtl.arraySetLength(ModScope.StoreJSLocalVars,null,StoredIndex);
    };
    this.RestoreImplJSLocals = function (ModScope, IntfContext) {
      IntfContext.PrecompiledVars = ModScope.StoreJSLocalVars;
    };
    this.CreateImplementationSection = function (El, IntfContext) {
      var Result = null;
      var Src = null;
      var ImplContext = null;
      var ImplDecl = null;
      var JS = null;
      var FunDecl = null;
      var i = 0;
      Result = null;
      FunDecl = this.CreateFunctionSt(El.ImplementationSection,true,true);
      Src = FunDecl.FFuncDef.FBody.FA;
      IntfContext.ImplSrcElements = Src;
      ImplContext = $lt36.$create("Create$1",[El.ImplementationSection,Src,IntfContext]);
      try {
        IntfContext.ImplContext = ImplContext;
        if (IntfContext.ImplHeaderStatements !== null) {
          for (var $l = 0, $end = IntfContext.ImplHeaderStatements.FCount - 1; $l <= $end; $l++) {
            i = $l;
            JS = rtl.getObject(IntfContext.ImplHeaderStatements.Get(i));
            ImplContext.AddHeaderStatement(JS);
            IntfContext.ImplHeaderStatements.Put(i,null);
          };
          $lp({p: IntfContext, get: function () {
              return this.p.ImplHeaderStatements;
            }, set: function (v) {
              this.p.ImplHeaderStatements = v;
            }});
        };
        if (El.ImplementationSection !== null) {
          ImplDecl = this.ConvertDeclarations(El.ImplementationSection,ImplContext);
          if (ImplDecl !== null) this.RaiseInconsistency(20170910175032,El);
        };
        IntfContext.ImplHeaderIndex = ImplContext.HeaderIndex;
        Result = FunDecl;
      } finally {
        IntfContext.ImplContext = null;
        ImplContext = rtl.freeLoc(ImplContext);
        if (Result === null) {
          FunDecl = rtl.freeLoc(FunDecl);
          IntfContext.ImplSrcElements = null;
        };
      };
      return Result;
    };
    this.CreateInitSection = function (El, Src, AContext) {
      var RootContext = null;
      RootContext = rtl.as(AContext.GetRootContext(),$lt32);
      if ((El.InitializationSection != null) || $lt98.isPrototypeOf(El) || (rtl.length(RootContext.GlobalClassMethods) > 0)) this.AddToSourceElements(Src,this.ConvertInitializationSection(El,AContext));
      if (El.FinalizationSection != null) throw $lt48.$create("Create$1",["TPasToJSConverter.ConvertInitializationSection: finalization section is not supported"]);
    };
    this.CreateExportsSection = function (El, Src, AContext) {
      var $Self = this;
      function AddPropFunction(ObjLit, AliasName, Arg1, BodyJS, PosEl) {
        var Lit = null;
        var FuncSt = null;
        Lit = ObjLit.FElements.AddElement();
        Lit.FName = AliasName;
        FuncSt = $Self.CreateFunctionSt(PosEl,true,false);
        Lit.FExpr = FuncSt;
        if (Arg1 !== "") FuncSt.FFuncDef.FTypedParams.AddParam(Arg1);
        FuncSt.FFuncDef.FBody.FA = BodyJS;
      };
      var ExportSymbols = null;
      var aResolver = null;
      var VarsExpSt = null;
      var ExpSt = null;
      var i = 0;
      var Symb = null;
      var Ref = null;
      var NamePath = "";
      var AliasName = "";
      var EvalValue = null;
      var Decl = null;
      var ResolvedEl = $lt84.$new();
      var Call = null;
      var VarsObjLit = null;
      var VarObjLit = null;
      var Lit = null;
      var SubLit = null;
      var RetSt = null;
      var AssignSt = null;
      ExportSymbols = El.LibrarySection.ExportSymbols;
      if (ExportSymbols.FCount === 0) return;
      aResolver = AContext.Resolver;
      VarsExpSt = null;
      for (var $l = 0, $end = ExportSymbols.FCount - 1; $l <= $end; $l++) {
        i = $l;
        Symb = rtl.as(rtl.getObject(ExportSymbols.Get(i)),$lt174);
        if (Symb.NameExpr !== null) {
          aResolver.ComputeElement(Symb.NameExpr,ResolvedEl,rtl.createSet(3),null);
          Decl = ResolvedEl.IdentEl;
        } else {
          if (!$lt71.isPrototypeOf(Symb.FData)) this.RaiseNotSupported(Symb,AContext,20211020142506,$lp16(Symb.FData));
          Ref = Symb.FData;
          Decl = Ref.FDeclaration;
        };
        NamePath = this.CreateReferencePath(Decl,AContext,2,true,null);
        AliasName = "";
        if (Symb.ExportName !== null) {
          EvalValue = aResolver.Eval(Symb.ExportName,rtl.createSet(0),true);
          if (EvalValue === null) this.RaiseNotSupported(Symb.ExportName,AContext,20211020144200,"");
          var $tmp = EvalValue.Kind;
          if ($tmp === 8) {
            AliasName = EvalValue.S}
           else {
            $lp17({get: function () {
                return EvalValue;
              }, set: function (v) {
                EvalValue = v;
              }});
            this.RaiseNotSupported(Symb.ExportName,AContext,20211020144404,"");
          };
          $lp17({get: function () {
              return EvalValue;
            }, set: function (v) {
              EvalValue = v;
            }});
        } else {
          if (Decl.FName === "") this.RaiseNotSupported(Symb,AContext,20211020144730,"");
          AliasName = Decl.FName;
        };
        if (Decl.$class.ClassType() === $lt80) {
          if (VarsExpSt === null) {
            VarsExpSt = this.CreateExportStatement(2,this.GetBIName(129),this.CreateElement($lt132,Symb),Symb);
            this.AddToSourceElements(Src,VarsExpSt);
            Call = this.CreateCallExpression(Symb);
            this.AddToSourceElements(Src,Call);
            Call.FExpr = this.CreatePrimitiveDotExpr("Object.defineProperties",Symb);
            Call.AddArg(this.CreatePrimitiveDotExpr(this.GetBIName(129),Symb));
            VarsObjLit = this.CreateElement($lt132,Symb);
            Call.AddArg(VarsObjLit);
          };
          Lit = VarsObjLit.FElements.AddElement();
          Lit.FName = AliasName;
          VarObjLit = this.CreateElement($lt132,Symb);
          Lit.FExpr = VarObjLit;
          SubLit = VarObjLit.FElements.AddElement();
          SubLit.FName = "enumerable";
          SubLit.FExpr = this.CreateLiteralBoolean(Symb,true);
          RetSt = this.CreateElement($lt160,Symb);
          RetSt.FExpr = this.CreatePrimitiveDotExpr(NamePath,Symb);
          AddPropFunction(VarObjLit,"get","",RetSt,Symb);
          AssignSt = this.CreateElement($lt133,Symb);
          AssignSt.FLHS = this.CreatePrimitiveDotExpr(NamePath,Symb);
          AssignSt.FExpr = this.CreatePrimitiveDotExpr($impl.TempRefObjSetterArgName,Symb);
          AddPropFunction(VarObjLit,"set",$impl.TempRefObjSetterArgName,AssignSt,Symb);
        } else {
          ExpSt = this.CreateExportStatement(2,AliasName,this.CreatePrimitiveDotExpr(NamePath,Symb),Symb);
          this.AddToSourceElements(Src,ExpSt);
        };
      };
    };
    this.AddRTLRun = function (El, ModuleName, Src, AContext) {
      var Result = null;
      var Call = null;
      if (AContext === null) ;
      Call = this.CreateCallExpression(El);
      this.AddToSourceElements(Src,Call);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),"run"]);
      if (ModuleName !== "") Call.AddArg(this.CreateLiteralString(El,ModuleName));
      Result = Call;
      return Result;
    };
    this.AddHeaderStatement = function (JS, PosEl, aContext) {
      var SectionCtx = null;
      if (JS === null) return;
      SectionCtx = aContext.GetMainSectionContext();
      if (SectionCtx === null) this.RaiseNotSupported(PosEl,aContext,20200606142555,"");
      SectionCtx.AddHeaderStatement(JS);
    };
    this.AddImplHeaderStatement = function (JS, PosEl, aContext) {
      var IntfSec = null;
      if (JS === null) return;
      IntfSec = aContext.GetContextOfType($lt37);
      if (IntfSec === null) this.RaiseNotSupported(PosEl,aContext,20200606142555,"");
      IntfSec.AddImplHeaderStatement(JS);
    };
    this.AddDelayedInits = function (El, Src, AContext) {
      var Result = false;
      var aResolver = null;
      var Hub = null;
      var i = 0;
      var JS = null;
      var AssignSt = null;
      var FunDecl = null;
      var ImplSrc = null;
      Result = false;
      aResolver = AContext.Resolver;
      if (aResolver === null) return Result;
      if (El === null) ;
      Hub = rtl.as(aResolver.FHub,$lt24);
      ImplSrc = null;
      for (var $l = 0, $end = Hub.JSDelaySpecializeCount() - 1; $l <= $end; $l++) {
        i = $l;
        JS = this.CreateDelaySpecializeInit(Hub.GetJSDelaySpecializes(i),AContext);
        if (JS === null) continue;
        if (ImplSrc === null) {
          AssignSt = this.CreateElement($lt133,El);
          this.AddToSourceElements(Src,AssignSt);
          AssignSt.FLHS = this.CreateMemberExpression([this.GetBIName(136),this.GetBIName(125)]);
          FunDecl = this.CreateFunctionSt(El,true,true);
          AssignSt.FExpr = FunDecl;
          ImplSrc = FunDecl.FFuncDef.FBody.FA;
        };
        this.AddToSourceElements(ImplSrc,JS);
        Result = true;
      };
      return Result;
    };
    this.CreateDelaySpecializeInit = function (El, AContext) {
      var Result = null;
      var C = null;
      var Path = "";
      var Call = null;
      var DotExpr = null;
      var AssignSt = null;
      var Arr = null;
      var ElTypeHi = null;
      var ElTypeLo = null;
      var aResolver = null;
      Result = null;
      if (!this.IsElementUsed(El)) return Result;
      if (!AContext.Resolver.IsFullySpecialized(El)) this.RaiseNotSupported(El,AContext,20201202145045,"not fully specialized, probably a bug in the analyzer");
      if (!this.SpecializeNeedsDelay(El,AContext)) return Result;
      C = El.$class.ClassType();
      if ((C === $lt81) || (C === $lt72)) {
        if ((C === $lt72) && El.IsExternal) return Result;
        Path = this.CreateReferencePath(El,AContext,2,false,null) + "." + this.GetBIName(26);
        Call = this.CreateCallExpression(El);
        Call.FExpr = this.CreatePrimitiveDotExpr(Path,El);
        Result = Call;
      } else if ((C === $lt118) || (C === $lt93)) {
        if (!this.HasTypeInfo(El,AContext)) return Result;
        DotExpr = this.CreateElement($lt124,El);
        DotExpr.FMExpr = this.CreateTypeInfoRef(El,AContext,El);
        DotExpr.FName = this.GetBIName(158);
        Call = this.CreateCallExpression(El);
        Call.FExpr = DotExpr;
        Result = Call;
      } else if (C === $lt107) {
        if (!this.HasTypeInfo(El,AContext)) return Result;
        aResolver = AContext.Resolver;
        Arr = El;
        ElTypeHi = aResolver.ResolveAliasType(Arr.ElType,false);
        ElTypeLo = aResolver.ResolveAliasType(ElTypeHi,true);
        if (rtl.length(Arr.Ranges) > 0) {
          while (ElTypeLo.$class.ClassType() === $lt107) {
            Arr = ElTypeLo;
            if (rtl.length(Arr.Ranges) === 0) this.RaiseNotSupported(Arr,AContext,20200902155418,"static array of anonymous array");
            ElTypeHi = aResolver.ResolveAliasType(Arr.ElType,false);
            ElTypeLo = aResolver.ResolveAliasType(ElTypeHi,true);
          };
        };
        AssignSt = this.CreateElement($lt133,El);
        AssignSt.FLHS = this.CreateDotNameExpr(El,this.CreateTypeInfoRef(El,AContext,El),this.GetBIName(147));
        AssignSt.FExpr = this.CreateTypeInfoRef(ElTypeHi,AContext,El);
        Result = AssignSt;
      } else this.RaiseNotSupported(El,AContext,20200831115251,"");
      return Result;
    };
    this.CreateReferencedSet = function (El, SetExpr) {
      var Result = null;
      var Call = null;
      Call = this.CreateCallExpression(El);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(111)]);
      Call.AddArg(SetExpr);
      Result = Call;
      return Result;
    };
    this.CreateRecordInit = function (aRecord, Expr, El, AContext) {
      var Result = null;
      var aResolver = null;
      var ObjLit = null;
      var GUID = $lt103.$new();
      Result = null;
      if (Expr !== null) {
        aResolver = AContext.Resolver;
        if (aResolver !== null) {
          if (aResolver.GetAssignGUIDString(aRecord,Expr,GUID)) {
            ObjLit = this.CreateGUIDObjLit(aRecord,GUID,El,AContext);
            Result = this.CreateRecordCallClone(El,aRecord,ObjLit,AContext);
            return Result;
          };
        };
        if ($lt175.isPrototypeOf(Expr)) Result = this.ConvertRecordValues(Expr,AContext);
        if (Result === null) this.RaiseNotSupported(Expr,AContext,20161024192747,"");
      } else {
        Result = this.CreateRecordCallNew(El,aRecord,AContext);
      };
      return Result;
    };
    this.CreateRecordCallNew = function (PosEl, RecTypeEl, AContext) {
      var Result = null;
      var Expr = null;
      var Call = null;
      Expr = this.CreateReferencePathExpr(RecTypeEl,AContext,false,null);
      Call = this.CreateCallExpression(PosEl);
      Call.FExpr = this.CreateDotNameExpr(PosEl,Expr,this.GetBIName(79));
      Result = Call;
      return Result;
    };
    this.CreateRecordCallClone = function (PosEl, RecTypeEl, RecordExpr, AContext) {
      var Result = null;
      var Expr = null;
      var CallExpr = null;
      var DotExpr = null;
      var Call = null;
      Expr = this.CreateReferencePathExpr(RecTypeEl,AContext,false,null);
      if ($lt144.isPrototypeOf(RecordExpr)) {
        CallExpr = RecordExpr.FExpr;
        if ($lt124.isPrototypeOf(CallExpr)) {
          DotExpr = CallExpr;
          if ($mod.JSEquals(Expr,DotExpr.FMExpr)) {
            if ((DotExpr.FName === this.GetBIName(79)) || (DotExpr.FName === this.GetBIName(76))) {
              Expr = rtl.freeLoc(Expr);
              return RecordExpr;
            };
          };
        };
      };
      Call = this.CreateCallExpression(PosEl);
      Call.FExpr = this.CreateDotNameExpr(PosEl,Expr,this.GetBIName(76));
      Result = Call;
      if (RecordExpr !== null) Call.AddArg(RecordExpr);
      return Result;
    };
    var LocalVarName = "r";
    this.CreateRecordFunctionNew = function (El, AContext, Fields) {
      var Result = null;
      var AssignSt = null;
      var CurAssignSt = null;
      var FDS = null;
      var FD = null;
      var RetSt = null;
      var i = 0;
      var PasVar = null;
      var Call = null;
      var VarSt = null;
      var Src = null;
      var VarName = "";
      Result = null;
      if (Fields.FCount === 0) return Result;
      AssignSt = this.CreateElement($lt133,El);
      try {
        AssignSt.FLHS = this.CreateMemberExpression(["this",this.GetBIName(79)]);
        FDS = this.CreateFunctionSt(El,true,false);
        AssignSt.FExpr = FDS;
        FD = FDS.FFuncDef;
        Src = this.CreateElement($lt123,El);
        FD.FBody.FA = Src;
        Call = this.CreateCallExpression(El);
        Call.FExpr = this.CreateMemberExpression(["Object","create"]);
        Call.AddArg(this.CreatePrimitiveDotExpr("this",El));
        VarSt = this.CreateVarStatement(LocalVarName,Call,El);
        this.AddToSourceElements(Src,VarSt);
        for (var $l = 0, $end = Fields.FCount - 1; $l <= $end; $l++) {
          i = $l;
          PasVar = rtl.getObject(Fields.Get(i));
          CurAssignSt = this.CreateElement($lt133,El);
          VarName = this.TransformElToJSName(PasVar,AContext);
          CurAssignSt.FLHS = this.CreateMemberExpression([LocalVarName,VarName]);
          CurAssignSt.FExpr = this.CreateVarInit(PasVar,AContext);
          this.AddToSourceElements(Src,CurAssignSt);
        };
        RetSt = this.CreateElement($lt160,El);
        this.AddToSourceElements(Src,RetSt);
        RetSt.FExpr = this.CreatePrimitiveDotExpr(LocalVarName,El);
        Result = AssignSt;
      } finally {
        if (Result === null) AssignSt = rtl.freeLoc(AssignSt);
      };
      return Result;
    };
    var EqualParamName = "b";
    this.CreateRecordFunctionEqual = function (El, AContext, Fields) {
      var $Self = this;
      var Result = null;
      var LastAndExpr = null;
      function Add_AndExpr_ToReturnSt(RetSt, PasVar, Expr) {
        var AndExpr = null;
        if (RetSt.FExpr === null) {
          RetSt.FExpr = Expr}
         else {
          AndExpr = $Self.CreateElement($lt176,PasVar);
          if (LastAndExpr === null) {
            AndExpr.FA = RetSt.FExpr;
            RetSt.FExpr = AndExpr;
          } else {
            AndExpr.FA = LastAndExpr.FB;
            LastAndExpr.FB = AndExpr;
          };
          AndExpr.FB = Expr;
          LastAndExpr = AndExpr;
        };
      };
      var AssignSt = null;
      var FD = null;
      var RetSt = null;
      var i = 0;
      var PasVar = null;
      var FDS = null;
      var EqExpr = null;
      var VarType = null;
      var Call = null;
      var VarName = "";
      var aResolver = null;
      Result = null;
      aResolver = AContext.Resolver;
      AssignSt = this.CreateElement($lt133,El);
      try {
        AssignSt.FLHS = this.CreateMemberExpression(["this",this.GetBIName(78)]);
        FDS = this.CreateFunctionSt(El,true,false);
        AssignSt.FExpr = FDS;
        FD = FDS.FFuncDef;
        FD.FTypedParams.AddParam(EqualParamName);
        RetSt = this.CreateElement($lt160,El);
        FD.FBody.FA = RetSt;
        LastAndExpr = null;
        for (var $l = 0, $end = Fields.FCount - 1; $l <= $end; $l++) {
          i = $l;
          PasVar = rtl.getObject(Fields.Get(i));
          VarType = PasVar.VarType;
          if (aResolver !== null) VarType = aResolver.ResolveAliasType(VarType,true);
          VarName = this.TransformElToJSName(PasVar,AContext);
          if (VarType.$class.ClassType() === $lt81) {
            Call = this.CreateCallExpression(PasVar);
            Add_AndExpr_ToReturnSt(RetSt,PasVar,Call);
            Call.FExpr = this.CreateMemberExpression(["this",VarName,this.GetBIName(78)]);
            Call.AddArg(this.CreateMemberExpression([EqualParamName,VarName]));
          } else if (VarType.$class.ClassType() === $lt117) {
            Call = this.CreateCallExpression(PasVar);
            Add_AndExpr_ToReturnSt(RetSt,PasVar,Call);
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(104)]);
            Call.AddArg(this.CreateMemberExpression(["this",VarName]));
            Call.AddArg(this.CreateMemberExpression([EqualParamName,VarName]));
          } else if ($lt118.isPrototypeOf(VarType)) {
            Call = this.CreateCallExpression(PasVar);
            Add_AndExpr_ToReturnSt(RetSt,PasVar,Call);
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(66)]);
            Call.AddArg(this.CreateMemberExpression(["this",VarName]));
            Call.AddArg(this.CreateMemberExpression([EqualParamName,VarName]));
          } else if ((VarType.$class.ClassType() === $lt107) && (rtl.length(VarType.Ranges) > 0)) {
            Call = this.CreateCallExpression(PasVar);
            Add_AndExpr_ToReturnSt(RetSt,PasVar,Call);
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(4)]);
            Call.AddArg(this.CreateMemberExpression(["this",VarName]));
            Call.AddArg(this.CreateMemberExpression([EqualParamName,VarName]));
          } else {
            EqExpr = this.CreateElement($lt177,PasVar);
            Add_AndExpr_ToReturnSt(RetSt,PasVar,EqExpr);
            EqExpr.FA = this.CreateMemberExpression(["this",VarName]);
            EqExpr.FB = this.CreateMemberExpression([EqualParamName,VarName]);
          };
        };
        if (RetSt.FExpr === null) RetSt.FExpr = this.CreateLiteralBoolean(El,true);
        Result = AssignSt;
      } finally {
        if (Result === null) AssignSt = rtl.freeLoc(AssignSt);
      };
      return Result;
    };
    var SrcParamName = "s";
    this.CreateRecordFunctionAssign = function (El, AContext, Fields) {
      var Result = null;
      var AssignSt = null;
      var VarAssignSt = null;
      var FDS = null;
      var FD = null;
      var Src = null;
      var i = 0;
      var PasVar = null;
      var VarName = "";
      var aResolver = null;
      var PasVarType = null;
      var RetSt = null;
      var PasVarClass = null;
      var Call = null;
      var SrcExpr = null;
      Result = null;
      aResolver = AContext.Resolver;
      AssignSt = this.CreateElement($lt133,El);
      try {
        AssignSt.FLHS = this.CreateMemberExpression(["this",this.GetBIName(75)]);
        FDS = this.CreateFunctionSt(El,true,false);
        AssignSt.FExpr = FDS;
        FD = FDS.FFuncDef;
        FD.FTypedParams.AddParam(SrcParamName);
        Src = this.CreateElement($lt123,El);
        FD.FBody.FA = Src;
        PasVarType = null;
        PasVarClass = null;
        for (var $l = 0, $end = Fields.FCount - 1; $l <= $end; $l++) {
          i = $l;
          PasVar = rtl.getObject(Fields.Get(i));
          VarName = this.TransformElToJSName(PasVar,AContext);
          SrcExpr = this.CreateMemberExpression([SrcParamName,VarName]);
          if (aResolver !== null) {
            PasVarType = aResolver.ResolveAliasType(PasVar.VarType,true);
            PasVarClass = PasVarType.$class.ClassType();
            if (PasVarClass === $lt81) {
              Call = this.CreateCallExpression(PasVar);
              this.AddToSourceElements(Src,Call);
              Call.FExpr = this.CreateMemberExpression(["this",VarName,this.GetBIName(75)]);
              Call.AddArg(SrcExpr);
              continue;
            };
          };
          VarAssignSt = this.CreateElement($lt133,PasVar);
          this.AddToSourceElements(Src,VarAssignSt);
          VarAssignSt.FLHS = this.CreateSubDeclNameExpr(PasVar,AContext,null);
          VarAssignSt.FExpr = SrcExpr;
          if (PasVarClass === $lt107) {
            if (rtl.length(PasVarType.Ranges) > 0) {
              VarAssignSt.FExpr = this.CreateCloneStaticArray(PasVar,PasVarType,SrcExpr,AContext);
            } else if (aResolver.IsManagedJSType(PasVarType)) {
              Call = this.CreateCallExpression(PasVar);
              this.AddToSourceElements(Src,Call);
              Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(52)]);
              Call.AddArg(this.CreatePrimitiveDotExpr("this",PasVar));
              Call.AddArg(this.CreatePrimitiveDotExpr(VarName,PasVar));
              Call.AddArg(SrcExpr);
              continue;
            } else VarAssignSt.FExpr = this.CreateArrayRef(PasVar,SrcExpr);
          } else if (PasVarClass === $lt117) {
            VarAssignSt.FExpr = this.CreateReferencedSet(PasVar,SrcExpr);
          };
        };
        RetSt = this.CreateElement($lt160,El);
        this.AddToSourceElements(Src,RetSt);
        RetSt.FExpr = this.CreatePrimitiveDotExpr("this",El);
        Result = AssignSt;
      } finally {
        if (Result === null) AssignSt = rtl.freeLoc(AssignSt);
      };
      return Result;
    };
    this.CreateRecordRTTI = function (El, Src, FuncContext, MembersSrc, MembersFuncContext) {
      var ObjLit = null;
      var Call = null;
      var HasRTTIMembers = false;
      Call = this.CreateRTTINewType(El,this.GetBIName(96),false,FuncContext,{get: function () {
          return ObjLit;
        }, set: function (v) {
          ObjLit = v;
        }});
      if (ObjLit === null) {
        Call = rtl.freeLoc(Call);
        this.RaiseInconsistency(20190105141430,El);
      };
      HasRTTIMembers = this.CreateRTTIMembers(El,Src,FuncContext,MembersSrc,MembersFuncContext,Call,false);
      if (HasRTTIMembers) {
        Call.AddArg(this.CreatePrimitiveDotExpr("this",El))}
       else {
        if (Src === MembersSrc) {
          this.AddToSourceElements(Src,Call)}
         else Src.FStatements.InsertNode(0).FNode = Call;
      };
    };
    this.CreateDelayedInitMembersFunction = function (PosEl, Src, FuncContext, DelaySrc) {
      var Result = null;
      var AssignSt = null;
      var FunDecl = null;
      AssignSt = this.CreateElement($lt133,PosEl);
      this.AddToSourceElements(Src,AssignSt);
      AssignSt.FLHS = this.CreatePrimitiveDotExpr("this." + this.GetBIName(26),PosEl);
      FunDecl = this.CreateFunctionSt(PosEl,true,true);
      AssignSt.FExpr = FunDecl;
      DelaySrc.set(FunDecl.FFuncDef.FBody.FA);
      Result = $lt34.$create("Create$1",[PosEl,DelaySrc.get(),FuncContext]);
      Result.IsGlobal = true;
      Result.ThisVar.Element = PosEl;
      Result.ThisVar.Kind = 2;
      return Result;
    };
    this.CreateArrayConcat = function (ElTypeResolved, PosEl, AContext, IsAppend) {
      var Result = null;
      var Call = null;
      var Func = 0;
      var TypeEl = null;
      var ArrayType = null;
      var C = null;
      Result = null;
      Call = this.CreateCallExpression(PosEl);
      try {
        if (IsAppend) {
          Func = 8}
         else Func = 0;
        if (ElTypeResolved.BaseType === 2) {
          TypeEl = ElTypeResolved.LoTypeEl;
          C = TypeEl.$class.ClassType();
          if (TypeEl.$class.ClassType() === $lt107) {
            ArrayType = TypeEl;
            if (rtl.length(ArrayType.Ranges) > 0) {
              Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(Func)]);
              if (AContext.Resolver.HasStaticArrayCloneFunc(ArrayType)) {
                Call.AddArg(this.CreatePrimitiveDotExpr(this.CreateReferencePath(TypeEl,AContext,2,false,null) + this.GetBIName(12),PosEl))}
               else Call.AddArg(this.CreateLiteralString(PosEl,"slice"));
            };
          } else if (C === $lt81) {
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(Func)]);
            Call.AddArg(this.CreateReferencePathExpr(TypeEl,AContext,false,null));
          } else if (AContext.Resolver.IsManagedJSType(TypeEl)) {
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(Func)]);
            Call.AddArg(this.CreateLiteralString(TypeEl,this.GetBIName(123)));
          };
        } else if (ElTypeResolved.BaseType === 34) {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(Func)]);
          Call.AddArg(this.CreateLiteralString(PosEl,this.GetBIName(111)));
        };
        if (Call.FExpr === null) {
          if (IsAppend) {
            Func = 9}
           else Func = 1;
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(Func)]);
        };
        Result = Call;
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.CreateArrayConcat$1 = function (ArrayType, PosEl, AContext, IsAppend) {
      var Result = null;
      var ElTypeResolved = $lt84.$new();
      var aResolver = null;
      if (rtl.length(ArrayType.Ranges) > 1) this.RaiseNotSupported(PosEl,AContext,20170331001021,"");
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(aResolver.GetArrayElType(ArrayType),ElTypeResolved,rtl.createSet(4),null);
      Result = this.CreateArrayConcat($lt84.$clone(ElTypeResolved),PosEl,AContext,IsAppend);
      return Result;
    };
    this.CreateArrayInit = function (ArrayType, Expr, El, AContext) {
      var $Self = this;
      var Result = null;
      function IsAdd(AnExpr) {
        var Result = false;
        Result = (AnExpr.$class.ClassType() === $lt85) && (AnExpr.OpCode === 1);
        return Result;
      };
      function ConvertArrayExpr(CurArrType, RgIndex, CurExpr) {
        var Result = null;
        var NextArrType = null;
        var NextRgIndex = 0;
        function ConvertSubValues(ExprArray) {
          var Result = null;
          var i = 0;
          var JS = null;
          Result = $Self.CreateElement($lt147,El);
          for (var $l = 0, $end = rtl.length(ExprArray) - 1; $l <= $end; $l++) {
            i = $l;
            JS = $Self.CreateArrayEl(ExprArray[i],AContext);
            Result.FElements.AddElement().FExpr = JS;
          };
          return Result;
        };
        function TraverseAdd(Bin, ConcatCall) {
          if (IsAdd(Bin.Left)) {
            TraverseAdd(Bin.Left,ConcatCall)}
           else ConcatCall.AddArg(ConvertArrayExpr(NextArrType,NextRgIndex,Bin.Left));
          if (IsAdd(Bin.Right)) {
            TraverseAdd(Bin.Right,ConcatCall)}
           else ConcatCall.AddArg(ConvertArrayExpr(NextArrType,NextRgIndex,Bin.Right));
        };
        var ElTypeResolved = $lt84.$new();
        var Call = null;
        var aResolver = null;
        Result = null;
        NextArrType = CurArrType;
        NextRgIndex = RgIndex + 1;
        aResolver = AContext.Resolver;
        if (RgIndex >= (rtl.length(CurArrType.Ranges) - 1)) {
          aResolver.ComputeElement(aResolver.GetArrayElType(CurArrType),ElTypeResolved,rtl.createSet(4),null);
          if ((ElTypeResolved.BaseType === 2) && (ElTypeResolved.LoTypeEl.$class.ClassType() === $lt107)) {
            NextArrType = ElTypeResolved.LoTypeEl;
            NextRgIndex = 0;
          };
        };
        if (CurExpr.$class.ClassType() === $lt178) {
          Result = ConvertSubValues(CurExpr.Values);
          return Result;
        } else if ((CurExpr.$class.ClassType() === $lt86) && (CurExpr.Kind === 4)) {
          Result = ConvertSubValues(CurExpr.Params);
          return Result;
        } else if (IsAdd(CurExpr)) {
          Call = $Self.CreateArrayConcat$1(ArrayType,CurExpr,AContext,false);
          try {
            TraverseAdd(CurExpr,Call);
            Result = Call;
            if (aResolver.IsManagedJSType(ArrayType)) Result = $Self.CreateIntfRef(Result,AContext,CurExpr);
          } finally {
            if (Result === null) Call = rtl.freeLoc(Call);
          };
          return Result;
        };
        Result = $Self.ConvertExpression(CurExpr,AContext);
        return Result;
      };
      function ConvertExprToVarRec(CurExpr) {
        var Result = null;
        var aResolver = null;
        var Param = null;
        var ParamResolved = $lt84.$new();
        function RaiseWrongTypeInArrayConstructor(id) {
          aResolver.RaiseMsg(id,3120,rtl.getResStr($lm6,"sWrongTypeXInArrayConstructor"),$lp6(18,aResolver.GetResolverResultDescription(ParamResolved,false)),Param);
        };
        var Params = null;
        var ModScope = null;
        var Call = null;
        var i = 0;
        var VType = 0;
        var LoTypeEl = null;
        var ParamsArr = [];
        Result = null;
        aResolver = AContext.Resolver;
        if (IsAdd(CurExpr)) aResolver.RaiseMsg(20190215222435,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"array of const",18,$lp19(CurExpr)),CurExpr);
        if (!$lt86.isPrototypeOf(CurExpr) || (CurExpr.Kind !== 4)) {
          Result = $Self.ConvertExpression(CurExpr,AContext);
          return Result;
        };
        Params = CurExpr;
        ParamsArr = Params.Params;
        if (rtl.length(ParamsArr) === 0) {
          Result = $Self.CreateElement($lt147,Params);
          return Result;
        };
        ModScope = rtl.as($lp20(aResolver.FRootElement.FData),$lt9);
        if (ModScope.SystemVarRecs === null) $Self.RaiseNotSupported(Params,AContext,20190215215148,"");
        Call = $Self.CreateCallExpression(Params);
        try {
          Call.FExpr = $Self.CreateReferencePathExpr(ModScope.SystemVarRecs,AContext,false,null);
          for (var $l = 0, $end = rtl.length(ParamsArr) - 1; $l <= $end; $l++) {
            i = $l;
            Param = ParamsArr[i];
            aResolver.ComputeElement(Param,ParamResolved,{},null);
            if (!(0 in ParamResolved.Flags)) {
              if ((ParamResolved.BaseType === 2) && $lt72.isPrototypeOf(ParamResolved.IdentEl) && (ParamResolved.IdentEl.ObjKind === 1)) {
                VType = 8}
               else RaiseWrongTypeInArrayConstructor(20190215221549);
            } else if (ParamResolved.BaseType in rtl.createSet(19,20,21,22,26)) {
              VType = 0}
             else if (ParamResolved.BaseType in rtl.createSet(25,27,28)) {
              VType = 19}
             else if (ParamResolved.BaseType in $mod.btAllJSBooleans) {
              VType = 1}
             else if (ParamResolved.BaseType in $mod.btAllJSFloats) {
              VType = 3}
             else if (ParamResolved.BaseType in $mod.btAllJSChars) {
              VType = 9}
             else if (ParamResolved.BaseType in $mod.btAllJSStrings) {
              VType = 18}
             else if (ParamResolved.BaseType in rtl.createSet(30,29)) {
              VType = 5}
             else if (ParamResolved.BaseType === 14) {
              VType = 12}
             else if (ParamResolved.BaseType === 2) {
              LoTypeEl = ParamResolved.LoTypeEl;
              if (LoTypeEl.$class.ClassType() === $lt72) {
                var $tmp = LoTypeEl.ObjKind;
                if ($tmp === 1) {
                  VType = 7}
                 else if ($tmp === 2) {
                  VType = 14}
                 else {
                  RaiseWrongTypeInArrayConstructor(20190215221106);
                };
              } else if (LoTypeEl.$class.ClassType() === $lt112) {
                VType = 8}
               else RaiseWrongTypeInArrayConstructor(20190215221122);
            } else if ((ParamResolved.BaseType === 1) && aResolver.IsJSBaseType$1(ParamResolved,1,false)) {
              VType = 20}
             else RaiseWrongTypeInArrayConstructor(20190215221457);
            Call.AddArg($Self.CreateLiteralNumber(Param,VType));
            Call.AddArg($Self.ConvertExpression(Param,AContext));
          };
          Result = Call;
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
        return Result;
      };
      var Call = null;
      var ArrLit = null;
      var i = 0;
      var DimSize = 0;
      var RangeResolved = $lt84.$new();
      var ElTypeResolved = $lt84.$new();
      var ExprResolved = $lt84.$new();
      var Range = null;
      var Lit = null;
      var CurArrayType = null;
      var DefaultValue = null;
      var US = "";
      var DimLits = null;
      var aResolver = null;
      var ArrScope = null;
      var aManaged = false;
      aResolver = AContext.Resolver;
      ArrScope = rtl.as(ArrayType.FData,$lt17);
      aManaged = (ArrScope !== null) && ArrScope.Managed;
      if (Expr != null) {
        if (aResolver === null) this.DoError$2(20161024192739,4006,rtl.getResStr($mod,"sInitializedArraysNotSupported"),[],ArrayType);
        aResolver.ComputeElement(Expr,ExprResolved,{},null);
        if ((ExprResolved.BaseType in rtl.createSet(36,35)) || ((ExprResolved.BaseType === 2) && (ExprResolved.LoTypeEl.$class.ClassType() === $lt107))) {
          if (ArrayType.ElType === null) {
            Result = ConvertExprToVarRec(Expr)}
           else {
            Result = ConvertArrayExpr(ArrayType,0,Expr);
            if (aManaged) {
              if ($lt147.isPrototypeOf(Result)) {
                if (Result.GetCount() === 0) {
                  Result = rtl.freeLoc(Result);
                  Result = this.CreateLiteralNull(Expr);
                } else {
                  Result = this.CreateArrayManaged(Expr,1,2,Result);
                  if (!this.IsLiteralNull(Result)) Result = this.CreateIntfRef(Result,AContext,Expr);
                };
              };
            };
          };
        } else if (ExprResolved.BaseType in $lm3.btAllStringAndChars) {
          US = $lp24(aResolver.ComputeConstString(Expr,false,true));
          ArrLit = this.CreateElement($lt147,Expr);
          Result = ArrLit;
          for (var $l = 1, $end = US.length; $l <= $end; $l++) {
            i = $l;
            ArrLit.FElements.AddElement().FExpr = this.CreateLiteralJSString(Expr,US.charAt(i - 1));
          };
        } else if (ExprResolved.BaseType === 30) {
          if (aManaged) {
            Result = this.CreateLiteralNull(Expr)}
           else Result = this.CreateElement($lt147,Expr);
        } else this.RaiseNotSupported(Expr,AContext,20170223133034,"");
      } else if (rtl.length(ArrayType.Ranges) === 0) {
        if (aManaged) {
          Result = this.CreateLiteralNull(El)}
         else Result = this.CreateElement($lt147,El);
      } else {
        if (aResolver === null) this.RaiseNotSupported(El,AContext,20170223113050,"");
        Result = null;
        DimLits = $lt179.$create("Create$3",[true]);
        try {
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(11)]);
          Call.AddArg(this.CreateLiteralNull(El));
          CurArrayType = ArrayType;
          while (true) {
            for (var $l1 = 0, $end1 = rtl.length(CurArrayType.Ranges) - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              Range = CurArrayType.Ranges[i];
              DimSize = aResolver.GetRangeLength(Range);
              if (DimSize === 0) {
                aResolver.ComputeElement(Range,RangeResolved,rtl.createSet(3),null);
                this.RaiseNotSupported(Range,AContext,20170223113318,$lp37(RangeResolved));
              };
              Lit = this.CreateLiteralNumber(El,DimSize);
              DimLits.Add$1(Lit);
            };
            aResolver.ComputeElement(aResolver.GetArrayElType(CurArrayType),ElTypeResolved,rtl.createSet(4),null);
            if ($lt107.isPrototypeOf(ElTypeResolved.LoTypeEl)) {
              CurArrayType = ElTypeResolved.LoTypeEl;
              if (rtl.length(CurArrayType.Ranges) > 0) {
                continue;
              };
            };
            break;
          };
          if ($lt81.isPrototypeOf(ElTypeResolved.LoTypeEl)) {
            DefaultValue = this.CreateReferencePathExpr(ElTypeResolved.LoTypeEl,AContext,false,null);
          } else DefaultValue = this.CreateValInit(ElTypeResolved.LoTypeEl,null,El,AContext);
          Call.AddArg(DefaultValue);
          for (var $l2 = 0, $end2 = DimLits.GetCount() - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            Call.AddArg(DimLits.GetItem(i));
          };
          DimLits.FFreeObjects = false;
          DimLits.Clear();
          Result = Call;
        } finally {
          DimLits = rtl.freeLoc(DimLits);
          if (Result === null) Call = rtl.freeLoc(Call);
        };
      };
      if (Result === null) this.RaiseInconsistency(20180617233317,Expr);
      return Result;
    };
    this.CreateArrayRef = function (El, ArrayExpr) {
      var Result = null;
      var Call = null;
      if ($lt147.isPrototypeOf(ArrayExpr)) return ArrayExpr;
      Call = this.CreateCallExpression(El);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(10)]);
      Call.AddArg(ArrayExpr);
      Result = Call;
      return Result;
    };
    this.CreateCmpArrayWithNil = function (El, JSArray, OpCode) {
      var Result = null;
      var Call = null;
      var BinExpr = null;
      if (!(OpCode in rtl.createSet(14,15))) this.RaiseInconsistency(20170401184819,El);
      Call = this.CreateCallExpression(El);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(7)]);
      Call.AddArg(JSArray);
      if (OpCode === 14) {
        BinExpr = this.CreateElement($lt177,El)}
       else BinExpr = this.CreateElement($lt180,El);
      BinExpr.FA = Call;
      BinExpr.FB = this.CreateLiteralNumber(El,0);
      Result = BinExpr;
      return Result;
    };
    this.CreateCloneStaticArray = function (El, ArrTypeEl, ArrayExpr, AContext) {
      var Result = null;
      var Call = null;
      var Path = "";
      var FuncContext = null;
      var DotExpr = null;
      var i = 0;
      var JSExpr = null;
      if ($lt147.isPrototypeOf(ArrayExpr)) return ArrayExpr;
      if (AContext.Resolver.HasStaticArrayCloneFunc(ArrTypeEl)) {
        if (ArrTypeEl.FName === "") this.RaiseNotSupported(El,AContext,20180218230407,"copy anonymous multi dim static array");
        FuncContext = AContext.GetFunctionContext();
        Path = this.CreateReferencePath(ArrTypeEl,FuncContext,2,false,null) + this.GetBIName(12);
        Call = this.CreateCallExpression(El);
        Call.FExpr = this.CreatePrimitiveDotExpr(Path,El);
        Call.AddArg(ArrayExpr);
        Result = Call;
      } else {
        if ($lt144.isPrototypeOf(ArrayExpr)) {
          Call = ArrayExpr;
          if ($lt124.isPrototypeOf(Call.FExpr)) {
            DotExpr = Call.FExpr;
            if ((DotExpr.FName === "slice") && (Call.FArgs !== null) && (Call.FArgs.FElements.GetCount() === 1)) {
              JSExpr = Call.FArgs.FElements.GetE(0).FExpr;
              if (this.IsLiteralInteger(JSExpr,{get: function () {
                  return i;
                }, set: function (v) {
                  i = v;
                }}) && (i === 0)) return Call;
            };
          };
        };
        Call = this.CreateCallExpression(El);
        Call.FExpr = this.CreateDotNameExpr(El,ArrayExpr,"slice");
        Call.AddArg(this.CreateLiteralNumber(El,0));
        Result = Call;
      };
      return Result;
    };
    this.CreateArrayManaged = function (El, RefCnt, aMode, Arg) {
      var Result = null;
      var Call = null;
      Call = this.CreateCallExpression(El);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(6)]);
      Call.AddArg(this.CreateLiteralFloat(El,RefCnt));
      if ((Arg !== null) || (aMode > 0)) Call.AddArg(this.CreateLiteralFloat(El,aMode));
      if (Arg !== null) Call.AddArg(Arg);
      Result = Call;
      return Result;
    };
    var MemberFuncName = ["$init","$final"];
    this.AddClassConDestructorFunction = function (El, Src, ClassContext, IsTObject, Ancestor, Kind) {
      var $Self = this;
      var AncestorIsExternal = false;
      function IsMemberNeeded(aMember) {
        var Result = false;
        if ($Self.IsElementUsed(aMember)) return true;
        if (IsTObject) {
          if (aMember.$class.ClassType() === $lt67) {
            if (($lp13(aMember.FName,"AfterConstruction") === 0) || ($lp13(aMember.FName,"BeforeDestruction") === 0)) return true;
          };
        };
        Result = false;
        return Result;
      };
      function AddCallAncestorMemberFunction(ClassContext, Ancestor, Src, Kind) {
        var Call = null;
        var AncestorPath = "";
        if ((Ancestor === null) || AncestorIsExternal) return;
        Call = $Self.CreateCallExpression(El);
        AncestorPath = $Self.CreateReferencePath(Ancestor,ClassContext,2,false,null);
        Call.FExpr = $Self.CreatePrimitiveDotExpr(AncestorPath + "." + MemberFuncName[Kind] + ".call",El);
        Call.AddArg($Self.CreatePrimitiveDotExpr("this",El));
        $Self.AddToSourceElements(Src,Call);
      };
      var FuncVD = null;
      var New_Src = null;
      var New_FuncContext = null;
      var I = 0;
      var P = null;
      var NewEl = null;
      var Func = null;
      var VarType = null;
      var AssignSt = null;
      var C = null;
      var Call = null;
      AncestorIsExternal = $lt72.isPrototypeOf(Ancestor) && Ancestor.IsExternal;
      New_Src = this.CreateElement($lt123,El);
      New_FuncContext = $lt34.$create("Create$1",[El,New_Src,ClassContext]);
      try {
        New_FuncContext.ThisVar.Element = El;
        New_FuncContext.ThisVar.Kind = 2;
        New_FuncContext.IsGlobal = false;
        for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
          I = $l;
          P = rtl.getObject(El.Members.Get(I));
          if (!IsMemberNeeded(P)) continue;
          NewEl = null;
          if ((P.$class.ClassType() === $lt80) && rtl.eqSet(rtl.intersectSet($mod.ClassVarModifiersType,P.VarModifiers),{})) {
            if (Kind === 0) {
              NewEl = this.CreateVarDecl(P,New_FuncContext);
            } else {
              if (1 in P.VarModifiers) continue;
              VarType = ClassContext.Resolver.ResolveAliasType(P.VarType,true);
              C = VarType.$class.ClassType();
              if (ClassContext.Resolver.IsManagedJSType(VarType)) {
                Call = this.CreateCallExpression(El);
                NewEl = Call;
                Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(52)]);
                Call.AddArg(this.CreatePrimitiveDotExpr("this",El));
                Call.AddArg(this.CreateLiteralString(El,this.TransformElToJSName(P,New_FuncContext)));
                Call.AddArg(this.CreateLiteralNull(El));
              };
              if ((NewEl === null) && ((C === $lt81) || (C === $lt72) || (C === $lt112) || (C === $lt117) || (C === $lt118) || (C === $lt93) || (C === $lt107))) {
                AssignSt = this.CreateElement($lt133,El);
                NewEl = AssignSt;
                AssignSt.FLHS = this.CreateSubDeclNameExpr(P,New_FuncContext,null);
                AssignSt.FExpr = this.CreateLiteralUndefined(El);
              };
            };
          };
          if (NewEl === null) continue;
          if ((Kind === 0) && (New_Src.FStatements.GetCount() === 0)) AddCallAncestorMemberFunction(ClassContext,Ancestor,New_Src,Kind);
          this.AddToSourceElements(New_Src,NewEl);
        };
        if ((Kind === 1) && (New_Src.FStatements.GetCount() > 0)) AddCallAncestorMemberFunction(ClassContext,Ancestor,New_Src,Kind);
        if ((Ancestor !== null) && !AncestorIsExternal && (New_Src.FStatements.GetCount() === 0)) return;
        FuncVD = this.CreateElement($lt150,El);
        this.AddToSourceElements(Src,FuncVD);
        FuncVD.FName = "this." + MemberFuncName[Kind];
        Func = this.CreateFunctionSt(El,true,false);
        FuncVD.FInit = Func;
        Func.FFuncDef.FBody.FA = New_Src;
        New_Src = null;
      } finally {
        New_Src = rtl.freeLoc(New_Src);
        New_FuncContext = rtl.freeLoc(New_FuncContext);
      };
    };
    this.AddClassRTTI = function (El, Src, FuncContext) {
      var HasRTTIMembers = false;
      var NeedLocalVar = false;
      var RTTIExpr = null;
      var AttrJS = null;
      var Attr = [];
      var AssignSt = null;
      var ClassScope = null;
      var Creator = "";
      var ObjLit = null;
      var Call = null;
      AttrJS = null;
      RTTIExpr = null;
      try {
        ClassScope = rtl.as(El.FData,$lt14);
        if ((ClassScope.SpecializedFromItem !== null) && !(4 in this.FOptions) && FuncContext.Resolver.HasTypeInfo(El)) {
          Creator = this.GetClassBIName(El,FuncContext);
          Call = this.CreateRTTINewType(El,Creator,true,FuncContext,{get: function () {
              return ObjLit;
            }, set: function (v) {
              ObjLit = v;
            }});
          if (ObjLit !== null) this.RaiseInconsistency(20200606134834,El);
          this.AddHeaderStatement(Call,El,FuncContext);
        };
        RTTIExpr = this.CreateMemberExpression(["this",this.GetBIName(145)]);
        Attr = FuncContext.Resolver.GetAttributeCallsEl(El);
        AttrJS = this.CreateRTTIAttributes(Attr,El,FuncContext);
        NeedLocalVar = AttrJS !== null;
        HasRTTIMembers = this.CreateRTTIMembers(El,Src,FuncContext,Src,FuncContext,RTTIExpr,NeedLocalVar);
        if (HasRTTIMembers) RTTIExpr = null;
        if (AttrJS !== null) {
          AssignSt = this.CreateElement($lt133,El);
          this.AddToSourceElements(Src,AssignSt);
          AssignSt.FLHS = this.CreateMemberExpression([this.GetBIName(153),this.GetBIName(164)]);
          AssignSt.FExpr = AttrJS;
          AttrJS = null;
        };
      } finally {
        AttrJS = rtl.freeLoc(AttrJS);
        RTTIExpr = rtl.freeLoc(RTTIExpr);
      };
    };
    this.AddClassConstructors = function (FuncContext, PosEl) {
      var i = 0;
      var Proc = null;
      var First = null;
      var Last = null;
      var St = null;
      var Call = null;
      var Bracket = null;
      var RootContext = null;
      RootContext = FuncContext.GetRootContext();
      First = null;
      Last = null;
      try {
        for (var $l = 0, $end = rtl.length(RootContext.GlobalClassMethods) - 1; $l <= $end; $l++) {
          i = $l;
          Proc = RootContext.GlobalClassMethods[i];
          St = this.ConvertProcedure(Proc,FuncContext);
          Bracket = this.CreateElement($lt181,PosEl);
          Bracket.FA = St;
          Call = this.CreateCallExpression(PosEl);
          Call.FExpr = Bracket;
          this.AddToStatementList({get: function () {
              return First;
            }, set: function (v) {
              First = v;
            }},{get: function () {
              return Last;
            }, set: function (v) {
              Last = v;
            }},Call,PosEl);
        };
        this.PrependToStatementList({p: FuncContext, get: function () {
            return this.p.BodySt;
          }, set: function (v) {
            this.p.BodySt = v;
          }},First,PosEl);
        First = null;
      } finally {
        First = rtl.freeLoc(First);
      };
    };
    this.AddClassMessageIds = function (El, Src, FuncContext, pbivn) {
      var Scope = null;
      var List = null;
      var i = 0;
      var AssignSt = null;
      var ObjLit = null;
      var LitEl = null;
      var Proc = null;
      Scope = El.FData;
      var $tmp = pbivn;
      if ($tmp === 126) {
        List = Scope.MsgIntToProc}
       else if ($tmp === 127) {
        List = Scope.MsgStrToProc}
       else {
        this.RaiseNotSupported(El,FuncContext,20190304001209,this.GetBIName(pbivn));
      };
      if ((List === null) || (List.GetCount() === 0)) return;
      AssignSt = this.CreateElement($lt133,El);
      this.AddToSourceElements(Src,AssignSt);
      AssignSt.FLHS = this.CreateMemberExpression(["this",this.GetBIName(pbivn)]);
      ObjLit = this.CreateElement($lt132,El);
      AssignSt.FExpr = ObjLit;
      for (var $l = 0, $end = List.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        LitEl = ObjLit.FElements.AddElement();
        LitEl.FName = List.Get(i);
        Proc = List.GetObject(i);
        LitEl.FExpr = this.CreateLiteralJSString(Proc,this.TransformElToJSName(Proc,FuncContext));
      };
    };
    this.CreateCallback = function (Expr, ResolvedEl, aSafeCall, AContext) {
      var $Self = this;
      var Result = null;
      function NeedAppendClass(El) {
        var Result = false;
        var TargetResolved = $lt84.$new();
        AContext.Resolver.ComputeElement(El,TargetResolved,{},null);
        if ($lt72.isPrototypeOf(TargetResolved.IdentEl) || $lt112.isPrototypeOf(TargetResolved.LoTypeEl)) {
          Result = false}
         else Result = true;
        return Result;
      };
      var Call = null;
      var TargetJS = null;
      var FunName = "";
      var TargetName = "";
      var Proc = null;
      var IsHelper = false;
      var NeedClass = false;
      var Bin = null;
      var aResolver = null;
      var OldAccess = 0;
      var PosEl = null;
      var Ref = null;
      var WithExprScope = null;
      var SelfScope = null;
      Result = null;
      if (!$lt67.isPrototypeOf(ResolvedEl.IdentEl)) this.RaiseInconsistency(20170215140756,Expr);
      aResolver = AContext.Resolver;
      Proc = ResolvedEl.IdentEl;
      if (!aResolver.ProcHasSelf(Proc)) {
        Result = this.CreateReferencePathExpr(Proc,AContext,false,null);
        if (aSafeCall) Result = this.CreateSafeCallback(Expr,Result,AContext);
        return Result;
      };
      IsHelper = aResolver.IsHelperMethod(Proc);
      NeedClass = aResolver.IsClassMethod(Proc) && !aResolver.MethodIsStatic(Proc);
      if ($lt182.isPrototypeOf(Expr)) Expr = Expr.NameExpr;
      TargetJS = null;
      Call = null;
      try {
        if ($lt85.isPrototypeOf(Expr)) {
          Bin = Expr;
          if (Bin.OpCode !== 27) this.RaiseNotSupported(Expr,AContext,20190205230811,"");
          OldAccess = AContext.Access;
          AContext.Access = 0;
          TargetJS = this.ConvertExpression(Bin.Left,AContext);
          AContext.Access = OldAccess;
          if (NeedClass) NeedClass = NeedAppendClass(Bin.Left);
          PosEl = Bin.Right;
        } else if (aResolver.IsNameExpr(Expr)) {
          PosEl = Expr;
          if (!$lt71.isPrototypeOf(Expr.FData)) this.RaiseNotSupported(Expr,AContext,20190205230915,"");
          Ref = Expr.FData;
          WithExprScope = rtl.as(Ref.WithExprScope,$lt19);
          if (WithExprScope !== null) {
            TargetName = WithExprScope.WithVarName;
            if ((TargetName === "") && IsHelper) this.RaiseNotSupported(PosEl,AContext,20190209092355,"");
            if (NeedClass) NeedClass = NeedAppendClass(WithExprScope.Expr);
          } else {
            SelfScope = aResolver.GetSelfScope(Expr);
            if (SelfScope === null) this.RaiseNotSupported(PosEl,AContext,20190205230919,"");
            if (SelfScope.SelfArg !== null) {
              TargetName = this.GetLocalName(SelfScope.SelfArg,$mod.cvkAll,AContext)}
             else if (SelfScope.ClassRecScope !== null) {
              TargetName = this.CreateReferencePath(SelfScope.ClassRecScope.FElement,AContext,2,false,null);
              NeedClass = false;
            } else this.RaiseNotSupported(PosEl,AContext,20190206104558,$lp16(Proc));
            if (TargetName === "") TargetName = "this";
            if (NeedClass) NeedClass = NeedAppendClass(SelfScope.SelfArg);
          };
          TargetJS = this.CreatePrimitiveDotExpr(TargetName,PosEl);
        } else this.RaiseNotSupported(Expr,AContext,20190205230924,"");
        if (NeedClass) TargetJS = this.CreateDotExpression(Expr,TargetJS,this.CreatePrimitiveDotExpr(this.GetBIName(138),PosEl),false);
        Call = this.CreateCallExpression(Expr);
        if (aSafeCall) {
          TargetName = this.GetBIName(65)}
         else TargetName = this.GetBIName(64);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),TargetName]);
        Call.AddArg(TargetJS);
        TargetJS = null;
        if (IsHelper) {
          Call.AddArg(this.CreateReferencePathExpr(Proc,AContext,false,null))}
         else {
          if ((10 in this.FOptions) && (Proc.FData.SpecializedFromItem !== null)) {
            FunName = this.CreateStaticProcPath(Proc,AContext);
            Call.AddArg(this.CreatePrimitiveDotExpr(FunName,Expr));
          } else {
            FunName = this.TransformElToJSName(Proc,AContext);
            Call.AddArg(this.CreateLiteralString(Expr,FunName));
          };
        };
        Result = Call;
      } finally {
        if (Result === null) {
          TargetJS = rtl.freeLoc(TargetJS);
          Call = rtl.freeLoc(Call);
        };
      };
      return Result;
    };
    this.CreateSafeCallback = function (Expr, JS, AContext) {
      var Result = null;
      var Call = null;
      var DotExpr = null;
      var Prim = null;
      Result = JS;
      if (AContext === null) ;
      if ($lt144.isPrototypeOf(JS)) {
        Call = JS;
        if ($lt124.isPrototypeOf(Call.FExpr)) {
          DotExpr = Call.FExpr;
          if ($lt125.isPrototypeOf(DotExpr.FMExpr)) {
            Prim = DotExpr.FMExpr;
            if (Prim.FName === this.GetBIName(144)) {
              if (DotExpr.FName === this.GetBIName(64)) DotExpr.FName = this.GetBIName(65);
            };
          };
        };
      } else {
        Call = this.CreateCallExpression(Expr);
        Result = Call;
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(65)]);
        if ($lt124.isPrototypeOf(JS)) {
          DotExpr = JS;
          Call.AddArg(DotExpr.FMExpr);
          DotExpr.FMExpr = null;
          Call.AddArg(this.CreateLiteralJSString(Expr,DotExpr.FName));
          JS = rtl.freeLoc(JS);
        } else {
          Call.AddArg(this.CreateLiteralNull(Expr));
          Call.AddArg(JS);
        };
      };
      return Result;
    };
    this.CreatePropertyGet = function (Prop, Expr, AContext, PosEl) {
      var Result = null;
      var aResolver = null;
      var Decl = null;
      var Call = null;
      var Name = "";
      var Ref = null;
      aResolver = AContext.Resolver;
      Decl = aResolver.GetPasPropertyGetter(Prop);
      if ((Expr !== null) && $lt71.isPrototypeOf(Expr.FData)) {
        Ref = Expr.FData}
       else Ref = null;
      if ($lt94.isPrototypeOf(Decl)) {
        if (aResolver.IsHelperMethod(Decl)) {
          if (Expr === null) this.RaiseNotSupported(PosEl,AContext,20190208111355,$lp16(Prop));
          Result = this.CreateCallHelperMethod(Decl,Expr,AContext,false);
          return Result;
        };
        Call = this.CreateCallExpression(PosEl);
        try {
          Call.FExpr = this.CreateReferencePathExpr(Decl,AContext,false,Ref);
          Result = this.AppendPropertyReadArgs(Call,Prop,AContext,PosEl);
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
      } else {
        Name = this.CreateReferencePath(Decl,AContext,2,false,Ref);
        Result = this.CreatePrimitiveDotExpr(Name,PosEl);
      };
      return Result;
    };
    this.AppendPropertyAssignArgs = function (Call, Prop, AssignContext, PosEl) {
      var Result = null;
      var aResolver = null;
      var IndexExpr = null;
      var Value = null;
      AssignContext.Call = Call;
      AssignContext.PropertyEl = Prop;
      aResolver = AssignContext.Resolver;
      IndexExpr = aResolver.GetPasPropertyIndex(Prop);
      if (IndexExpr !== null) {
        Value = aResolver.Eval(IndexExpr,rtl.createSet(0),true);
        try {
          Call.AddArg(this.ConvertConstValue(Value,AssignContext,PosEl));
        } finally {
          $lp17({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
        };
      };
      Call.AddArg(AssignContext.RightSide);
      AssignContext.RightSide = null;
      Result = Call;
      return Result;
    };
    this.AppendPropertyReadArgs = function (Call, Prop, aContext, PosEl) {
      var Result = null;
      var aResolver = null;
      var IndexExpr = null;
      var Value = null;
      var TypeEl = null;
      aResolver = aContext.Resolver;
      IndexExpr = aResolver.GetPasPropertyIndex(Prop);
      if (IndexExpr !== null) {
        Value = aResolver.Eval(IndexExpr,rtl.createSet(0),true);
        try {
          Call.AddArg(this.ConvertConstValue(Value,aContext.GetFunctionContext(),PosEl));
        } finally {
          $lp17({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
        };
      };
      TypeEl = aResolver.GetPasPropertyType(Prop);
      if (aResolver.IsManagedJSType(TypeEl)) Call = this.CreateIntfRef(Call,aContext,PosEl);
      Result = Call;
      return Result;
    };
    this.CreateRaisePropReadOnly = function (PosEl) {
      var Result = null;
      var Call = null;
      Call = this.CreateCallExpression(PosEl);
      Result = Call;
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(68)]);
      Call.AddArg(this.CreateLiteralJSString(PosEl,"EPropReadOnly"));
      return Result;
    };
    this.CreateTypeInfoRef = function (El, AContext, ErrorEl) {
      var Result = null;
      var aName = "";
      var aModName = "";
      var aModule = null;
      var Bracket = null;
      El = $lp31(El);
      if ($lt120.isPrototypeOf(El)) El = El.FData.SpecializedType;
      aName = this.GetTypeInfoName(El,AContext,ErrorEl,false);
      if (aName === this.GetBIName(153)) {
        Result = this.CreatePrimitiveDotExpr(aName,El)}
       else if ($lp3(aName,this.GetBIName(144).length + 1) === (this.GetBIName(144) + ".")) {
        Result = this.CreatePrimitiveDotExpr(aName,El)}
       else {
        aModule = El.GetModule();
        aModName = this.TransformModuleName(aModule,true,AContext);
        Bracket = this.CreateElement($lt142,El);
        Bracket.FMExpr = this.CreateMemberExpression([aModName,this.GetBIName(145)]);
        Bracket.FName = this.CreateLiteralString(El,aName);
        Result = Bracket;
      };
      return Result;
    };
    this.CreateRTTIArgList = function (Parent, Args, AContext) {
      var Result = null;
      var Params = null;
      var i = 0;
      Result = null;
      if (Args.FCount === 0) {
        Result = this.CreateElement($lt147,Parent)}
       else try {
        Params = this.CreateElement($lt147,Parent);
        for (var $l = 0, $end = Args.FCount - 1; $l <= $end; $l++) {
          i = $l;
          this.AddRTTIArgument(rtl.getObject(Args.Get(i)),Params,AContext);
        };
        Result = Params;
      } finally {
        if (Result === null) Params = rtl.freeLoc(Params);
      };
      return Result;
    };
    this.AddRTTIArgument = function (Arg, TargetParams, AContext) {
      var Param = null;
      var ArgName = "";
      var Flags = 0;
      var ArrType = null;
      var aResolver = null;
      aResolver = AContext.Resolver;
      Param = this.CreateElement($lt147,Arg);
      TargetParams.FElements.AddElement().FExpr = Param;
      ArgName = this.TransformToJSName(Arg,Arg.FName,true,AContext);
      Param.FElements.AddElement().FExpr = this.CreateLiteralString(Arg,ArgName);
      Flags = 0;
      if (Arg.ArgType === null) {
        Param.FElements.AddElement().FExpr = this.CreateLiteralNull(Arg)}
       else if ((Arg.ArgType.FName === "") && (Arg.ArgType.$class.ClassType() === $lt107)) {
        Flags += 8;
        ArrType = Arg.ArgType;
        Param.FElements.AddElement().FExpr = this.CreateTypeInfoRef(aResolver.GetArrayElType(ArrType),AContext,Arg);
      } else Param.FElements.AddElement().FExpr = this.CreateTypeInfoRef(Arg.ArgType,AContext,Arg);
      var $tmp = Arg.Access;
      if ($tmp === 0) {}
      else if (($tmp === 1) || ($tmp === 4)) {
        Flags += 2}
       else if ($tmp === 2) {
        Flags += 1}
       else if ($tmp === 3) {
        Flags += 4}
       else {
        this.RaiseNotSupported(Arg,AContext,20170409192127,$lm1.AccessNames[Arg.Access]);
      };
      if (Flags > 0) Param.FElements.AddElement().FExpr = this.CreateLiteralNumber(Arg,Flags);
    };
    this.GetClassBIName = function (El, AContext) {
      var $Self = this;
      var Result = "";
      function IsAncestorExternal() {
        var Result = false;
        var Element = null;
        Element = El;
        Result = false;
        while (!Result && (Element != null)) {
          Result = Element.IsExternal;
          if ($lt130.isPrototypeOf(Element.AncestorType)) {
            Element = rtl.as(Element.AncestorType.DestType,$lt72)}
           else Element = rtl.as(Element.AncestorType,$lt72);
        };
        return Result;
      };
      var $tmp = El.ObjKind;
      if ($tmp === 1) {
        if (IsAncestorExternal()) {
          Result = this.GetBIName(89)}
         else Result = this.GetBIName(85)}
       else if ($tmp === 2) {
        Result = this.GetBIName(91)}
       else {
        this.RaiseNotSupported(El,AContext,20190128102749,"");
      };
      return Result;
    };
    this.CreateRTTINewType = function (El, CallFuncName, IsForward, AContext, ObjLit) {
      var Result = null;
      var RttiPath = "";
      var TypeName = "";
      var Call = null;
      var aModule = null;
      var aResolver = null;
      var Attr = [];
      var AttrJS = null;
      var ObjLitEl = null;
      Result = null;
      ObjLit.set(null);
      aResolver = AContext.Resolver;
      aModule = El.GetModule();
      if (aModule === null) this.RaiseInconsistency(20170418115552,El);
      RttiPath = this.TransformModuleName(aModule,true,AContext);
      Call = this.CreateCallExpression(El);
      try {
        Call.FExpr = this.CreateMemberExpression([RttiPath,this.GetBIName(145),CallFuncName]);
        TypeName = this.GetTypeInfoName(El,AContext,El,true);
        Call.AddArg(this.CreateLiteralString(El,TypeName));
        if ($lt131.isPrototypeOf(El)) {
          Call.AddArg(this.CreateTypeInfoRef(El.DestType,AContext,El));
        };
        if (!IsForward) {
          ObjLit.set(this.CreateElement($lt132,El));
          Call.AddArg(ObjLit.get());
          Attr = aResolver.GetAttributeCallsEl(El);
          AttrJS = this.CreateRTTIAttributes(Attr,El,AContext);
          if (AttrJS !== null) {
            ObjLitEl = ObjLit.get().FElements.AddElement();
            ObjLitEl.FName = this.GetBIName(164);
            ObjLitEl.FExpr = AttrJS;
          };
        };
        Result = Call;
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.CreateRTTIAttributes = function (Attr, PosEl, aContext) {
      var Result = null;
      var AttrArrayLit = null;
      var ParamsArrayLit = null;
      var i = 0;
      var j = 0;
      var Expr = null;
      var ParamExpr = null;
      var aResolver = null;
      var Ref = null;
      var AttrClass = null;
      var ConstrParent = null;
      var aConstructor = null;
      var aName = "";
      var Params = [];
      var Value = null;
      var JSExpr = null;
      Result = null;
      aResolver = aContext.Resolver;
      AttrArrayLit = null;
      try {
        for (var $l = 0, $end = rtl.length(Attr) - 1; $l <= $end; $l++) {
          i = $l;
          Expr = Attr[i];
          if ($lt86.isPrototypeOf(Expr)) Expr = Expr.Value;
          if ($lt85.isPrototypeOf(Expr) && (Expr.OpCode === 27)) Expr = Expr.Right;
          if (!aResolver.IsNameExpr(Expr)) this.RaiseNotSupported(Expr,aContext,20190222182742,$lp16(Expr));
          Ref = rtl.as(Expr.FData,$lt71);
          if (Ref === null) continue;
          AttrClass = rtl.as(Ref.FDeclaration,$lt72);
          if (AttrClass.IsAbstract()) continue;
          if (!$lt183.isPrototypeOf(Ref.Context)) this.RaiseNotSupported(Expr,aContext,20190223085831,$lp16(Expr));
          aConstructor = Ref.Context.Proc;
          if (aConstructor.IsAbstract()) continue;
          ConstrParent = rtl.as(aConstructor.FParent,$lt72);
          if (ConstrParent.HelperForType !== null) aResolver.RaiseMsg(20190223220134,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"class method",18,"helper method"),Expr);
          aName = this.TransformElToJSName(aConstructor,aContext);
          if (AttrArrayLit === null) AttrArrayLit = this.CreateElement($lt147,PosEl);
          AttrArrayLit.AddElement(this.CreateReferencePathExpr(AttrClass,aContext,false,null));
          AttrArrayLit.AddElement(this.CreateLiteralString(PosEl,aName));
          ParamsArrayLit = null;
          Expr = Attr[i];
          if ($lt86.isPrototypeOf(Expr)) {
            Params = Expr.Params;
            for (var $l1 = 0, $end1 = rtl.length(Params) - 1; $l1 <= $end1; $l1++) {
              j = $l1;
              ParamExpr = Params[j];
              Value = aResolver.Eval(ParamExpr,{},true);
              if (Value !== null) {
                try {
                  JSExpr = this.ConvertConstValue(Value,aContext,PosEl);
                } finally {
                  $lp17({get: function () {
                      return Value;
                    }, set: function (v) {
                      Value = v;
                    }});
                }}
               else JSExpr = this.ConvertExpression(ParamExpr,aContext);
              if (ParamsArrayLit === null) {
                ParamsArrayLit = this.CreateElement($lt147,PosEl);
                AttrArrayLit.AddElement(ParamsArrayLit);
              };
              ParamsArrayLit.AddElement(JSExpr);
            };
          };
        };
        Result = AttrArrayLit;
      } finally {
        if (Result === null) AttrArrayLit = rtl.freeLoc(AttrArrayLit);
      };
      return Result;
    };
    this.GetExtRTTIVisibilityParam = function (El, Vis) {
      var Result = 0;
      var ExtVis = 0;
      ExtVis = $lt73.VisibilityToExtRTTI[El.Visibility];
      var $tmp = ExtVis;
      if ($tmp === 0) {
        if (El.Visibility === 6) {
          Result = 5}
         else Result = 0}
       else if ($tmp === 1) {
        if (El.Visibility === 7) {
          Result = 6}
         else Result = 1}
       else if ($tmp === 2) {
        Result = 2}
       else if ($tmp === 3) if (!(3 in Vis)) {
        Result = 4}
       else Result = 3;
      return Result;
    };
    this.CreateRTTIMemberField = function (ParentEl, Members, Index, AContext) {
      var $Self = this;
      var Result = null;
      var V = null;
      var Call = null;
      var OptionsEl = null;
      var ExtVis = 0;
      function AddExtRTTIVisibility() {
        Call.AddArg($Self.CreateLiteralNumber(V,ExtVis));
      };
      function AddOption(aName, JS) {
        var ObjLit = null;
        if (JS === null) return;
        if (OptionsEl === null) {
          if (ExtVis === 2) AddExtRTTIVisibility();
          OptionsEl = $Self.CreateElement($lt132,V);
          Call.AddArg(OptionsEl);
        };
        ObjLit = OptionsEl.FElements.AddElement();
        ObjLit.FName = aName;
        ObjLit.FExpr = JS;
      };
      function VarTypeInfoAlreadyCreated(VarType) {
        var Result = false;
        var i = 0;
        var PrevMember = null;
        i = Index - 1;
        while (i >= 0) {
          PrevMember = rtl.getObject(Members.Get(i));
          if ($lt80.isPrototypeOf(PrevMember) && (PrevMember.VarType === VarType) && $Self.IsElementUsed(PrevMember)) return true;
          i -= 1;
        };
        Result = false;
        return Result;
      };
      var JSTypeInfo = null;
      var aName = "";
      var aResolver = null;
      var Attr = [];
      var VarType = null;
      Result = null;
      aResolver = AContext.Resolver;
      V = rtl.getObject(Members.Get(Index));
      VarType = V.VarType;
      if ((VarType !== null) && (VarType.FName === "")) {
        if (!VarTypeInfoAlreadyCreated(VarType)) this.CreateRTTIAnonymous(VarType,AContext);
      };
      JSTypeInfo = this.CreateTypeInfoRef(VarType,AContext,V);
      OptionsEl = null;
      ExtVis = this.GetExtRTTIVisibilityParam(V,ParentEl.RTTIVisibility.Fields);
      Call = this.CreateCallExpression(V);
      try {
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(153),this.GetBIName(80)]);
        aName = this.TransformElToJSName(V,AContext);
        Call.AddArg(this.CreateLiteralString(V,aName));
        Call.AddArg(JSTypeInfo);
        if (ExtVis !== 2) AddExtRTTIVisibility();
        Attr = aResolver.GetAttributeCalls(Members,Index);
        if (rtl.length(Attr) > 0) AddOption(this.GetBIName(154),this.CreateRTTIAttributes(Attr,V,AContext));
        Result = Call;
        Call = null;
      } finally {
        Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.CreateRTTIMemberMethod = function (ParentEl, Members, Index, AContext) {
      var $Self = this;
      var Result = null;
      var Proc = null;
      var OptionsEl = null;
      var ResultTypeInfo = null;
      var Call = null;
      var Flags = 0;
      var ExtVis = 0;
      function AddExtRTTIVisibility() {
        if (ExtVis > -1) Call.AddArg($Self.CreateLiteralNumber(Proc,ExtVis));
        ExtVis = -1;
      };
      function AddOption(aName, JS) {
        var ObjLit = null;
        if (JS === null) return;
        if (OptionsEl === null) {
          AddExtRTTIVisibility();
          OptionsEl = $Self.CreateElement($lt132,Proc);
          Call.AddArg(OptionsEl);
        };
        ObjLit = OptionsEl.FElements.AddElement();
        ObjLit.FName = aName;
        ObjLit.FExpr = JS;
      };
      var FunName = "";
      var C = null;
      var MethodKind = 0;
      var ResultEl = null;
      var ProcScope = null;
      var OverriddenProcScope = null;
      var OverriddenClass = null;
      var aResolver = null;
      var Attr = [];
      Result = null;
      Proc = rtl.getObject(Members.Get(Index));
      aResolver = AContext.Resolver;
      if (Proc.IsOverride()) {
        ProcScope = rtl.as(Proc.FData,$lt60);
        if (ProcScope.OverriddenProc.Visibility === 4) {
          OverriddenProcScope = rtl.as(ProcScope.OverriddenProc.FData,$lt60);
          OverriddenClass = rtl.as(OverriddenProcScope.ClassRecScope.FElement,$lt72);
          if (this.HasTypeInfo(OverriddenClass,AContext)) return Result;
        };
      };
      if ((Proc.$class.ClassType() === $lt184) || (Proc.$class.ClassType() === $lt185)) return Result;
      OptionsEl = null;
      ResultTypeInfo = null;
      try {
        Call = this.CreateCallExpression(Proc);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(153),this.GetBIName(82)]);
        FunName = this.TransformElToJSName(Proc,AContext);
        Call.AddArg(this.CreateLiteralString(Proc,FunName));
        C = Proc.$class.ClassType();
        if (C === $lt67) {
          MethodKind = 0}
         else if (C === $lt94) {
          MethodKind = 1}
         else if (C === $lt109) {
          MethodKind = 2}
         else if (C === $lt173) {
          MethodKind = 3}
         else if (C === $lt108) {
          MethodKind = 4}
         else if (C === $lt78) {
          MethodKind = 5}
         else this.RaiseNotSupported(Proc,AContext,20170409190242,"");
        Call.AddArg(this.CreateLiteralNumber(Proc,MethodKind));
        Call.AddArg(this.CreateRTTIArgList(Proc,Proc.ProcType.Args,AContext));
        ExtVis = this.GetExtRTTIVisibilityParam(Proc,ParentEl.RTTIVisibility.Methods);
        if (ExtVis !== 2) AddExtRTTIVisibility();
        ResultTypeInfo = null;
        Flags = 0;
        if (Proc.IsStatic()) Flags += 1;
        if (3 in Proc.ProcType.Modifiers) Flags += 2;
        if (5 in Proc.ProcType.Modifiers) Flags += 16;
        if (Proc.IsExternal()) Flags += 4;
        Attr = aResolver.GetAttributeCalls(Members,Index);
        if (C.InheritsFrom($lt94)) {
          ResultEl = Proc.GetFT().ResultEl;
          ResultTypeInfo = this.CreateTypeInfoRef(ResultEl.ResultType,AContext,ResultEl);
          if (ResultTypeInfo !== null) {
            AddExtRTTIVisibility();
            Call.AddArg(ResultTypeInfo);
          };
        };
        if ((ResultTypeInfo === null) && ((Flags > 0) || (rtl.length(Attr) > 0))) {
          AddExtRTTIVisibility();
          Call.AddArg(this.CreateLiteralNull(Proc));
        };
        if ((Flags > 0) || (rtl.length(Attr) > 0)) Call.AddArg(this.CreateLiteralNumber(Proc,Flags));
        if (rtl.length(Attr) > 0) AddOption(this.GetBIName(154),this.CreateRTTIAttributes(Attr,Proc,AContext));
        Result = Call;
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.CreateRTTIMemberProperty = function (ParentEl, Members, Index, AContext) {
      var $Self = this;
      var Result = null;
      var Prop = null;
      var Call = null;
      var OptionsEl = null;
      var ExtVis = 0;
      function AddExtRTTIVisibility() {
        Call.AddArg($Self.CreateLiteralNumber(Prop,ExtVis));
      };
      function GetAccessorName(Decl) {
        var Result = "";
        Result = $Self.TransformElToJSName(Decl,AContext);
        return Result;
      };
      function AddOption(aName, JS) {
        var ObjLit = null;
        if (JS === null) return;
        if (OptionsEl === null) {
          if (ExtVis === 4) AddExtRTTIVisibility();
          OptionsEl = $Self.CreateElement($lt132,Prop);
          Call.AddArg(OptionsEl);
        };
        ObjLit = OptionsEl.FElements.AddElement();
        ObjLit.FName = aName;
        ObjLit.FExpr = JS;
      };
      var PropName = "";
      var Flags = 0;
      var GetterPas = null;
      var SetterPas = null;
      var DeclEl = null;
      var ResultTypeInfo = null;
      var DefValue = null;
      var VarType = null;
      var StoredExpr = null;
      var IndexExpr = null;
      var DefaultExpr = null;
      var StoredResolved = $lt84.$new();
      var VarTypeResolved = $lt84.$new();
      var StoredValue = null;
      var PasValue = null;
      var IndexValue = null;
      var aResolver = null;
      var Attr = [];
      Result = null;
      Prop = rtl.getObject(Members.Get(Index));
      aResolver = AContext.Resolver;
      OptionsEl = null;
      try {
        Call = this.CreateCallExpression(Prop);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(153),this.GetBIName(83)]);
        PropName = this.TransformToJSName(Prop,Prop.FName,false,AContext);
        Call.AddArg(this.CreateLiteralString(Prop,PropName));
        Flags = 0;
        GetterPas = aResolver.GetPasPropertyGetter(Prop);
        if ($lt67.isPrototypeOf(GetterPas)) Flags += 1;
        SetterPas = aResolver.GetPasPropertySetter(Prop);
        if ($lt67.isPrototypeOf(SetterPas)) Flags += 2;
        StoredExpr = aResolver.GetPasPropertyStoredExpr(Prop);
        IndexExpr = aResolver.GetPasPropertyIndex(Prop);
        if (IndexExpr !== null) Flags += 16;
        DefaultExpr = aResolver.GetPasPropertyDefaultExpr(Prop);
        if (StoredExpr !== null) {
          aResolver.ComputeElement(StoredExpr,StoredResolved,rtl.createSet(1),null);
          if ($lt67.isPrototypeOf(StoredResolved.IdentEl)) {
            Flags += 12}
           else {
            if ((StoredResolved.BaseType === 15) && (StoredResolved.ExprEl !== null)) {
              StoredValue = aResolver.Eval(StoredExpr,{},true);
              if (StoredValue !== null) try {
                if (StoredValue.Kind !== 3) this.RaiseInconsistency(20170924082845,Prop);
                StoredExpr = null;
                if (StoredValue.B) {
                  Flags += 0}
                 else Flags += 4;
              } finally {
                $lp17({get: function () {
                    return StoredValue;
                  }, set: function (v) {
                    StoredValue = v;
                  }});
              };
            };
            if (StoredExpr !== null) Flags += 8;
          };
        };
        if (Prop.GetIsClass()) Flags += 32;
        Call.AddArg(this.CreateLiteralNumber(Prop,Flags));
        VarType = aResolver.GetPasPropertyType(Prop);
        aResolver.ComputeElement(VarType,VarTypeResolved,rtl.createSet(4),null);
        ResultTypeInfo = this.CreateTypeInfoRef(VarType,AContext,Prop);
        if (ResultTypeInfo !== null) {
          Call.AddArg(ResultTypeInfo)}
         else Call.AddArg(this.CreateLiteralNull(Prop));
        if (GetterPas === null) {
          Call.AddArg(this.CreateLiteralString(Prop,""))}
         else Call.AddArg(this.CreateLiteralString(Prop,GetAccessorName(GetterPas)));
        if (SetterPas === null) {
          Call.AddArg(this.CreateLiteralString(Prop,""))}
         else Call.AddArg(this.CreateLiteralString(Prop,GetAccessorName(SetterPas)));
        ExtVis = this.GetExtRTTIVisibilityParam(Prop,ParentEl.RTTIVisibility.Properties);
        if (ExtVis !== 4) AddExtRTTIVisibility();
        IndexExpr = aResolver.GetPasPropertyIndex(Prop);
        if (IndexExpr !== null) {
          IndexValue = aResolver.Eval(IndexExpr,rtl.createSet(0),true);
          try {
            AddOption(this.GetBIName(161),this.ConvertConstValue(IndexValue,AContext,Prop));
          } finally {
            $lp17({get: function () {
                return IndexValue;
              }, set: function (v) {
                IndexValue = v;
              }});
          };
        };
        if (StoredExpr !== null) {
          DeclEl = rtl.as(StoredExpr.FData,$lt71).FDeclaration;
          AddOption(this.GetBIName(162),this.CreateLiteralString(Prop,GetAccessorName(DeclEl)));
        };
        if (DefaultExpr !== null) {
          PasValue = aResolver.Eval(DefaultExpr,rtl.createSet(0),false);
          try {
            DefValue = null;
            if (VarTypeResolved.BaseType in rtl.createSet(34,36)) DefValue = this.CreateValInit(VarType,DefaultExpr,DefaultExpr,AContext);
            if (DefValue === null) DefValue = this.ConvertConstValue(PasValue,AContext,Prop);
            AddOption(this.GetBIName(160),DefValue);
          } finally {
            $lp17({get: function () {
                return PasValue;
              }, set: function (v) {
                PasValue = v;
              }});
          };
        };
        Attr = aResolver.GetAttributeCalls(Members,Index);
        if (rtl.length(Attr) > 0) AddOption(this.GetBIName(154),this.CreateRTTIAttributes(Attr,Prop,AContext));
        Result = Call;
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.CreateRTTIAnonymous = function (El, AContext) {
      var C = null;
      var JS = null;
      var GlobalCtx = null;
      var Src = null;
      if (El.FName !== "") this.RaiseNotSupported(El,AContext,20170905162324,"inconsistency");
      GlobalCtx = AContext.GetGlobalFunc();
      if (GlobalCtx === null) this.RaiseNotSupported(El,AContext,20181229130835,"");
      if (!$lt123.isPrototypeOf(GlobalCtx.JSElement)) {
        this.RaiseNotSupported(El,AContext,20181229130926,"");
      };
      Src = GlobalCtx.JSElement;
      C = El.$class.ClassType();
      if (C === $lt107) {
        JS = this.ConvertArrayType(El,AContext);
        this.AddToSourceElements(Src,JS);
      };
    };
    this.CreateRTTIAnonymousArray = function (El, AContext) {
      var Result = null;
      var Scope = null;
      var SpecializeDelay = false;
      var CallName = "";
      var Call = null;
      var Obj = null;
      var aResolver = null;
      var ElTypeHi = null;
      var ElTypeLo = null;
      var Prop = null;
      var ArrLit = null;
      var Arr = null;
      var Index = 0;
      var RangeEl = null;
      var RgLen = 0;
      Result = null;
      aResolver = AContext.Resolver;
      Scope = rtl.as(El.FData,$lt17);
      SpecializeDelay = (Scope !== null) && this.SpecializeNeedsDelay(El,AContext);
      if (rtl.length(El.Ranges) > 0) {
        CallName = this.GetBIName(99)}
       else CallName = this.GetBIName(87);
      Call = this.CreateRTTINewType(El,CallName,false,AContext,{get: function () {
          return Obj;
        }, set: function (v) {
          Obj = v;
        }});
      try {
        ElTypeHi = aResolver.ResolveAliasType(El.ElType,false);
        ElTypeLo = aResolver.ResolveAliasType(ElTypeHi,true);
        if (rtl.length(El.Ranges) > 0) {
          Prop = Obj.FElements.AddElement();
          Prop.FName = this.GetBIName(146);
          ArrLit = this.CreateElement($lt147,El);
          Prop.FExpr = ArrLit;
          Arr = El;
          Index = 0;
          do {
            RangeEl = Arr.Ranges[Index];
            RgLen = aResolver.GetRangeLength(RangeEl);
            ArrLit.AddElement(this.CreateLiteralNumber(RangeEl,RgLen));
            Index += 1;
            if (Index === rtl.length(Arr.Ranges)) {
              if (ElTypeLo.$class.ClassType() !== $lt107) break;
              Arr = ElTypeLo;
              if (rtl.length(Arr.Ranges) === 0) this.RaiseNotSupported(Arr,AContext,20170411222315,"static array of anonymous array");
              ElTypeHi = aResolver.ResolveAliasType(Arr.ElType,false);
              ElTypeLo = aResolver.ResolveAliasType(ElTypeHi,true);
              Index = 0;
            };
          } while (!false);
        };
        if (!SpecializeDelay) {
          Prop = Obj.FElements.AddElement();
          Prop.FName = this.GetBIName(147);
          Prop.FExpr = this.CreateTypeInfoRef(ElTypeHi,AContext,El);
        };
        Result = Call;
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    var TMemberType = {"0": "mtClass", mtClass: 0, "1": "mtInterface", mtInterface: 1, "2": "mtRecord", mtRecord: 2};
    this.CreateRTTIMembers = function (El, Src, FuncContext, MembersSrc, MembersFuncContext, RTTIExpr, NeedLocalVar) {
      var $Self = this;
      var Result = false;
      function CreateLocalvar() {
        var VarSt = null;
        if (Result) return;
        Result = true;
        VarSt = $Self.CreateVarStatement($Self.GetBIName(153),RTTIExpr,El);
        if (Src === MembersSrc) {
          $Self.AddToSourceElements(Src,VarSt)}
         else Src.FStatements.InsertNode(0).FNode = VarSt;
      };
      var mt = 0;
      var i = 0;
      var P = null;
      var C = null;
      var NewEl = null;
      var Members = null;
      var aResolver = null;
      Result = false;
      aResolver = FuncContext.Resolver;
      if (El.$class.ClassType() === $lt81) {
        mt = 2}
       else if (El.$class.ClassType() === $lt72) {
        var $tmp = El.ObjKind;
        if ($tmp === 2) {
          mt = 1}
         else {
          mt = 0;
        };
      } else this.RaiseNotSupported(El,FuncContext,20190223211808,$lp16(El));
      FuncContext.AddLocalJSVar(this.GetBIName(153),false);
      if (NeedLocalVar) CreateLocalvar();
      Members = El.Members;
      for (var $l = 0, $end = Members.FCount - 1; $l <= $end; $l++) {
        i = $l;
        NewEl = null;
        P = rtl.getObject(Members.Get(i));
        C = P.$class.ClassType();
        if (C.InheritsFrom($lt76) && this.HasTypeInfo(P,MembersFuncContext)) {
          if (aResolver.IsAnonymousElType(P)) {
            if (C.InheritsFrom($lt107)) NewEl = this.CreateRTTIAnonymousArray(P,MembersFuncContext);
          };
        } else {
          var $tmp1 = mt;
          if ($tmp1 === 0) {
            if (P.Visibility === 4) {}
            else if (El.HasExtRTTI(P)) {}
            else continue}
           else if ($tmp1 === 1) {}
          else if ($tmp1 === 2) if (P.Visibility in rtl.createSet(1,6)) {
            if (!El.HasExtRTTI(P)) continue;
          } else if (P.$class.ClassType() === $lt75) continue;
          if (!this.IsElementUsed(P)) continue;
          if (C === $lt80) {
            NewEl = this.CreateRTTIMemberField(El,Members,i,MembersFuncContext)}
           else if (C.InheritsFrom($lt67)) {
            if (aResolver.GetProcTemplateTypes(P) !== null) continue;
            if (rtl.as(P.FData,$lt16).SpecializedFromItem !== null) continue;
            NewEl = this.CreateRTTIMemberMethod(El,Members,i,MembersFuncContext);
          } else if (C === $lt74) {
            NewEl = this.CreateRTTIMemberProperty(El,Members,i,MembersFuncContext)}
           else if (C.InheritsFrom($lt76) || (C === $lt186)) {}
          else this.DoError$2(20190105142236,3053,rtl.getResStr($lm6,"sSymbolCannotBePublished"),[],P);
        };
        if (NewEl === null) continue;
        if (!Result) CreateLocalvar();
        this.AddToSourceElements(MembersSrc,NewEl);
      };
      return Result;
    };
    this.AddIntfDelegations = function (ClassEl, Prop, FinishedGUIDs, ObjLit, aContext) {
      var i = 0;
      var Expr = null;
      var ResolvedEl = $lt84.$new();
      var OrigIntfType = null;
      var OrigPropType = null;
      var PropType = null;
      var IntfType = null;
      var LitEl = null;
      var Scope = null;
      var FunSt = null;
      var aResolver = null;
      var GetterJS = null;
      var RetSt = null;
      var Call = null;
      var FunName = "";
      var FuncContext = null;
      aResolver = aContext.Resolver;
      GetterJS = null;
      FuncContext = null;
      try {
        for (var $l = 0, $end = rtl.length(Prop.Implements) - 1; $l <= $end; $l++) {
          i = $l;
          Expr = Prop.Implements[i];
          aResolver.ComputeElement(Expr,ResolvedEl,rtl.createSet(1),null);
          if (!$lt76.isPrototypeOf(ResolvedEl.IdentEl)) this.RaiseInconsistency(20180327183019,Expr);
          OrigIntfType = ResolvedEl.IdentEl;
          IntfType = rtl.as(aResolver.ResolveAliasType(OrigIntfType,true),$lt72);
          Scope = rtl.as(IntfType.FData,$lt14);
          if (Scope.GUID === "") this.RaiseInconsistency(20180327184912,Expr);
          if (FinishedGUIDs.IndexOf(Scope.GUID) >= 0) continue;
          FinishedGUIDs.Add(Scope.GUID);
          LitEl = ObjLit.FElements.AddElement();
          LitEl.FName = Scope.GUID;
          FunSt = this.CreateFunctionSt(ClassEl,true,false);
          LitEl.FExpr = FunSt;
          RetSt = this.CreateElement($lt160,Prop);
          FunSt.FFuncDef.FBody.FA = RetSt;
          OrigPropType = aResolver.GetPasPropertyType(Prop);
          aResolver.ComputeElement(OrigPropType,ResolvedEl,rtl.createSet(4),null);
          if (!$lt76.isPrototypeOf(ResolvedEl.IdentEl)) this.RaiseInconsistency(20180327190201,Prop);
          PropType = aResolver.ResolveAliasType(ResolvedEl.IdentEl,true);
          if (!$lt72.isPrototypeOf(PropType)) this.RaiseInconsistency(20180327190442,Prop);
          if (FuncContext !== null) $lp({get: function () {
              return FuncContext;
            }, set: function (v) {
              FuncContext = v;
            }});
          FuncContext = $lt34.$create("Create$1",[Prop,RetSt,aContext]);
          FuncContext.ThisVar.Element = ClassEl;
          FuncContext.ThisVar.Kind = 3;
          if (aResolver.GetPasPropertyArgs(Prop).FCount > 0) this.RaiseNotSupported(Prop,aContext,20180327191159,"");
          GetterJS = this.CreatePropertyGet(Prop,null,FuncContext,Prop);
          var $tmp = PropType.ObjKind;
          if ($tmp === 1) {
            var $tmp1 = IntfType.InterfaceType;
            if ($tmp1 === 0) {
              FunName = this.GetBIName(55)}
             else if ($tmp1 === 1) {
              FunName = this.GetBIName(46)}
             else {
              this.RaiseNotSupported(Prop,aContext,20180406085319,$lm1.InterfaceTypeNames[IntfType.InterfaceType]);
            };
            Call = this.CreateCallExpression(Prop);
            RetSt.FExpr = Call;
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),FunName]);
            Call.AddArg(GetterJS);
            GetterJS = null;
            Call.AddArg(this.CreateReferencePathExpr(IntfType,FuncContext,false,null));
          } else if ($tmp === 2) {
            var $tmp2 = IntfType.InterfaceType;
            if ($tmp2 === 0) {
              if (this.IsInterfaceRef(GetterJS)) {
                GetterJS = this.RemoveIntfRef(GetterJS,FuncContext)}
               else {
                GetterJS = this.CreateAddRef(GetterJS,Prop);
              };
            } else if ($tmp2 === 1) {}
            else {
              this.RaiseNotSupported(Prop,FuncContext,20180406085053,$lm1.InterfaceTypeNames[IntfType.InterfaceType]);
            };
            RetSt.FExpr = GetterJS;
            GetterJS = null;
          } else {
            this.RaiseNotSupported(Prop,FuncContext,20180327190538,$lm1.ObjKindNames[PropType.ObjKind]);
          };
        };
      } finally {
        FuncContext = rtl.freeLoc(FuncContext);
        GetterJS = rtl.freeLoc(GetterJS);
      };
    };
    this.CreateGUIDObjLit = function (aTGUIDRecord, GUID, PosEl, AContext) {
      var $Self = this;
      var Result = null;
      var i = 0;
      var Members = null;
      function GetMember(aName) {
        var Result = null;
        while (i < Members.FCount) {
          Result = rtl.getObject(Members.Get(i));
          i += 1;
          if ($lt80.isPrototypeOf(Result)) if ($lp18(Result.FName,aName)) {
            return Result}
           else $Self.RaiseInconsistency(20180415094721,PosEl);
        };
        $Self.RaiseInconsistency(20210306223031,PosEl);
        return Result;
      };
      var PropEl = null;
      var MemberEl = null;
      var ArrLit = null;
      Members = aTGUIDRecord.Members;
      Result = this.CreateElement($lt132,PosEl);
      i = 0;
      MemberEl = GetMember("D1");
      PropEl = Result.FElements.AddElement();
      PropEl.FName = this.TransformElToJSName(MemberEl,AContext);
      PropEl.FExpr = this.CreateLiteralHexNumber(PosEl,GUID.D1,8);
      MemberEl = GetMember("D2");
      PropEl = Result.FElements.AddElement();
      PropEl.FName = this.TransformElToJSName(MemberEl,AContext);
      PropEl.FExpr = this.CreateLiteralHexNumber(PosEl,GUID.D2,4);
      MemberEl = GetMember("D3");
      PropEl = Result.FElements.AddElement();
      PropEl.FName = this.TransformElToJSName(MemberEl,AContext);
      PropEl.FExpr = this.CreateLiteralHexNumber(PosEl,GUID.D3,4);
      MemberEl = GetMember("D4");
      PropEl = Result.FElements.AddElement();
      PropEl.FName = this.TransformElToJSName(MemberEl,AContext);
      ArrLit = this.CreateElement($lt147,PosEl);
      PropEl.FExpr = ArrLit;
      for (i = 0; i <= 7; i++) ArrLit.AddElement(this.CreateLiteralHexNumber(PosEl,GUID.D4[i],2));
      return Result;
    };
    this.CreateAssignManagedVar = function (LeftResolved, LHS, RHS, AContext, PosEl) {
      var $Self = this;
      var Result = null;
      function AddProcRelease(Proc, SubEl) {
        var FuncContext = null;
        FuncContext = AContext.GetFuncContextOfPasElement(Proc);
        if (FuncContext !== null) {
          if ($lt90.isPrototypeOf(SubEl)) {
            FuncContext.ResultNeedsIntfRelease = true}
           else FuncContext.Add_InterfaceRelease(SubEl);
        } else {
          $Self.RaiseInconsistency(20180401164150,PosEl);
        };
      };
      var Call = null;
      var AssignSt = null;
      var Prim = null;
      var IdentEl = null;
      var Proc = null;
      var ok = false;
      var SkipAddRef = false;
      Result = null;
      ok = false;
      try {
        SkipAddRef = false;
        if (this.IsInterfaceRef(RHS.get())) {
          RHS.set(this.RemoveIntfRef(RHS.get(),AContext));
          SkipAddRef = true;
        };
        Call = this.CreateCallExpression(PosEl);
        Result = Call;
        if ($lt124.isPrototypeOf(LHS.get())) {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(52)]);
          Call.AddArg(LHS.get().FMExpr);
          LHS.get().FMExpr = null;
          Call.AddArg(this.CreateLiteralJSString(PosEl,LHS.get().FName));
          $lp(LHS);
          Call.AddArg(RHS.get());
          RHS.set(null);
          if (SkipAddRef) Call.AddArg(this.CreateLiteralBoolean(PosEl,true));
        } else if ($lt142.isPrototypeOf(LHS.get())) {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(52)]);
          Call.AddArg(LHS.get().FMExpr);
          LHS.get().FMExpr = null;
          Call.AddArg(LHS.get().FName);
          LHS.get().FName = null;
          $lp(LHS);
          Call.AddArg(RHS.get());
          RHS.set(null);
          if (SkipAddRef) Call.AddArg(this.CreateLiteralBoolean(PosEl,true));
        } else if ($lt125.isPrototypeOf(LHS.get())) {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(51)]);
          Prim = this.CreateElement($lt125,PosEl);
          Prim.FName = LHS.get().FName;
          Call.AddArg(Prim);
          Call.AddArg(RHS.get());
          RHS.set(null);
          if (SkipAddRef) Call.AddArg(this.CreateLiteralBoolean(PosEl,true));
          AssignSt = this.CreateElement($lt133,PosEl);
          AssignSt.FLHS = LHS.get();
          LHS.set(null);
          AssignSt.FExpr = Call;
          Result = AssignSt;
        } else this.RaiseNotSupported(PosEl,AContext,20180401105030,$lp16(LHS.get()));
        IdentEl = LeftResolved.IdentEl;
        if (IdentEl !== null) {
          if ((IdentEl.$class.ClassType() === $lt80) && $lt77.isPrototypeOf(IdentEl.FParent)) {
            Proc = IdentEl.FParent.FParent;
            AddProcRelease(Proc,IdentEl);
          } else if ((IdentEl.$class.ClassType() === $lt89) && $lt118.isPrototypeOf(IdentEl.FParent) && $lt67.isPrototypeOf(IdentEl.FParent.FParent)) {
            Proc = IdentEl.FParent.FParent;
            AddProcRelease(Proc,IdentEl);
          } else if (IdentEl.$class.ClassType() === $lt90) {
            Proc = IdentEl.FParent.FParent;
            AddProcRelease(Proc,IdentEl);
          };
        };
        ok = true;
      } finally {
        if (!ok) Result = rtl.freeLoc(Result);
      };
      return Result;
    };
    this.IsInterfaceRef = function (Expr) {
      var Result = false;
      var Call = null;
      var DotExpr = null;
      Result = false;
      if (Expr === null) return Result;
      if (Expr.$class.ClassType() !== $lt144) return Result;
      Call = Expr;
      if (Call.FExpr.$class.ClassType() !== $lt124) return Result;
      DotExpr = Call.FExpr;
      Result = (DotExpr.FName === this.GetBIName(42)) && $lt125.isPrototypeOf(DotExpr.FMExpr) && (DotExpr.FMExpr.FName === this.GetBIName(119));
      return Result;
    };
    this.CreateAddRef = function (Expr, PosEl) {
      var Result = null;
      Result = this.CreateCallExpression(PosEl);
      Result.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(35)]);
      Result.AddArg(Expr);
      return Result;
    };
    this.CreateIntfRef = function (Expr, aContext, PosEl) {
      var Result = null;
      var FuncContext = null;
      var Call = null;
      FuncContext = aContext.GetFunctionContext();
      if (FuncContext === null) this.RaiseNotSupported(PosEl,aContext,20180402183859,"");
      if (this.IsInterfaceRef(Expr)) return Expr;
      FuncContext.IntfExprReleaseCount += 1;
      Call = this.CreateCallExpression(PosEl);
      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(119) + "." + this.GetBIName(42),PosEl);
      Call.AddArg(this.CreateLiteralNumber(PosEl,FuncContext.IntfExprReleaseCount));
      Call.AddArg(Expr);
      Result = Call;
      return Result;
    };
    this.RemoveIntfRef = function (Call, AContext) {
      var Result = null;
      var Lit = null;
      var LitValue = null;
      var FuncContext = null;
      Lit = Call.FArgs.FElements.GetE(1);
      Result = Lit.FExpr;
      Lit.FExpr = null;
      Lit = Call.FArgs.FElements.GetE(0);
      if ($lt137.isPrototypeOf(Lit.FExpr)) {
        LitValue = Lit.FExpr.FValue;
        FuncContext = AContext.GetFunctionContext();
        if ((FuncContext !== null) && (FuncContext.IntfExprReleaseCount === LitValue.GetAsNumber())) FuncContext.IntfExprReleaseCount -= 1;
      };
      Call = rtl.freeLoc(Call);
      return Result;
    };
    this.CreateFunctionTryFinally = function (FuncContext) {
      if (FuncContext.TrySt !== null) return;
      FuncContext.TrySt = this.CreateElement($lt165,FuncContext.PasElement);
      FuncContext.TrySt.FBlock = FuncContext.BodySt;
      FuncContext.BodySt = FuncContext.TrySt;
    };
    this.AddFunctionFinallySt = function (NewEl, PosEl, FuncContext) {
      this.CreateFunctionTryFinally(FuncContext);
      this.AddToStatementList({p: FuncContext, get: function () {
          return this.p.FinallyFirst;
        }, set: function (v) {
          this.p.FinallyFirst = v;
        }},{p: FuncContext, get: function () {
          return this.p.FinallyLast;
        }, set: function (v) {
          this.p.FinallyLast = v;
        }},NewEl,PosEl);
      FuncContext.TrySt.FBFinally = FuncContext.FinallyFirst;
    };
    this.AddFunctionFinallyRelease = function (SubEl, FuncContext) {
      var Call = null;
      var FuncName = "";
      Call = this.CreateCallExpression(SubEl);
      this.AddFunctionFinallySt(Call,SubEl,FuncContext);
      FuncName = this.GetBIName(36);
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),FuncName]);
      Call.AddArg(this.CreateReferencePathExpr(SubEl,FuncContext,false,null));
    };
    this.AddInFrontOfFunctionTry = function (NewEl, PosEl, FuncContext) {
      var St = null;
      var OldSt = null;
      this.CreateFunctionTryFinally(FuncContext);
      if (FuncContext.BodySt === FuncContext.TrySt) {
        St = this.CreateElement($lt129,PosEl);
        St.FA = NewEl;
        St.FB = FuncContext.TrySt;
        FuncContext.BodySt = St;
      } else if ($lt129.isPrototypeOf(FuncContext.BodySt)) {
        OldSt = FuncContext.BodySt;
        while ($lt129.isPrototypeOf(OldSt.FB)) OldSt = OldSt.FB;
        St = this.CreateElement($lt129,PosEl);
        St.FA = NewEl;
        St.FB = OldSt.FB;
        OldSt.FB = St;
      } else this.RaiseInconsistency(20180402103144,PosEl);
    };
    this.AddInterfaceReleases = function (FuncContext, PosEl) {
      var i = 0;
      var P = null;
      var Call = null;
      var VarSt = null;
      if (FuncContext.IntfExprReleaseCount > 0) {
        Call = this.CreateCallExpression(PosEl);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(43)]);
        VarSt = this.CreateVarStatement(this.GetBIName(119),Call,PosEl);
        this.AddInFrontOfFunctionTry(VarSt,PosEl,FuncContext);
        Call = this.CreateCallExpression(PosEl);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(119),this.GetBIName(44)]);
        this.AddFunctionFinallySt(Call,PosEl,FuncContext);
      };
      if (FuncContext.IntfElReleases !== null) for (var $l = 0, $end = FuncContext.IntfElReleases.FCount - 1; $l <= $end; $l++) {
        i = $l;
        P = rtl.getObject(FuncContext.IntfElReleases.Get(i));
        if (P.$class.ClassType() === $lt80) {
          this.AddFunctionFinallyRelease(P,FuncContext);
        } else if ((P.$class.ClassType() === $lt89) && (P.Access === 0)) {
          Call = this.CreateAddRef(this.CreateReferencePathExpr(P,FuncContext,false,null),P);
          this.AddInFrontOfFunctionTry(Call,PosEl,FuncContext);
          this.AddFunctionFinallyRelease(P,FuncContext);
        } else this.RaiseInconsistency(20180401165742,P);
      };
    };
    this.AddInterfaceRelease_Result = function (FuncContext, ResultVarName, PosEl) {
      var VarSt = null;
      var AssignSt = null;
      var IfSt = null;
      var Call = null;
      VarSt = this.CreateVarStatement(this.GetBIName(140),this.CreateLiteralBoolean(PosEl,false),PosEl);
      this.AddInFrontOfFunctionTry(VarSt,PosEl,FuncContext);
      AssignSt = this.CreateElement($lt133,PosEl);
      this.AddToStatementList$1(rtl.as(FuncContext.TrySt.FBlock,$lt129),AssignSt,PosEl);
      AssignSt.FLHS = this.CreatePrimitiveDotExpr(this.GetBIName(140),PosEl);
      AssignSt.FExpr = this.CreateLiteralBoolean(PosEl,true);
      IfSt = this.CreateElement($lt151,PosEl);
      this.AddFunctionFinallySt(IfSt,PosEl,FuncContext);
      IfSt.FCond = this.CreateUnaryNot(this.CreatePrimitiveDotExpr(this.GetBIName(140),PosEl),PosEl);
      Call = this.CreateCallExpression(PosEl);
      IfSt.FBTrue = Call;
      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(36)]);
      Call.AddArg(this.CreatePrimitiveDotExpr(ResultVarName,PosEl));
    };
    this.AddClassSupportedInterfaces = function (El, Src, FuncContext) {
      var $Self = this;
      function IsClassInterfaceNeeded(aMember) {
        var Result = false;
        var SpecData = null;
        if ($lt120.isPrototypeOf(aMember)) {
          SpecData = rtl.as(aMember.FData,$lt138);
          aMember = SpecData.SpecializedType;
        };
        if ($Self.IsElementUsed(aMember)) return true;
        Result = false;
        return Result;
      };
      function AddMapProcs(map, Call, ObjLit, FuncContext) {
        var i = 0;
        var MapItem = null;
        var Proc = null;
        var IntfProc = null;
        var ProcName = "";
        var IntfProcName = "";
        var Intf = null;
        var Lit = null;
        Intf = map.Intf;
        if (map.Procs !== null) for (var $l = 0, $end = map.Procs.FCount - 1; $l <= $end; $l++) {
          i = $l;
          MapItem = rtl.getObject(map.Procs.Get(i));
          if (!$lt67.isPrototypeOf(MapItem)) continue;
          Proc = MapItem;
          ProcName = $Self.TransformElToJSName(Proc,FuncContext);
          IntfProc = rtl.as(rtl.getObject(Intf.Members.Get(i)),$lt67);
          IntfProcName = $Self.TransformElToJSName(IntfProc,FuncContext);
          if (IntfProcName === ProcName) continue;
          if (ObjLit.get() === null) {
            ObjLit.set($Self.CreateElement($lt132,El));
            Call.AddArg(ObjLit.get());
          };
          Lit = ObjLit.get().FElements.AddElement();
          Lit.FName = IntfProcName;
          Lit.FExpr = $Self.CreateLiteralString(El,ProcName);
        };
        if (map.AncestorMap !== null) AddMapProcs(map.AncestorMap,Call,ObjLit,FuncContext);
      };
      var Call = null;
      var ObjLit = null;
      var i = 0;
      var Scope = null;
      var CurScope = null;
      var o = null;
      var IntfMaps = null;
      var MapsObj = null;
      var map = null;
      var FinishedGUIDs = null;
      var Intf = null;
      var CurEl = null;
      var NeedIntfMap = false;
      var HasInterfaces = false;
      HasInterfaces = false;
      NeedIntfMap = false;
      Scope = El.FData;
      do {
        if (Scope.Interfaces !== null) {
          for (var $l = 0, $end = Scope.Interfaces.FCount - 1; $l <= $end; $l++) {
            i = $l;
            CurEl = Scope.FElement;
            if (!IsClassInterfaceNeeded(rtl.getObject(CurEl.Interfaces.Get(i)))) continue;
            HasInterfaces = true;
            o = rtl.getObject(Scope.Interfaces.Get(i));
            if ($lt74.isPrototypeOf(o)) NeedIntfMap = true;
          };
        };
        Scope = Scope.AncestorScope;
      } while (!(Scope === null));
      if (!HasInterfaces) return;
      IntfMaps = null;
      FinishedGUIDs = $lt61.$create("Create$1");
      try {
        ObjLit = null;
        Scope = El.FData;
        do {
          if (Scope.Interfaces !== null) {
            for (var $l1 = 0, $end1 = Scope.Interfaces.FCount - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              CurEl = Scope.FElement;
              if (!IsClassInterfaceNeeded(rtl.getObject(CurEl.Interfaces.Get(i)))) continue;
              if (NeedIntfMap) {
                IntfMaps = this.CreateElement($lt133,El);
                this.AddToSourceElements(Src,IntfMaps);
                IntfMaps.FLHS = this.CreatePrimitiveDotExpr("this." + this.GetBIName(122),El);
                MapsObj = this.CreateElement($lt132,El);
                IntfMaps.FExpr = MapsObj;
                NeedIntfMap = false;
              };
              o = rtl.getObject(Scope.Interfaces.Get(i));
              if ($lt187.isPrototypeOf(o)) {
                map = o;
                Intf = map.Intf;
                CurScope = Intf.FData;
                if (FinishedGUIDs.IndexOf(CurScope.GUID) >= 0) continue;
                FinishedGUIDs.Add(CurScope.GUID);
                Call = this.CreateCallExpression(El);
                this.AddToSourceElements(Src,Call);
                Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(37),El);
                Call.AddArg(this.CreatePrimitiveDotExpr("this",El));
                Call.AddArg(this.CreateReferencePathExpr(map.Intf,FuncContext,false,null));
                AddMapProcs(map,Call,{get: function () {
                    return ObjLit;
                  }, set: function (v) {
                    ObjLit = v;
                  }},FuncContext);
              } else if ($lt74.isPrototypeOf(o)) {
                this.AddIntfDelegations(El,o,FinishedGUIDs,MapsObj,FuncContext)}
               else this.RaiseNotSupported(El,FuncContext,20180326234026,$lp16(o));
            };
          };
          Scope = Scope.AncestorScope;
        } while (!(Scope === null));
      } finally {
        FinishedGUIDs = rtl.freeLoc(FinishedGUIDs);
      };
    };
    this.CreateCallHelperMethod = function (Proc, Expr, AContext, Implicit) {
      var $Self = this;
      var Result = null;
      var Left = null;
      var WithExprScope = null;
      var SelfScope = null;
      function ConvertLeftExpr() {
        var Result = null;
        var OldAccess = 0;
        var Path = "";
        if (WithExprScope !== null) {
          Result = $Self.CreatePrimitiveDotExpr(WithExprScope.WithVarName,Expr)}
         else if (SelfScope !== null) {
          Path = $Self.GetLocalName(SelfScope.SelfArg,$mod.cvkAll,AContext);
          Result = $Self.CreatePrimitiveDotExpr(Path,Expr);
        } else if (Left === null) {
          $Self.RaiseNotSupported(Expr,AContext,20190205172904,"");
          Result = null;
        } else {
          OldAccess = AContext.Access;
          AContext.Access = 0;
          Result = $Self.ConvertExpression(Left,AContext);
          AContext.Access = OldAccess;
        };
        return Result;
      };
      function CreateRefObj(PosEl, PathExpr, GetExpr, SetExpr, SetterArgName, LeftResolved) {
        var Result = null;
        function CreateRgCheck(aType) {
          var Result = null;
          Result = $Self.CreateRangeCheckCall_TypeRange(aType,$Self.CreatePrimitiveDotExpr(SetterArgName,PosEl),AContext,PosEl);
          return Result;
        };
        var Obj = null;
        var ObjLit = null;
        var FuncSt = null;
        var RetSt = null;
        var TypeEl = null;
        var RgCheck = null;
        var List = null;
        RgCheck = null;
        if ($lt133.isPrototypeOf(SetExpr) && (SetterArgName !== "") && (15 in AContext.ScannerBoolSwitches)) {
          TypeEl = LeftResolved.LoTypeEl;
          if (TypeEl !== null) {
            if (LeftResolved.BaseType in $mod.btAllJSRangeCheckTypes) {
              RgCheck = CreateRgCheck(TypeEl)}
             else if (LeftResolved.BaseType === 2) {
              if (TypeEl.$class.ClassType() === $lt99) RgCheck = CreateRgCheck(TypeEl);
            } else if (LeftResolved.BaseType === 37) {
              if (LeftResolved.SubType in $mod.btAllJSRangeCheckTypes) {
                RgCheck = CreateRgCheck(TypeEl)}
               else if (LeftResolved.SubType === 2) RgCheck = CreateRgCheck(TypeEl);
            };
          };
        };
        Obj = $Self.CreateElement($lt132,PosEl);
        Result = Obj;
        if (PathExpr !== null) {
          ObjLit = Obj.FElements.AddElement();
          ObjLit.FName = $impl.TempRefGetPathName;
          ObjLit.FExpr = PathExpr;
        };
        ObjLit = Obj.FElements.AddElement();
        ObjLit.FName = $impl.TempRefObjGetterName;
        FuncSt = $Self.CreateFunctionSt(PosEl,true,false);
        ObjLit.FExpr = FuncSt;
        RetSt = $Self.CreateElement($lt160,PosEl);
        FuncSt.FFuncDef.FBody.FA = RetSt;
        RetSt.FExpr = GetExpr;
        ObjLit = Obj.FElements.AddElement();
        ObjLit.FName = $impl.TempRefObjSetterName;
        FuncSt = $Self.CreateFunctionSt(PosEl,true,false);
        ObjLit.FExpr = FuncSt;
        if (SetterArgName !== "") FuncSt.FFuncDef.FTypedParams.AddParam(SetterArgName);
        if (RgCheck !== null) {
          List = $Self.CreateElement($lt129,PosEl);
          List.FA = RgCheck;
          List.FB = SetExpr;
          SetExpr = List;
        };
        FuncSt.FFuncDef.FBody.FA = SetExpr;
        return Result;
      };
      function ConvertImplicitLeftIdentifier(PosEl, LeftResolved) {
        var Result = null;
        var GetExpr = null;
        var SetExpr = null;
        var RHS = null;
        var SetterArgName = "";
        var AssignSt = null;
        var Arg = null;
        var TypeEl = null;
        var aManaged = false;
        if ($lt89.isPrototypeOf(LeftResolved.IdentEl)) {
          Arg = LeftResolved.IdentEl;
          if (Arg.Access in rtl.createSet(2,3)) {
            Result = $Self.CreatePrimitiveDotExpr($Self.TransformArgName(Arg,AContext),PosEl);
            return Result;
          };
        };
        GetExpr = ConvertLeftExpr();
        if (1 in LeftResolved.Flags) {
          TypeEl = LeftResolved.LoTypeEl;
          aManaged = AContext.Resolver.IsManagedJSType(TypeEl);
          SetExpr = ConvertLeftExpr();
          SetterArgName = $impl.TempRefObjSetterArgName;
          $Self.FindAvailableLocalName({get: function () {
              return SetterArgName;
            }, set: function (v) {
              SetterArgName = v;
            }},SetExpr);
          RHS = $Self.CreatePrimitiveDotExpr(SetterArgName,PosEl);
          if (aManaged) {
            SetExpr = $Self.CreateAssignManagedVar(LeftResolved,{get: function () {
                return SetExpr;
              }, set: function (v) {
                SetExpr = v;
              }},{get: function () {
                return RHS;
              }, set: function (v) {
                RHS = v;
              }},AContext,PosEl);
          } else {
            AssignSt = $Self.CreateElement($lt133,PosEl);
            AssignSt.FLHS = SetExpr;
            AssignSt.FExpr = RHS;
            SetExpr = AssignSt;
          };
        } else {
          SetterArgName = "";
          SetExpr = $Self.CreateRaisePropReadOnly(PosEl);
        };
        Result = CreateRefObj(PosEl,null,GetExpr,SetExpr,SetterArgName,LeftResolved);
        return Result;
      };
      function CreatePropertyReference(PosEl, LeftResolved) {
        var Result = null;
        var Prop = null;
        var OldAccess = 0;
        var GetExpr = null;
        var SetExpr = null;
        var LeftJS = null;
        var PathExpr = null;
        var RHS = null;
        var DotExpr = null;
        var AssignSt = null;
        var SetterArgName = "";
        var aName = "";
        var TypeEl = null;
        var aManaged = false;
        Prop = LeftResolved.IdentEl;
        OldAccess = AContext.Access;
        AContext.Access = 0;
        LeftJS = $Self.ConvertExpression(Left,AContext);
        AContext.Access = OldAccess;
        TypeEl = LeftResolved.LoTypeEl;
        aManaged = AContext.Resolver.IsManagedJSType(TypeEl);
        PathExpr = null;
        SetterArgName = "";
        if (LeftJS === null) {
          $Self.DoError$2(20190211105946,3059,rtl.getResStr($lm6,"sNoMemberIsProvidedToAccessProperty"),[],PosEl)}
         else if (LeftJS.$class.ClassType() === $lt137) {
          SetExpr = $Self.CreateRaisePropReadOnly(PosEl);
          GetExpr = LeftJS;
        } else if (LeftJS.$class.ClassType() === $lt124) {
          DotExpr = LeftJS;
          PathExpr = DotExpr.FMExpr;
          DotExpr.FMExpr = null;
          aName = DotExpr.FName;
          DotExpr = rtl.freeLoc(DotExpr);
          GetExpr = $Self.CreateMemberExpression(["this",$impl.TempRefGetPathName,aName]);
          SetterArgName = $impl.TempRefObjSetterArgName;
          RHS = $Self.CreatePrimitiveDotExpr(SetterArgName,PosEl);
          if (4 in Prop.VarModifiers) {
            SetExpr = $Self.CreateDotExpression(PosEl,$Self.CreateReferencePathExpr(Prop.FParent,AContext,false,null),$Self.CreatePrimitiveDotExpr(aName,PosEl),false)}
           else SetExpr = $Self.CreateMemberExpression(["this",$impl.TempRefGetPathName,aName]);
          if (aManaged) {
            SetExpr = $Self.CreateAssignManagedVar(LeftResolved,{get: function () {
                return SetExpr;
              }, set: function (v) {
                SetExpr = v;
              }},{get: function () {
                return RHS;
              }, set: function (v) {
                RHS = v;
              }},AContext,PosEl);
          } else {
            AssignSt = $Self.CreateElement($lt133,PosEl);
            AssignSt.FLHS = SetExpr;
            SetExpr = AssignSt;
            AssignSt.FExpr = RHS;
          };
        } else if (LeftJS.$class.ClassType() === $lt144) {
          PathExpr = LeftJS;
          GetExpr = $Self.CreateMemberExpression(["this",$impl.TempRefGetPathName]);
          AssignSt = $Self.CreateElement($lt133,PosEl);
          AssignSt.FLHS = $Self.CreateMemberExpression(["this",$impl.TempRefGetPathName]);
          SetExpr = AssignSt;
          SetterArgName = $impl.TempRefObjSetterArgName;
          AssignSt.FExpr = $Self.CreatePrimitiveDotExpr(SetterArgName,PosEl);
        } else $Self.RaiseNotSupported(PosEl,AContext,20190210193605,$lp16(LeftJS));
        Result = CreateRefObj(PosEl,PathExpr,GetExpr,SetExpr,SetterArgName,LeftResolved);
        return Result;
      };
      function CreateReference(PosEl, LeftResolved) {
        var Result = null;
        var ProcScope = null;
        if (Left === null) {
          Result = ConvertImplicitLeftIdentifier(PosEl,LeftResolved)}
         else if ($lt74.isPrototypeOf(LeftResolved.IdentEl)) {
          Result = CreatePropertyReference(PosEl,LeftResolved)}
         else {
          ProcScope = rtl.as(Proc.FData,$lt16);
          if (ProcScope.SelfArg === null) {
            $Self.RaiseNotSupported(PosEl,AContext,20190209214906,$lp16(Proc));
          };
          Result = $Self.CreateProcCallArgRef(Left,$lt84.$clone(LeftResolved),ProcScope.SelfArg,AContext);
        };
        return Result;
      };
      var aResolver = null;
      var LoTypeEl = null;
      var Bin = null;
      var LeftResolved = $lt84.$new();
      var SelfJS = null;
      var PosEl = null;
      var NameExpr = null;
      var ProcPath = "";
      var Call = null;
      var IdentEl = null;
      var IsStatic = false;
      var IsConstructorNormalCall = false;
      var Ref = null;
      var ProcType = null;
      var ParamsExpr = null;
      var ArgElements = null;
      var ArrLit = null;
      var Prop = null;
      var C = null;
      Result = null;
      aResolver = AContext.Resolver;
      IsStatic = aResolver.MethodIsStatic(Proc);
      WithExprScope = null;
      SelfScope = null;
      PosEl = Expr;
      Ref = null;
      Prop = null;
      Left = null;
      SelfJS = null;
      Call = null;
      ArgElements = null;
      try {
        if (Implicit) {
          Left = Expr;
          PosEl = Expr;
          aResolver.ComputeElement(Left,LeftResolved,{},null);
        } else {
          NameExpr = Expr;
          if ($lt182.isPrototypeOf(NameExpr)) NameExpr = NameExpr.NameExpr;
          if ($lt85.isPrototypeOf(NameExpr)) {
            Bin = NameExpr;
            if (Bin.OpCode !== 27) this.RaiseNotSupported(NameExpr,AContext,20190201163152,"");
            Left = Bin.Left;
            aResolver.ComputeElement(Left,LeftResolved,{},null);
            PosEl = Bin.Right;
            if ($lt71.isPrototypeOf(PosEl.FData)) Ref = PosEl.FData;
          } else if (aResolver.IsNameExpr(NameExpr)) {
            PosEl = NameExpr;
            if (!$lt71.isPrototypeOf(NameExpr.FData)) this.RaiseNotSupported(NameExpr,AContext,20190201163210,"");
            Ref = NameExpr.FData;
            WithExprScope = rtl.as(Ref.WithExprScope,$lt19);
            if (WithExprScope !== null) {
              aResolver.ComputeElement(WithExprScope.Expr,LeftResolved,{},null);
            } else {
              if (IsStatic) {
                LeftResolved.$assign($lt84.$new())}
               else {
                SelfScope = aResolver.GetSelfScope(NameExpr);
                if (SelfScope === null) this.RaiseNotSupported(PosEl,AContext,20190205171529,"");
                if (SelfScope.SelfArg === null) this.RaiseNotSupported(PosEl,AContext,20190205171902,$lp16(SelfScope.FElement));
                aResolver.ComputeElement(SelfScope.SelfArg,LeftResolved,{},null);
              };
            };
          } else if ($lt86.isPrototypeOf(NameExpr)) {
            PosEl = NameExpr;
            if (!$lt71.isPrototypeOf(NameExpr.FData)) this.RaiseNotSupported(NameExpr,AContext,20190208105144,"");
            Ref = PosEl.FData;
            if (Ref.FDeclaration.$class.ClassType() !== $lt74) this.RaiseNotSupported(NameExpr,AContext,20190208105222,"");
            Left = NameExpr.Value;
            aResolver.ComputeElement(Left,LeftResolved,{},null);
          } else {
            this.RaiseNotSupported(NameExpr,AContext,20190201163210,"");
            LeftResolved.$assign($lt84.$new());
          };
        };
        LoTypeEl = LeftResolved.LoTypeEl;
        IdentEl = LeftResolved.IdentEl;
        IsConstructorNormalCall = false;
        if (Ref !== null) {
          IsConstructorNormalCall = (Proc.$class.ClassType() === $lt109) && !(3 in Ref.Flags);
          if (Ref.FDeclaration.$class.ClassType() === $lt74) Prop = Ref.FDeclaration;
        };
        if (IsStatic) {
          if ((Proc.$class.ClassType() !== $lt78) && (Proc.$class.ClassType() !== $lt108)) this.RaiseNotSupported(PosEl,AContext,20190206151034,$lp16(Proc));
        } else if ((Proc.$class.ClassType() === $lt78) || (Proc.$class.ClassType() === $lt108)) {
          if (LoTypeEl === null) this.RaiseNotSupported(PosEl,AContext,20190201163453,$lp37(LeftResolved));
          if ($lt72.isPrototypeOf(IdentEl)) {
            if (LeftResolved.IdentEl.IsExternal) this.RaiseNotSupported(PosEl,AContext,20190201165636,"");
            SelfJS = this.CreateReferencePathExpr(LeftResolved.IdentEl,AContext,false,null);
          } else if ((LoTypeEl.$class.ClassType() === $lt72) && (0 in LeftResolved.Flags)) {
            if (LeftResolved.LoTypeEl.IsExternal) this.RaiseNotSupported(PosEl,AContext,20190201165656,"");
            SelfJS = ConvertLeftExpr();
            SelfJS = this.CreateDotExpression(PosEl,SelfJS,this.CreatePrimitiveDotExpr(this.GetBIName(138),PosEl),false);
          } else if ((LoTypeEl.$class.ClassType() === $lt112) && (0 in LeftResolved.Flags)) {
            SelfJS = ConvertLeftExpr();
          } else this.RaiseNotSupported(PosEl,AContext,20190201162601,$lp37(LeftResolved));
        } else if ((Proc.$class.ClassType() === $lt94) || (Proc.$class.ClassType() === $lt67) || IsConstructorNormalCall) {
          if ($lt76.isPrototypeOf(IdentEl)) this.RaiseNotSupported(PosEl,AContext,20190201170843,"");
          if ($lt72.isPrototypeOf(LoTypeEl) && (0 in LeftResolved.Flags) && (LoTypeEl.ObjKind === 1)) {
            SelfJS = ConvertLeftExpr();
          } else if ($lt81.isPrototypeOf(LoTypeEl) && (0 in LeftResolved.Flags)) {
            SelfJS = ConvertLeftExpr();
          } else if (IdentEl !== null) {
            C = IdentEl.$class.ClassType();
            if ((C === $lt89) || (C === $lt80) || (C === $lt75) || (C === $lt74) || (C === $lt90) || (C === $lt139) || (C === $lt72)) {
              SelfJS = CreateReference(PosEl,LeftResolved);
            } else this.RaiseNotSupported(PosEl,AContext,20190209224904,$lp37(LeftResolved));
          } else if ((LeftResolved.ExprEl !== null) && (0 in LeftResolved.Flags)) {
            SelfJS = CreateReference(PosEl,LeftResolved);
          } else {
            this.RaiseNotSupported(PosEl,AContext,20190131211753,"");
          };
        } else if (Proc.$class.ClassType() === $lt109) {
          if (Ref === null) this.RaiseNotSupported(PosEl,AContext,20190206151234,"");
          if (!(3 in Ref.Flags)) this.RaiseNotSupported(PosEl,AContext,20190206151901,"");
          if ((LoTypeEl !== null) && ((LoTypeEl.$class.ClassType() === $lt72) || (LoTypeEl.$class.ClassType() === $lt112))) {
            if ((LoTypeEl.$class.ClassType() === $lt72) && (LoTypeEl.ObjKind !== 1)) this.RaiseNotSupported(PosEl,AContext,20190302154215,$lp19(LoTypeEl));
            Call = this.CreateCallExpression(PosEl);
            SelfJS = ConvertLeftExpr();
            Call.FExpr = this.CreateDotExpression(PosEl,SelfJS,this.CreatePrimitiveDotExpr(this.GetBIName(25),PosEl),false);
            SelfJS = null;
            Call.AddArg(this.CreateReferencePathExpr(Proc,AContext,false,null));
          } else {
            Call = this.CreateCallExpression(PosEl);
            ProcPath = this.CreateReferencePath(Proc.FParent,AContext,2,false,null) + "." + this.GetBIName(34);
            Call.FExpr = this.CreatePrimitiveDotExpr(ProcPath,PosEl);
            ProcPath = this.TransformElToJSName(Proc,AContext);
            Call.AddArg(this.CreateLiteralString(PosEl,ProcPath));
          };
          ArrLit = this.CreateElement($lt147,PosEl);
          Call.AddArg(ArrLit);
          ArgElements = ArrLit.FElements;
        } else this.RaiseNotSupported(PosEl,AContext,20190201162609,$lp16(Proc));
        if (Call === null) {
          if ((SelfJS === null) && !IsStatic) this.RaiseNotSupported(PosEl,AContext,20190203171010,$lp37(LeftResolved));
          Call = this.CreateCallExpression(Expr);
          if ((10 in this.FOptions) && (Proc.FData.SpecializedFromItem !== null)) {
            ProcPath = this.CreateGlobalElPath(Proc,AContext)}
           else ProcPath = this.CreateReferencePath(Proc,AContext,2,false,null);
          if (!IsStatic) ProcPath = ProcPath + ".call";
          Call.FExpr = this.CreatePrimitiveDotExpr(ProcPath,Expr);
          if (SelfJS !== null) {
            Call.AddArg(SelfJS);
            SelfJS = null;
          };
          ArgElements = Call.FArgs.FElements;
        };
        if (Prop !== null) {
          if (aResolver.GetPasPropertyArgs(Prop).FCount > 0) {
            Result = Call;
            Call = null;
            return Result;
          };
          var $tmp = AContext.Access;
          if ($tmp === 1) {
            Result = this.AppendPropertyAssignArgs(Call,Prop,AContext,PosEl);
            Call = null;
            return Result;
          } else if ($tmp === 0) {
            Result = this.AppendPropertyReadArgs(Call,Prop,AContext,PosEl);
            Call = null;
            return Result;
          } else {
            this.RaiseNotSupported(PosEl,AContext,20190207122708,"");
          };
        };
        ProcType = Proc.ProcType;
        if ($lt86.isPrototypeOf(Expr.FParent) && (Expr.FParent.Value === Expr)) {
          ParamsExpr = Expr.FParent}
         else ParamsExpr = null;
        this.CreateProcedureCallArgs(ArgElements,ParamsExpr,ProcType,AContext);
        if ($lt93.isPrototypeOf(ProcType) && aResolver.IsManagedJSType(ProcType.ResultEl.ResultType)) Call = this.CreateIntfRef(Call,AContext,PosEl);
        Result = Call;
        Call = null;
      } finally {
        Call = rtl.freeLoc(Call);
        SelfJS = rtl.freeLoc(SelfJS);
      };
      return Result;
    };
    var FunName = "fn";
    var ArgsName = "args";
    var ValueName = "p";
    this.AddHelperConstructor = function (El, Src, AContext) {
      var aResolver = null;
      var HelperForType = null;
      var AssignSt = null;
      var Func = null;
      var FuncSt = null;
      var New_Src = null;
      var Call = null;
      var DotExpr = null;
      var BracketExpr = null;
      var New_FuncContext = null;
      var SelfJS = null;
      var ReturnSt = null;
      var RetSt = null;
      var Obj = null;
      var ObjLit = null;
      var SetterArgName = "\x00";
      if (El.HelperForType === null) return;
      aResolver = AContext.Resolver;
      HelperForType = aResolver.ResolveAliasType(El.HelperForType,true);
      if (HelperForType.$class.ClassType() === $lt72) return;
      New_Src = this.CreateElement($lt123,El);
      New_FuncContext = $lt34.$create("Create$1",[El,New_Src,AContext]);
      try {
        New_FuncContext.ThisVar.Element = El;
        New_FuncContext.ThisVar.Kind = 2;
        New_FuncContext.IsGlobal = true;
        ReturnSt = this.CreateElement($lt160,El);
        this.AddToSourceElements(New_Src,ReturnSt);
        Call = this.CreateCallExpression(El);
        ReturnSt.FExpr = Call;
        DotExpr = this.CreateElement($lt124,El);
        Call.FExpr = DotExpr;
        BracketExpr = this.CreateElement($lt142,El);
        DotExpr.FMExpr = BracketExpr;
        DotExpr.FName = "apply";
        BracketExpr.FMExpr = this.CreatePrimitiveDotExpr("this",El);
        BracketExpr.FName = this.CreatePrimitiveDotExpr(FunName,El);
        SelfJS = this.CreateValInit(HelperForType,null,El,New_FuncContext);
        if (HelperForType.$class.ClassType() === $lt81) {}
        else {
          Obj = this.CreateElement($lt132,El);
          ObjLit = Obj.FElements.AddElement();
          ObjLit.FName = ValueName;
          ObjLit.FExpr = SelfJS;
          SelfJS = Obj;
          ObjLit = Obj.FElements.AddElement();
          ObjLit.FName = $impl.TempRefObjGetterName;
          FuncSt = this.CreateFunctionSt(El,true,false);
          ObjLit.FExpr = FuncSt;
          RetSt = this.CreateElement($lt160,El);
          FuncSt.FFuncDef.FBody.FA = RetSt;
          RetSt.FExpr = this.CreateMemberExpression(["this",ValueName]);
          ObjLit = Obj.FElements.AddElement();
          ObjLit.FName = $impl.TempRefObjSetterName;
          FuncSt = this.CreateFunctionSt(El,true,false);
          ObjLit.FExpr = FuncSt;
          SetterArgName = $impl.TempRefObjSetterArgName;
          FuncSt.FFuncDef.FTypedParams.AddParam(SetterArgName);
          AssignSt = this.CreateElement($lt133,El);
          FuncSt.FFuncDef.FBody.FA = AssignSt;
          AssignSt.FLHS = this.CreateMemberExpression(["this",ValueName]);
          AssignSt.FExpr = this.CreatePrimitiveDotExpr(SetterArgName,El);
        };
        Call.AddArg(SelfJS);
        Call.AddArg(this.CreatePrimitiveDotExpr(ArgsName,El));
        AssignSt = this.CreateElement($lt133,El);
        this.AddToSourceElements(Src,AssignSt);
        AssignSt.FLHS = this.CreatePrimitiveDotExpr("this." + this.GetBIName(34),El);
        Func = this.CreateFunctionSt(El,true,false);
        AssignSt.FExpr = Func;
        Func.FFuncDef.FTypedParams.AddParam(FunName);
        Func.FFuncDef.FTypedParams.AddParam(ArgsName);
        Func.FFuncDef.FBody.FA = New_Src;
        New_Src = null;
      } finally {
        New_Src = rtl.freeLoc(New_Src);
        New_FuncContext = rtl.freeLoc(New_FuncContext);
      };
    };
    this.ConvertImplBlockElements = function (El, AContext, NilIfEmpty) {
      var Result = null;
      var First = null;
      var Last = null;
      var I = 0;
      var PasImpl = null;
      var JSImpl = null;
      if (!((El.Elements != null) && (El.Elements.FCount > 0))) {
        if (NilIfEmpty) {
          Result = null}
         else Result = this.CreateElement($lt162,El);
      } else {
        Result = null;
        try {
          First = null;
          Last = null;
          for (var $l = 0, $end = El.Elements.FCount - 1; $l <= $end; $l++) {
            I = $l;
            PasImpl = rtl.getObject(El.Elements.Get(I));
            JSImpl = this.ConvertElement(PasImpl,AContext);
            if (JSImpl === null) continue;
            this.AddToStatementList({get: function () {
                return First;
              }, set: function (v) {
                First = v;
              }},{get: function () {
                return Last;
              }, set: function (v) {
                Last = v;
              }},JSImpl,PasImpl);
          };
          Result = First;
        } finally {
          if (Result === null) First = rtl.freeLoc(First);
        };
      };
      return Result;
    };
    this.ConvertBeginEndStatement = function (El, AContext, NilIfEmpty) {
      var Result = null;
      Result = this.ConvertImplBlockElements(El,AContext,NilIfEmpty);
      return Result;
    };
    this.ConvertStatement = function (El, AContext) {
      var Result = null;
      Result = null;
      if ($lt188.isPrototypeOf(El)) {
        Result = this.ConvertRaiseStatement(El,AContext)}
       else if ($lt189.isPrototypeOf(El)) {
        Result = this.ConvertAssignStatement(El,AContext)}
       else if ($lt190.isPrototypeOf(El)) {
        Result = this.ConvertWhileStatement(El,AContext)}
       else if ($lt191.isPrototypeOf(El)) {
        Result = this.ConvertSimpleStatement(El,AContext)}
       else if ($lt192.isPrototypeOf(El)) {
        Result = this.ConvertWithStatement(El,AContext)}
       else if ($lt104.isPrototypeOf(El)) {
        Result = this.ConvertExceptOn(El,AContext)}
       else if ($lt193.isPrototypeOf(El)) {
        Result = this.ConvertForStatement(El,AContext)}
       else if ($lt194.isPrototypeOf(El)) {
        Result = this.ConvertAsmStatement(El,AContext)}
       else this.RaiseNotSupported(El,AContext,20161024192759,"");
      return Result;
    };
    this.ConvertAssignStatement = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var lRightIsTemp = false;
      var lRightIsTempValid = false;
      var lLeftIsConstSetter = false;
      var lLeftIsConstSetterValid = false;
      function NotSupported(AssignContext, id) {
        $Self.RaiseNotSupported(El,AContext,id,$lp37(AssignContext.LeftResolved) + $lm1.AssignKindNames[El.Kind] + $lp37(AssignContext.RightResolved));
      };
      function RightIsTemporaryVar() {
        var Result = false;
        if (!lRightIsTempValid) {
          lRightIsTempValid = true;
          lRightIsTemp = $Self.IsExprTemporaryVar(El.Right);
        };
        Result = lRightIsTemp;
        return Result;
      };
      function LeftIsConstSetter() {
        var Result = false;
        if (!lLeftIsConstSetterValid) {
          lLeftIsConstSetterValid = true;
          lLeftIsConstSetter = $Self.IsExprPropertySetterConst(El.Left,AContext);
        };
        Result = lLeftIsConstSetter;
        return Result;
      };
      function CreateRangeCheck(AssignSt, MinVal, MaxVal, RTLFunc) {
        var Result = null;
        var Call = null;
        Call = $Self.CreateCallExpression(El);
        Call.FExpr = $Self.CreatePrimitiveDotExpr($Self.GetBIName(144) + "." + $Self.GetBIName(RTLFunc),El);
        if (AssignSt.$class.ClassType() === $lt133) {
          Result = AssignSt;
          Call.AddArg(AssignSt.FExpr);
          AssignSt.FExpr = Call;
        } else {
          Call.AddArg(AssignSt);
          Result = Call;
        };
        Call.AddArg($Self.CreateLiteralNumber(El.Right,MinVal));
        Call.AddArg($Self.CreateLiteralNumber(El.Right,MaxVal));
        return Result;
      };
      function ApplyRangeCheck_Type(AssignSt, aType) {
        var Result = null;
        var Value = null;
        Result = AssignSt;
        Value = AContext.Resolver.EvalTypeRange(aType,rtl.createSet(0));
        if (Value === null) $Self.RaiseNotSupported(El,AContext,20180424110758,"range checking " + $lp16(aType));
        try {
          var $tmp = Value.Kind;
          if ($tmp === 10) {
            var $tmp1 = Value.ElKind;
            if (($tmp1 === 1) || ($tmp1 === 2)) {
              Result = CreateRangeCheck(AssignSt,Value.RangeStart,Value.RangeEnd,72)}
             else if ($tmp1 === 3) {
              Result = CreateRangeCheck(AssignSt,Value.RangeStart,Value.RangeEnd,71)}
             else if ($tmp1 === 4) {}
            else {
              $Self.RaiseNotSupported(El,AContext,20190220003746,"range checking " + Value.AsDebugString());
            };
          } else {
            $Self.RaiseNotSupported(El,AContext,20180424111037,"range checking " + Value.AsDebugString());
          };
        } finally {
          $lp17({get: function () {
              return Value;
            }, set: function (v) {
              Value = v;
            }});
        };
        return Result;
      };
      var LHS = null;
      var T = null;
      var AssignContext = null;
      var Flags = {};
      var LeftIsProcType = false;
      var Call = null;
      var MinVal = 0;
      var MaxVal = 0;
      var LeftTypeEl = null;
      var RightTypeEl = null;
      var aResolver = null;
      var ObjLit = null;
      var GUID = $lt103.$new();
      Result = null;
      LHS = null;
      aResolver = AContext.Resolver;
      lLeftIsConstSetterValid = false;
      lRightIsTempValid = false;
      AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
      try {
        if (aResolver !== null) {
          aResolver.ComputeElement(El.Left,AssignContext.LeftResolved,rtl.createSet(1),null);
          Flags = {};
          LeftIsProcType = aResolver.IsProcedureType(AssignContext.LeftResolved,false);
          if (LeftIsProcType) {
            if (3 in AContext.CurrentModeSwitches()) {
              Flags = rtl.includeSet(Flags,1)}
             else Flags = rtl.includeSet(Flags,2);
          };
          aResolver.ComputeElement(El.Right,AssignContext.RightResolved,rtl.refSet(Flags),null);
          if (LeftIsProcType && (3 in AContext.CurrentModeSwitches()) && (AssignContext.RightResolved.BaseType === 31) && $lt67.isPrototypeOf(AssignContext.RightResolved.IdentEl)) {
            LeftTypeEl = AssignContext.LeftResolved.LoTypeEl;
            AssignContext.RightSide = this.CreateCallback(El.Right,$lt84.$clone(AssignContext.RightResolved),LeftTypeEl.CallingConvention === 6,AContext);
          } else if (AssignContext.RightResolved.BaseType === 30) {
            if (aResolver.IsArrayType(AssignContext.LeftResolved)) {
              if (aResolver.IsManagedJSType(AssignContext.LeftResolved.LoTypeEl)) {
                AssignContext.RightSide = this.CreateLiteralNull(El.Right)}
               else AssignContext.RightSide = this.CreateElement($lt147,El.Right);
            };
          } else if (AssignContext.LeftResolved.BaseType === 2) {
            LeftTypeEl = AssignContext.LeftResolved.LoTypeEl;
            if ((LeftTypeEl.$class.ClassType() === $lt81) && (AssignContext.RightResolved.BaseType in $lm3.btAllStrings)) {
              if (aResolver.GetAssignGUIDString(LeftTypeEl,El.Right,GUID)) {
                ObjLit = this.CreateGUIDObjLit(LeftTypeEl,GUID,El,AContext);
                AssignContext.RightSide = ObjLit;
              } else this.RaiseNotSupported(El,AContext,20180415101516,"");
            };
            if (LeftTypeEl.$class.ClassType() === $lt107) {
              if (El.Kind !== 0) aResolver.RaiseMsg(20201028212754,3003,rtl.getResStr($lm6,"sIllegalQualifier"),$lp6(18,$lm1.AssignKindNames[El.Kind]),El);
              if (aResolver.IsReadEqWrite(AssignContext.LeftResolved)) {
                AssignContext.RightSide = this.ConvertDirectAssignArrayStatement(El,AssignContext);
              };
            };
          };
        };
        if (AssignContext.RightSide === null) AssignContext.RightSide = this.ConvertExpression(El.Right,AContext);
        if ((AssignContext.RightResolved.BaseType in rtl.createSet(34,36)) && (AssignContext.RightResolved.IdentEl !== null)) {
          AssignContext.RightSide = this.CreateReferencedSet(El.Right,AssignContext.RightSide);
        } else if (AssignContext.LeftResolved.BaseType === 14) {
          if (AssignContext.RightResolved.BaseType === 14) {}
          else if (AssignContext.RightResolved.BaseType in $mod.btAllJSFloats) {
            AssignContext.RightSide = this.CreateMulNumber(El,AssignContext.RightSide,10000);
            AssignContext.RightSide = this.CreateTruncFloor(El,AssignContext.RightSide,true);
          } else if (AssignContext.RightResolved.BaseType in $mod.btAllJSInteger) {
            AssignContext.RightSide = this.CreateMulNumber(El,AssignContext.RightSide,10000);
          } else this.RaiseNotSupported(El,AContext,20181016094542,$lp37(AssignContext.RightResolved));
        } else if (AssignContext.RightResolved.BaseType === 14) {
          AssignContext.RightSide = this.CreateDivideNumber(El,AssignContext.RightSide,10000);
        } else if ((AssignContext.LeftResolved.BaseType !== AssignContext.RightResolved.BaseType) && (AssignContext.LeftResolved.BaseType in $mod.btAllJSInteger) && (AssignContext.RightResolved.BaseType in $mod.btAllJSInteger)) {
          this.PrepareAssignDifferentIntegers(El,AssignContext);
        } else if (AssignContext.RightResolved.BaseType in $lm3.btAllStringAndChars) {
          if (AssignContext.LeftResolved.BaseType === 2) {
            if ($lt107.isPrototypeOf(AssignContext.LeftResolved.LoTypeEl)) {
              AssignContext.RightSide = this.CreateDotSplit(El.Right,AssignContext.RightSide);
            };
          };
        } else if (AssignContext.RightResolved.BaseType === 2) {
          RightTypeEl = AssignContext.RightResolved.LoTypeEl;
          if (RightTypeEl.$class.ClassType() === $lt107) {
            if (rtl.length(RightTypeEl.Ranges) > 0) {
              if (!RightIsTemporaryVar() && !LeftIsConstSetter()) {
                AssignContext.RightSide = this.CreateCloneStaticArray(El.Right,RightTypeEl,AssignContext.RightSide,AContext);
              };
            } else if (RightTypeEl.FParent.$class.ClassType() === $lt89) {}
            else {
              if ((AssignContext.LeftResolved.BaseType === 2) && $lt107.isPrototypeOf(AssignContext.LeftResolved.LoTypeEl)) {
                if (El.Kind !== 0) aResolver.RaiseMsg(20201028213335,3003,rtl.getResStr($lm6,"sIllegalQualifier"),$lp6(18,$lm1.AssignKindNames[El.Kind]),El);
                if (!RightIsTemporaryVar() && !LeftIsConstSetter()) {
                  if (aResolver.IsManagedJSType(AssignContext.LeftResolved.LoTypeEl)) {}
                  else {
                    AssignContext.RightSide = this.CreateArrayRef(El.Right,AssignContext.RightSide);
                  };
                };
              };
            };
          } else if (RightTypeEl.$class.ClassType() === $lt72) {
            if (AssignContext.LeftResolved.BaseType in $lm3.btAllStrings) {
              if (RightTypeEl.ObjKind === 2) {
                AssignContext.RightSide = this.CreateDotNameExpr(El,AssignContext.RightSide,this.GetBIName(120));
              };
            } else if (AssignContext.LeftResolved.BaseType === 2) {
              LeftTypeEl = AssignContext.LeftResolved.LoTypeEl;
              if (LeftTypeEl.$class.ClassType() === $lt81) {
                if ((RightTypeEl.ObjKind === 2) && $lp18(LeftTypeEl.FName,"TGUID")) {
                  Call = this.CreateCallExpression(El);
                  Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(45),El);
                  Call.AddArg(AssignContext.RightSide);
                  AssignContext.RightSide = Call;
                } else this.RaiseNotSupported(El,AContext,20180413194856,"");
              } else if (LeftTypeEl.$class.ClassType() === $lt72) {
                var $tmp = LeftTypeEl.ObjKind;
                if ($tmp === 1) {
                  var $tmp1 = RightTypeEl.ObjKind;
                  if ($tmp1 === 1) {}
                  else {
                    NotSupported(AssignContext,20180327202735);
                  };
                } else if ($tmp === 2) {
                  var $tmp2 = RightTypeEl.ObjKind;
                  if ($tmp2 === 1) {
                    if (RightTypeEl.IsExternal) this.RaiseNotSupported(El.Right,AContext,20180327210004,"external class instance");
                    if (AssignContext.LeftResolved.LoTypeEl === null) this.RaiseNotSupported(El.Right,AContext,20180327204021,"");
                    Call = this.CreateCallExpression(El.Right);
                    var $tmp3 = LeftTypeEl.InterfaceType;
                    if ($tmp3 === 0) {
                      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(55)]);
                      Call.AddArg(AssignContext.RightSide);
                      AssignContext.RightSide = Call;
                      Call.AddArg(this.CreateReferencePathExpr(AssignContext.LeftResolved.LoTypeEl,AContext,false,null));
                      Call = this.CreateIntfRef(Call,AContext,El);
                      AssignContext.RightSide = Call;
                    } else if ($tmp3 === 1) {
                      Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(46)]);
                      Call.AddArg(AssignContext.RightSide);
                      AssignContext.RightSide = Call;
                      Call.AddArg(this.CreateReferencePathExpr(AssignContext.LeftResolved.LoTypeEl,AContext,false,null));
                    } else {
                      this.RaiseNotSupported(El,AContext,20180401225931,$lm1.InterfaceTypeNames[RightTypeEl.InterfaceType]);
                    };
                  } else if ($tmp2 === 2) {}
                  else {
                    NotSupported(AssignContext,20180327203326);
                  };
                } else {
                  NotSupported(AssignContext,20180327203334);
                };
              };
            };
          } else if (RightTypeEl.$class.ClassType() === $lt81) {
            if (AssignContext.LeftResolved.BaseType in $lm3.btAllStrings) {
              if (aResolver.IsTGUID(RightTypeEl)) {
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(47),El);
                Call.AddArg(AssignContext.RightSide);
                AssignContext.RightSide = Call;
              };
            };
          } else if ($lt118.isPrototypeOf(RightTypeEl)) {
            LeftTypeEl = AssignContext.LeftResolved.LoTypeEl;
            if ($lt118.isPrototypeOf(LeftTypeEl) && (AssignContext.LeftResolved.LoTypeEl.CallingConvention === 6) && $lt136.isPrototypeOf(El.Right) && (El.Right.OpCode === 24)) {
              AssignContext.RightSide = this.CreateSafeCallback(El.Right,AssignContext.RightSide,AContext);
            };
          };
        };
        LHS = this.ConvertExpression(El.Left,AssignContext);
        if (AssignContext.Call !== null) {
          if (AssignContext.RightSide !== null) this.RaiseInconsistency(20170207215544,El.Left);
          Result = LHS;
        } else {
          if (AssignContext.RightSide === null) this.RaiseInconsistency(20180622211919,El);
          LeftTypeEl = AssignContext.LeftResolved.LoTypeEl;
          if (AssignContext.LeftResolved.BaseType === 2) {
            if (aResolver.IsManagedJSType(LeftTypeEl)) {
              Result = this.CreateAssignManagedVar(AssignContext.LeftResolved,{get: function () {
                  return LHS;
                }, set: function (v) {
                  LHS = v;
                }},{p: AssignContext, get: function () {
                  return this.p.RightSide;
                }, set: function (v) {
                  this.p.RightSide = v;
                }},AssignContext,El);
              if (Result !== null) return Result;
            };
          };
          var $tmp4 = El.Kind;
          if ($tmp4 === 0) {
            T = this.CreateElement($lt133,El)}
           else if ($tmp4 === 1) {
            T = this.CreateElement($lt195,El)}
           else if ($tmp4 === 2) {
            T = this.CreateElement($lt196,El)}
           else if ($tmp4 === 3) {
            T = this.CreateElement($lt197,El)}
           else if ($tmp4 === 4) {
            T = this.CreateElement($lt198,El)}
           else {
            this.RaiseNotSupported(El,AContext,20161107221807,"");
          };
          T.FExpr = AssignContext.RightSide;
          AssignContext.RightSide = null;
          T.FLHS = LHS;
          Result = T;
          LHS = null;
          if ((15 in AContext.ScannerBoolSwitches) && !$lt137.isPrototypeOf(T.FExpr)) {
            if (AssignContext.LeftResolved.BaseType in $mod.btAllJSInteger) {
              if ($lt100.isPrototypeOf(LeftTypeEl)) {
                if (!aResolver.GetIntegerRange(AssignContext.LeftResolved.BaseType,{get: function () {
                    return MinVal;
                  }, set: function (v) {
                    MinVal = v;
                  }},{get: function () {
                    return MaxVal;
                  }, set: function (v) {
                    MaxVal = v;
                  }})) this.RaiseNotSupported(El.Left,AContext,20180119154120,"");
                Result = CreateRangeCheck(Result,MinVal,MaxVal,72);
              } else if (LeftTypeEl.$class.ClassType() === $lt101) Result = ApplyRangeCheck_Type(Result,LeftTypeEl);
            } else if (AssignContext.LeftResolved.BaseType in $mod.btAllJSChars) {
              Result = ApplyRangeCheck_Type(Result,LeftTypeEl)}
             else if (AssignContext.LeftResolved.BaseType === 2) {
              if (LeftTypeEl.$class.ClassType() === $lt99) Result = ApplyRangeCheck_Type(Result,LeftTypeEl);
            } else if (AssignContext.LeftResolved.BaseType === 37) {
              if (AssignContext.LeftResolved.SubType in $mod.btAllJSRangeCheckTypes) {
                Result = ApplyRangeCheck_Type(Result,LeftTypeEl)}
               else if (AssignContext.LeftResolved.SubType === 2) Result = ApplyRangeCheck_Type(Result,LeftTypeEl);
            };
          };
        };
      } finally {
        if (Result === null) LHS = rtl.freeLoc(LHS);
        rtl.free(AssignContext,"RightSide");
        AssignContext = rtl.freeLoc(AssignContext);
      };
      return Result;
    };
    this.ConvertDirectAssignArrayStatement = function (El, AssignContext) {
      var Result = null;
      var RightExpr = null;
      var FuncExpr = null;
      var Ref = null;
      var Decl = null;
      var BuiltInProc = null;
      var Params = null;
      Result = null;
      RightExpr = El.Right;
      if (RightExpr.Kind === 10) {
        Params = RightExpr;
        FuncExpr = Params.Value;
        if ($lt71.isPrototypeOf(FuncExpr.FData)) {
          Ref = FuncExpr.FData;
          Decl = Ref.FDeclaration;
          if ($lt199.isPrototypeOf(Decl.FData)) {
            BuiltInProc = Decl.FData;
            var $tmp = BuiltInProc.BuiltIn;
            if ($tmp === 23) Result = this.ConvertDirectAssignArrayConcat(El,Params,AssignContext);
          };
        };
      } else if ((RightExpr.Kind === 9) && (RightExpr.OpCode === 1)) Result = this.ConvertDirectAssignArrayAdd(El,RightExpr,AssignContext);
      return Result;
    };
    this.ConvertDirectAssignArrayConcat = function (El, Params, AssignContext) {
      var Result = null;
      var FirstParam = null;
      var LeftExpr = null;
      var SecondParam = null;
      var LeftRef = null;
      var ParamRef = null;
      var SubParams = null;
      var ParentContext = null;
      var Call = null;
      var i = 0;
      var JS = null;
      Result = null;
      LeftExpr = El.Left;
      if (!$lt71.isPrototypeOf(LeftExpr.FData)) return Result;
      LeftRef = LeftExpr.FData;
      FirstParam = Params.Params[0];
      if ($lt71.isPrototypeOf(FirstParam.FData)) {
        ParamRef = FirstParam.FData;
        if (LeftRef.FDeclaration === ParamRef.FDeclaration) {
          ParentContext = AssignContext.Parent;
          if (rtl.length(Params.Params) === 1) {
            Result = this.ConvertExpression(FirstParam,ParentContext);
            return Result;
          };
          if (rtl.length(Params.Params) === 2) {
            SecondParam = Params.Params[1];
            if (SecondParam.Kind === 4) {
              SubParams = SecondParam;
              if (rtl.length(SubParams.Params) === 0) {
                Result = this.ConvertExpression(FirstParam,ParentContext);
                return Result;
              };
              try {
                Call = this.CreateArrayConcat$1(rtl.as(AssignContext.LeftResolved.LoTypeEl,$lt107),El,ParentContext,true);
                Call.AddArg(this.ConvertExpression(FirstParam,ParentContext));
                for (var $l = 0, $end = rtl.length(SubParams.Params) - 1; $l <= $end; $l++) {
                  i = $l;
                  JS = this.ConvertExpression(SubParams.Params[i],ParentContext);
                  Call.AddArg(JS);
                };
                if (AssignContext.Resolver.IsManagedJSType(AssignContext.LeftResolved.LoTypeEl)) Result = this.CreateIntfRef(Result,AssignContext,El);
                Result = Call;
              } finally {
                if (Result === null) Call = rtl.freeLoc(Call);
              };
            };
          };
        };
      };
      return Result;
    };
    this.ConvertDirectAssignArrayAdd = function (El, Bin, AssignContext) {
      var Result = null;
      var BinLeft = null;
      var BinRight = null;
      var Ref = null;
      var Decl = null;
      var ParentContext = null;
      var SubParams = null;
      var Call = null;
      var i = 0;
      var JS = null;
      Result = null;
      BinLeft = Bin.Left;
      if (!$lt71.isPrototypeOf(BinLeft.FData)) return Result;
      Ref = BinLeft.FData;
      Decl = Ref.FDeclaration;
      if (!$lt71.isPrototypeOf(El.Left.FData)) return Result;
      if (Decl !== El.Left.FData.FDeclaration) return Result;
      BinRight = Bin.Right;
      if (BinRight.Kind === 4) {
        SubParams = BinRight;
        ParentContext = AssignContext.Parent;
        if (rtl.length(SubParams.Params) === 0) {
          Result = this.ConvertExpression(BinLeft,ParentContext);
          return Result;
        };
        try {
          Call = this.CreateArrayConcat$1(rtl.as(AssignContext.LeftResolved.LoTypeEl,$lt107),El,ParentContext,true);
          Call.AddArg(this.ConvertExpression(BinLeft,ParentContext));
          for (var $l = 0, $end = rtl.length(SubParams.Params) - 1; $l <= $end; $l++) {
            i = $l;
            JS = this.ConvertExpression(SubParams.Params[i],ParentContext);
            Call.AddArg(JS);
          };
          Result = Call;
          if (AssignContext.Resolver.IsManagedJSType(AssignContext.LeftResolved.LoTypeEl)) Result = this.CreateIntfRef(Result,AssignContext,El);
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
      };
      return Result;
    };
    this.ConvertRaiseStatement = function (El, AContext) {
      var Result = null;
      var E = null;
      var T = null;
      if (El.ExceptObject !== null) {
        E = this.ConvertExpression(El.ExceptObject,AContext)}
       else E = this.CreatePrimitiveDotExpr(this.GetBIName(118),El);
      T = this.CreateElement($lt200,El);
      T.FA = E;
      Result = T;
      return Result;
    };
    this.ConvertIfStatement = function (El, AContext) {
      var Result = null;
      var C = null;
      var BThen = null;
      var BElse = null;
      var T = null;
      Result = null;
      if (AContext === null) ;
      C = null;
      BThen = null;
      BElse = null;
      try {
        C = this.ConvertExpression(El.ConditionExpr,AContext);
        if (El.IfBranch != null) BThen = this.ConvertElement(El.IfBranch,AContext);
        if (El.ElseBranch != null) BElse = this.ConvertElement(El.ElseBranch,AContext);
        T = this.CreateElement($lt151,El);
        T.FCond = C;
        T.FBTrue = BThen;
        T.FBFalse = BElse;
        Result = T;
      } finally {
        if (Result === null) {
          $lp({get: function () {
              return C;
            }, set: function (v) {
              C = v;
            }});
          $lp({get: function () {
              return BThen;
            }, set: function (v) {
              BThen = v;
            }});
          $lp({get: function () {
              return BElse;
            }, set: function (v) {
              BElse = v;
            }});
        };
      };
      return Result;
    };
    this.ConvertWhileStatement = function (El, AContext) {
      var Result = null;
      var C = null;
      var B = null;
      var W = null;
      var ok = false;
      Result = null;
      C = null;
      B = null;
      ok = false;
      try {
        C = this.ConvertExpression(El.ConditionExpr,AContext);
        if (El.Body != null) {
          B = this.ConvertElement(El.Body,AContext)}
         else B = this.CreateElement($lt162,El);
        ok = true;
      } finally {
        if (!ok) {
          $lp({get: function () {
              return B;
            }, set: function (v) {
              B = v;
            }});
          $lp({get: function () {
              return C;
            }, set: function (v) {
              C = v;
            }});
        };
      };
      W = this.CreateElement($lt166,El);
      W.FCond = C;
      W.FBody = B;
      Result = W;
      return Result;
    };
    this.ConvertRepeatStatement = function (El, AContext) {
      var Result = null;
      var C = null;
      var W = null;
      var B = null;
      Result = null;
      C = null;
      B = null;
      try {
        C = this.ConvertExpression(El.ConditionExpr,AContext);
        if ($lt171.isPrototypeOf(C)) {
          B = C;
          C = B.FA;
          B.FA = null;
          B = rtl.freeLoc(B);
          B = null;
        } else C = this.CreateUnaryNot(C,El.ConditionExpr);
        B = this.ConvertImplBlockElements(El,AContext,false);
        W = this.CreateElement($lt201,El);
        W.FCond = C;
        W.FBody = B;
        Result = W;
      } finally {
        if (Result === null) {
          $lp({get: function () {
              return B;
            }, set: function (v) {
              B = v;
            }});
          $lp({get: function () {
              return C;
            }, set: function (v) {
              C = v;
            }});
        };
      };
      return Result;
    };
    var TInKind = {"0": "ikNone", ikNone: 0, "1": "ikEnum", ikEnum: 1, "2": "ikBool", ikBool: 2, "3": "ikChar", ikChar: 3, "4": "ikString", ikString: 4, "5": "ikArray", ikArray: 5, "6": "ikArrayManaged", ikArrayManaged: 6, "7": "ikSetInt", ikSetInt: 7, "8": "ikSetBool", ikSetBool: 8, "9": "ikSetChar", ikSetChar: 9, "10": "ikSetString", ikSetString: 10};
    this.ConvertForStatement = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var aResolver = null;
      function ConvExpr(Expr) {
        var Result = null;
        var ResolvedEl = $lt84.$new();
        Result = $Self.ConvertExpression(Expr,AContext);
        if ($lt137.isPrototypeOf(Result)) {
          var $tmp = Result.FValue.FValueType;
          if ($tmp === 2) {
            Result.FValue.SetAsNumber(Result.FValue.GetAsBoolean() + 0)}
           else if ($tmp === 3) {
            return Result}
           else if ($tmp === 4) {
            $Self.ConvertCharLiteralToInt(Result,Expr,AContext);
            return Result;
          } else {
            Result = rtl.freeLoc(Result);
            $Self.RaiseNotSupported(Expr,AContext,20171112021222,"");
          };
        } else if (aResolver !== null) {
          aResolver.ComputeElement(Expr,ResolvedEl,{},null);
          if ((ResolvedEl.BaseType in $lm3.btAllChars) || ((ResolvedEl.BaseType === 37) && (ResolvedEl.SubType in $lm3.btAllChars))) {
            Result = $Self.CreateCallCharCodeAt(Result,0,Expr);
          } else if ((ResolvedEl.BaseType in $mod.btAllJSBooleans) || ((ResolvedEl.BaseType === 37) && (ResolvedEl.SubType in $mod.btAllJSBooleans))) {
            Result = $Self.CreateUnaryPlus(Result,Expr);
          };
        };
        return Result;
      };
      function GetOrd(Value, ErrorEl) {
        var Result = 0;
        var OrdValue = null;
        if (Value === null) return 0;
        OrdValue = aResolver.fExprEvaluator.OrdValue(Value,ErrorEl);
        var $tmp = OrdValue.Kind;
        if ($tmp === 4) {
          Result = OrdValue.Int}
         else {
          $Self.RaiseNotSupported(ErrorEl,AContext,20171112133917,"");
        };
        if (Value !== OrdValue) $lp17({get: function () {
            return OrdValue;
          }, set: function (v) {
            OrdValue = v;
          }});
        return Result;
      };
      function GetEnumValue(EnumType, Int) {
        var Result = null;
        if ((2 in $Self.FOptions) || (Int < 0) || (Int >= EnumType.Values.FCount)) {
          Result = $lt202.$create("CreateValue",[Int])}
         else Result = $lt203.$create("CreateValue",[Int,rtl.as(rtl.getObject(EnumType.Values.Get(Int)),$lt139)]);
        return Result;
      };
      var FuncContext = null;
      var VarResolved = $lt84.$new();
      var InResolved = $lt84.$new();
      var StartValue = null;
      var EndValue = null;
      var InValue = null;
      var StartInt = 0;
      var EndInt = 0;
      var HasLoopVar = false;
      var HasEndVar = false;
      var HasInVar = false;
      var InKind = 0;
      var ForScope = null;
      function InitWithResolver() {
        var Result$1 = false;
        var EnumType = null;
        var TypeEl = null;
        var ArgResolved = $lt84.$new();
        var LengthResolved = $lt84.$new();
        var PropResultResolved = $lt84.$new();
        Result$1 = true;
        aResolver.ComputeElement(El.VariableName,VarResolved,rtl.createSet(1),null);
        if (!$lt80.isPrototypeOf(VarResolved.IdentEl) && !$lt90.isPrototypeOf(VarResolved.IdentEl)) $Self.DoError$2(20170213214404,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"var",18,aResolver.GetResolverResultDescription(VarResolved,false)),El.VariableName);
        var $tmp = El.LoopType;
        if (($tmp === 0) || ($tmp === 1)) {
          StartValue = aResolver.Eval(El.StartExpr,{},false);
          StartInt = GetOrd(StartValue,El.StartExpr);
          EndValue = aResolver.Eval(El.EndExpr,{},false);
          EndInt = GetOrd(EndValue,El.EndExpr);
        } else if ($tmp === 2) {
          if (ForScope.GetEnumerator !== null) {
            Result = $Self.CreateGetEnumeratorLoop(El,AContext);
            return false;
          };
          aResolver.ComputeElement(El.StartExpr,InResolved,{},null);
          HasInVar = true;
          InValue = aResolver.Eval(El.StartExpr,{},false);
          if (InValue === null) {
            if ($lt76.isPrototypeOf(InResolved.IdentEl)) {
              TypeEl = aResolver.ResolveAliasType(InResolved.IdentEl,true);
              if ($lt107.isPrototypeOf(TypeEl)) {
                if (rtl.length(TypeEl.Ranges) === 1) InValue = aResolver.Eval(TypeEl.Ranges[0],rtl.createSet(0),true);
              } else if ($lt117.isPrototypeOf(TypeEl)) InValue = aResolver.EvalTypeRange(TypeEl.EnumType,rtl.createSet(0));
            };
          };
          if (InValue !== null) {
            var $tmp1 = InValue.Kind;
            if ($tmp1 === 8) {
              InKind = 4;
              StartInt = 0;
              EndInt = InValue.S.length - 1;
              $lp17({get: function () {
                  return InValue;
                }, set: function (v) {
                  InValue = v;
                }});
            } else if (($tmp1 === 10) || ($tmp1 === 12)) {
              if (InValue.Kind === 12) {
                if (rtl.length(InValue.Ranges) === 0) return false;
                if (rtl.length(InValue.Ranges) > 1) {
                  var $tmp2 = InValue.ElKind;
                  if (($tmp2 === 1) || ($tmp2 === 2)) {
                    InKind = 7}
                   else if ($tmp2 === 3) {
                    InKind = 9}
                   else if ($tmp2 === 4) InKind = 8;
                  HasInVar = false;
                  HasLoopVar = InKind !== 7;
                  HasEndVar = false;
                  return Result$1;
                };
              };
              StartInt = InValue.RangeStart;
              EndInt = InValue.RangeEnd;
              HasInVar = false;
              HasEndVar = false;
              var $tmp3 = InValue.ElKind;
              if ($tmp3 === 1) {
                if (2 in $Self.FOptions) {
                  InKind = 0}
                 else {
                  InKind = 1;
                  EnumType = InValue.ElType;
                  StartValue = GetEnumValue(EnumType,StartInt);
                  EndValue = GetEnumValue(EnumType,EndInt);
                }}
               else if ($tmp3 === 2) {
                InKind = 0}
               else if ($tmp3 === 3) {
                InKind = 3}
               else if ($tmp3 === 4) {
                InKind = 2}
               else {
                $Self.RaiseNotSupported(El.StartExpr,AContext,20171113023419,"");
              };
            } else {
              $Self.RaiseNotSupported(El.StartExpr,AContext,20171112161527,"");
            };
          } else if (0 in InResolved.Flags) {
            if (InResolved.BaseType in $lm3.btAllStrings) {
              InKind = 4;
              StartInt = 0;
            } else if (InResolved.BaseType === 1) {
              if (aResolver.IsJSBaseType$1(InResolved,1,false)) {
                InKind = 10;
                HasInVar = false;
                HasLoopVar = false;
                HasEndVar = false;
                return Result$1;
              };
            } else if (InResolved.BaseType === 2) {
              TypeEl = InResolved.LoTypeEl;
              if (TypeEl.$class.ClassType() === $lt107) {
                if (rtl.length(TypeEl.Ranges) <= 1) {
                  if (aResolver.IsManagedJSType(VarResolved.LoTypeEl)) {
                    InKind = 6}
                   else InKind = 5;
                  StartInt = 0;
                } else {
                  $Self.RaiseNotSupported(El.StartExpr,AContext,20171220010147,"");
                };
              } else if ((TypeEl.$class.ClassType() === $lt72) && TypeEl.IsExternal) {
                if (aResolver.IsForInExtArray(El,VarResolved,InResolved,ArgResolved,LengthResolved,PropResultResolved)) {
                  InKind = 5;
                  StartInt = 0;
                } else {
                  InKind = 10;
                  HasInVar = false;
                  HasLoopVar = false;
                  HasEndVar = false;
                  return Result$1;
                };
              } else {
                $Self.RaiseNotSupported(El.StartExpr,AContext,20171113012226,"");
              };
            } else if (InResolved.BaseType in rtl.createSet(34,36)) {
              if (InResolved.SubType in $mod.btAllJSBooleans) {
                InKind = 8}
               else if (InResolved.SubType in $lm3.btAllChars) {
                InKind = 9}
               else InKind = 7;
              HasInVar = false;
              HasLoopVar = true;
              HasEndVar = false;
              return Result$1;
            } else {
              $Self.RaiseNotSupported(El.StartExpr,AContext,20171220221747,"");
            };
          } else {
            $Self.RaiseNotSupported(El.StartExpr,AContext,20171112195629,"");
          };
        };
        if (EndValue !== null) {
          HasEndVar = false;
          if (StartValue !== null) {
            if (StartInt <= EndInt) {
              if (StartValue.Kind in rtl.createSet(4,5,9)) HasLoopVar = false;
            } else {
              if (5 in $Self.FOptions) return Result$1;
            };
          };
        };
        return Result$1;
      };
      function CreateStrictNotEqual0(Left, PosEl) {
        var Result = null;
        var SNE = null;
        SNE = $Self.CreateElement($lt204,PosEl);
        SNE.FA = Left;
        SNE.FB = $Self.CreateLiteralNumber(PosEl,0);
        Result = SNE;
        return Result;
      };
      var ForSt = null;
      var List = null;
      var SimpleAss = null;
      var Incr = null;
      var BinExp = null;
      var VarStat = null;
      var CurLoopVarName = "";
      var CurEndVarName = "";
      var CurInVarName = "";
      var PosEl = null;
      var Statements = null;
      var V = null;
      var Call = null;
      var Br = null;
      Result = null;
      if (AContext.Access !== 0) this.RaiseInconsistency(20170213213740,El);
      aResolver = AContext.Resolver;
      ForScope = rtl.as(El.FData,$lt205);
      var $tmp = El.LoopType;
      if (($tmp === 0) || ($tmp === 1)) {}
      else if ($tmp === 2) {
        if (aResolver === null) this.RaiseNotSupported(El,AContext,20171112160707,"")}
       else {
        this.RaiseNotSupported(El,AContext,20171110141937,"");
      };
      FuncContext = AContext.GetFunctionContext();
      StartValue = null;
      StartInt = 0;
      EndValue = null;
      EndInt = 0;
      InValue = null;
      InKind = 0;
      Statements = null;
      try {
        HasLoopVar = true;
        HasEndVar = true;
        HasInVar = false;
        if ((aResolver !== null) && !InitWithResolver()) return Result;
        if (FuncContext === null) {
          CurInVarName = "$in";
          CurLoopVarName = "$l";
          CurEndVarName = "$end";
        } else {
          if (HasInVar) {
            CurInVarName = FuncContext.AddLocalJSVar(this.GetBIName(135),true).Name}
           else CurInVarName = "";
          if (HasLoopVar) {
            CurLoopVarName = FuncContext.AddLocalJSVar(this.GetBIName(133),true).Name}
           else CurLoopVarName = "";
          if (HasEndVar) {
            CurEndVarName = FuncContext.AddLocalJSVar(this.GetBIName(134),true).Name}
           else CurEndVarName = "";
        };
        if (InKind in rtl.createSet(7,8,9,10)) {
          ForSt = this.CreateElement($lt155,El)}
         else ForSt = this.CreateElement($lt154,El);
        Statements = ForSt;
        PosEl = El;
        if (!HasLoopVar && (HasEndVar || HasInVar)) {
          List = this.CreateElement($lt129,El);
          SimpleAss = this.CreateElement($lt133,El.VariableName);
          List.FA = SimpleAss;
          List.FB = Statements;
          Statements = List;
          SimpleAss.FLHS = this.ConvertExpression(El.VariableName,AContext);
          if (StartValue !== null) {
            SimpleAss.FExpr = this.CreateLiteralNumber(El.StartExpr,StartInt)}
           else SimpleAss.FExpr = this.ConvertExpression(El.StartExpr,AContext);
          PosEl = El.StartExpr;
        };
        if (ForSt.$class.ClassType() === $lt155) {
          if (HasLoopVar) {
            VarStat = this.CreateElement($lt134,PosEl);
            VarStat.FA = this.CreatePrimitiveDotExpr(CurLoopVarName,PosEl);
            ForSt.FLhs = VarStat;
          } else ForSt.FLhs = this.ConvertExpression(El.VariableName,AContext);
          ForSt.FList = this.ConvertExpression(El.StartExpr,AContext);
        } else if (HasLoopVar || HasEndVar || HasInVar) {
          VarStat = this.CreateElement($lt134,El);
          ForSt.FInit = VarStat;
          if (HasInVar) {
            PosEl = El.StartExpr;
            if ((InValue !== null) && (InValue.Kind !== 12)) {
              V = this.ConvertConstValue(InValue,AContext,PosEl)}
             else V = this.ConvertExpression(El.StartExpr,AContext);
            V = this.CreateVarDecl$1(CurInVarName,V,PosEl);
            this.AddToVarStatement(VarStat,V,PosEl);
          };
          if (HasLoopVar) {
            PosEl = El.StartExpr;
            if (StartValue !== null) {
              V = this.CreateLiteralNumber(PosEl,StartInt)}
             else if (El.LoopType === 2) {
              V = this.CreateLiteralNumber(PosEl,StartInt)}
             else V = ConvExpr(El.StartExpr);
            V = this.CreateVarDecl$1(CurLoopVarName,V,PosEl);
            this.AddToVarStatement(VarStat,V,PosEl);
          };
          if (HasEndVar) {
            PosEl = El.EndExpr;
            if (PosEl === null) PosEl = El.StartExpr;
            if (EndValue !== null) {
              V = this.CreateLiteralNumber(PosEl,EndInt)}
             else if (El.LoopType === 2) {
              var $tmp1 = InKind;
              if (($tmp1 === 1) || ($tmp1 === 2) || ($tmp1 === 3)) {
                V = this.CreateLiteralNumber(PosEl,EndInt)}
               else if ($tmp1 === 4) {
                V = this.CreateElement($lt206,PosEl);
                V.FA = this.CreatePrimitiveDotExpr(CurInVarName + ".length",PosEl);
                V.FB = this.CreateLiteralNumber(PosEl,1);
              } else if (($tmp1 === 5) || ($tmp1 === 6)) {
                Call = this.CreateCallExpression(PosEl);
                Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(7),PosEl);
                Call.AddArg(this.CreatePrimitiveDotExpr(CurInVarName,PosEl));
                V = this.CreateElement($lt206,PosEl);
                V.FA = Call;
                V.FB = this.CreateLiteralNumber(PosEl,1);
              } else {
                this.RaiseNotSupported(El.StartExpr,AContext,20171113015445,"");
              };
            } else V = ConvExpr(El.EndExpr);
            V = this.CreateVarDecl$1(CurEndVarName,V,PosEl);
            this.AddToVarStatement(VarStat,V,PosEl);
          };
        } else {
          SimpleAss = this.CreateElement($lt133,El.VariableName);
          ForSt.FInit = SimpleAss;
          SimpleAss.FLHS = this.ConvertExpression(El.VariableName,AContext);
          if (StartValue !== null) {
            SimpleAss.FExpr = this.CreateLiteralNumber(El.StartExpr,StartInt)}
           else SimpleAss.FExpr = this.ConvertExpression(El.StartExpr,AContext);
          PosEl = El.StartExpr;
        };
        if (ForSt.$class.ClassType() === $lt154) {
          if (El.EndExpr !== null) PosEl = El.EndExpr;
          if (El.Down()) {
            BinExp = this.CreateElement($lt207,PosEl)}
           else BinExp = this.CreateElement($lt208,PosEl);
          ForSt.FCond = BinExp;
          if (HasLoopVar) {
            BinExp.FA = this.CreatePrimitiveDotExpr(CurLoopVarName,PosEl)}
           else BinExp.FA = this.ConvertExpression(El.VariableName,AContext);
          if (HasEndVar) {
            BinExp.FB = this.CreatePrimitiveDotExpr(CurEndVarName,PosEl)}
           else BinExp.FB = this.CreateLiteralNumber(PosEl,EndInt);
          if (El.Down()) {
            Incr = this.CreateElement($lt209,PosEl)}
           else Incr = this.CreateElement($lt210,PosEl);
          ForSt.FIncr = Incr;
          if (HasLoopVar) {
            Incr.FA = this.CreatePrimitiveDotExpr(CurLoopVarName,PosEl)}
           else Incr.FA = this.ConvertExpression(El.VariableName,AContext);
        };
        if (HasLoopVar) {
          PosEl = El.Body;
          if (PosEl === null) PosEl = El;
          PosEl = El.VariableName;
          SimpleAss = this.CreateElement($lt133,PosEl);
          ForSt.FBody = SimpleAss;
          SimpleAss.FLHS = this.ConvertExpression(El.VariableName,AContext);
          SimpleAss.FExpr = this.CreatePrimitiveDotExpr(CurLoopVarName,PosEl);
          if (aResolver !== null) {
            if (InKind !== 0) {
              var $tmp2 = InKind;
              if (($tmp2 === 1) || ($tmp2 === 7)) {
                if (ForSt.$class.ClassType() === $lt155) SimpleAss.FExpr = this.CreateUnaryPlus(SimpleAss.FExpr,PosEl)}
               else if (($tmp2 === 2) || ($tmp2 === 8)) {
                SimpleAss.FExpr = CreateStrictNotEqual0(SimpleAss.FExpr,PosEl)}
               else if (($tmp2 === 3) || ($tmp2 === 9)) {
                SimpleAss.FExpr = this.CreateCallFromCharCode(SimpleAss.FExpr,PosEl)}
               else if ($tmp2 === 4) {
                Call = this.CreateCallExpression(PosEl);
                Call.FExpr = this.CreateDotNameExpr(PosEl,this.CreatePrimitiveDotExpr(CurInVarName,El.StartExpr),"charAt");
                Call.AddArg(SimpleAss.FExpr);
                SimpleAss.FExpr = Call;
              } else if (($tmp2 === 5) || ($tmp2 === 6)) {
                Br = this.CreateElement($lt142,PosEl);
                Br.FMExpr = this.CreatePrimitiveDotExpr(CurInVarName,El.StartExpr);
                Br.FName = SimpleAss.FExpr;
                SimpleAss.FExpr = Br;
                if (InKind === 6) {
                  Call = this.CreateCallExpression(PosEl);
                  Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(51)]);
                  Call.AddArg(this.ConvertExpression(El.VariableName,AContext));
                  Call.AddArg(Br);
                  SimpleAss.FExpr = Call;
                  if (VarResolved.IdentEl === null) this.RaiseNotSupported(El.VariableName,AContext,20250625190022,"for-in variable");
                  FuncContext.Add_InterfaceRelease(VarResolved.IdentEl);
                };
              } else {
                this.RaiseNotSupported(El.StartExpr,AContext,20171113002550,"");
              };
            } else if ((VarResolved.BaseType in $lm3.btAllChars) || ((VarResolved.BaseType === 37) && (VarResolved.SubType in $lm3.btAllChars))) {
              SimpleAss.FExpr = this.CreateCallFromCharCode(SimpleAss.FExpr,PosEl);
            } else if ((VarResolved.BaseType in $mod.btAllJSBooleans) || ((VarResolved.BaseType === 37) && (VarResolved.SubType in $mod.btAllJSBooleans))) {
              SimpleAss.FExpr = CreateStrictNotEqual0(SimpleAss.FExpr,PosEl);
            };
          };
        };
        if (El.Body !== null) {
          V = this.ConvertElement(El.Body,AContext);
          if (ForSt.FBody === null) {
            ForSt.FBody = V}
           else {
            List = this.CreateElement($lt129,El.Body);
            List.FA = ForSt.FBody;
            List.FB = V;
            ForSt.FBody = List;
          };
        };
        Result = Statements;
      } finally {
        $lp17({get: function () {
            return StartValue;
          }, set: function (v) {
            StartValue = v;
          }});
        $lp17({get: function () {
            return EndValue;
          }, set: function (v) {
            EndValue = v;
          }});
        $lp17({get: function () {
            return InValue;
          }, set: function (v) {
            InValue = v;
          }});
        if (Result === null) Statements = rtl.freeLoc(Statements);
      };
      return Result;
    };
    this.ConvertFinalizationSection = function (El, AContext) {
      var Result = null;
      Result = null;
      this.RaiseNotSupported(El,AContext,20161024192519,"");
      return Result;
    };
    this.ConvertInitializationSection = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var FDS = null;
      var FuncContext = null;
      var PosEl = null;
      function CreateBody() {
        var Result = null;
        var FuncDef = null;
        FuncDef = FDS.FFuncDef;
        Result = FuncDef.FBody;
        if (Result === null) {
          Result = $Self.CreateElement($lt158,PosEl);
          FuncDef.FBody = Result;
        };
        if (FuncContext === null) FuncContext = $lt34.$create("Create$1",[PosEl,Result,AContext]);
        return Result;
      };
      var FunName = "";
      var S = "";
      var IsMain = false;
      var NeedRTLCheckVersion = false;
      var AssignSt = null;
      var Body = null;
      var Scope = null;
      var Line = 0;
      var Col = 0;
      var Lit = null;
      var Section = null;
      var RootContext = null;
      var ImplJS = null;
      Result = null;
      Section = El.InitializationSection;
      if (Section !== null) {
        PosEl = Section;
        Scope = Section.FData;
      } else {
        PosEl = El;
        Scope = null;
      };
      if (El.$class.ClassType() === $lt97) {
        IsMain = true;
        FunName = this.GetBIName(67);
      } else if (El.$class.ClassType() === $lt98) {
        IsMain = true;
        FunName = this.GetBIName(62);
      } else {
        IsMain = false;
        FunName = this.GetBIName(117);
      };
      NeedRTLCheckVersion = IsMain && (7 in this.FOptions);
      RootContext = rtl.as(AContext.GetRootContext(),$lt32);
      FuncContext = null;
      AssignSt = this.CreateElement($lt133,PosEl);
      try {
        AssignSt.FLHS = this.CreateMemberExpression([this.GetBIName(136),FunName]);
        FDS = this.CreateFunctionSt(PosEl,false,false);
        AssignSt.FExpr = FDS;
        Body = FDS.FFuncDef.FBody;
        if (Section !== null) {
          ImplJS = Scope.ImplJS;
          if (ImplJS !== null) {
            S = $lp38(ImplJS.BodyJS);
            if (S !== "") {
              Body = CreateBody();
              $lt69.UnmangleSourceLineNumber(El.SourceLinenumber,{get: function () {
                  return Line;
                }, set: function (v) {
                  Line = v;
                }},{get: function () {
                  return Col;
                }, set: function (v) {
                  Col = v;
                }});
              Lit = $lt137.$create("Create$1",[Line,Col,El.SourceFilename]);
              Lit.FValue.FCustomValue = $lp24(S);
              Body.FA = Lit;
              if (10 in this.FOptions) this.CreateGlobalAlias_List(ImplJS.ShortRefs,AContext);
            };
          } else {
            if ((6 in this.FOptions) && (AContext.Resolver !== null)) {
              ImplJS = $lt11.$create("Create");
              Scope.ImplJS = ImplJS;
            };
            if (Section.Elements.FCount > 0) {
              Body = CreateBody();
              Body.FA = this.ConvertImplBlockElements(Section,FuncContext,false);
              FuncContext.BodySt = Body.FA;
              this.AddInterfaceReleases(FuncContext,PosEl);
              Body.FA = FuncContext.BodySt;
              if (ImplJS !== null) {
                ImplJS.BodyJS = $lp38(this.CreatePrecompiledJS(Body.FA));
                ImplJS.EmptyJS = ImplJS.BodyJS === "";
              };
            } else if (ImplJS !== null) ImplJS.EmptyJS = true;
          };
        };
        if (rtl.length(RootContext.GlobalClassMethods) > 0) {
          Body = CreateBody();
          this.AddClassConstructors(FuncContext,El);
          Body.FA = FuncContext.BodySt;
        };
        if (NeedRTLCheckVersion) {
          Body = CreateBody();
          this.AddRTLVersionCheck(FuncContext,El);
          Body.FA = FuncContext.BodySt;
        };
        Result = AssignSt;
      } finally {
        FuncContext = rtl.freeLoc(FuncContext);
        if (Result === null) AssignSt = rtl.freeLoc(AssignSt);
      };
      return Result;
    };
    this.ConvertSimpleStatement = function (El, AContext) {
      var Result = null;
      var E = null;
      var C = null;
      E = this.ConvertExpression(El.Expr,AContext);
      if (E === null) return null;
      C = E.$class.ClassType();
      if ((C === $lt211) || (C === $lt129)) {
        Result = E}
       else {
        Result = this.CreateElement($lt211,El);
        Result.FA = E;
      };
      return Result;
    };
    this.ConvertWithStatement = function (El, AContext) {
      var Result = null;
      var aResolver = null;
      var FuncContext = null;
      var WithScope = null;
      var WithExprScope = null;
      var PasExpr = null;
      var ResolvedEl = $lt84.$new();
      var B = null;
      var E = null;
      var Expr = null;
      var W = null;
      var W2 = null;
      var I = 0;
      var ok = false;
      var V = null;
      var FirstSt = null;
      var LastSt = null;
      var TypeEl = null;
      Result = null;
      aResolver = AContext.Resolver;
      if (aResolver !== null) {
        FuncContext = AContext.GetContextOfType($lt34);
        if (FuncContext === null) this.RaiseInconsistency(20170212003759,El);
        FirstSt = null;
        LastSt = null;
        try {
          WithScope = rtl.as(El.FData,$lt212);
          for (var $l = 0, $end = El.Expressions.FCount - 1; $l <= $end; $l++) {
            I = $l;
            PasExpr = rtl.getObject(El.Expressions.Get(I));
            aResolver.ComputeElement(PasExpr,ResolvedEl,{},null);
            if ($lt76.isPrototypeOf(ResolvedEl.IdentEl)) {
              TypeEl = ResolvedEl.LoTypeEl;
              if ((TypeEl.$class.ClassType() === $lt72) || (TypeEl.$class.ClassType() === $lt81) || (TypeEl.$class.ClassType() === $lt99)) {}
              else {
                continue;
              };
            };
            Expr = this.ConvertExpression(PasExpr,AContext);
            WithExprScope = rtl.as(WithScope.ExpressionScopes.GetItem(I),$lt19);
            if ($lt125.isPrototypeOf(Expr) && $lp39(Expr.FName,false)) {
              WithExprScope.WithVarName = Expr.FName;
              Expr = rtl.freeLoc(Expr);
            } else if ($lt213.isPrototypeOf(Expr)) {
              WithExprScope.WithVarName = "this";
              Expr = rtl.freeLoc(Expr);
            } else {
              WithExprScope.WithVarName = FuncContext.AddLocalJSVar(this.GetBIName(169),true).Name;
              V = this.CreateVarStatement(WithExprScope.WithVarName,Expr,PasExpr);
              this.AddToStatementList({get: function () {
                  return FirstSt;
                }, set: function (v) {
                  FirstSt = v;
                }},{get: function () {
                  return LastSt;
                }, set: function (v) {
                  LastSt = v;
                }},V,PasExpr);
            };
          };
          if (El.Body != null) {
            B = this.ConvertElement(El.Body,AContext);
            this.AddToStatementList({get: function () {
                return FirstSt;
              }, set: function (v) {
                FirstSt = v;
              }},{get: function () {
                return LastSt;
              }, set: function (v) {
                LastSt = v;
              }},B,El.Body);
          };
          Result = FirstSt;
        } finally {
          if (Result === null) $lp({get: function () {
              return FirstSt;
            }, set: function (v) {
              FirstSt = v;
            }});
        };
      } else {
        W = null;
        if (El.Body != null) {
          B = this.ConvertElement(El.Body,AContext)}
         else B = this.CreateElement($lt162,El);
        ok = false;
        try {
          for (var $l1 = 0, $end1 = El.Expressions.FCount - 1; $l1 <= $end1; $l1++) {
            I = $l1;
            PasExpr = rtl.getObject(El.Expressions.Get(I));
            E = this.ConvertExpression(PasExpr,AContext);
            W2 = this.CreateElement($lt214,PasExpr);
            if (!(Result != null)) Result = W2;
            if (W != null) W.FB = W2;
            W = W2;
            W.FA = E;
          };
          ok = true;
        } finally {
          if (!ok) {
            $lp({get: function () {
                return E;
              }, set: function (v) {
                E = v;
              }});
            $lp({get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }});
          };
        };
        W.FB = B;
      };
      return Result;
    };
    this.ConvertTryStatement = function (El, AContext) {
      var Result = null;
      var T = null;
      var ExceptBlock = null;
      var i = 0;
      var ExceptOn = null;
      var IfSt = null;
      var Last = null;
      Result = null;
      T = null;
      try {
        if ($lt215.isPrototypeOf(El.FinallyExcept)) {
          T = this.CreateElement($lt165,El);
          T.FBlock = this.ConvertImplBlockElements(El,AContext,true);
          T.FBFinally = this.ConvertImplBlockElements(El.FinallyExcept,AContext,true);
        } else {
          T = this.CreateElement($lt216,El);
          T.FBlock = this.ConvertImplBlockElements(El,AContext,true);
          T.FIdent = this.GetBIName(118);
          ExceptBlock = El.FinallyExcept;
          if ((ExceptBlock.Elements.FCount > 0) && $lt104.isPrototypeOf(rtl.getObject(ExceptBlock.Elements.Get(0)))) {
            Last = null;
            for (var $l = 0, $end = ExceptBlock.Elements.FCount - 1; $l <= $end; $l++) {
              i = $l;
              ExceptOn = rtl.as(rtl.getObject(ExceptBlock.Elements.Get(i)),$lt104);
              IfSt = rtl.as(this.ConvertExceptOn(ExceptOn,AContext),$lt151);
              if (Last === null) {
                T.FBCatch = IfSt}
               else Last.FBFalse = IfSt;
              Last = IfSt;
            };
            if (El.ElseBranch !== null) {
              Last.FBFalse = this.ConvertImplBlockElements(El.ElseBranch,AContext,true)}
             else {
              Last.FBFalse = this.CreateElement($lt200,El);
              Last.FBFalse.FA = this.CreatePrimitiveDotExpr(this.GetBIName(118),El);
            };
          } else {
            if (El.ElseBranch !== null) this.RaiseNotSupported(El.ElseBranch,AContext,20170205003014,"");
            T.FBCatch = this.ConvertImplBlockElements(ExceptBlock,AContext,true);
          };
        };
        Result = T;
      } finally {
        if (Result === null) T = rtl.freeLoc(T);
      };
      return Result;
    };
    this.ConvertExceptOn = function (El, AContext) {
      var Result = null;
      var IfSt = null;
      var ListFirst = null;
      var ListLast = null;
      var DotExpr = null;
      var Call = null;
      var V = null;
      var aResolver = null;
      var aType = null;
      var IsExternal = false;
      Result = null;
      aResolver = AContext.Resolver;
      aType = aResolver.ResolveAliasType(El.TypeEl,true);
      IsExternal = $lt72.isPrototypeOf(aType) && aType.IsExternal;
      IfSt = this.CreateElement($lt151,El);
      try {
        if (IsExternal) {
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(57)]);
          Call.AddArg(this.CreatePrimitiveDotExpr(this.GetBIName(118),El));
          Call.AddArg(this.CreateReferencePathExpr(El.TypeEl,AContext,false,null));
        } else {
          DotExpr = this.CreateElement($lt124,El);
          DotExpr.FMExpr = this.CreateReferencePathExpr(El.TypeEl,AContext,false,null);
          DotExpr.FName = "isPrototypeOf";
          Call = this.CreateCallExpression(El);
          Call.FExpr = DotExpr;
          Call.AddArg(this.CreatePrimitiveDotExpr(this.GetBIName(118),El));
        };
        IfSt.FCond = Call;
        if (El.VarEl !== null) {
          ListFirst = this.CreateElement($lt129,El.Body);
          ListLast = ListFirst;
          IfSt.FBTrue = ListFirst;
          V = this.CreateVarStatement(this.TransformElToJSName(El.VarEl,AContext),this.CreatePrimitiveDotExpr(this.GetBIName(118),El),El);
          ListFirst.FA = V;
          if (El.Body !== null) this.AddToStatementList({get: function () {
              return ListFirst;
            }, set: function (v) {
              ListFirst = v;
            }},{get: function () {
              return ListLast;
            }, set: function (v) {
              ListLast = v;
            }},this.ConvertElement(El.Body,AContext),El);
        } else if (El.Body !== null) IfSt.FBTrue = this.ConvertElement(El.Body,AContext);
        Result = IfSt;
      } finally {
        if (Result === null) IfSt = rtl.freeLoc(IfSt);
      };
      return Result;
    };
    this.ConvertCaseOfStatement = function (El, AContext) {
      var Result = null;
      var SubEl = null;
      var St = null;
      var ok = false;
      var IsCaseOfString = false;
      var i = 0;
      var j = 0;
      var JSExpr = null;
      var StList = null;
      var Expr = null;
      var IfSt = null;
      var LastIfSt = null;
      var TmpVar = null;
      var VarDecl = null;
      var VarSt = null;
      var JSOrExpr = null;
      var JSAndExpr = null;
      var JSLEExpr = null;
      var JSGEExpr = null;
      var JSEQExpr = null;
      var aResolver = null;
      var CaseResolved = $lt84.$new();
      var FuncCtx = null;
      Result = null;
      aResolver = AContext.Resolver;
      IsCaseOfString = false;
      if (aResolver !== null) {
        aResolver.ComputeElement(El.CaseExpr,CaseResolved,{},null);
        if (CaseResolved.BaseType in $lm3.btAllStrings) IsCaseOfString = true;
      };
      if (this.GetUseSwitchStatement()) {
        ok = true;
        for (var $l = 0, $end = El.Elements.FCount - 1; $l <= $end; $l++) {
          i = $l;
          SubEl = rtl.getObject(El.Elements.Get(i));
          if (!$lt127.isPrototypeOf(SubEl)) continue;
          St = SubEl;
          for (var $l1 = 0, $end1 = St.Expressions.FCount - 1; $l1 <= $end1; $l1++) {
            j = $l1;
            Expr = rtl.getObject(St.Expressions.Get(j));
            if ($lt85.isPrototypeOf(Expr) && (Expr.Kind === 7)) {
              ok = false;
              break;
            };
          };
          if (!ok) break;
        };
        if (ok) {
          Result = this.CreateSwitchStatement(El,AContext);
          return Result;
        };
      };
      StList = this.CreateElement($lt129,El);
      ok = false;
      try {
        FuncCtx = AContext.GetFunctionContext();
        if (FuncCtx === null) this.RaiseNotSupported(El,AContext,20200608132048,"");
        TmpVar = FuncCtx.AddLocalVar("$tmp",El.CaseExpr,0,true);
        VarSt = this.CreateElement($lt134,El.CaseExpr);
        StList.FA = VarSt;
        VarDecl = this.CreateElement($lt150,El.CaseExpr);
        VarSt.FA = VarDecl;
        VarDecl.FName = TmpVar.Name;
        VarDecl.FInit = this.ConvertExpression(El.CaseExpr,AContext);
        LastIfSt = null;
        for (var $l2 = 0, $end2 = El.Elements.FCount - 1; $l2 <= $end2; $l2++) {
          i = $l2;
          SubEl = rtl.getObject(El.Elements.Get(i));
          if ($lt127.isPrototypeOf(SubEl)) {
            St = SubEl;
            IfSt = this.CreateElement($lt151,SubEl);
            if (LastIfSt === null) {
              StList.FB = IfSt}
             else LastIfSt.FBFalse = IfSt;
            LastIfSt = IfSt;
            for (var $l3 = 0, $end3 = St.Expressions.FCount - 1; $l3 <= $end3; $l3++) {
              j = $l3;
              Expr = rtl.getObject(St.Expressions.Get(j));
              if ($lt85.isPrototypeOf(Expr) && (Expr.Kind === 7)) {
                JSAndExpr = this.CreateElement($lt176,Expr);
                JSExpr = JSAndExpr;
                JSGEExpr = this.CreateElement($lt207,Expr);
                JSAndExpr.FA = JSGEExpr;
                JSGEExpr.FA = this.CreatePrimitiveDotExpr(TmpVar.Name,El.CaseExpr);
                JSGEExpr.FB = this.ConvertExpression(Expr.Left,AContext);
                JSLEExpr = this.CreateElement($lt208,Expr);
                JSAndExpr.FB = JSLEExpr;
                JSLEExpr.FA = this.CreatePrimitiveDotExpr(TmpVar.Name,El.CaseExpr);
                JSLEExpr.FB = this.ConvertExpression(Expr.Right,AContext);
                if (IsCaseOfString) {
                  JSEQExpr = this.CreateElement($lt177,Expr);
                  JSEQExpr.FA = this.CreateDotNameExpr(Expr,this.CreatePrimitiveDotExpr(TmpVar.Name,El.CaseExpr),"length");
                  JSEQExpr.FB = this.CreateLiteralNumber(Expr,1);
                  JSAndExpr = this.CreateElement($lt176,Expr);
                  JSAndExpr.FA = JSEQExpr;
                  JSAndExpr.FB = JSExpr;
                  JSExpr = JSAndExpr;
                };
              } else {
                JSEQExpr = this.CreateElement($lt177,Expr);
                JSExpr = JSEQExpr;
                JSEQExpr.FA = this.CreatePrimitiveDotExpr(TmpVar.Name,El.CaseExpr);
                JSEQExpr.FB = this.ConvertExpression(Expr,AContext);
              };
              if (IfSt.FCond === null) {
                IfSt.FCond = JSExpr}
               else {
                JSOrExpr = this.CreateElement($lt217,St);
                JSOrExpr.FA = IfSt.FCond;
                JSOrExpr.FB = JSExpr;
                IfSt.FCond = JSOrExpr;
              };
            };
            if (St.Body !== null) {
              IfSt.FBTrue = this.ConvertElement(St.Body,AContext)}
             else IfSt.FBTrue = this.CreateElement($lt218,St);
          } else if ($lt219.isPrototypeOf(SubEl)) {
            if (LastIfSt === null) this.RaiseNotSupported(SubEl,AContext,20161128120802,"case-of needs at least one case");
            LastIfSt.FBFalse = this.ConvertImplBlockElements(El.ElseBranch,AContext,true);
          } else this.RaiseNotSupported(SubEl,AContext,20161128113055,"");
        };
        ok = true;
      } finally {
        if (!ok) StList = rtl.freeLoc(StList);
      };
      Result = StList;
      return Result;
    };
    this.ConvertAsmStatement = function (El, AContext) {
      var Result = null;
      var s = "";
      var L = null;
      var AsmLines = null;
      var Line = 0;
      var Col = 0;
      var StartLine = 0;
      var Statements = null;
      if (AContext === null) ;
      AsmLines = El.FTokens;
      s = $lp21(AsmLines.GetTextStr());
      if ((s !== "") && (s.charAt(s.length - 1) === ";")) $lp40({get: function () {
          return s;
        }, set: function (v) {
          s = v;
        }},s.length,1);
      if (s === "") {
        Result = this.CreateElement($lt218,El)}
       else {
        StartLine = 0;
        while ((StartLine < AsmLines.GetCount()) && ($lp21(AsmLines.Get(StartLine)) === "")) StartLine += 1;
        $lt69.UnmangleSourceLineNumber(El.SourceLinenumber,{get: function () {
            return Line;
          }, set: function (v) {
            Line = v;
          }},{get: function () {
            return Col;
          }, set: function (v) {
            Col = v;
          }});
        if (StartLine > 0) Col = 1;
        L = $lt137.$create("Create$1",[Line + StartLine,Col,El.SourceFilename]);
        L.FValue.FCustomValue = s;
        Result = L;
        if ($lp29(";",s) > 0) {
          Statements = $lt129.$create("Create$1",[L.FLine,L.FColumn,L.FSource]);
          Statements.FA = L;
          Result = Statements;
        };
      };
      return Result;
    };
    this.ConvertConstValue = function (Value, AContext, El) {
      var Result = null;
      var Ranges = [];
      var Range = $lt221.$new();
      var Call = null;
      var i = 0;
      Result = null;
      if (Value === null) this.RaiseNotSupported(El,AContext,20170910211948,"");
      var $tmp = Value.Kind;
      if ($tmp === 2) {
        Result = this.CreateLiteralNull(El)}
       else if ($tmp === 3) {
        Result = this.CreateLiteralBoolean(El,Value.B)}
       else if ($tmp === 4) {
        Result = this.CreateLiteralNumber(El,Value.Int)}
       else if ($tmp === 5) {
        Result = this.CreateLiteralNumber(El,Value.UInt)}
       else if ($tmp === 6) {
        Result = this.CreateLiteralFloat(El,Value.FloatValue)}
       else if ($tmp === 8) {
        Result = this.CreateLiteralJSString(El,Value.S)}
       else if ($tmp === 9) {
        Result = this.CreateReferencePathExpr(Value.GetEnumValue(),AContext,false,null)}
       else if ($tmp === 12) {
        if ($lt87.isPrototypeOf(Value.IdentEl)) {
          Result = this.ConvertExpression(Value.IdentEl,AContext)}
         else {
          Call = this.CreateCallExpression(El);
          try {
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(102)]);
            Ranges = Value.Ranges;
            for (var $l = 0, $end = rtl.length(Ranges) - 1; $l <= $end; $l++) {
              i = $l;
              Range.$assign(Ranges[i]);
              if (Range.RangeStart === Range.RangeEnd) {
                Call.AddArg(this.CreateLiteralNumber(El,Range.RangeStart));
              } else {
                Call.AddArg(this.CreateLiteralNull(El));
                Call.AddArg(this.CreateLiteralNumber(El,Range.RangeStart));
                Call.AddArg(this.CreateLiteralNumber(El,Range.RangeEnd));
              };
            };
            Result = Call;
          } finally {
            if (Result === null) Call = rtl.freeLoc(Call);
          };
        }}
       else {
        this.RaiseNotSupported(El,AContext,20170910211951,"");
      };
      return Result;
    };
    this.ConvertArrayValues = function (El, AContext) {
      var Result = null;
      var ArrLit = null;
      var I = 0;
      ArrLit = this.CreateElement($lt147,El);
      for (var $l = 0, $end = rtl.length(El.Values) - 1; $l <= $end; $l++) {
        I = $l;
        ArrLit.AddElement(this.ConvertExpression(El.Values[I],AContext));
      };
      Result = ArrLit;
      return Result;
    };
    this.ConvertInheritedExpr = function (El, AContext) {
      var $Self = this;
      var Result = null;
      function CreateAncestorCall(ParentEl, Apply, AncestorProc, ParamsExpr) {
        var Result = null;
        var FunName = "";
        var SelfName = "";
        var Call = null;
        var SelfContext = null;
        var ClassScope = null;
        var AncestorScope = null;
        var AncestorClass = null;
        var aClass = null;
        Result = null;
        SelfContext = AContext.GetSelfContext();
        if (SelfContext === null) $Self.RaiseInconsistency(20170418114702,El);
        SelfName = $Self.GetLocalName(SelfContext.ThisVar.Element,rtl.createSet(2,3),AContext);
        if (Apply && (SelfContext !== AContext)) $Self.DoError$2(20170418204325,4022,rtl.getResStr($mod,"sNestedInheritedNeedsParameters"),[],El);
        Call = null;
        try {
          Call = $Self.CreateCallExpression(ParentEl);
          if ($lt72.isPrototypeOf(AncestorProc.FParent) && AncestorProc.FParent.IsExternal) {
            aClass = rtl.as(SelfContext.ThisVar.Element,$lt72);
            if (aClass.FData === null) $Self.RaiseInconsistency(20170323111252,aClass);
            ClassScope = aClass.FData;
            AncestorScope = ClassScope.AncestorScope;
            if (AncestorScope === null) $Self.RaiseInconsistency(20170323111306,aClass);
            AncestorClass = rtl.as(AncestorScope.FElement,$lt72);
            if ((AncestorProc.$class.ClassType() === $lt109) && $lp18(AncestorProc.FName,"new") && AContext.Resolver.IsExternalClass_Name(AncestorProc.FParent,"Function")) {
              FunName = "this." + $Self.GetBIName(23);
              Call.FExpr = $Self.CreatePrimitiveDotExpr(FunName,ParentEl);
              $Self.CreateProcedureCall({get: function () {
                  return Call;
                }, set: function (v) {
                  Call = v;
                }},ParamsExpr,AncestorProc.ProcType,AContext);
              Result = Call;
              return Result;
            } else FunName = $Self.CreateReferencePath(AncestorClass,AContext,2,true,null) + "." + $Self.TransformElToJSName(AncestorProc,AContext);
          } else FunName = $Self.CreateReferencePath(AncestorProc,AContext,2,true,null);
          if (AncestorProc.ProcType.Args.FCount === 0) Apply = false;
          if (Apply && (SelfContext === AContext)) {
            FunName = FunName + ".apply"}
           else FunName = FunName + ".call";
          Call.FExpr = $Self.CreatePrimitiveDotExpr(FunName,ParentEl);
          Call.AddArg($Self.CreatePrimitiveDotExpr(SelfName,ParentEl));
          if (Apply) {
            Call.AddArg($Self.CreatePrimitiveDotExpr("arguments",ParentEl))}
           else $Self.CreateProcedureCall({get: function () {
              return Call;
            }, set: function (v) {
              Call = v;
            }},ParamsExpr,AncestorProc.ProcType,AContext);
          if ($lt94.isPrototypeOf(AncestorProc) && !AncestorProc.IsAsync() && AContext.Resolver.IsManagedJSType(AncestorProc.GetFT().ResultEl.ResultType)) Call = $Self.CreateIntfRef(Call,AContext,El);
          Result = Call;
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
        return Result;
      };
      var Right = null;
      var Ref = null;
      var PrimExpr = null;
      var AncestorProc = null;
      var ParamsExpr = null;
      Result = null;
      if ($lt85.isPrototypeOf(El.FParent) && (El.FParent.OpCode === 0) && (El.FParent.Left === El)) {
        AncestorProc = null;
        ParamsExpr = null;
        Right = El.FParent.Right;
        if (Right.$class.ClassType() === $lt91) {
          PrimExpr = Right;
          Ref = rtl.as(PrimExpr.FData,$lt71);
          if (1 in Ref.Flags) {
            AncestorProc = rtl.as(Ref.FDeclaration,$lt67);
          } else {
            Result = this.ConvertPrimitiveExpression(PrimExpr,AContext);
            return Result;
          };
        } else if (Right.$class.ClassType() === $lt86) {
          ParamsExpr = Right;
          if (ParamsExpr.Kind === 10) {
            if ($lt91.isPrototypeOf(ParamsExpr.Value)) {
              PrimExpr = ParamsExpr.Value;
              Ref = rtl.as(PrimExpr.FData,$lt71);
              AncestorProc = rtl.as(Ref.FDeclaration,$lt67);
            } else this.DoError$2(20170418205802,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"inherited name()",18,ParamsExpr.Value.ElementTypeName()),ParamsExpr.Value);
          } else {
            Result = this.ConvertExpression(Right,AContext);
            return Result;
          };
        } else {
          this.DoError$2(20170418205955,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"inherited name()",18,Right.ElementTypeName()),Right);
        };
        if (AncestorProc === null) {
          this.RaiseNotSupported(El,AContext,20170201190824,"");
        };
        Result = CreateAncestorCall(Right,false,AncestorProc,ParamsExpr);
      } else {
        if (El.FData === null) return Result;
        Ref = El.FData;
        AncestorProc = rtl.as(Ref.FDeclaration,$lt67);
        Result = CreateAncestorCall(El,true,AncestorProc,null);
      };
      return Result;
    };
    this.ConvertNilExpr = function (El, AContext) {
      var Result = null;
      if (AContext === null) ;
      Result = this.CreateLiteralNull(El);
      return Result;
    };
    this.ConvertCharToInt = function (Arg, PosEl, ArgContext) {
      var Result = null;
      if ($lt137.isPrototypeOf(Arg) && (Arg.FValue.FValueType === 4)) {
        this.ConvertCharLiteralToInt(Arg,PosEl,ArgContext);
        Result = Arg;
      } else {
        Result = this.CreateCallCharCodeAt(Arg,0,PosEl);
      };
      return Result;
    };
    this.ConvertIntToInt = function (Arg, FromBT, ToBT, PosEl, ArgContext) {
      var Result = null;
      var aResolver = null;
      var MinVal = 0;
      var MaxVal = 0;
      var Call = null;
      var ShiftEx = null;
      Result = Arg;
      aResolver = ArgContext.Resolver;
      if (FromBT === 14) {
        if (ToBT !== 14) Result = this.CreateTruncFloor(PosEl,this.CreateDivideNumber(PosEl,Result,10000),true);
      } else if (ToBT === 14) Result = this.CreateMulNumber(PosEl,Result,10000);
      if ((ToBT !== 28) && !$lt137.isPrototypeOf(Result)) {
        if (15 in ArgContext.ScannerBoolSwitches) {
          if (!aResolver.GetIntegerRange(ToBT,{get: function () {
              return MinVal;
            }, set: function (v) {
              MinVal = v;
            }},{get: function () {
              return MaxVal;
            }, set: function (v) {
              MaxVal = v;
            }})) this.RaiseNotSupported(PosEl,ArgContext,20180425131839,"");
          Call = this.CreateCallExpression(PosEl);
          Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(72),PosEl);
          Call.AddArg(Result);
          Result = Call;
          Call.AddArg(this.CreateLiteralNumber(PosEl,MinVal));
          Call.AddArg(this.CreateLiteralNumber(PosEl,MaxVal));
        } else {
          var $tmp = ToBT;
          if ($tmp === 19) {
            if (FromBT !== 19) Result = this.CreateBitWiseAnd(PosEl,Result,255,0)}
           else if ($tmp === 20) {
            if (FromBT !== 20) Result = this.CreateBitWiseAnd(PosEl,Result,255,24)}
           else if ($tmp === 21) {
            if (!(FromBT in rtl.createSet(19,21))) Result = this.CreateBitWiseAnd(PosEl,Result,65535,0)}
           else if ($tmp === 22) {
            if (!(FromBT in rtl.createSet(20,22))) Result = this.CreateBitWiseAnd(PosEl,Result,65535,16)}
           else if ($tmp === 25) {
            if (!(FromBT in rtl.createSet(19,21,25,23))) {
              ShiftEx = this.CreateElement($lt222,PosEl);
              ShiftEx.FA = Result;
              ShiftEx.FB = this.CreateLiteralNumber(PosEl,0);
              Result = ShiftEx;
            }}
           else if ($tmp === 26) if (!(FromBT in rtl.createSet(20,22,26,24))) Result = this.CreateBitWiseAnd(PosEl,Result,0xffffffff,0);
        };
      };
      return Result;
    };
    this.CreateBitWiseAnd = function (El, Value, Mask, Shift) {
      var Result = null;
      var AndEx = null;
      var Hex = "";
      var i = 0;
      var ShiftEx = null;
      AndEx = this.CreateElement($lt223,El);
      Result = AndEx;
      AndEx.FA = Value;
      AndEx.FB = this.CreateLiteralNumber(El,Mask);
      if (Mask > 999999) {
        Hex = rtl.hexStr(Mask,8);
        i = 1;
        while (i < 8) if (Hex.charAt(i - 1) === "0") {
          i += 1}
         else break;
        Hex = $lp4(Hex,i,8);
        AndEx.FB.FValue.FCustomValue = "0x" + Hex;
      };
      if (Shift > 0) {
        ShiftEx = this.CreateElement($lt224,El);
        ShiftEx.FA = Result;
        Result = ShiftEx;
        ShiftEx.FB = this.CreateLiteralNumber(El,Shift);
        ShiftEx = this.CreateElement($lt225,El);
        ShiftEx.FA = Result;
        Result = ShiftEx;
        ShiftEx.FB = this.CreateLiteralNumber(El,Shift);
      };
      return Result;
    };
    this.CreateBitWiseLongword = function (El, Value) {
      var Result = null;
      var Call = null;
      Call = this.CreateCallExpression(El);
      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(15),El);
      Call.AddArg(Value);
      Result = Call;
      return Result;
    };
    this.ConvertParamsExpr = function (El, AContext) {
      var Result = null;
      Result = null;
      var $tmp = El.Kind;
      if ($tmp === 10) {
        Result = this.ConvertFuncParams(El,AContext)}
       else if ($tmp === 11) {
        Result = this.ConvertArrayParams(El,AContext)}
       else if ($tmp === 4) {
        Result = this.ConvertArrayOrSetLiteral(El,AContext)}
       else {
        this.RaiseNotSupported(El,AContext,20170209103235,$lm1.ExprKindNames[El.Kind]);
      };
      return Result;
    };
    this.ConvertArrayParams = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var ArgContext = null;
      function RaiseIllegalBrackets(id, ResolvedEl) {
        $Self.DoError$2(id,3084,rtl.getResStr($lm6,"sIllegalQualifierAfter"),$lp6(9,"[",18,AContext.Resolver.GetResolverResultDescription(ResolvedEl,true)),El);
      };
      function GetValueReference() {
        var Result = null;
        var Value = null;
        Result = null;
        Value = El.Value;
        if ((Value.$class.ClassType() === $lt91) && $lt71.isPrototypeOf(Value.FData)) return Value.FData;
        return Result;
      };
      function ConvertIndexMinus1(Param) {
        var Result = null;
        var NeedMinus1 = false;
        var JSVal = null;
        var MinusJS = null;
        Result = $Self.ConvertExpression(Param,ArgContext);
        NeedMinus1 = true;
        if ($lt137.isPrototypeOf(Result)) {
          JSVal = Result.FValue;
          if (JSVal.FValueType === 3) {
            JSVal.SetAsNumber(JSVal.GetAsNumber() - 1);
            NeedMinus1 = false;
          };
        };
        if (NeedMinus1) {
          MinusJS = $Self.CreateElement($lt206,Param);
          MinusJS.FA = Result;
          MinusJS.FB = $Self.CreateLiteralNumber(Param,1);
          Result = MinusJS;
        };
        return Result;
      };
      function ConvertStringBracket(ResolvedValue) {
        var CallEx = null;
        var SetStrCall = null;
        var Param = null;
        var DotExpr = null;
        var AssignContext = null;
        var AssignSt = null;
        var OldAccess = 0;
        var IndexExpr = null;
        var Arg = null;
        var IsRangeCheck = false;
        Result = null;
        IsRangeCheck = (15 in AContext.ScannerBoolSwitches) && (AContext.Access in rtl.createSet(0,1));
        Param = El.Params[0];
        var $tmp = AContext.Access;
        if ($tmp === 1) {
          AssignContext = rtl.as(AContext.AccessContext,$lt39);
          if (AssignContext.RightSide === null) $Self.RaiseInconsistency(20180123192020,El);
          AssignSt = null;
          SetStrCall = null;
          CallEx = null;
          try {
            CallEx = $Self.CreateCallExpression(El);
            if (IsRangeCheck) {
              CallEx.FExpr = $Self.CreateMemberExpression([$Self.GetBIName(144),$Self.GetBIName(74)])}
             else CallEx.FExpr = $Self.CreateMemberExpression([$Self.GetBIName(144),$Self.GetBIName(100)]);
            OldAccess = AContext.Access;
            AContext.Access = 0;
            CallEx.AddArg($Self.ConvertExpression(El.Value,AContext));
            CallEx.AddArg(ConvertIndexMinus1(Param));
            AContext.Access = OldAccess;
            CallEx.AddArg(AssignContext.RightSide);
            AssignContext.RightSide = null;
            if ($lt89.isPrototypeOf(ResolvedValue.IdentEl)) {
              Arg = ResolvedValue.IdentEl;
              if (Arg.Access in rtl.createSet(2,3)) {
                SetStrCall = $Self.CreateCallExpression(El.Value);
                SetStrCall.FExpr = $Self.CreateMemberExpression([$Self.TransformArgName(Arg,AContext),$impl.TempRefObjSetterName]);
                SetStrCall.AddArg(CallEx);
                AssignContext.Call = CallEx;
                CallEx = null;
                Result = SetStrCall;
              };
            } else if ($lt74.isPrototypeOf(ResolvedValue.IdentEl)) $Self.RaiseNotSupported(El,AContext,20180124115924,"");
            if (Result === null) {
              AssignSt = $Self.CreateElement($lt133,El);
              AssignSt.FExpr = CallEx;
              AssignContext.Call = CallEx;
              CallEx = null;
              OldAccess = AContext.Access;
              AContext.Access = 0;
              AssignSt.FLHS = $Self.ConvertExpression(El.Value,AContext);
              Result = AssignSt;
            };
          } finally {
            if (Result === null) {
              CallEx = rtl.freeLoc(CallEx);
              SetStrCall = rtl.freeLoc(SetStrCall);
              AssignSt = rtl.freeLoc(AssignSt);
            };
          };
        } else if ($tmp === 0) {
          CallEx = $Self.CreateCallExpression(El);
          try {
            if (IsRangeCheck && !$lt85.IsRightSubIdent(El)) {
              CallEx.FExpr = $Self.CreatePrimitiveDotExpr($Self.GetBIName(144) + "." + $Self.GetBIName(73),El);
              CallEx.AddArg($Self.ConvertExpression(El.Value,AContext));
            } else {
              DotExpr = $Self.CreateElement($lt124,El);
              CallEx.FExpr = DotExpr;
              DotExpr.FMExpr = $Self.ConvertExpression(El.Value,AContext);
              DotExpr.FName = "charAt";
            };
            IndexExpr = ConvertIndexMinus1(Param);
            CallEx.AddArg(IndexExpr);
            Result = CallEx;
          } finally {
            if (Result === null) CallEx = rtl.freeLoc(CallEx);
          };
        } else {
          $Self.RaiseNotSupported(El,AContext,20170213213101,"");
        };
      };
      function ConvertArrayBracket(ArrayEl) {
        var BracketEx = null;
        var Sub = null;
        var i = 0;
        var ArgNo = 0;
        var Arg = null;
        var ArrJS = null;
        var OldAccess = 0;
        var Ranges = [];
        var Int = 0;
        var Param = null;
        var JSAdd = null;
        var LowRg = null;
        var IsRangeCheck = false;
        var ok = false;
        var NeedRangeCheck = false;
        var CallEx = null;
        var CallAssign = null;
        var AssignContext = null;
        var ArgList = null;
        var IsAssignRecord = false;
        Result = null;
        Arg = null;
        ArrJS = null;
        ArgList = $lt54.$create("Create");
        NeedRangeCheck = false;
        ok = false;
        try {
          OldAccess = AContext.Access;
          AContext.Access = 0;
          ArrJS = $Self.ConvertExpression(El.Value,AContext);
          AContext.Access = OldAccess;
          ArgNo = 0;
          do {
            Ranges = ArrayEl.Ranges;
            for (var $l = 1, $end = Math.max(rtl.length(Ranges),1); $l <= $end; $l++) {
              i = $l;
              Param = El.Params[ArgNo];
              ArgContext.Access = 0;
              Arg = $Self.ConvertExpression(Param,ArgContext);
              ArgContext.Access = OldAccess;
              if (!$lt137.isPrototypeOf(Arg)) NeedRangeCheck = true;
              if (i <= rtl.length(Ranges)) {
                LowRg = ArgContext.Resolver.EvalRangeLimit(Ranges[i - 1],rtl.createSet(0),true,El);
                if (LowRg === null) $Self.RaiseNotSupported(Param,ArgContext,20170910163341,"");
                try {
                  Int = 0;
                  var $tmp = LowRg.Kind;
                  if ($tmp === 3) {
                    if (LowRg.B === false) {
                      if ($lt137.isPrototypeOf(Arg) && (Arg.FValue.FValueType === 2)) {
                        if (Arg.FValue.GetAsBoolean()) {
                          Arg.FValue.SetAsNumber(1)}
                         else Arg.FValue.SetAsNumber(0);
                      } else {
                        Arg = $Self.CreateUnaryPlus(Arg,Param);
                      };
                    } else {
                      if ($lt137.isPrototypeOf(Arg) && (Arg.FValue.FValueType === 2)) {
                        if (Arg.FValue.GetAsBoolean()) {
                          Arg.FValue.SetAsNumber(0)}
                         else ArgContext.Resolver.fExprEvaluator.EmitRangeCheckConst(20170910203312,"false","true","true",Param,1);
                      } else {
                        JSAdd = $Self.CreateElement($lt206,Param);
                        JSAdd.FA = $Self.CreateLiteralNumber(Param,1);
                        JSAdd.FB = Arg;
                        Arg = JSAdd;
                      };
                    }}
                   else if ($tmp === 9) {
                    Int = LowRg.Index}
                   else if ($tmp === 4) {
                    Int = LowRg.Int}
                   else if ($tmp === 8) {
                    if (LowRg.S.length !== 1) {
                      ArgContext.Resolver.RaiseXExpectedButYFound(20170910213247,"char","string",Param)}
                     else Int = LowRg.S.charCodeAt(1 - 1);
                    Arg = $Self.ConvertCharToInt(Arg,Param,ArgContext);
                  } else {
                    $Self.RaiseNotSupported(Param,ArgContext,20170910170446,"");
                  };
                  if (Int !== 0) {
                    if ($lt137.isPrototypeOf(Arg) && (Arg.FValue.FValueType === 3)) {
                      Arg.FValue.SetAsNumber(Arg.FValue.GetAsNumber() - Int)}
                     else {
                      if (Int > 0) {
                        JSAdd = $Self.CreateElement($lt206,Param);
                        JSAdd.FA = Arg;
                        JSAdd.FB = $Self.CreateLiteralNumber(Param,Int);
                        Arg = JSAdd;
                      } else {
                        JSAdd = $Self.CreateElement($lt226,Param);
                        JSAdd.FA = Arg;
                        JSAdd.FB = $Self.CreateLiteralNumber(Param,-Int);
                        Arg = JSAdd;
                      };
                    };
                  };
                } finally {
                  $lp17({get: function () {
                      return LowRg;
                    }, set: function (v) {
                      LowRg = v;
                    }});
                };
              };
              ArgList.Add(Arg);
              Arg = null;
              ArgNo += 1;
              if (ArgNo > rtl.length(El.Params)) $Self.RaiseInconsistency(20170206180553,El);
            };
            if (ArgNo === rtl.length(El.Params)) break;
            ArrayEl = rtl.as(AContext.Resolver.ResolveAliasType(ArrayEl.ElType,true),$lt107);
          } while (!(ArrayEl === null));
          IsRangeCheck = NeedRangeCheck && (15 in AContext.ScannerBoolSwitches) && (AContext.Access in rtl.createSet(0,1));
          AssignContext = null;
          IsAssignRecord = false;
          if (AContext.Access === 1) {
            AssignContext = rtl.as(AContext.AccessContext,$lt39);
            if (AssignContext.Call !== null) $Self.RaiseNotSupported(El,AContext,20180424192155,"");
            IsAssignRecord = $lt81.isPrototypeOf(AssignContext.LeftResolved.LoTypeEl);
          };
          if (IsRangeCheck && !$lt85.IsRightSubIdent(El)) {
            CallEx = $Self.CreateCallExpression(El);
            Result = CallEx;
            if ((AContext.Access === 0) || IsAssignRecord) {
              CallEx.FExpr = $Self.CreatePrimitiveDotExpr($Self.GetBIName(144) + "." + $Self.GetBIName(69),El)}
             else CallEx.FExpr = $Self.CreatePrimitiveDotExpr($Self.GetBIName(144) + "." + $Self.GetBIName(70),El);
            CallEx.AddArg(ArrJS);
            ArrJS = null;
            for (var $l1 = 0, $end1 = ArgList.FCount - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              CallEx.AddArg(rtl.getObject(ArgList.Get(i)));
            };
            ArgList.Clear();
            if (AContext.Access === 1) {
              if (IsAssignRecord) {
                CallAssign = $Self.CreateCallExpression(El);
                CallAssign.FExpr = $Self.CreateDotNameExpr(El,CallEx,$Self.GetBIName(75));
                CallEx = CallAssign;
              };
              CallEx.AddArg(AssignContext.RightSide);
              AssignContext.RightSide = null;
              AssignContext.Call = CallEx;
              Result = CallEx;
            };
          } else {
            BracketEx = $Self.CreateElement($lt142,El);
            BracketEx.FMExpr = ArrJS;
            ArrJS = null;
            for (var $l2 = 0, $end2 = ArgList.FCount - 1; $l2 <= $end2; $l2++) {
              i = $l2;
              if (BracketEx.FName !== null) {
                Sub = BracketEx;
                BracketEx = $Self.CreateElement($lt142,El);
                BracketEx.FMExpr = Sub;
              };
              BracketEx.FName = rtl.getObject(ArgList.Get(i));
            };
            Result = BracketEx;
            ArgList.Clear();
            if (IsAssignRecord) {
              CallAssign = $Self.CreateCallExpression(El);
              CallAssign.FExpr = $Self.CreateDotNameExpr(El,Result,$Self.GetBIName(75));
              Result = CallAssign;
              CallAssign.AddArg(AssignContext.RightSide);
              AssignContext.RightSide = null;
              AssignContext.Call = CallAssign;
            };
          };
          ok = true;
        } finally {
          if (!ok) {
            ArrJS = rtl.freeLoc(ArrJS);
            for (var $l3 = 0, $end3 = ArgList.FCount - 1; $l3 <= $end3; $l3++) {
              i = $l3;
              rtl.getObject(ArgList.Get(i)).$destroy("Destroy");
            };
            Arg = rtl.freeLoc(Arg);
            Result = rtl.freeLoc(Result);
          };
          ArgList = rtl.freeLoc(ArgList);
        };
      };
      function IsJSBracketAccessorAndConvert(Prop, AccessEl, AContext, ChompPropName) {
        var Result$1 = false;
        var Bracket = null;
        var OldAccess = 0;
        var PathEl = null;
        var Ref = null;
        var Path = "";
        if (!AContext.Resolver.IsExternalBracketAccessor(AccessEl)) return false;
        Result$1 = true;
        if (AContext.Resolver.GetPasPropertyArgs(Prop).FCount !== 1) $Self.RaiseInconsistency(20170403003753,Prop);
        Bracket = $Self.CreateElement($lt142,El.Params[0]);
        try {
          PathEl = El.Value;
          if (ChompPropName) {
            if ($lt91.isPrototypeOf(PathEl) && (PathEl.Kind === 0) && $lt71.isPrototypeOf(PathEl.FData)) {
              Ref = PathEl.FData;
              Path = $Self.CreateReferencePath(Prop,AContext,0,false,Ref);
              if (Path !== "") Bracket.FMExpr = $Self.CreatePrimitiveDotExpr(Path,PathEl);
              PathEl = null;
            } else if ($lt85.isPrototypeOf(PathEl) && (PathEl.OpCode === 27) && $lt91.isPrototypeOf(PathEl.Right) && (PathEl.Right.Kind === 0)) {
              PathEl = PathEl.Left;
            } else $Self.RaiseNotSupported(El.Value,AContext,20170402225050,"");
          };
          if ((PathEl !== null) && (Bracket.FMExpr === null)) {
            OldAccess = AContext.Access;
            AContext.Access = 0;
            Bracket.FMExpr = $Self.ConvertExpression(PathEl,AContext);
            AContext.Access = OldAccess;
          };
          OldAccess = ArgContext.Access;
          ArgContext.Access = 0;
          Bracket.FName = $Self.ConvertExpression(El.Params[0],ArgContext);
          ArgContext.Access = OldAccess;
          Result = Bracket;
          Bracket = null;
        } finally {
          Bracket = rtl.freeLoc(Bracket);
        };
        return Result$1;
      };
      function ConvertIndexedProperty(Prop, AContext, CheckPath) {
        var Call = null;
        var i = 0;
        var TargetArg = null;
        var Elements = null;
        var Arg = null;
        var AccessEl = null;
        var AssignContext = null;
        var OldAccess = 0;
        var IndexExpr = null;
        var Value = null;
        var PropArgs = null;
        var aResolver = null;
        var TypeEl = null;
        var Bin = null;
        var CreateRefPathData = $lt45.$new();
        Result = null;
        AssignContext = null;
        aResolver = AContext.Resolver;
        Call = null;
        try {
          var $tmp = AContext.Access;
          if ($tmp === 1) {
            AccessEl = aResolver.GetPasPropertySetter(Prop)}
           else if ($tmp === 0) {
            AccessEl = aResolver.GetPasPropertyGetter(Prop)}
           else {
            $Self.RaiseNotSupported(El,AContext,20170213213317,"");
          };
          if (IsJSBracketAccessorAndConvert(Prop,AccessEl,AContext,true)) return;
          if (aResolver.IsHelperMethod(AccessEl)) {
            if (CheckPath) {
              Call = $Self.CreateCallHelperMethod(AccessEl,El.Value,AContext,false)}
             else Call = $Self.CreateCallHelperMethod(AccessEl,El,AContext,false);
          } else Call = $Self.CreateCallExpression(El);
          if (AContext.Access === 1) {
            AssignContext = rtl.as(AContext.AccessContext,$lt39);
            AssignContext.PropertyEl = Prop;
            AssignContext.Call = Call;
          };
          if (CheckPath && (Call.FExpr === null)) if (aResolver.IsNameExpr(El.Value)) {}
          else if ($lt85.isPrototypeOf(El.Value)) {
            Bin = El.Value;
            if (Bin.OpCode !== 27) $Self.RaiseNotSupported(El,AContext,20190116100510,"");
            CreateRefPathData.El = AccessEl;
            CreateRefPathData.Full = false;
            CreateRefPathData.Ref = GetValueReference();
            Call.FExpr = $Self.ConvertSubIdentExprCustom(Bin,AContext,rtl.createCallback($Self,"OnCreateReferencePathExpr"),CreateRefPathData);
          } else {
            $Self.RaiseNotSupported(El,AContext,20190116100431,"");
          };
          if (Call.FExpr === null) Call.FExpr = $Self.CreateReferencePathExpr(AccessEl,AContext,false,GetValueReference());
          Elements = Call.FArgs.FElements;
          OldAccess = ArgContext.Access;
          PropArgs = aResolver.GetPasPropertyArgs(Prop);
          i = 0;
          while (i < PropArgs.FCount) {
            TargetArg = rtl.getObject(PropArgs.Get(i));
            Arg = $Self.CreateProcCallArg(El.Params[i],TargetArg,ArgContext);
            Elements.AddElement().FExpr = Arg;
            i += 1;
          };
          while (i < PropArgs.FCount) {
            TargetArg = rtl.getObject(PropArgs.Get(i));
            if (TargetArg.ValueExpr === null) {
              $Self.RaiseInconsistency(20170206185126,TargetArg);
            };
            AContext.Access = 0;
            Arg = $Self.ConvertExpression(TargetArg.ValueExpr,ArgContext);
            Elements.AddElement().FExpr = Arg;
            i += 1;
          };
          IndexExpr = aResolver.GetPasPropertyIndex(Prop);
          if (IndexExpr !== null) {
            Value = aResolver.Eval(IndexExpr,rtl.createSet(0),true);
            try {
              Elements.AddElement().FExpr = $Self.ConvertConstValue(Value,ArgContext,El);
            } finally {
              $lp17({get: function () {
                  return Value;
                }, set: function (v) {
                  Value = v;
                }});
            };
          };
          if (AssignContext !== null) {
            Elements.AddElement().FExpr = AssignContext.RightSide;
            AssignContext.RightSide = null;
          };
          ArgContext.Access = OldAccess;
          if (AContext.Access === 0) {
            TypeEl = aResolver.GetPasPropertyType(Prop);
            if (aResolver.IsManagedJSType(TypeEl)) Call = $Self.CreateIntfRef(Call,AContext,El);
          };
          Result = Call;
        } finally {
          if (Result === null) {
            if ((AssignContext !== null) && (AssignContext.Call === Call)) AssignContext.Call = null;
            Call = rtl.freeLoc(Call);
          };
        };
      };
      function ConvertDefaultProperty(ResolvedEl, Prop) {
        var DotContext = null;
        var Left = null;
        var Right = null;
        var OldAccess = 0;
        var AccessEl = null;
        var SetAccessEl = null;
        var aResolver = null;
        aResolver = AContext.Resolver;
        var $tmp = AContext.Access;
        if ($tmp === 1) {
          AccessEl = aResolver.GetPasPropertySetter(Prop);
          if (IsJSBracketAccessorAndConvert(Prop,AccessEl,AContext,false)) return;
        } else if ($tmp === 0) {
          AccessEl = aResolver.GetPasPropertyGetter(Prop);
          if (IsJSBracketAccessorAndConvert(Prop,AccessEl,AContext,false)) return;
        } else if ($tmp === 2) {
          AccessEl = aResolver.GetPasPropertyGetter(Prop);
          SetAccessEl = aResolver.GetPasPropertySetter(Prop);
          if (aResolver.IsExternalBracketAccessor(AccessEl)) {
            if (aResolver.IsExternalBracketAccessor(SetAccessEl)) {
              if (!IsJSBracketAccessorAndConvert(Prop,AccessEl,AContext,false)) $Self.RaiseNotSupported(El,AContext,20170405090845,"");
              return;
            };
          };
          $Self.RaiseNotSupported(El,AContext,20170403000550,"");
        } else {
          $Self.RaiseNotSupported(El,AContext,20170402233834,"");
        };
        if (aResolver.IsHelperMethod(AccessEl)) {
          ConvertIndexedProperty(Prop,AContext,false);
          return;
        };
        DotContext = null;
        Left = null;
        Right = null;
        try {
          OldAccess = AContext.Access;
          AContext.Access = 0;
          Left = $Self.ConvertExpression(El.Value,AContext);
          AContext.Access = OldAccess;
          DotContext = $lt38.$create("Create$1",[El.Value,Left,AContext]);
          DotContext.LeftResolved.$assign(ResolvedEl);
          ConvertIndexedProperty(Prop,DotContext,false);
          if (DotContext.JS !== null) $Self.RaiseNotSupported(El,AContext,20180509134226,$lp16(DotContext.JS));
          Right = Result;
          Result = null;
        } finally {
          DotContext = rtl.freeLoc(DotContext);
          if (Right === null) Left = rtl.freeLoc(Left);
        };
        Result = $Self.CreateDotExpression(El,Left,Right,true);
      };
      var ResolvedEl = $lt84.$new();
      var TypeEl = null;
      var B = null;
      var OldAccess = 0;
      var aResolver = null;
      var Ref = null;
      if (El.Kind !== 11) this.RaiseInconsistency(20170209113713,El);
      ArgContext = AContext.GetNonDotContext();
      aResolver = AContext.Resolver;
      if (aResolver === null) {
        if (rtl.length(El.Params) > 1) this.RaiseNotSupported(El,AContext,20170207151325,"Cannot convert 2-dim arrays");
        B = this.CreateElement($lt142,El);
        try {
          OldAccess = AContext.Access;
          AContext.Access = 0;
          B.FMExpr = this.ConvertExpression(El.Value,AContext);
          OldAccess = ArgContext.Access;
          ArgContext.Access = 0;
          B.FName = this.ConvertExpression(El.Params[0],ArgContext);
          ArgContext.Access = OldAccess;
          Result = B;
        } finally {
          if (Result === null) B = rtl.freeLoc(B);
        };
        return Result;
      };
      aResolver.ComputeElement(El.Value,ResolvedEl,{},null);
      if ($lt71.isPrototypeOf(El.FData)) {
        Ref = El.FData;
        if ($lt74.isPrototypeOf(Ref.FDeclaration)) {
          ConvertDefaultProperty(ResolvedEl,Ref.FDeclaration);
          return Result;
        };
      };
      if (ResolvedEl.BaseType in $mod.btAllJSStrings) {
        ConvertStringBracket(ResolvedEl)}
       else if ($lt74.isPrototypeOf(ResolvedEl.IdentEl) && (aResolver.GetPasPropertyArgs(ResolvedEl.IdentEl).FCount > 0)) {
        ConvertIndexedProperty(ResolvedEl.IdentEl,AContext,true)}
       else if (ResolvedEl.BaseType === 2) {
        TypeEl = ResolvedEl.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt107) {
          ConvertArrayBracket(TypeEl)}
         else RaiseIllegalBrackets(20170206181220,ResolvedEl);
      } else RaiseIllegalBrackets(20170206180222,ResolvedEl);
      return Result;
    };
    this.ConvertFuncParams = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var aResolver = null;
      var DotBin = null;
      var Call = null;
      var Elements = null;
      function CreateFreeOrNewInstanceCall(Ref) {
        var JsArrLit = null;
        var LeftResolved = $lt84.$new();
        var OldAccess = 0;
        var Left = null;
        var DotExpr = null;
        var DotContext = null;
        if (DotBin !== null) {
          aResolver.ComputeElement(DotBin.Left,LeftResolved,{},null);
          OldAccess = AContext.Access;
          AContext.Access = 0;
          Left = $Self.ConvertExpression(DotBin.Left,AContext);
          if (Left === null) $Self.RaiseInconsistency(20190116132530,El);
          AContext.Access = OldAccess;
          DotContext = $lt38.$create("Create$1",[DotBin,Left,AContext]);
          try {
            DotContext.LeftResolved.$assign(LeftResolved);
            Call = $Self.CreateFreeOrNewInstanceExpr(Ref,DotContext);
            if (DotContext.JS !== null) $Self.RaiseNotSupported(El,AContext,20190116132748,"");
          } finally {
            DotContext = rtl.freeLoc(DotContext);
            if (Call === null) Left = rtl.freeLoc(Left);
          };
          DotExpr = $Self.CreateDotExpression(DotBin,Left,Call,true);
          if (DotExpr !== Call) $Self.RaiseNotSupported(El,AContext,20190116133841,"");
        };
        if (Call === null) Call = $Self.CreateFreeOrNewInstanceExpr(Ref,AContext);
        if ((3 in Ref.Flags) && (Ref.FDeclaration.FParent.$class.ClassType() === $lt72)) {
          JsArrLit = $Self.CreateElement($lt147,El);
          Call.AddArg(JsArrLit);
          Elements = JsArrLit.FElements;
        } else Elements = Call.FArgs.FElements;
      };
      function CreateShortRefApply(Value, TargetProcType) {
        var TargetProc = null;
        var aName = "";
        var LeftJS = null;
        var Ref = null;
        TargetProc = TargetProcType.FParent;
        aName = $Self.CreateStaticProcPath(TargetProc,AContext);
        Call.FExpr = $Self.CreatePrimitiveDotExpr(aName + ".apply",Value);
        if (DotBin !== null) {
          LeftJS = $Self.ConvertExpression(DotBin.Left,AContext);
          if (LeftJS === null) $Self.RaiseNotSupported(DotBin,AContext,20201030235816,"");
        } else if ($lt71.isPrototypeOf(Value.FData)) {
          Ref = Value.FData;
          aName = $Self.CreateReferencePath(TargetProc,AContext,0,false,Ref);
          LeftJS = $Self.CreatePrimitiveDotExpr(aName,Value);
          if (LeftJS === null) $Self.RaiseNotSupported(DotBin,AContext,20201031003202,"");
        } else $Self.RaiseNotSupported(DotBin,AContext,202010310032046,"");
        Elements.AddElement().FExpr = LeftJS;
      };
      function ConvertJSArrayLit(Param, ParamResolved) {
        var Result = null;
        var ParamExpr = null;
        var ArrayType = null;
        var i = 0;
        var JS = null;
        var SubParam = null;
        var ArrLit = null;
        Result = null;
        if (!$lt86.isPrototypeOf(Param)) return Result;
        ParamExpr = Param;
        if (ParamExpr.Kind !== 4) return Result;
        ArrayType = aResolver.IsArrayExpr(ParamExpr);
        if (ArrayType !== null) {
          Result = $Self.CreateArrayInit(ArrayType,Param,Param,AContext);
          return Result;
        } else if (ParamResolved.BaseType === 35) {
          ArrLit = $Self.CreateElement($lt147,Param);
          try {
            for (var $l = 0, $end = rtl.length(ParamExpr.Params) - 1; $l <= $end; $l++) {
              i = $l;
              SubParam = ParamExpr.Params[i];
              JS = $Self.ConvertExpression(SubParam,AContext);
              ArrLit.AddElement(JS);
            };
            Result = ArrLit;
          } finally {
            if (Result === null) ArrLit = rtl.freeLoc(ArrLit);
          };
        } else $Self.RaiseNotSupported(El,AContext,20220331114026,"");
        return Result;
      };
      var Decl = null;
      var Ref = null;
      var BuiltInProc = null;
      var TargetProc = null;
      var TargetProcType = null;
      var JsArrLit = null;
      var OldAccess = 0;
      var DeclResolved = $lt84.$new();
      var ParamResolved = $lt84.$new();
      var ValueResolved = $lt84.$new();
      var Param = null;
      var Value = null;
      var JSBaseType = 0;
      var C = null;
      var aName = "";
      var ArgName = "";
      var aClassTypeEl = null;
      var ParamTypeEl = null;
      var NeedIntfRef = false;
      var DestRange = null;
      var SrcRange = null;
      var LastArg = null;
      var CallArgs = null;
      Result = null;
      if (El.Kind !== 10) this.RaiseInconsistency(20170209113515,El);
      aResolver = AContext.Resolver;
      Call = null;
      Elements = null;
      TargetProcType = null;
      DotBin = null;
      Value = El.Value;
      if (!$lt71.isPrototypeOf(Value.FData) && (aResolver !== null) && $lt85.isPrototypeOf(Value) && (Value.OpCode === 27)) {
        DotBin = Value;
        Value = DotBin.Right;
      };
      if (!$lt71.isPrototypeOf(Value.FData) && (aResolver !== null) && $lt182.isPrototypeOf(Value)) {
        Value = Value.NameExpr;
      };
      if ($lt71.isPrototypeOf(Value.FData)) {
        Ref = Value.FData;
        Decl = Ref.FDeclaration;
        if ($lt76.isPrototypeOf(Decl)) Decl = aResolver.ResolveAliasType(Decl,true);
        C = Decl.$class.ClassType();
        if (C === $lt100) {
          if ($lt199.isPrototypeOf(Decl.FData)) {
            BuiltInProc = Decl.FData;
            var $tmp = BuiltInProc.BuiltIn;
            if ($tmp === 1) {
              Result = this.ConvertBuiltIn_Length(El,AContext)}
             else if ($tmp === 2) {
              Result = this.ConvertBuiltIn_SetLength(El,AContext)}
             else if ($tmp === 3) {
              Result = this.ConvertBuiltIn_ExcludeInclude(El,AContext,true)}
             else if ($tmp === 4) {
              Result = this.ConvertBuiltIn_ExcludeInclude(El,AContext,false)}
             else if ($tmp === 7) {
              Result = this.ConvertBuiltIn_Exit(El,AContext)}
             else if (($tmp === 8) || ($tmp === 9)) {
              Result = this.ConvertBuiltIn_IncDec(El,AContext)}
             else if ($tmp === 10) {
              Result = this.ConvertBuiltIn_Assigned(El,AContext)}
             else if ($tmp === 11) {
              Result = this.ConvertBuiltIn_Chr(El,AContext)}
             else if ($tmp === 12) {
              Result = this.ConvertBuiltIn_Ord(El,AContext)}
             else if ($tmp === 13) {
              Result = this.ConvertBuiltIn_LowHigh(El,AContext,true)}
             else if ($tmp === 14) {
              Result = this.ConvertBuiltIn_LowHigh(El,AContext,false)}
             else if ($tmp === 15) {
              Result = this.ConvertBuiltIn_PredSucc(El,AContext,true)}
             else if ($tmp === 16) {
              Result = this.ConvertBuiltIn_PredSucc(El,AContext,false)}
             else if ($tmp === 17) {
              Result = this.ConvertBuiltIn_StrProc(El,AContext)}
             else if ($tmp === 18) {
              Result = this.ConvertBuiltIn_StrFunc(El,AContext)}
             else if ($tmp === 19) {
              Result = this.ConvertBuiltIn_WriteStr(El,AContext)}
             else if ($tmp === 20) {
              Result = this.ConvertBuiltIn_Val(El,AContext)}
             else if ($tmp === 21) {
              Result = this.ConvertBuiltIn_LoHi(El,AContext,true)}
             else if ($tmp === 22) {
              Result = this.ConvertBuiltIn_LoHi(El,AContext,false)}
             else if ($tmp === 23) {
              Result = this.ConvertBuiltIn_ConcatArray(El,AContext)}
             else if ($tmp === 24) {
              Result = this.ConvertBuiltIn_ConcatString(El,AContext)}
             else if ($tmp === 25) {
              Result = this.ConvertBuiltIn_CopyArray(El,AContext)}
             else if ($tmp === 26) {
              Result = this.ConvertBuiltIn_InsertArray(El,AContext)}
             else if ($tmp === 27) {
              Result = this.ConvertBuiltIn_DeleteArray(El,AContext)}
             else if ($tmp === 28) {
              Result = this.ConvertBuiltIn_TypeInfo(El,AContext)}
             else if ($tmp === 29) {
              Result = this.ConvertBuiltIn_GetTypeKind(El,AContext)}
             else if ($tmp === 30) {
              Result = this.ConvertBuiltIn_Assert(El,AContext);
              if (Result === null) return Result;
            } else if ($tmp === 31) {
              Result = this.ConvertBuiltIn_New(El,AContext)}
             else if ($tmp === 32) {
              Result = this.ConvertBuiltIn_Dispose(El,AContext);
              if (Result === null) return Result;
            } else if ($tmp === 33) {
              Result = this.ConvertBuiltIn_Default(El,AContext)}
             else if ($tmp === 0) {
              var $tmp1 = BuiltInProc.FElement.FName;
              if ($tmp1 === "Debugger") {
                Result = this.ConvertBuiltIn_Debugger(El,AContext)}
               else if ($tmp1 === "AWait") {
                Result = this.ConvertBuiltIn_AWait(El,AContext)}
               else {
                this.RaiseNotSupported(El,AContext,20181126101801,"built in custom proc " + BuiltInProc.FElement.FName);
              };
            } else {
              this.RaiseNotSupported(El,AContext,20161130164955,"built in proc " + $lm3.ResolverBuiltInProcNames[BuiltInProc.BuiltIn]);
            };
            if (Result === null) this.RaiseInconsistency(20170210121932,El);
            return Result;
          } else if ($lt65.isPrototypeOf(Decl.FData)) {
            Result = this.ConvertTypeCastToBaseType(El,AContext,Decl.FData);
            return Result;
          } else this.RaiseNotSupported(El,AContext,20170325160624,"");
        } else if (aResolver.IsExternalClassConstructor(Decl)) {
          if (DotBin !== null) {
            Param = DotBin.Left}
           else Param = null;
          Result = this.ConvertExternalConstructor(Param,Ref,El,AContext);
          return Result;
        } else if (aResolver.IsTObjectFreeMethod(Value)) {
          if (DotBin !== null) {
            Result = this.ConvertTObjectFree_Bin(DotBin,Value,AContext)}
           else this.RaiseNotSupported(El,AContext,20190115215224,"");
          return Result;
        } else if (C.InheritsFrom($lt67)) {
          TargetProc = Decl;
          if (aResolver.IsHelperMethod(TargetProc)) {
            Result = this.CreateCallHelperMethod(TargetProc,El.Value,AContext,false);
            return Result;
          };
          if (aResolver.IsExternalBracketAccessor(TargetProc)) return this.CreateExternalBracketAccessorCall(El,AContext);
          TargetProcType = TargetProc.ProcType;
        } else if ((C === $lt72) || (C === $lt112) || (C === $lt81) || (C === $lt99) || (C === $lt101) || (C === $lt107) || (C === $lt95)) {
          Param = El.Params[0];
          aResolver.ComputeElement(Param,ParamResolved,{},null);
          ParamTypeEl = ParamResolved.LoTypeEl;
          if ((C === $lt81) && (ParamResolved.BaseType === 4) && $lt89.isPrototypeOf(ParamResolved.IdentEl)) {
            ArgName = this.TransformArgName(ParamResolved.IdentEl,AContext);
            Result = this.CreatePrimitiveDotExpr(ArgName,El);
            return Result;
          } else if (C === $lt72) {
            if (aResolver.IsExternalClass_Name(Decl,"Function")) {
              if ($lt87.isPrototypeOf(Param) && (Param.OpCode === 24)) {
                aResolver.ComputeElement(Param.Operand,ValueResolved,rtl.createSet(1),null);
                if ((ValueResolved.BaseType === 31) && $lt67.isPrototypeOf(ValueResolved.IdentEl)) {
                  Result = this.CreateReferencePathExpr(ValueResolved.IdentEl,AContext,false,null);
                  return Result;
                };
              };
            } else if (aResolver.IsExternalClass_Name(Decl,"Array")) {
              Result = ConvertJSArrayLit(Param,ParamResolved);
              if (Result !== null) return Result;
            };
          };
          Result = this.ConvertExpression(Param,AContext);
          if (C === $lt101) {
            DestRange = aResolver.EvalTypeRange(Decl,rtl.createSet(0));
            SrcRange = null;
            try {
              if (DestRange === null) this.RaiseNotSupported(El,AContext,20180424124708,"");
              SrcRange = aResolver.EvalTypeRange(ParamResolved.LoTypeEl,{});
              if (SrcRange === null) this.RaiseNotSupported(El,AContext,20180424125331,"");
              var $tmp2 = DestRange.Kind;
              if ($tmp2 === 10) {
                var $tmp3 = DestRange.ElKind;
                if (($tmp3 === 1) || ($tmp3 === 2)) {
                  var $tmp4 = SrcRange.Kind;
                  if ($tmp4 === 10) {
                    var $tmp5 = SrcRange.ElKind;
                    if (($tmp5 === 1) || ($tmp5 === 2)) {}
                    else {
                      this.RaiseNotSupported(El,AContext,20180424130705,"");
                    };
                  } else if ($tmp4 === 11) {}
                  else {
                    this.RaiseNotSupported(El,AContext,20180424125608,"");
                  };
                } else {
                  this.RaiseNotSupported(El,AContext,20180424125419,"");
                };
              } else {
                this.RaiseNotSupported(El,AContext,20180424124814,"");
              };
            } finally {
              $lp17({get: function () {
                  return SrcRange;
                }, set: function (v) {
                  SrcRange = v;
                }});
              $lp17({get: function () {
                  return DestRange;
                }, set: function (v) {
                  DestRange = v;
                }});
            };
          } else if (C === $lt72) {
            if ($lt72.isPrototypeOf(ParamTypeEl)) {
              var $tmp6 = Decl.ObjKind;
              if ($tmp6 === 1) {
                var $tmp7 = ParamTypeEl.ObjKind;
                if ($tmp7 === 1) {}
                else if ($tmp7 === 2) {
                  if (!Decl.IsExternal) {
                    Call = this.CreateCallExpression(El);
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(50)]);
                    Call.AddArg(Result);
                    Result = Call;
                    Call.AddArg(this.CreateReferencePathExpr(Decl,AContext,false,null));
                    return Result;
                  }}
                 else {
                  this.RaiseNotSupported(El,AContext,20180327221211,$lm1.ObjKindNames[ParamTypeEl.ObjKind]);
                };
              } else if ($tmp6 === 2) {
                var $tmp8 = ParamTypeEl.ObjKind;
                if ($tmp8 === 1) {
                  var $tmp9 = Decl.InterfaceType;
                  if ($tmp9 === 0) {
                    Call = this.CreateCallExpression(El);
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(55)]);
                    Call.AddArg(Result);
                    Result = Call;
                    Call.AddArg(this.CreateReferencePathExpr(Decl,AContext,false,null));
                    Result = this.CreateIntfRef(Result,AContext,El);
                  } else if ($tmp9 === 1) {
                    Call = this.CreateCallExpression(El);
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(46)]);
                    Call.AddArg(Result);
                    Result = Call;
                    Call.AddArg(this.CreateReferencePathExpr(Decl,AContext,false,null));
                  } else {
                    this.RaiseNotSupported(El,AContext,20180416102614,$lm1.InterfaceTypeNames[Decl.InterfaceType]);
                  };
                  return Result;
                } else if ($tmp8 === 2) {}
                else {
                  this.RaiseNotSupported(El,AContext,20180327221233,$lm1.ObjKindNames[ParamTypeEl.ObjKind]);
                };
              } else {
                this.RaiseNotSupported(El,AContext,20180327221130,$lm1.ObjKindNames[Decl.ObjKind]);
              };
            };
          };
          if (27 in AContext.ScannerBoolSwitches) {
            if ((C === $lt72) || (C === $lt112)) {
              if (C === $lt112) {
                aClassTypeEl = rtl.as(aResolver.ResolveAliasType(Decl.DestType,true),$lt72)}
               else aClassTypeEl = Decl;
              aName = this.CreateReferencePath(aClassTypeEl,AContext,2,false,null);
              Call = this.CreateCallExpression(El);
              Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(14)]);
              Call.AddArg(Result);
              Call.AddArg(this.CreatePrimitiveDotExpr(aName,Value));
              if (aClassTypeEl.IsExternal) {}
              else if (C === $lt112) {
                Call.AddArg(this.CreateLiteralNumber(Value,2))}
               else Call.AddArg(this.CreateLiteralNumber(Value,1));
              Result = Call;
            };
          } else if ((ParamResolved.BaseType === 1) && $lt21.isPrototypeOf(ParamTypeEl.FData)) {
            JSBaseType = ParamTypeEl.FData.JSBaseType;
            if (JSBaseType === 1) {
              if (((C === $lt72) && !Decl.IsExternal) || (C === $lt112) || (C === $lt81)) {
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(32)]);
                Call.AddArg(Result);
                Result = Call;
              };
            };
          };
          return Result;
        } else if (C.InheritsFrom($lt80)) {
          aResolver.ComputeElement(Decl,DeclResolved,rtl.createSet(4),null);
          if ($lt118.isPrototypeOf(DeclResolved.LoTypeEl)) {
            TargetProcType = DeclResolved.LoTypeEl}
           else this.RaiseNotSupported(El,AContext,20170217115244,"");
        } else if (C === $lt89) {
          aResolver.ComputeElement(Decl,DeclResolved,rtl.createSet(4),null);
          if ($lt118.isPrototypeOf(DeclResolved.LoTypeEl)) {
            TargetProcType = DeclResolved.LoTypeEl}
           else this.RaiseNotSupported(El,AContext,20170328224020,"");
        } else if ((C === $lt118) || (C === $lt93)) {
          aResolver.ComputeElement(Value,ValueResolved,rtl.createSet(1),null);
          if ($lt76.isPrototypeOf(ValueResolved.IdentEl) && $lt118.isPrototypeOf(aResolver.ResolveAliasType(ValueResolved.IdentEl,true))) {
            Param = El.Params[0];
            Result = this.ConvertExpression(Param,AContext);
            return Result;
          } else {
            TargetProcType = Decl;
          };
        } else {
          this.RaiseNotSupported(El,AContext,20170215114337,"");
        };
        if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,4),Ref.Flags),{})) {
          CreateFreeOrNewInstanceCall(Ref);
        };
      };
      NeedIntfRef = false;
      if ($lt93.isPrototypeOf(TargetProcType) && (aResolver !== null)) {
        if (aResolver.IsManagedJSType(TargetProcType.ResultEl.ResultType) && !TargetProcType.GetIsAsync()) {
          NeedIntfRef = true;
        };
      };
      if (Call === null) {
        Call = this.CreateCallExpression(El);
        Elements = Call.FArgs.FElements;
      };
      OldAccess = AContext.Access;
      try {
        AContext.Access = 0;
        if (Call.FArgs === null) {
          Call.FArgs = this.CreateElement($lt159,El);
          Elements = Call.FArgs.FElements;
        } else if (Elements === null) this.RaiseInconsistency(20180720154413,El);
        if (Call.FExpr === null) {
          if ((10 in this.FOptions) && aResolver.IsSpecializedNonStaticMethod(TargetProcType)) {
            CreateShortRefApply(Value,TargetProcType)}
           else if (DotBin !== null) {
            Call.FExpr = this.ConvertSubIdentExprCustom(DotBin,AContext,null,null)}
           else Call.FExpr = this.ConvertExpression(Value,AContext);
        };
        this.CreateProcedureCallArgs(Elements,El,TargetProcType,AContext);
        CallArgs = Call.FArgs;
        if ((Elements.GetCount() === 0) && (CallArgs.FElements.GetCount() > 0)) {
          LastArg = CallArgs.FElements.GetE(CallArgs.FElements.GetCount() - 1);
          if (!$lt147.isPrototypeOf(LastArg.FExpr)) this.RaiseNotSupported(El,AContext,20180720161317,"");
          JsArrLit = LastArg.FExpr;
          if (JsArrLit.FElements !== Elements) this.RaiseNotSupported(El,AContext,20180720161324,"");
          LastArg = rtl.freeLoc(LastArg);
        };
        if (CallArgs.FElements.GetCount() === 0) {
          CallArgs = rtl.freeLoc(CallArgs);
          Call.FArgs = null;
        };
        if (NeedIntfRef) Call = this.CreateIntfRef(Call,AContext,El);
        Result = Call;
      } finally {
        AContext.Access = OldAccess;
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.ConvertExternalConstructor = function (Left, Ref, ParamsExpr, AContext) {
      var Result = null;
      var Proc = null;
      var ExtName = "";
      var NewExpr = null;
      var LeftResolved = $lt84.$new();
      var OldAccess = 0;
      var ExtNameEl = null;
      var WithData = null;
      var PosEl = null;
      var aResolver = null;
      Result = null;
      aResolver = AContext.Resolver;
      NewExpr = null;
      ExtName = "";
      ExtNameEl = null;
      try {
        Proc = rtl.as(Ref.FDeclaration,$lt109);
        PosEl = Ref.FElement;
        if ($lp13(Proc.FName,"new") === 0) {
          if (Proc.LibrarySymbolName !== null) {
            ExtName = this.ComputeConstString(Proc.LibrarySymbolName,AContext,true);
            if (!$lp18(ExtName,"new")) ExtNameEl = this.CreatePrimitiveDotExpr(ExtName,PosEl);
          };
          if ((ExtNameEl === null) && (Left !== null)) {
            if (aResolver !== null) {
              aResolver.ComputeElement(Left,LeftResolved,{},null);
              if (LeftResolved.BaseType === 3) {
                Left = null;
              };
            };
            if (Left !== null) {
              OldAccess = AContext.Access;
              AContext.Access = 0;
              ExtNameEl = this.ConvertExpression(Left,AContext);
              AContext.Access = OldAccess;
            };
          };
          if (ExtNameEl === null) {
            if (Ref.WithExprScope !== null) {
              WithData = rtl.as(Ref.WithExprScope,$lt19);
              ExtName = WithData.WithVarName;
              if (ExtName === "") this.RaiseNotSupported(ParamsExpr,AContext,20190209092049,"");
            } else ExtName = rtl.as(Proc.FParent,$lt72).ExternalName;
            if (ExtName === "") this.DoError$2(20180511163944,4026,rtl.getResStr($mod,"sJSNewNotSupported"),[],ParamsExpr);
            ExtNameEl = this.CreatePrimitiveDotExpr(ExtName,PosEl);
          };
        } else {
          ExtName = "";
          if (aResolver !== null) ExtName = aResolver.ComputeConstString(Proc.LibrarySymbolName,true,true);
          if (ExtName === "{}") {
            Result = this.CreateElement($lt132,PosEl);
            return Result;
          };
          ExtNameEl = this.CreateReferencePathExpr(Proc,AContext,true,null);
        };
        NewExpr = this.CreateElement($lt143,PosEl);
        NewExpr.FMExpr = ExtNameEl;
        ExtNameEl = null;
        NewExpr.FArgs = this.CreateElement($lt159,PosEl);
        if (ParamsExpr !== null) this.CreateProcedureCallArgs(NewExpr.FArgs.FElements,ParamsExpr,Proc.ProcType,AContext);
        Result = NewExpr;
        NewExpr = null;
      } finally {
        ExtNameEl = rtl.freeLoc(ExtNameEl);
        NewExpr = rtl.freeLoc(NewExpr);
      };
      return Result;
    };
    this.ConvertTObjectFree_Bin = function (Bin, NameExpr, AContext) {
      var $Self = this;
      var Result = null;
      function CreateCallRTLFree(Obj, Prop) {
        var Result = null;
        var Call = null;
        Call = $Self.CreateCallExpression(Bin.Right);
        Call.FExpr = $Self.CreateMemberExpression([$Self.GetBIName(144),$Self.GetBIName(61)]);
        Call.FArgs.AddElement(Obj);
        Call.FArgs.AddElement(Prop);
        Result = Call;
        return Result;
      };
      var LeftJS = null;
      var Obj = null;
      var Prop = null;
      var Getter = null;
      var Setter = null;
      var DotExpr = null;
      var BracketJS = null;
      var aName = "";
      var Call = null;
      var AssignContext = null;
      Result = null;
      LeftJS = this.ConvertExpression(Bin.Left,AContext);
      try {
        if ($lt125.isPrototypeOf(LeftJS)) {
          aName = LeftJS.FName;
          if ($lp29(".",aName) > 0) this.RaiseInconsistency(20170516173832,Bin.Left);
          Getter = LeftJS;
          Setter = this.ClonePrimaryExpression(LeftJS,Bin.Left);
          Result = this.CreateCallRTLFreeLoc(Setter,Getter,NameExpr);
        } else if ($lt124.isPrototypeOf(LeftJS)) {
          DotExpr = LeftJS;
          Obj = DotExpr.FMExpr;
          DotExpr.FMExpr = null;
          Prop = this.CreateLiteralJSString(Bin.Right,DotExpr.FName);
          $lp({get: function () {
              return LeftJS;
            }, set: function (v) {
              LeftJS = v;
            }});
          Result = CreateCallRTLFree(Obj,Prop);
        } else if ($lt142.isPrototypeOf(LeftJS)) {
          BracketJS = LeftJS;
          Obj = BracketJS.FMExpr;
          BracketJS.FMExpr = null;
          Prop = BracketJS.FName;
          BracketJS.FName = null;
          $lp({get: function () {
              return LeftJS;
            }, set: function (v) {
              LeftJS = v;
            }});
          Result = CreateCallRTLFree(Obj,Prop);
        } else if ($lt144.isPrototypeOf(LeftJS)) {
          AssignContext = $lt39.$create("Create$1",[Bin.Left,null,AContext]);
          try {
            Call = this.CreateCallExpression(Bin.Left);
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(60)]);
            Call.FArgs.AddElement(LeftJS);
            LeftJS = null;
            AssignContext.RightSide = Call;
            AContext.Resolver.ComputeElement(Bin.Left,AssignContext.LeftResolved,rtl.createSet(1),null);
            AssignContext.RightResolved.$assign(AssignContext.LeftResolved);
            Result = this.CreateAssignStatement(Bin.Left,AssignContext);
          } finally {
            rtl.free(AssignContext,"RightSide");
            AssignContext = rtl.freeLoc(AssignContext);
          };
        } else {
          this.RaiseNotSupported(Bin.Left,AContext,20170516164659,"invalid scope for Free");
        };
      } finally {
        if (Result === null) LeftJS = rtl.freeLoc(LeftJS);
      };
      return Result;
    };
    this.ConvertTObjectFree_With = function (NameExpr, AContext) {
      var Result = null;
      var WithExprScope = null;
      var Getter = null;
      var Setter = null;
      Result = null;
      WithExprScope = rtl.as(NameExpr.FData.WithExprScope,$lt19);
      if (WithExprScope === null) this.RaiseInconsistency(20181027133210,NameExpr);
      if (AContext.Resolver.GetNewInstanceExpr(WithExprScope.Expr) !== null) {
        if (WithExprScope.WithVarName === "") this.RaiseNotSupported(NameExpr,AContext,20190209092220,"");
        Getter = this.CreatePrimitiveDotExpr(WithExprScope.WithVarName,WithExprScope.Expr);
        Setter = this.CreatePrimitiveDotExpr(WithExprScope.WithVarName,WithExprScope.Expr);
        Result = this.CreateCallRTLFreeLoc(Setter,Getter,NameExpr);
        return Result;
      };
      this.RaiseInconsistency(20170517092248,NameExpr);
      return Result;
    };
    this.ConvertTypeCastToBaseType = function (El, AContext, ToBaseTypeData) {
      var $Self = this;
      var Result = null;
      var to_bt = 0;
      var Param = null;
      var ParamResolved = $lt84.$new();
      var JSBaseType = 0;
      var JSBaseTypeData = null;
      function IsParamPas2JSBaseType() {
        var Result = false;
        var TypeEl = null;
        if (ParamResolved.BaseType !== 1) return false;
        TypeEl = ParamResolved.LoTypeEl;
        if (TypeEl.$class.ClassType() !== $lt100) return false;
        if (!$lt21.isPrototypeOf(TypeEl.FData)) return false;
        Result = true;
        JSBaseTypeData = TypeEl.FData;
        JSBaseType = JSBaseTypeData.JSBaseType;
        return Result;
      };
      var NotEqual = null;
      var CondExpr = null;
      var Call = null;
      var NotExpr = null;
      var AddExpr = null;
      var Int = 0;
      var aResolver = null;
      var from_bt = 0;
      var FromTypeEl = null;
      var ElTypeResolved = $lt84.$new();
      Result = null;
      Param = El.Params[0];
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(Param,ParamResolved,{},null);
      JSBaseTypeData = null;
      JSBaseType = 0;
      from_bt = ParamResolved.BaseType;
      FromTypeEl = ParamResolved.LoTypeEl;
      if (from_bt === 37) {
        from_bt = ParamResolved.SubType;
        aResolver.ComputeElement(FromTypeEl.RangeExpr.Left,ElTypeResolved,rtl.createSet(3),null);
        FromTypeEl = ElTypeResolved.LoTypeEl;
      };
      to_bt = ToBaseTypeData.BaseType;
      if (from_bt === to_bt) {
        Result = this.ConvertExpression(Param,AContext);
        return Result;
      };
      if (to_bt in $mod.btAllJSInteger) {
        if (from_bt in $mod.btAllJSInteger) {
          Result = this.ConvertExpression(Param,AContext);
          Result = this.ConvertIntToInt(Result,from_bt,to_bt,El,AContext);
          return Result;
        } else if (from_bt in $mod.btAllJSBooleans) {
          Result = this.ConvertExpression(Param,AContext);
          CondExpr = this.CreateElement($lt148,El);
          CondExpr.FA = Result;
          if (to_bt === 14) {
            CondExpr.FB = this.CreateLiteralNumber(El,10000)}
           else CondExpr.FB = this.CreateLiteralNumber(El,1);
          CondExpr.FC = this.CreateLiteralNumber(El,0);
          Result = CondExpr;
          return Result;
        } else if (from_bt in $mod.btAllJSChars) {
          Result = this.ConvertExpression(Param,AContext);
          Result = this.ConvertCharToInt(Result,El,AContext);
          Result = this.ConvertIntToInt(Result,21,to_bt,El,AContext);
          return Result;
        } else if (from_bt === 2) {
          if (FromTypeEl.$class.ClassType() === $lt99) {
            Result = this.ConvertExpression(Param,AContext);
            if (to_bt === 14) Result = this.CreateMulNumber(Param,Result,10000);
            return Result;
          };
        } else if (IsParamPas2JSBaseType()) {
          if (JSBaseType === 1) {
            Result = this.ConvertExpression(Param,AContext);
            if (to_bt === 14) Result = this.CreateMulNumber(Param,Result,10000);
            Result = this.CreateTruncFloor(El,Result,true);
            return Result;
          };
        } else if ((to_bt === 14) && (from_bt in $mod.btAllJSFloats)) {
          Result = this.ConvertExpression(Param,AContext);
          Result = this.CreateMulNumber(Param,Result,10000);
          return Result;
        };
      } else if (to_bt in $mod.btAllJSBooleans) {
        if (from_bt in $mod.btAllJSBooleans) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        } else if (from_bt in $mod.btAllJSInteger) {
          Result = this.ConvertExpression(Param,AContext);
          NotEqual = this.CreateElement($lt227,El);
          NotEqual.FA = Result;
          NotEqual.FB = this.CreateLiteralNumber(El,0);
          Result = NotEqual;
          return Result;
        } else if (IsParamPas2JSBaseType()) {
          if (JSBaseType === 1) {
            Result = this.ConvertExpression(Param,AContext);
            NotExpr = this.CreateElement($lt171,El);
            NotExpr.FA = this.CreateElement($lt228,El);
            NotExpr.FA.FA = Result;
            NotExpr.FA.FB = this.CreateLiteralBoolean(El,false);
            Result = NotExpr;
            return Result;
          };
        };
      } else if (to_bt in $mod.btAllJSFloats) {
        if (from_bt in rtl.unionSet($mod.btAllJSFloats,$mod.btAllJSInteger)) {
          Result = this.ConvertExpression(Param,AContext);
          if (ParamResolved.BaseType === 14) Result = this.CreateDivideNumber(El,Result,10000);
          return Result;
        } else if (IsParamPas2JSBaseType()) {
          if (JSBaseType === 1) {
            Result = this.ConvertExpression(Param,AContext);
            Call = this.CreateCallExpression(El);
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(31)]);
            Call.AddArg(Result);
            Result = Call;
            return Result;
          };
        };
      } else if (to_bt in $mod.btAllJSStrings) {
        if (from_bt in $mod.btAllJSStringAndChars) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        } else if (from_bt === 29) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        } else if (IsParamPas2JSBaseType()) {
          if (JSBaseType === 1) {
            Result = this.ConvertExpression(Param,AContext);
            AddExpr = this.CreateElement($lt226,El);
            AddExpr.FA = this.CreateLiteralString(El,"");
            AddExpr.FB = Result;
            Result = AddExpr;
            return Result;
          };
        };
      } else if (to_bt in rtl.createSet(5,6)) {
        if (from_bt in rtl.createSet(5,6)) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        } else if ((from_bt in $mod.btAllJSInteger) || ((from_bt === 2) && (FromTypeEl.$class.ClassType() === $lt99))) {
          Result = this.ConvertExpression(Param,AContext);
          if (this.IsLiteralInteger(Result,{get: function () {
              return Int;
            }, set: function (v) {
              Int = v;
            }}) && (Int >= 0) && (Int <= 0xffff)) {
            $lp({get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }});
            Result = this.CreateLiteralJSString(Param,String.fromCharCode(Int));
          } else {
            Result = this.CreateCallFromCharCode(Result,El);
          };
          return Result;
        } else if ((from_bt in rtl.unionSet($lm3.btArrayRangeTypes,rtl.createSet(37))) || (IsParamPas2JSBaseType() && (JSBaseType === 1))) {
          Result = this.ConvertExpression(Param,AContext);
          if (this.IsLiteralInteger(Result,{get: function () {
              return Int;
            }, set: function (v) {
              Int = v;
            }})) {
            if ((Int >= 0) && (Int <= 0xffff)) {
              $lp({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }});
              Result = this.CreateLiteralJSString(Param,String.fromCharCode(Int));
            } else {
              Result = this.CreateCallFromCharCode(Result,El);
            };
          } else {
            Call = this.CreateCallExpression(El);
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(30)]);
            Call.AddArg(Result);
            Result = Call;
          };
          return Result;
        };
      } else if (to_bt === 29) {
        if (IsParamPas2JSBaseType()) {
          if (JSBaseType === 1) {
            Result = this.ConvertExpression(Param,AContext);
            return Result;
          };
        } else if (from_bt in $mod.btAllJSStrings) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        } else if (from_bt === 2) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        };
      } else if ((to_bt === 1) && $lt21.isPrototypeOf(ToBaseTypeData)) {
        JSBaseType = ToBaseTypeData.JSBaseType;
        if (JSBaseType === 1) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        };
      };
      this.RaiseNotSupported(El,AContext,20170325161150,"");
      return Result;
    };
    this.ConvertArrayOrSetLiteral = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var Call = null;
      var ArgContext = null;
      function AddArg(Expr) {
        Call.AddArg($Self.CreateSetLiteralElement(Expr,ArgContext));
      };
      var i = 0;
      var ArgEl = null;
      var aResolver = null;
      var ArrayType = null;
      if (El.Kind !== 4) this.RaiseInconsistency(20170209112737,El);
      if (AContext.Access !== 0) this.DoError$2(20170209112926,4008,rtl.getResStr($mod,"sCantWriteSetLiteral"),[],El);
      aResolver = AContext.Resolver;
      if (aResolver !== null) {
        ArrayType = aResolver.IsArrayExpr(El);
        if (ArrayType !== null) {
          Result = this.CreateArrayInit(ArrayType,El,El,AContext);
          return Result;
        };
      };
      if (rtl.length(El.Params) === 0) {
        Result = this.CreateElement($lt132,El)}
       else {
        Result = null;
        ArgContext = AContext.GetNonDotContext();
        Call = this.CreateCallExpression(El);
        try {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(102)]);
          for (var $l = 0, $end = rtl.length(El.Params) - 1; $l <= $end; $l++) {
            i = $l;
            ArgEl = El.Params[i];
            if ((ArgEl.$class.ClassType() === $lt85) && (ArgEl.Kind === 7)) {
              Call.AddArg(this.CreateLiteralNull(ArgEl));
              AddArg(ArgEl.Left);
              AddArg(ArgEl.Right);
            } else AddArg(ArgEl);
          };
          Result = Call;
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
      };
      return Result;
    };
    this.ConvertBuiltIn_Length = function (El, AContext) {
      var Result = null;
      var Arg = null;
      var Param = null;
      var RangeEl = null;
      var ParamResolved = $lt84.$new();
      var Ranges = [];
      var Call = null;
      var RgLen = 0;
      Result = null;
      Param = El.Params[0];
      AContext.Resolver.ComputeElement(Param,ParamResolved,{},null);
      if (ParamResolved.BaseType === 2) {
        if ($lt107.isPrototypeOf(ParamResolved.LoTypeEl)) {
          Ranges = ParamResolved.LoTypeEl.Ranges;
          if (rtl.length(Ranges) > 0) {
            if (rtl.length(Ranges) > 1) this.RaiseNotSupported(El,AContext,20170223131042,"");
            RangeEl = Ranges[0];
            RgLen = AContext.Resolver.GetRangeLength(RangeEl);
            Result = this.CreateLiteralNumber(El,RgLen);
            return Result;
          } else {
            Result = this.ConvertExpression(El.Params[0],AContext);
            Call = this.CreateCallExpression(El);
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(7)]);
            Call.AddArg(Result);
            Result = Call;
            return Result;
          };
        };
      };
      Arg = this.ConvertExpression(Param,AContext);
      Result = this.CreateDotNameExpr(El,Arg,"length");
      return Result;
    };
    this.ConvertBuiltIn_SetLength = function (El, AContext) {
      var Result = null;
      var Param0 = null;
      var Range = null;
      var ResolvedParam0 = $lt84.$new();
      var RangeResolved = $lt84.$new();
      var ArrayType = null;
      var Call = null;
      var ValInit = null;
      var AssignContext = null;
      var ElType = null;
      var TypeEl = null;
      var i = 0;
      var aResolver = null;
      var DimSize = 0;
      var StaticDims = null;
      var Lit = null;
      var ArrScope = null;
      var aManaged = false;
      Result = null;
      Param0 = El.Params[0];
      if (AContext.Access !== 0) this.RaiseInconsistency(20170213213621,El);
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(Param0,ResolvedParam0,rtl.createSet(1),null);
      TypeEl = ResolvedParam0.LoTypeEl;
      if ($lt107.isPrototypeOf(TypeEl)) {
        ArrayType = TypeEl;
        AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
        StaticDims = null;
        try {
          aResolver.ComputeElement(Param0,AssignContext.LeftResolved,rtl.createSet(1),null);
          AssignContext.RightResolved.$assign(ResolvedParam0);
          Call = this.CreateCallExpression(El);
          AssignContext.RightSide = Call;
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(11)]);
          Call.AddArg(this.ConvertExpression(Param0,AContext));
          for (var $l = 3, $end = rtl.length(El.Params); $l <= $end; $l++) {
            i = $l;
            ElType = aResolver.ResolveAliasType(aResolver.GetArrayElType(ArrayType),true);
            ArrayType = rtl.as(ElType,$lt107);
          };
          ArrScope = rtl.as(ArrayType.FData,$lt17);
          aManaged = (ArrScope !== null) && ArrScope.Managed;
          ElType = aResolver.ResolveAliasType(aResolver.GetArrayElType(ArrayType),true);
          while ((ElType.$class.ClassType() === $lt107) && (rtl.length(ElType.Ranges) > 0)) {
            ArrayType = rtl.as(ElType,$lt107);
            for (var $l1 = 0, $end1 = rtl.length(ArrayType.Ranges) - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              Range = ArrayType.Ranges[i];
              DimSize = aResolver.GetRangeLength(Range);
              if (DimSize === 0) {
                aResolver.ComputeElement(Range,RangeResolved,rtl.createSet(3),null);
                this.RaiseNotSupported(Range,AContext,20190614171520,$lp37(RangeResolved));
              };
              Lit = this.CreateLiteralNumber(El,DimSize);
              if (StaticDims === null) StaticDims = $lt179.$create("Create$3",[true]);
              StaticDims.Add$1(Lit);
            };
            ElType = aResolver.ResolveAliasType(aResolver.GetArrayElType(ArrayType),true);
          };
          if (ElType.$class.ClassType() === $lt81) {
            ValInit = this.CreateReferencePathExpr(ElType,AContext,false,null)}
           else if (aManaged) {
            ValInit = this.CreateLiteralJSString(Param0,this.GetBIName(123))}
           else ValInit = this.CreateValInit(ElType,null,Param0,AContext);
          Call.AddArg(ValInit);
          for (var $l2 = 1, $end2 = rtl.length(El.Params) - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            Call.AddArg(this.ConvertExpression(El.Params[i],AContext));
          };
          if (StaticDims !== null) {
            Call.AddArg(this.CreateLiteralJSString(El,"s"));
            for (var $l3 = 0, $end3 = StaticDims.GetCount() - 1; $l3 <= $end3; $l3++) {
              i = $l3;
              Call.AddArg(StaticDims.GetItem(i));
            };
            StaticDims.FFreeObjects = false;
          };
          Result = this.CreateAssignStatement(Param0,AssignContext);
        } finally {
          rtl.free(AssignContext,"RightSide");
          AssignContext = rtl.freeLoc(AssignContext);
          StaticDims = rtl.freeLoc(StaticDims);
        };
      } else if (ResolvedParam0.BaseType in $mod.btAllJSStrings) {
        AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
        try {
          aResolver.ComputeElement(Param0,AssignContext.LeftResolved,rtl.createSet(1),null);
          AssignContext.RightResolved.$assign(AssignContext.LeftResolved);
          Call = this.CreateCallExpression(El);
          AssignContext.RightSide = Call;
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(115)]);
          Call.AddArg(this.ConvertExpression(Param0,AContext));
          Call.AddArg(this.ConvertExpression(El.Params[1],AContext));
          Result = this.CreateAssignStatement(Param0,AssignContext);
        } finally {
          rtl.free(AssignContext,"RightSide");
          AssignContext = rtl.freeLoc(AssignContext);
        };
      } else this.RaiseNotSupported(El.Value,AContext,20170130141026,"setlength " + $lp37(ResolvedParam0));
      return Result;
    };
    this.ConvertBuiltIn_ExcludeInclude = function (El, AContext, IsInclude) {
      var Result = null;
      var Call = null;
      var Param0 = null;
      var AssignContext = null;
      var FunName = "";
      Result = null;
      Param0 = El.Params[0];
      AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
      try {
        AContext.Resolver.ComputeElement(Param0,AssignContext.LeftResolved,rtl.createSet(1),null);
        AssignContext.RightResolved.$assign(AssignContext.LeftResolved);
        Call = this.CreateCallExpression(El);
        AssignContext.RightSide = Call;
        if (IsInclude) {
          FunName = this.GetBIName(107)}
         else FunName = this.GetBIName(105);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),FunName]);
        Call.AddArg(this.ConvertExpression(Param0,AContext));
        Call.AddArg(this.ConvertExpression(El.Params[1],AContext));
        Result = this.CreateAssignStatement(Param0,AssignContext);
      } finally {
        rtl.free(AssignContext,"RightSide");
        AssignContext = rtl.freeLoc(AssignContext);
      };
      return Result;
    };
    this.ConvertBuiltInContinue = function (El, AContext) {
      var Result = null;
      if (AContext === null) ;
      Result = this.CreateElement($lt229,El);
      return Result;
    };
    this.ConvertBuiltInBreak = function (El, AContext) {
      var Result = null;
      if (AContext === null) ;
      Result = this.CreateElement($lt128,El);
      return Result;
    };
    this.ConvertBuiltIn_Exit = function (El, AContext) {
      var Result = null;
      var ParentEl = null;
      var ImplProcScope = null;
      var ResultVarName = "";
      var FuncContext = null;
      var AssignSt = null;
      var St = null;
      var ImplProc = null;
      var DeclProc = null;
      var ImplTry = null;
      var ResultIsRead = false;
      var aManaged = false;
      var ResultEl = null;
      var TypeEl = null;
      var Call = null;
      ParentEl = El.FParent;
      while ((ParentEl !== null) && !$lt67.isPrototypeOf(ParentEl)) ParentEl = ParentEl.FParent;
      ImplProc = ParentEl;
      ResultVarName = "";
      ResultEl = null;
      aManaged = false;
      if (ImplProc !== null) {
        ImplProcScope = rtl.as(ImplProc.FData,$lt16);
        DeclProc = ImplProcScope.DeclarationProc;
        if (DeclProc === null) DeclProc = ImplProc;
        if ($lt93.isPrototypeOf(DeclProc.ProcType)) {
          ResultVarName = ImplProcScope.ResultVarName;
          if (ResultVarName === "") ResultVarName = $lm3.ResolverResultVar;
          ResultEl = DeclProc.ProcType.ResultEl;
          TypeEl = AContext.Resolver.ResolveAliasType(ResultEl.ResultType,true);
          aManaged = AContext.Resolver.IsManagedJSType(TypeEl);
        };
      } else DeclProc = null;
      FuncContext = AContext.GetFunctionContext();
      Result = this.CreateElement($lt160,El);
      if ($lt86.isPrototypeOf(El) && (rtl.length(El.Params) > 0)) {
        ResultIsRead = false;
        if (ResultVarName !== "") {
          ParentEl = El.FParent;
          while (ParentEl !== ImplProc) {
            if ($lt230.isPrototypeOf(ParentEl)) {
              ImplTry = ParentEl;
              if ($lt215.isPrototypeOf(ImplTry.FinallyExcept)) {
                if (AContext.Resolver.ImplBlockReadsDecl(ImplTry.FinallyExcept,ResultEl)) {
                  ResultIsRead = true;
                  break;
                };
              };
            };
            ParentEl = ParentEl.FParent;
          };
        };
        if (aManaged) {
          FuncContext.ResultNeedsIntfRelease = true;
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(51)]);
          Call.AddArg(this.CreatePrimitiveDotExpr(ResultVarName,El));
          Call.AddArg(this.ConvertExpression(El.Params[0],AContext));
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = this.CreatePrimitiveDotExpr(ResultVarName,El);
          AssignSt.FExpr = Call;
          Result.FExpr = this.CreatePrimitiveDotExpr(ResultVarName,El);
          St = this.CreateElement($lt129,El);
          St.FA = AssignSt;
          St.FB = Result;
          Result = St;
        } else if (ResultIsRead) {
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = this.CreatePrimitiveDotExpr(ResultVarName,El);
          AssignSt.FExpr = this.ConvertExpression(El.Params[0],AContext);
          Result.FExpr = this.CreatePrimitiveDotExpr(ResultVarName,El);
          St = this.CreateElement($lt129,El);
          St.FA = AssignSt;
          St.FB = Result;
          Result = St;
        } else {
          Result.FExpr = this.ConvertExpression(El.Params[0],AContext);
        };
      } else {
        if (ResultVarName !== "") {
          Result.FExpr = this.CreatePrimitiveDotExpr(ResultVarName,El);
        };
      };
      if ((FuncContext !== null) && FuncContext.ResultNeedsIntfRelease) {
        AssignSt = this.CreateElement($lt133,El);
        AssignSt.FLHS = this.CreatePrimitiveDotExpr(this.GetBIName(140),El);
        AssignSt.FExpr = this.CreateLiteralBoolean(El,true);
        St = this.CreateElement($lt129,El);
        St.FA = AssignSt;
        St.FB = Result;
        Result = St;
      };
      return Result;
    };
    this.ConvertBuiltIn_IncDec = function (El, AContext) {
      var Result = null;
      var AssignSt = null;
      var Expr = null;
      var SrcEl = null;
      var ExprResolved = $lt84.$new();
      var ExprArg = null;
      var LHS = null;
      var ValueJS = null;
      var Call = null;
      var IsInc = false;
      var AddJS = null;
      var AssignContext = null;
      var aResolver = null;
      Result = null;
      aResolver = AContext.Resolver;
      Expr = aResolver.GetRightMostExpr(El.Value);
      if (!$lt91.isPrototypeOf(Expr)) this.RaiseNotSupported(Expr,AContext,20200620113218,"");
      IsInc = $lp13(Expr.Value,"inc") === 0;
      Expr = El.Params[0];
      aResolver.ComputeElement(Expr,ExprResolved,{},null);
      if (rtl.length(El.Params) === 1) {
        ValueJS = this.CreateLiteralNumber(El,1)}
       else ValueJS = this.ConvertExpression(El.Params[1],AContext);
      SrcEl = El.Value;
      AssignSt = null;
      Call = null;
      AssignContext = null;
      LHS = null;
      try {
        if ($lt89.isPrototypeOf(ExprResolved.IdentEl)) {
          ExprArg = ExprResolved.IdentEl;
          if (ExprArg.Access in rtl.createSet(2,3)) {
            Call = this.CreateCallExpression(SrcEl);
            Call.FExpr = this.CreateDotNameExpr(SrcEl,this.CreateIdentifierExpr(ExprResolved.IdentEl,AContext),$impl.TempRefObjSetterName);
            if (IsInc) {
              AddJS = this.CreateElement($lt226,SrcEl)}
             else AddJS = this.CreateElement($lt206,SrcEl);
            Call.AddArg(AddJS);
            AddJS.FA = this.CreateElement($lt144,SrcEl);
            AddJS.FA.FExpr = this.CreateDotNameExpr(SrcEl,this.CreateIdentifierExpr(ExprResolved.IdentEl,AContext),$impl.TempRefObjGetterName);
            AddJS.FB = ValueJS;
            ValueJS = null;
            Result = Call;
            return Result;
          };
        } else if ($lt74.isPrototypeOf(ExprResolved.IdentEl)) {
          this.RaiseNotSupported(Expr,AContext,20170501151316,"");
        };
        AssignContext = $lt39.$create("Create$1",[Expr,null,AContext]);
        aResolver.ComputeElement(Expr,AssignContext.LeftResolved,rtl.createSet(1),null);
        $lp22(AssignContext.RightResolved,AssignContext.LeftResolved.BaseType,AssignContext.LeftResolved.LoTypeEl,AssignContext.LeftResolved.HiTypeEl,Expr,rtl.createSet(0));
        AssignContext.RightSide = ValueJS;
        ValueJS = null;
        LHS = this.ConvertExpression(Expr,AssignContext);
        if (AssignContext.Call !== null) {
          this.RaiseNotSupported(El,AContext,20181101154351,"");
        } else {
          if (AssignContext.RightSide === null) this.RaiseInconsistency(20180622211919,El);
        };
        if (IsInc) {
          AssignSt = this.CreateElement($lt195,SrcEl)}
         else AssignSt = this.CreateElement($lt196,SrcEl);
        AssignSt.FLHS = LHS;
        LHS = null;
        AssignSt.FExpr = AssignContext.RightSide;
        AssignContext.RightSide = null;
        Result = AssignSt;
      } finally {
        ValueJS = rtl.freeLoc(ValueJS);
        if (Result === null) {
          AssignSt = rtl.freeLoc(AssignSt);
          Call = rtl.freeLoc(Call);
          LHS = rtl.freeLoc(LHS);
        };
        if (AssignContext !== null) {
          rtl.free(AssignContext,"RightSide");
          AssignContext = rtl.freeLoc(AssignContext);
        };
      };
      return Result;
    };
    this.ConvertBuiltIn_Assigned = function (El, AContext) {
      var Result = null;
      var NE = null;
      var Param = null;
      var ParamResolved = $lt84.$new();
      var C = null;
      var GT = null;
      var Call = null;
      Result = null;
      if (AContext.Resolver === null) this.RaiseInconsistency(20170210105235,El);
      Param = El.Params[0];
      AContext.Resolver.ComputeElement(Param,ParamResolved,rtl.createSet(2),null);
      if (ParamResolved.BaseType === 29) {
        Result = this.ConvertExpression(Param,AContext);
        NE = this.CreateElement($lt227,El);
        NE.FA = Result;
        NE.FB = this.CreateLiteralNull(El);
        Result = NE;
      } else if (ParamResolved.BaseType === 2) {
        C = ParamResolved.LoTypeEl.$class.ClassType();
        if ((C === $lt72) || (C === $lt112) || C.InheritsFrom($lt118)) {
          Result = this.ConvertExpression(Param,AContext);
          NE = this.CreateElement($lt227,El);
          NE.FA = Result;
          NE.FB = this.CreateLiteralNull(El);
          Result = NE;
        } else if (C === $lt107) {
          Result = this.ConvertExpression(Param,AContext);
          GT = this.CreateElement($lt180,El);
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(7)]);
          Call.AddArg(Result);
          GT.FA = Call;
          GT.FB = this.CreateLiteralNumber(El,0);
          Result = GT;
        } else this.RaiseNotSupported(El,AContext,20170328124606,"");
      };
      return Result;
    };
    this.ConvertBuiltIn_Chr = function (El, AContext) {
      var Result = null;
      var ParamResolved = $lt84.$new();
      var Param = null;
      Result = null;
      if (AContext.Resolver === null) this.RaiseInconsistency(20170325185847,El);
      Param = El.Params[0];
      AContext.Resolver.ComputeElement(Param,ParamResolved,{},null);
      if (ParamResolved.BaseType in $mod.btAllJSInteger) {
        Result = this.ConvertExpression(Param,AContext);
        Result = this.CreateCallFromCharCode(Result,El);
        return Result;
      };
      this.DoError$2(20170325185906,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"integer",18,AContext.Resolver.GetResolverResultDescription(ParamResolved,false)),Param);
      return Result;
    };
    this.ConvertBuiltIn_Ord = function (El, AContext) {
      var $Self = this;
      var Result = null;
      function CheckOrdConstant(aResolver, Param) {
        var Result = null;
        var ParamValue = null;
        var OrdValue = null;
        Result = null;
        OrdValue = null;
        ParamValue = aResolver.Eval(Param,{},true);
        if (ParamValue === null) return Result;
        try {
          OrdValue = aResolver.fExprEvaluator.OrdValue(ParamValue,El);
          if (OrdValue === ParamValue) ParamValue = null;
          if (OrdValue !== null) {
            Result = $Self.ConvertConstValue(OrdValue,AContext,El);
            return Result;
          };
        } finally {
          $lp17({get: function () {
              return ParamValue;
            }, set: function (v) {
              ParamValue = v;
            }});
          $lp17({get: function () {
              return OrdValue;
            }, set: function (v) {
              OrdValue = v;
            }});
        };
        return Result;
      };
      var ParamResolved = $lt84.$new();
      var SubParamResolved = $lt84.$new();
      var Param = null;
      var SubParam = null;
      var Call = null;
      var SubParams = null;
      var SubParamJS = null;
      var Minus = null;
      var Add = null;
      var aResolver = null;
      var bt = 0;
      var C = null;
      Result = null;
      aResolver = AContext.Resolver;
      if (aResolver === null) this.RaiseInconsistency(20170210105235,El);
      Param = El.Params[0];
      aResolver.ComputeElement(Param,ParamResolved,{},null);
      bt = ParamResolved.BaseType;
      if (bt === 37) bt = ParamResolved.SubType;
      if (bt in rtl.createSet(5,6)) {
        if ($lt86.isPrototypeOf(Param)) {
          SubParams = Param;
          if (SubParams.Kind === 11) {
            SubParam = SubParams.Value;
            AContext.Resolver.ComputeElement(SubParam,SubParamResolved,{},null);
            if (SubParamResolved.BaseType in $mod.btAllJSStrings) {
              SubParamJS = this.ConvertExpression(SubParam,AContext);
              Call = null;
              try {
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreateDotNameExpr(El,SubParamJS,"charCodeAt");
                Minus = this.CreateElement($lt206,Param);
                Call.AddArg(Minus);
                if (rtl.length(SubParams.Params) !== 1) this.RaiseInconsistency(20170405231706,El);
                Minus.FA = this.ConvertExpression(SubParams.Params[0],AContext);
                Minus.FB = this.CreateLiteralNumber(Param,1);
                Result = Call;
              } finally {
                if (Result === null) Call = rtl.freeLoc(Call);
              };
              return Result;
            };
          };
        } else {
          Result = CheckOrdConstant(aResolver,Param);
          if (Result !== null) return Result;
        };
        Result = this.ConvertExpression(Param,AContext);
        Result = this.CreateCallCharCodeAt(Result,0,El);
        return Result;
      } else if (bt in $mod.btAllJSBooleans) {
        Result = CheckOrdConstant(aResolver,Param);
        if (Result !== null) return Result;
        Result = this.ConvertExpression(Param,AContext);
        Add = this.CreateElement($lt226,El);
        Add.FA = Result;
        Add.FB = this.CreateLiteralNumber(El,0);
        Result = Add;
        return Result;
      } else if (bt in $mod.btAllJSInteger) {
        Result = CheckOrdConstant(aResolver,Param);
        if (Result !== null) return Result;
        Result = this.ConvertExpression(Param,AContext);
        return Result;
      } else if (bt === 2) {
        C = ParamResolved.LoTypeEl.$class.ClassType();
        if ((C === $lt99) || (C === $lt101)) {
          Result = this.ConvertExpression(Param,AContext);
          return Result;
        };
      };
      this.DoError$2(20170210105339,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"enum",18,AContext.Resolver.GetResolverResultDescription(ParamResolved,false)),Param);
      return Result;
    };
    this.ConvertBuiltIn_LowHigh = function (El, AContext, IsLow) {
      var $Self = this;
      var Result = null;
      function CreateEnumValue(TypeEl) {
        var EnumValue = null;
        if (IsLow) {
          EnumValue = rtl.getObject(TypeEl.Values.Get(0))}
         else EnumValue = rtl.getObject(TypeEl.Values.Get(TypeEl.Values.FCount - 1));
        Result = $Self.CreateReferencePathExpr(EnumValue,AContext,false,null);
      };
      var Param = null;
      var aResolver = null;
      var ResolvedEl = $lt84.$new();
      var TypeEl = null;
      var Ranges = [];
      var Value = null;
      var Call = null;
      var MinusExpr = null;
      var MinVal = 0;
      var MaxVal = 0;
      var bt = 0;
      Result = null;
      if (AContext.Resolver === null) this.RaiseInconsistency(20170210120659,El);
      Param = El.Params[0];
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(Param,ResolvedEl,{},null);
      bt = ResolvedEl.BaseType;
      if (bt === 37) bt = ResolvedEl.SubType;
      var $tmp = bt;
      if ($tmp === 2) {
        TypeEl = ResolvedEl.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt101) {
          if (IsLow) {
            Result = this.ConvertElement(TypeEl.RangeExpr.Left,AContext)}
           else Result = this.ConvertElement(TypeEl.RangeExpr.Right,AContext);
          return Result;
        } else if (TypeEl.$class.ClassType() === $lt99) {
          CreateEnumValue(TypeEl);
          return Result;
        } else if (TypeEl.$class.ClassType() === $lt117) {
          if (TypeEl.EnumType !== null) {
            TypeEl = TypeEl.EnumType;
            CreateEnumValue(TypeEl);
            return Result;
          };
        } else if (TypeEl.$class.ClassType() === $lt107) {
          Ranges = TypeEl.Ranges;
          if (IsLow) {
            if (rtl.length(Ranges) === 0) {
              Result = this.CreateLiteralNumber(El,0);
              return Result;
            } else {
              Value = AContext.Resolver.EvalRangeLimit(Ranges[0],rtl.createSet(0),true,El);
              if (Value === null) this.RaiseNotSupported(El,AContext,20170910160817,"");
              try {
                Result = this.ConvertConstValue(Value,AContext,Param);
              } finally {
                $lp17({get: function () {
                    return Value;
                  }, set: function (v) {
                    Value = v;
                  }});
              };
              return Result;
            };
          } else {
            if (rtl.length(Ranges) === 0) {
              Result = this.ConvertExpression(Param,AContext);
              Call = this.CreateCallExpression(El);
              Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(7)]);
              Call.AddArg(Result);
              MinusExpr = this.CreateElement($lt206,El);
              MinusExpr.FA = Call;
              MinusExpr.FB = this.CreateLiteralNumber(El,1);
              Result = MinusExpr;
              return Result;
            } else {
              Value = AContext.Resolver.EvalRangeLimit(Ranges[0],rtl.createSet(0),false,El);
              if (Value === null) this.RaiseNotSupported(El,AContext,20170910161555,"");
              try {
                Result = this.ConvertConstValue(Value,AContext,Param);
              } finally {
                $lp17({get: function () {
                    return Value;
                  }, set: function (v) {
                    Value = v;
                  }});
              };
              return Result;
            };
          };
        };
      } else if (($tmp === 15) || ($tmp === 16) || ($tmp === 17) || ($tmp === 18)) {
        if (IsLow) {
          Result = this.CreateLiteralBoolean(El,false)}
         else Result = this.CreateLiteralBoolean(El,true);
        return Result;
      } else if (($tmp === 5) || ($tmp === 6)) {
        if (IsLow) {
          Result = this.CreateLiteralJSString(El,"\x00")}
         else Result = this.CreateLiteralJSString(El,"\uFFFF");
        return Result;
      } else if (($tmp >= 19) && ($tmp <= $lt232)) {
        TypeEl = ResolvedEl.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt100) {
          if ($lt65.isPrototypeOf(TypeEl.FData)) {
            AContext.Resolver.GetIntegerRange(ResolvedEl.BaseType,{get: function () {
                return MinVal;
              }, set: function (v) {
                MinVal = v;
              }},{get: function () {
                return MaxVal;
              }, set: function (v) {
                MaxVal = v;
              }});
            if (IsLow) {
              Result = this.CreateLiteralNumber(El,MinVal)}
             else Result = this.CreateLiteralNumber(El,MaxVal);
            return Result;
          };
        } else if (TypeEl.$class.ClassType() === $lt101) {
          Value = AContext.Resolver.EvalRangeLimit(TypeEl.RangeExpr,rtl.createSet(0),IsLow,El);
          try {
            var $tmp1 = Value.Kind;
            if ($tmp1 === 4) {
              Result = this.CreateLiteralNumber(El,Value.Int)}
             else if ($tmp1 === 5) {
              Result = this.CreateLiteralNumber(El,Value.UInt)}
             else {
              this.RaiseNotSupported(El,AContext,20170925214317,"");
            };
            return Result;
          } finally {
            $lp17({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
        };
        this.RaiseNotSupported(El,AContext,20170925214351,"");
      } else if (($tmp === 34) || ($tmp === 36)) {
        TypeEl = ResolvedEl.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt99) {
          CreateEnumValue(TypeEl);
          return Result;
        };
      } else if ($tmp === 7) {
        if (IsLow) {
          Result = this.CreateLiteralNumber(El,1)}
         else {
          Result = this.ConvertExpression(Param,AContext);
          Result = this.CreateDotNameExpr(El,Result,"length");
        };
        return Result;
      };
      this.DoError$2(20170210110717,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"enum or array",18,AContext.Resolver.GetResolverResultDescription(ResolvedEl,false)),Param);
      return Result;
    };
    this.ConvertBuiltIn_PredSucc = function (El, AContext, IsPred) {
      var $Self = this;
      var Result = null;
      var ResolvedEl = $lt84.$new();
      var TypeEl = null;
      function EnumExpected(Id) {
        $Self.DoError$2(Id,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"enum",18,AContext.Resolver.GetResolverResultDescription(ResolvedEl,false)),El.Params[0]);
      };
      function CreateAdd(Param) {
        var V = null;
        var Expr = null;
        V = $Self.ConvertExpression(Param,AContext);
        if (IsPred) {
          Expr = $Self.CreateElement($lt206,El)}
         else Expr = $Self.CreateElement($lt226,El);
        Expr.FA = V;
        Expr.FB = $Self.CreateLiteralNumber(El,1);
        Result = Expr;
      };
      function CreateSwitchBool() {
        if (IsPred) {
          Result = $Self.CreateLiteralBoolean(El,false)}
         else Result = $Self.CreateLiteralBoolean(El,true);
      };
      function CreateCharPredSucc(Param) {
        var V = null;
        var Call = null;
        var Expr = null;
        V = $Self.ConvertExpression(Param,AContext);
        Call = $Self.CreateCallCharCodeAt(V,0,El);
        if (IsPred) {
          Expr = $Self.CreateElement($lt206,El)}
         else Expr = $Self.CreateElement($lt226,El);
        Expr.FA = Call;
        Expr.FB = $Self.CreateLiteralNumber(El,1);
        Call = $Self.CreateCallFromCharCode(Expr,El);
        Result = Call;
      };
      var Param = null;
      var Value = null;
      Result = null;
      if (AContext.Resolver === null) this.RaiseInconsistency(20170210120648,El);
      Param = El.Params[0];
      AContext.Resolver.ComputeElement(Param,ResolvedEl,{},null);
      TypeEl = ResolvedEl.LoTypeEl;
      if (ResolvedEl.BaseType in $mod.btAllJSInteger) {
        CreateAdd(Param);
        return Result;
      } else if (ResolvedEl.BaseType in $mod.btAllJSBooleans) {
        CreateSwitchBool();
        return Result;
      } else if (ResolvedEl.BaseType in $mod.btAllJSChars) {
        CreateCharPredSucc(Param);
        return Result;
      } else if (ResolvedEl.BaseType === 2) {
        if (TypeEl.$class.ClassType() === $lt99) {
          CreateAdd(Param);
          return Result;
        } else EnumExpected(20180424115902);
      } else if (ResolvedEl.BaseType === 37) {
        if (ResolvedEl.SubType in $mod.btAllJSInteger) {
          CreateAdd(Param);
          return Result;
        } else if (ResolvedEl.SubType in $mod.btAllJSBooleans) {
          CreateAdd(Param);
          return Result;
        } else if (ResolvedEl.SubType === 2) {
          if (TypeEl.$class.ClassType() === $lt101) {
            Value = AContext.Resolver.EvalTypeRange(TypeEl,rtl.createSet(0));
            if (Value !== null) try {
              var $tmp = Value.Kind;
              if ($tmp === 10) {
                var $tmp1 = Value.ElKind;
                if (($tmp1 === 1) || ($tmp1 === 2)) {
                  CreateAdd(Param);
                  return Result;
                } else if ($tmp1 === 3) {
                  EnumExpected(20180424115736)}
                 else if ($tmp1 === 4) {
                  CreateSwitchBool();
                  return Result;
                } else {
                  EnumExpected(20180424115959);
                };
              } else if ($tmp === 11) {
                CreateAdd(Param);
                return Result;
              } else {
                EnumExpected(20180424115757);
              };
            } finally {
              $lp17({get: function () {
                  return Value;
                }, set: function (v) {
                  Value = v;
                }});
            };
          } else EnumExpected(20180424115934);
        };
      };
      EnumExpected(20170210120039);
      return Result;
    };
    this.ConvertBuiltIn_StrProc = function (El, AContext) {
      var Result = null;
      var AssignContext = null;
      var StrVar = null;
      var TypeEl = null;
      Result = null;
      AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
      try {
        StrVar = El.Params[1];
        AContext.Resolver.ComputeElement(StrVar,AssignContext.LeftResolved,rtl.createSet(1),null);
        AssignContext.RightSide = this.ConvertBuiltInStrParam(El.Params[0],AContext,false,true);
        TypeEl = AContext.Resolver.GetBaseTypes(7);
        $lp22(AssignContext.RightResolved,7,TypeEl,TypeEl,El,rtl.createSet(0));
        Result = this.CreateAssignStatement(StrVar,AssignContext);
      } finally {
        rtl.free(AssignContext,"RightSide");
        AssignContext = rtl.freeLoc(AssignContext);
      };
      return Result;
    };
    this.ConvertBuiltIn_StrFunc = function (El, AContext) {
      var Result = null;
      var i = 0;
      var Param = null;
      var Sum = null;
      var Add = null;
      var AddEl = null;
      Result = null;
      Sum = null;
      Add = null;
      try {
        for (var $l = 0, $end = rtl.length(El.Params) - 1; $l <= $end; $l++) {
          i = $l;
          Param = El.Params[i];
          Add = this.ConvertBuiltInStrParam(Param,AContext,true,i === 0);
          if (Sum === null) {
            Sum = Add}
           else {
            AddEl = this.CreateElement($lt226,Param);
            AddEl.FA = Sum;
            AddEl.FB = Add;
            Sum = AddEl;
          };
          Add = null;
        };
        Result = Sum;
      } finally {
        Add = rtl.freeLoc(Add);
        if (Result === null) Sum = rtl.freeLoc(Sum);
      };
      return Result;
    };
    this.ConvertBuiltInStrParam = function (El, AContext, IsStrFunc, IsFirst) {
      var $Self = this;
      var Result = null;
      var Add = null;
      function PrependStrLit() {
        var PlusEl = null;
        PlusEl = $Self.CreateElement($lt226,El);
        PlusEl.FA = $Self.CreateLiteralString(El,"");
        PlusEl.FB = Add;
        Add = PlusEl;
      };
      var aResolver = null;
      var ResolvedEl = $lt84.$new();
      var ElTypeResolved = $lt84.$new();
      var NeedStrLit = false;
      var Call = null;
      var Bracket = null;
      var Arg = null;
      var bt = 0;
      var TypeEl = null;
      Result = null;
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(El,ResolvedEl,{},null);
      Add = null;
      Call = null;
      Bracket = null;
      try {
        NeedStrLit = false;
        bt = ResolvedEl.BaseType;
        if (bt === 37) bt = ResolvedEl.SubType;
        if (bt in rtl.diffSet(rtl.unionSet($mod.btAllJSBooleans,$mod.btAllJSInteger),rtl.createSet(14))) {
          NeedStrLit = true;
          Add = this.ConvertExpression(El,AContext);
        } else if (bt in rtl.unionSet($mod.btAllJSFloats,rtl.createSet(14))) {
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(58)]);
          Arg = this.ConvertExpression(El,AContext);
          if (ResolvedEl.BaseType === 14) Arg = this.CreateDivideNumber(El,Arg,10000);
          Call.AddArg(Arg);
          if (El.Format1 !== null) Call.AddArg(this.ConvertExpression(El.Format1,AContext));
          if (El.Format2 !== null) Call.AddArg(this.ConvertExpression(El.Format2,AContext));
          Result = Call;
          Call = null;
          return Result;
        } else if (IsStrFunc && (bt in $mod.btAllJSStringAndChars)) {
          Add = this.ConvertExpression(El,AContext)}
         else if (bt === 2) {
          TypeEl = ResolvedEl.LoTypeEl;
          if (TypeEl.$class.ClassType() === $lt101) {
            aResolver.ComputeElement(TypeEl.RangeExpr.Left,ElTypeResolved,rtl.createSet(3),null);
            TypeEl = ElTypeResolved.LoTypeEl;
          };
          if (TypeEl.$class.ClassType() === $lt99) {
            Bracket = this.CreateElement($lt142,El);
            Bracket.FMExpr = this.CreateReferencePathExpr(TypeEl,AContext,false,null);
            Bracket.FName = this.ConvertExpression(El,AContext);
            Add = Bracket;
            Bracket = null;
          } else this.RaiseNotSupported(El,AContext,20170320123827,"");
        } else this.RaiseNotSupported(El,AContext,20170320093001,"");
        if (El.Format1 !== null) {
          if (NeedStrLit) PrependStrLit();
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(114)]);
          Call.AddArg(Add);
          Add = null;
          Call.AddArg(this.ConvertExpression(El.Format1,AContext));
          Add = Call;
          Call = null;
        } else if (IsFirst && NeedStrLit) PrependStrLit();
        Result = Add;
      } finally {
        Call = rtl.freeLoc(Call);
        Bracket = rtl.freeLoc(Bracket);
        if (Result === null) Add = rtl.freeLoc(Add);
      };
      return Result;
    };
    this.ConvertBuiltIn_WriteStr = function (El, AContext) {
      var Result = null;
      var AssignContext = null;
      var StrVar = null;
      var TypeEl = null;
      var JS = null;
      var AddJS = null;
      var i = 0;
      Result = null;
      AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
      try {
        StrVar = El.Params[0];
        AContext.Resolver.ComputeElement(StrVar,AssignContext.LeftResolved,rtl.createSet(1),null);
        for (var $l = 1, $end = rtl.length(El.Params) - 1; $l <= $end; $l++) {
          i = $l;
          JS = this.ConvertBuiltInStrParam(El.Params[i],AContext,false,true);
          if (AssignContext.RightSide === null) {
            AssignContext.RightSide = JS}
           else {
            AddJS = this.CreateElement($lt226,El);
            AddJS.FA = AssignContext.RightSide;
            AssignContext.RightSide = AddJS;
            AddJS.FB = JS;
          };
        };
        TypeEl = AContext.Resolver.GetBaseTypes(7);
        $lp22(AssignContext.RightResolved,7,TypeEl,TypeEl,El,rtl.createSet(0));
        Result = this.CreateAssignStatement(StrVar,AssignContext);
      } finally {
        rtl.free(AssignContext,"RightSide");
        AssignContext = rtl.freeLoc(AssignContext);
      };
      return Result;
    };
    this.ConvertBuiltIn_Val = function (El, AContext) {
      var Result = null;
      var aResolver = null;
      var AssignContext = null;
      var ValueExpr = null;
      var CodeExpr = null;
      var Call = null;
      var Params = [];
      var EnumType = null;
      var Fun = null;
      var ExprResolved = $lt84.$new();
      var ElTypeResolved = $lt84.$new();
      var ExprArg = null;
      var AssignSt = null;
      var SetterArgName = "";
      var ArgJS = null;
      var SetExpr = null;
      var bt = 0;
      var LoTypeEl = null;
      Result = null;
      aResolver = AContext.Resolver;
      Params = El.Params;
      Call = null;
      AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
      try {
        ValueExpr = Params[1];
        aResolver.ComputeElement(ValueExpr,AssignContext.LeftResolved,rtl.createSet(1),null);
        Call = this.CreateCallExpression(El);
        AssignContext.RightSide = Call;
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(59)]);
        Call.AddArg(this.ConvertExpression(Params[0],AContext));
        bt = AssignContext.LeftResolved.BaseType;
        if (bt === 37) bt = AssignContext.LeftResolved.SubType;
        if (bt === 2) {
          LoTypeEl = AssignContext.LeftResolved.LoTypeEl;
          if (LoTypeEl.$class.ClassType() === $lt101) {
            aResolver.ComputeElement(LoTypeEl.RangeExpr.Left,ElTypeResolved,rtl.createSet(3),null);
            LoTypeEl = ElTypeResolved.LoTypeEl;
          };
          if (LoTypeEl.$class.ClassType() === $lt99) {
            EnumType = LoTypeEl;
            Call.AddArg(this.CreateReferencePathExpr(EnumType,AContext,false,null));
          } else this.RaiseNotSupported(Params[1],AContext,20181214145226,$lp37(AssignContext.LeftResolved));
        } else this.RaiseNotSupported(Params[1],AContext,20181214145125,$lp37(AssignContext.LeftResolved));
        CodeExpr = Params[2];
        AContext.Resolver.ComputeElement(CodeExpr,ExprResolved,rtl.createSet(1),null);
        ArgJS = null;
        if ($lt89.isPrototypeOf(ExprResolved.IdentEl)) {
          ExprArg = ExprResolved.IdentEl;
          if (ExprArg.Access in rtl.createSet(2,3)) {
            ArgJS = this.CreateDotNameExpr(CodeExpr,this.CreateIdentifierExpr(ExprResolved.IdentEl,AContext),$impl.TempRefObjSetterName);
            Call.AddArg(ArgJS);
          };
        };
        if (ArgJS === null) {
          if ((ExprResolved.IdentEl === null) || $lt74.isPrototypeOf(ExprResolved.IdentEl)) this.RaiseNotSupported(CodeExpr,AContext,20181214154031,"property");
          Fun = this.CreateFunctionSt(CodeExpr,true,false);
          ArgJS = Fun;
          Call.AddArg(ArgJS);
          AssignSt = this.CreateElement($lt133,CodeExpr);
          Fun.FFuncDef.FBody.FA = AssignSt;
          SetExpr = this.ConvertExpression(CodeExpr,AContext);
          AssignSt.FLHS = SetExpr;
          SetterArgName = $impl.TempRefObjSetterArgName;
          this.FindAvailableLocalName({get: function () {
              return SetterArgName;
            }, set: function (v) {
              SetterArgName = v;
            }},SetExpr);
          Fun.FFuncDef.FTypedParams.AddParam(SetterArgName);
          AssignSt.FExpr = this.CreatePrimitiveDotExpr(SetterArgName,CodeExpr);
        };
        Result = this.CreateAssignStatement(ValueExpr,AssignContext);
      } finally {
        if ($lt39 !== null) {
          rtl.free(AssignContext,"RightSide");
          AssignContext = rtl.freeLoc(AssignContext);
        };
      };
      return Result;
    };
    this.ConvertBuiltIn_LoHi = function (El, AContext, IsLoFunc) {
      var Result = null;
      var ResolvedParam = $lt84.$new();
      var Param = null;
      var Mask = 0;
      var Shift = 0;
      var Digits = 0;
      var ShiftEx = null;
      var AndEx = null;
      Result = null;
      if (AContext.Resolver === null) this.RaiseInconsistency(20190129102200,El);
      Param = El.Params[0];
      AContext.Resolver.ComputeElement(Param,ResolvedParam,{},null);
      if (!(ResolvedParam.BaseType in $mod.btAllJSInteger)) this.DoError$2(20190129121100,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"integer type",18,AContext.Resolver.GetResolverResultDescription(ResolvedParam,false)),Param);
      Shift = AContext.Resolver.GetShiftAndMaskForLoHiFunc(ResolvedParam.BaseType,IsLoFunc,{get: function () {
          return Mask;
        }, set: function (v) {
          Mask = v;
        }});
      Result = this.ConvertExpression(Param,AContext);
      if (Shift > 0) {
        if (Shift === 32) {
          Result = this.CreateTruncFloor(El,this.CreateDivideNumber(El,Result,0x100000000),false);
        } else {
          ShiftEx = this.CreateElement($lt225,El);
          ShiftEx.FA = Result;
          ShiftEx.FB = this.CreateLiteralNumber(El,Shift);
          Result = ShiftEx;
        };
      };
      var $tmp = Mask;
      if ($tmp === 0xFF) {
        Digits = 2}
       else if ($tmp === 0xFFFF) {
        Digits = 4}
       else if ($tmp === 0xFFFFFFFF) {
        Digits = 8}
       else {
        Digits = 1;
      };
      if (Digits < 8) {
        AndEx = this.CreateElement($lt223,El);
        AndEx.FA = Result;
        AndEx.FB = this.CreateLiteralHexNumber(El,Mask,Digits);
        Result = AndEx;
      } else {
        ShiftEx = this.CreateElement($lt222,El);
        ShiftEx.FA = Result;
        ShiftEx.FB = this.CreateLiteralNumber(El,0);
        Result = ShiftEx;
      };
      return Result;
    };
    this.ConvertBuiltIn_ConcatArray = function (El, AContext) {
      var Result = null;
      var Params = [];
      var ParamResolved = $lt84.$new();
      var Param0 = null;
      var ArrayType = null;
      var i = 0;
      var Call = null;
      var JS = null;
      var aResolver = null;
      var aManaged = false;
      Result = null;
      Params = El.Params;
      if (rtl.length(Params) < 1) this.RaiseInconsistency(20170331000332,El);
      Param0 = El.Params[0];
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(Param0,ParamResolved,{},null);
      if (rtl.length(Params) === 1) {
        Result = this.ConvertExpression(Param0,AContext);
        if (!aResolver.IsManagedJSType(ParamResolved.LoTypeEl)) Result = this.CreateArrayRef(El,Result);
      } else {
        Call = null;
        aManaged = false;
        if ($lt107.isPrototypeOf(ParamResolved.LoTypeEl)) {
          ArrayType = ParamResolved.LoTypeEl;
          Call = this.CreateArrayConcat$1(ArrayType,El,AContext,false);
          aManaged = aResolver.IsManagedJSType(ArrayType);
        } else if (ParamResolved.BaseType === 35) {
          ParamResolved.BaseType = ParamResolved.SubType;
          ParamResolved.SubType = 0;
          Call = this.CreateArrayConcat($lt84.$clone(ParamResolved),El,AContext,false);
        };
        if (Call === null) {
          this.RaiseNotSupported(Param0,AContext,20170331000846,"");
        };
        try {
          for (var $l = 0, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
            i = $l;
            JS = this.CreateArrayEl(Params[i],AContext);
            Call.AddArg(JS);
          };
          Result = Call;
          if (aManaged) Result = this.CreateIntfRef(Result,AContext,El);
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
      };
      return Result;
    };
    this.ConvertBuiltIn_ConcatString = function (El, AContext) {
      var Result = null;
      var Params = [];
      var A = null;
      var Call = null;
      var i = 0;
      Params = El.Params;
      if (rtl.length(Params) === 1) {
        Result = this.ConvertExpression(Params[0],AContext)}
       else {
        Result = null;
        A = this.ConvertExpression(Params[0],AContext);
        Call = this.CreateCallExpression(El);
        try {
          Call.FExpr = this.CreateDotNameExpr(Params[0],A,"concat");
          for (var $l = 1, $end = rtl.length(Params) - 1; $l <= $end; $l++) {
            i = $l;
            Call.AddArg(this.ConvertExpression(Params[i],AContext));
          };
          Result = Call;
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
      };
      return Result;
    };
    this.ConvertBuiltIn_CopyArray = function (El, AContext) {
      var Result = null;
      var Param = null;
      var ParamResolved = $lt84.$new();
      var ElTypeResolved = $lt84.$new();
      var C = null;
      var TypeParam = null;
      var Call = null;
      var ArrayType = null;
      var aResolver = null;
      var LoElType = null;
      var aManaged = false;
      Result = null;
      aResolver = AContext.Resolver;
      Call = null;
      try {
        Param = El.Params[0];
        aResolver.ComputeElement(El,ParamResolved,{},null);
        aManaged = false;
        if ((ParamResolved.BaseType === 2) && (ParamResolved.LoTypeEl.$class.ClassType() === $lt107)) {
          ArrayType = ParamResolved.LoTypeEl;
          aResolver.ComputeElement(aResolver.GetArrayElType(ArrayType),ElTypeResolved,rtl.createSet(4),null);
          aManaged = aResolver.IsManagedJSType(ArrayType);
        } else if (ParamResolved.BaseType === 35) {
          ElTypeResolved.$assign(ParamResolved);
          ElTypeResolved.BaseType = ElTypeResolved.SubType;
          ElTypeResolved.SubType = 0;
        };
        TypeParam = null;
        if (ElTypeResolved.BaseType === 2) {
          LoElType = ElTypeResolved.LoTypeEl;
          C = LoElType.$class.ClassType();
          if (C === $lt81) {
            TypeParam = this.CreateReferencePathExpr(LoElType,AContext,false,null)}
           else if ((C === $lt72) && (LoElType.ObjKind === 2) && (LoElType.InterfaceType === 0)) {
            TypeParam = this.CreateLiteralString(El,this.GetBIName(123));
          };
        } else if (ElTypeResolved.BaseType === 34) TypeParam = this.CreateLiteralString(El,this.GetBIName(111));
        if (TypeParam === null) TypeParam = this.CreateLiteralNumber(El,0);
        Call = this.CreateCallExpression(El);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(2)]);
        Call.AddArg(TypeParam);
        Call.AddArg(this.ConvertExpression(Param,AContext));
        if (rtl.length(El.Params) === 1) {
          Call.AddArg(this.CreateLiteralNumber(El,0))}
         else Call.AddArg(this.ConvertExpression(El.Params[1],AContext));
        if (rtl.length(El.Params) >= 3) Call.AddArg(this.ConvertExpression(El.Params[2],AContext));
        Result = Call;
        if (aManaged) Result = this.CreateIntfRef(Result,AContext,El);
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      if (El === null) ;
      if (AContext === null) ;
      return Result;
    };
    this.ConvertBuiltIn_InsertArray = function (El, AContext) {
      var Result = null;
      var Call = null;
      var AssignSt = null;
      var aResolver = null;
      var Param = null;
      var ParamJS = null;
      var ParamResolved = $lt84.$new();
      var ItemType = null;
      var C = null;
      var aManaged = false;
      Result = null;
      aResolver = AContext.Resolver;
      AssignSt = null;
      try {
        AssignSt = this.CreateElement($lt133,El);
        AssignSt.FLHS = this.ConvertExpression(El.Params[1],AContext);
        Call = this.CreateCallExpression(El);
        AssignSt.FExpr = Call;
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(5)]);
        Param = El.Params[0];
        ParamJS = this.ConvertExpression(Param,AContext);
        aManaged = false;
        aResolver.ComputeElement(Param,ParamResolved,{},null);
        if (ParamResolved.BaseType === 2) {
          ItemType = ParamResolved.LoTypeEl;
          aManaged = aResolver.IsManagedJSType(ItemType);
          C = ItemType.$class.ClassType();
          if (C === $lt81) ;
        };
        Call.AddArg(ParamJS);
        Call.AddArg(this.ConvertExpression(El.Params[1],AContext));
        Call.AddArg(this.ConvertExpression(El.Params[2],AContext));
        if (aManaged) Call.AddArg(this.CreateLiteralJSString(El,this.GetBIName(123)));
        Result = AssignSt;
      } finally {
        if (Result === null) AssignSt = rtl.freeLoc(AssignSt);
      };
      return Result;
    };
    this.ConvertBuiltIn_DeleteArray = function (El, AContext) {
      var Result = null;
      var ArrEl = null;
      var Call = null;
      var Param = null;
      var aResolver = null;
      var ParamResolved = $lt84.$new();
      var AssignSt = null;
      Result = null;
      aResolver = AContext.Resolver;
      Param = El.Params[0];
      aResolver.ComputeElement(Param,ParamResolved,{},null);
      if (aResolver.IsManagedJSType(ParamResolved.LoTypeEl)) {
        AssignSt = null;
        try {
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = this.ConvertExpression(Param,AContext);
          Call = this.CreateCallExpression(El);
          AssignSt.FExpr = Call;
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(3)]);
          Call.AddArg(this.ConvertExpression(Param,AContext));
          Call.AddArg(this.ConvertExpression(El.Params[1],AContext));
          Call.AddArg(this.ConvertExpression(El.Params[2],AContext));
          Result = AssignSt;
        } finally {
          if (Result === null) AssignSt = rtl.freeLoc(AssignSt);
        };
      } else {
        Call = null;
        try {
          Call = this.CreateCallExpression(El);
          ArrEl = this.ConvertExpression(El.Params[0],AContext);
          Call.FExpr = this.CreateDotNameExpr(El,ArrEl,"splice");
          Call.AddArg(this.ConvertExpression(El.Params[1],AContext));
          Call.AddArg(this.ConvertExpression(El.Params[2],AContext));
          Result = Call;
        } finally {
          if (Result === null) Call = rtl.freeLoc(Call);
        };
      };
      return Result;
    };
    this.ConvertBuiltIn_TypeInfo = function (El, AContext) {
      var Result = null;
      var ParamResolved = $lt84.$new();
      var Param = null;
      var ResultEl = null;
      var TypeEl = null;
      var aResolver = null;
      Result = null;
      Param = El.Params[0];
      aResolver = AContext.Resolver;
      aResolver.ComputeElement(Param,ParamResolved,rtl.createSet(1),null);
      if ((ParamResolved.BaseType === 31) && $lt94.isPrototypeOf(ParamResolved.IdentEl)) {
        ResultEl = ParamResolved.IdentEl.GetFT().ResultEl;
        aResolver.ComputeResultElement(ResultEl,ParamResolved,{},null);
        ParamResolved.Flags = rtl.includeSet(ParamResolved.Flags,0);
        ParamResolved.IdentEl = ResultEl;
      };
      TypeEl = $lp31(ParamResolved.HiTypeEl);
      if (TypeEl === null) {
        this.RaiseNotSupported(El,AContext,20170413001544,"")}
       else if ($lt76.isPrototypeOf(ParamResolved.IdentEl)) {
        Result = this.CreateTypeInfoRef(ParamResolved.IdentEl,AContext,Param)}
       else if ((0 in ParamResolved.Flags) && ((TypeEl.$class.ClassType() === $lt72) || (TypeEl.$class.ClassType() === $lt112)) && ($lt80.isPrototypeOf(ParamResolved.IdentEl) || (ParamResolved.IdentEl.$class.ClassType() === $lt89) || (ParamResolved.IdentEl.$class.ClassType() === $lt90))) {
        Result = this.ConvertExpression(Param,AContext);
        Result = this.CreateDotNameExpr(El,Result,this.GetBIName(145));
      } else Result = this.CreateTypeInfoRef(TypeEl,AContext,Param);
      return Result;
    };
    this.ConvertBuiltIn_GetTypeKind = function (El, AContext) {
      var Result = null;
      var aResolver = null;
      var Value = null;
      Result = null;
      aResolver = AContext.Resolver;
      aResolver.BI_GetTypeKind_OnEval(aResolver.GetBuiltInProcs(29),El,rtl.createSet(0),{get: function () {
          return Value;
        }, set: function (v) {
          Value = v;
        }});
      try {
        if (!$lt203.isPrototypeOf(Value)) this.RaiseNotSupported(El,AContext,20200826222729,$lp16(Value));
        Result = this.CreateLiteralNumber(El,Value.Index);
      } finally {
        $lp17({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      return Result;
    };
    this.ConvertBuiltIn_Assert = function (El, AContext) {
      var Result = null;
      var IfSt = null;
      var ThrowSt = null;
      var ModScope = null;
      var aConstructor = null;
      var Ref = null;
      var ArrLit = null;
      var Call = null;
      var FunName = "";
      var PosEl = null;
      Result = null;
      if (!(3 in AContext.ScannerBoolSwitches)) return Result;
      Ref = null;
      IfSt = this.CreateElement($lt151,El);
      try {
        PosEl = El.Params[0];
        IfSt.FCond = this.CreateUnaryNot(this.ConvertExpression(PosEl,AContext),PosEl);
        ThrowSt = this.CreateElement($lt200,PosEl);
        IfSt.FBTrue = ThrowSt;
        aConstructor = null;
        if ($lt71.isPrototypeOf(El.FData)) {
          Ref = El.FData;
          if ($lt109.isPrototypeOf(Ref.FDeclaration)) aConstructor = Ref.FDeclaration;
          Ref = null;
        };
        if (aConstructor !== null) {
          Ref = $lt71.$create("Create$1");
          ModScope = rtl.as(El.GetModule().FData,$lt51);
          Ref.SetDeclaration(ModScope.FAssertClass);
          FunName = this.CreateReferencePath(ModScope.FAssertClass,AContext,2,true,Ref);
          FunName = FunName + "." + this.GetBIName(25);
          Call = this.CreateCallExpression(PosEl);
          Call.FExpr = this.CreatePrimitiveDotExpr(FunName,PosEl);
          Call.AddArg(this.CreateLiteralString(PosEl,this.TransformElToJSName(aConstructor,AContext)));
          ThrowSt.FA = Call;
          if (rtl.length(El.Params) > 1) {
            ArrLit = this.CreateElement($lt147,El.Params[1]);
            Call.AddArg(ArrLit);
            ArrLit.AddElement(this.ConvertExpression(El.Params[1],AContext));
          };
        };
        if (ThrowSt.FA === null) {
          if (rtl.length(El.Params) > 1) {
            ThrowSt.FA = this.ConvertExpression(El.Params[1],AContext)}
           else ThrowSt.FA = this.CreateLiteralJSString(El.Params[0],"assert failed");
        };
        Result = IfSt;
      } finally {
        Ref = rtl.freeLoc(Ref);
        if (Result === null) IfSt = rtl.freeLoc(IfSt);
      };
      return Result;
    };
    this.ConvertBuiltIn_New = function (El, AContext) {
      var Result = null;
      var Param0 = null;
      var ParamResolved = $lt84.$new();
      var AssignContext = null;
      var TypeEl = null;
      var SubTypeEl = null;
      var aResolveR = null;
      var RecType = null;
      Result = null;
      Param0 = El.Params[0];
      aResolveR = AContext.Resolver;
      aResolveR.ComputeElement(Param0,ParamResolved,{},null);
      RecType = null;
      if (ParamResolved.BaseType === 2) {
        TypeEl = ParamResolved.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt95) {
          SubTypeEl = aResolveR.ResolveAliasType(TypeEl.DestType,true);
          if (SubTypeEl.$class.ClassType() === $lt81) RecType = SubTypeEl;
        };
      };
      if (RecType === null) this.DoError$2(20180425011901,3028,rtl.getResStr($lm6,"sIncompatibleTypesGotExpected"),$lp6(18,aResolveR.GetResolverResultDescription(ParamResolved,true),18,"pointer of record"),Param0);
      AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
      try {
        aResolveR.ComputeElement(Param0,AssignContext.LeftResolved,rtl.createSet(1),null);
        AssignContext.RightResolved.$assign(AssignContext.LeftResolved);
        AssignContext.RightSide = this.CreateRecordCallNew(El,RecType,AContext);
        Result = this.CreateAssignStatement(Param0,AssignContext);
      } finally {
        rtl.free(AssignContext,"RightSide");
        AssignContext = rtl.freeLoc(AssignContext);
      };
      return Result;
    };
    this.ConvertBuiltIn_Dispose = function (El, AContext) {
      var Result = null;
      var Param0 = null;
      var aResolveR = null;
      var ParamResolved = $lt84.$new();
      var TypeEl = null;
      var SubTypeEl = null;
      var RecType = null;
      var AssignContext = null;
      Result = null;
      Param0 = El.Params[0];
      aResolveR = AContext.Resolver;
      aResolveR.ComputeElement(Param0,ParamResolved,{},null);
      RecType = null;
      if (ParamResolved.BaseType === 2) {
        TypeEl = ParamResolved.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt95) {
          SubTypeEl = aResolveR.ResolveAliasType(TypeEl.DestType,true);
          if (SubTypeEl.$class.ClassType() === $lt81) RecType = SubTypeEl;
        };
      };
      if (RecType === null) this.DoError$2(20180425012910,3028,rtl.getResStr($lm6,"sIncompatibleTypesGotExpected"),$lp6(18,aResolveR.GetResolverResultDescription(ParamResolved,true),18,"pointer of record"),Param0);
      if (!(1 in ParamResolved.Flags)) return null;
      AssignContext = $lt39.$create("Create$1",[El,null,AContext]);
      try {
        aResolveR.ComputeElement(Param0,AssignContext.LeftResolved,rtl.createSet(1),null);
        AssignContext.RightResolved.$assign(AssignContext.LeftResolved);
        AssignContext.RightSide = this.CreateLiteralNull(El);
        Result = this.CreateAssignStatement(Param0,AssignContext);
      } finally {
        rtl.free(AssignContext,"RightSide");
        AssignContext = rtl.freeLoc(AssignContext);
      };
      return Result;
    };
    this.ConvertBuiltIn_Default = function (El, AContext) {
      var $Self = this;
      var Result = null;
      function CreateEnumValue(TypeEl) {
        var EnumValue = null;
        EnumValue = rtl.getObject(TypeEl.Values.Get(0));
        Result = $Self.CreateReferencePathExpr(EnumValue,AContext,false,null);
      };
      var ResolvedEl = $lt84.$new();
      var Param = null;
      var TypeEl = null;
      var Value = null;
      var MinVal = 0;
      var MaxVal = 0;
      var C = null;
      Result = null;
      if (AContext.Resolver === null) this.RaiseInconsistency(20180501011029,El);
      Param = El.Params[0];
      AContext.Resolver.ComputeElement(Param,ResolvedEl,{},null);
      var $tmp = ResolvedEl.BaseType;
      if (($tmp === 15) || ($tmp === 16) || ($tmp === 17) || ($tmp === 18)) {
        Result = this.CreateLiteralBoolean(El,false);
        return Result;
      } else if (($tmp === 5) || ($tmp === 6)) {
        Result = this.CreateLiteralJSString(El,"\x00");
        return Result;
      } else if (($tmp === 7) || ($tmp === 9)) {
        Result = this.CreateLiteralJSString(El,"");
        return Result;
      } else if (($tmp >= 19) && ($tmp <= $lt232)) {
        TypeEl = ResolvedEl.LoTypeEl;
        if (TypeEl.$class.ClassType() === $lt100) {
          if ($lt65.isPrototypeOf(TypeEl.FData)) {
            AContext.Resolver.GetIntegerRange(ResolvedEl.BaseType,{get: function () {
                return MinVal;
              }, set: function (v) {
                MinVal = v;
              }},{get: function () {
                return MaxVal;
              }, set: function (v) {
                MaxVal = v;
              }});
            Result = this.CreateLiteralNumber(El,MinVal);
            return Result;
          };
        } else if (TypeEl.$class.ClassType() === $lt101) {
          Value = AContext.Resolver.EvalRangeLimit(TypeEl.RangeExpr,rtl.createSet(0),true,El);
          try {
            var $tmp1 = Value.Kind;
            if ($tmp1 === 4) {
              Result = this.CreateLiteralNumber(El,Value.Int)}
             else if ($tmp1 === 5) {
              Result = this.CreateLiteralNumber(El,Value.UInt)}
             else {
              this.RaiseNotSupported(El,AContext,20180501011646,"");
            };
            return Result;
          } finally {
            $lp17({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
        };
        this.RaiseNotSupported(El,AContext,20180501011649,"");
      } else if (($tmp === 10) || ($tmp === 11)) {
        Result = this.CreateLiteralNumber(El,0);
        Result.FValue.FCustomValue = "0.0";
        return Result;
      } else if ($tmp === 14) {
        Result = this.CreateLiteralNumber(El,0);
        return Result;
      } else if ($tmp === 2) {
        TypeEl = ResolvedEl.LoTypeEl;
        C = TypeEl.$class.ClassType();
        if (C === $lt99) {
          CreateEnumValue(TypeEl);
          return Result;
        } else if (C === $lt117) {
          Result = this.CreateElement($lt132,El);
          return Result;
        } else if (C === $lt107) {
          Result = this.CreateArrayInit(TypeEl,null,El,AContext);
          return Result;
        } else if (C === $lt81) {
          Result = this.CreateRecordInit(TypeEl,null,El,AContext);
          return Result;
        } else if (C === $lt101) {
          Value = AContext.Resolver.Eval(TypeEl.RangeExpr.Left,rtl.createSet(0),true);
          try {
            Result = this.ConvertConstValue(Value,AContext,El);
          } finally {
            $lp17({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
        } else if ((C === $lt72) || (C === $lt95) || (C === $lt112)) {
          Result = this.CreateLiteralNull(El);
          return Result;
        };
      } else if ($tmp === 37) {
        if ($lt101.isPrototypeOf(ResolvedEl.LoTypeEl)) {
          Value = AContext.Resolver.Eval(ResolvedEl.LoTypeEl.RangeExpr.Left,rtl.createSet(0),true);
          try {
            Result = this.ConvertConstValue(Value,AContext,El);
          } finally {
            $lp17({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
          return Result;
        };
      } else if ($tmp === 34) {
        Result = this.CreateElement($lt132,El);
        return Result;
      };
      this.DoError$2(20180501011723,3010,rtl.getResStr($lm6,"sXExpectedButYFound"),$lp6(18,"record",18,AContext.Resolver.GetResolverResultDescription(ResolvedEl,false)),Param);
      return Result;
    };
    this.ConvertBuiltIn_Debugger = function (El, AContext) {
      var Result = null;
      Result = this.CreateLiteralCustomValue(El,"debugger");
      if (AContext === null) ;
      return Result;
    };
    this.ConvertBuiltIn_AWait = function (El, AContext) {
      var Result = null;
      var Param = null;
      var JS = null;
      var AWaitJS = null;
      if (rtl.length(El.Params) === 1) {
        Param = El.Params[0]}
       else if (rtl.length(El.Params) === 2) {
        Param = El.Params[1]}
       else this.RaiseNotSupported(El,AContext,20200519233919,"");
      JS = this.ConvertExpression(Param,AContext);
      AWaitJS = this.CreateElement($lt233,El);
      AWaitJS.FA = JS;
      Result = AWaitJS;
      return Result;
    };
    this.ConvertRecordValues = function (El, AContext) {
      var Result = null;
      var aResolver = null;
      var Vars = null;
      var RecType = null;
      var Ref = null;
      var ResolvedEl = $lt84.$new();
      var ObjLit = null;
      var i = 0;
      var RecFields = [];
      var Field = null;
      var Member = null;
      var PasVar = null;
      var ok = false;
      var ObjLitEl = null;
      var Call = null;
      var CurName = "";
      Result = null;
      aResolver = AContext.Resolver;
      Vars = $lt54.$create("Create");
      ok = false;
      try {
        RecType = null;
        if (aResolver !== null) {
          aResolver.ComputeElement(El,ResolvedEl,{},null);
          if ((ResolvedEl.BaseType !== 2) || (ResolvedEl.LoTypeEl.$class.ClassType() !== $lt81)) this.RaiseNotSupported(El,AContext,20180429210932,"");
          RecType = ResolvedEl.LoTypeEl;
          Call = this.CreateRecordCallClone(El,RecType,null,AContext);
          Result = Call;
          ObjLit = this.CreateElement($lt132,El);
          Call.AddArg(ObjLit);
        } else {
          ObjLit = this.CreateElement($lt132,El);
          Result = ObjLit;
        };
        RecFields = El.Fields;
        for (var $l = 0, $end = rtl.length(RecFields) - 1; $l <= $end; $l++) {
          i = $l;
          Field = RecFields[i];
          Ref = rtl.as(Field.NameExp.FData,$lt71);
          PasVar = rtl.as(Ref.FDeclaration,$lt80);
          Vars.Add(PasVar);
          ObjLitEl = ObjLit.FElements.AddElement();
          CurName = this.TransformElToJSName(PasVar,AContext);
          if (CurName.charAt(0) === "[") {
            if (CurName.charAt(CurName.length - 1) === "]") {
              CurName = $lp4(CurName,2,CurName.length - 2)}
             else CurName = $lp4(CurName,2,CurName.length - 1);
          };
          ObjLitEl.FName = CurName;
          ObjLitEl.FExpr = this.CreateValInit(PasVar.VarType,Field.ValueExp,Field.NameExp,AContext);
        };
        if (RecType !== null) for (var $l1 = 0, $end1 = RecType.Members.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          Member = rtl.getObject(RecType.Members.Get(i));
          if (Member.$class.ClassType() !== $lt80) continue;
          PasVar = Member;
          if (rtl.neSet(rtl.intersectSet(rtl.createSet(4,5),PasVar.VarModifiers),{})) continue;
          if (Vars.IndexOf(PasVar) >= 0) continue;
          if (!this.IsElementUsed(PasVar)) continue;
          ObjLitEl = ObjLit.FElements.AddElement();
          ObjLitEl.FName = this.TransformElToJSName(PasVar,AContext);
          ObjLitEl.FExpr = this.CreateValInit(PasVar.VarType,PasVar.Expr,PasVar,AContext);
        };
        ok = true;
      } finally {
        Vars = rtl.freeLoc(Vars);
        if (!ok) Result = rtl.freeLoc(Result);
      };
      return Result;
    };
    var BinClasses = [null,$lt226,$lt206,$lt172,$lt170,$lt170,$lt234,null,$lt222,$lt224,null,null,null,null,$lt177,$lt204,$lt235,$lt180,$lt208,$lt207,null,$lt236,null,null,null,null,null,null];
    this.ConvertBinaryExpression = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var LeftResolved = $lt84.$new();
      var RightResolved = $lt84.$new();
      function NotSupportedRes(id) {
        $Self.RaiseNotSupported(El,AContext,id,$lp37(LeftResolved) + $lm1.ExprKindNames[El.Kind] + $lp37(RightResolved));
      };
      function BitwiseOpNeedLongwordFix() {
        var Result = false;
        Result = ((LeftResolved.BaseType === 25) && (RightResolved.BaseType <= 25)) || ((RightResolved.BaseType === 25) && (LeftResolved.BaseType <= 25));
        return Result;
      };
      function CreateBitwiseLongwordOp(A, B, C) {
        var Result = null;
        var R = null;
        R = $Self.CreateElement(C,El);
        R.FA = A;
        R.FB = B;
        Result = $Self.CreateBitWiseLongword(El,R);
        return Result;
      };
      var R = null;
      var C = null;
      var A = null;
      var B = null;
      var UseBitwiseOp = false;
      var Call = null;
      var Flags = {};
      var ModeSwitches = {};
      var aResolver = null;
      var LeftTypeEl = null;
      var RightTypeEl = null;
      var OldAccess = 0;
      Result = null;
      aResolver = AContext.Resolver;
      var $tmp = El.OpCode;
      if ($tmp === 1) {
        Result = this.ConvertBinaryExpressionMultiAdd(El,AContext);
        return Result;
      } else if ($tmp === 27) {
        Result = this.ConvertSubIdentExpression(El,AContext);
        return Result;
      } else if ($tmp === 0) if ($lt237.isPrototypeOf(El.Left)) {
        Result = this.ConvertInheritedExpr(El.Left,AContext);
        return Result;
      };
      OldAccess = AContext.Access;
      AContext.Access = 0;
      Call = null;
      A = null;
      B = null;
      try {
        A = this.ConvertExpression(El.Left,AContext);
        B = this.ConvertExpression(El.Right,AContext);
        if (aResolver !== null) {
          ModeSwitches = rtl.refSet(AContext.CurrentModeSwitches());
          Flags = {};
          if (El.OpCode in rtl.createSet(14,15)) if (!(3 in ModeSwitches)) Flags = rtl.createSet(2);
          aResolver.ComputeElement(El.Left,LeftResolved,rtl.refSet(Flags),null);
          Flags = {};
          if ((El.OpCode in rtl.createSet(14,15)) && !(3 in ModeSwitches)) {
            if (LeftResolved.BaseType === 30) {
              Flags = rtl.createSet(2)}
             else if (aResolver.IsProcedureType(LeftResolved,true)) {
              Flags = rtl.createSet(2)}
             else Flags = {};
          };
          aResolver.ComputeElement(El.Right,RightResolved,rtl.refSet(Flags),null);
          Result = this.ConvertBinaryExpressionRes(El,AContext,LeftResolved,RightResolved,{get: function () {
              return A;
            }, set: function (v) {
              A = v;
            }},{get: function () {
              return B;
            }, set: function (v) {
              B = v;
            }});
          if (Result !== null) return Result;
        };
        C = BinClasses[El.OpCode];
        if (C === null) {
          var $tmp1 = El.OpCode;
          if ($tmp1 === 22) {
            Call = this.CreateCallExpression(El);
            LeftTypeEl = LeftResolved.LoTypeEl;
            RightTypeEl = RightResolved.LoTypeEl;
            if ($lt72.isPrototypeOf(LeftTypeEl)) {
              if ($lt72.isPrototypeOf(RightTypeEl)) {
                var $tmp2 = LeftTypeEl.ObjKind;
                if ($tmp2 === 1) {
                  var $tmp3 = RightTypeEl.ObjKind;
                  if ($tmp3 === 1) {
                    if (RightResolved.LoTypeEl.IsExternal) {
                      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(14),El)}
                     else Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(13),El)}
                   else if ($tmp3 === 2) {
                    var $tmp4 = RightTypeEl.InterfaceType;
                    if ($tmp4 === 0) {
                      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(55),El);
                      Call.AddArg(A);
                      Call.AddArg(B);
                      Call = this.CreateIntfRef(Call,AContext,El);
                      Result = Call;
                      return Result;
                    } else if ($tmp4 === 1) {
                      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(46),El)}
                     else {
                      this.RaiseNotSupported(El,AContext,20180401225752,"");
                    };
                  } else {
                    NotSupportedRes(20180327214535);
                  };
                } else if ($tmp2 === 2) {
                  var $tmp5 = RightTypeEl.ObjKind;
                  if ($tmp5 === 1) {
                    Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(38),El)}
                   else if ($tmp5 === 2) {
                    if (LeftTypeEl.InterfaceType === 0) {
                      Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(39),El)}
                     else Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(13),El)}
                   else {
                    NotSupportedRes(20180327214545);
                  };
                } else {
                  NotSupportedRes(20180327214559);
                };
              } else if ($lt112.isPrototypeOf(RightTypeEl)) {
                Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(13),El);
              };
            };
            Call.AddArg(A);
            Call.AddArg(B);
            Result = Call;
            return Result;
          } else if ($tmp1 === 11) {
            if (aResolver !== null) {
              UseBitwiseOp = (LeftResolved.BaseType in $mod.btAllJSInteger) || (RightResolved.BaseType in $mod.btAllJSInteger);
              if (UseBitwiseOp) {
                if ((LeftResolved.BaseType in rtl.createSet(28,27)) && (RightResolved.BaseType in rtl.createSet(28,27))) {
                  Call = this.CreateCallExpression(El);
                  Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(16)]);
                  Call.AddArg(A);
                  Call.AddArg(B);
                  Result = Call;
                  return Result;
                } else if (BitwiseOpNeedLongwordFix()) {
                  Result = CreateBitwiseLongwordOp(A,B,$lt223);
                  return Result;
                };
              };
            } else UseBitwiseOp = (this.GetExpressionValueType(El.Left,AContext) === 3) || (this.GetExpressionValueType(El.Right,AContext) === 3);
            if (UseBitwiseOp) {
              C = $lt223}
             else C = $lt176;
          } else if ($tmp1 === 12) {
            if (aResolver !== null) {
              UseBitwiseOp = (LeftResolved.BaseType in $mod.btAllJSInteger) || (RightResolved.BaseType in $mod.btAllJSInteger);
              if (UseBitwiseOp) {
                if ((LeftResolved.BaseType in rtl.createSet(28,27)) || (RightResolved.BaseType in rtl.createSet(28,27))) {
                  Call = this.CreateCallExpression(El);
                  Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(17)]);
                  Call.AddArg(A);
                  Call.AddArg(B);
                  Result = Call;
                  return Result;
                } else if (BitwiseOpNeedLongwordFix()) {
                  Result = CreateBitwiseLongwordOp(A,B,$lt238);
                  return Result;
                };
              };
            } else UseBitwiseOp = (this.GetExpressionValueType(El.Left,AContext) === 3) || (this.GetExpressionValueType(El.Right,AContext) === 3);
            if (UseBitwiseOp) {
              C = $lt238}
             else C = $lt217;
          } else if ($tmp1 === 13) {
            if (aResolver !== null) {
              UseBitwiseOp = (LeftResolved.BaseType in $mod.btAllJSInteger) || (RightResolved.BaseType in $mod.btAllJSInteger);
              if (UseBitwiseOp) {
                if ((LeftResolved.BaseType in rtl.createSet(28,27)) || (RightResolved.BaseType in rtl.createSet(28,27))) {
                  Call = this.CreateCallExpression(El);
                  Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(20)]);
                  Call.AddArg(A);
                  Call.AddArg(B);
                  Result = Call;
                  return Result;
                } else if (BitwiseOpNeedLongwordFix()) {
                  Result = CreateBitwiseLongwordOp(A,B,$lt239);
                  return Result;
                };
              };
            } else UseBitwiseOp = (this.GetExpressionValueType(El.Left,AContext) === 3) || (this.GetExpressionValueType(El.Right,AContext) === 3);
            if (UseBitwiseOp) {
              C = $lt239}
             else C = $lt239;
          } else if ($tmp1 === 7) {
            C = $lt240}
           else {
            if (C === null) this.DoError$2(20161024191244,4004,rtl.getResStr($mod,"sBinaryOpcodeNotSupported"),$lp6(18,$lm1.OpcodeStrings[El.OpCode]),El);
          };
        };
        if ((Result === null) && (C !== null)) {
          R = this.CreateElement(C,El);
          R.FA = A;
          A = null;
          R.FB = B;
          B = null;
          Result = R;
          var $tmp6 = El.OpCode;
          if ($tmp6 === 5) {
            Result = this.CreateTruncFloor(El,Result,true);
          };
          if ((14 in AContext.ScannerBoolSwitches) && (aResolver !== null)) {
            var $tmp7 = El.OpCode;
            if (($tmp7 === 1) || ($tmp7 === 2)) {
              if ((LeftResolved.BaseType in $mod.btAllJSOverflowAddSubType) || (RightResolved.BaseType in $mod.btAllJSOverflowAddSubType)) Result = this.CreateOverflowCheckCall(Result,El)}
             else if ($tmp7 === 3) if ((LeftResolved.BaseType in $mod.btAllJSOverflowMultType) || (RightResolved.BaseType in $mod.btAllJSOverflowMultType)) Result = this.CreateOverflowCheckCall(Result,El);
          };
        };
      } finally {
        AContext.Access = OldAccess;
        if (Result === null) {
          A = rtl.freeLoc(A);
          B = rtl.freeLoc(B);
        };
      };
      return Result;
    };
    this.ConvertBinaryExpressionRes = function (El, AContext, LeftResolved, RightResolved, A, B) {
      var $Self = this;
      var Result = null;
      var aResolver = null;
      function NotSupported(id) {
        $Self.RaiseNotSupported(El,AContext,id,$lp37(LeftResolved) + $lm1.ExprKindNames[El.Kind] + $lp37(RightResolved));
      };
      function CreateEqualCallback() {
        var Result = null;
        var Call = null;
        Call = $Self.CreateCallExpression(El);
        Call.FExpr = $Self.CreateMemberExpression([$Self.GetBIName(144),$Self.GetBIName(66)]);
        Call.AddArg(A.get());
        A.set(null);
        Call.AddArg(B.get());
        B.set(null);
        if (El.OpCode === 15) {
          Result = $Self.CreateUnaryNot(Call,El);
        } else Result = Call;
        return Result;
      };
      function ConcatArray(ArrayType) {
        var Call = null;
        Call = $Self.CreateArrayConcat$1(ArrayType,El,AContext,false);
        Result = Call;
        Call.AddArg(A.get());
        A.set(null);
        Call.AddArg(B.get());
        B.set(null);
        if (aResolver.IsManagedJSType(ArrayType)) Result = $Self.CreateIntfRef(Result,AContext,El);
      };
      var FunName = "";
      var Call = null;
      var InOp = null;
      var TypeEl = null;
      var LeftTypeEl = null;
      var RightTypeEl = null;
      var SNE = null;
      var JSBinClass = null;
      var ResolvedEl = $lt84.$new();
      var AInt = 0;
      var BInt = 0;
      var LArrType = null;
      Result = null;
      aResolver = AContext.Resolver;
      LeftTypeEl = LeftResolved.LoTypeEl;
      RightTypeEl = RightResolved.LoTypeEl;
      if ((LeftResolved.BaseType in rtl.createSet(34,36)) && (RightResolved.BaseType in rtl.createSet(34,36))) {
        var $tmp = El.OpCode;
        if ($tmp === 1) {
          FunName = this.GetBIName(113)}
         else if ($tmp === 2) {
          FunName = this.GetBIName(103)}
         else if ($tmp === 3) {
          FunName = this.GetBIName(108)}
         else if ($tmp === 23) {
          FunName = this.GetBIName(112)}
         else if ($tmp === 14) {
          FunName = this.GetBIName(104)}
         else if ($tmp === 15) {
          FunName = this.GetBIName(110)}
         else if ($tmp === 19) {
          FunName = this.GetBIName(106)}
         else if ($tmp === 18) {
          FunName = this.GetBIName(109)}
         else {
          this.DoError$2(20170209151300,4004,rtl.getResStr($mod,"sBinaryOpcodeNotSupported"),$lp6(18,$lm1.OpcodeStrings[El.OpCode]),El);
        };
        Call = this.CreateCallExpression(El);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),FunName]);
        Call.AddArg(A.get());
        A.set(null);
        Call.AddArg(B.get());
        B.set(null);
        Result = Call;
        return Result;
      } else if ((El.OpCode === 20) && (RightResolved.BaseType in rtl.createSet(34,36))) {
        if (!$lt137.isPrototypeOf(A.get()) || (A.get().FValue.FValueType !== 3)) {
          $lp(A);
          A.set(this.CreateSetLiteralElement(El.Left,AContext));
        };
        InOp = this.CreateElement($lt241,El);
        InOp.FA = A.get();
        A.set(null);
        InOp.FB = B.get();
        B.set(null);
        Result = InOp;
        return Result;
      } else if ((El.OpCode === 1) && (LeftResolved.BaseType === 2) && (LeftResolved.LoTypeEl.$class.ClassType() === $lt107)) {
        ConcatArray(LeftResolved.LoTypeEl);
        return Result;
      } else if ((El.OpCode === 1) && (RightResolved.BaseType === 2) && (RightResolved.LoTypeEl.$class.ClassType() === $lt107)) {
        ConcatArray(RightResolved.LoTypeEl);
        return Result;
      } else if ((El.OpCode === 1) && (LeftResolved.BaseType === 35)) {
        $lp22(ResolvedEl,LeftResolved.SubType,LeftResolved.LoTypeEl,LeftResolved.HiTypeEl,El.Left,rtl.refSet(LeftResolved.Flags));
        Call = this.CreateArrayConcat($lt84.$clone(ResolvedEl),El,AContext,false);
        Result = Call;
        if (aResolver.IsManagedJSType(LeftResolved.LoTypeEl)) Result = this.CreateIntfRef(Result,AContext,El);
        Call.AddArg(A.get());
        A.set(null);
        Call.AddArg(B.get());
        B.set(null);
        return Result;
      } else if (El.OpCode in rtl.createSet(9,8)) {
        if (LeftResolved.BaseType in rtl.createSet(28,27)) {
          if (this.IsLiteralInteger(B.get(),{get: function () {
              return BInt;
            }, set: function (v) {
              BInt = v;
            }})) {
            if (BInt >= 54) {
              Result = this.CreateLiteralNumber(El,0);
              $lp(A);
              $lp(B);
              return Result;
            } else if (BInt <= 0) {
              Result = A.get();
              A.set(null);
              $lp(B);
              return Result;
            } else if (this.IsLiteralInteger(A.get(),{get: function () {
                return AInt;
              }, set: function (v) {
                AInt = v;
              }})) {
              if (El.OpCode === 9) {
                AInt = rtl.shl(AInt,BInt)}
               else AInt = rtl.shr(AInt,BInt);
              if ((AInt >= 0) && (AInt <= 9007199254740991)) {
                A.get().FValue.SetAsNumber(AInt);
                Result = A.get();
                $lp(B);
                return Result;
              };
            } else if (El.OpCode === 8) {
              Result = this.CreateTruncFloor(El,this.CreateDivideNumber(El,A.get(),rtl.shl(1,BInt)),false);
              A.set(null);
              $lp(B);
              return Result;
            };
          };
          Call = this.CreateCallExpression(El);
          Result = Call;
          if (El.OpCode === 9) {
            Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(18)])}
           else Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(19)]);
          Call.AddArg(A.get());
          A.set(null);
          Call.AddArg(B.get());
          B.set(null);
          return Result;
        } else if (LeftResolved.BaseType === 25) {
          if (El.OpCode === 9) {
            JSBinClass = $lt224}
           else JSBinClass = $lt222;
          Result = this.CreateElement(JSBinClass,El);
          Result.FA = A.get();
          A.set(null);
          Result.FB = B.get();
          B.set(null);
          Result = this.CreateBitWiseLongword(El,Result);
          return Result;
        };
      } else if ((LeftResolved.BaseType === 14) || (RightResolved.BaseType === 14)) {
        var $tmp1 = El.OpCode;
        if (($tmp1 === 1) || ($tmp1 === 2) || ($tmp1 === 14) || ($tmp1 === 15) || ($tmp1 === 16) || ($tmp1 === 17) || ($tmp1 === 18) || ($tmp1 === 19)) {
          var $tmp2 = El.OpCode;
          if ($tmp2 === 1) {
            JSBinClass = $lt226}
           else if ($tmp2 === 2) {
            JSBinClass = $lt206}
           else if ($tmp2 === 14) {
            JSBinClass = $lt177}
           else if ($tmp2 === 15) {
            JSBinClass = $lt204}
           else if ($tmp2 === 16) {
            JSBinClass = $lt235}
           else if ($tmp2 === 17) {
            JSBinClass = $lt180}
           else if ($tmp2 === 18) {
            JSBinClass = $lt208}
           else if ($tmp2 === 19) JSBinClass = $lt207;
          Result = this.CreateElement(JSBinClass,El);
          if (LeftResolved.BaseType !== 14) A.set(this.CreateMulNumber(El,A.get(),10000));
          Result.FA = A.get();
          A.set(null);
          if (RightResolved.BaseType !== 14) B.set(this.CreateMulNumber(El,B.get(),10000));
          Result.FB = B.get();
          B.set(null);
          if ((14 in AContext.ScannerBoolSwitches) && (El.OpCode in rtl.createSet(1,2))) Result = this.CreateOverflowCheckCall(Result,El);
          return Result;
        } else if ($tmp1 === 3) {
          Result = this.CreateElement($lt172,El);
          Result.FA = A.get();
          A.set(null);
          Result.FB = B.get();
          B.set(null);
          if ((LeftResolved.BaseType === 14) && (RightResolved.BaseType === 14)) Result = this.CreateDivideNumber(El,Result,10000);
          if (14 in AContext.ScannerBoolSwitches) Result = this.CreateOverflowCheckCall(Result,El);
          return Result;
        } else if ($tmp1 === 4) {
          Result = this.CreateElement($lt170,El);
          Result.FA = A.get();
          A.set(null);
          Result.FB = B.get();
          B.set(null);
          if ((LeftResolved.BaseType === 14) && (RightResolved.BaseType === 14)) Result = this.CreateMulNumber(El,Result,10000);
          Result = this.CreateTruncFloor(El,Result,true);
          return Result;
        } else if ($tmp1 === 7) {
          if (LeftResolved.BaseType === 14) A.set(this.CreateDivideNumber(El,A.get(),10000));
          if (RightResolved.BaseType === 14) B.set(this.CreateDivideNumber(El,B.get(),10000));
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreatePrimitiveDotExpr("Math.pow",El);
          Call.AddArg(A.get());
          A.set(null);
          Call.AddArg(B.get());
          B.set(null);
          Result = this.CreateMulNumber(El,Call,10000);
          Result = this.CreateTruncFloor(El,Result,true);
        } else {
          this.RaiseNotSupported(El,AContext,20180422104215,"");
        };
      } else if ((LeftResolved.BaseType === 29) || ((LeftResolved.BaseType === 2) && (LeftTypeEl.$class.ClassType() === $lt95))) {
        var $tmp3 = El.OpCode;
        if (($tmp3 === 14) || ($tmp3 === 15)) {}
        else {
          this.DoError$2(20180423114054,3084,rtl.getResStr($lm6,"sIllegalQualifierAfter"),$lp6(18,$lm1.OpcodeStrings[El.OpCode],18,aResolver.GetResolverResultDescription(LeftResolved,true)),El);
        };
      } else if ((RightResolved.BaseType === 29) || ((RightResolved.BaseType === 2) && (RightTypeEl.$class.ClassType() === $lt95))) {
        var $tmp4 = El.OpCode;
        if (($tmp4 === 14) || ($tmp4 === 15)) {}
        else {
          this.DoError$2(20180423114246,3085,rtl.getResStr($lm6,"sIllegalQualifierInFrontOf"),$lp6(18,$lm1.OpcodeStrings[El.OpCode],18,aResolver.GetResolverResultDescription(RightResolved,true)),El);
        };
      } else if (El.OpCode === 21) {
        Call = this.CreateCallExpression(El);
        Result = Call;
        Call.AddArg(A.get());
        A.set(null);
        if ($lt76.isPrototypeOf(RightResolved.IdentEl)) {
          TypeEl = aResolver.ResolveAliasType(RightResolved.IdentEl,true)}
         else TypeEl = null;
        if ($lt112.isPrototypeOf(TypeEl)) {
          $lp(B);
          TypeEl = aResolver.ResolveAliasType(TypeEl.DestType,true);
          B.set(this.CreateReferencePathExpr(TypeEl,AContext,false,null));
        };
        if (LeftResolved.BaseType === 1) {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(57)]);
          Call.AddArg(B.get());
          B.set(null);
          if ($lt72.isPrototypeOf(RightTypeEl)) {
            Call.AddArg(this.CreateLiteralNumber(El.Right,1))}
           else if ($lt112.isPrototypeOf(RightTypeEl)) {
            Call.AddArg(this.CreateLiteralNumber(El.Right,2))}
           else NotSupported(20180119005904);
        } else if ($lt72.isPrototypeOf(RightTypeEl) && RightTypeEl.IsExternal) {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(57)]);
          Call.AddArg(B.get());
          B.set(null);
        } else if ($lt112.isPrototypeOf(LeftTypeEl)) {
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(56)]);
          Call.AddArg(B.get());
          B.set(null);
        } else {
          if ($lt72.isPrototypeOf(LeftTypeEl)) {
            if ($lt72.isPrototypeOf(RightTypeEl)) {
              var $tmp5 = LeftTypeEl.ObjKind;
              if ($tmp5 === 1) {
                var $tmp6 = RightTypeEl.ObjKind;
                if ($tmp6 === 1) {}
                else if ($tmp6 === 2) {
                  var $tmp7 = RightTypeEl.InterfaceType;
                  if ($tmp7 === 0) {
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(54)]);
                    Call.AddArg(B.get());
                    B.set(null);
                  } else if ($tmp7 === 1) {
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(46)]);
                    Call.AddArg(B.get());
                    B.set(null);
                    SNE = this.CreateElement($lt204,El);
                    Result = SNE;
                    SNE.FA = Call;
                    SNE.FB = this.CreateLiteralNull(El);
                  } else {
                    this.RaiseNotSupported(El,AContext,20180401225502,$lm1.InterfaceTypeNames[RightTypeEl.InterfaceType]);
                  };
                  return Result;
                } else {
                  NotSupported(20180327210501);
                };
              } else if ($tmp5 === 2) {
                var $tmp8 = RightTypeEl.ObjKind;
                if ($tmp8 === 1) {
                  Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(48)]);
                  Call.AddArg(B.get());
                  B.set(null);
                  return Result;
                } else if ($tmp8 === 2) {
                  if (LeftTypeEl.InterfaceType === 0) {
                    Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(49)]);
                    Call.AddArg(B.get());
                    B.set(null);
                    return Result;
                  }}
                 else {
                  NotSupported(20180327210741);
                };
              } else {
                NotSupported(20180327210251);
              };
            };
          };
          Call.FExpr = this.CreateDotNameExpr(El,B.get(),"isPrototypeOf");
          B.set(null);
        };
        return Result;
      } else if (El.OpCode in rtl.createSet(14,15)) {
        if (aResolver.IsProcedureType(LeftResolved,true)) {
          if (RightResolved.BaseType === 30) {}
          else if (aResolver.IsProcedureType(RightResolved,true) || aResolver.IsJSBaseType$1(RightResolved,1,true)) return CreateEqualCallback();
        } else if (aResolver.IsProcedureType(RightResolved,true)) {
          if (LeftResolved.BaseType === 30) {}
          else if (aResolver.IsJSBaseType$1(LeftResolved,1,true)) return CreateEqualCallback();
        } else if (LeftResolved.BaseType === 30) {
          if (RightResolved.BaseType === 2) {
            RightTypeEl = RightResolved.LoTypeEl;
            if (RightTypeEl.$class.ClassType() === $lt107) {
              $lp(A);
              Result = this.CreateCmpArrayWithNil(El,B.get(),El.OpCode);
              B.set(null);
              return Result;
            };
          };
        } else if (LeftResolved.BaseType in $lm3.btAllStrings) {
          if (RightResolved.BaseType === 2) {
            RightTypeEl = RightResolved.LoTypeEl;
            if (RightTypeEl.$class.ClassType() === $lt81) {
              if (aResolver.IsTGUID(RightTypeEl)) {
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(41),El);
                Call.AddArg(A.get());
                A.set(Call);
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreateDotNameExpr(El,B.get(),this.GetBIName(78));
                B.set(null);
                Call.AddArg(A.get());
                A.set(null);
                if (El.OpCode === 15) {
                  Result = this.CreateUnaryNot(Call,El)}
                 else Result = Call;
                return Result;
              };
            } else if (RightTypeEl.$class.ClassType() === $lt72) {
              if (RightTypeEl.ObjKind === 2) {
                B.set(this.CreateDotNameExpr(El.Left,B.get(),this.GetBIName(120)));
              };
            };
          };
        } else if (LeftResolved.BaseType === 2) {
          LeftTypeEl = LeftResolved.LoTypeEl;
          if (LeftTypeEl.$class.ClassType() === $lt81) {
            if (RightResolved.BaseType === 2) {
              RightTypeEl = RightResolved.LoTypeEl;
              if (RightTypeEl.$class.ClassType() === $lt81) {
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreateDotNameExpr(El,A.get(),this.GetBIName(78));
                A.set(null);
                Call.AddArg(B.get());
                B.set(null);
                if (El.OpCode === 15) {
                  Result = this.CreateUnaryNot(Call,El);
                } else Result = Call;
                return Result;
              } else if ((RightTypeEl.$class.ClassType() === $lt72) && (RightTypeEl.ObjKind === 2) && aResolver.IsTGUID(LeftTypeEl)) {
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(45),El);
                Call.AddArg(B.get());
                B.set(Call);
                Call = this.CreateCallExpression(El);
                Call.FExpr = this.CreateDotNameExpr(El,A.get(),this.GetBIName(78));
                A.set(null);
                Call.AddArg(B.get());
                B.set(null);
                if (El.OpCode === 15) {
                  Result = this.CreateUnaryNot(Call,El)}
                 else Result = Call;
                return Result;
              };
            } else if ((RightResolved.BaseType in $lm3.btAllStrings) && aResolver.IsTGUID(LeftTypeEl)) {
              Call = this.CreateCallExpression(El);
              Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(41),El);
              Call.AddArg(B.get());
              B.set(Call);
              Call = this.CreateCallExpression(El);
              Call.FExpr = this.CreateDotNameExpr(El,A.get(),this.GetBIName(78));
              A.set(null);
              Call.AddArg(B.get());
              B.set(null);
              if (El.OpCode === 15) {
                Result = this.CreateUnaryNot(Call,El)}
               else Result = Call;
              return Result;
            };
          } else if (LeftTypeEl.$class.ClassType() === $lt72) {
            if (RightResolved.BaseType in $lm3.btAllStrings) {
              if (LeftTypeEl.ObjKind === 2) {
                A.set(this.CreateDotNameExpr(El.Left,A.get(),this.GetBIName(120)));
              };
            } else if (RightResolved.BaseType === 2) {
              RightTypeEl = RightResolved.LoTypeEl;
              if (RightTypeEl.$class.ClassType() === $lt81) {
                if ((LeftTypeEl.ObjKind === 2) && aResolver.IsTGUID(RightTypeEl)) {
                  Call = this.CreateCallExpression(El);
                  Call.FExpr = this.CreatePrimitiveDotExpr(this.GetBIName(144) + "." + this.GetBIName(45),El);
                  Call.AddArg(A.get());
                  A.set(Call);
                  Call = this.CreateCallExpression(El);
                  Call.FExpr = this.CreateDotNameExpr(El,B.get(),this.GetBIName(78));
                  B.set(null);
                  Call.AddArg(A.get());
                  A.set(null);
                  if (El.OpCode === 15) {
                    Result = this.CreateUnaryNot(Call,El)}
                   else Result = Call;
                  return Result;
                };
              };
            };
          } else if (LeftTypeEl.$class.ClassType() === $lt107) {
            LArrType = LeftTypeEl;
            if (RightResolved.BaseType === 30) {
              $lp(B);
              Result = this.CreateCmpArrayWithNil(El,A.get(),El.OpCode);
              A.set(null);
              return Result;
            } else if (rtl.length(LArrType.Ranges) > 0) {
              aResolver.RaiseMsg(20200508102656,3081,rtl.getResStr($lm6,"sXIsNotSupported"),$lp6(18,"compare static array"),El);
            };
          };
        };
        if (aResolver.IsJSBaseType$1(LeftResolved,1,false) || aResolver.IsJSBaseType$1(RightResolved,1,false)) {
          if (El.OpCode === 14) {
            Result = this.CreateElement($lt228,El)}
           else Result = this.CreateElement($lt227,El);
          Result.FA = A.get();
          A.set(null);
          Result.FB = B.get();
          B.set(null);
          return Result;
        };
      };
      return Result;
    };
    this.ConvertBinaryExpressionMultiAdd = function (El, AContext) {
      var Result = null;
      var aResolver = null;
      var Left = null;
      var SubBin = null;
      var A = null;
      var B = null;
      var LeftResolved = $lt84.$new();
      var RightResolved = $lt84.$new();
      var ResultResolved = $lt84.$new();
      var Flags = {};
      var R = null;
      var OldAccess = 0;
      Result = null;
      aResolver = AContext.Resolver;
      Left = El;
      while (Left.$class.ClassType() === $lt85) {
        SubBin = Left;
        if (SubBin.OpCode !== 1) break;
        Left = SubBin.Left;
        if (Left.FParent !== SubBin) {
          if (aResolver !== null) {
            this.RaiseNotSupported(SubBin,AContext,20210321220458,"")}
           else if (Left.FParent === null) {
            Left.SetParent(SubBin)}
           else this.RaiseNotSupported(SubBin,AContext,20210321221135,"");
        };
      };
      if (Left === El) this.RaiseNotSupported(El,AContext,20210321221047,"");
      OldAccess = AContext.Access;
      AContext.Access = 0;
      A = null;
      B = null;
      try {
        A = this.ConvertExpression(Left,AContext);
        Flags = {};
        if (aResolver !== null) aResolver.ComputeElement(Left,LeftResolved,rtl.refSet(Flags),null);
        do {
          SubBin = Left.FParent;
          B = this.ConvertExpression(SubBin.Right,AContext);
          if (aResolver !== null) {
            aResolver.ComputeElement(SubBin.Right,RightResolved,rtl.refSet(Flags),null);
            Result = this.ConvertBinaryExpressionRes(SubBin,AContext,LeftResolved,RightResolved,{get: function () {
                return A;
              }, set: function (v) {
                A = v;
              }},{get: function () {
                return B;
              }, set: function (v) {
                B = v;
              }});
            if (Result !== null) {
              A = null;
              B = null;
              if (SubBin === El) return Result;
            };
            aResolver.ComputeBinaryExprRes(SubBin,ResultResolved,rtl.refSet(Flags),LeftResolved,RightResolved);
          };
          if (Result === null) {
            R = this.CreateElement($lt226,SubBin);
            R.FA = A;
            A = null;
            R.FB = B;
            B = null;
            Result = R;
            if ((14 in AContext.ScannerBoolSwitches) && (aResolver !== null)) {
              var $tmp = El.OpCode;
              if (($tmp === 1) || ($tmp === 2)) {
                if ((LeftResolved.BaseType in $mod.btAllJSOverflowAddSubType) || (RightResolved.BaseType in $mod.btAllJSOverflowAddSubType)) Result = this.CreateOverflowCheckCall(Result,SubBin)}
               else if ($tmp === 3) if ((LeftResolved.BaseType in $mod.btAllJSOverflowMultType) || (RightResolved.BaseType in $mod.btAllJSOverflowMultType)) Result = this.CreateOverflowCheckCall(Result,SubBin);
            };
            if (SubBin === El) return Result;
          };
          A = Result;
          Result = null;
          if (aResolver !== null) LeftResolved.$assign(ResultResolved);
          Left = SubBin;
        } while (!false);
      } finally {
        AContext.Access = OldAccess;
        if (Result === null) {
          A = rtl.freeLoc(A);
          B = rtl.freeLoc(B);
        };
      };
      return Result;
    };
    this.ConvertSubIdentExpression = function (El, AContext) {
      var Result = null;
      var RightRef = null;
      var RightEl = null;
      var RightRefDecl = null;
      var aResolver = null;
      Result = null;
      aResolver = AContext.Resolver;
      RightEl = El.Right;
      if ($lt182.isPrototypeOf(RightEl)) RightEl = RightEl.NameExpr;
      if (RightEl.$class.ClassType() !== $lt91) this.RaiseNotSupported(RightEl,AContext,20190131162250,"Left=" + $lp16(El.Left) + " right=" + $lp16(RightEl));
      if (!$lt71.isPrototypeOf(RightEl.FData)) this.RaiseNotSupported(RightEl,AContext,20190131162301,"");
      RightRef = RightEl.FData;
      RightRefDecl = RightRef.FDeclaration;
      if (aResolver.IsTObjectFreeMethod(RightEl)) {
        Result = this.ConvertTObjectFree_Bin(El,RightEl,AContext);
        return Result;
      } else if (aResolver.IsExternalClassConstructor(RightRefDecl)) {
        if ($lt86.isPrototypeOf(El.FParent) && (El.FParent.Value === El)) this.RaiseNotSupported(El,AContext,20190116135818,"");
        Result = this.ConvertExternalConstructor(El.Left,RightRef,null,AContext);
        return Result;
      };
      Result = this.ConvertSubIdentExprCustom(El,AContext,null,null);
      return Result;
    };
    this.ConvertSubIdentExprCustom = function (El, AContext, OnConvertRight, Data) {
      var Result = null;
      var OldAccess = 0;
      var LeftJS = null;
      var RightJS = null;
      var DotContext = null;
      var aResolver = null;
      var LeftResolved = $lt84.$new();
      var RightEl = null;
      var RightRef = null;
      var RightRefDecl = null;
      var Proc = null;
      aResolver = AContext.Resolver;
      RightEl = El.Right;
      if ($lt182.isPrototypeOf(RightEl)) RightEl = RightEl.NameExpr;
      if (RightEl.$class.ClassType() !== $lt91) {
        this.RaiseNotSupported(RightEl,AContext,20190131164529,"");
      };
      if (!$lt71.isPrototypeOf(RightEl.FData)) this.RaiseNotSupported(RightEl,AContext,20190131164530,"");
      RightRef = RightEl.FData;
      RightRefDecl = RightRef.FDeclaration;
      if (RightRefDecl.$class.ClassType() === $lt74) {
        var $tmp = AContext.Access;
        if ($tmp === 1) {
          RightRefDecl = aResolver.GetPasPropertySetter(RightRefDecl);
          if (RightRefDecl === null) this.DoError$2(20190211111137,3059,rtl.getResStr($lm6,"sNoMemberIsProvidedToAccessProperty"),[],RightEl);
        } else if ($tmp === 0) {
          RightRefDecl = aResolver.GetPasPropertyGetter(RightRefDecl);
          if (RightRefDecl === null) this.DoError$2(20190211111038,3059,rtl.getResStr($lm6,"sNoMemberIsProvidedToAccessProperty"),[],RightEl);
        };
      } else if (RightRefDecl.$class.ClassType() === $lt139) {
        Result = this.ConvertIdentifierExpr(RightEl,"",AContext);
        return Result;
      };
      if ((AContext.Access === 1) && aResolver.IsClassField(RightRefDecl)) {
        LeftJS = this.CreateReferencePathExpr(RightRefDecl.FParent,AContext,false,null);
        Result = this.CreateDotNameExpr(El,LeftJS,this.TransformElToJSName(RightRefDecl,AContext));
        return Result;
      };
      if ($lt67.isPrototypeOf(RightRefDecl)) {
        Proc = RightRefDecl;
        if (!aResolver.ProcHasSelf(Proc)) {
          if (OnConvertRight != null) {
            Result = OnConvertRight(RightEl,AContext,Data)}
           else Result = this.ConvertIdentifierExpr(RightEl,RightEl.Value,AContext);
          return Result;
        };
      };
      LeftJS = null;
      if (aResolver.IsHelper(RightRefDecl.FParent)) {
        if ($lt80.isPrototypeOf(RightRefDecl) && !(1 in RightRefDecl.VarModifiers)) {
          if (OnConvertRight != null) {
            Result = OnConvertRight(RightEl,AContext,Data)}
           else Result = this.ConvertIdentifierExpr(RightEl,RightEl.Value,AContext);
          return Result;
        } else if ($lt67.isPrototypeOf(RightRefDecl)) {
          Proc = RightRefDecl;
          if (Proc.IsExternal()) {}
          else if (2 in RightRef.Flags) {
            Result = this.CreateReferencePathExpr(RightRefDecl,AContext,false,null);
            return Result;
          } else {
            Result = this.CreateCallHelperMethod(Proc,El,AContext,false);
            return Result;
          };
        } else this.RaiseNotSupported(El,AContext,20190131170119,$lp16(RightRefDecl));
      };
      if (LeftJS === null) {
        if (aResolver !== null) {
          aResolver.ComputeElement(El.Left,LeftResolved,{},null)}
         else LeftResolved.$assign($lt84.$new());
        if (LeftResolved.BaseType === 3) {
          if (OnConvertRight != null) {
            Result = OnConvertRight(RightEl,AContext,Data)}
           else Result = this.ConvertIdentifierExpr(RightEl,RightEl.Value,AContext);
          return Result;
        };
        OldAccess = AContext.Access;
        AContext.Access = 0;
        LeftJS = this.ConvertExpression(El.Left,AContext);
        if (LeftJS === null) this.RaiseNotSupported(El,AContext,20190116110446,"");
        AContext.Access = OldAccess;
      };
      DotContext = $lt38.$create("Create$1",[El,LeftJS,AContext]);
      RightJS = null;
      try {
        DotContext.LeftResolved.$assign(LeftResolved);
        if (OnConvertRight != null) {
          RightJS = OnConvertRight(RightEl,DotContext,Data)}
         else RightJS = this.ConvertIdentifierExpr(RightEl,RightEl.Value,DotContext);
        if (DotContext.JS !== null) {
          LeftJS = null;
          RightJS = null;
          return DotContext.JS;
        };
      } finally {
        if ((RightJS === null) && (DotContext.JSElement === LeftJS)) LeftJS = rtl.freeLoc(LeftJS);
        DotContext = rtl.freeLoc(DotContext);
      };
      if ($lt137.isPrototypeOf(RightJS)) {
        LeftJS = rtl.freeLoc(LeftJS);
        return RightJS;
      };
      Result = this.CreateDotExpression(El,LeftJS,RightJS,true);
      return Result;
    };
    this.ConvertBoolConstExpression = function (El, AContext) {
      var Result = null;
      if (AContext === null) ;
      Result = this.CreateLiteralBoolean(El,El.Value);
      return Result;
    };
    this.ConvertPrimitiveExpression = function (El, AContext) {
      var $Self = this;
      var Result = null;
      function DeleteLeadingZeroes(s) {
        var Result = "";
        var i = 0;
        Result = s;
        i = 1;
        if (Result.charAt(0) === "$") {
          while (i < Result.length) {
            if ((Result.charAt(i - 1) === "0") && (Result.charCodeAt((i + 1) - 1) in rtl.createSet(null,48,57,null,65,70,null,97,102)) && ((i === 1) || !(Result.charCodeAt(i - 1 - 1) in rtl.createSet(null,48,57,null,65,70,null,97,102)))) {
              $lp40({get: function () {
                  return Result;
                }, set: function (v) {
                  Result = v;
                }},i,1)}
             else i += 1;
          }}
         else while (i < Result.length) {
          if ((Result.charAt(i - 1) === "0") && (Result.charCodeAt((i + 1) - 1) in rtl.createSet(null,48,57)) && ((i === 1) || !(Result.charCodeAt(i - 1 - 1) in rtl.createSet(46,null,48,57)))) {
            $lp40({get: function () {
                return Result;
              }, set: function (v) {
                Result = v;
              }},i,1)}
           else i += 1;
        };
        return Result;
      };
      var L = null;
      var number = 0.0;
      var ConversionError = 0;
      var Code = 0;
      var i = 0;
      var S = "";
      Result = null;
      var $tmp = El.Kind;
      if ($tmp === 2) {
        if (AContext.Resolver !== null) {
          Result = this.CreateLiteralJSString(El,AContext.Resolver.ExtractPasStringLiteral(El,El.Value))}
         else {
          S = $lp28(El.Value,"'");
          Result = this.CreateLiteralString(El,S);
        };
      } else if ($tmp === 3) {
        Result = this.CreateLiteralJSString(El,$lp24(El.Value));
      } else if ($tmp === 1) {
        var $tmp1 = El.Value.charAt(0);
        if (($tmp1 >= "0") && ($tmp1 <= "9")) {
          $lp41(El.Value,{get: function () {
              return number;
            }, set: function (v) {
              number = v;
            }},{get: function () {
              return ConversionError;
            }, set: function (v) {
              ConversionError = v;
            }});
          if (ConversionError !== 0) this.DoError$2(20161024191248,4005,rtl.getResStr($mod,"sInvalidNumber"),$lp6(18,El.Value),El);
          L = this.CreateLiteralNumber(El,number);
          L.FValue.FCustomValue = DeleteLeadingZeroes(El.Value);
        } else if (($tmp1 === "$") || ($tmp1 === "&") || ($tmp1 === "%")) {
          $lp42(El.Value,{get: function () {
              return i;
            }, set: function (v) {
              i = v;
            }},{get: function () {
              return Code;
            }, set: function (v) {
              Code = v;
            }});
          if (Code !== 0) this.DoError$2(20161024224442,4005,rtl.getResStr($mod,"sInvalidNumber"),$lp6(18,El.Value),El);
          number = i;
          if (number !== i) this.DoError$2(20161024230812,4005,rtl.getResStr($mod,"sInvalidNumber"),$lp6(18,El.Value),El);
          L = this.CreateLiteralNumber(El,number);
          S = DeleteLeadingZeroes(El.Value);
          S = $lp4(S,2,S.length);
          var $tmp2 = El.Value.charAt(0);
          if ($tmp2 === "$") {
            S = "0x" + S}
           else if ($tmp2 === "&") {
            if (this.FGlobals.TargetProcessor === 0) {
              S = ""}
             else S = "0o" + S}
           else if ($tmp2 === "%") if (this.FGlobals.TargetProcessor === 0) {
            S = ""}
           else S = "0b" + S;
          L.FValue.FCustomValue = S;
        } else {
          this.DoError$2(20161024223232,4005,rtl.getResStr($mod,"sInvalidNumber"),$lp6(18,El.Value),El);
        };
        Result = L;
      } else if ($tmp === 0) {
        Result = this.ConvertIdentifierExpr(El,El.Value,AContext)}
       else {
        this.RaiseNotSupported(El,AContext,20161024222543,"");
      };
      return Result;
    };
    this.ConvertIdentifierExpr = function (El, aName, AContext) {
      var $Self = this;
      var Result = null;
      var AssignContext = null;
      var ApplyParam = null;
      function CallImplicit(Decl) {
        var ProcType = null;
        var ResolvedEl = $lt84.$new();
        var Call = null;
        var NeedIntfRef = false;
        ProcType = null;
        if ($lt67.isPrototypeOf(Decl)) {
          ProcType = Decl.ProcType}
         else {
          AContext.Resolver.ComputeElement(El,ResolvedEl,rtl.createSet(1),null);
          if ($lt118.isPrototypeOf(ResolvedEl.LoTypeEl)) {
            ProcType = ResolvedEl.LoTypeEl}
           else $Self.RaiseNotSupported(El,AContext,20170217005025,"");
        };
        NeedIntfRef = false;
        if ($lt93.isPrototypeOf(ProcType) && !ProcType.GetIsAsync() && AContext.Resolver.IsManagedJSType(ProcType.ResultEl.ResultType)) NeedIntfRef = true;
        Call = null;
        try {
          $Self.CreateProcedureCall({get: function () {
              return Call;
            }, set: function (v) {
              Call = v;
            }},null,ProcType,AContext);
          if (ApplyParam !== null) {
            if (Call.FArgs === null) Call.FArgs = $Self.CreateElement($lt159,ProcType);
            Call.InsertArg(0,ApplyParam);
            ApplyParam = null;
            if ($lt38.isPrototypeOf(AContext)) AContext.JS = Call;
          };
          Call.FExpr = Result;
          if (NeedIntfRef) Call = $Self.CreateIntfRef(Call,AContext,El);
          Result = Call;
        } finally {
          if (Result !== Call) {
            Call = rtl.freeLoc(Call);
            ApplyParam = rtl.freeLoc(ApplyParam);
          };
        };
      };
      function CreateShortRefImplictCall_Apply(TargetProc, Ref) {
        var Result = "";
        var ApplyPath = "";
        Result = $Self.CreateStaticProcPath(TargetProc,AContext) + ".apply";
        ApplyPath = $Self.CreateReferencePath(TargetProc,AContext,0,false,Ref);
        if ($lt38.isPrototypeOf(AContext)) {
          ApplyParam = AContext.JSElement;
          AContext.JSElement = null;
          if (ApplyPath !== "") ApplyParam = $Self.CreateDotNameExpr(El,ApplyParam,ApplyPath);
        } else {
          if (ApplyPath === "") $Self.RaiseNotSupported(El,AContext,20201101022637,"");
          ApplyParam = $Self.CreatePrimitiveDotExpr(ApplyPath,El);
        };
        if (ApplyParam === null) $Self.RaiseNotSupported(El,AContext,20201101021136,"");
        return Result;
      };
      function CallTypeSetter() {
        var Call = null;
        if (AssignContext !== null) {
          if ($lt81.isPrototypeOf(AssignContext.LeftResolved.LoTypeEl)) {
            Call = $Self.CreateCallExpression(El);
            AssignContext.Call = Call;
            Call.FExpr = $Self.CreateDotNameExpr(El,Result,$Self.GetBIName(75));
            Call.AddArg(AssignContext.RightSide);
            AssignContext.RightSide = null;
            Result = Call;
          };
        };
      };
      var Decl = null;
      var Name = "";
      var Ref = null;
      var Call = null;
      var BuiltInProc = null;
      var Prop = null;
      var IsImplicitCall = false;
      var TargetProcType = null;
      var ArrLit = null;
      var FuncScope = null;
      var Value = null;
      var aResolver = null;
      var BracketExpr = null;
      var PathExpr = null;
      var Proc = null;
      Result = null;
      if (!$lt71.isPrototypeOf(El.FData)) {
        if (AContext.Resolver !== null) {
          this.RaiseIdentifierNotFound(aName,El,20161024191306)}
         else Result = this.CreateIdentifierExpr$1(aName,true,El,AContext);
        return Result;
      };
      aResolver = AContext.Resolver;
      Ref = El.FData;
      Decl = Ref.FDeclaration;
      if (aResolver.IsExternalClassConstructor(Decl)) {
        Result = this.ConvertExternalConstructor(null,Ref,null,AContext);
        return Result;
      };
      if (aResolver.IsExternalBracketAccessor(Decl)) this.DoError$2(20180511154132,4025,rtl.getResStr($mod,"sCantCallExtBracketAccessor"),[],El);
      if (rtl.neSet(rtl.intersectSet(rtl.createSet(3,4),Ref.Flags),{})) {
        Call = this.CreateFreeOrNewInstanceExpr(Ref,AContext);
        Result = Call;
        TargetProcType = Decl.ProcType;
        if (TargetProcType.Args.FCount > 0) {
          if (Decl.FParent.$class.ClassType() === $lt81) {
            this.CreateProcedureCallArgs(Call.FArgs.FElements,null,TargetProcType,AContext)}
           else {
            ArrLit = this.CreateElement($lt147,El);
            this.CreateProcedureCallArgs(ArrLit.FElements,null,TargetProcType,AContext);
            Call.AddArg(ArrLit);
          };
        };
        return Result;
      };
      if ((Ref.WithExprScope !== null) && aResolver.IsTObjectFreeMethod(El)) {
        Result = this.ConvertTObjectFree_With(El,AContext);
        return Result;
      };
      Prop = null;
      AssignContext = null;
      ApplyParam = null;
      IsImplicitCall = 1 in Ref.Flags;
      if (AContext.Access === 1) AssignContext = rtl.as(AContext.AccessContext,$lt39);
      if (Decl.$class.ClassType() === $lt89) {
        Result = this.CreateArgumentAccess(Decl,AContext,El);
        if (IsImplicitCall) CallImplicit(Decl);
        return Result;
      };
      if (Decl.$class.ClassType() === $lt74) {
        Prop = Decl;
        var $tmp = AContext.Access;
        if ($tmp === 1) {
          if (AssignContext.Call !== null) this.RaiseNotSupported(El,AContext,20170206000310,"");
          Decl = aResolver.GetPasPropertySetter(Prop);
          if ($lt67.isPrototypeOf(Decl)) {
            if (aResolver.IsHelperMethod(Decl)) {
              Result = this.CreateCallHelperMethod(Decl,El,AContext,false);
              return Result;
            };
            Call = this.CreateCallExpression(El);
            Call.FExpr = this.CreateReferencePathExpr(Decl,AContext,false,Ref);
            Result = this.AppendPropertyAssignArgs(Call,Prop,AssignContext,El);
            return Result;
          };
        } else if ($tmp === 0) {
          Result = this.CreatePropertyGet(Prop,El,AContext,El);
          if ($lt144.isPrototypeOf(Result)) return Result;
          if (!IsImplicitCall) return Result;
        } else {
          this.RaiseNotSupported(El,AContext,20170213212623,"");
        };
      };
      if (aResolver.IsClassField(Decl) && (AContext.Access in rtl.createSet(1,2))) {
        PathExpr = this.CreateReferencePathExpr(Decl.FParent,AContext,false,null);
        Result = this.CreateDotNameExpr(El,PathExpr,this.TransformElToJSName(Decl,AContext));
        CallTypeSetter();
        return Result;
      } else if (Decl.$class.ClassType() === $lt75) {
        if (Decl.IsConst && (Decl.Expr !== null)) {
          Value = aResolver.Eval(Decl.Expr,rtl.createSet(0),true);
          if (Value !== null) try {
            if (Value.Kind in rtl.createSet(2,3,4,5,6,9)) {
              Result = this.ConvertConstValue(Value,AContext,El);
              return Result;
            };
          } finally {
            $lp17({get: function () {
                return Value;
              }, set: function (v) {
                Value = v;
              }});
          };
          if (1 in Decl.VarModifiers) {
            Result = this.ConvertExpression(Decl.Expr,AContext);
            CallTypeSetter();
            return Result;
          };
        };
      } else if (Decl.$class.ClassType() === $lt242) {
        Call = this.CreateCallExpression(El);
        Result = Call;
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(33)]);
        Call.AddArg(this.CreatePrimitiveDotExpr(this.TransformModuleName(Decl.GetModule(),true,AContext),El));
        Call.AddArg(this.CreateLiteralString(El,this.TransformElToJSName(Decl,AContext)));
        return Result;
      } else if (aResolver.IsHelperMethod(Decl) && !(2 in Ref.Flags)) {
        Result = this.CreateCallHelperMethod(Decl,El,AContext,false);
        return Result;
      } else if ($lt199.isPrototypeOf(Decl.FData)) {
        BuiltInProc = Decl.FData;
        var $tmp1 = BuiltInProc.BuiltIn;
        if ($tmp1 === 5) {
          Result = this.ConvertBuiltInBreak(El,AContext)}
         else if ($tmp1 === 6) {
          Result = this.ConvertBuiltInContinue(El,AContext)}
         else if ($tmp1 === 7) {
          Result = this.ConvertBuiltIn_Exit(El,AContext)}
         else if ($tmp1 === 0) {
          var $tmp2 = BuiltInProc.FElement.FName;
          if ($tmp2 === "Debugger") {
            Result = this.ConvertBuiltIn_Debugger(El,AContext)}
           else {
            this.RaiseNotSupported(El,AContext,20181126102554,"built in custom proc " + BuiltInProc.FElement.FName);
          };
        } else {
          this.RaiseNotSupported(El,AContext,20161130164955,"built in proc " + $lm3.ResolverBuiltInProcNames[BuiltInProc.BuiltIn]);
        };
        if (Result === null) this.RaiseInconsistency(20170214120048,Decl);
        return Result;
      };
      try {
        if ($lt96.isPrototypeOf(Decl)) {
          Name = this.TransformModuleName(Decl,true,AContext)}
         else if ($lt90.isPrototypeOf(Decl)) {
          Name = $lm3.ResolverResultVar;
          Proc = rtl.as(Decl.FParent.FParent,$lt67);
          FuncScope = rtl.as(Proc.FData,$lt16);
          if (FuncScope.ImplProc !== null) FuncScope = rtl.as(FuncScope.ImplProc.FData,$lt16);
          if (FuncScope.ResultVarName !== "") Name = FuncScope.ResultVarName;
        } else if (Decl.$class.ClassType() === $lt139) {
          if (this.GetUseEnumNumbers()) {
            Result = this.CreateLiteralNumber(El,rtl.as(Decl.FParent,$lt99).Values.IndexOf(Decl));
            return Result;
          } else {
            Name = this.CreateReferencePath(Decl,AContext,2,true,null);
          };
        } else if (Decl.$class.ClassType() === $lt89) {
          Name = this.TransformArgName(Decl,AContext)}
         else if ($lt67.isPrototypeOf(Decl)) {
          Proc = Decl;
          if ((10 in this.FOptions) && aResolver.IsSpecializedNonStaticMethod(Proc.ProcType)) {
            Name = CreateShortRefImplictCall_Apply(Proc,Ref)}
           else Name = this.CreateReferencePath(Decl,AContext,2,false,Ref);
        } else Name = this.CreateReferencePath(Decl,AContext,2,false,Ref);
        if (Name === "") this.RaiseNotSupported(El,AContext,20180509134804,$lp16(Decl));
        if (Result === null) {
          if ((Name.charAt(0) === "[") && (Name.charAt(Name.length - 1) === "]") && $lt38.isPrototypeOf(AContext) && (AContext.JSElement !== null)) {
            if (IsImplicitCall) this.RaiseNotSupported(El,AContext,20180509134951,Name);
            BracketExpr = this.CreateElement($lt142,El);
            AContext.JS = BracketExpr;
            BracketExpr.FMExpr = AContext.JSElement;
            Result = this.CreateLiteralCustomValue(El,$lp4(Name,2,Name.length - 2));
            BracketExpr.FName = Result;
            return Result;
          };
          Result = this.CreatePrimitiveDotExpr(Name,El);
        };
        if (IsImplicitCall) CallImplicit(Decl);
        CallTypeSetter();
      } finally {
        ApplyParam = rtl.freeLoc(ApplyParam);
      };
      return Result;
    };
    this.ConvertUnaryExpression = function (El, AContext) {
      var $Self = this;
      var Result = null;
      function NotSupported(Id) {
        var ResolvedEl = $lt84.$new();
        if (AContext.Resolver !== null) {
          AContext.Resolver.ComputeElement(El.Operand,ResolvedEl,{},El);
          $Self.DoError$2(Id,3085,rtl.getResStr($lm6,"sIllegalQualifierInFrontOf"),$lp6(18,$lm1.OpcodeStrings[El.OpCode],18,AContext.Resolver.GetResolverResultDescription(ResolvedEl,false)),El);
        } else $Self.DoError$2(Id,4003,rtl.getResStr($mod,"sUnaryOpcodeNotSupported"),$lp6(18,$lm1.OpcodeStrings[El.OpCode]),El);
      };
      function DerefPointer(TypeEl) {
        var Result$1 = false;
        if (TypeEl.$class.ClassType() === $lt81) {
          Result = $Self.ConvertExpression(El.Operand,AContext);
          return true;
        };
        Result$1 = false;
        return Result$1;
      };
      var U = null;
      var E = null;
      var ResolvedEl = $lt84.$new();
      var BitwiseNot = false;
      var NeedLongWordBitFix = false;
      var aResolver = null;
      var TypeEl = null;
      var SubTypeEl = null;
      if (AContext === null) ;
      aResolver = AContext.Resolver;
      Result = null;
      U = null;
      var $tmp = El.OpCode;
      if ($tmp === 1) {
        E = this.ConvertExpression(El.Operand,AContext);
        U = this.CreateUnaryPlus(E,El);
        U.FA = E;
      } else if ($tmp === 2) {
        E = this.ConvertExpression(El.Operand,AContext);
        U = this.CreateElement($lt243,El);
        U.FA = E;
      } else if ($tmp === 10) {
        E = this.ConvertExpression(El.Operand,AContext);
        BitwiseNot = true;
        if (aResolver !== null) {
          aResolver.ComputeElement(El.Operand,ResolvedEl,{},null);
          BitwiseNot = ResolvedEl.BaseType in $mod.btAllJSInteger;
          NeedLongWordBitFix = ResolvedEl.BaseType === 25;
        } else NeedLongWordBitFix = false;
        if (BitwiseNot) {
          U = this.CreateElement($lt244,El);
          U.FA = E;
          if (NeedLongWordBitFix) return this.CreateBitWiseLongword(El,U);
        } else U = this.CreateUnaryNot(E,El);
      } else if ($tmp === 24) {
        if (aResolver === null) NotSupported(20180423162321);
        aResolver.ComputeElement(El.Operand,ResolvedEl,rtl.createSet(1),null);
        if (ResolvedEl.BaseType === 31) {
          if ($lt67.isPrototypeOf(ResolvedEl.IdentEl)) {
            Result = this.CreateCallback(El.Operand,$lt84.$clone(ResolvedEl),false,AContext);
            return Result;
          };
        } else if (ResolvedEl.BaseType === 2) {
          TypeEl = ResolvedEl.LoTypeEl;
          if (TypeEl.$class.ClassType() === $lt81) {
            Result = this.ConvertExpression(El.Operand,AContext);
            return Result;
          };
        };
      } else if ($tmp === 25) {
        if (aResolver === null) NotSupported(20180423162350);
        aResolver.ComputeElement(El.Operand,ResolvedEl,rtl.createSet(1),null);
        if (ResolvedEl.BaseType === 29) {
          TypeEl = ResolvedEl.LoTypeEl;
          if (DerefPointer(TypeEl)) return Result;
        } else if (ResolvedEl.BaseType === 2) {
          TypeEl = ResolvedEl.LoTypeEl;
          if (TypeEl.$class.ClassType() === $lt95) {
            SubTypeEl = aResolver.ResolveAliasType(TypeEl.DestType,true);
            if (DerefPointer(SubTypeEl)) return Result;
          };
        };
      } else if ($tmp === 26) {
        Result = this.ConvertExpression(El.Operand,AContext);
        return Result;
      };
      if (U === null) NotSupported(20180423162324);
      Result = U;
      return Result;
    };
    this.ConvertInlineSpecializeExpr = function (El, AContext) {
      var Result = null;
      Result = this.ConvertExpression(El.NameExpr,AContext);
      return Result;
    };
    this.ConvertElement = function (El, AContext) {
      var Result = null;
      var C = null;
      if (El === null) {
        Result = null;
        this.RaiseInconsistency(20161024190203,El);
      };
      C = El.$class.ClassType();
      if (C === $lt75) {
        Result = this.ConvertConst(El,AContext)}
       else if (C === $lt74) {
        Result = this.ConvertProperty(El,AContext)}
       else if (C === $lt80) {
        Result = this.ConvertVariable(El,AContext)}
       else if (C === $lt242) {
        Result = this.ConvertResString(El,AContext)}
       else if (C === $lt174) {
        Result = this.ConvertExportSymbol(El,AContext)}
       else if (C === $lt245) {
        Result = this.ConvertLabels(El,AContext)}
       else if (C === $lt246) {
        Result = this.ConvertLabelMark(El,AContext)}
       else if (C.InheritsFrom($lt87)) {
        Result = this.ConvertExpression(El,AContext)}
       else if (C.InheritsFrom($lt140)) {
        Result = this.ConvertDeclarations(El,AContext)}
       else if (C.InheritsFrom($lt67)) {
        Result = this.ConvertProcedure(El,AContext)}
       else if (C.InheritsFrom($lt92)) {
        Result = this.ConvertImplBlock(El,AContext)}
       else if (C === $lt247) {
        Result = this.ConvertImplCommand(El,AContext)}
       else if (C.InheritsFrom($lt96)) {
        Result = this.ConvertModule(El,AContext)}
       else if (C === $lt248) {
        Result = this.ConvertPackage(El,AContext)}
       else {
        Result = null;
        this.RaiseNotSupported(El,AContext,20161024190449,"");
      };
      return Result;
    };
    this.ConvertProperty = function (El, AContext) {
      var Result = null;
      Result = null;
      if (El.DispIDExpr !== null) this.RaiseNotSupported(El.DispIDExpr,AContext,20170215103029,"property dispid expression");
      return Result;
    };
    this.ConvertConst = function (El, AContext) {
      var Result = null;
      var AssignSt = null;
      var Obj = null;
      var ObjLit = null;
      var GlobalCtx = null;
      var C = null;
      var V = null;
      var Src = null;
      var Proc = null;
      var ProcScope = null;
      Result = null;
      if (El.AbsoluteExpr !== null) return Result;
      if (1 in El.VarModifiers) return Result;
      if (!AContext.IsGlobal) {
        GlobalCtx = AContext.GetGlobalFunc();
        if (!$lt123.isPrototypeOf(GlobalCtx.JSElement)) {
          this.RaiseNotSupported(El,AContext,20170220153216,"");
        };
        Src = GlobalCtx.JSElement;
        C = this.ConvertVariable(El,AContext);
        if (C === null) this.RaiseInconsistency(20180501114422,El);
        V = this.CreateElement($lt134,El);
        V.FA = C;
        this.AddToSourceElements(Src,V);
        if ((6 in this.FOptions) && (AContext.Resolver !== null)) {
          Proc = AContext.Resolver.GetTopLvlProc(AContext.PasElement);
          if (Proc !== null) {
            ProcScope = Proc.FData;
            ProcScope.AddGlobalJS(this.CreatePrecompiledJS(V));
          };
        };
      } else if ($lt35.isPrototypeOf(AContext)) {
        Obj = rtl.as(AContext.JSElement,$lt132);
        ObjLit = Obj.FElements.AddElement();
        ObjLit.FName = this.TransformElToJSName(El,AContext);
        ObjLit.FExpr = this.CreateVarInit(El,AContext);
      } else {
        AssignSt = this.CreateElement($lt133,El);
        Result = AssignSt;
        AssignSt.FLHS = this.CreateSubDeclNameExpr(El,AContext,null);
        AssignSt.FExpr = this.CreateVarInit(El,AContext);
      };
      return Result;
    };
    this.ConvertDeclarations = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var SLFirst = null;
      var SLLast = null;
      var IsProcBody = false;
      var IsFunction = false;
      var IsAssembler = false;
      var IsConstructor = false;
      var HasResult = false;
      var PasProc = null;
      var ProcScope = null;
      var ProcBody = null;
      var ResultEl = null;
      var ResultVarName = "";
      var ResStrVarEl = null;
      var ResStrVarElAdd = false;
      function Add(NewEl, PosEl) {
        if ($lt35.isPrototypeOf(AContext)) {}
        else if (AContext.IsGlobal && $lt123.isPrototypeOf(AContext.JSElement)) {
          $Self.AddToSourceElements(AContext.JSElement,NewEl)}
         else {
          $Self.AddToStatementList({get: function () {
              return SLFirst;
            }, set: function (v) {
              SLFirst = v;
            }},{get: function () {
              return SLLast;
            }, set: function (v) {
              SLLast = v;
            }},NewEl,PosEl);
          Result = SLFirst;
        };
      };
      function AddFunctionResultInit() {
        var Proc = null;
        var FunType = null;
        var VarSt = null;
        var ImplScope = null;
        Proc = rtl.as(El.FParent,$lt67);
        FunType = rtl.as(Proc.ProcType,$lt93);
        ResultEl = FunType.ResultEl;
        ImplScope = rtl.as(Proc.FData,$lt16);
        if ((ResultEl === null) || (ResultEl.ResultType === null)) {
          Proc = ImplScope.DeclarationProc;
          FunType = rtl.as(Proc.ProcType,$lt93);
          ResultEl = FunType.ResultEl;
        };
        if (ImplScope.ResultVarName !== "") {
          ResultVarName = ImplScope.ResultVarName}
         else ResultVarName = $lm3.ResolverResultVar;
        VarSt = $Self.CreateVarStatement(ResultVarName,$Self.CreateValInit(ResultEl.ResultType,null,ResultEl,AContext),ResultEl);
        Add(VarSt,ResultEl);
        Result = SLFirst;
      };
      function AddFunctionResultReturn() {
        var RetSt = null;
        RetSt = $Self.CreateElement($lt160,ResultEl);
        RetSt.FExpr = $Self.CreatePrimitiveDotExpr(ResultVarName,ResultEl);
        Add(RetSt,ResultEl);
      };
      function AddReturnThis() {
        var RetSt = null;
        var HelperForType = null;
        var Call = null;
        var Proc = null;
        var aResolver = null;
        var ClassOrRec = null;
        RetSt = $Self.CreateElement($lt160,El);
        RetSt.FExpr = $Self.CreateElement($lt213,El);
        aResolver = AContext.Resolver;
        if (aResolver !== null) {
          Proc = El.FParent;
          ProcScope = rtl.as(Proc.FData,$lt16);
          ClassOrRec = rtl.as(ProcScope.ClassRecScope.FElement,$lt73);
          if ((ClassOrRec.$class.ClassType() === $lt72) && (ClassOrRec.HelperForType !== null)) {
            HelperForType = AContext.Resolver.ResolveAliasType(ClassOrRec.HelperForType,true);
            if ($lt73.isPrototypeOf(HelperForType)) {}
            else {
              Call = $Self.CreateCallExpression(El);
              Call.FExpr = $Self.CreateDotExpression(El,RetSt.FExpr,$Self.CreatePrimitiveDotExpr($impl.TempRefObjGetterName,El),false);
              RetSt.FExpr = Call;
            };
          };
        };
        Add(RetSt,El);
      };
      function AddResourceString(ResStr) {
        var Value = null;
        var ObjLit = null;
        var Lit = null;
        var RootContext = null;
        Value = AContext.Resolver.Eval(ResStr.Expr,rtl.createSet(0),true);
        if ((ResStrVarEl === null) && (El.$class.ClassType() === $lt79)) {
          RootContext = rtl.as(AContext.GetRootContext(),$lt32);
          ResStrVarEl = RootContext.ResourceStrings;
        };
        if (ResStrVarEl === null) {
          ResStrVarEl = $Self.CreateElement($lt150,El);
          ResStrVarEl.FName = $Self.GetBIName(136) + "." + $Self.GetBIName(142);
          ResStrVarElAdd = true;
          ObjLit = $Self.CreateElement($lt132,El);
          ResStrVarEl.FInit = ObjLit;
          RootContext = AContext.GetContextOfType($lt32);
          RootContext.ResourceStrings = ResStrVarEl;
        };
        Lit = ResStrVarEl.FInit.FElements.AddElement();
        Lit.FName = $Self.TransformElToJSName(ResStr,AContext);
        ObjLit = $Self.CreateElement($lt132,ResStr);
        Lit.FExpr = ObjLit;
        Lit = ObjLit.FElements.AddElement();
        Lit.FName = $Self.GetBIName(143);
        Lit.FExpr = $Self.ConvertConstValue(Value,AContext,ResStr);
        $lp17({get: function () {
            return Value;
          }, set: function (v) {
            Value = v;
          }});
      };
      function InitForwards(Decls, SectionContext) {
        var i = 0;
        var P = null;
        var C = null;
        var Proc = null;
        var aResolver = null;
        aResolver = AContext.Resolver;
        for (var $l = 0, $end = Decls.FCount - 1; $l <= $end; $l++) {
          i = $l;
          P = rtl.getObject(Decls.Get(i));
          if (!$Self.IsElementUsed(P)) continue;
          C = P.$class.ClassType();
          if ((C === $lt72) || (C === $lt81) || (C === $lt99)) {
            if (C === $lt72) {
              if (P.IsForward) continue;
              if (!aResolver.IsFullySpecialized(P)) continue;
            } else if (C === $lt81) {
              if (!aResolver.IsFullySpecialized(P)) continue;
            };
            $Self.CreateGlobalAliasNull(P,132,SectionContext);
            if ((C === $lt72) || (C === $lt81)) InitForwards(P.Members,SectionContext);
          } else if (C.InheritsFrom($lt67)) {
            Proc = P;
            if (Proc.IsForward() || Proc.IsAbstract() || Proc.IsExternal()) continue;
            if (Proc.FData.SpecializedFromItem === null) continue;
            if (!aResolver.IsFullySpecialized$1(Proc)) continue;
            $Self.CreateGlobalAliasNull(P,131,SectionContext);
          };
        };
      };
      function InitSection(Section) {
        var SectionScope = null;
        var SectionCtx = null;
        var Src = null;
        var ImplSect = null;
        SectionScope = rtl.as(Section.FData,$lt12);
        AContext.ScannerBoolSwitches = rtl.refSet(SectionScope.BoolSwitches);
        AContext.ScannerModeSwitches = rtl.refSet(SectionScope.ModeSwitches);
        if (!$lt36.isPrototypeOf(AContext)) $Self.RaiseNotSupported(Section,AContext,20200606142828,$lp16(AContext));
        SectionCtx = AContext;
        Src = rtl.as(SectionCtx.JSElement,$lt123);
        SectionCtx.HeaderIndex = Src.FStatements.GetCount();
        if ((10 in $Self.FOptions) && (Section.$class.ClassType() !== $lt79)) {
          InitForwards(Section.Declarations,AContext);
          if ($lt114.isPrototypeOf(Section)) {
            ImplSect = Section.FParent.ImplementationSection;
            if (ImplSect !== null) InitForwards(ImplSect.Declarations,AContext);
          };
        };
      };
      var E = null;
      var BodySt = null;
      var I = 0;
      var P = null;
      var C = null;
      var FuncContext = null;
      Result = null;
      IsProcBody = $lt77.isPrototypeOf(El) && (El.Body !== null);
      IsFunction = IsProcBody && $lt93.isPrototypeOf(El.FParent.ProcType);
      IsAssembler = IsProcBody && $lt194.isPrototypeOf(El.Body);
      IsConstructor = IsProcBody && (El.FParent.$class.ClassType() === $lt109);
      HasResult = IsFunction && !IsAssembler;
      if ((AContext.Resolver !== null) && $lt105.isPrototypeOf(El)) InitSection(El);
      SLFirst = null;
      SLLast = null;
      ResultEl = null;
      ResultVarName = "";
      ResStrVarEl = null;
      ResStrVarElAdd = false;
      try {
        if (HasResult) AddFunctionResultInit();
        for (var $l = 0, $end = El.Declarations.FCount - 1; $l <= $end; $l++) {
          I = $l;
          P = rtl.getObject(El.Declarations.Get(I));
          if (!this.IsElementUsed(P)) continue;
          E = null;
          C = P.$class.ClassType();
          if (C === $lt75) {
            E = this.ConvertConst(P,AContext)}
           else if (C === $lt80) {
            E = this.CreateVarDecl(P,AContext)}
           else if (C.InheritsFrom($lt76)) {
            E = this.CreateTypeDecl(P,AContext)}
           else if (C.InheritsFrom($lt67)) {
            PasProc = P;
            if (PasProc.IsForward()) continue;
            ProcScope = PasProc.FData;
            if ((ProcScope.DeclarationProc !== null) && !ProcScope.DeclarationProc.IsForward()) continue;
            if (ProcScope.DeclarationProc !== null) PasProc = ProcScope.DeclarationProc;
            E = this.ConvertProcedure(PasProc,AContext);
          } else if (C === $lt242) {
            if (!$lt105.isPrototypeOf(El)) this.RaiseNotSupported(P,AContext,20171004185348,"");
            AddResourceString(P);
            continue;
          } else if (C === $lt186) {
            continue}
           else if (C === $lt174) {
            continue}
           else this.RaiseNotSupported(rtl.as(P,$lt249),AContext,20161024191434,"");
          Add(E,P);
        };
        if (IsProcBody) {
          ProcBody = El.Body;
          if ((ProcBody.Elements.FCount > 0) || IsAssembler) {
            BodySt = this.ConvertElement(ProcBody,AContext);
            if ($lt34.isPrototypeOf(AContext)) {
              FuncContext = AContext;
              FuncContext.BodySt = BodySt;
              this.AddInterfaceReleases(FuncContext,ProcBody);
              if (FuncContext.ResultNeedsIntfRelease) this.AddInterfaceRelease_Result(FuncContext,ResultVarName,ProcBody);
              BodySt = FuncContext.BodySt;
            };
            Add(BodySt,ProcBody);
          };
        };
        if (HasResult) {
          AddFunctionResultReturn()}
         else if (IsConstructor) AddReturnThis();
        if (ResStrVarEl !== null) {
          if (ResStrVarElAdd) Add(ResStrVarEl,El);
          ResStrVarEl = null;
        };
      } finally {
        ResStrVarEl = rtl.freeLoc(ResStrVarEl);
      };
      return Result;
    };
    this.ConvertExportSymbol = function (El, AContext) {
      var Result = null;
      this.RaiseNotSupported(El,AContext,20161024192650,"");
      Result = null;
      return Result;
    };
    this.ConvertExpression = function (El, AContext) {
      var Result = null;
      var C = null;
      Result = null;
      C = El.$class.ClassType();
      if (C === $lt136) {
        Result = this.ConvertUnaryExpression(El,AContext)}
       else if (C === $lt85) {
        Result = this.ConvertBinaryExpression(El,AContext)}
       else if (C === $lt91) {
        Result = this.ConvertPrimitiveExpression(El,AContext)}
       else if (C === $lt135) {
        Result = this.ConvertBoolConstExpression(El,AContext)}
       else if (C === $lt106) {
        Result = this.ConvertNilExpr(El,AContext)}
       else if (C === $lt237) {
        Result = this.ConvertInheritedExpr(El,AContext)}
       else if (C === $lt86) {
        Result = this.ConvertParamsExpr(El,AContext)}
       else if (C === $lt70) {
        Result = this.ConvertProcedure(El.Proc,AContext)}
       else if (C === $lt175) {
        Result = this.ConvertRecordValues(El,AContext)}
       else if (C === $lt178) {
        Result = this.ConvertArrayValues(El,AContext)}
       else if (C === $lt182) {
        Result = this.ConvertInlineSpecializeExpr(El,AContext)}
       else this.RaiseNotSupported(El,AContext,20161024191314,"");
      return Result;
    };
    this.ConvertImplBlock = function (El, AContext) {
      var Result = null;
      Result = null;
      if ($lt250.isPrototypeOf(El)) {
        Result = this.ConvertStatement(El,AContext)}
       else if (El.$class.ClassType() === $lt251) {
        Result = this.ConvertIfStatement(El,AContext)}
       else if (El.$class.ClassType() === $lt252) {
        Result = this.ConvertRepeatStatement(El,AContext)}
       else if (El.$class.ClassType() === $lt253) {
        Result = this.ConvertBeginEndStatement(El,AContext,true)}
       else if (El.$class.ClassType() === $lt254) {
        Result = this.ConvertInitializationSection(El.FParent,AContext)}
       else if (El.$class.ClassType() === $lt255) {
        Result = this.ConvertFinalizationSection(El,AContext)}
       else if (El.$class.ClassType() === $lt230) {
        Result = this.ConvertTryStatement(El,AContext)}
       else if (El.$class.ClassType() === $lt256) {
        Result = this.ConvertCaseOfStatement(El,AContext)}
       else this.RaiseNotSupported(El,AContext,20161024192156,"");
      return Result;
    };
    this.ConvertImplCommand = function (El, AContext) {
      var Result = null;
      if (El.Command !== "") this.RaiseNotSupported(El,AContext,20181013224809,El.Command);
      if (!$lt251.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181013224929,$lp16(El.FParent));
      Result = null;
      return Result;
    };
    this.ConvertLabelMark = function (El, AContext) {
      var Result = null;
      this.RaiseNotSupported(El,AContext,20161024192857,"");
      Result = null;
      return Result;
    };
    this.ConvertLabels = function (El, AContext) {
      var Result = null;
      this.RaiseNotSupported(El,AContext,20161024192701,"");
      Result = null;
      return Result;
    };
    this.ConvertModule = function (El, AContext) {
      var Result = null;
      var aResolver = null;
      var OuterSrc = null;
      var Src = null;
      var RegModuleCall = null;
      var Call = null;
      var ArgArray = null;
      var FunDecl = null;
      var ImplFunc = null;
      var UsesSection = null;
      var ModuleName = "";
      var ModVarName = "";
      var IntfContext = null;
      var ImplVarSt = null;
      var HasImplCode = false;
      var ok = false;
      var NeedRTLCheckVersion = false;
      var Prg = null;
      var Lib = null;
      var ImplFuncAssignSt = null;
      var IntfSecCtx = null;
      var ModScope = null;
      Result = null;
      aResolver = AContext.Resolver;
      if (aResolver !== null) {
        ModScope = rtl.as(El.FData,$lt9)}
       else ModScope = null;
      OuterSrc = this.CreateElement($lt123,El);
      Result = OuterSrc;
      IntfContext = null;
      ok = false;
      try {
        RegModuleCall = this.CreateCallExpression(El);
        this.AddToSourceElements(OuterSrc,RegModuleCall);
        RegModuleCall.FExpr = this.CreateMemberExpression([this.GetBIName(144),"module"]);
        ArgArray = RegModuleCall.FArgs;
        RegModuleCall.FArgs = ArgArray;
        ModuleName = this.TransformModuleName(El,false,AContext);
        ArgArray.FElements.AddElement().FExpr = this.CreateLiteralString(El,ModuleName);
        UsesSection = null;
        if ($lt97.isPrototypeOf(El)) {
          UsesSection = El.ProgramSection}
         else if ($lt98.isPrototypeOf(El)) {
          UsesSection = El.LibrarySection}
         else UsesSection = El.InterfaceSection;
        ArgArray.FElements.AddElement().FExpr = this.CreateUsesList(UsesSection,AContext);
        FunDecl = this.CreateFunctionSt(El,true,true);
        ArgArray.AddElement(FunDecl);
        Src = rtl.as(FunDecl.FFuncDef.FBody.FA,$lt123);
        if (3 in this.FOptions) this.AddToSourceElements(Src,this.CreateLiteralString(El,"use strict"));
        NeedRTLCheckVersion = (9 in this.FOptions) || ((8 in this.FOptions) && this.IsSystemUnit(El));
        if (NeedRTLCheckVersion) {
          Call = this.CreateCallExpression(El);
          Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(22)]);
          Call.AddArg(this.CreateLiteralNumber(El,this.FGlobals.RTLVersion));
          this.AddToSourceElements(Src,Call);
        };
        ImplVarSt = null;
        if (El.$class.ClassType() === $lt96) {
          IntfContext = $lt37.$create("Create$1",[El,Src,AContext])}
         else IntfContext = $lt36.$create("Create$1",[El,Src,AContext]);
        IntfContext.ThisVar.Element = El;
        IntfContext.ThisVar.Kind = 1;
        if ($lt51.isPrototypeOf(El.FData)) IntfContext.ScannerBoolSwitches = rtl.refSet(El.FData.BoolSwitches);
        ModVarName = this.GetBIName(136);
        IntfContext.AddLocalVar(ModVarName,El,1,false);
        this.AddToSourceElements(Src,this.CreateVarStatement(ModVarName,this.CreatePrimitiveDotExpr("this",El),El));
        if (ModScope !== null) this.RestoreImplJSLocals(ModScope,IntfContext);
        if ($lt97.isPrototypeOf(El)) {
          Prg = El;
          if (Prg.ProgramSection != null) this.AddToSourceElements(Src,this.ConvertDeclarations(Prg.ProgramSection,IntfContext));
          HasImplCode = this.AddDelayedInits(Prg,Src,IntfContext);
          this.CreateInitSection(Prg,Src,IntfContext);
        } else if ($lt98.isPrototypeOf(El)) {
          Lib = El;
          if (Lib.LibrarySection != null) this.AddToSourceElements(Src,this.ConvertDeclarations(Lib.LibrarySection,IntfContext));
          HasImplCode = this.AddDelayedInits(Lib,Src,IntfContext);
          this.CreateInitSection(Lib,Src,IntfContext);
        } else {
          IntfSecCtx = IntfContext;
          if (El.ImplementationSection != null) {
            ImplVarSt = this.CreateVarStatement(this.GetBIName(124),this.CreateMemberExpression([ModVarName,this.GetBIName(124)]),El);
            this.AddToSourceElements(Src,ImplVarSt);
            IntfSecCtx.AddLocalVar(this.GetBIName(124),El.ImplementationSection,1,false);
          };
          if (El.InterfaceSection != null) this.AddToSourceElements(Src,this.ConvertDeclarations(El.InterfaceSection,IntfSecCtx));
          ImplFunc = this.CreateImplementationSection(El,IntfSecCtx);
          ImplFuncAssignSt = this.CreateElement($lt133,El);
          ImplFuncAssignSt.FLHS = this.CreateMemberExpression([ModVarName,this.GetBIName(125)]);
          ImplFuncAssignSt.FExpr = ImplFunc;
          this.AddToSourceElements(Src,ImplFuncAssignSt);
          this.CreateInitSection(El,Src,IntfSecCtx);
          if (ImplFunc.FFuncDef.FBody.FA.FStatements.GetCount() > 0) {
            HasImplCode = true}
           else {
            this.RemoveFromSourceElements(Src,ImplVarSt);
            this.RemoveFromSourceElements(Src,ImplFuncAssignSt);
            HasImplCode = (El.ImplementationSection !== null) && (rtl.length(El.ImplementationSection.UsesClause) > 0);
          };
          if (HasImplCode) ArgArray.AddElement(this.CreateUsesList(El.ImplementationSection,AContext));
        };
        if ((ModScope !== null) && (6 in this.FOptions)) this.StoreImplJSLocals(ModScope,IntfContext);
        if ($lt98.isPrototypeOf(El)) {
          Lib = El;
          this.AddRTLRun(Lib,ModuleName,OuterSrc,AContext);
          this.CreateExportsSection(Lib,OuterSrc,AContext);
        } else if ($lt97.isPrototypeOf(El) && (this.FGlobals.TargetPlatform in rtl.createSet(1,3))) this.AddRTLRun(El,"",OuterSrc,AContext);
        ok = true;
      } finally {
        IntfContext = rtl.freeLoc(IntfContext);
        if (!ok) $lp({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }});
      };
      return Result;
    };
    this.ConvertPackage = function (El, AContext) {
      var Result = null;
      this.RaiseNotSupported(El,AContext,20161024192555,"");
      Result = null;
      return Result;
    };
    this.ConvertProcedure = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var BodyJS = null;
      var FirstSt = null;
      var LastSt = null;
      function AddBodyStatement(Add, Src) {
        $Self.AddToStatementList({get: function () {
            return FirstSt;
          }, set: function (v) {
            FirstSt = v;
          }},{get: function () {
            return LastSt;
          }, set: function (v) {
            LastSt = v;
          }},Add,Src);
        BodyJS.FA = FirstSt;
      };
      function AddRangeCheckType(Arg, aType, AContext) {
        var GetExpr = null;
        GetExpr = $Self.CreateArgumentAccess(Arg,AContext,Arg);
        AddBodyStatement($Self.CreateRangeCheckCall_TypeRange(aType,GetExpr,AContext,Arg),Arg);
      };
      var FS = null;
      var FD = null;
      var n = 0;
      var i = 0;
      var Line = 0;
      var Col = 0;
      var AssignSt = null;
      var AssignSt2 = null;
      var FuncContext = null;
      var ConstContext = null;
      var ProcScope = null;
      var ImplProcScope = null;
      var Arg = null;
      var SelfArg = null;
      var SelfSt = null;
      var ImplProc = null;
      var BodyPas = null;
      var PosEl = null;
      var ThisPas = null;
      var Call = null;
      var ClassPath = "";
      var aName = "";
      var ArgResolved = $lt84.$new();
      var Lit = null;
      var ConstSrcElems = null;
      var ArgTypeEl = null;
      var HelperForType = null;
      var aResolver = null;
      var IsClassConDestructor = false;
      var ThisKind = 0;
      var ImplJS = null;
      Result = null;
      if (El.IsAbstract()) return Result;
      if (El.IsExternal()) return Result;
      ProcScope = El.FData;
      if (ProcScope.DeclarationProc !== null) return Result;
      IsClassConDestructor = (El.$class.ClassType() === $lt184) || (El.$class.ClassType() === $lt185);
      aResolver = AContext.Resolver;
      if (!aResolver.IsFullySpecialized$1(El)) return Result;
      ImplProc = El;
      if (ProcScope.ImplProc !== null) ImplProc = ProcScope.ImplProc;
      ImplProcScope = ImplProc.FData;
      ImplJS = ImplProcScope.ImplJS;
      if (ImplJS !== null) {
        $lt69.UnmangleSourceLineNumber(El.SourceLinenumber,{get: function () {
            return Line;
          }, set: function (v) {
            Line = v;
          }},{get: function () {
            return Col;
          }, set: function (v) {
            Col = v;
          }});
        if (ImplJS.GlobalJS !== null) {
          ConstContext = AContext.GetGlobalFunc();
          if (!$lt123.isPrototypeOf(ConstContext.JSElement)) {
            this.RaiseNotSupported(El,AContext,20180228231008,"");
          };
          ConstSrcElems = ConstContext.JSElement;
          for (var $l = 0, $end = ImplJS.GlobalJS.GetCount() - 1; $l <= $end; $l++) {
            i = $l;
            Lit = $lt137.$create("Create$1",[Line,Col,El.SourceFilename]);
            Lit.FValue.FCustomValue = $lp24(ImplJS.GlobalJS.Get(i));
            this.AddToSourceElements(ConstSrcElems,Lit);
          };
        };
        if (10 in this.FOptions) this.CreateGlobalAlias_List(ImplJS.ShortRefs,AContext);
        Lit = $lt137.$create("Create$1",[Line,Col,El.SourceFilename]);
        Lit.FValue.FCustomValue = $lp24(ImplJS.BodyJS);
        Result = Lit;
        return Result;
      } else if ((6 in this.FOptions) && (aResolver !== null)) {
        if (aResolver.ProcCanBePrecompiled(El)) {
          ImplJS = $lt11.$create("Create");
          ImplProcScope.ImplJS = ImplJS;
        };
      };
      AssignSt = null;
      if (AContext.IsGlobal) {
        AssignSt = this.CreateElement($lt133,ImplProc);
        Result = AssignSt;
        AssignSt.FLHS = this.CreateSubDeclNameExpr(El,AContext,ImplProc);
        if (10 in this.FOptions) {
          aName = AContext.GetLocalName(El,rtl.createSet(1));
          if (aName !== "") {
            AssignSt2 = this.CreateElement($lt133,ImplProc);
            AssignSt.FExpr = AssignSt2;
            AssignSt = AssignSt2;
            AssignSt.FLHS = this.CreatePrimitiveDotExpr(aName,El);
          };
        };
      };
      FS = this.CreateFunctionSt(ImplProc,ImplProc.Body !== null,false);
      FD = FS.FFuncDef;
      FD.FIsAsync = El.IsAsync() || ImplProc.IsAsync();
      if (AssignSt !== null) {
        AssignSt.FExpr = FS}
       else {
        Result = FS;
        if ((El.FName !== "") && !IsClassConDestructor) FD.FName = this.TransformElToJSName(El,AContext);
      };
      for (var $l1 = 0, $end1 = El.ProcType.Args.FCount - 1; $l1 <= $end1; $l1++) {
        n = $l1;
        Arg = rtl.getObject(El.ProcType.Args.Get(n));
        FD.FTypedParams.AddParam(this.TransformElToJSName(Arg,AContext));
      };
      BodyPas = ImplProc.Body;
      if (BodyPas !== null) {
        PosEl = BodyPas;
        if (PosEl === null) PosEl = ImplProc;
        BodyJS = FD.FBody;
        FuncContext = $lt34.$create("Create$1",[ImplProc,FD.FBody,AContext]);
        try {
          FuncContext.ScannerBoolSwitches = rtl.refSet(ImplProcScope.BoolSwitches);
          FirstSt = null;
          LastSt = null;
          if (ProcScope.ClassRecScope !== null) {
            ThisKind = 0;
            SelfArg = null;
            if (!AContext.IsGlobal) {
              ThisPas = null;
            } else if (El.IsStatic() || IsClassConDestructor) {
              ThisPas = null}
             else {
              ThisPas = ProcScope.ClassRecScope.FElement;
              if (aResolver.IsHelper(ThisPas)) {
                HelperForType = aResolver.ResolveAliasType(ThisPas.HelperForType,true);
                ThisPas = HelperForType;
                if ($lt73.isPrototypeOf(HelperForType)) {
                  ThisKind = 3;
                } else {
                  ThisKind = 4;
                };
              } else if (aResolver.IsClassMethod(El)) {
                ThisKind = 2}
               else ThisKind = 3;
              if (ProcScope.ImplProc !== null) {
                SelfArg = ProcScope.ImplProc.FData.SelfArg}
               else SelfArg = ProcScope.SelfArg;
            };
            FuncContext.ThisVar.Element = ThisPas;
            FuncContext.ThisVar.Kind = ThisKind;
            if (ThisPas !== null) {
              if ((27 in FuncContext.ScannerBoolSwitches) && (ThisKind in rtl.createSet(1,3,2))) {
                Call = this.CreateCallExpression(PosEl);
                AddBodyStatement(Call,PosEl);
                Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(21)]);
                Call.AddArg(this.CreatePrimitiveDotExpr("this",PosEl));
                ClassPath = this.CreateReferencePath(ProcScope.ClassRecScope.FElement,AContext,2,false,null);
                Call.AddArg(this.CreatePrimitiveDotExpr(ClassPath,PosEl));
              };
              if ((ImplProc.Body.Functions.FCount > 0) || aResolver.HasAnonymousFunctions(ImplProc.Body.Body)) {
                FuncContext.AddLocalVar(this.GetBIName(167),ThisPas,ThisKind,false);
                SelfSt = this.CreateVarStatement(this.GetBIName(167),this.CreatePrimitiveDotExpr("this",ImplProc),ImplProc);
                AddBodyStatement(SelfSt,PosEl);
                if ((SelfArg !== null) && (ThisPas !== SelfArg)) {
                  FuncContext.AddLocalVar(this.GetBIName(167),SelfArg,ThisKind,false);
                };
              } else if ((SelfArg !== null) && (ThisPas !== SelfArg)) {
                FuncContext.AddLocalVar("this",SelfArg,ThisKind,false);
              };
            };
          };
          if (aResolver !== null) for (var $l2 = 0, $end2 = El.ProcType.Args.FCount - 1; $l2 <= $end2; $l2++) {
            i = $l2;
            Arg = rtl.getObject(El.ProcType.Args.Get(i));
            if (Arg.ArgType === null) continue;
            aResolver.ComputeElement(Arg,ArgResolved,rtl.createSet(4),null);
            ArgTypeEl = ArgResolved.LoTypeEl;
            if (ArgTypeEl === null) continue;
            if ((Arg.Access === 0) && aResolver.IsManagedJSType(ArgTypeEl)) FuncContext.Add_InterfaceRelease(Arg);
            if (15 in ImplProcScope.BoolSwitches) {
              if (ArgResolved.BaseType in $mod.btAllJSRangeCheckTypes) {
                AddRangeCheckType(Arg,ArgTypeEl,FuncContext)}
               else if (ArgResolved.BaseType === 2) {
                if (ArgTypeEl.$class.ClassType() === $lt99) AddRangeCheckType(Arg,ArgTypeEl,FuncContext);
              } else if (ArgResolved.BaseType === 37) {
                if (ArgResolved.SubType in $mod.btAllJSRangeCheckTypes) {
                  AddRangeCheckType(Arg,ArgTypeEl,FuncContext)}
                 else if (ArgResolved.SubType === 2) AddRangeCheckType(Arg,ArgTypeEl,FuncContext);
              };
            };
          };
          if (BodyPas !== null) AddBodyStatement(this.ConvertDeclarations(BodyPas,FuncContext),BodyPas);
        } finally {
          FuncContext = rtl.freeLoc(FuncContext);
        };
      };
      if (ImplJS !== null) {
        ImplJS.BodyJS = this.CreatePrecompiledJS(Result);
        ImplJS.EmptyJS = BodyPas.Body === null;
      };
      return Result;
    };
    this.ConvertResString = function (El, AContext) {
      var Result = null;
      this.RaiseNotSupported(El,AContext,20161024192604,"");
      Result = null;
      return Result;
    };
    this.ConvertVariable = function (El, AContext) {
      var Result = null;
      var V = null;
      var vm = 0;
      for (var $l = 0; $l <= 6; $l++) {
        vm = $l;
        if ((vm in El.VarModifiers) && !(vm in rtl.createSet(4,1))) this.RaiseNotSupported(El,AContext,20170208141622,"modifier " + $lm1.VariableModifierNames[vm]);
      };
      if (El.LibraryName !== null) this.RaiseNotSupported(El,AContext,20170208141844,"library name");
      if (El.AbsoluteExpr !== null) this.RaiseNotSupported(El,AContext,20170208141926,"absolute");
      V = this.CreateElement($lt150,El);
      V.FName = this.TransformElToJSName(El,AContext);
      V.FInit = this.CreateVarInit(El,AContext);
      Result = V;
      return Result;
    };
    this.ConvertRecordType = function (El, AContext) {
      var Result = null;
      var aResolver = null;
      var DelaySrc = null;
      var DelayFuncContext = null;
      var Call = null;
      var JSParentName = "";
      var JSName = "";
      var FunDecl = null;
      var Src = null;
      var FuncContext = null;
      var i = 0;
      var P = null;
      var C = null;
      var NewEl = null;
      var PasVar = null;
      var PasVarType = null;
      var NewFields = null;
      var Vars = null;
      var Methods = null;
      var ok = false;
      var IsComplex = false;
      var SpecializeDelay = false;
      var VarSt = null;
      var AssignSt = null;
      Result = null;
      if (El.FName === "") this.RaiseNotSupported(El,AContext,20190105101258,"anonymous record");
      aResolver = AContext.Resolver;
      if (!aResolver.IsFullySpecialized(El)) return Result;
      FuncContext = null;
      NewFields = null;
      Vars = null;
      Methods = null;
      DelaySrc = null;
      DelayFuncContext = null;
      ok = false;
      try {
        SpecializeDelay = this.SpecializeNeedsDelay(El,AContext);
        Call = this.CreateCallExpression(El);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(77)]);
        if ($lt77.isPrototypeOf(El.FParent)) {
          if (!$lt123.isPrototypeOf(AContext.JSElement)) this.RaiseNotSupported(El,AContext,20190105104054,"");
          Src = AContext.JSElement;
          JSName = this.TransformElToJSName(El,AContext);
          VarSt = this.CreateVarStatement(JSName,Call,El);
          this.AddToSourceElements(Src,VarSt);
          Call.AddArg(this.CreateLiteralNull(El));
          Call.AddArg(this.CreateLiteralString(El,""));
        } else {
          Result = Call;
          if ((El.FParent === null) || ($lt105.isPrototypeOf(El.FParent) && (El.FParent.$class.ClassType() !== $lt79))) {
            JSParentName = this.GetLocalName(El.GetModule(),rtl.createSet(1),AContext)}
           else JSParentName = this.GetLocalName(El.FParent,rtl.createSet(1),AContext);
          if (JSParentName === "") JSParentName = "this";
          Call.AddArg(this.CreatePrimitiveDotExpr(JSParentName,El));
          Call.AddArg(this.CreateLiteralString(El,this.TransformElToJSName(El,AContext)));
        };
        FunDecl = this.CreateFunctionSt(El,true,true);
        Call.AddArg(FunDecl);
        Src = FunDecl.FFuncDef.FBody.FA;
        FuncContext = $lt34.$create("Create$1",[El,Src,AContext]);
        FuncContext.IsGlobal = true;
        FuncContext.ThisVar.Element = El;
        FuncContext.ThisVar.Kind = 1;
        if ((10 in this.FOptions) && !$lt77.isPrototypeOf(El.FParent)) {
          JSName = AContext.GetLocalName(El,rtl.createSet(1));
          if (JSName === "") this.RaiseNotSupported(El,AContext,20200926235501,"");
          if (6 in this.FOptions) this.StoreImplJSLocal(El,AContext);
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = this.CreatePrimitiveDotExpr(JSName,El);
          AssignSt.FExpr = this.CreatePrimitiveDotExpr("this",El);
          this.AddToSourceElements(Src,AssignSt);
        };
        NewFields = $lt54.$create("Create");
        Vars = $lt54.$create("Create");
        Methods = $lt54.$create("Create");
        IsComplex = false;
        if (SpecializeDelay) DelayFuncContext = this.CreateDelayedInitMembersFunction(El,Src,FuncContext,{get: function () {
            return DelaySrc;
          }, set: function (v) {
            DelaySrc = v;
          }});
        for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          P = rtl.getObject(El.Members.Get(i));
          if (!this.IsElementUsed(P)) continue;
          C = P.$class.ClassType();
          NewEl = null;
          if (C === $lt80) {
            PasVar = P;
            if (rtl.neSet(rtl.intersectSet(PasVar.VarModifiers,rtl.createSet(4,5)),{})) {
              IsComplex = true}
             else if (aResolver !== null) {
              Vars.Add(PasVar);
              PasVarType = aResolver.ResolveAliasType(PasVar.VarType,true);
              if (PasVarType.$class.ClassType() === $lt107) {
                NewFields.Add(PasVar);
                continue;
              } else if (PasVarType.$class.ClassType() === $lt81) {
                NewFields.Add(PasVar);
                continue;
              } else if (PasVarType.$class.ClassType() === $lt117) {
                NewFields.Add(PasVar);
                continue;
              };
            };
            NewEl = this.CreateVarDecl(PasVar,FuncContext);
          } else if (C === $lt75) {
            NewEl = this.ConvertConst(P,FuncContext);
            IsComplex = true;
          } else if (C === $lt74) {
            NewEl = this.ConvertProperty(P,FuncContext)}
           else if (C.InheritsFrom($lt76)) {
            NewEl = this.CreateTypeDecl(P,FuncContext);
            if ((C === $lt81) || (C === $lt72)) IsComplex = true;
          } else if (C.InheritsFrom($lt67)) {
            if ((C === $lt184) || (C === $lt185)) {
              this.AddGlobalClassMethod(FuncContext,P)}
             else Methods.Add(P);
          } else if (C === $lt186) {}
          else this.RaiseNotSupported(P,FuncContext,20190105105436,"");
          if (NewEl !== null) {
            if (SpecializeDelay && !$lt67.isPrototypeOf(P)) {
              this.AddToSourceElements(DelaySrc,NewEl)}
             else this.AddToSourceElements(Src,NewEl);
          };
        };
        if (IsComplex) Call.AddArg(this.CreateLiteralBoolean(El,true));
        if (NewFields.FCount > 0) this.AddToSourceElements(Src,this.CreateRecordFunctionNew(El,FuncContext,NewFields));
        this.AddToSourceElements(Src,this.CreateRecordFunctionEqual(El,FuncContext,Vars));
        this.AddToSourceElements(Src,this.CreateRecordFunctionAssign(El,FuncContext,Vars));
        for (var $l1 = 0, $end1 = Methods.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          P = rtl.getObject(Methods.Get(i));
          NewEl = this.ConvertProcedure(P,FuncContext);
          this.AddToSourceElements(Src,NewEl);
        };
        if ((aResolver !== null) && this.HasTypeInfo(El,FuncContext)) {
          if (SpecializeDelay) {
            this.CreateRecordRTTI(El,Src,FuncContext,DelaySrc,DelayFuncContext)}
           else this.CreateRecordRTTI(El,Src,FuncContext,Src,FuncContext);
        };
        ok = true;
      } finally {
        NewFields = rtl.freeLoc(NewFields);
        Vars = rtl.freeLoc(Vars);
        Methods = rtl.freeLoc(Methods);
        DelayFuncContext = rtl.freeLoc(DelayFuncContext);
        FuncContext = rtl.freeLoc(FuncContext);
        if (!ok) $lp({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }});
      };
      return Result;
    };
    this.ConvertClassType = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var IsTObject = false;
      var AncestorIsExternal = false;
      function IsMemberNeeded(aMember) {
        var Result = false;
        if ($Self.IsElementUsed(aMember)) return true;
        if (IsTObject) {
          if (aMember.$class.ClassType() === $lt67) {
            if (($lp13(aMember.FName,"AfterConstruction") === 0) || ($lp13(aMember.FName,"BeforeDestruction") === 0)) return true;
          };
        };
        Result = false;
        return Result;
      };
      function AddInterfaceProcNames(Call) {
        var Arr = null;
        var i = 0;
        var Member = null;
        Arr = $Self.CreateElement($lt147,El);
        Call.AddArg(Arr);
        for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
          i = $l;
          Member = rtl.getObject(El.Members.Get(i));
          if (!$lt67.isPrototypeOf(Member)) continue;
          if (!IsMemberNeeded(Member)) continue;
          if ((Member.$class.ClassType() === $lt184) || (Member.$class.ClassType() === $lt185)) continue;
          Arr.AddElement($Self.CreateLiteralString(Member,$Self.TransformElToJSName(Member,AContext)));
        };
      };
      var aResolver = null;
      var DelaySrc = null;
      var DelayFuncContext = null;
      var Call = null;
      var FunDecl = null;
      var Src = null;
      var ArgEx = null;
      var FuncContext = null;
      var i = 0;
      var NewEl = null;
      var P = null;
      var Scope = null;
      var Ancestor = null;
      var AncestorPath = "";
      var OwnerName = "";
      var DestructorName = "";
      var FnName = "";
      var IntfKind = "";
      var JSName = "";
      var C = null;
      var AssignSt = null;
      var NeedInitFunction = false;
      var HasConstructor = false;
      var IsJSFunction = false;
      var NeedClassExt = false;
      var SpecializeDelay = false;
      var NeedTypeInfo = false;
      var Proc = null;
      Result = null;
      aResolver = AContext.Resolver;
      if (!(El.ObjKind in rtl.createSet(1,2,3,4,5))) this.RaiseNotSupported(El,AContext,20170927183645,"");
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231004355,"");
      if (!aResolver.IsFullySpecialized(El)) return Result;
      if (El.IsForward) {
        return this.ConvertClassForwardType(El,AContext)}
       else if (El.IsExternal) return this.ConvertExtClassType(El,AContext);
      IsTObject = false;
      if ($lt14.isPrototypeOf(El.FData)) {
        Scope = El.FData;
        if (Scope.AncestorScope !== null) {
          Ancestor = rtl.as(Scope.AncestorScope.FElement,$lt76)}
         else {
          Ancestor = null;
          IsTObject = (El.ObjKind === 1) && $lp18(El.FName,"TObject");
        };
        $lp({p: Scope, get: function () {
            return this.p.MsgIntToProc;
          }, set: function (v) {
            this.p.MsgIntToProc = v;
          }});
        $lp({p: Scope, get: function () {
            return this.p.MsgStrToProc;
          }, set: function (v) {
            this.p.MsgStrToProc = v;
          }});
        SpecializeDelay = this.SpecializeNeedsDelay(El,AContext);
      } else {
        Scope = null;
        IsTObject = (El.AncestorType === null) && (El.ObjKind === 1) && $lp18(El.FName,"TObject");
        Ancestor = El.AncestorType;
        SpecializeDelay = false;
      };
      FuncContext = null;
      DelaySrc = null;
      DelayFuncContext = null;
      Call = this.CreateCallExpression(El);
      try {
        AncestorIsExternal = $lt72.isPrototypeOf(Ancestor) && Ancestor.IsExternal;
        IsJSFunction = aResolver.IsExternalClass_Name(El,"Function");
        NeedClassExt = AncestorIsExternal || IsJSFunction;
        if (NeedClassExt && (El.ObjKind !== 1)) this.RaiseNotSupported(El,AContext,20200627083750,"");
        if (El.ObjKind === 2) {
          FnName = this.GetBIName(40)}
         else if (El.ObjKind in $lm1.okAllHelpers) {
          FnName = this.GetBIName(29)}
         else if (NeedClassExt) {
          FnName = this.GetBIName(28)}
         else FnName = this.GetBIName(27);
        Call.FExpr = this.CreateMemberExpression([this.GetBIName(144),FnName]);
        if ((El.FParent === null) || ($lt105.isPrototypeOf(El.FParent) && (El.FParent.$class.ClassType() !== $lt79))) {
          OwnerName = AContext.GetLocalName(El.GetModule(),rtl.createSet(1))}
         else OwnerName = AContext.GetLocalName(El.FParent,rtl.createSet(1));
        if (OwnerName === "") OwnerName = "this";
        Call.AddArg(this.CreatePrimitiveDotExpr(OwnerName,El));
        JSName = this.TransformElToJSName(El,AContext);
        ArgEx = this.CreateLiteralString(El,JSName);
        Call.AddArg(ArgEx);
        if (El.ObjKind === 2) {
          Call.AddArg(this.CreateLiteralString(El,$lp43(Scope.GUID)));
          AddInterfaceProcNames(Call);
        };
        if (Ancestor === null) {
          AncestorPath = "null"}
         else if (AncestorIsExternal) {
          AncestorPath = Ancestor.ExternalName}
         else AncestorPath = this.CreateReferencePath(Ancestor,AContext,2,false,null);
        Call.AddArg(this.CreatePrimitiveDotExpr(AncestorPath,El));
        if (NeedClassExt) {
          if (Scope.NewInstanceFunction !== null) {
            Call.AddArg(this.CreateLiteralString(Scope.NewInstanceFunction,Scope.NewInstanceFunction.FName))}
           else Call.AddArg(this.CreateLiteralString(El,""));
        };
        NeedInitFunction = true;
        NeedTypeInfo = (2 in Scope.Flags) || this.HasTypeInfo(El,AContext) || aResolver.HasExtRTTI(El);
        IntfKind = "";
        if (El.ObjKind === 2) {
          if ((Scope.AncestorScope === null) && !(4 in this.FOptions)) {
            var $tmp = El.InterfaceType;
            if ($tmp === 0) {
              IntfKind = "com"}
             else if ($tmp === 1) {}
            else {
              this.RaiseNotSupported(El,AContext,20180405093512,"");
            };
          };
          NeedInitFunction = NeedTypeInfo || (IntfKind !== "") || (10 in this.FOptions);
        };
        if (NeedInitFunction) {
          FunDecl = this.CreateFunctionSt(El,true,true);
          Call.AddArg(FunDecl);
          Src = FunDecl.FFuncDef.FBody.FA;
          FuncContext = $lt34.$create("Create$1",[El,Src,AContext]);
          FuncContext.IsGlobal = true;
          FuncContext.ThisVar.Element = El;
          FuncContext.ThisVar.Kind = 1;
          if (10 in this.FOptions) {
            JSName = AContext.GetLocalName(El,rtl.createSet(1));
            if (JSName === "") this.RaiseNotSupported(El,AContext,20200926232402,"");
            AssignSt = this.CreateElement($lt133,El);
            AssignSt.FLHS = this.CreatePrimitiveDotExpr(JSName,El);
            AssignSt.FExpr = this.CreatePrimitiveDotExpr("this",El);
            this.AddToSourceElements(Src,AssignSt);
          };
          if (IntfKind !== "") {
            AssignSt = this.CreateElement($lt133,El);
            AssignSt.FLHS = this.CreatePrimitiveDotExpr("this." + this.GetBIName(121),El);
            AssignSt.FExpr = this.CreateLiteralString(El,IntfKind);
            this.AddToSourceElements(Src,AssignSt);
          };
          if (SpecializeDelay) DelayFuncContext = this.CreateDelayedInitMembersFunction(El,Src,FuncContext,{get: function () {
              return DelaySrc;
            }, set: function (v) {
              DelaySrc = v;
            }});
          if (El.ObjKind in rtl.unionSet(rtl.createSet(1),$lm1.okAllHelpers)) {
            for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
              i = $l;
              P = rtl.getObject(El.Members.Get(i));
              if (!IsMemberNeeded(P)) continue;
              C = P.$class.ClassType();
              NewEl = null;
              if (C === $lt80) {
                if (rtl.neSet(rtl.intersectSet(rtl.intersectSet($mod.ClassVarModifiersType,P.VarModifiers),rtl.createSet(4,5)),{})) {
                  NewEl = this.CreateVarDecl(P,FuncContext);
                  if (NewEl === null) continue;
                } else continue;
              } else if (C === $lt75) {
                NewEl = this.ConvertConst(P,FuncContext)}
               else if (C === $lt74) {
                NewEl = this.ConvertProperty(P,FuncContext)}
               else if (C.InheritsFrom($lt76)) {
                NewEl = this.CreateTypeDecl(P,FuncContext)}
               else if (C.InheritsFrom($lt67)) {
                continue}
               else if (C === $lt257) {
                continue}
               else if (C === $lt186) {
                continue}
               else this.RaiseNotSupported(P,FuncContext,20161221233338,"");
              if (NewEl !== null) {
                if (SpecializeDelay && !$lt67.isPrototypeOf(P)) {
                  this.AddToSourceElements(DelaySrc,NewEl)}
                 else this.AddToSourceElements(Src,NewEl);
              };
            };
          };
          if (El.ObjKind in rtl.createSet(1)) {
            this.AddClassConDestructorFunction(El,Src,FuncContext,IsTObject,Ancestor,0);
            this.AddClassConDestructorFunction(El,Src,FuncContext,IsTObject,Ancestor,1);
          };
          if (El.ObjKind in rtl.unionSet(rtl.createSet(1),$lm1.okAllHelpers)) {
            HasConstructor = false;
            for (var $l1 = 0, $end1 = El.Members.FCount - 1; $l1 <= $end1; $l1++) {
              i = $l1;
              P = rtl.getObject(El.Members.Get(i));
              if (!IsMemberNeeded(P)) continue;
              NewEl = null;
              C = P.$class.ClassType();
              if (!$lt67.isPrototypeOf(P)) continue;
              Proc = P;
              if (IsTObject && (C === $lt173)) {
                DestructorName = this.TransformElToJSName(P,AContext);
                if (DestructorName !== "Destroy") {
                  AssignSt = this.CreateElement($lt133,P);
                  AssignSt.FLHS = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(168)]);
                  AssignSt.FExpr = this.CreateLiteralString(P,DestructorName);
                  this.AddToSourceElements(Src,AssignSt);
                };
              } else if (C === $lt109) {
                HasConstructor = true}
               else if ((C === $lt184) || (C === $lt185)) {
                this.AddGlobalClassMethod(AContext,Proc);
                continue;
              } else if ((Proc.MessageExpr !== null) && (aResolver !== null)) aResolver.AddMessageIdToClassScope(Proc,false);
              NewEl = this.ConvertProcedure(Proc,FuncContext);
              if (NewEl === null) continue;
              this.AddToSourceElements(Src,NewEl);
            };
            if (HasConstructor && (El.HelperForType !== null)) this.AddHelperConstructor(El,Src,FuncContext);
          };
          if (aResolver !== null) {
            if (El.ObjKind === 1) this.AddClassSupportedInterfaces(El,Src,FuncContext);
            this.AddClassMessageIds(El,Src,FuncContext,126);
            this.AddClassMessageIds(El,Src,FuncContext,127);
            if (NeedTypeInfo) {
              if (SpecializeDelay) {
                this.AddClassRTTI(El,DelaySrc,DelayFuncContext)}
               else this.AddClassRTTI(El,Src,FuncContext);
            };
          };
        };
        if (((Scope.JSName !== "") && (Scope.JSName !== El.FName)) || $lt73.isPrototypeOf(El.FParent)) {
          Call.AddArg(this.CreateLiteralString(El,this.GetTypeInfoName(El,AContext,El,false)));
        };
        Result = Call;
      } finally {
        FuncContext = rtl.freeLoc(FuncContext);
        DelayFuncContext = rtl.freeLoc(DelayFuncContext);
        if (Result !== Call) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.ConvertClassForwardType = function (El, AContext) {
      var Result = null;
      var Ref = null;
      var aClass = null;
      var Creator = "";
      var ObjLit = null;
      Result = null;
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231004420,"");
      if ((El.GenericTemplateTypes !== null) && (El.GenericTemplateTypes.FCount > 0)) return Result;
      if ((AContext.Resolver === null) || !$lt71.isPrototypeOf(El.FData)) return Result;
      Ref = El.FData;
      aClass = rtl.as(Ref.FDeclaration,$lt72);
      if (this.IsClassRTTICreatedBefore(aClass,El,AContext)) return Result;
      if (!this.HasTypeInfo(aClass,AContext)) return Result;
      Creator = this.GetClassBIName(aClass,AContext);
      Result = this.CreateRTTINewType(aClass,Creator,true,AContext,{get: function () {
          return ObjLit;
        }, set: function (v) {
          ObjLit = v;
        }});
      if (ObjLit !== null) this.RaiseInconsistency(20170412093427,El);
      return Result;
    };
    this.ConvertClassOfType = function (El, AContext) {
      var Result = null;
      var ObjLit = null;
      var Prop = null;
      var Call = null;
      var ok = false;
      var List = null;
      var DestType = null;
      Result = null;
      if (!this.HasTypeInfo(El,AContext)) return Result;
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231004435,"");
      ok = false;
      Call = this.CreateRTTINewType(El,this.GetBIName(86),false,AContext,{get: function () {
          return ObjLit;
        }, set: function (v) {
          ObjLit = v;
        }});
      Result = Call;
      try {
        Prop = ObjLit.FElements.AddElement();
        Prop.FName = this.GetBIName(148);
        DestType = rtl.as(AContext.Resolver.ResolveAliasType(El.DestType,true),$lt72);
        Prop.FExpr = this.CreateTypeInfoRef(DestType,AContext,El);
        if (this.IsClassRTTICreatedBefore(DestType,El,AContext)) {}
        else {
          if (!$lt34.isPrototypeOf(AContext)) this.RaiseNotSupported(El,AContext,20170412102916,"");
          Call = this.CreateRTTINewType(DestType,this.GetClassBIName(DestType,AContext),true,AContext,{get: function () {
              return ObjLit;
            }, set: function (v) {
              ObjLit = v;
            }});
          if (ObjLit !== null) this.RaiseInconsistency(20170412102654,El);
          List = this.CreateElement($lt129,El);
          List.FA = Call;
          List.FB = Result;
          Result = List;
        };
        ok = true;
      } finally {
        if (!ok) $lp({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }});
      };
      return Result;
    };
    this.ConvertExtClassType = function (El, AContext) {
      var Result = null;
      var A = 0;
      var TIObj = null;
      var Call = null;
      var TIProp = null;
      var ClassScope = null;
      var AncestorType = null;
      var aResolver = null;
      var St = null;
      var MemberElement = null;
      Result = null;
      if (!El.IsExternal) this.RaiseNotSupported(El,AContext,20191027183236,"");
      aResolver = AContext.Resolver;
      if (!aResolver.IsFullySpecialized(El)) return Result;
      if (!this.HasTypeInfo(El,AContext)) return Result;
      if (!$lt34.isPrototypeOf(AContext)) this.RaiseNotSupported(El,AContext,20191027182023,"typeinfo");
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20191027182019,"");
      ClassScope = rtl.as(El.FData,$lt14);
      if (ClassScope.AncestorScope !== null) {
        AncestorType = rtl.as(ClassScope.AncestorScope.FElement,$lt72)}
       else AncestorType = null;
      Call = null;
      try {
        Call = this.CreateRTTINewType(El,this.GetBIName(89),false,AContext,{get: function () {
            return TIObj;
          }, set: function (v) {
            TIObj = v;
          }});
        if (AncestorType !== null) {
          TIProp = TIObj.FElements.AddElement();
          TIProp.FName = this.GetBIName(165);
          TIProp.FExpr = this.CreateTypeInfoRef(AncestorType,AContext,El);
        };
        TIProp = TIObj.FElements.AddElement();
        TIProp.FName = this.GetBIName(166);
        TIProp.FExpr = this.CreateLiteralString(El,El.ExternalName);
        St = this.CreateElement($lt129,El);
        St.FA = Call;
        Result = St;
        for (var $l = 0, $end = El.Members.FCount - 1; $l <= $end; $l++) {
          A = $l;
          MemberElement = rtl.getObject(El.Members.Get(A));
          if ($lt72.isPrototypeOf(MemberElement) && !MemberElement.IsForward) {
            St.FB = this.ConvertExtClassType(MemberElement,AContext);
            St = rtl.as(St.FB,$lt129);
          };
        };
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.ConvertEnumType = function (El, AContext) {
      var Result = null;
      var ObjectContect = null;
      var i = 0;
      var EnumValue = null;
      var ParentObj = null;
      var Obj = null;
      var TIObj = null;
      var ObjLit = null;
      var TIProp = null;
      var AssignSt = null;
      var JSName = "";
      var Call = null;
      var List = null;
      var ok = false;
      var OrdType = 0;
      var Src = null;
      var ProcScope = null;
      var VarSt = null;
      var SectionContext = null;
      Result = null;
      for (var $l = 0, $end = El.Values.FCount - 1; $l <= $end; $l++) {
        i = $l;
        EnumValue = rtl.getObject(El.Values.Get(i));
        if (EnumValue.Value !== null) this.RaiseNotSupported(EnumValue.Value,AContext,20170208145221,"enum constant");
      };
      ok = false;
      ObjectContect = null;
      Src = null;
      Call = null;
      VarSt = null;
      ProcScope = null;
      try {
        Obj = this.CreateElement($lt132,El);
        if ($lt35.isPrototypeOf(AContext)) {
          ParentObj = rtl.as(AContext.JSElement,$lt132);
          ObjLit = ParentObj.FElements.AddElement();
          ObjLit.FName = this.TransformElToJSName(El,AContext);
          ObjLit.FExpr = Obj;
          Result = Obj;
        } else if ($lt77.isPrototypeOf(El.FParent)) {
          JSName = this.TransformElToJSName(El,AContext);
          VarSt = this.CreateVarStatement(JSName,Obj,El);
          if ($lt123.isPrototypeOf(AContext.JSElement)) {
            Src = AContext.JSElement;
            this.AddToSourceElements(Src,VarSt);
            if ($lt34.isPrototypeOf(AContext)) AContext.AddLocalVar(JSName,El,1,false);
          } else Result = VarSt;
        } else {
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = this.CreateSubDeclNameExpr(El,AContext,null);
          AssignSt.FExpr = Obj;
          Result = AssignSt;
          if (10 in this.FOptions) {
            SectionContext = AContext.GetMainSectionContext();
            JSName = SectionContext.GetLocalName(El,rtl.createSet(1));
            if (JSName === "") this.RaiseNotSupported(El,AContext,20200926232620,"");
            if (6 in this.FOptions) this.StoreImplJSLocal(El,AContext);
            AssignSt = this.CreateElement($lt133,El);
            AssignSt.FLHS = this.CreatePrimitiveDotExpr(JSName,El);
            AssignSt.FExpr = Result;
            Result = AssignSt;
          };
        };
        ObjectContect = $lt35.$create("Create$1",[El,Obj,AContext]);
        for (var $l1 = 0, $end1 = El.Values.FCount - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          EnumValue = rtl.getObject(El.Values.Get(i));
          JSName = this.TransformElToJSName(EnumValue,AContext);
          ObjLit = Obj.FElements.AddElement();
          ObjLit.FName = $lp2(i);
          ObjLit.FExpr = this.CreateLiteralJSString(El,JSName);
          ObjLit = Obj.FElements.AddElement();
          ObjLit.FName = JSName;
          ObjLit.FExpr = this.CreateLiteralNumber(El,i);
        };
        if (Src !== null) {
          ProcScope = this.GetImplJSProcScope(El,Src,AContext);
          if (ProcScope !== null) ProcScope.AddGlobalJS(this.CreatePrecompiledJS(VarSt));
        };
        if (this.HasTypeInfo(El,AContext)) {
          if (!$lt34.isPrototypeOf(AContext)) this.RaiseNotSupported(El,AContext,20170411210045,"typeinfo");
          OrdType = this.GetOrdType(0,El.Values.FCount - 1,El);
          Call = this.CreateRTTINewType(El,this.GetBIName(88),false,AContext,{get: function () {
              return TIObj;
            }, set: function (v) {
              TIObj = v;
            }});
          TIProp = TIObj.FElements.AddElement();
          TIProp.FName = this.GetBIName(151);
          TIProp.FExpr = this.CreateLiteralNumber(El,0);
          TIProp = TIObj.FElements.AddElement();
          TIProp.FName = this.GetBIName(150);
          TIProp.FExpr = this.CreateLiteralNumber(El,El.Values.FCount - 1);
          TIProp = TIObj.FElements.AddElement();
          TIProp.FName = this.GetBIName(152);
          TIProp.FExpr = this.CreateLiteralNumber(El,OrdType);
          TIProp = TIObj.FElements.AddElement();
          TIProp.FName = this.GetBIName(149);
          TIProp.FExpr = this.CreateSubDeclNameExpr(El,AContext,null);
          if (Src !== null) {
            this.AddToSourceElements(Src,Call);
            if (ProcScope !== null) ProcScope.AddGlobalJS(this.CreatePrecompiledJS(Call));
          } else if (Result === null) {
            this.RaiseNotSupported(El,AContext,20190101130432,"")}
           else {
            List = this.CreateElement($lt129,El);
            List.FA = Result;
            Result = List;
            List.FB = Call;
          };
          Call = null;
        };
        ok = true;
      } finally {
        Call = rtl.freeLoc(Call);
        ObjectContect = rtl.freeLoc(ObjectContect);
        if (!ok) $lp({get: function () {
            return Result;
          }, set: function (v) {
            Result = v;
          }});
      };
      return Result;
    };
    this.ConvertSetType = function (El, AContext) {
      var Result = null;
      var Obj = null;
      var Call = null;
      var Prop = null;
      Result = null;
      if (El.IsPacked) this.DoError$2(20170222231613,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"packed"),El);
      if (!this.HasTypeInfo(El,AContext)) return Result;
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231112029,"");
      Call = this.CreateRTTINewType(El,this.GetBIName(98),false,AContext,{get: function () {
          return Obj;
        }, set: function (v) {
          Obj = v;
        }});
      try {
        Prop = Obj.FElements.AddElement();
        Prop.FName = this.GetBIName(163);
        Prop.FExpr = this.CreateTypeInfoRef(El.EnumType,AContext,El);
        Result = Call;
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.ConvertRangeType = function (El, AContext) {
      var Result = null;
      var TIObj = null;
      var Call = null;
      var MinVal = null;
      var MaxVal = null;
      var MinInt = 0;
      var MaxInt = 0;
      var OrdType = 0;
      var TIProp = null;
      var fn = 0;
      Result = null;
      if (!this.HasTypeInfo(El,AContext)) return Result;
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231112029,"");
      MinVal = null;
      MaxVal = null;
      Call = null;
      try {
        MinVal = AContext.Resolver.EvalRangeLimit(El.RangeExpr,rtl.createSet(0),true,El);
        MaxVal = AContext.Resolver.EvalRangeLimit(El.RangeExpr,rtl.createSet(0),false,El);
        if (MinVal.Kind === 4) {
          fn = 90;
          MinInt = MinVal.Int;
          MaxInt = MaxVal.Int;
        } else if (MinVal.Kind === 9) {
          fn = 88;
          MinInt = MinVal.Index;
          MaxInt = MaxVal.Index;
        } else {
          this.RaiseNotSupported(El,AContext,20170925201628,"");
        };
        OrdType = this.GetOrdType(MinInt,MaxInt,El);
        Call = this.CreateRTTINewType(El,this.GetBIName(fn),false,AContext,{get: function () {
            return TIObj;
          }, set: function (v) {
            TIObj = v;
          }});
        TIProp = TIObj.FElements.AddElement();
        TIProp.FName = this.GetBIName(151);
        TIProp.FExpr = this.CreateLiteralNumber(El,MinInt);
        TIProp = TIObj.FElements.AddElement();
        TIProp.FName = this.GetBIName(150);
        TIProp.FExpr = this.CreateLiteralNumber(El,MaxInt);
        TIProp = TIObj.FElements.AddElement();
        TIProp.FName = this.GetBIName(152);
        TIProp.FExpr = this.CreateLiteralNumber(El,OrdType);
        if (MinVal.Kind === 9) {
          TIProp = TIObj.FElements.AddElement();
          TIProp.FName = this.GetBIName(149);
          TIProp.FExpr = this.CreateSubDeclPasNameExpr(El,MinVal.ElType.FName,AContext,null);
        };
        Result = Call;
      } finally {
        $lp17({get: function () {
            return MinVal;
          }, set: function (v) {
            MinVal = v;
          }});
        $lp17({get: function () {
            return MaxVal;
          }, set: function (v) {
            MaxVal = v;
          }});
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.ConvertTypeAliasType = function (El, AContext) {
      var Result = null;
      var Obj = null;
      Result = null;
      if (!this.HasTypeInfo(El,AContext)) return Result;
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231112029,"");
      Result = this.CreateRTTINewType(El,this.GetBIName(84),false,AContext,{get: function () {
          return Obj;
        }, set: function (v) {
          Obj = v;
        }});
      return Result;
    };
    this.ConvertPointerType = function (El, AContext) {
      var Result = null;
      var Obj = null;
      var Call = null;
      var Prop = null;
      Result = null;
      if (!this.HasTypeInfo(El,AContext)) return Result;
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231112029,"");
      Call = this.CreateRTTINewType(El,this.GetBIName(93),false,AContext,{get: function () {
          return Obj;
        }, set: function (v) {
          Obj = v;
        }});
      try {
        Prop = Obj.FElements.AddElement();
        Prop.FName = this.GetBIName(156);
        Prop.FExpr = this.CreateTypeInfoRef(El.DestType,AContext,El);
        Result = Call;
      } finally {
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.ConvertProcedureType = function (El, AContext) {
      var Result = null;
      var Call = null;
      var InnerCall = null;
      var FunName = "";
      var ResultEl = null;
      var ResultTypeInfo = null;
      var Flags = 0;
      var MethodKind = 0;
      var Obj = null;
      var Prop = null;
      var aResolver = null;
      var Scope = null;
      var SpecializeDelay = false;
      var FuncSt = null;
      var AssignSt = null;
      var FuncContext = null;
      var CurContext = null;
      Result = null;
      aResolver = AContext.Resolver;
      if (!aResolver.IsFullySpecialized(El)) return Result;
      if (El.GetIsNested()) this.DoError$2(20170222231636,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"is nested"),El);
      if (!(El.CallingConvention in rtl.createSet(0,6))) this.DoError$2(20170222231532,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"calling convention " + $lm1.cCallingConventions[El.CallingConvention]),El);
      if (!this.HasTypeInfo(El,AContext)) return Result;
      if ($lt77.isPrototypeOf(El.FParent)) this.RaiseNotSupported(El,AContext,20181231112029,"");
      Scope = rtl.as(El.FData,$lt18);
      SpecializeDelay = (Scope !== null) && this.SpecializeNeedsDelay(El,AContext);
      if (El.GetIsReference()) {
        FunName = this.GetBIName(97)}
       else if (El.GetIsOfObject()) {
        FunName = this.GetBIName(92)}
       else FunName = this.GetBIName(95);
      Call = this.CreateRTTINewType(El,FunName,false,AContext,{get: function () {
          return Obj;
        }, set: function (v) {
          Obj = v;
        }});
      FuncContext = null;
      try {
        Prop = Obj.FElements.AddElement();
        InnerCall = this.CreateCallExpression(El);
        if (SpecializeDelay) {
          Prop.FName = this.GetBIName(158);
          FuncSt = this.CreateFunctionSt(El,true,false);
          Prop.FExpr = FuncSt;
          AssignSt = this.CreateElement($lt133,El);
          AssignSt.FLHS = this.CreatePrimitiveDotExpr("this." + this.GetBIName(159),El);
          AssignSt.FExpr = InnerCall;
          FuncSt.FFuncDef.FBody.FA = AssignSt;
          FuncContext = $lt34.$create("Create$1",[El,AssignSt,AContext]);
          CurContext = FuncContext;
        } else {
          CurContext = AContext;
          Prop.FName = this.GetBIName(159);
          Prop.FExpr = InnerCall;
        };
        InnerCall.FExpr = this.CreateMemberExpression([this.GetBIName(144),this.GetBIName(94)]);
        InnerCall.AddArg(this.CreateRTTIArgList(El,El.Args,CurContext));
        if ($lt93.isPrototypeOf(El)) {
          ResultEl = El.ResultEl;
          ResultTypeInfo = this.CreateTypeInfoRef(ResultEl.ResultType,CurContext,ResultEl);
          if (ResultTypeInfo !== null) InnerCall.AddArg(ResultTypeInfo);
        };
        Flags = 0;
        if (3 in El.Modifiers) Flags += 2;
        if (5 in El.Modifiers) Flags += 16;
        if (El.CallingConvention === 6) Flags += 8;
        if (Flags > 0) {
          if (!$lt93.isPrototypeOf(El)) InnerCall.AddArg(this.CreateLiteralNull(El));
          InnerCall.AddArg(this.CreateLiteralNumber(El,Flags));
        };
        if (El.GetIsOfObject()) {
          Prop = Obj.FElements.AddElement();
          Prop.FName = this.GetBIName(155);
          if (El.$class.ClassType() === $lt118) {
            MethodKind = 0}
           else if (El.$class.ClassType() === $lt93) {
            MethodKind = 1}
           else this.RaiseNotSupported(El,AContext,20170411180848,"");
          Prop.FExpr = this.CreateLiteralNumber(El,MethodKind);
        };
        Result = Call;
      } finally {
        FuncContext = rtl.freeLoc(FuncContext);
        if (Result === null) Call = rtl.freeLoc(Call);
      };
      return Result;
    };
    this.ConvertArrayType = function (El, AContext) {
      var $Self = this;
      var Result = null;
      var VarIndex = 0;
      var ProcScope = null;
      var Src = null;
      var Index = 0;
      var BodySrc = null;
      var ForLoop = null;
      function StorePrecompiledJS(JS) {
        if (ProcScope === null) ProcScope = $Self.GetImplJSProcScope(El,Src,AContext);
        if (ProcScope !== null) ProcScope.AddGlobalJS($Self.CreatePrecompiledJS(JS));
      };
      function GetNextVarName() {
        var Result = "";
        var i = 0;
        i = VarIndex % 52;
        if (i < 26) {
          Result = String.fromCharCode(97 + i)}
         else Result = String.fromCharCode(65 + i);
        if (VarIndex >= 52) Result = Result + $lp2(rtl.trunc(VarIndex / 52));
        VarIndex += 1;
        return Result;
      };
      function AddLoopSt(JS) {
        var List = null;
        if (Index === 0) {
          $Self.AddToSourceElements(BodySrc,JS)}
         else {
          if (ForLoop.FBody === null) {
            ForLoop.FBody = JS}
           else {
            List = $Self.CreateElement($lt129,El);
            List.FA = ForLoop.FBody;
            List.FB = JS;
            ForLoop.FBody = List;
          };
        };
      };
      var aResolver = null;
      var AssignSt = null;
      var ArrName = "";
      var ElTypeLo = null;
      var RangeEl = null;
      var Call = null;
      var RangeEnd = 0;
      var List = null;
      var Func = null;
      var VarSt = null;
      var ExprLT = null;
      var PlusPlus = null;
      var BracketLeftEx = null;
      var BracketRightEx = null;
      var ArraySt = null;
      var CloneEl = null;
      var ReturnSt = null;
      var FuncContext = null;
      var SrcArrName = "";
      var ResultName = "";
      var LoopVarName = "";
      var NewArrName = "";
      var ParentNewArrName = "";
      var ParentSrcArrName = "";
      var VarDecl = null;
      var MaxIndex = 0;
      var UseSlice = false;
      var NewLoop = null;
      Result = null;
      aResolver = AContext.Resolver;
      if (!aResolver.IsFullySpecialized(El)) return Result;
      if (El.PackMode !== 0) this.DoError$2(20170222231648,4001,rtl.getResStr($mod,"sPasElementNotSupported"),$lp6(18,"packed"),El);
      ProcScope = null;
      Src = null;
      if ($lt123.isPrototypeOf(AContext.JSElement)) Src = AContext.JSElement;
      if (aResolver.HasStaticArrayCloneFunc(El)) {
        BracketLeftEx = null;
        AssignSt = null;
        Func = null;
        FuncContext = null;
        try {
          VarIndex = 0;
          SrcArrName = GetNextVarName();
          ResultName = GetNextVarName();
          LoopVarName = "";
          ElTypeLo = aResolver.ResolveAliasType(El.ElType,true);
          Func = this.CreateFunctionSt(El,true,true);
          Func.FFuncDef.FTypedParams.AddParam(SrcArrName);
          BodySrc = rtl.as(Func.FFuncDef.FBody.FA,$lt123);
          FuncContext = $lt34.$create("Create$1",[El,BodySrc,AContext]);
          FuncContext.IsGlobal = true;
          MaxIndex = rtl.length(El.Ranges) - 1;
          UseSlice = $lt100.isPrototypeOf(ElTypeLo) || $lt101.isPrototypeOf(ElTypeLo) || ($lt72.isPrototypeOf(ElTypeLo) && (ElTypeLo.ObjKind in rtl.createSet(1)));
          ForLoop = null;
          if (UseSlice) MaxIndex -= 1;
          for (var $l = 0, $end = MaxIndex; $l <= $end; $l++) {
            Index = $l;
            RangeEl = El.Ranges[Index];
            RangeEnd = aResolver.GetRangeLength(RangeEl);
            if (Index === 0) {
              NewArrName = ResultName}
             else {
              ParentNewArrName = NewArrName;
              NewArrName = GetNextVarName();
            };
            VarSt = this.CreateElement($lt134,El);
            VarDecl = this.CreateElement($lt150,El);
            VarSt.FA = VarDecl;
            VarDecl.FName = NewArrName;
            VarDecl.FInit = this.CreateElement($lt147,El);
            AddLoopSt(VarSt);
            if (Index > 0) {
              AssignSt = this.CreateElement($lt133,El);
              AssignSt.FExpr = VarDecl.FInit;
              VarDecl.FInit = AssignSt;
              BracketLeftEx = this.CreateElement($lt142,El);
              AssignSt.FLHS = BracketLeftEx;
              BracketLeftEx.FMExpr = this.CreatePrimitiveDotExpr(ParentNewArrName,El);
              BracketLeftEx.FName = this.CreatePrimitiveDotExpr(LoopVarName,El);
            };
            AssignSt = this.CreateElement($lt133,El);
            AssignSt.FLHS = this.CreatePrimitiveDotExpr(NewArrName + ".length",El);
            AssignSt.FExpr = this.CreateLiteralNumber(El,RangeEnd);
            AddLoopSt(AssignSt);
            if (Index > 0) {
              ParentSrcArrName = SrcArrName;
              SrcArrName = GetNextVarName();
              BracketLeftEx = this.CreateElement($lt142,El);
              VarSt = this.CreateVarStatement(SrcArrName,BracketLeftEx,El);
              BracketLeftEx.FMExpr = this.CreatePrimitiveDotExpr(ParentSrcArrName,El);
              BracketLeftEx.FName = this.CreatePrimitiveDotExpr(LoopVarName,El);
              AddLoopSt(VarSt);
            };
            LoopVarName = GetNextVarName();
            NewLoop = this.CreateElement($lt154,El);
            AddLoopSt(NewLoop);
            ForLoop = NewLoop;
            ForLoop.FInit = this.CreateVarStatement(LoopVarName,this.CreateLiteralNumber(El,0),El);
            ExprLT = this.CreateElement($lt235,El);
            ForLoop.FCond = ExprLT;
            ExprLT.FA = this.CreatePrimitiveDotExpr(LoopVarName,El);
            ExprLT.FB = this.CreateLiteralNumber(El,RangeEnd);
            PlusPlus = this.CreateElement($lt210,El);
            ForLoop.FIncr = PlusPlus;
            PlusPlus.FA = this.CreatePrimitiveDotExpr(LoopVarName,El);
            if (Index === MaxIndex) {
              AssignSt = this.CreateElement($lt133,El);
              ForLoop.FBody = AssignSt;
              BracketLeftEx = this.CreateElement($lt142,El);
              AssignSt.FLHS = BracketLeftEx;
              BracketLeftEx.FMExpr = this.CreatePrimitiveDotExpr(NewArrName,El);
              BracketLeftEx.FName = this.CreatePrimitiveDotExpr(LoopVarName,El);
              BracketRightEx = this.CreateElement($lt142,El);
              BracketRightEx.FMExpr = this.CreatePrimitiveDotExpr(SrcArrName,El);
              BracketRightEx.FName = this.CreatePrimitiveDotExpr(LoopVarName,El);
              try {
                CloneEl = null;
                if (UseSlice) {
                  Call = this.CreateCallExpression(El);
                  CloneEl = Call;
                  Call.FExpr = this.CreateDotNameExpr(El,BracketRightEx,"slice");
                  Call.AddArg(this.CreateLiteralNumber(El,0));
                } else if ($lt107.isPrototypeOf(ElTypeLo)) {
                  if (rtl.length(ElTypeLo.Ranges) === 0) this.RaiseNotSupported(El,FuncContext,20180218223414,$lp16(ElTypeLo));
                  CloneEl = this.CreateCloneStaticArray(El,ElTypeLo,BracketRightEx,FuncContext);
                } else if ($lt81.isPrototypeOf(ElTypeLo)) {
                  CloneEl = this.CreateRecordCallClone(El,ElTypeLo,BracketRightEx,FuncContext)}
                 else if ($lt117.isPrototypeOf(ElTypeLo)) {
                  CloneEl = this.CreateReferencedSet(El,BracketRightEx)}
                 else this.RaiseNotSupported(El,FuncContext,20180218223618,$lp16(ElTypeLo));
                AssignSt.FExpr = CloneEl;
                BracketRightEx = null;
              } finally {
                BracketRightEx = rtl.freeLoc(BracketRightEx);
              };
            };
          };
          ReturnSt = this.CreateElement($lt160,El);
          this.AddToSourceElements(BodySrc,ReturnSt);
          ReturnSt.FExpr = this.CreatePrimitiveDotExpr(ResultName,El);
          ArrName = this.GetOverloadName(El,AContext) + this.GetBIName(12);
          if ($lt77.isPrototypeOf(El.FParent)) {
            ArraySt = this.CreateVarStatement(ArrName,Func,El);
          } else {
            AssignSt = this.CreateElement($lt133,El);
            ArraySt = AssignSt;
            AssignSt.FLHS = this.CreateSubDeclPasNameExpr(El,ArrName,AContext,null);
            AssignSt.FExpr = Func;
          };
          Func = null;
          if (Src !== null) {
            this.AddToSourceElements(Src,ArraySt)}
           else Result = ArraySt;
          StorePrecompiledJS(ArraySt);
          ArraySt = null;
        } finally {
          Func = rtl.freeLoc(Func);
          ArraySt = rtl.freeLoc(ArraySt);
          FuncContext = rtl.freeLoc(FuncContext);
        };
      };
      if (!$lt73.isPrototypeOf(AContext.PasElement) && this.HasTypeInfo(El,AContext)) {
        Call = null;
        try {
          Call = this.CreateRTTIAnonymousArray(El,AContext);
          if (Src !== null) {
            this.AddToSourceElements(Src,Call);
            StorePrecompiledJS(Call);
          } else if (Result === null) {
            Result = Call}
           else {
            List = this.CreateElement($lt129,El);
            List.FA = Result;
            List.FB = Call;
            Result = List;
          };
          Call = null;
        } finally {
          Call = rtl.freeLoc(Call);
        };
      };
      return Result;
    };
    this.GetOrdType = function (MinValue, MaxValue, ErrorEl) {
      var Result = 0;
      var V = 0;
      if (MinValue < 0) {
        if (MaxValue < -(MinValue + 1)) {
          V = -(MinValue + 1)}
         else V = MaxValue;
        if (V < 0x8f) {
          Result = 0}
         else if (V < 0x8fff) {
          Result = 2}
         else if (V < 0x8fffffff) {
          Result = 4}
         else if (V <= 9007199254740991) {
          Result = 6}
         else this.DoError$2(20170925200802,3064,rtl.getResStr($lm6,"sRangeCheckError"),[],ErrorEl);
      } else {
        if (MaxValue < 0xff) {
          Result = 1}
         else if (MaxValue < 0xffff) {
          Result = 3}
         else if (MaxValue < 0xffffffff) {
          Result = 5}
         else if (MaxValue <= 9007199254740991) {
          Result = 7}
         else this.DoError$2(20170925201002,3064,rtl.getResStr($lm6,"sRangeCheckError"),[],ErrorEl);
      };
      return Result;
    };
    this.Create$1 = function () {
      this.FOptions = rtl.refSet($mod.DefaultPasToJSOptions);
      return this;
    };
    this.Destroy = function () {
      this.SetGlobals(null);
      $lt50.Destroy.call(this);
    };
    this.ConvertPasElement = function (El, Resolver) {
      var Result = null;
      var aContext = null;
      var Scanner = null;
      if (this.FGlobals === null) this.FGlobals = $lt41.$create("Create$1",[this]);
      if ((Resolver !== null) && (Resolver.FCurrentParser !== null) && $lt23.isPrototypeOf(Resolver.FCurrentParser.FScanner)) {
        Scanner = Resolver.FCurrentParser.FScanner;
        this.FOptions = rtl.diffSet(rtl.unionSet(this.FOptions,Scanner.GlobalConvOptsEnabled),Scanner.GlobalConvOptsDisabled);
      };
      aContext = $lt32.$create("Create$1",[El,null,null]);
      try {
        aContext.Resolver = Resolver;
        if (El.$class.ClassType() === $lt253) {
          Result = this.ConvertBeginEndStatement(El,aContext,false)}
         else Result = this.ConvertElement(El,aContext);
      } finally {
        $lp({get: function () {
            return aContext;
          }, set: function (v) {
            aContext = v;
          }});
      };
      return Result;
    };
  });
  this.CodePointToJSString = function (u) {
    var Result = "";
    if (u < 0x10000) {
      Result = String.fromCharCode(u)}
     else Result = String.fromCharCode(0xD800 + rtl.lw((u - 0x10000) >>> 10)) + String.fromCharCode(0xDC00 + ((u - 0x10000) & 0x3ff));
    return Result;
  };
  this.PosLast = function (c, s) {
    var Result = 0;
    Result = s.length;
    while ((Result > 0) && (s.charAt(Result - 1) !== c)) Result -= 1;
    return Result;
  };
  this.JSEquals = function (A, B) {
    var Result = false;
    if (A === null) {
      return B === null}
     else if (B === null) {
      return false}
     else if (A.$class.ClassType() !== B.$class.ClassType()) return false;
    if (A.$class.ClassType() === $lt125) {
      return A.FName === B.FName}
     else if (A.$class.ClassType() === $lt213) {}
    else if (A.$class.ClassType() === $lt124) {
      Result = $mod.JSEquals(A.FMExpr,B.FMExpr) && (A.FName === B.FName)}
     else if (A.$class.ClassType() === $lt142) {
      Result = $mod.JSEquals(A.FMExpr,B.FMExpr) && (A.FName === B.FName)}
     else return false;
    return Result;
  };
  $mod.$resourcestrings = {sPasElementNotSupported: {org: "Pascal element not supported: %s"}, sNotSupportedX: {org: "Not supported: %s"}, sUnaryOpcodeNotSupported: {org: 'Unary OpCode not yet supported "%s"'}, sBinaryOpcodeNotSupported: {org: 'Binary OpCode not yet supported "%s"'}, sInvalidNumber: {org: 'Invalid number "%s"'}, sInitializedArraysNotSupported: {org: "Initialized array variables not yet supported"}, sMemberExprMustBeIdentifier: {org: "Member expression must be an identifier"}, sCantWriteSetLiteral: {org: "Cannot write set literal"}, sInvalidAbsoluteLocation: {org: "Invalid absolute location"}, sForInJSArrDefaultGetterNotExtBracketAccessor: {org: "for-in-JS-array needs as default getter an external bracket accessor"}, sMissingExternalName: {org: "Missing external name"}, sVirtualMethodNameMustMatchExternal: {org: "Virtual method name must match external"}, sInvalidVariableModifier: {org: 'Invalid variable modifier "%s"'}, sPublishedNameMustMatchExternal: {org: "Published name must match external"}, sAWaitOnlyInAsyncProcedure: {org: "await only available in async procedure"}, sAsyncFunctionOrPromise: {org: "async function or promise"}, sNewInstanceFunctionMustBeVirtual: {org: "NewInstance function must be virtual"}, sNewInstanceFunctionMustHaveTwoParameters: {org: "NewInstance function must have two parameters"}, sNewInstanceFunctionMustNotHaveOverloadAtX: {org: "NewInstance function must not have overload at %s"}, sBracketAccessorOfExternalClassMustHaveOneParameter: {org: "Bracket accessor of external class must have one parameter"}, sTypeXCannotBePublished: {org: 'Type "%s" cannot be published'}, sNestedInheritedNeedsParameters: {org: "nested inherited needs parameters"}, sFreeNeedsVar: {org: "Free needs a variable"}, sDuplicateGUIDXInYZ: {org: "Duplicate GUID %s in %s and %s"}, sCantCallExtBracketAccessor: {org: "cannot call external bracket accessor, use a property instead"}, sJSNewNotSupported: {org: 'Pascal class does not support the "new" constructor'}, sHelperClassMethodForExtClassMustBeStatic: {org: "Helper class method for external class must be static"}, sDuplicateMessageIdXAtY: {org: 'Duplicate message id "%s" at %s'}, sDispatchRequiresX: {org: "Dispatch requires %s"}, sConstRefNotForXAsConst: {org: "ConstRef not yet implemented for %s. Treating as Const"}};
  $mod.$implcode = function () {
    $impl.TempRefObjGetterName = "get";
    $impl.TempRefObjSetterName = "set";
    $impl.TempRefObjSetterArgName = "v";
    $impl.TempRefGetPathName = "p";
    $impl.TempRefSetPathName = "s";
    $impl.TempRefParamName = "a";
    $impl.IdentChars = rtl.createSet(null,48,57,null,65,90,null,97,122,95);
    $impl.AwaitSignature2 = "function await(aType,TJSPromise):aType";
  };
},[]);
rtl.module("FPPJsSrcMap",["System","SysUtils","Math","jswriter","jstree","JSSrcMap","fpjson","Pas2JSUtils"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lm = pas.JSSrcMap;
  var $lt2 = $lm.TSourceMap;
  var $lm1 = pas.SysUtils;
  var $lt3 = $lm1.Exception;
  var $lm2 = pas.jswriter;
  var $lt4 = $lm2.TBufferWriter;
  var $lt5 = $lm2.TTextWriter;
  var $lm3 = pas.jstree;
  var $lt6 = $lm3.TJSStatementList;
  var $lt7 = $lm3.TJSEmptyBlockStatement;
  var $lt8 = $lm3.TJSEmptyStatement;
  var $lp = $lm1.SameText;
  var $lp1 = $lm1.ExtractFileExt;
  var $lt9 = $lm3.TJSLiteral;
  var $lm4 = pas.System;
  var $lt10 = $lm4.TObject;
  var $lp2 = $lm4.Copy;
  rtl.createClass(this,"TPas2JSSrcMap",$lt2,function () {
    $lt = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.fRefCount = 0;
      this.LocalFilename = "";
    };
    this.AddRef = function () {
      this.fRefCount += 1;
    };
    this.Release = function () {
      if (this.fRefCount < 0) throw $lt3.$create("Create$1",["TPas2JSSrcMap.Release"]);
      this.fRefCount -= 1;
      if (this.fRefCount < 0) this.Free();
    };
  });
  rtl.createClass(this,"TPas2JSMapper",$lt4,function () {
    $lt1 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FOnIsBinary = null;
      this.FPCUExt = "";
      this.FDestFileName = "";
      this.FSrcMap = null;
      this.FNeedMapping = false;
      this.FGeneratedStartLine = 0;
      this.FSrcFilename = "";
      this.FSrcIsBinary = false;
      this.FSrcLine = 0;
      this.FSrcColumn = 0;
    };
    this.$final = function () {
      this.FOnIsBinary = undefined;
      this.FSrcMap = undefined;
      $lt4.$final.call(this);
    };
    this.SetSrcMap = function (AValue) {
      if (this.FSrcMap === AValue) return;
      if (this.FSrcMap !== null) this.FSrcMap.Release();
      this.FSrcMap = AValue;
      if (this.FSrcMap !== null) this.FSrcMap.AddRef();
    };
    this.SetCurElement = function (AValue) {
      var C = null;
      var NewSrcFilename = "";
      $lt5.SetCurElement.call(this,AValue);
      C = AValue.$class.ClassType();
      if ((C === $lt6) || (C === $lt7) || (C === $lt8)) return;
      if (AValue !== null) {
        NewSrcFilename = AValue.FSource;
        if (NewSrcFilename !== "") {
          if ((this.FSrcFilename !== NewSrcFilename) || (this.FSrcLine !== AValue.FLine) || (this.FSrcColumn !== AValue.FColumn)) {
            this.FNeedMapping = true;
            this.SetSrcFilename(NewSrcFilename);
            this.FSrcLine = AValue.FLine;
            this.FSrcColumn = AValue.FColumn;
          };
        };
      };
      if (this.FGeneratedStartLine < 1) this.FGeneratedStartLine = this.FCurLine;
    };
    this.SetSrcFilename = function (Value) {
      if (this.FSrcFilename === Value) return;
      this.FSrcFilename = Value;
      this.FSrcIsBinary = $lp($lp1(Value),this.FPCUExt);
      if (!this.FSrcIsBinary && (this.FOnIsBinary != null)) this.FSrcIsBinary = this.FOnIsBinary(this,Value);
    };
    this.Writing = function () {
      var S = "";
      var p = 0;
      var l = 0;
      var Line = 0;
      var CurSrcLine = 0;
      var CurSrcColumn = 0;
      var CurSrcFilename = "";
      $lt5.Writing.call(this);
      if (this.FSrcMap === null) return;
      if (this.FGeneratedStartLine < 1) this.FGeneratedStartLine = this.FCurLine;
      if (!this.FNeedMapping) return;
      if (this.FSrcFilename === "") return;
      if (this.FSrcIsBinary) {
        CurSrcFilename = this.FDestFileName;
        CurSrcLine = this.FCurLine;
        CurSrcColumn = this.FCurColumn;
        this.FSrcLine = this.FCurLine;
        this.FSrcColumn = 1;
      } else {
        CurSrcFilename = this.FSrcFilename;
        CurSrcLine = this.FSrcLine;
        CurSrcColumn = this.FSrcColumn;
      };
      this.FNeedMapping = false;
      this.FSrcMap.AddMapping(this.FCurLine,Math.max(0,this.FCurColumn - 1),CurSrcFilename,Math.max(0,CurSrcLine),Math.max(0,CurSrcColumn - 1),"");
      if ($lt9.isPrototypeOf(this.FCurElement) && (this.FCurElement.FValue.FCustomValue !== "")) {
        S = this.FCurElement.FValue.FCustomValue;
        l = S.length;
        p = 1;
        Line = 0;
        while (p <= l) {
          var $tmp = S.charAt(p - 1);
          if (($tmp === "\n") || ($tmp === "\r")) {
            if ((p < l) && (S.charCodeAt((p + 1) - 1) in rtl.createSet(10,13)) && (S.charAt(p - 1) !== S.charAt((p + 1) - 1))) {
              p += 2}
             else p += 1;
            Line += 1;
            this.FSrcMap.AddMapping(this.FCurLine + Line,0,CurSrcFilename,CurSrcLine + Line,0,"");
          } else {
            p += 1;
          };
        };
      };
    };
    this.Destroy = function () {
      this.SetSrcMap(null);
      $lt10.Destroy.call(this);
    };
    this.SaveJSToStream = function (WithUTF8BOM, MapFilename, s) {
      var MapSrc = "";
      var i = 0;
      if (MapFilename !== "") {
        MapSrc = "//# sourceMappingURL=" + MapFilename + $lm4.LineEnding}
       else MapSrc = "";
      if (WithUTF8BOM) ;
      for (var $l = 0, $end = this.GetBufferLength() - 1; $l <= $end; $l++) {
        i = $l;
        s.push(this.FBuffer[i]);
      };
      if (MapSrc !== "") s.push(MapSrc);
    };
    this.WriteFile = function (Src, Filename) {
      var l = 0;
      var p = 0;
      var LineStart = 0;
      if (Src === "") return;
      this.SetSrcFilename(Filename);
      this.FSrcLine = 1;
      this.FSrcColumn = 1;
      l = Src.length;
      p = 1;
      do {
        LineStart = p;
        while (p <= l) {
          var $tmp = Src.charAt(p - 1);
          if (($tmp === "\n") || ($tmp === "\r")) {
            if ((p < l) && (Src.charCodeAt((p + 1) - 1) in rtl.createSet(10,13)) && (Src.charAt(p - 1) !== Src.charAt((p + 1) - 1))) {
              p += 2}
             else p += 1;
            break;
          } else {
            p += 1;
          };
        };
        this.FNeedMapping = true;
        this.Write($lp2(Src,LineStart,p - LineStart));
        this.FSrcLine += 1;
      } while (!(p > l));
    };
  });
});
rtl.module("Pas2jsLogger",["System","JS","Pas2JSUtils","Types","Classes","SysUtils","PasTree","PScanner","jstree","jsbase","jswriter","fpjson"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lm = pas.System;
  var $lt5 = $lm.TObject;
  var $lp = $lm.Writeln;
  var $lm1 = pas.SysUtils;
  var $lt6 = $lm1.Exception;
  var $lm2 = pas.jswriter;
  var $lt7 = $lm2.TTextWriter;
  var $lp1 = $lm1.Trim;
  var $lp2 = $lm1.LowerCase;
  var $lm3 = pas.Classes;
  var $lt8 = $lm3.TFPList;
  var $lp3 = $lm1.FreeAndNil;
  var $lp4 = $lm1.IntToStr;
  var $lm4 = pas.PScanner;
  var $lp5 = $lm4.SafeFormat;
  var $lm5 = pas.fpjson;
  var $lt9 = $lm5.TJSONObject;
  var $lm6 = pas.JS;
  var $lp6 = $lm6.isInteger;
  var $lp7 = $lm1.QuotedStr;
  this.ExitCodeErrorInternal = 1;
  this.ExitCodeErrorInParams = 2;
  this.ExitCodeErrorInConfig = 3;
  this.ExitCodeFileNotFound = 4;
  this.ExitCodeWriteError = 5;
  this.ExitCodeSyntaxError = 6;
  this.ExitCodeConverterError = 7;
  this.DefaultLogMsgTypes = rtl.createSet(null,0,6);
  rtl.createClass(this,"TPas2jsStream",$lt5,function () {
    $lt = this;
  });
  rtl.createClass(this,"TPas2jsFileStream",$lt,function () {
    $lt1 = this;
    this.Create$1 = function (Filename, Mode) {
      $lp("TPas2JSFileStream.Create TODO ",Filename," Mode=",Mode);
      throw $lt6.$create("Create$1",["TPas2JSFileStream.Create"]);
      return this;
    };
    this.Destroy = function () {
      $lp("TPas2JSFileStream.Destroy TODO");
      throw $lt6.$create("Create$1",["TPas2JSFileStream.Destroy"]);
      $lt5.Destroy.call(this);
    };
    this.Write = function (s) {
      $lp('TPas2JSFileStream.Write TODO s="',s,'"');
      throw $lt6.$create("Create$1",["TPas2JSFileStream.Write"]);
    };
  });
  this.fmCreate = 0xFF00;
  this.fmShareDenyNone = 0x40;
  rtl.createClass(this,"TPas2jsMessage",$lt5,function () {
    $lt2 = this;
    this.$init = function () {
      $lt5.$init.call(this);
      this.Number = 0;
      this.Typ = 0;
      this.Pattern = "";
    };
  });
  rtl.createClass(this,"TConsoleFileWriter",$lt7,function () {
    $lt3 = this;
    this.Create$2 = function (aFileName) {
      $lt7.Create$1.call(this);
      this.Write("Opening console log: " + aFileName);
      return this;
    };
    this.DoWrite = function (S) {
      var Result = 0;
      Result = S.length;
      this.WriteLn(S);
      return Result;
    };
  });
  rtl.createClass(this,"TPas2jsLogger",$lt5,function () {
    $lt4 = this;
    this.$init = function () {
      $lt5.$init.call(this);
      this.FDebugLog = null;
      this.FEncoding = "";
      this.FIndent = 0;
      this.FLastMsgCol = 0;
      this.FLastMsgFile = "";
      this.FLastMsgLine = 0;
      this.FLastMsgNumber = 0;
      this.FLastMsgTxt = "";
      this.FLastMsgType = 0;
      this.FLineLen = 0;
      this.FMsgNumberDisabled = [];
      this.FMsg = null;
      this.FOnFormatPath = null;
      this.FOnLog = null;
      this.FOutputFile = null;
      this.FOutputFilename = "";
      this.FShowMsgNumbers = false;
      this.FShowMsgTypes = {};
      this.FSorted = false;
    };
    this.$final = function () {
      this.FDebugLog = undefined;
      this.FMsgNumberDisabled = undefined;
      this.FMsg = undefined;
      this.FOnFormatPath = undefined;
      this.FOnLog = undefined;
      this.FOutputFile = undefined;
      this.FShowMsgTypes = undefined;
      $lt5.$final.call(this);
    };
    this.GetMsgCount = function () {
      var Result = 0;
      Result = this.FMsg.FCount;
      return Result;
    };
    this.GetMsgNumberDisabled = function (MsgNumber) {
      var Result = false;
      Result = this.FindMsgNumberDisabled(MsgNumber,false) >= 0;
      return Result;
    };
    this.GetMsgs = function (Index) {
      var Result = null;
      Result = rtl.getObject(this.FMsg.Get(Index));
      return Result;
    };
    this.FindMsgNumberDisabled = function (MsgNumber, FindInsertPos) {
      var Result = 0;
      var l = 0;
      var r = 0;
      var m = 0;
      var CurMsgNumber = 0;
      l = 0;
      r = rtl.length(this.FMsgNumberDisabled) - 1;
      m = 0;
      while (l <= r) {
        m = rtl.trunc((l + r) / 2);
        CurMsgNumber = this.FMsgNumberDisabled[m];
        if (MsgNumber < CurMsgNumber) {
          r = m - 1}
         else if (MsgNumber > CurMsgNumber) {
          l = m + 1}
         else return m;
      };
      if (FindInsertPos) {
        Result = m;
        if (l > m) Result += 1;
      } else {
        Result = -1;
      };
      return Result;
    };
    this.SetEncoding = function (AValue) {
      var NewValue = "";
      NewValue = $lp1($lp2(AValue));
      if (this.FEncoding === NewValue) return;
      this.FEncoding = NewValue;
    };
    this.SetMsgNumberDisabled = function (MsgNumber, AValue) {
      var InsertPos = 0;
      var OldCount = 0;
      OldCount = rtl.length(this.FMsgNumberDisabled);
      if (AValue) {
        InsertPos = this.FindMsgNumberDisabled(MsgNumber,true);
        if ((InsertPos < OldCount) && (this.FMsgNumberDisabled[InsertPos] === MsgNumber)) return;
        this.FMsgNumberDisabled = rtl.arrayInsert(MsgNumber,this.FMsgNumberDisabled,InsertPos);
      } else {
        InsertPos = this.FindMsgNumberDisabled(MsgNumber,false);
        if (InsertPos < 0) return;
        this.FMsgNumberDisabled.splice(InsertPos,1);
      };
    };
    this.SetOutputFilename = function (AValue) {
      if (this.FOutputFilename === AValue) return;
      this.CloseOutputFile();
      this.FOutputFilename = AValue;
      if (this.FOutputFilename !== "") this.OpenOutputFile();
    };
    this.DoLogRaw = function (Msg, SkipEncoding) {
      var S = "";
      if (SkipEncoding) {
        S = Msg}
       else {
        S = Msg;
      };
      if (this.FDebugLog !== null) this.DebugLogWriteLn(S);
      if (this.FOnLog !== null) {
        this.FOnLog(this,S)}
       else if (this.FOutputFile !== null) {
        this.FOutputFile.Write(S + $lm.LineEnding)}
       else {
        $lp(S);
      };
    };
    this.CreateTextWriter = function (aFileName) {
      var Result = null;
      Result = $lt3.$create("Create$2",[aFileName]);
      return Result;
    };
    this.Create$1 = function () {
      this.FMsg = $lt8.$create("Create");
      this.FShowMsgTypes = rtl.refSet($mod.DefaultLogMsgTypes);
      this.FLineLen = 78;
      this.FIndent = 2;
      return this;
    };
    this.Destroy = function () {
      var i = 0;
      this.CloseOutputFile();
      this.CloseDebugLog();
      for (var $l = 0, $end = this.FMsg.FCount - 1; $l <= $end; $l++) {
        i = $l;
        rtl.getObject(this.FMsg.Get(i)).$destroy("Destroy");
      };
      $lp3({p: this, get: function () {
          return this.p.FMsg;
        }, set: function (v) {
          this.p.FMsg = v;
        }});
      this.FMsgNumberDisabled = [];
      $lt5.Destroy.call(this);
    };
    this.RegisterMsg = function (MsgType, MsgNumber, Pattern) {
      var Msg = null;
      if (MsgNumber === 0) throw $lt6.$create("Create$1",["internal error: TPas2jsLogger.RegisterMsg MsgNumber=0"]);
      Msg = $lt2.$create("Create");
      Msg.Number = MsgNumber;
      Msg.Typ = MsgType;
      Msg.Pattern = Pattern;
      this.FMsg.Add(Msg);
      this.FSorted = false;
    };
    this.FindMsg = function (MsgNumber, ExceptionOnNotFound) {
      var Result = null;
      var l = 0;
      var r = 0;
      var m = 0;
      var Msg = null;
      if (!this.FSorted) this.Sort();
      l = 0;
      r = this.GetMsgCount() - 1;
      while (l <= r) {
        m = rtl.trunc((l + r) / 2);
        Msg = this.GetMsgs(m);
        if (MsgNumber < Msg.Number) {
          r = m - 1}
         else if (MsgNumber > Msg.Number) {
          l = m + 1}
         else return Msg;
      };
      Result = null;
      if (ExceptionOnNotFound) throw $lt6.$create("Create$1",["invalid message number " + $lp4(MsgNumber)]);
      return Result;
    };
    this.Sort = function () {
      var i = 0;
      var LastMsg = null;
      var CurMsg = null;
      if (this.FMsg.FCount > 1) {
        this.FMsg.Sort($mod.CompareP2JMessage);
        LastMsg = rtl.getObject(this.FMsg.Get(0));
        for (var $l = 1, $end = this.FMsg.FCount - 1; $l <= $end; $l++) {
          i = $l;
          CurMsg = rtl.getObject(this.FMsg.Get(i));
          if (LastMsg.Number === CurMsg.Number) throw $lt6.$create("Create$1",["duplicate message number " + $lp4(CurMsg.Number) + '. 1st="' + LastMsg.Pattern + '" 2nd="' + CurMsg.Pattern + '"']);
          LastMsg = CurMsg;
        };
      };
      this.FSorted = true;
    };
    this.LogRaw = function (Msg) {
      this.ClearLastMsg();
      this.DoLogRaw(Msg,false);
    };
    this.LogRaw$1 = function (Args) {
      this.LogRaw(this.$class.Concatenate(Args));
    };
    this.LogLn = function () {
      this.LogRaw("");
    };
    this.LogPlain = function (Msg) {
      var s = "";
      this.ClearLastMsg();
      if (this.FEncoding === "json") {
        s = this.FormatJSONMsg(5,Msg,0,"",0,0);
        this.DoLogRaw(s,true);
      } else this.DoLogRaw(Msg,false);
    };
    this.LogPlain$1 = function (Args) {
      this.LogPlain(this.$class.Concatenate(Args));
    };
    this.LogMsg = function (MsgNumber, Args, Filename, Line, Col, UseFilter) {
      var Msg = null;
      Msg = this.FindMsg(MsgNumber,true);
      this.Log(Msg.Typ,$lp5(Msg.Pattern,Args),MsgNumber,Filename,Line,Col,UseFilter);
    };
    this.Log = function (MsgType, Msg, MsgNumber, Filename, Line, Col, UseFilter) {
      var s = "";
      if (UseFilter && !(MsgType in this.FShowMsgTypes)) return;
      if (this.GetMsgNumberDisabled(MsgNumber)) return;
      if (this.FEncoding === "json") {
        s = this.FormatJSONMsg(MsgType,Msg,MsgNumber,Filename,Line,Col)}
       else s = this.FormatMsg(MsgType,Msg,MsgNumber,Filename,Line,Col);
      this.FLastMsgType = MsgType;
      this.FLastMsgNumber = MsgNumber;
      this.FLastMsgTxt = Msg;
      this.FLastMsgFile = Filename;
      this.FLastMsgLine = Line;
      this.FLastMsgCol = Col;
      this.DoLogRaw(s,false);
    };
    this.LogMsgIgnoreFilter = function (MsgNumber, Args) {
      this.LogMsg(MsgNumber,Args,"",0,0,false);
    };
    this.LogExceptionBackTrace = function (E) {
    };
    this.MsgTypeToStr = function (MsgType) {
      var Result = "";
      var $tmp = MsgType;
      if ($tmp === 0) {
        Result = "Fatal"}
       else if ($tmp === 1) {
        Result = "Error"}
       else if ($tmp === 2) {
        Result = "Warning"}
       else if ($tmp === 3) {
        Result = "Note"}
       else if ($tmp === 4) {
        Result = "Hint"}
       else if ($tmp === 5) {
        Result = "Info"}
       else if ($tmp === 6) {
        Result = "Debug"}
       else {
        Result = "Verbose";
      };
      return Result;
    };
    this.FormatMsg = function (MsgType, Msg, MsgNumber, Filename, Line, Col) {
      var Result = "";
      var s = "";
      s = "";
      if (Filename !== "") {
        if (this.FOnFormatPath != null) {
          s += this.FOnFormatPath(Filename)}
         else s += Filename;
        if (Line > 0) {
          s += "(" + $lp4(Line);
          if (Col > 0) s += "," + $lp4(Col);
          s += ")";
        };
        if (s !== "") s += " ";
      };
      s += this.MsgTypeToStr(MsgType) + ": ";
      if (this.FShowMsgNumbers && (MsgNumber !== 0)) s += "(" + $lp4(MsgNumber) + ") ";
      s += Msg;
      Result = s;
      return Result;
    };
    this.FormatJSONMsg = function (MsgType, Msg, MsgNumber, Filename, Line, Col) {
      var Result = "";
      var J = null;
      var FN = "";
      if (this.FOnFormatPath != null) {
        FN = this.FOnFormatPath(Filename)}
       else FN = Filename;
      J = $lt9.$create("Create$3",[["message",Msg,"line",Line,"col",Col,"number",MsgNumber,"filename",FN,"type",this.MsgTypeToStr(MsgType)]]);
      try {
        Result = J.GetAsJSON();
      } finally {
        J = rtl.freeLoc(J);
      };
      return Result;
    };
    this.OpenOutputFile = function () {
      this.FOutputFile = this.CreateTextWriter(this.FOutputFilename);
    };
    this.Flush = function () {
    };
    this.CloseOutputFile = function () {
      if (this.FOutputFile === null) return;
      this.Flush();
      $lp3({p: this, get: function () {
          return this.p.FOutputFile;
        }, set: function (v) {
          this.p.FOutputFile = v;
        }});
    };
    this.Reset = function () {
      this.SetOutputFilename("");
      this.FMsgNumberDisabled = [];
      this.FShowMsgNumbers = false;
      this.FShowMsgTypes = rtl.refSet($mod.DefaultLogMsgTypes);
    };
    this.ClearLastMsg = function () {
      this.FLastMsgType = 5;
      this.FLastMsgNumber = 0;
      this.FLastMsgTxt = "";
      this.FLastMsgFile = "";
      this.FLastMsgLine = 0;
      this.FLastMsgCol = 0;
    };
    var DbgLogFilename = "pas2jsdebug.log";
    this.OpenDebugLog = function () {
      this.FDebugLog = $lt1.$create("Create$1",[DbgLogFilename,65280 | 64]);
    };
    this.CloseDebugLog = function () {
      $lp3({p: this, get: function () {
          return this.p.FDebugLog;
        }, set: function (v) {
          this.p.FDebugLog = v;
        }});
    };
    this.DebugLogWriteLn = function (Msg) {
      if (this.FDebugLog === null) return;
      Msg = Msg + $lm.LineEnding;
      this.FDebugLog.Write(Msg);
    };
    this.GetEncodingCaption = function () {
      var Result = "";
      Result = this.FEncoding;
      if (Result === "") {
        Result = "utf-8";
      };
      if (Result === "console") ;
      if (Result === "utf8") Result = "utf-8";
      return Result;
    };
    this.Concatenate = function (Args) {
      var Result = "";
      var s = "";
      var i = 0;
      var V = undefined;
      s = "";
      for (var $l = 0, $end = rtl.length(Args) - 1; $l <= $end; $l++) {
        i = $l;
        V = Args[i];
        var $tmp = typeof(V);
        if ($tmp === "boolean") {
          if (V) {
            s += "true"}
           else s += "false"}
         else if ($tmp === "number") {
          if ($lp6(V)) {
            s += "" + rtl.trunc(V)}
           else s += rtl.floatToStr(rtl.getNumber(V))}
         else if ($tmp === "string") {
          s += "" + V}
         else {
          continue;
        };
      };
      Result = s;
      return Result;
    };
  });
  this.CompareP2JMessage = function (Item1, Item2) {
    var Result = 0;
    Result = Item1.Number - Item2.Number;
    return Result;
  };
  this.QuoteStr = function (s, Quote) {
    var Result = "";
    Result = $lp7(s,Quote);
    return Result;
  };
});
rtl.module("Pas2jsPParser",["System","Classes","SysUtils","PParser","PScanner","PasTree","PasResolver","FPPas2Js","Pas2jsLogger"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lm = pas.PParser;
  var $lt2 = $lm.TPasParser;
  var $lm1 = pas.FPPas2Js;
  var $lt3 = $lm.EParserError;
  var $lt4 = $lm1.TPas2JSResolver;
  var $lm2 = pas.PasTree;
  var $lt5 = $lm2.TFinalizationSection;
  var $lm3 = pas.PasResolver;
  var $lt6 = $lm3.TPasResolver;
  var $lt7 = $lm2.TPasModule;
  var $lt8 = $lm3.EPasResolve;
  var $lm4 = pas.SysUtils;
  var $lp = $lm4.IntToStr;
  var $lm5 = pas.System;
  var $lp1 = $lm5.Writeln;
  var $lt9 = $lm4.Exception;
  this.nFinalizationNotSupported = 3001;
  this.sFinalizationNotSupported = "Finalization section is not supported.";
  rtl.createClass(this,"TPas2jsPasParser",$lt2,function () {
    $lt = this;
    this.$init = function () {
      $lt2.$init.call(this);
      this.FLog = null;
    };
    this.$final = function () {
      this.FLog = undefined;
      $lt2.$final.call(this);
    };
    this.Create$2 = function (AScanner, AFileResolver, AEngine) {
      $lt2.Create$1.call(this,AScanner,AFileResolver,AEngine);
      this.SetOptions(rtl.unionSet(this.FOptions,$lm1.po_Pas2js));
      return this;
    };
    this.RaiseParserError = function (MsgNumber, Args) {
      var Msg = null;
      Msg = this.FLog.FindMsg(MsgNumber,true);
      this.SetLastMsg(Msg.Typ,MsgNumber,Msg.Pattern,Args);
      throw $lt3.$create("Create$2",[this.FLastMsg,this.FScanner.FCurFilename,this.FScanner.FCurRow,this.FScanner.GetCurColumn(),0]);
    };
    this.ParseSubModule = function (Module) {
      Module.set(null);
      this.NextToken();
      this.SaveComments();
      var $tmp = this.FCurToken;
      if ($tmp === 111) {
        this.ParseUnit(Module)}
       else if ($tmp === 78) {
        this.ParseLibrary(Module)}
       else {
        this.CheckToken(111);
      };
    };
  });
  rtl.createClass(this,"TPas2jsCompilerResolver",$lt4,function () {
    $lt1 = this;
    this.$init = function () {
      $lt4.$init.call(this);
      this.FLog = null;
      this.FOnCheckSrcName = null;
      this.FOnFindModule = null;
      this.FP2JParser = null;
      this.Owner = null;
    };
    this.$final = function () {
      this.FLog = undefined;
      this.FOnCheckSrcName = undefined;
      this.FOnFindModule = undefined;
      this.FP2JParser = undefined;
      this.Owner = undefined;
      $lt4.$final.call(this);
    };
    this.CreateElement$2 = function (AClass, AName, AParent, AVisibility, ASrcPos, TypeParams) {
      var Result = null;
      if (AClass === $lt5) rtl.as(this.FCurrentParser,$lt).RaiseParserError(3001,[]);
      Result = $lt6.CreateElement$2.call(this,AClass,AName,AParent,AVisibility,ASrcPos,TypeParams);
      if ($lt7.isPrototypeOf(Result)) this.FOnCheckSrcName(Result);
      return Result;
    };
    this.FindModule = function (aUnitname) {
      var Result = null;
      throw $lt8.$create("Create$1",["Call TPas2jsCompilerResolver.FindModule(name,expr,...) instead"]);
      Result = null;
      if (aUnitname === "") ;
      return Result;
    };
    this.FindUnit = function (AName, InFilename, NameExpr, InFileExpr) {
      var Result = null;
      Result = this.FOnFindModule(AName,InFilename,NameExpr,InFileExpr);
      return Result;
    };
    this.UsedInterfacesFinished = function (Section) {
      if (Section === null) ;
    };
  });
  this.RegisterMessages = function (Log) {
    var LastMsgNumber = 0;
    function r(MsgType, MsgNumber, MsgPattern) {
      var s = "";
      if ((LastMsgNumber >= 0) && (MsgNumber !== (LastMsgNumber + 1))) {
        s = "gap in registered message numbers: " + $lp(LastMsgNumber) + " " + $lp(MsgNumber);
        $lp1("Pas2jsPParser.RegisterMessages ",s);
        throw $lt9.$create("Create$1",[s]);
      };
      Log.RegisterMsg(MsgType,MsgNumber,MsgPattern);
      LastMsgNumber = MsgNumber;
    };
    LastMsgNumber = -1;
    r(1,3001,$mod.sFinalizationNotSupported);
  };
});
rtl.module("Pas2jsUseAnalyzer",["System","Classes","PasUseAnalyzer","PasTree","PasResolver","FPPas2Js"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lm = pas.PasUseAnalyzer;
  var $lt1 = $lm.TPasAnalyzer;
  var $lm1 = pas.PasTree;
  var $lt2 = $lm1.TPasArrayType;
  var $lm2 = pas.PasResolver;
  var $lp = $lm2.NoNil;
  var $lm3 = pas.FPPas2Js;
  var $lt3 = $lm3.TPas2JSModuleScope;
  var $lt4 = $lm2.TResolvedReference;
  var $lt5 = $lm1.TPasProcedure;
  var $lt6 = $lm1.TPasConstructor;
  var $lt7 = $lm1.TPasProperty;
  var $lt8 = $lm1.TPasClassType;
  var $lt9 = $lm3.TPas2JSClassScope;
  rtl.createClass(this,"TPas2JSAnalyzer",$lt1,function () {
    $lt = this;
    this.UseExpr = function (El) {
      var $Self = this;
      function CheckArgs(Args) {
        var i = 0;
        var ArgType = null;
        var ModScope = null;
        var aMod = null;
        var SystemVarRecs = null;
        if (Args === null) return;
        for (var $l = 0, $end = Args.FCount - 1; $l <= $end; $l++) {
          i = $l;
          ArgType = rtl.getObject(Args.Get(i)).ArgType;
          if (ArgType === null) continue;
          if ((ArgType.$class.ClassType() === $lt2) && (ArgType.ElType === null)) {
            aMod = El.GetModule();
            ModScope = rtl.as($lp(aMod.FData),$lt3);
            SystemVarRecs = ModScope.SystemVarRecs;
            if (SystemVarRecs === null) $Self.RaiseNotSupported(20190216104347,El,"");
            $Self.MarkImplScopeRef(El,SystemVarRecs,1);
            $Self.UseProcedure(SystemVarRecs);
            break;
          };
        };
      };
      var Ref = null;
      var Decl = null;
      if (El === null) return;
      $lt1.UseExpr.call(this,El);
      Ref = null;
      if ($lt4.isPrototypeOf(El.FData)) {
        Ref = El.FData;
        Decl = Ref.FDeclaration;
        if ($lt5.isPrototypeOf(Decl)) {
          CheckArgs(Decl.ProcType.Args);
          if (Decl.$class.ClassType() === $lt6) this.UseConstructor(Decl,El);
        } else if (Decl.$class.ClassType() === $lt7) CheckArgs(this.FResolver.GetPasPropertyArgs(Decl));
      };
    };
    this.UseConstructor = function (Proc, PosEl) {
      var ClassScope = null;
      if (Proc.FParent.$class.ClassType() === $lt8) {
        ClassScope = rtl.as(Proc.FParent.FData,$lt9);
        do {
          if (ClassScope.NewInstanceFunction !== null) {
            this.UseProcedure(ClassScope.NewInstanceFunction);
            break;
          };
          ClassScope = rtl.as(ClassScope.AncestorScope,$lt9);
        } while (!(ClassScope === null));
      };
      if (PosEl === null) ;
    };
  });
});
rtl.module("Pas2jsCompiler",["System","JS","Classes","SysUtils","contnrs","jsbase","jstree","jswriter","JSSrcMap","fpjson","PScanner","PParser","PasTree","PasResolver","PasResolveEval","PasUseAnalyzer","Pas2JSUtils","pas2jsresstrfile","pas2jsresources","pas2jshtmlresources","pas2jsjsresources","FPPas2Js","FPPJsSrcMap","Pas2jsLogger","Pas2JSFS","Pas2jsPParser","Pas2jsUseAnalyzer"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lt1 = null;
  var $lt2 = null;
  var $lt3 = null;
  var $lt4 = null;
  var $lt5 = null;
  var $lt6 = null;
  var $lt7 = null;
  var $lt8 = null;
  var $lt9 = null;
  var $lt10 = null;
  var $lt11 = null;
  var $lt12 = null;
  var $lt13 = null;
  var $lt14 = null;
  var $lt15 = null;
  var $lt16 = null;
  var $lt17 = null;
  var $lt18 = null;
  var $lm = pas.PScanner;
  var $lm1 = pas.FPPas2Js;
  var $lm2 = pas.SysUtils;
  var $lt19 = $lm2.Exception;
  var $lm3 = pas.System;
  var $lt20 = $lm3.TObject;
  var $lm4 = pas.contnrs;
  var $lt21 = $lm4.TObjectList;
  var $lp = $lm2.FreeAndNil;
  var $lm5 = pas.PasResolver;
  var $lp1 = $lm5.IsValidIdent;
  var $lp2 = $lm2.CompareText;
  var $lp3 = $lm3.Copy;
  var $lp4 = $lm2.LeftStr;
  var $lt22 = $lm.EScannerError;
  var $lm6 = pas.PParser;
  var $lt23 = $lm6.EParserError;
  var $lt24 = $lm5.EPasResolve;
  var $lt25 = $lm1.EPas2JS;
  var $lt26 = $lm.EFileNotFoundError;
  var $lm7 = pas.Pas2JSFS;
  var $lt27 = $lm7.EPas2jsFS;
  var $lt28 = $lm5.TPasResolver;
  var $lm8 = pas.Pas2jsPParser;
  var $lt29 = $lm8.TPas2jsCompilerResolver;
  var $lm9 = pas.Classes;
  var $lt30 = $lm9.TFPList;
  var $lm10 = pas.Pas2jsUseAnalyzer;
  var $lt31 = $lm10.TPas2JSAnalyzer;
  var $lt32 = $lm1.TPas2jsPasScanner;
  var $lt33 = $lm8.TPas2jsPasParser;
  var $lm11 = pas.PasTree;
  var $lp5 = $lm.ExtractFilenameOnly;
  var $lt34 = $lm1.TPasToJSConverter;
  var $lp6 = $lm3.VarRecs;
  var $lp7 = $lm2.ExtractFilePath;
  var $lt35 = $lm11.TPasUnitModule;
  var $lt36 = $lm11.TPasModule;
  var $lm12 = pas.Pas2jsLogger;
  var $lp8 = $lm12.QuoteStr;
  var $lt37 = $lm11.TPasProgram;
  var $lt38 = $lm11.TPasLibrary;
  var $lt39 = $lm5.TPasModuleScope;
  var $lp9 = $lm5.NoNil;
  var $lp10 = $lm.StrToModeSwitch;
  var $lp11 = $lm.SafeFormat;
  var $lt40 = $lm.TCondDirectiveEvaluator;
  var $lp12 = $lm2.LowerCase;
  var $lp13 = $lm2.Format;
  var $lt41 = $lm3.TGuid;
  var $lp14 = $lm3.Delete;
  var $lm13 = pas.Pas2JSUtils;
  var $lp15 = $lm13.GetNextDelimitedItem;
  var $lm14 = pas.PasResolveEval;
  var $lp16 = $lm14.ReleaseEvalValue;
  var $lp17 = $lm2.ExtractFileName;
  var $lt42 = $lm11.TPasPackage;
  var $lp18 = $lm2.ChangeFileExt;
  var $lp19 = $lm2.IntToStr;
  var $lp20 = $lm8.RegisterMessages;
  var $lp21 = $lm2.GetEnvironmentVariable;
  var $lt43 = $lm9.TStringList;
  var $lp22 = $lm13.SplitCmdLineParams;
  var $lp23 = $lm3.Pos;
  var $lp24 = $lm2.SameText;
  var $lp25 = $lm2.UpperCase;
  var $lm15 = pas.jstree;
  var $lt44 = $lm15.TJSSourceElements;
  var $lt45 = $lm15.TJSImportStatement;
  var $lm16 = pas.FPPJsSrcMap;
  var $lt46 = $lm16.TPas2JSMapper;
  var $lm17 = pas.jswriter;
  var $lt47 = $lm17.TJSWriter;
  var $lt48 = $lm12.TPas2jsLogger;
  var $lt49 = $lm16.TPas2JSSrcMap;
  var $lp26 = $lm3.StringOfChar;
  var $lp27 = $lm2.Trim;
  var $lp28 = $lm2.ExtractFileExt;
  var $lt50 = $lm15.TJSPrimaryExpressionIdent;
  var $lt51 = $lm15.TJSDotMemberExpression;
  var $lt52 = $lm15.TJSSimpleAssignStatement;
  var $lp29 = $lm13.NormalizeEncoding;
  var $lt53 = $lm1.TPas2JSBuiltInName;
  var $lm18 = pas.jsbase;
  var $lp30 = $lm18.IsValidJSIdentifier;
  var $lp31 = $lm2.CreateGUID;
  var $lp32 = $lm2.Now;
  var $lp33 = $lm2.FormatFloat;
  var $lp34 = $lm14.GetObjName;
  var $lp35 = $lm.FilenameIsAbsolute;
  var $lp36 = $lm2.StringReplace;
  var $lp37 = $lm13.ChompPathDelim;
  var $lp38 = $lm3.Writeln;
  var $lm19 = pas.pas2jsresources;
  var $lt54 = $lm19.TNoResources;
  var $lm20 = pas.pas2jshtmlresources;
  var $lt55 = $lm20.THTMLResourceLinkHandler;
  var $lm21 = pas.pas2jsjsresources;
  var $lt56 = $lm21.TJSResourceHandler;
  var $lt57 = $lm1.TPasToJSConverterGlobals;
  var $lt58 = $lm1.TPas2JSResolverHub;
  var $lm22 = pas.pas2jsresstrfile;
  var $lt59 = $lm22.TResourceStringsFile;
  var $lp39 = $lm2.BoolToStr$1;
  var $lt60 = $lm.TMacroDef;
  this.VersionMajor = 3;
  this.VersionMinor = 3;
  this.VersionRelease = 1;
  this.VersionExtra = "";
  this.DefaultConfigFile = "pas2js.cfg";
  this.nOptionIsEnabled = 101;
  this.sOptionIsEnabled = 'Option "%s" is %s';
  this.nSyntaxModeIs = 102;
  this.sSyntaxModeIs = "Syntax mode is %s";
  this.nModeswitchXisY = 103;
  this.sModeswitchXisY = "Modeswitch %s is %s";
  this.nNameValue = 106;
  this.sNameValue = "%s: %s";
  this.nReadingOptionsFromFile = 107;
  this.sReadingOptionsFromFile = "Reading options from file %s";
  this.nEndOfReadingConfigFile = 108;
  this.sEndOfReadingConfigFile = "End of reading config file %s";
  this.nInterpretingFileOption = 109;
  this.sInterpretingFileOption = "interpreting file option %s";
  this.nSourceFileNotFound = 110;
  this.sSourceFileNotFound = "source file not found %s";
  this.nFileIsFolder = 111;
  this.sFileIsFolder = "expected file, but found directory %s";
  this.nConfigFileSearch = 112;
  this.sConfigFileSearch = "Configfile search: %s";
  this.nHandlingOption = 113;
  this.sHandlingOption = "handling option %s";
  this.nQuickHandlingOption = 114;
  this.sQuickHandlingOption = "quick handling option %s";
  this.nOutputDirectoryNotFound = 115;
  this.sOutputDirectoryNotFound = "output directory not found: %s";
  this.nUnableToWriteFile = 116;
  this.sUnableToWriteFile = "Unable to write file %s";
  this.nWritingFile = 117;
  this.sWritingFile = "Writing file %s ...";
  this.nCompilationAborted = 118;
  this.sCompilationAborted = "Compilation aborted";
  this.nCfgDirective = 119;
  this.sCfgDirective = "cfg directive %s: %s";
  this.nUnitCycle = 120;
  this.sUnitCycle = "Unit cycle found %s";
  this.nOptionForbidsCompile = 121;
  this.sOptionForbidsCompile = 'Option -Ju forbids to compile unit "%s"';
  this.nUnitNeedsCompileDueToUsedUnit = 122;
  this.sUnitsNeedCompileDueToUsedUnit = 'Unit "%s" needs compile due to used unit "%s"';
  this.nUnitNeedsCompileDueToOption = 123;
  this.sUnitsNeedCompileDueToOption = 'Unit "%s" needs compile due to option "%s"';
  this.nUnitNeedsCompileJSMissing = 124;
  this.sUnitsNeedCompileJSMissing = 'Unit "%s" needs compile, js file missing "%s"';
  this.nUnitNeedsCompilePasHasChanged = 125;
  this.sUnitsNeedCompilePasHasChanged = 'Unit "%s" needs compile, Pascal file has changed, js is %s';
  this.nParsingFile = 126;
  this.sParsingFile = "Parsing %s ...";
  this.nCompilingFile = 127;
  this.sCompilingFile = "Compiling %s ...";
  this.nExpectedButFound = 128;
  this.sExpectedButFound = 'Illegal unit name: Expected "%s", but found "%s"';
  this.nLinesInFilesCompiled = 129;
  this.sLinesInFilesCompiled = "%s lines in %s files compiled, %s sec%s";
  this.nTargetPlatformIs = 130;
  this.sTargetPlatformIs = "Target platform is %s";
  this.nTargetProcessorIs = 131;
  this.sTargetProcessorIs = "Target processor is %s";
  this.nMessageEncodingIs = 132;
  this.sMessageEncodingIs = "Message encoding is %s";
  this.nUnableToTranslatePathToDir = 133;
  this.sUnableToTranslatePathToDir = "Unable to translate path %s to directory %s";
  this.nSrcMapSourceRootIs = 134;
  this.sSrcMapSourceRootIs = 'source map "sourceRoot" is %s';
  this.nSrcMapBaseDirIs = 135;
  this.sSrcMapBaseDirIs = 'source map "local base directory" is %s';
  this.nUnitFileNotFound = 136;
  this.sUnitFileNotFound = "unit file not found %s";
  this.nClassInterfaceStyleIs = 137;
  this.sClassInterfaceStyleIs = "Class interface style is %s";
  this.nHandlingEnvOpts = 138;
  this.sHandlingEnvOpts = "handling environment options %s";
  this.nPostProcessorInfoX = 139;
  this.sPostProcessorInfoX = "Post processor: %s";
  this.nPostProcessorRunX = 140;
  this.sPostProcessorRunX = "Run post processor: %s";
  this.nPostProcessorFailX = 141;
  this.sPostProcessorFailX = "Post processor failed: %s";
  this.nPostProcessorWarnX = 142;
  this.sPostProcessorWarnX = "Post processor: %s";
  this.nPostProcessorFinished = 143;
  this.sPostProcessorFinished = "Post processor finished";
  this.nRTLIdentifierChanged = 144;
  this.sRTLIdentifierChanged = "RTL identifier %s changed from %s to %s";
  this.nSkipNoConstResourcestring = 145;
  this.sSkipNoConstResourcestring = "Resource string %s is not a constant, not adding to resourcestrings file.";
  this.nUnknownOptimizationOption = 146;
  this.sUnknownOptimizationOption = "unknown -Oo option %s";
  this.nSubtargetConfigNotFound = 147;
  this.sSubtargetConfigNotFound = "Subtarget %s config file not found";
  $lt = this.TP2jsCompilerOption = {"0": "coSkipDefaultConfigs", coSkipDefaultConfigs: 0, "1": "coBuildAll", coBuildAll: 1, "2": "coShowLogo", coShowLogo: 2, "3": "coShowErrors", coShowErrors: 3, "4": "coShowWarnings", coShowWarnings: 4, "5": "coShowNotes", coShowNotes: 5, "6": "coShowHints", coShowHints: 6, "7": "coShowInfos", coShowInfos: 7, "8": "coShowLineNumbers", coShowLineNumbers: 8, "9": "coShowTriedUsedFiles", coShowTriedUsedFiles: 9, "10": "coShowConditionals", coShowConditionals: 10, "11": "coShowUsedTools", coShowUsedTools: 11, "12": "coShowDebug", coShowDebug: 12, "13": "coShowMessageNumbers", coShowMessageNumbers: 13, "14": "coOverflowChecks", coOverflowChecks: 14, "15": "coRangeChecks", coRangeChecks: 15, "16": "coObjectChecks", coObjectChecks: 16, "17": "coAssertions", coAssertions: 17, "18": "coAllowCAssignments", coAllowCAssignments: 18, "19": "coAllowMacros", coAllowMacros: 19, "20": "coWriteableConst", coWriteableConst: 20, "21": "coLowerCase", coLowerCase: 21, "22": "coUseStrict", coUseStrict: 22, "23": "coWriteDebugLog", coWriteDebugLog: 23, "24": "coWriteMsgToStdErr", coWriteMsgToStdErr: 24, "25": "coPrecompile", coPrecompile: 25, "26": "coEnumValuesAsNumbers", coEnumValuesAsNumbers: 26, "27": "coKeepNotUsedPrivates", coKeepNotUsedPrivates: 27, "28": "coKeepNotUsedDeclarationsWPO", coKeepNotUsedDeclarationsWPO: 28, "29": "coShortRefGlobals", coShortRefGlobals: 29, "30": "coObfuscateLocalIdentifiers", coObfuscateLocalIdentifiers: 30, "31": "coSourceMapCreate", coSourceMapCreate: 31, "32": "coSourceMapInclude", coSourceMapInclude: 32, "33": "coSourceMapFilenamesAbsolute", coSourceMapFilenamesAbsolute: 33, "34": "coSourceMapXSSIHeader", coSourceMapXSSIHeader: 34};
  $lt1 = this.TP2jsRTLVersionCheck = {"0": "rvcNone", rvcNone: 0, "1": "rvcMain", rvcMain: 1, "2": "rvcSystem", rvcSystem: 2, "3": "rvcUnit", rvcUnit: 3};
  $lt2 = this.TP2JSResourceStringFile = {"0": "rsfNone", rsfNone: 0, "1": "rsfUnit", rsfUnit: 1, "2": "rsfProgram", rsfProgram: 2};
  $lt3 = this.TResourceMode = {"0": "Skip", Skip: 0, "1": "rmNone", rmNone: 1, "2": "rmHTML", rmHTML: 2, "3": "rmJS", rmJS: 3};
  this.DefaultP2jsCompilerOptions = rtl.createSet(3,20,22,34);
  this.DefaultP2jsRTLVersionCheck = 0;
  this.DefaultResourceMode = 2;
  this.coShowAll = rtl.createSet(null,3,12);
  this.coAllOptimizations = rtl.createSet(null,26,30);
  this.coO0 = rtl.createSet(27,28);
  this.coO1 = rtl.createSet(26);
  this.coO2 = rtl.unionSet(this.coO1,rtl.createSet(29));
  this.p2jscoCaption = ["Skip default configs","Build all","Show logo","Show errors","Show warnings","Show notes","Show hints","Show infos","Show line numbers","Show tried/used files","Show conditionals","Show used tools","Show debug","Show message numbers","Overflow checking","Range checking","Method call checking","Assertions","Allow C assignments","Allow macros","Allows typed constants to be writeable","Lowercase identifiers","Use strict","Write pas2jsdebug.log","Write messages to StdErr","Create precompiled units","Enum values as numbers","Keep not used private declarations","Keep not used declarations (WPO)","Create short local variables for globals","Obfuscate local identifiers","Create source map","Include Pascal sources in source map","Do not shorten filenames in source map","Prepend XSSI protection )]} to source map"];
  $lt4 = this.TP2jsMode = {"0": "p2jmObjFPC", p2jmObjFPC: 0, "1": "p2jmDelphi", p2jmDelphi: 1};
  this.p2jscModeNames = ["ObjFPC","Delphi"];
  this.p2jsMode_SwitchSets$a$clone = function (a) {
    var b = [];
    b.length = 2;
    for (var c = 0; c < 2; c++) b[c] = rtl.refSet(a[c]);
    return b;
  };
  this.p2jsMode_SwitchSets = [rtl.unionSet(rtl.intersectSet($lm.OBJFPCModeSwitches,$lm1.msAllPas2jsModeSwitches),$lm1.msAllPas2jsModeSwitchesReadOnly),rtl.unionSet(rtl.intersectSet($lm.DelphiModeSwitches,$lm1.msAllPas2jsModeSwitches),$lm1.msAllPas2jsModeSwitchesReadOnly)];
  rtl.createClass(this,"EPas2jsMacro",$lt19,function () {
    $lt5 = this;
  });
  rtl.createClass(this,"TPas2jsMacro",$lt20,function () {
    $lt6 = this;
    this.$init = function () {
      $lt20.$init.call(this);
      this.Name = "";
      this.Description = "";
      this.Value = "";
      this.CanHaveParams = false;
      this.OnSubstitute = null;
    };
    this.$final = function () {
      this.OnSubstitute = undefined;
      $lt20.$final.call(this);
    };
  });
  rtl.createClass(this,"TPas2jsMacroEngine",$lt20,function () {
    $lt7 = this;
    this.$init = function () {
      $lt20.$init.call(this);
      this.fMacros = null;
      this.FMaxLevel = 0;
    };
    this.$final = function () {
      this.fMacros = undefined;
      $lt20.$final.call(this);
    };
    this.GetMacros = function (Index) {
      var Result = null;
      Result = this.fMacros.GetItem(Index);
      return Result;
    };
    this.Create$1 = function () {
      this.fMacros = $lt21.$create("Create$3",[true]);
      this.FMaxLevel = 10;
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.fMacros;
        }, set: function (v) {
          this.p.fMacros = v;
        }});
      $lt20.Destroy.call(this);
    };
    this.Count = function () {
      var Result = 0;
      Result = this.fMacros.GetCount();
      return Result;
    };
    this.AddValue = function (aName, aDescription, aValue) {
      var Result = null;
      if (!$lp1(aName,false,false)) throw $lt5.$create("Create$1",['invalid macro name "' + aName + '"']);
      if (this.IndexOf(aName) >= 0) throw $lt5.$create("Create$1",['duplicate macro name "' + aName + '"']);
      Result = $lt6.$create("Create");
      Result.Name = aName;
      Result.Description = aDescription;
      Result.Value = aValue;
      this.fMacros.Add$1(Result);
      return Result;
    };
    this.AddFunction = function (aName, aDescription, OnSubstitute, CanHaveParams) {
      var Result = null;
      if (!$lp1(aName,false,false)) throw $lt5.$create("Create$1",['invalid macro name "' + aName + '"']);
      if (this.IndexOf(aName) >= 0) throw $lt5.$create("Create$1",['duplicate macro name "' + aName + '"']);
      Result = $lt6.$create("Create");
      Result.Name = aName;
      Result.Description = aDescription;
      Result.CanHaveParams = CanHaveParams;
      Result.OnSubstitute = OnSubstitute;
      this.fMacros.Add$1(Result);
      return Result;
    };
    this.IndexOf = function (aName) {
      var Result = 0;
      var i = 0;
      for (var $l = 0, $end = this.Count() - 1; $l <= $end; $l++) {
        i = $l;
        if ($lp2(this.GetMacros(i).Name,aName) === 0) return i;
      };
      Result = -1;
      return Result;
    };
    this.FindMacro = function (aName) {
      var Result = null;
      var i = 0;
      i = this.IndexOf(aName);
      if (i >= 0) {
        Result = this.GetMacros(i)}
       else Result = null;
      return Result;
    };
    this.Substitute = function (s, Sender, Lvl, SkipUnknown) {
      var p = 0;
      var StartP = 0;
      var BracketLvl = 0;
      var ParamStartP = 0;
      var MacroName = "";
      var NewValue = "";
      var Macro = null;
      if (Lvl >= this.FMaxLevel) throw $lt5.$create("Create$1",['macro cycle detected: "' + s.get() + '"']);
      p = 1;
      while (p < s.get().length) {
        if ((s.get().charAt(p - 1) === "$") && (s.get().charCodeAt((p + 1) - 1) in rtl.createSet(95,null,97,122,null,65,90))) {
          StartP = p;
          p += 2;
          while ((p <= s.get().length) && (s.get().charCodeAt(p - 1) in rtl.createSet(95,null,97,122,null,65,90,null,48,57))) p += 1;
          MacroName = $lp3(s.get(),StartP + 1,p - StartP - 1);
          Macro = this.FindMacro(MacroName);
          if (Macro === null) {
            if (!SkipUnknown) {
              throw $lt5.$create("Create$1",['macro not found "' + MacroName + '" in "' + s.get() + '"'])}
             else NewValue = "$" + MacroName;
          } else {
            if (Macro.CanHaveParams && (p <= s.get().length) && (s.get().charAt(p - 1) === "(")) {
              p += 1;
              ParamStartP = p;
              BracketLvl = 1;
              do {
                if (p > s.get().length) throw $lt5.$create("Create$1",['missing closing bracket ) in "' + s.get() + '"']);
                var $tmp = s.get().charAt(p - 1);
                if ($tmp === "(") {
                  BracketLvl += 1}
                 else if ($tmp === ")") if (BracketLvl === 1) {
                  NewValue = $lp3(s.get(),ParamStartP,p - ParamStartP);
                  break;
                } else {
                  BracketLvl -= 1;
                };
              } while (!false);
            } else if ((p <= s.get().length) && (s.get().charAt(p - 1) === "$")) p += 1;
            if ((Macro != null) && (Macro.OnSubstitute != null)) {
              if (!Macro.OnSubstitute(Sender,{get: function () {
                  return NewValue;
                }, set: function (v) {
                  NewValue = v;
                }},Lvl + 1)) throw $lt5.$create("Create$1",['macro "' + MacroName + '" failed in "' + s.get() + '"']);
            } else NewValue = Macro.Value;
          };
          s.set($lp4(s.get(),StartP - 1) + NewValue + $lp3(s.get(),p,s.get().length));
          p = StartP;
        };
        p += 1;
      };
    };
  });
  rtl.createClass(this,"ECompilerTerminate",$lt19,function () {
    $lt8 = this;
  });
  $lt9 = this.TUsedBySection = {"0": "ubMainSection", ubMainSection: 0, "1": "ubImplSection", ubImplSection: 1};
  $lt10 = this.TPas2jsReaderState = {"0": "prsNone", prsNone: 0, "1": "prsReading", prsReading: 1, "2": "prsWaitingForUsedUnits", prsWaitingForUsedUnits: 2, "3": "prsCanContinue", prsCanContinue: 3, "4": "prsFinished", prsFinished: 4, "5": "prsError", prsError: 5};
  rtl.createClass(this,"TPCUSupport",$lt20,function () {
    $lt11 = this;
  });
  rtl.recNewT(this,"TFindUnitInfo",function () {
    $lt12 = this;
    this.FileName = "";
    this.UnitName = "";
    this.isPCU = false;
    this.isForeign = false;
    this.$eq = function (b) {
      return (this.FileName === b.FileName) && (this.UnitName === b.UnitName) && (this.isPCU === b.isPCU) && (this.isForeign === b.isForeign);
    };
    this.$assign = function (s) {
      this.FileName = s.FileName;
      this.UnitName = s.UnitName;
      this.isPCU = s.isPCU;
      this.isForeign = s.isForeign;
      return this;
    };
  });
  rtl.recNewT(this,"TLoadUnitInfo",function () {
    $lt13 = this;
    this.UseFilename = "";
    this.UseUnitname = "";
    this.InFilename = "";
    this.NameExpr = null;
    this.InFileExpr = null;
    this.UseIsForeign = false;
    this.IsPCU = false;
    this.$eq = function (b) {
      return (this.UseFilename === b.UseFilename) && (this.UseUnitname === b.UseUnitname) && (this.InFilename === b.InFilename) && (this.NameExpr === b.NameExpr) && (this.InFileExpr === b.InFileExpr) && (this.UseIsForeign === b.UseIsForeign) && (this.IsPCU === b.IsPCU);
    };
    this.$assign = function (s) {
      this.UseFilename = s.UseFilename;
      this.UseUnitname = s.UseUnitname;
      this.InFilename = s.InFilename;
      this.NameExpr = s.NameExpr;
      this.InFileExpr = s.InFileExpr;
      this.UseIsForeign = s.UseIsForeign;
      this.IsPCU = s.IsPCU;
      return this;
    };
  });
  rtl.createClass(this,"TPas2JSCompilerSupport",$lt20,function () {
    $lt14 = this;
    this.$init = function () {
      $lt20.$init.call(this);
      this.FCompiler = null;
    };
    this.$final = function () {
      this.FCompiler = undefined;
      $lt20.$final.call(this);
    };
    this.Create$1 = function (aCompiler) {
      this.FCompiler = aCompiler;
      return this;
    };
  });
  rtl.createClass(this,"TPas2jsCompilerFile",$lt14,function () {
    $lt15 = this;
    this.$init = function () {
      $lt14.$init.call(this);
      this.FConverter = null;
      this.FFileResolver = null;
      this.FIsForeign = false;
      this.FIsMainFile = false;
      this.FJSFilename = "";
      this.FJSModule = null;
      this.FLog = null;
      this.FNeedBuild = false;
      this.FParser = null;
      this.FPasFileName = "";
      this.FPasModule = null;
      this.FPasResolver = null;
      this.FPasUnitName = "";
      this.FPCUFilename = "";
      this.FPCUSupport = null;
      this.FReaderState = 0;
      this.FResourceHandler = null;
      this.FScanner = null;
      this.FShowDebug = false;
      this.FUnitFilename = "";
      this.FUseAnalyzer = null;
      this.FUsedBy = rtl.arraySetLength(null,null,2);
    };
    this.$final = function () {
      this.FConverter = undefined;
      this.FFileResolver = undefined;
      this.FJSModule = undefined;
      this.FLog = undefined;
      this.FParser = undefined;
      this.FPasModule = undefined;
      this.FPasResolver = undefined;
      this.FPCUSupport = undefined;
      this.FResourceHandler = undefined;
      this.FScanner = undefined;
      this.FUseAnalyzer = undefined;
      this.FUsedBy = undefined;
      $lt14.$final.call(this);
    };
    this.GetUsedBy = function (Section, Index) {
      var Result = null;
      Result = rtl.getObject(this.FUsedBy[Section].Get(Index));
      return Result;
    };
    this.GetUsedByCount = function (Section) {
      var Result = 0;
      Result = this.FUsedBy[Section].FCount;
      return Result;
    };
    this.HandleResources = function (Sender, aFileName, aOptions) {
      this.FResourceHandler.StartUnit(this.FPasModule.FName);
      this.FResourceHandler.HandleResource(aFileName,aOptions);
      if (Sender === null) ;
    };
    this.OnConverterIsElementUsed = function (Sender, El) {
      var Result = false;
      if ((this.FCompiler.FWPOAnalyzer !== null) && !(28 in this.FCompiler.FOptions)) {
        Result = this.FCompiler.FWPOAnalyzer.IsUsed(El)}
       else if (!(27 in this.FCompiler.FOptions)) {
        Result = this.FUseAnalyzer.IsUsed(El)}
       else Result = true;
      if (Sender === null) ;
      return Result;
    };
    this.OnConverterIsTypeInfoUsed = function (Sender, El) {
      var Result = false;
      if ((this.FCompiler.FWPOAnalyzer !== null) && !(28 in this.FCompiler.FOptions)) {
        Result = this.FCompiler.FWPOAnalyzer.IsTypeInfoUsed(El)}
       else if (!(27 in this.FCompiler.FOptions)) {
        Result = this.FUseAnalyzer.IsTypeInfoUsed(El)}
       else Result = true;
      if (Sender === null) ;
      return Result;
    };
    this.OnPasResolverLog = function (Sender, Msg) {
      var aResolver = null;
      if (Msg === "") ;
      aResolver = Sender;
      this.DoLogMsgAtEl(aResolver.FLastMsgType,aResolver.FLastMsg,aResolver.FLastMsgNumber,aResolver.FLastElement);
      if (Sender === null) ;
    };
    this.OnParserLog = function (Sender, Msg) {
      var aParser = null;
      var aScanner = null;
      if (Msg === "") ;
      aParser = Sender;
      aScanner = aParser.FScanner;
      this.FLog.Log(aParser.FLastMsgType,aParser.FLastMsg,aParser.FLastMsgNumber,aScanner.FCurFilename,aScanner.FCurRow,aScanner.GetCurColumn(),true);
      if (Sender === null) ;
    };
    this.OnScannerLog = function (Sender, Msg) {
      var aScanner = null;
      if (Msg === "") ;
      aScanner = Sender;
      this.FLog.Log(aScanner.FLastMsgType,aScanner.FLastMsg,aScanner.FLastMsgNumber,aScanner.FCurFilename,aScanner.FCurRow,aScanner.GetCurColumn(),true);
      if (Sender === null) ;
    };
    this.OnUseAnalyzerMessage = function (Sender, Msg) {
      this.FLog.Log(Msg.MsgType,Msg.MsgText,Msg.MsgNumber,Msg.Filename,Msg.Row,Msg.Col,true);
      if (Sender === null) ;
    };
    this.HandleEParserError = function (E) {
      this.FLog.Log(this.FParser.FLastMsgType,this.FParser.FLastMsg,this.FParser.FLastMsgNumber,E.FFilename,E.FRow,E.FColumn,true);
      this.FCompiler.Terminate(6);
    };
    this.HandleEPasResolve = function (E) {
      var aFilename = "";
      var aRow = 0;
      var aColumn = 0;
      if (E.FPasElement !== null) {
        aFilename = E.FPasElement.SourceFilename;
        this.FPasResolver.$class.UnmangleSourceLineNumber(E.FPasElement.SourceLinenumber,{get: function () {
            return aRow;
          }, set: function (v) {
            aRow = v;
          }},{get: function () {
            return aColumn;
          }, set: function (v) {
            aColumn = v;
          }});
      } else {
        aFilename = this.FScanner.FCurFilename;
        aRow = this.FScanner.FCurRow;
        aColumn = this.FScanner.GetCurColumn();
      };
      this.FLog.Log(E.MsgType,E.fMessage,E.MsgNumber,aFilename,aRow,aColumn,true);
      this.FCompiler.Terminate(6);
    };
    this.HandleEPas2JS = function (E) {
      var aFilename = "";
      var aRow = 0;
      var aColumn = 0;
      if (E.PasElement !== null) {
        aFilename = E.PasElement.SourceFilename;
        this.FPasResolver.$class.UnmangleSourceLineNumber(E.PasElement.SourceLinenumber,{get: function () {
            return aRow;
          }, set: function (v) {
            aRow = v;
          }},{get: function () {
            return aColumn;
          }, set: function (v) {
            aColumn = v;
          }});
        this.FLog.Log(E.MsgType,E.fMessage,E.MsgNumber,aFilename,aRow,aColumn,true);
      } else {
        this.FLog.Log(E.MsgType,E.fMessage,E.MsgNumber,"",0,0,true);
      };
      this.FCompiler.Terminate(7);
    };
    this.HandleUnknownException = function (E) {
      if (!$lt8.isPrototypeOf(E)) this.FLog.Log(0,"bug: uncaught " + E.$classname + ": " + E.fMessage,0,"",0,0,true);
      this.FLog.Log(0,E.$classname + ": " + E.fMessage,0,"",0,0,true);
      this.FCompiler.Terminate(1);
    };
    this.HandleException = function (E) {
      if (this.FShowDebug) this.FLog.LogExceptionBackTrace(E);
      if ($lt22.isPrototypeOf(E)) {
        this.FLog.Log(this.FScanner.FLastMsgType,this.FScanner.FLastMsg,this.FScanner.FLastMsgNumber,this.FScanner.FCurFilename,this.FScanner.FCurRow,this.FScanner.GetCurColumn(),true);
        this.FCompiler.Terminate(6);
      } else if ($lt23.isPrototypeOf(E)) {
        this.HandleEParserError(E)}
       else if ($lt24.isPrototypeOf(E)) {
        this.HandleEPasResolve(E)}
       else if ($lt25.isPrototypeOf(E)) {
        this.HandleEPas2JS(E)}
       else if ($lt26.isPrototypeOf(E)) {
        if ((E.fMessage !== "") || (this.FLog.FLastMsgType !== 0)) this.FLog.Log(0,E.fMessage,0,"",0,0,true);
        this.FCompiler.Terminate(4);
      } else if ($lt27.isPrototypeOf(E)) {
        this.FLog.Log(0,E.fMessage,0,"",0,0,true);
        this.FCompiler.Terminate(4);
      } else if ((this.FPCUSupport != null) && this.FPCUSupport.HandleException(E)) {}
      else this.HandleUnknownException(E);
    };
    this.HandleJSException = function (Msg, E) {
      this.FCompiler.HandleJSException(Msg,E,true);
    };
    this.DoLogMsgAtEl = function (MsgType, Msg, MsgNumber, El) {
      var Line = 0;
      var Col = 0;
      var Filename = "";
      if (El !== null) {
        Filename = El.SourceFilename;
        $lt28.UnmangleSourceLineNumber(El.SourceLinenumber,{get: function () {
            return Line;
          }, set: function (v) {
            Line = v;
          }},{get: function () {
            return Col;
          }, set: function (v) {
            Col = v;
          }});
      } else {
        Filename = "";
        Line = 0;
        Col = 0;
      };
      this.FLog.Log(MsgType,Msg,MsgNumber,Filename,Line,Col,true);
    };
    this.RaiseInternalError = function (id, Msg) {
      this.FCompiler.RaiseInternalError(id,Msg);
    };
    this.ReaderFinished = function () {
      this.FReaderState = 4;
      try {
        this.FCompiler.RemoveReadingModule(this);
        if (23 in this.FCompiler.FOptions) {
          this.FLog.DebugLogWriteLn("Pas-Module:");
          this.FLog.DebugLogWriteLn(this.FPasModule.GetDeclaration(true));
        };
        if ((this.FPCUSupport != null) && !this.FPCUSupport.HasReader()) this.FUseAnalyzer.SetOptions(rtl.unionSet(this.FUseAnalyzer.FOptions,rtl.createSet(1)));
        this.FUseAnalyzer.AnalyzeModule(this.FPasModule);
        if ((this.FPCUSupport != null) && !this.FPCUSupport.HasReader() && (25 in this.FCompiler.FOptions)) this.FPCUSupport.WritePCU();
      } catch ($e) {
        if ($lt8.isPrototypeOf($e)) {
          var E = $e;
          throw $e;
        } else if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          this.HandleException(E);
        } else {
          this.HandleJSException('[20181031190529] TPas2jsCompilerFile.ReaderFinished File="' + this.FUnitFilename + '"',$e);
        }
      };
    };
    this.Create$2 = function (aCompiler, aPasFilename, aPCUFilename) {
      var ub = 0;
      $lt14.Create$1.call(this,aCompiler);
      this.FPasFileName = aPasFilename;
      this.FPCUFilename = aPCUFilename;
      if (this.FPasFileName !== "") {
        this.FUnitFilename = this.FPasFileName}
       else this.FUnitFilename = this.FPCUFilename;
      this.FLog = this.FCompiler.FLog;
      this.FPasResolver = $lt29.$create("Create$3");
      this.FPasResolver.Owner = this;
      this.FPasResolver.FOnFindModule = rtl.createCallback(this,"OnResolverFindModule");
      this.FPasResolver.FOnCheckSrcName = rtl.createCallback(this,"OnResolverCheckSrcName");
      this.FPasResolver.FOnLog = rtl.createCallback(this,"OnPasResolverLog");
      this.FPasResolver.FLog = this.FLog;
      this.FPasResolver.FHub = aCompiler.FResolverHub;
      this.FPasResolver.AddObjFPCBuiltInIdentifiers($lm1.btAllJSBaseTypes,$lm1.bfAllJSBaseProcs);
      this.FIsMainFile = this.FCompiler.FFS.SameFileName(this.FCompiler.FMainSrcFile,this.FPasFileName);
      for (var $l = 0; $l <= 1; $l++) {
        ub = $l;
        this.FUsedBy[ub] = $lt30.$create("Create");
      };
      this.FUseAnalyzer = $lt31.$create("Create$1");
      this.FUseAnalyzer.FOnMessage = rtl.createCallback(this,"OnUseAnalyzerMessage");
      this.FUseAnalyzer.FResolver = this.FPasResolver;
      this.FPCUSupport = this.CreatePCUSupport();
      return this;
    };
    this.Destroy = function () {
      var ub = 0;
      $lp({p: this, get: function () {
          return this.p.FPCUSupport;
        }, set: function (v) {
          this.p.FPCUSupport = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FUseAnalyzer;
        }, set: function (v) {
          this.p.FUseAnalyzer = v;
        }});
      for (var $l = 0; $l <= 1; $l++) {
        ub = $l;
        $lp({a: ub, p: this.FUsedBy, get: function () {
            return this.p[this.a];
          }, set: function (v) {
            this.p[this.a] = v;
          }});
      };
      $lp({p: this, get: function () {
          return this.p.FJSModule;
        }, set: function (v) {
          this.p.FJSModule = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FConverter;
        }, set: function (v) {
          this.p.FConverter = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FParser;
        }, set: function (v) {
          this.p.FParser = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FScanner;
        }, set: function (v) {
          this.p.FScanner = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FFileResolver;
        }, set: function (v) {
          this.p.FFileResolver = v;
        }});
      $lp({p: this, get: function () {
          return this.p.FPasResolver;
        }, set: function (v) {
          this.p.FPasResolver = v;
        }});
      this.FPasModule = null;
      $lt20.Destroy.call(this);
    };
    this.CreatePCUSupport = function () {
      var Result = null;
      Result = null;
      return Result;
    };
    this.GetInitialModeSwitches = function () {
      var Result = {};
      Result = rtl.refSet(this.FCompiler.FModeSwitches);
      return Result;
    };
    this.IsUnitReadFromPCU = function () {
      var Result = false;
      Result = (this.FPCUSupport != null) && this.FPCUSupport.HasReader();
      return Result;
    };
    this.GetInitialBoolSwitches = function () {
      var Result = {};
      var bs = {};
      bs = rtl.createSet(7,9);
      if (6 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,22);
      if (5 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,23);
      if (4 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,24);
      if (14 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,14);
      if (15 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,15);
      if (16 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,27);
      if (17 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,3);
      if (19 in this.FCompiler.FOptions) bs = rtl.includeSet(bs,25);
      if (!(20 in this.FCompiler.FOptions)) bs = rtl.excludeSet(bs,9);
      Result = rtl.refSet(bs);
      return Result;
    };
    this.GetInitialConverterOptions = function () {
      var Result = {};
      Result = rtl.refSet($lm1.DefaultPasToJSOptions);
      if (22 in this.FCompiler.FOptions) {
        Result = rtl.includeSet(Result,3)}
       else Result = rtl.excludeSet(Result,3);
      if (26 in this.FCompiler.FOptions) Result = rtl.includeSet(Result,2);
      if ((29 in this.FCompiler.FOptions) || this.IsUnitReadFromPCU()) Result = rtl.includeSet(Result,10);
      if (30 in this.FCompiler.FOptions) Result = rtl.includeSet(Result,11);
      if (21 in this.FCompiler.FOptions) {
        Result = rtl.includeSet(Result,0)}
       else Result = rtl.excludeSet(Result,0);
      var $tmp = this.FCompiler.FRTLVersionCheck;
      if ($tmp === 0) {}
      else if ($tmp === 1) {
        Result = rtl.includeSet(Result,7)}
       else if ($tmp === 2) {
        Result = rtl.includeSet(Result,8)}
       else if ($tmp === 3) Result = rtl.includeSet(Result,9);
      return Result;
    };
    this.CreateScannerAndParser = function (aFileResolver) {
      var aUnitName = "";
      var i = 0;
      var M = null;
      this.FFileResolver = aFileResolver;
      if (this.FScanner !== null) this.RaiseInternalError(20180707193258,this.FUnitFilename);
      this.FScanner = $lt32.$create("Create$1",[this.FFileResolver]);
      this.FScanner.FLogEvents = rtl.refSet(this.FPasResolver.FScannerLogEvents);
      this.FScanner.FOnLog = rtl.createCallback(this,"OnScannerLog");
      this.FScanner.FOnFormatPath = rtl.createCallback(this.FCompiler,"FormatPath");
      this.FScanner.RegisterResourceHandler("*",rtl.createCallback(this,"HandleResources"));
      this.FParser = $lt33.$create("Create$2",[this.FScanner,this.FFileResolver,this.FPasResolver]);
      this.FScanner.SetOptions(rtl.unionSet(this.FScanner.FOptions,rtl.createSet(11)));
      this.FScanner.SetAllowedModeSwitches(rtl.refSet($lm1.msAllPas2jsModeSwitches));
      this.FScanner.SetReadOnlyModeSwitches(rtl.refSet($lm1.msAllPas2jsModeSwitchesReadOnly));
      this.FScanner.SetCurrentModeSwitches(rtl.refSet(this.GetInitialModeSwitches()));
      this.FScanner.SetAllowedBoolSwitches(rtl.refSet($lm1.bsAllPas2jsBoolSwitches));
      this.FScanner.SetReadOnlyBoolSwitches(rtl.refSet($lm1.bsAllPas2jsBoolSwitchesReadOnly));
      this.FScanner.SetCurrentBoolSwitches(rtl.refSet(this.GetInitialBoolSwitches()));
      this.FScanner.SetAllowedValueSwitches(rtl.refSet($lm1.vsAllPas2jsValueSwitches));
      this.FScanner.SetReadOnlyValueSwitches(rtl.refSet($lm1.vsAllPas2jsValueSwitchesReadOnly));
      this.FScanner.SetCurrentValueSwitch(0,$lm11.InterfaceTypeNames[this.FCompiler.FInterfaceType]);
      if (18 in this.FCompiler.FOptions) this.FScanner.SetOptions(rtl.unionSet(this.FScanner.FOptions,rtl.createSet(2)));
      if (this.FCompiler.FResourceMode === 1) this.FScanner.SetOptions(rtl.unionSet(this.FScanner.FOptions,rtl.createSet(16)));
      for (var $l = 0, $end = this.FCompiler.FDefines.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        M = this.FCompiler.FDefines.GetObject(i);
        if (M === null) {
          this.FScanner.AddDefine(this.FCompiler.FDefines.Get(i),false)}
         else this.FScanner.AddMacro(M.FName,M.FValue,false);
      };
      this.FScanner.FCompilerVersion = this.FCompiler.$class.GetVersion(true);
      this.FScanner.FTargetPlatform = this.FCompiler.GetTargetPlatform();
      this.FScanner.FTargetProcessor = this.FCompiler.GetTargetProcessor();
      this.FScanner.FResolver = this.FPasResolver;
      this.FParser.FLogEvents = rtl.refSet(this.FPasResolver.FPParserLogEvents);
      this.FParser.FOnLog = rtl.createCallback(this,"OnParserLog");
      this.FParser.FLog = this.FLog;
      this.FPasResolver.FP2JParser = this.FParser;
      if (!this.FIsMainFile) {
        aUnitName = $lp5(this.FUnitFilename);
        if ($lp2(aUnitName,"system") === 0) this.FParser.FImplicitUses.Clear();
      };
    };
    this.CreateConverter = function () {
      if (this.FConverter !== null) return;
      this.FConverter = $lt34.$create("Create$1");
      this.FConverter.SetGlobals(this.FCompiler.FConverterGlobals);
      this.FConverter.FOptions = rtl.refSet(this.GetInitialConverterOptions());
    };
    this.OnResolverFindModule = function (UseUnitName, InFilename, NameExpr, InFileExpr) {
      var Result = null;
      var aFile = null;
      var UnitInfo = $lt12.$new();
      var LoadInfo = $lt13.$new();
      var ModuleDir = "";
      Result = null;
      aFile = null;
      if ($lp2($lp5(this.FUnitFilename),UseUnitName) === 0) this.FParser.RaiseParserError(120,$lp6(18,UseUnitName));
      ModuleDir = $lp7(this.FPasFileName);
      UnitInfo.$assign(this.FCompiler.GetUnitInfo(UseUnitName,InFilename,ModuleDir,this.FPCUSupport));
      if (UnitInfo.FileName !== "") {
        LoadInfo.UseFilename = UnitInfo.FileName;
        LoadInfo.UseUnitname = UnitInfo.UnitName;
        LoadInfo.NameExpr = NameExpr;
        LoadInfo.IsPCU = UnitInfo.isPCU;
        if (UnitInfo.isPCU) {
          LoadInfo.InFilename = "";
          LoadInfo.InFileExpr = null;
          LoadInfo.UseIsForeign = false;
        } else {
          LoadInfo.InFilename = InFilename;
          LoadInfo.InFileExpr = InFileExpr;
          LoadInfo.UseIsForeign = UnitInfo.isForeign;
        };
        aFile = this.FCompiler.LoadUsedUnit($lt13.$clone(LoadInfo),this);
      };
      if (aFile !== null) Result = aFile.FPasModule;
      return Result;
    };
    this.OnResolverCheckSrcName = function (Element) {
      var SrcName = "";
      var ExpectedSrcName = "";
      if ((Element.$class.ClassType() === $lt35) || (Element.$class.ClassType() === $lt36)) {
        SrcName = Element.FName;
        if (this.FIsMainFile) {
          if (this.FPasUnitName === "") {
            this.FPasUnitName = SrcName;
            this.FCompiler.AddUsedUnit(this);
          };
        } else {
          ExpectedSrcName = $lp5(this.FUnitFilename);
          if ($lp2(SrcName,ExpectedSrcName) === 0) return;
          this.FParser.RaiseParserError(128,$lp6(18,ExpectedSrcName,18,SrcName));
        };
      };
    };
    this.OpenFile = function (aFilename) {
      this.FPasFileName = aFilename;
      try {
        this.FScanner.OpenFile(this.FPasFileName);
      } catch ($e) {
        if ($lt8.isPrototypeOf($e)) {
          var E = $e;
          throw $e;
        } else if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          this.HandleException(E);
        } else {
          this.HandleJSException('[20181031190536] TPas2jsCompilerFile.OpenFile "' + aFilename + '"',$e);
        }
      };
    };
    this.ReadUnit = function () {
      if (this.FShowDebug) this.FLog.LogMsg(126,$lp6(18,$lp8(this.FUnitFilename,'"')),"",0,0,true);
      if (this.FPasModule !== null) this.FCompiler.RaiseInternalError(20180305190321,this.FUnitFilename);
      this.FReaderState = 1;
      try {
        this.FCompiler.AddReadingModule(this);
        this.FPasResolver.FInterfaceOnly = this.FIsForeign;
        if (this.IsUnitReadFromPCU()) {
          this.FPCUSupport.ReadUnit()}
         else {
          if (this.FIsMainFile) {
            this.FParser.ParseMain({p: this, get: function () {
                return this.p.FPasModule;
              }, set: function (v) {
                this.p.FPasModule = v;
              }})}
           else this.FParser.ParseSubModule({p: this, get: function () {
              return this.p.FPasModule;
            }, set: function (v) {
              this.p.FPasModule = v;
            }});
          if (this.FParser.FCurModule === null) {
            this.ReaderFinished()}
           else this.FReaderState = 2;
        };
      } catch ($e) {
        if ($lt8.isPrototypeOf($e)) {
          var E = $e;
          throw $e;
        } else if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          this.HandleException(E);
        } else {
          this.HandleJSException('[20181031190541] TPas2jsCompilerFile.ReadUnit File="' + this.FUnitFilename + '"',$e);
        }
      };
      if (this.FReaderState === 1) this.FReaderState = 5;
      if ((this.FPasModule !== null) && (this.FPasModule.FData === null)) this.FPasModule.FData = this;
    };
    this.ReadContinue = function () {
      var Result = false;
      Result = true;
      if (this.FShowDebug) this.FLog.LogPlain$1($lp6(18,'Debug: Continue reading unit "',18,this.FUnitFilename,18,'"...'));
      if (this.FPasModule === null) this.FCompiler.RaiseInternalError(20180305190338,this.FUnitFilename);
      this.FReaderState = 1;
      try {
        if ((this.FPCUSupport != null) && this.FPCUSupport.HasReader()) {
          Result = this.FPCUSupport.ReadContinue()}
         else {
          this.FParser.ParseContinue();
          Result = this.FParser.FCurModule === null;
        };
        if (Result) {
          this.ReaderFinished()}
         else this.FReaderState = 2;
      } catch ($e) {
        if ($lt8.isPrototypeOf($e)) {
          var E = $e;
          throw $e;
        } else if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          this.HandleException(E);
        } else {
          this.HandleJSException('[20181031190545] TPas2jsCompilerFile.ReadContinue File="' + this.FUnitFilename + '"',$e);
        }
      };
      if (this.FReaderState === 1) this.FReaderState = 5;
      return Result;
    };
    this.ReaderState = function () {
      var Result = 0;
      var Section = null;
      Result = this.FReaderState;
      if (Result === 2) {
        if ((this.FPCUSupport != null) && this.FPCUSupport.HasReader()) {
          if (this.FPCUSupport.ReadCanContinue()) Result = 3;
        } else {
          if (this.FParser.CanParseContinue({get: function () {
              return Section;
            }, set: function (v) {
              Section = v;
            }})) Result = 3;
        };
      };
      return Result;
    };
    this.CreateJS = function () {
      try {
        this.CreateConverter();
        this.FConverter.FOnIsElementUsed = rtl.createCallback(this,"OnConverterIsElementUsed");
        this.FConverter.FOnIsTypeInfoUsed = rtl.createCallback(this,"OnConverterIsTypeInfoUsed");
        this.FJSModule = this.FConverter.ConvertPasElement(this.FPasModule,this.FPasResolver);
        if (this.FResourceHandler.$class.OutputMode() === 1) this.FJSModule = this.FResourceHandler.WriteJS(this.FPasUnitName,this.FJSModule);
      } catch ($e) {
        if ($lt8.isPrototypeOf($e)) {
          var E = $e;
          throw $e;
        } else if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          this.HandleException(E);
        } else {
          this.HandleJSException('[20181031190549] TPas2jsCompilerFile.CreateJS File="' + this.FUnitFilename + '"',$e);
        }
      };
    };
    this.EmitModuleHints = function () {
      try {
        if ((this.FPCUSupport === null) || !this.FPCUSupport.HasReader()) {
          this.FUseAnalyzer.EmitModuleHints(this.FPasModule);
        };
      } catch ($e) {
        if ($lt8.isPrototypeOf($e)) {
          var E = $e;
          throw $e;
        } else if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          this.HandleException(E);
        } else {
          this.HandleJSException('[20190226183324] TPas2jsCompilerFile.EmitModuleHints File="' + this.FUnitFilename + '"',$e);
        }
      };
    };
    this.GetPasMainUsesClause = function () {
      var Result = [];
      var aModule = null;
      var IntfSection = null;
      var PrgSection = null;
      var LibSection = null;
      Result = [];
      aModule = this.GetCurPasModule();
      if (aModule === null) return Result;
      if (aModule.$class.ClassType() === $lt36) {
        IntfSection = aModule.InterfaceSection;
        if (IntfSection !== null) Result = IntfSection.UsesClause;
      } else if (aModule.$class.ClassType() === $lt37) {
        PrgSection = aModule.ProgramSection;
        if (PrgSection !== null) Result = PrgSection.UsesClause;
      } else if (aModule.$class.ClassType() === $lt38) {
        LibSection = aModule.LibrarySection;
        if (LibSection !== null) Result = LibSection.UsesClause;
      };
      return Result;
    };
    this.GetPasImplUsesClause = function () {
      var Result = [];
      var aModule = null;
      Result = [];
      aModule = this.GetCurPasModule();
      if (aModule === null) return Result;
      if (aModule.ImplementationSection !== null) Result = aModule.ImplementationSection.UsesClause;
      return Result;
    };
    this.GetCurPasModule = function () {
      var Result = null;
      if (this.FPasModule !== null) {
        Result = this.FPasModule}
       else if ((this.FPasResolver !== null) && (this.FPasResolver.FRootElement !== null)) {
        Result = this.FPasResolver.FRootElement}
       else if (this.FParser !== null) {
        Result = this.FParser.FCurModule}
       else Result = null;
      return Result;
    };
    this.GetModuleName = function () {
      var Result = "";
      var aModule = null;
      aModule = this.GetCurPasModule();
      if (aModule !== null) {
        Result = aModule.FName}
       else Result = "";
      if (Result === "") Result = $lp5(this.FUnitFilename);
      return Result;
    };
    this.GetFile = function (aModule) {
      var Result = null;
      var Scope = null;
      var Resolver = null;
      Result = null;
      if ((aModule === null) || (aModule.FData === null)) return Result;
      if ($lt15.isPrototypeOf(aModule.FData)) {
        Result = aModule.FData}
       else if ($lt39.isPrototypeOf(aModule.FData)) {
        Scope = aModule.FData;
        Resolver = rtl.as($lp9(Scope.Owner),$lt29);
        Result = rtl.as(Resolver.Owner,$lt15);
      };
      return Result;
    };
  });
  rtl.createClass(this,"TPas2JSPostProcessorSupport",$lt14,function () {
    $lt16 = this;
  });
  rtl.createClass(this,"TPas2JSConfigSupport",$lt14,function () {
    $lt17 = this;
    this.$init = function () {
      $lt14.$init.call(this);
      this.FConditionEval = null;
      this.FCurrentCfgFilename = "";
      this.FCurrentCfgLineNumber = 0;
    };
    this.$final = function () {
      this.FConditionEval = undefined;
      $lt14.$final.call(this);
    };
    this.CfgSyntaxError = function (Msg) {
      this.FCompiler.FLog.Log(1,Msg,0,this.FCurrentCfgFilename,this.FCurrentCfgLineNumber,0,true);
      this.FCompiler.Terminate(3);
    };
    this.ConditionEvalVariable = function (Sender, aName, Value) {
      var Result = false;
      var i = 0;
      var M = null;
      var ms = 0;
      i = this.FCompiler.FDefines.IndexOf(aName);
      if (i >= 0) {
        M = this.FCompiler.FDefines.GetObject(i);
        if (M === null) {
          Value.set($lm.CondDirectiveBool[1])}
         else Value.set(M.FValue);
        return true;
      };
      ms = $lp10(aName);
      if ((ms !== 0) && (ms in this.FCompiler.FModeSwitches)) {
        Value.set($lm.CondDirectiveBool[1]);
        return true;
      };
      if (Sender === null) ;
      Result = false;
      return Result;
    };
    this.ConditionEvalLog = function (Sender, Args) {
      this.CfgSyntaxError($lp11(Sender.MsgPattern,Args));
    };
    this.Create$1 = function (aCompiler) {
      $lt14.Create$1.call(this,aCompiler);
      this.FConditionEval = $lt40.$create("Create$1",[false]);
      this.FConditionEval.FOnLog = rtl.createCallback(this,"ConditionEvalLog");
      this.FConditionEval.FOnEvalVariable = rtl.createCallback(this,"ConditionEvalVariable");
      return this;
    };
    this.Destroy = function () {
      $lp({p: this, get: function () {
          return this.p.FConditionEval;
        }, set: function (v) {
          this.p.FConditionEval = v;
        }});
      $lt20.Destroy.call(this);
    };
    this.LoadDefaultConfig = function () {
      var aFileName = "";
      aFileName = this.FindDefaultConfig();
      if (aFileName !== "") this.LoadConfig(aFileName);
    };
    var TSkip = {"0": "skipNone", skipNone: 0, "1": "skipIf", skipIf: 1, "2": "skipElse", skipElse: 2};
    var IdentChars = rtl.createSet(null,97,122,null,65,90,95,null,48,57);
    this.LoadConfig = function (aFileName) {
      var $Self = this;
      var Line = "";
      var l = 0;
      var p = 0;
      var StartP = 0;
      function GetWord() {
        var Result = "";
        StartP = p;
        while ((p <= l) && ((Line.charCodeAt(p - 1) in IdentChars) || (Line.charAt(p - 1) > ""))) p += 1;
        Result = $lp3(Line,StartP,p - StartP);
        while ((p <= l) && (Line.charCodeAt(p - 1) in rtl.createSet(32,9))) p += 1;
        return Result;
      };
      function DebugCfgDirective(s) {
        $Self.FCompiler.FLog.LogMsg(119,$lp6(18,$lp8(Line,'"'),18,s),$Self.FCurrentCfgFilename,$Self.FCurrentCfgLineNumber,1,false);
      };
      var OldCfgFilename = "";
      var Directive = "";
      var aName = "";
      var Expr = "";
      var aFile = null;
      var IfLvl = 0;
      var SkipLvl = 0;
      var OldCfgLineNumber = 0;
      var Skip = 0;
      if (this.FCompiler.GetShowDebug() || this.FCompiler.GetShowTriedUsedFiles()) this.FCompiler.FLog.LogMsgIgnoreFilter(107,$lp6(18,$lp8(aFileName,'"')));
      IfLvl = 0;
      SkipLvl = 0;
      Skip = 0;
      aFile = null;
      try {
        OldCfgFilename = this.FCurrentCfgFilename;
        this.FCurrentCfgFilename = aFileName;
        OldCfgLineNumber = this.FCurrentCfgLineNumber;
        aFile = this.GetReader(aFileName);
        while (!aFile.IsEOF()) {
          Line = aFile.ReadLine();
          this.FCurrentCfgLineNumber = aFile.FLineNumber;
          if (this.FCompiler.GetShowDebug()) this.FCompiler.FLog.LogMsgIgnoreFilter(109,$lp6(18,$lp8(Line,'"')));
          if (Line === "") continue;
          l = Line.length;
          p = 1;
          while ((p <= l) && (Line.charCodeAt(p - 1) in rtl.createSet(32,9))) p += 1;
          if (p > l) continue;
          if ((p <= l) && (Line.charAt(p - 1) === "#")) {
            p += 1;
            if ((p > l) || (Line.charCodeAt(p - 1) in rtl.createSet(0,9,32,45))) continue;
            Directive = $lp12(GetWord());
            var $tmp = Directive;
            if (($tmp === "ifdef") || ($tmp === "ifndef")) {
              IfLvl += 1;
              if (Skip === 0) {
                aName = GetWord();
                if (this.FCompiler.IsDefined(aName) === (Directive === "ifdef")) {
                  if (this.FCompiler.GetShowDebug()) DebugCfgDirective("true -> execute");
                } else {
                  if (this.FCompiler.GetShowDebug()) DebugCfgDirective("false -> skip");
                  SkipLvl = IfLvl;
                  Skip = 1;
                };
              };
            } else if ($tmp === "if") {
              IfLvl += 1;
              if (Skip === 0) {
                Expr = $lp3(Line,p,Line.length);
                if (this.FConditionEval.Eval(Expr)) {
                  if (this.FCompiler.GetShowDebug()) DebugCfgDirective("true -> execute");
                } else {
                  if (this.FCompiler.GetShowDebug()) DebugCfgDirective("false -> skip");
                  SkipLvl = IfLvl;
                  Skip = 1;
                };
              };
            } else if ($tmp === "else") {
              if (IfLvl === 0) this.CfgSyntaxError('"' + Directive + '" without #ifdef');
              if ((Skip === 2) && (IfLvl === SkipLvl)) this.CfgSyntaxError('"there was already an #else');
              if ((Skip === 1) && (IfLvl === SkipLvl)) {
                if (this.FCompiler.GetShowDebug()) DebugCfgDirective("execute");
                SkipLvl = 0;
                Skip = 0;
              } else if (Skip === 0) {
                if (this.FCompiler.GetShowDebug()) DebugCfgDirective("skip");
                Skip = 2;
                SkipLvl = IfLvl;
              };
            } else if ($tmp === "elseif") {
              if (IfLvl === 0) this.CfgSyntaxError('"' + Directive + '" without #ifdef');
              if ((Skip === 1) && (IfLvl === SkipLvl)) {
                Expr = $lp3(Line,p,Line.length);
                if (this.FConditionEval.Eval(Expr)) {
                  if (this.FCompiler.GetShowDebug()) DebugCfgDirective("true -> execute");
                  SkipLvl = 0;
                  Skip = 0;
                } else {
                  if (this.FCompiler.GetShowDebug()) DebugCfgDirective("false -> skip");
                };
              } else if (Skip === 0) {
                if (this.FCompiler.GetShowDebug()) DebugCfgDirective("no test -> skip");
                Skip = 1;
              };
            } else if ($tmp === "endif") {
              if (IfLvl === 0) this.CfgSyntaxError('"' + Directive + '" without #ifdef');
              IfLvl -= 1;
              if (IfLvl < SkipLvl) {
                if (this.FCompiler.GetShowDebug()) DebugCfgDirective("end block");
                SkipLvl = 0;
                Skip = 0;
              };
            } else if ($tmp === "error") {
              this.FCompiler.ParamFatal("user defined: " + $lp3(Line,p,Line.length))}
             else {
              if (Skip === 0) {
                this.CfgSyntaxError('unknown directive "#' + Directive + '"')}
               else DebugCfgDirective("skipping unknown directive");
            };
          } else if (Skip === 0) {
            Line = $lp3(Line,p,Line.length);
            this.FCompiler.ReadParam(Line,false,false);
          };
        };
      } finally {
        this.FCurrentCfgFilename = OldCfgFilename;
        this.FCurrentCfgLineNumber = OldCfgLineNumber;
        aFile = rtl.freeLoc(aFile);
      };
      if (this.FCompiler.GetShowDebug() || this.FCompiler.GetShowTriedUsedFiles()) this.FCompiler.FLog.LogMsgIgnoreFilter(108,$lp6(18,$lp8(aFileName,'"')));
    };
    this.LoadSubTargetConfig = function (aSubTarget) {
      var aFileName = "";
      aFileName = this.FindSubtargetConfig(aSubTarget);
      if (aFileName === "") {
        this.FCompiler.FLog.Log(0,$lp13($mod.sSubtargetConfigNotFound,$lp6(18,aSubTarget)),147,"",0,0,true);
        this.FCompiler.Terminate(4);
      } else this.LoadConfig(aFileName);
    };
  });
  rtl.createClass(this,"TPas2jsCompiler",$lt20,function () {
    $lt18 = this;
    this.$init = function () {
      $lt20.$init.call(this);
      this.FAllJSIntoMainJS = false;
      this.FCompilerExe = "";
      this.FConfigSupport = null;
      this.FConverterGlobals = null;
      this.FDefines = null;
      this.FFiles = null;
      this.FFS = null;
      this.FHasShownEncoding = false;
      this.FHasShownLogo = false;
      this.FInsertFilenames = null;
      this.FAppendFilenames = null;
      this.FInterfaceType = 0;
      this.FLog = null;
      this.FMainFile = null;
      this.FMainJSFile = "";
      this.FMainJSFileIsResolved = false;
      this.FMainJSFileResolved = "";
      this.FMainSrcFile = "";
      this.FModeSwitches = {};
      this.FNamespaces = null;
      this.FNamespacesFromCmdLine = 0;
      this.FOptions = {};
      this.FOwnsFS = false;
      this.FParamMacros = null;
      this.FPostProcessorSupport = null;
      this.FPrecompileGUID = $lt41.$new();
      this.FReadingModules = null;
      this.FResolverHub = null;
      this.FRTLVersionCheck = 0;
      this.FSrcMapBaseDir = "";
      this.FSrcMapSourceRoot = "";
      this.FUnits = null;
      this.FWPOAnalyzer = null;
      this.FResourceMode = 0;
      this.FResources = null;
      this.FResourceStrings = null;
      this.FResourceStringFile = 0;
      this.FImports = null;
      this.FCurParam = "";
      this.FResourceOutputFile = "";
      this.FSubTarget = "";
    };
    this.$final = function () {
      this.FConfigSupport = undefined;
      this.FConverterGlobals = undefined;
      this.FDefines = undefined;
      this.FFiles = undefined;
      this.FFS = undefined;
      this.FInsertFilenames = undefined;
      this.FAppendFilenames = undefined;
      this.FLog = undefined;
      this.FMainFile = undefined;
      this.FModeSwitches = undefined;
      this.FNamespaces = undefined;
      this.FOptions = undefined;
      this.FParamMacros = undefined;
      this.FPostProcessorSupport = undefined;
      this.FPrecompileGUID = undefined;
      this.FReadingModules = undefined;
      this.FResolverHub = undefined;
      this.FUnits = undefined;
      this.FWPOAnalyzer = undefined;
      this.FResources = undefined;
      this.FResourceStrings = undefined;
      this.FImports = undefined;
      $lt20.$final.call(this);
    };
    this.AddInsertJSFilename = function (aFilename) {
      if (this.IndexOfInsertJSFilename(aFilename) < 0) this.FInsertFilenames.Add(aFilename);
    };
    this.AddAppendJSFilename = function (aFilename) {
      if (this.IndexOfAppendJSFilename(aFilename) < 0) this.FAppendFilenames.Add(aFilename);
    };
    this.AddNamespaces = function (Paths, FromCmdLine) {
      var $Self = this;
      var Added = 0;
      function Add(aPath) {
        var Result = false;
        var Remove = false;
        var i = 0;
        Remove = false;
        if (aPath.charAt(aPath.length - 1) === "-") {
          $lp14({get: function () {
              return aPath;
            }, set: function (v) {
              aPath = v;
            }},aPath.length,1);
          Remove = true;
        };
        if (!$lp1(aPath,true,true)) return false;
        i = $Self.FNamespaces.GetCount() - 1;
        while ((i >= 0) && ($lp2(aPath,$Self.FNamespaces.Get(i)) !== 0)) i -= 1;
        if (Remove) {
          if (i >= 0) {
            $Self.FNamespaces.Delete(i);
            if ($Self.FNamespacesFromCmdLine > i) $Self.FNamespacesFromCmdLine -= 1;
          };
          return true;
        };
        if (FromCmdLine) {
          if (i >= 0) {
            if (i <= $Self.FNamespacesFromCmdLine) return true;
            $Self.FNamespaces.Delete(i);
          };
          $Self.FNamespaces.Insert($Self.FNamespacesFromCmdLine,aPath);
          $Self.FNamespacesFromCmdLine += 1;
        } else {
          if (i >= 0) {
            if (i <= ($Self.FNamespacesFromCmdLine + Added)) return true;
            $Self.FNamespaces.Delete(i);
          };
          $Self.FNamespaces.Insert($Self.FNamespacesFromCmdLine + Added,aPath);
          Added += 1;
        };
        Result = true;
        return Result;
      };
      var aPath = "";
      var p = 0;
      p = 1;
      Added = 0;
      while (p <= Paths.length) {
        aPath = $lp15(Paths,";",{get: function () {
            return p;
          }, set: function (v) {
            p = v;
          }});
        if (aPath === "") continue;
        if (!Add(aPath)) return;
      };
    };
    this.AddUnitResourceStrings = function (aFile) {
      var $Self = this;
      var ResList = null;
      function AddToList(aList) {
        var I = 0;
        for (var $l = 0, $end = aList.FCount - 1; $l <= $end; $l++) {
          I = $l;
          ResList.Add(aList.Get(I));
        };
      };
      function AddUsedToList(aList) {
        var I = 0;
        for (var $l = 0, $end = aList.FCount - 1; $l <= $end; $l++) {
          I = $l;
          if (aFile.FUseAnalyzer.IsUsed(rtl.getObject(aList.Get(I)))) ResList.Add(aList.Get(I));
        };
      };
      function CheckSection(aSection) {
        if (!((aSection != null) && (aSection.ResStrings != null))) return;
        if ($Self.FResourceStringFile === 2) {
          AddUsedToList(aSection.ResStrings)}
         else AddToList(aSection.ResStrings);
      };
      var I = 0;
      var Res = null;
      var aValue = null;
      if (this.FResourceStringFile === 1) this.FResourceStrings.Clear();
      ResList = $lt30.$create("Create");
      try {
        if ($lt37.isPrototypeOf(aFile.FPasModule)) {
          CheckSection(aFile.FPasModule.ProgramSection)}
         else if ($lt38.isPrototypeOf(aFile.FPasModule)) {
          CheckSection(aFile.FPasModule.LibrarySection)}
         else {
          CheckSection(aFile.FPasModule.InterfaceSection);
          CheckSection(aFile.FPasModule.ImplementationSection);
        };
        if (ResList.FCount > 0) {
          this.FResourceStrings.StartUnit(aFile.GetModuleName());
          for (var $l = 0, $end = ResList.FCount - 1; $l <= $end; $l++) {
            I = $l;
            Res = rtl.getObject(ResList.Get(I));
            aValue = aFile.FPasResolver.Eval(Res.Expr,rtl.createSet(0),false);
            var $tmp = aValue.Kind;
            if ($tmp === 8) {
              this.FResourceStrings.AddString(Res.FName,aValue.S)}
             else {
              this.FLog.Log(3,$mod.sSkipNoConstResourcestring,145,aFile.FPasFileName,0,0,true);
            };
            $lp16({get: function () {
                return aValue;
              }, set: function (v) {
                aValue = v;
              }});
          };
        };
      } finally {
        ResList = rtl.freeLoc(ResList);
      };
    };
    this.CreateFileWriter = function (aFile, aFilename) {
      var Result = null;
      var SrcMap = null;
      var DestFileName = "";
      DestFileName = aFilename;
      if (DestFileName === "") DestFileName = aFile.FJSFilename;
      Result = this.CreateJSMapper();
      Result.FDestFileName = DestFileName;
      if (this.GetSrcMapEnable()) {
        SrcMap = this.CreateSrcMap($lp17(DestFileName));
        Result.SetSrcMap(SrcMap);
        SrcMap.Release();
        SrcMap.FSourceRoot = this.FSrcMapSourceRoot;
        SrcMap.LocalFilename = aFile.FJSFilename;
        if (this.GetSrcMapXSSIHeader()) {
          SrcMap.FOptions = rtl.unionSet(SrcMap.FOptions,rtl.createSet(2))}
         else SrcMap.FOptions = rtl.diffSet(SrcMap.FOptions,rtl.createSet(2));
        SrcMap.FOptions = rtl.unionSet(SrcMap.FOptions,rtl.createSet(3));
      };
      return Result;
    };
    this.EmitJavaScript = function (aFile, aFileWriter) {
      var aJSWriter = null;
      aJSWriter = this.CreateJSWriter(aFileWriter);
      try {
        aJSWriter.SetOptions(rtl.refSet($lm1.DefaultJSWriterOptions));
        aJSWriter.FIndentSize = 2;
        try {
          aJSWriter.WriteJS(aFile.FJSModule);
        } catch ($e) {
          if ($lt19.isPrototypeOf($e)) {
            var E = $e;
            if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(E);
            this.FLog.LogPlain("[20180204193420] Error while creating JavaScript " + this.FullFormatPath(aFileWriter.FDestFileName) + ": " + E.fMessage);
            this.Terminate(1);
          } else {
            this.HandleJSException("[20181031190520] TPas2jsCompiler.WriteJSFiles Error while creating JavaScript",$e,true);
          }
        };
      } finally {
        aJSWriter = rtl.freeLoc(aJSWriter);
      };
    };
    this.GetDefaultNamespace = function () {
      var Result = "";
      var C = null;
      Result = "";
      if (this.FMainFile === null) return Result;
      if (this.FMainFile.FPasModule === null) return Result;
      C = this.FMainFile.FPasModule.$class.ClassType();
      if ((C === $lt37) || (C === $lt38) || (C === $lt42)) Result = this.FMainFile.FPasResolver.FDefaultNameSpace;
      return Result;
    };
    this.GetFileCount = function () {
      var Result = 0;
      Result = this.FFiles.Count();
      return Result;
    };
    this.GetResolvedMainJSFile = function () {
      var Result = "";
      if (!this.FMainJSFileIsResolved) {
        this.FMainJSFileResolved = this.ResolvedMainJSFile();
        this.FMainJSFileIsResolved = true;
      };
      Result = this.FMainJSFileResolved;
      return Result;
    };
    this.GetShowDebug = function () {
      var Result = false;
      Result = 12 in this.FOptions;
      return Result;
    };
    this.GetShowLogo = function () {
      var Result = false;
      Result = 2 in this.FOptions;
      return Result;
    };
    this.GetShowTriedUsedFiles = function () {
      var Result = false;
      Result = 9 in this.FOptions;
      return Result;
    };
    this.GetShowUsedTools = function () {
      var Result = false;
      Result = 11 in this.FOptions;
      return Result;
    };
    this.GetSkipDefaultConfig = function () {
      var Result = false;
      Result = 0 in this.FOptions;
      return Result;
    };
    this.GetSrcMapEnable = function () {
      var Result = false;
      Result = 31 in this.FOptions;
      return Result;
    };
    this.GetSrcMapInclude = function () {
      var Result = false;
      Result = 32 in this.FOptions;
      return Result;
    };
    this.GetSrcMapFilenamesAbsolute = function () {
      var Result = false;
      Result = 33 in this.FOptions;
      return Result;
    };
    this.GetSrcMapXSSIHeader = function () {
      var Result = false;
      Result = 34 in this.FOptions;
      return Result;
    };
    this.GetTargetPlatform = function () {
      var Result = 0;
      Result = this.FConverterGlobals.TargetPlatform;
      return Result;
    };
    this.GetTargetProcessor = function () {
      var Result = 0;
      Result = this.FConverterGlobals.TargetProcessor;
      return Result;
    };
    this.GetWriteDebugLog = function () {
      var Result = false;
      Result = 23 in this.FOptions;
      return Result;
    };
    this.IndexOfInsertJSFilename = function (aFilename) {
      var Result = 0;
      var i = 0;
      for (var $l = 0, $end = this.FInsertFilenames.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        if (this.FFS.SameFileName(aFilename,this.FInsertFilenames.Get(i))) return i;
      };
      Result = -1;
      return Result;
    };
    this.IndexOfAppendJSFilename = function (aFilename) {
      var Result = 0;
      var i = 0;
      for (var $l = 0, $end = this.FAppendFilenames.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        if (this.FFS.SameFileName(aFilename,this.FAppendFilenames.Get(i))) return i;
      };
      Result = -1;
      return Result;
    };
    this.InsertCustomJSFiles = function (aWriter) {
      var i = 0;
      var Filename = "";
      var FileResolver = null;
      var aFile = null;
      if (this.FInsertFilenames.GetCount() === 0) return;
      FileResolver = this.FFS.CreateResolver();
      try {
        for (var $l = 0, $end = this.FInsertFilenames.GetCount() - 1; $l <= $end; $l++) {
          i = $l;
          Filename = this.FFS.FindCustomJSFileName(this.FInsertFilenames.Get(i));
          if (Filename === "") {
            this.FLog.LogMsg(206,$lp6(18,this.FInsertFilenames.Get(i)),"",0,0,true);
            this.Terminate(4);
          };
          aFile = this.LoadFile(Filename,false);
          if (aFile.FSource === "") continue;
          aWriter.WriteFile(aFile.FSource,Filename);
        };
      } finally {
        FileResolver = rtl.freeLoc(FileResolver);
      };
    };
    this.AppendCustomJSFiles = function (aWriter) {
      var i = 0;
      var Filename = "";
      var FileResolver = null;
      var aFile = null;
      if (this.FAppendFilenames.GetCount() === 0) return;
      FileResolver = this.FFS.CreateResolver();
      try {
        for (var $l = 0, $end = this.FAppendFilenames.GetCount() - 1; $l <= $end; $l++) {
          i = $l;
          Filename = this.FFS.FindCustomJSFileName(this.FAppendFilenames.Get(i));
          if (Filename === "") {
            this.FLog.LogMsg(206,$lp6(18,this.FAppendFilenames.Get(i)),"",0,0,true);
            this.Terminate(4);
          };
          aFile = this.LoadFile(Filename,false);
          if (aFile.FSource === "") continue;
          aWriter.WriteFile(aFile.FSource,Filename);
        };
      } finally {
        FileResolver = rtl.freeLoc(FileResolver);
      };
    };
    this.InsertImportSection = function (aFileWriter) {
      var aJSWriter = null;
      if (this.FImports.FStatements.GetCount() === 0) return;
      aJSWriter = this.CreateJSWriter(aFileWriter);
      try {
        aJSWriter.SetOptions(rtl.refSet($lm1.DefaultJSWriterOptions));
        aJSWriter.FIndentSize = 2;
        try {
          aJSWriter.WriteJS(this.FImports);
        } catch ($e) {
          if ($lt19.isPrototypeOf($e)) {
            var E = $e;
            if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(E);
            this.FLog.LogPlain("[20210911104700] Error while creating JavaScript " + this.FullFormatPath(aFileWriter.FDestFileName) + ": " + E.fMessage);
            this.Terminate(1);
          } else {
            this.HandleJSException("[20210911104700] TPas2jsCompiler.WriteJSFiles Error while creating JavaScript",$e,true);
          }
        };
      } finally {
        aJSWriter = rtl.freeLoc(aJSWriter);
      };
    };
    this.LoadUsedUnit = function (Info, Context) {
      var $Self = this;
      var Result = null;
      function FindCycle(aFile, SearchFor, Cycle) {
        var Result = false;
        var i = 0;
        var aParent = null;
        Cycle.get().Add(aFile);
        for (var $l = 0, $end = aFile.GetUsedByCount(0) - 1; $l <= $end; $l++) {
          i = $l;
          aParent = aFile.GetUsedBy(0,i);
          if (aParent === SearchFor) {
            Cycle.get().Clear();
            Cycle.get().Add(aParent);
            Cycle.get().Add(aFile);
            return true;
          };
          if (Cycle.get().IndexOf(aParent) >= 0) continue;
          if (FindCycle(aParent,SearchFor,Cycle)) {
            Cycle.get().Add(aFile);
            return true;
          };
        };
        Result = false;
        return Result;
      };
      var aFile = null;
      function CheckCycle() {
        var i = 0;
        var Cycle = null;
        var CyclePath = "";
        if (Context.FPasModule.ImplementationSection === null) {
          aFile.FUsedBy[0].Add(Context);
          Cycle = $lt30.$create("Create");
          try {
            if (FindCycle(aFile,aFile,{get: function () {
                return Cycle;
              }, set: function (v) {
                Cycle = v;
              }})) {
              CyclePath = "";
              for (var $l = 0, $end = Cycle.FCount - 1; $l <= $end; $l++) {
                i = $l;
                if (i > 0) CyclePath += ",";
                CyclePath += rtl.getObject(Cycle.Get(i)).GetModuleName();
              };
              Context.FPasResolver.RaiseMsg(20180223141537,120,$mod.sUnitCycle,$lp6(18,CyclePath),Info.NameExpr);
            };
          } finally {
            Cycle = rtl.freeLoc(Cycle);
          };
        } else {
          aFile.FUsedBy[1].Add(Context);
        };
      };
      var UseJSFilename = "";
      var OtherFile = null;
      Result = null;
      aFile = this.FindFileWithUnitFilename(Info.UseFilename);
      if (aFile !== null) {
        if ((aFile.FPasUnitName !== "") && ($lp2(aFile.FPasUnitName,Info.UseUnitname) !== 0)) {
          this.FLog.LogPlain$1($lp6(18,'Debug: TPas2jsPasTree.FindUnit unitname MISMATCH aFile.PasUnitname="',18,aFile.FPasUnitName,9,'"',18," Self=",18,Context.FFileResolver.FFS.FormatPath(Context.FUnitFilename),18," Uses=",18,Info.UseUnitname,18," IsForeign=",1,Context.FIsForeign));
          this.RaiseInternalError(20170504161412,"TPas2jsPasTree.FindUnit unit name mismatch");
        };
        CheckCycle();
      } else {
        if (Info.InFilename !== "") {
          aFile = this.FindLoadedUnit(Info.UseUnitname);
          if (aFile !== null) {
            Context.FPasResolver.RaiseMsg(20180223141323,205,$lm7.sDuplicateFileFound,$lp6(18,Info.UseFilename,18,aFile.FUnitFilename),Info.InFileExpr);
          };
        };
        UseJSFilename = "";
        if (!Context.FIsForeign) UseJSFilename = this.FindUnitJSFileName(Info.UseFilename);
        this.LoadModuleFile(Info.UseFilename,Info.UseUnitname,{get: function () {
            return aFile;
          }, set: function (v) {
            aFile = v;
          }},Info.IsPCU);
        if (aFile.FPasUnitName !== Info.UseUnitname) this.RaiseInternalError(20170922143329,"aFile.PasUnitName=" + aFile.FPasUnitName + " UseUnitname=" + Info.UseUnitname);
        if (Info.IsPCU) {
          if (!this.FFS.SameFileName(aFile.FPCUFilename,Info.UseFilename)) this.RaiseInternalError(20180312122331,"aFile.PCUFilename=" + aFile.FPCUFilename + " UseFilename=" + Info.UseFilename);
        } else {
          if (!this.FFS.SameFileName(aFile.FUnitFilename,Info.UseFilename)) this.RaiseInternalError(20170922143330,"aFile.UnitFilename=" + aFile.FUnitFilename + " UseFilename=" + Info.UseFilename);
        };
        if (aFile === Context) {
          Context.FParser.RaiseParserError(120,$lp6(18,Info.UseUnitname));
        };
        this.AddUsedUnit(aFile);
        OtherFile = this.FindLoadedUnit(Info.UseUnitname);
        if (aFile !== OtherFile) {
          if (OtherFile === null) {
            this.RaiseInternalError(20170922143405,"UseUnitname=" + Info.UseUnitname)}
           else this.RaiseInternalError(20170922143511,"UseUnitname=" + Info.UseUnitname + " Found=" + OtherFile.FPasUnitName);
        };
        OtherFile = this.FindFileWithUnitFilename(Info.UseFilename);
        if (aFile !== OtherFile) {
          if (OtherFile === null) {
            this.RaiseInternalError(20180224094625,"UseFilename=" + Info.UseFilename)}
           else this.RaiseInternalError(20180224094627,"UseFilename=" + Info.UseFilename + " Found=" + OtherFile.FUnitFilename);
        };
        CheckCycle();
        aFile.FJSFilename = UseJSFilename;
        aFile.FIsForeign = Info.UseIsForeign;
        aFile.ReadUnit();
      };
      Result = aFile;
      return Result;
    };
    this.OnMacroCfgDir = function (Sender, Params, Lvl) {
      var Result = false;
      if (Lvl === 0) ;
      if (Sender === null) ;
      Params.set($lp7(this.FConfigSupport.FCurrentCfgFilename));
      Result = true;
      return Result;
    };
    this.RemoveInsertJSFilename = function (aFilename) {
      var i = 0;
      i = this.IndexOfInsertJSFilename(aFilename);
      if (i >= 0) this.FInsertFilenames.Delete(i);
    };
    this.RemoveAppendJSFilename = function (aFilename) {
      var i = 0;
      i = this.IndexOfAppendJSFilename(aFilename);
      if (i >= 0) this.FAppendFilenames.Delete(i);
    };
    this.ResolvedMainJSFile = function () {
      var Result = "";
      var OP = "";
      var UP = "";
      OP = this.FFS.FDefaultOutputPath;
      UP = this.FFS.FUnitOutputPath;
      if (this.FMainJSFile === ".") {
        Result = ""}
       else {
        Result = this.FMainJSFile;
        if (Result !== "") {
          if ($lp7(Result) === "") {
            if (OP !== "") {
              Result = OP + Result}
             else if (UP !== "") Result = UP + Result;
          };
        } else {
          Result = $lp18(this.FMainSrcFile,".js");
          if (OP !== "") {
            Result = OP + $lp17(Result);
          } else if (UP !== "") {
            Result = UP + $lp17(Result);
          };
        };
      };
      return Result;
    };
    this.SetAllJSIntoMainJS = function (AValue) {
      if (this.FAllJSIntoMainJS === AValue) return;
      if (AValue) this.FMainJSFileIsResolved = false;
      this.FAllJSIntoMainJS = AValue;
    };
    this.SetConverterGlobals = function (AValue) {
      if (AValue === this.FConverterGlobals) return;
      if ((this.FConverterGlobals !== null) && (this.FConverterGlobals.FOwner === this)) $lp({p: this, get: function () {
          return this.p.FConverterGlobals;
        }, set: function (v) {
          this.p.FConverterGlobals = v;
        }});
      this.FConverterGlobals = AValue;
    };
    this.SetCompilerExe = function (AValue) {
      if (AValue !== "") AValue = this.ExpandFileName(AValue);
      if (this.FCompilerExe === AValue) return;
      this.FCompilerExe = AValue;
    };
    this.SetFS = function (AValue) {
      if (this.FFS === AValue) return;
      this.FOwnsFS = false;
      this.FFS = AValue;
    };
    this.SetMode = function (AValue) {
      this.SetModeSwitches($mod.p2jsMode_SwitchSets[AValue]);
      var $tmp = AValue;
      if ($tmp === 0) {
        this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(18)))}
       else if ($tmp === 1) this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(18)));
    };
    this.SetModeSwitches = function (AValue) {
      if (rtl.eqSet(this.FModeSwitches,AValue)) return;
      this.FModeSwitches = rtl.refSet(AValue);
    };
    this.SetOptions = function (AValue) {
      if (rtl.eqSet(this.FOptions,AValue)) return;
      this.FOptions = rtl.refSet(AValue);
      this.FLog.FShowMsgNumbers = 13 in this.FOptions;
      this.FLog.FShowMsgTypes = rtl.refSet(this.GetShownMsgTypes());
      this.FFS.SetOptionFromIndex(1,9 in this.FOptions);
    };
    this.SetShowDebug = function (AValue) {
      if (AValue) {
        this.FOptions = rtl.unionSet(this.FOptions,rtl.createSet(5,7,12))}
       else this.FOptions = rtl.excludeSet(this.FOptions,5);
    };
    this.SetShowFullPaths = function (AValue) {
      this.FFS.SetOptionFromIndex(0,AValue);
    };
    this.SetShowLogo = function (AValue) {
      this.SetOption(2,AValue);
    };
    this.SetShowTriedUsedFiles = function (AValue) {
      this.FFS.SetOptionFromIndex(1,AValue);
      this.SetOption(9,AValue);
    };
    this.SetSkipDefaultConfig = function (AValue) {
      this.SetOption(0,AValue);
    };
    this.SetSrcMapBaseDir = function (AValue) {
      var NewValue = "";
      NewValue = this.FFS.ExpandDirectory(AValue);
      if (this.FSrcMapBaseDir === NewValue) return;
      this.FSrcMapBaseDir = NewValue;
    };
    this.SetSrcMapEnable = function (AValue) {
      this.SetOption(31,AValue);
    };
    this.SetSrcMapInclude = function (AValue) {
      this.SetOption(32,AValue);
    };
    this.SetSrcMapFilenamesAbsolute = function (AValue) {
      this.SetOption(33,AValue);
    };
    this.SetSrcMapXSSIHeader = function (AValue) {
      this.SetOption(34,AValue);
    };
    this.SetTargetPlatform = function (AValue) {
      var OldPlatform = 0;
      OldPlatform = this.FConverterGlobals.TargetPlatform;
      if (OldPlatform === AValue) return;
      this.RemoveDefine($lm1.PasToJsPlatformNames[OldPlatform]);
      this.FConverterGlobals.TargetPlatform = AValue;
      if (AValue in rtl.createSet(1,3)) this.SetAllJSIntoMainJS(true);
      this.AddDefinesForTargetPlatform();
    };
    this.SetTargetProcessor = function (AValue) {
      var OldTargetProcessor = 0;
      OldTargetProcessor = this.FConverterGlobals.TargetProcessor;
      if (OldTargetProcessor === AValue) return;
      this.RemoveDefine($lm1.PasToJsProcessorNames[OldTargetProcessor]);
      this.FConverterGlobals.TargetProcessor = AValue;
      this.AddDefinesForTargetProcessor();
    };
    this.SetWriteMsgToStdErr = function (AValue) {
      this.SetOption(24,AValue);
    };
    this.WriteJSToFile = function (MapFileName, aFileWriter) {
      var buf = null;
      var WithUTF8BOM = false;
      try {
        buf = new Array();
        try {
          WithUTF8BOM = (this.FLog.FEncoding === "") || (this.FLog.FEncoding === "utf8");
          aFileWriter.SaveJSToStream(WithUTF8BOM,$lp17(MapFileName),buf);
          this.FFS.SaveToFile(buf,aFileWriter.FDestFileName);
        } finally {
          buf = null;
        };
      } catch ($e) {
        if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(E);
          this.FLog.LogPlain("Error: " + E.fMessage);
          this.FLog.LogMsg(116,$lp6(18,this.FullFormatPath(aFileWriter.FDestFileName)),"",0,0,true);
          this.Terminate(5);
        } else {
          this.HandleJSException("[20181031190637] TPas2jsCompiler.WriteJSFiles",$e,true);
        }
      };
    };
    this.WriteResourceStrings = function (aFileName) {
      var buf = null;
      var S = "";
      this.FLog.LogMsg(117,$lp6(18,this.FullFormatPath(aFileName)),"",0,0,false);
      try {
        buf = new Array();
        try {
          S = this.FResourceStrings.AsString();
          buf.push(S);
          this.FFS.SaveToFile(buf,aFileName);
        } finally {
          buf = null;
        };
      } catch ($e) {
        if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(E);
          this.FLog.LogPlain("Error: " + E.fMessage);
          this.FLog.LogMsg(116,$lp6(18,this.FullFormatPath(aFileName)),"",0,0,true);
          this.Terminate(5);
        } else {
          this.HandleJSException("[20181031190737] TPas2jsCompiler.WriteJSFiles",$e,true);
        }
      };
    };
    this.WriteResources = function (aFileName) {
      var buf = null;
      var S = "";
      this.FLog.LogMsg(117,$lp6(18,this.FullFormatPath(aFileName)),"",0,0,false);
      try {
        buf = new Array();
        try {
          S = this.FResources.GetAsString();
          buf.push(S);
          this.FFS.SaveToFile(buf,aFileName);
        } finally {
          buf = null;
        };
      } catch ($e) {
        if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(E);
          this.FLog.LogPlain("Error: " + E.fMessage);
          this.FLog.LogMsg(116,$lp6(18,this.FullFormatPath(aFileName)),"",0,0,true);
          this.Terminate(5);
        } else {
          this.HandleJSException("[20181031190737] TPas2jsCompiler.WriteJSFiles",$e,true);
        }
      };
    };
    this.WriteSrcMap = function (MapFileName, aFileWriter) {
      var buf = null;
      this.FLog.LogMsg(117,$lp6(18,this.FullFormatPath(MapFileName)),"",0,0,!(8 in this.FOptions));
      this.FinishSrcMap(aFileWriter.FSrcMap);
      try {
        buf = new Array();
        try {
          aFileWriter.FSrcMap.SaveToStream(buf);
          this.FFS.SaveToFile(buf,MapFileName);
        } finally {
          buf = null;
        };
      } catch ($e) {
        if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(E);
          this.FLog.LogPlain("Error: " + E.fMessage);
          this.FLog.LogMsg(116,$lp6(18,this.FullFormatPath(MapFileName)),"",0,0,true);
          this.Terminate(5);
        } else {
          this.HandleJSException("[20181031190737] TPas2jsCompiler.WriteJSFiles",$e,true);
        }
      };
    };
    this.AddDefinesForTargetPlatform = function () {
      this.AddDefine($lm1.PasToJsPlatformNames[this.GetTargetPlatform()]);
      this.AddDefine$1("Pas2JSTargetOS",$lm1.PasToJsPlatformNames[this.GetTargetPlatform()]);
    };
    this.AddDefinesForTargetProcessor = function () {
      this.AddDefine($lm1.PasToJsProcessorNames[this.GetTargetProcessor()]);
      this.AddDefine$1("Pas2JSTargetCPU",$lm1.PasToJsProcessorNames[this.GetTargetProcessor()]);
      var $tmp = this.GetTargetProcessor();
      if ($tmp === 0) {
        this.AddDefine$1("ECMAScript","5")}
       else if ($tmp === 1) this.AddDefine$1("ECMAScript","6");
    };
    this.AddReadingModule = function (aFile) {
      if (this.FReadingModules.IndexOf(aFile) >= 0) return;
      this.FReadingModules.Add(aFile);
    };
    this.RemoveReadingModule = function (aFile) {
      this.FReadingModules.Remove(aFile);
    };
    this.RegisterMessages = function () {
      var $Self = this;
      var LastMsgNumber = 0;
      function r(MsgType, MsgNumber, MsgPattern) {
        var s = "";
        if ((LastMsgNumber >= 0) && (MsgNumber !== (LastMsgNumber + 1))) {
          if (MsgNumber > (LastMsgNumber + 1)) {
            s = "TPas2jsCompiler.RegisterMessages: gap in registered message numbers: " + $lp19(LastMsgNumber + 1) + " " + $lp19(MsgNumber)}
           else s = "TPas2jsCompiler.RegisterMessages: not ascending order in registered message numbers: Last=" + $lp19(LastMsgNumber) + " New=" + $lp19(MsgNumber);
          $Self.RaiseInternalError(20170504161422,s);
        };
        $Self.FLog.RegisterMsg(MsgType,MsgNumber,MsgPattern);
        LastMsgNumber = MsgNumber;
      };
      LastMsgNumber = -1;
      r(5,101,$mod.sOptionIsEnabled);
      r(5,102,$mod.sSyntaxModeIs);
      r(5,103,$mod.sModeswitchXisY);
      LastMsgNumber = -1;
      r(5,104,$lm7.sUsingPath);
      r(3,105,$lm7.sFolderNotFound);
      r(5,106,$mod.sNameValue);
      r(5,107,$mod.sReadingOptionsFromFile);
      r(5,108,$mod.sEndOfReadingConfigFile);
      r(6,109,$mod.sInterpretingFileOption);
      r(0,110,$mod.sSourceFileNotFound);
      r(0,111,$mod.sFileIsFolder);
      r(5,112,$mod.sConfigFileSearch);
      r(6,113,$mod.sHandlingOption);
      r(6,114,$mod.sQuickHandlingOption);
      r(0,115,$mod.sOutputDirectoryNotFound);
      r(1,116,$mod.sUnableToWriteFile);
      r(5,117,$mod.sWritingFile);
      r(0,118,$mod.sCompilationAborted);
      r(6,119,$mod.sCfgDirective);
      r(1,120,$mod.sUnitCycle);
      r(1,121,$mod.sOptionForbidsCompile);
      r(5,122,$mod.sUnitsNeedCompileDueToUsedUnit);
      r(5,123,$mod.sUnitsNeedCompileDueToOption);
      r(5,124,$mod.sUnitsNeedCompileJSMissing);
      r(5,125,$mod.sUnitsNeedCompilePasHasChanged);
      r(5,126,$mod.sParsingFile);
      r(5,127,$mod.sCompilingFile);
      r(1,128,$mod.sExpectedButFound);
      r(5,129,$mod.sLinesInFilesCompiled);
      r(5,130,$mod.sTargetPlatformIs);
      r(5,131,$mod.sTargetProcessorIs);
      r(5,132,$mod.sMessageEncodingIs);
      r(1,133,$mod.sUnableToTranslatePathToDir);
      r(5,134,$mod.sSrcMapSourceRootIs);
      r(5,135,$mod.sSrcMapBaseDirIs);
      r(0,136,$mod.sUnitFileNotFound);
      r(5,137,$mod.sClassInterfaceStyleIs);
      r(5,138,$mod.sHandlingEnvOpts);
      r(5,139,$mod.sPostProcessorInfoX);
      r(5,140,$mod.sPostProcessorRunX);
      r(1,141,$mod.sPostProcessorFailX);
      r(2,142,$mod.sPostProcessorWarnX);
      r(5,143,$mod.sPostProcessorFinished);
      r(5,144,$mod.sRTLIdentifierChanged);
      r(3,145,$mod.sSkipNoConstResourcestring);
      r(2,146,$mod.sUnknownOptimizationOption);
      $lp20(this.FLog);
    };
    this.LoadConfig = function (CfgFilename) {
      this.FConfigSupport.LoadConfig(CfgFilename);
    };
    this.ReadEnvironment = function () {
      var s = "";
      var List = null;
      s = $lp21("PAS2JS_OPTS");
      if (s === "") return;
      if (this.GetShowDebug()) this.FLog.LogMsgIgnoreFilter(138,$lp6(18,"PAS2JS_OPTS=[" + s + "]"));
      List = $lt43.$create("Create$1");
      try {
        $lp22(s,List,false);
        var $in = List.GetEnumerator();
        try {
          while ($in.MoveNext()) {
            s = $in.GetCurrent();
            if (s !== "") this.ReadParam(s,false,false);
          }
        } finally {
          $in = rtl.freeLoc($in)
        };
      } finally {
        List = rtl.freeLoc(List);
      };
    };
    this.ReadParam = function (Param, Quick, FromCmdLine) {
      var $Self = this;
      function UnknownParam() {
        $Self.ParamFatal('unknown parameter "' + Param + '". Use -h for help.');
      };
      var EnabledFlags = "";
      var DisabledFlags = "";
      var Identifier = "";
      var aValue = "";
      var p = 0;
      var l = 0;
      var i = 0;
      var c = "\x00";
      var aProc = 0;
      var aPlatform = 0;
      if (this.GetShowDebug()) if (Quick) {
        this.FLog.LogMsgIgnoreFilter(114,$lp6(18,$lp8(Param,'"')))}
       else this.FLog.LogMsgIgnoreFilter(113,$lp6(18,$lp8(Param,'"')));
      if (Param === "") return;
      this.FCurParam = Param;
      this.FParamMacros.Substitute({get: function () {
          return Param;
        }, set: function (v) {
          Param = v;
        }},$Self,0,true);
      if (Param === "") return;
      if (Quick && ((Param === "-h") || (Param === "-?") || (Param === "--help"))) {
        this.WriteHelp();
        this.Terminate(0);
      };
      l = Param.length;
      p = 1;
      var $tmp = Param.charAt(p - 1);
      if ($tmp === "-") {
        p += 1;
        if (p > l) UnknownParam();
        aValue = $lp3(Param,p + 1,Param.length);
        var $tmp1 = Param.charAt(p - 1);
        if ($tmp1 === "i") {
          this.HandleOptionInfo(aValue);
          this.Terminate(0);
        } else if (($tmp1 === "B") || ($tmp1 === "l") || ($tmp1 === "n")) {
          this.ReadSingleLetterOptions(Param,p,"Bln",{get: function () {
              return EnabledFlags;
            }, set: function (v) {
              EnabledFlags = v;
            }},{get: function () {
              return DisabledFlags;
            }, set: function (v) {
              DisabledFlags = v;
            }});
          for (var $l = 1, $end = EnabledFlags.length; $l <= $end; $l++) {
            i = $l;
            var $tmp2 = EnabledFlags.charAt(i - 1);
            if ($tmp2 === "B") {
              this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(1)))}
             else if ($tmp2 === "l") {
              this.SetShowLogo(true)}
             else if ($tmp2 === "n") this.SetSkipDefaultConfig(true);
          };
          for (var $l1 = 1, $end1 = DisabledFlags.length; $l1 <= $end1; $l1++) {
            i = $l1;
            var $tmp3 = DisabledFlags.charAt(i - 1);
            if ($tmp3 === "B") {
              this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(1)))}
             else if ($tmp3 === "l") {
              this.SetShowLogo(false)}
             else if ($tmp3 === "n") this.SetSkipDefaultConfig(false);
          };
        } else if ($tmp1 === "C") {
          this.ReadCodeGenerationFlags(aValue,1)}
         else if ($tmp1 === "d") {
          if (!Quick) {
            Identifier = aValue;
            i = $lp23(":=",Identifier);
            if (i > 0) {
              aValue = $lp3(Identifier,i + 2,Identifier.length);
              Identifier = $lp4(Identifier,i - 1);
              if (!$lp1(Identifier,false,false)) this.ParamFatal('invalid define name (-d): "' + Param + '"');
              this.AddDefine$1(Identifier,aValue);
            } else {
              if (!$lp1(Identifier,false,false)) this.ParamFatal('invalid define (-d): "' + Param + '"');
              this.AddDefine(Identifier);
            };
          }}
         else if ($tmp1 === "F") {
          if (aValue === "") UnknownParam();
          c = aValue.charAt(0);
          $lp14({get: function () {
              return aValue;
            }, set: function (v) {
              aValue = v;
            }},1,1);
          if (!this.HandleOptionPaths(c,aValue,FromCmdLine)) UnknownParam();
        } else if ($tmp1 === "I") {
          if (!Quick) {
            if (!this.HandleOptionPaths("i",aValue,FromCmdLine)) UnknownParam();
          }}
         else if ($tmp1 === "J") {
          if (aValue === "") UnknownParam();
          c = aValue.charAt(0);
          $lp14({get: function () {
              return aValue;
            }, set: function (v) {
              aValue = v;
            }},1,1);
          if (!this.HandleOptionJ(c,aValue,Quick,FromCmdLine)) UnknownParam();
        } else if ($tmp1 === "M") {
          if (!this.HandleOptionM(aValue,Quick)) UnknownParam()}
         else if ($tmp1 === "N") {
          if (aValue === "") UnknownParam();
          var $tmp4 = aValue.charAt(0);
          if ($tmp4 === "S") {
            this.FLog.Log(2,"obsolete option -NS, use -FN instead",0,"",0,0,true);
            $lp14({get: function () {
                return aValue;
              }, set: function (v) {
                aValue = v;
              }},1,1);
            this.HandleOptionPaths("N",aValue,FromCmdLine);
          } else {
            UnknownParam();
          };
        } else if ($tmp1 === "o") {
          if (aValue === "") {
            this.ParamFatal("invalid empty output file (-o)")}
           else if (aValue === "..") {
            this.ParamFatal('invalid output file (-o) "' + aValue + '"')}
           else if (aValue === ".") {}
          else aValue = this.ExpandFileName(aValue);
          this.FMainJSFile = aValue;
        } else if ($tmp1 === "O") {
          if (aValue === "") UnknownParam();
          c = aValue.charAt(0);
          $lp14({get: function () {
              return aValue;
            }, set: function (v) {
              aValue = v;
            }},1,1);
          if (!this.HandleOptionOptimization(c,aValue)) UnknownParam();
        } else if ($tmp1 === "P") {
          for (var $l2 = 0; $l2 <= 1; $l2++) {
            aProc = $l2;
            if ($lp24(aValue,$lm1.PasToJsProcessorNames[aProc])) {
              this.SetTargetProcessor(aProc);
              aValue = "";
              break;
            };
          };
          if (aValue !== "") this.ParamFatal('invalid target processor (-P) "' + aValue + '"');
        } else if ($tmp1 === "S") {
          p += 1;
          if ((p <= l) && (Param.charAt(p - 1) === "I")) {
            Identifier = $lp3(Param,p,Param.length);
            if ($lp24(Identifier,"com")) {
              this.FInterfaceType = 0}
             else if ($lp24(Identifier,"corba")) {
              this.FInterfaceType = 1}
             else this.ParamFatal('invalid interface style (-SI) "' + Identifier + '"');
          } else this.ReadSyntaxFlags(Param,p);
        } else if ($tmp1 === "t") {
          if (!FromCmdLine) this.ParamFatal("subtarget -t parameter can only be passed as cmd line parameter");
          p += 1;
          this.SetSubTarget($lp3(Param,p,Param.length));
        } else if ($tmp1 === "T") {
          p += 1;
          Identifier = $lp3(Param,p,Param.length);
          for (var $l3 = 0; $l3 <= 3; $l3++) {
            aPlatform = $l3;
            if ($lp24(Identifier,$lm1.PasToJsPlatformNames[aPlatform])) {
              this.SetTargetPlatform(aPlatform);
              Identifier = "";
              break;
            };
          };
          if (Identifier !== "") this.ParamFatal('invalid target platform (-T) "' + Identifier + '"');
        } else if ($tmp1 === "u") {
          if (!Quick) {
            if (!$lp1(aValue,false,false)) this.ParamFatal('invalid undefine (-u): "' + aValue + '"');
            this.RemoveDefine(aValue);
          }}
         else if ($tmp1 === "v") {
          p += 1;
          this.ReadVerbosityFlags(Param,p);
        } else {
          UnknownParam();
        };
      } else if ($tmp === "@") {
        if (!Quick) this.HandleOptionConfigFile(i,$lp3(Param,2,Param.length))}
       else {
        if (!Quick) {
          if (!FromCmdLine) this.FConfigSupport.CfgSyntaxError("invalid parameter");
          if (this.FMainSrcFile !== "") this.ParamFatal('Only one Pascal file is supported, but got "' + this.FMainSrcFile + '" and "' + Param + '".');
          this.FMainSrcFile = this.ExpandFileName(Param);
        };
      };
    };
    this.ReadSingleLetterOptions = function (Param, p, Allowed, Enabled, Disabled) {
      var Letter = "\x00";
      var i = 0;
      var l = 0;
      l = Param.length;
      if (p > l) this.ParamFatal('Invalid option "' + Param + '"');
      Enabled.set("");
      Disabled.set("");
      while (p <= l) {
        Letter = Param.charAt(p - 1);
        if (Letter === "-") this.ParamFatal('Invalid option "' + Param + '"');
        if ($lp23(Letter,Allowed) < 1) this.ParamFatal('unknown option "' + Param + '". Use -h for help.');
        p += 1;
        if ((p <= l) && (Param.charAt(p - 1) === "-")) {
          if ($lp23(Letter,Disabled.get()) < 1) Disabled.set(Letter);
          i = $lp23(Letter,Enabled.get());
          if (i > 0) $lp14(Enabled,i,1);
          p += 1;
        } else {
          if ($lp23(Letter,Enabled.get()) < 1) Enabled.set(Letter);
          i = $lp23(Letter,Disabled.get());
          if (i > 0) $lp14(Disabled,i,1);
          if ((p <= l) && (Param.charAt(p - 1) === "+")) p += 1;
        };
      };
    };
    this.ReadCodeGenerationFlags = function (Param, p) {
      var Enabled = "";
      var Disabled = "";
      var i = 0;
      this.ReadSingleLetterOptions(Param,p,"orR",{get: function () {
          return Enabled;
        }, set: function (v) {
          Enabled = v;
        }},{get: function () {
          return Disabled;
        }, set: function (v) {
          Disabled = v;
        }});
      for (var $l = 1, $end = Enabled.length; $l <= $end; $l++) {
        i = $l;
        var $tmp = Enabled.charAt(i - 1);
        if ($tmp === "o") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(14)))}
         else if ($tmp === "r") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(15)))}
         else if ($tmp === "R") this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(16)));
      };
      for (var $l1 = 1, $end1 = Disabled.length; $l1 <= $end1; $l1++) {
        i = $l1;
        var $tmp1 = Disabled.charAt(i - 1);
        if ($tmp1 === "o") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(14)))}
         else if ($tmp1 === "r") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(15)))}
         else if ($tmp1 === "R") this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(16)));
      };
    };
    this.ReadSyntaxFlags = function (Param, p) {
      var Enabled = "";
      var Disabled = "";
      var i = 0;
      this.ReadSingleLetterOptions(Param,p,"2acdmj",{get: function () {
          return Enabled;
        }, set: function (v) {
          Enabled = v;
        }},{get: function () {
          return Disabled;
        }, set: function (v) {
          Disabled = v;
        }});
      for (var $l = 1, $end = Enabled.length; $l <= $end; $l++) {
        i = $l;
        var $tmp = Enabled.charAt(i - 1);
        if ($tmp === "2") {
          this.SetMode(0)}
         else if ($tmp === "a") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(17)))}
         else if ($tmp === "c") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(18)))}
         else if ($tmp === "d") {
          this.SetMode(1)}
         else if ($tmp === "m") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(19)))}
         else if ($tmp === "j") this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(20)));
      };
      for (var $l1 = 1, $end1 = Disabled.length; $l1 <= $end1; $l1++) {
        i = $l1;
        var $tmp1 = Disabled.charAt(i - 1);
        if ($tmp1 === "2") {}
        else if ($tmp1 === "a") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(17)))}
         else if ($tmp1 === "c") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(18)))}
         else if ($tmp1 === "d") {}
        else if ($tmp1 === "m") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(19)))}
         else if ($tmp1 === "j") this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(20)));
      };
    };
    this.ReadVerbosityFlags = function (Param, p) {
      var Enabled = "";
      var Disabled = "";
      var i = 0;
      var l = 0;
      l = Param.length;
      if (p > l) return;
      if (Param.charAt(p - 1) === "m") {
        do {
          p += 1;
          if ((p > l) || !(Param.charCodeAt(p - 1) in rtl.createSet(null,48,57))) this.ParamFatal('missing number in "' + Param + '"');
          i = 0;
          while ((p <= l) && (Param.charCodeAt(p - 1) in rtl.createSet(null,48,57))) {
            i = ((i * 10) + Param.charCodeAt(p - 1)) - 48;
            if (i > 99999) this.ParamFatal('Invalid -vm parameter in "' + Param + '"');
            p += 1;
          };
          if ((p <= l) && (Param.charAt(p - 1) === "-")) {
            p += 1;
            this.FLog.SetMsgNumberDisabled(i,false);
          } else this.FLog.SetMsgNumberDisabled(i,true);
          if (p > l) break;
          if (Param.charAt(p - 1) !== ",") this.ParamFatal('Invalid option "' + Param + '"');
        } while (!false);
        return;
      };
      this.ReadSingleLetterOptions(Param,p,"ewnhila0bctdqxvz",{get: function () {
          return Enabled;
        }, set: function (v) {
          Enabled = v;
        }},{get: function () {
          return Disabled;
        }, set: function (v) {
          Disabled = v;
        }});
      for (var $l = 1, $end = Enabled.length; $l <= $end; $l++) {
        i = $l;
        var $tmp = Enabled.charAt(i - 1);
        if ($tmp === "e") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(3)))}
         else if ($tmp === "w") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(4)))}
         else if ($tmp === "n") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(5)))}
         else if ($tmp === "h") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(6)))}
         else if ($tmp === "i") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(7)))}
         else if ($tmp === "l") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(8)))}
         else if ($tmp === "a") {
          this.SetOptions(rtl.unionSet(this.FOptions,$mod.coShowAll))}
         else if ($tmp === "0") {
          this.SetOptions(rtl.unionSet(rtl.diffSet(this.FOptions,$mod.coShowAll),rtl.createSet(3)))}
         else if ($tmp === "b") {
          this.SetShowFullPaths(true)}
         else if ($tmp === "c") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(10,7)))}
         else if ($tmp === "t") {
          this.SetShowTriedUsedFiles(true)}
         else if ($tmp === "d") {
          this.SetShowDebug(true)}
         else if ($tmp === "q") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(13)))}
         else if ($tmp === "x") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(11)))}
         else if ($tmp === "v") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(23)))}
         else if ($tmp === "z") this.SetWriteMsgToStdErr(true);
      };
      for (var $l1 = 1, $end1 = Disabled.length; $l1 <= $end1; $l1++) {
        i = $l1;
        var $tmp1 = Disabled.charAt(i - 1);
        if ($tmp1 === "e") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(3)))}
         else if ($tmp1 === "w") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(4)))}
         else if ($tmp1 === "n") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(5)))}
         else if ($tmp1 === "h") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(6)))}
         else if ($tmp1 === "i") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(7)))}
         else if ($tmp1 === "l") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(8)))}
         else if ($tmp1 === "a") {}
        else if ($tmp1 === "0") {}
        else if ($tmp1 === "b") {
          this.SetShowFullPaths(false)}
         else if ($tmp1 === "c") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(10)))}
         else if ($tmp1 === "t") {
          this.SetShowTriedUsedFiles(false)}
         else if ($tmp1 === "d") {
          this.SetShowDebug(false)}
         else if ($tmp1 === "q") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(13)))}
         else if ($tmp1 === "x") {
          this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(11)))}
         else if ($tmp1 === "v") {
          this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(23)))}
         else if ($tmp1 === "z") this.SetWriteMsgToStdErr(false);
      };
    };
    this.SetSubTarget = function (AValue) {
      if (this.FSubTarget === AValue) return;
      this.FSubTarget = AValue;
      this.AddDefine$1("FPC_SUBTARGET",$lp25(AValue));
      this.AddDefine("FPC_SUBTARGET_" + $lp25(AValue));
    };
    this.CreateImportList = function () {
      var Result = null;
      Result = $lt44.$create("Create$1",[0,0,""]);
      return Result;
    };
    this.CreateImportStatement = function () {
      var Result = null;
      Result = $lt45.$create("Create$1",[0,0,""]);
      return Result;
    };
    this.CreateJSMapper = function () {
      var Result = null;
      Result = $lt46.$create("Create$2",[4096]);
      return Result;
    };
    this.CreateJSWriter = function (aFileWriter) {
      var Result = null;
      Result = $lt47.$create("Create$1",[aFileWriter]);
      return Result;
    };
    this.CreateLog = function () {
      var Result = null;
      Result = $lt48.$create("Create$1");
      return Result;
    };
    this.CreateMacroEngine = function () {
      var Result = null;
      Result = $lt7.$create("Create$1");
      return Result;
    };
    this.CreateSrcMap = function (aFileName) {
      var Result = null;
      Result = $lt49.$create("Create$1",[aFileName]);
      return Result;
    };
    this.CreateOptimizer = function () {
      var Result = null;
      Result = $lt31.$create("Create$1");
      return Result;
    };
    this.FormatPath = function (aPath) {
      var Result = "";
      Result = this.FFS.FormatPath(aPath);
      return Result;
    };
    this.FullFormatPath = function (aPath) {
      var Result = "";
      Result = $lp8(this.FormatPath(aPath),'"');
      return Result;
    };
    this.WritePrecompiledFormats = function () {
      this.WriteHelpLine("   -JU: This pas2js does not support PCU files");
    };
    var MaxLineLen = 78;
    var Indent = 12;
    this.WriteHelpLine = function (S) {
      var $Self = this;
      var l = 0;
      var p = 0;
      var LastCharStart = 0;
      var WordBreak = 0;
      var Len = 0;
      var CodePointCount = 0;
      function InitLine() {
        l = S.length;
        p = 1;
        LastCharStart = p;
        WordBreak = 0;
        CodePointCount = 0;
      };
      if (S.length <= 78) {
        this.FLog.LogRaw(S);
        return;
      };
      InitLine();
      while (p <= l) {
        var $tmp = S.charAt(p - 1);
        if ((($tmp >= "a") && ($tmp <= "z")) || (($tmp >= "A") && ($tmp <= "Z")) || (($tmp >= "0") && ($tmp <= "9")) || ($tmp === "_") || ($tmp === "-") || ($tmp === ".") || ($tmp === ",") || ($tmp === '"') || ($tmp === "'") || ($tmp === "`") || (($tmp >= "") && ($tmp <= "\uFFFF"))) {
          LastCharStart = p;
          if ((p < l) && (S.charCodeAt(p - 1) in rtl.createSet(null,56320,57343))) {
            p += 2}
           else p += 1;
        } else {
          LastCharStart = p;
          WordBreak = p;
          p += 1;
        };
        CodePointCount += 1;
        if (CodePointCount >= 78) {
          if ((WordBreak === 0) || (WordBreak < rtl.trunc(78 / 2))) WordBreak = LastCharStart;
          Len = WordBreak - 1;
          this.FLog.LogRaw($lp4(S,Len));
          $lp14({get: function () {
              return S;
            }, set: function (v) {
              S = v;
            }},1,Len);
          S = $lp26(" ",12) + $lp27(S);
          InitLine();
        };
      };
      this.FLog.LogRaw(S);
    };
    this.LoadFile = function (Filename, Binary) {
      var Result = null;
      try {
        Result = this.FFS.LoadFile(Filename,Binary);
      } catch ($e) {
        if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          this.FLog.Log(1,E.fMessage,0,"",0,0,true);
          this.Terminate(4);
        } else throw $e
      };
      return Result;
    };
    this.HandleLinkLibStatement = function (Sender, aLibName, aLibAlias, aLibOptions, Handled) {
      var Imp = null;
      var PasLib = null;
      var dmAlias = null;
      var dmimp = null;
      var pePas = null;
      var peAlias = null;
      var LibModuleName = "";
      Handled.set(true);
      if (Sender === null) ;
      if (aLibOptions !== "") this.ParamFatal("[20210919141030] linklib options not supported");
      Imp = this.CreateImportStatement();
      Imp.FNameSpaceImport = aLibAlias;
      LibModuleName = aLibName;
      if ($lp28(LibModuleName) === "") LibModuleName = LibModuleName + ".js";
      Imp.FModuleName = LibModuleName;
      pePas = $lt50.$create("Create$1",[0,0,""]);
      pePas.FName = "pas";
      dmimp = $lt51.$create("Create$1",[0,0,""]);
      dmimp.FName = "$libimports";
      dmimp.FMExpr = pePas;
      dmAlias = $lt51.$create("Create$1",[0,0,""]);
      dmAlias.FName = aLibAlias;
      dmAlias.FMExpr = dmimp;
      peAlias = $lt50.$create("Create$1",[0,0,""]);
      peAlias.FName = aLibAlias;
      PasLib = $lt52.$create("Create$1",[0,0,""]);
      PasLib.FLHS = dmAlias;
      PasLib.FExpr = peAlias;
      this.FImports.FStatements.AddNode(false,false).FNode = Imp;
      this.FImports.FStatements.AddNode(false,false).FNode = PasLib;
    };
    this.CreateCompilerFile = function (PasFileName, PCUFilename) {
      var Result = null;
      Result = $lt15.$create("Create$2",[this,PasFileName,PCUFilename]);
      return Result;
    };
    this.HandleOptionPCUFormat = function (aValue) {
      this.ParamFatal("No support in this compiler for precompiled format " + aValue);
    };
    this.HandleOptionPaths = function (C, aValue, FromCmdLine) {
      var Result = false;
      var ErrorMsg = "";
      Result = true;
      var $tmp = C;
      if ($tmp === "N") {
        this.AddNamespaces(aValue,FromCmdLine)}
       else if ($tmp === "r") {
        this.FLog.Log(3,"-Fr not yet implemented",0,"",0,0,true)}
       else if ($tmp === "e") {
        this.FLog.SetOutputFilename(aValue)}
       else {
        ErrorMsg = this.FFS.HandleOptionPaths(C,aValue,FromCmdLine);
        if (ErrorMsg !== "") this.ParamFatal(ErrorMsg);
      };
      return Result;
    };
    this.HandleOptionJ = function (C, aValue, Quick, FromCmdLine) {
      var Result = false;
      var S = "";
      var ErrorMsg = "";
      var aName = "";
      var i = 0;
      var enable = false;
      var pbi = 0;
      Result = true;
      var $tmp = C;
      if ($tmp === "c") {
        if (aValue === "") {
          this.SetAllJSIntoMainJS(true)}
         else if (aValue === "-") {
          this.SetAllJSIntoMainJS(false)}
         else this.ParamFatal('invalid value (-Jc) "' + aValue + '"');
      } else if ($tmp === "e") {
        S = $lp29(aValue);
        var $tmp1 = S;
        if (($tmp1 === "utf8") || ($tmp1 === "json")) {
          if (this.FLog.FEncoding !== S) {
            this.FLog.SetEncoding(S);
            if (this.FHasShownEncoding) {
              this.FHasShownEncoding = false;
              this.WriteEncoding();
            };
          }}
         else {
          this.ParamFatal('invalid encoding (-Je) "' + aValue + '"');
        };
      } else if (($tmp === "a") || ($tmp === "i")) {
        if (aValue === "") {
          if (C === "a") {
            this.ParamFatal('missing append file "' + aValue + '"')}
           else this.ParamFatal('missing insertion file "' + aValue + '"')}
         else if (!Quick) {
          if (aValue === "") {
            Result = false}
           else if (aValue.charAt(aValue.length - 1) === "-") {
            $lp14({get: function () {
                return aValue;
              }, set: function (v) {
                aValue = v;
              }},aValue.length,1);
            if (aValue === "") {
              Result = false}
             else if (C === "i") {
              this.RemoveInsertJSFilename(aValue)}
             else this.RemoveAppendJSFilename(aValue);
          } else if (C === "i") {
            this.AddInsertJSFilename(aValue)}
           else this.AddAppendJSFilename(aValue);
        }}
       else if ($tmp === "l") {
        this.SetOption(21,aValue !== "-")}
       else if ($tmp === "m") {
        if (aValue === "") {
          this.SetSrcMapEnable(true)}
         else if (aValue.charAt(0) === "-") {
          if (aValue !== "-") {
            Result = false}
           else this.SetSrcMapEnable(false);
        } else {
          var $tmp2 = aValue;
          if ($tmp2 === "include") {
            this.SetSrcMapInclude(true)}
           else if ($tmp2 === "include-") {
            this.SetSrcMapInclude(false)}
           else if ($tmp2 === "absolute") {
            this.SetSrcMapFilenamesAbsolute(true)}
           else if ($tmp2 === "absolute-") {
            this.SetSrcMapFilenamesAbsolute(false)}
           else if ($tmp2 === "xssiheader") {
            this.SetSrcMapXSSIHeader(true)}
           else if ($tmp2 === "xssiheader-") {
            this.SetSrcMapXSSIHeader(false)}
           else {
            i = $lp23("=",aValue);
            if (i < 1) {
              this.ParamFatal('unknown -Jm parameter "' + aValue + '"')}
             else {
              S = $lp4(aValue,i - 1);
              $lp14({get: function () {
                  return aValue;
                }, set: function (v) {
                  aValue = v;
                }},1,i);
              var $tmp3 = S;
              if ($tmp3 === "sourceroot") {
                this.FSrcMapSourceRoot = aValue}
               else if ($tmp3 === "basedir") {
                this.SetSrcMapBaseDir(aValue)}
               else {
                this.ParamFatal('unknown -Jm parameter "' + S + '"');
              };
            };
          };
          this.SetSrcMapEnable(true);
        }}
       else if ($tmp === "o") {
        S = aValue;
        if (aValue === "") this.ParamFatal("missing value of -Jo option");
        if ($lp24($lp4(S,4),"rtl-")) {
          i = 5;
          while ((i <= S.length) && (S.charCodeAt(i - 1) in rtl.createSet(null,97,122,null,65,90,null,48,57,95))) i += 1;
          if ((i > S.length) || (S.charAt(i - 1) !== "=")) this.ParamFatal("expected -Jortl-name=value");
          aName = "pbi" + $lp3(S,5,i - 5);
          S = $lp3(S,i + 1,255);
          pbi = rtl.valEnum(aName,$lt53,function (v) {
            i = v;
          });
          if (i !== 0) this.ParamFatal('unknown rtl identifier "' + aName + '"');
          if ($lp30(this.FConverterGlobals.BuiltInNames[pbi],false) && !$lp30(S,false)) this.ParamFatal("JavaScript identifier expected");
          if (!Quick) this.FConverterGlobals.BuiltInNames[pbi] = S;
        } else {
          enable = true;
          C = S.charAt(S.length - 1);
          if (C.charCodeAt() in rtl.createSet(43,45)) {
            enable = C === "+";
            $lp14({get: function () {
                return S;
              }, set: function (v) {
                S = v;
              }},S.length,1);
          };
          var $tmp4 = $lp12(S);
          if ($tmp4 === "searchlikefpc") {
            this.FFS.SetOptionFromIndex(2,enable)}
           else if ($tmp4 === "usestrict") {
            this.SetOption(22,enable)}
           else if ($tmp4 === "checkversion=main") {
            this.FRTLVersionCheck = 1}
           else if ($tmp4 === "checkversion=system") {
            this.FRTLVersionCheck = 2}
           else if ($tmp4 === "checkversion=unit") {
            this.FRTLVersionCheck = 3}
           else {
            Result = false;
          };
        };
      } else if ($tmp === "p") {
        if (!(this.FPostProcessorSupport != null)) this.ParamFatal("-Jp: No postprocessor support available");
        Result = $lp3(aValue,1,3) === "cmd";
        if (Result) {
          $lp14({get: function () {
              return aValue;
            }, set: function (v) {
              aValue = v;
            }},1,3);
          if (!Quick) this.FPostProcessorSupport.AddPostProcessor(aValue);
        };
      } else if ($tmp === "r") {
        S = aValue;
        if (aValue === "") {
          this.ParamFatal("missing value for -Jr option")}
         else if (S === "none") {
          this.FResourceStringFile = 0}
         else if (S === "unit") {
          this.FResourceStringFile = 1}
         else if (S === "program") {
          this.FResourceStringFile = 2}
         else this.ParamFatal('invalid resource string file format (-Jr) "' + aValue + '"');
      } else if ($tmp === "R") {
        i = $lp23("=",aValue);
        if (i === 0) i = aValue.length + 1;
        S = $lp3(aValue,1,i - 1);
        if (S === "") {
          this.ParamFatal("missing value for -JR option")}
         else if (S === "none") {
          this.FResourceMode = 1}
         else if (S === "js") {
          this.FResourceMode = 3}
         else if (S === "html") {
          this.FResourceMode = 2;
          S = $lp3(aValue,i + 1,aValue.length - i);
          this.FResourceOutputFile = S;
          if ((this.FResourceOutputFile !== "") && ($lp28(this.FResourceOutputFile) === "")) this.FResourceOutputFile = this.FResourceOutputFile + ".html";
        };
      } else if ($tmp === "u") {
        if (!Quick) {
          ErrorMsg = this.FFS.AddForeignUnitPath(aValue,FromCmdLine);
          if (ErrorMsg !== "") this.ParamFatal('invalid foreign unit path (-Ju) "' + ErrorMsg + '"');
        }}
       else if ($tmp === "U") {
        this.HandleOptionPCUFormat(aValue)}
       else {
        Result = false;
      };
      return Result;
    };
    this.HandleOptionM = function (aValue, Quick) {
      var Result = false;
      var Negated = false;
      var ms = 0;
      Result = true;
      if (aValue === "") this.ParamFatal('invalid syntax mode (-M<x>) "' + aValue + '"');
      if (Quick) return Result;
      var $tmp = $lp12(aValue);
      if ($tmp === "delphi") {
        this.SetMode(1)}
       else if ($tmp === "objfpc") {
        this.SetMode(0)}
       else {
        if (aValue.charAt(aValue.length - 1) === "-") {
          aValue = $lp4(aValue,aValue.length - 1);
          Negated = true;
        } else Negated = false;
        for (var $l = 0; $l <= 56; $l++) {
          ms = $l;
          if ((ms in $lm1.msAllPas2jsModeSwitches) && $lp24($lm.SModeSwitchNames[ms],aValue)) {
            if ((ms in this.FModeSwitches) !== Negated) {
              return Result;
            } else if (ms in $lm1.msAllPas2jsModeSwitchesReadOnly) {
              this.ParamFatal('modeswitch is read only -M"' + aValue + '"')}
             else {
              if (Negated) {
                this.SetModeSwitches(rtl.diffSet(this.FModeSwitches,rtl.createSet(ms)))}
               else this.SetModeSwitches(rtl.unionSet(this.FModeSwitches,rtl.createSet(ms)));
              return Result;
            };
          };
        };
        this.ParamFatal('invalid syntax mode (-M) "' + aValue + '"');
      };
      return Result;
    };
    this.HandleOptionConfigFile = function (aPos, aFileName) {
      var FN = "";
      if (aFileName === "") this.ParamFatal("invalid config file at param position " + $lp19(aPos));
      FN = this.ExpandFileName(aFileName);
      if (!this.FFS.FileExists(FN)) this.ParamFatal('config file not found: "' + aFileName + '"');
      this.LoadConfig(FN);
    };
    this.HandleOptionInfo = function (aValue) {
      var $Self = this;
      var InfoMsg = "";
      function AppendInfo(Add) {
        if (InfoMsg !== "") InfoMsg = InfoMsg + " ";
        InfoMsg = InfoMsg + Add;
      };
      var P = 0;
      var L = 0;
      var C = "\x00";
      var c2 = "\x00";
      var pr = 0;
      var pl = 0;
      var s = "";
      var pbi = 0;
      var ms = 0;
      InfoMsg = "";
      if (aValue === "") {
        this.WriteInfo();
        this.Terminate(0);
        return;
      };
      P = 1;
      L = aValue.length;
      while (P <= L) {
        C = aValue.charAt(P - 1);
        var $tmp = C;
        if ($tmp === "D") {
          AppendInfo($mod.GetCompiledDate())}
         else if ($tmp === "V") {
          AppendInfo(this.$class.GetVersion(true))}
         else if ($tmp === "W") {
          AppendInfo(this.$class.GetVersion(false))}
         else if ($tmp === "S") {
          P += 1;
          if (P > L) this.ParamFatal('missing info option after S in "' + aValue + '".');
          c2 = aValue.charAt(P - 1);
          var $tmp1 = c2;
          if ($tmp1 === "O") {
            AppendInfo($mod.GetCompiledTargetOS())}
           else if ($tmp1 === "P") {
            AppendInfo($mod.GetCompiledTargetCPU())}
           else {
            this.ParamFatal('unknown info option S"' + c2 + '" in "' + aValue + '".');
          };
        } else if ($tmp === "T") {
          P += 1;
          if (P > L) this.ParamFatal('missing info option after T in "' + aValue + '".');
          c2 = aValue.charAt(P - 1);
          var $tmp2 = c2;
          if ($tmp2 === "O") {
            AppendInfo($lm1.PasToJsPlatformNames[this.GetTargetPlatform()])}
           else if ($tmp2 === "P") {
            AppendInfo($lm1.PasToJsProcessorNames[this.GetTargetProcessor()])}
           else {
            this.ParamFatal('unknown info option S"' + c2 + '" in "' + aValue + '".');
          };
        } else if ($tmp === "c") {
          for (var $l = 0; $l <= 1; $l++) {
            pr = $l;
            this.FLog.LogPlain($lm1.PasToJsProcessorNames[pr]);
          }}
         else if ($tmp === "m") {
          for (ms in rtl.diffSet($lm1.msAllPas2jsModeSwitches,$lm.AllLanguageModes)) this.FLog.LogPlain($lm.SModeSwitchNames[ms]);
        } else if ($tmp === "o") {
          this.FLog.LogPlain("EnumNumbers");
          this.FLog.LogPlain("RemoveNotUsedPrivates");
          this.FLog.LogPlain("RemoveNotUsedDeclarations");
          this.FLog.LogPlain("ShortRefGlobals");
        } else if ($tmp === "t") {
          for (var $l1 = 0; $l1 <= 3; $l1++) {
            pl = $l1;
            this.FLog.LogPlain($lm1.PasToJsPlatformNames[pl]);
          }}
         else if ($tmp === "J") {
          this.FLog.LogPlain("-JoRTL-<x> identifiers:");
          for (var $l2 = 0; $l2 <= 188; $l2++) {
            pbi = $l2;
            s = $lt53[pbi];
            $lp14({get: function () {
                return s;
              }, set: function (v) {
                s = v;
              }},1,3);
            this.FLog.LogPlain("-JoRTL-" + s + "=" + $lm1.Pas2JSBuiltInNames[pbi]);
          };
        } else {
          this.ParamFatal('unknown info option "' + C + '" in "' + aValue + '".');
        };
        P += 1;
      };
      if (InfoMsg !== "") this.FLog.LogPlain(InfoMsg);
    };
    this.HandleOptionOptimization = function (C, aValue) {
      var Result = false;
      var Enable = false;
      Result = true;
      var $tmp = C;
      if ($tmp === "-") {
        this.SetOptions(rtl.unionSet(rtl.diffSet(this.FOptions,$mod.coAllOptimizations),$mod.coO0))}
       else if ($tmp === "1") {
        this.SetOptions(rtl.unionSet(rtl.diffSet(this.FOptions,$mod.coAllOptimizations),$mod.coO1))}
       else if ($tmp === "2") {
        this.SetOptions(rtl.unionSet(rtl.diffSet(this.FOptions,$mod.coAllOptimizations),$mod.coO2))}
       else if ($tmp === "o") {
        if (aValue === "") this.ParamFatal("missing -Oo option");
        Enable = true;
        C = aValue.charAt(aValue.length - 1);
        if (C.charCodeAt() in rtl.createSet(43,45)) {
          Enable = C === "+";
          $lp14({get: function () {
              return aValue;
            }, set: function (v) {
              aValue = v;
            }},aValue.length,1);
        } else if ($lp12($lp4(aValue,2)) === "no") {
          Enable = false;
          $lp14({get: function () {
              return aValue;
            }, set: function (v) {
              aValue = v;
            }},1,2);
        };
        var $tmp1 = $lp12(aValue);
        if ($tmp1 === "enumnumbers") {
          this.SetOption(26,Enable)}
         else if ($tmp1 === "removenotusedprivates") {
          this.SetOption(27,!Enable)}
         else if ($tmp1 === "removenotuseddeclarations") {
          this.SetOption(28,!Enable)}
         else if ($tmp1 === "shortrefglobals") {
          this.SetOption(29,Enable)}
         else if ($tmp1 === "obfuscatelocalidentifiers") {
          this.SetOption(30,Enable)}
         else {
          this.FLog.LogMsgIgnoreFilter(146,$lp6(18,$lp8(aValue,'"')));
        };
      } else {
        Result = false;
      };
      return Result;
    };
    this.DoWriteJSFile = function (DestFilename, MapFilename, aWriter) {
      var Result = false;
      Result = false;
      if (DestFilename === "") ;
      if (MapFilename === "") ;
      if (aWriter === null) ;
      return Result;
    };
    this.Compile = function (StartTime) {
      var Checked = null;
      var CombinedFileWriter = null;
      var SrcFileCount = 0;
      var Seconds = 0.0;
      var ok = false;
      if (this.FMainFile !== null) this.RaiseInternalError(20170504192137,"");
      Checked = null;
      CombinedFileWriter = null;
      SrcFileCount = 0;
      $lp31(this.FPrecompileGUID);
      ok = false;
      try {
        this.LoadModuleFile(this.FMainSrcFile,"",{p: this, get: function () {
            return this.p.FMainFile;
          }, set: function (v) {
            this.p.FMainFile = v;
          }},false);
        if (this.FMainFile === null) return;
        this.FMainFile.ReadUnit();
        this.ProcessQueue();
        if ($lt37.isPrototypeOf(this.FMainFile.FPasModule)) this.OptimizeProgram(this.FMainFile);
        Checked = this.CreateSetOfCompilerFiles(0);
        this.MarkNeedBuilding(this.FMainFile,Checked,{get: function () {
            return SrcFileCount;
          }, set: function (v) {
            SrcFileCount = v;
          }});
        SrcFileCount = Checked.Count();
        $lp({get: function () {
            return Checked;
          }, set: function (v) {
            Checked = v;
          }});
        Checked = this.CreateSetOfCompilerFiles(0);
        this.CreateJavaScript(this.FMainFile,Checked);
        $lp({get: function () {
            return Checked;
          }, set: function (v) {
            Checked = v;
          }});
        Checked = this.CreateSetOfCompilerFiles(0);
        this.WriteJSFiles(this.FMainFile,null,Checked);
        $lp({get: function () {
            return Checked;
          }, set: function (v) {
            Checked = v;
          }});
        if (this.GetExitCode() === 0) {
          Seconds = ($lp32() - StartTime) * 86400;
          this.FLog.LogMsgIgnoreFilter(129,$lp6(18,$lp19(this.FFS.FReadLineCounter),18,$lp19(SrcFileCount),18,$lp33("0.0",Seconds),9,"s"));
          ok = true;
        };
      } finally {
        Checked = rtl.freeLoc(Checked);
        if (!ok) this.FLog.LogMsgIgnoreFilter(118,[]);
        CombinedFileWriter = rtl.freeLoc(CombinedFileWriter);
      };
    };
    this.ProcessQueue = function () {
      var i = 0;
      var aFile = null;
      var Found = false;
      var Section = null;
      do {
        Found = false;
        for (var $l = this.FReadingModules.FCount - 1; $l >= 0; $l--) {
          i = $l;
          aFile = rtl.getObject(this.FReadingModules.Get(i));
          if (aFile.ReaderState() !== 3) {
            if (!aFile.IsUnitReadFromPCU() && (aFile.FParser.FCurModule === null)) this.RaiseInternalError(20180306111410,"File=" + aFile.FUnitFilename + " Parser.CurModule=nil");
            continue;
          };
          Found = true;
          aFile.ReadContinue();
          if (aFile.ReaderState() === 3) {
            this.RaiseInternalError(20180313130300,"File=" + aFile.FUnitFilename + " ReadContinue buggy");
          };
          break;
        };
      } while (Found);
      for (var $l1 = 0, $end = this.FReadingModules.FCount - 1; $l1 <= $end; $l1++) {
        i = $l1;
        aFile = rtl.getObject(this.FReadingModules.Get(i));
        if (aFile.FPasResolver === null) this.RaiseInternalError(20180313124125,aFile.FUnitFilename);
        if (!aFile.IsUnitReadFromPCU() && (aFile.FParser.FCurModule !== null)) {
          this.RaiseInternalError(20180305185342,aFile.FUnitFilename);
        };
        Section = aFile.FPasResolver.GetLastSection();
        if (Section === null) this.RaiseInternalError(20180313124207,aFile.FUnitFilename);
        if (Section.PendingUsedIntf !== null) this.RaiseInternalError(20180313124226,aFile.FUnitFilename + " " + $lp34(Section) + " PendingUsedIntf=" + $lp34(Section.PendingUsedIntf));
      };
    };
    this.MarkNeedBuilding = function (aFile, Checked, SrcFileCount) {
      var $Self = this;
      var Result = false;
      function Mark(MsgNumber, Args) {
        if (aFile.FNeedBuild) return;
        aFile.FNeedBuild = true;
        SrcFileCount.set(SrcFileCount.get() + 1);
        if ($Self.GetShowDebug() || $Self.GetShowTriedUsedFiles()) $Self.FLog.LogMsg(MsgNumber,Args,"",0,0,false);
      };
      function CheckUsesClause(UsesClause) {
        var i = 0;
        var UsedFile = null;
        var aModule = null;
        if (rtl.length(UsesClause) === 0) return;
        for (var $l = 0, $end = rtl.length(UsesClause) - 1; $l <= $end; $l++) {
          i = $l;
          aModule = rtl.as(UsesClause[i].Module,$lt36);
          UsedFile = $lt15.GetFile(aModule);
          if (UsedFile === null) $Self.RaiseInternalError(20171214121631,aModule.FName);
          if ($Self.MarkNeedBuilding(UsedFile,Checked,SrcFileCount)) {
            if (!aFile.FNeedBuild) Mark(122,$lp6(18,aFile.GetModuleName(),18,UsedFile.GetModuleName()));
          };
        };
      };
      Result = false;
      if (Checked.FindItem(aFile) !== null) return aFile.FNeedBuild;
      Checked.Add(aFile,true);
      if (this.FAllJSIntoMainJS && (this.FWPOAnalyzer !== null) && !this.FWPOAnalyzer.IsUsed(aFile.FPasModule)) {
        return false;
      };
      CheckUsesClause(aFile.GetPasMainUsesClause());
      CheckUsesClause(aFile.GetPasImplUsesClause());
      if (!aFile.FNeedBuild && !aFile.FIsForeign) {
        if (aFile.FIsMainFile) {
          Mark(123,$lp6(18,aFile.GetModuleName(),18,"<main source file>"))}
         else if (1 in this.FOptions) {
          Mark(123,$lp6(18,aFile.GetModuleName(),18,"-B"))}
         else if (this.FAllJSIntoMainJS) {
          Mark(123,$lp6(18,aFile.GetModuleName(),18,"-Jc"))}
         else if ((aFile.FJSFilename !== "") && !this.FFS.FileExists(aFile.FJSFilename)) {
          Mark(124,$lp6(18,aFile.GetModuleName(),18,this.FormatPath(aFile.FJSFilename)))}
         else if ((aFile.FJSFilename !== "") && this.FFS.File1IsNewer(aFile.FUnitFilename,aFile.FJSFilename)) {
          Mark(125,$lp6(18,aFile.GetModuleName(),18,this.FullFormatPath(aFile.FJSFilename)));
        };
      };
      if (aFile.FNeedBuild) {
        if (aFile.FIsForeign) {
          this.FLog.LogMsg(121,$lp6(18,aFile.GetModuleName()),"",0,0,true);
          this.Terminate(5);
        };
      };
      Result = aFile.FNeedBuild;
      return Result;
    };
    this.OptimizeProgram = function (aFile) {
      if (!this.FAllJSIntoMainJS) return;
      if (28 in this.FOptions) return;
      if (!$lt37.isPrototypeOf(aFile.FPasModule)) return;
      this.FWPOAnalyzer = this.CreateOptimizer();
      this.FWPOAnalyzer.FResolver = aFile.FPasResolver;
      this.FWPOAnalyzer.SetOptions(rtl.unionSet(this.FWPOAnalyzer.FOptions,rtl.createSet(0)));
      this.FWPOAnalyzer.AnalyzeWholeProgram(aFile.FPasModule);
    };
    this.CreateJavaScript = function (aFile, Checked) {
      var $Self = this;
      function CheckUsesClause(UsesClause) {
        var i = 0;
        var UsedFile = null;
        var aModule = null;
        if (rtl.length(UsesClause) === 0) return;
        for (var $l = 0, $end = rtl.length(UsesClause) - 1; $l <= $end; $l++) {
          i = $l;
          aModule = rtl.as(UsesClause[i].Module,$lt36);
          UsedFile = $lt15.GetFile(aModule);
          if (UsedFile === null) $Self.RaiseInternalError(20171214121720,aModule.FName);
          $Self.CreateJavaScript(UsedFile,Checked);
        };
      };
      if (aFile.FJSModule !== null) return;
      if (Checked.ContainsItem(aFile)) return;
      Checked.Add(aFile,true);
      aFile.EmitModuleHints();
      if (!aFile.FNeedBuild) return;
      this.FLog.LogMsg(127,$lp6(18,this.FullFormatPath(aFile.FUnitFilename)),"",0,0,!(8 in this.FOptions));
      CheckUsesClause(aFile.GetPasMainUsesClause());
      CheckUsesClause(aFile.GetPasImplUsesClause());
      aFile.CreateJS();
    };
    this.FinishSrcMap = function (SrcMap) {
      var LocalFilename = "";
      var MapFilename = "";
      var BaseDir = "";
      var aFile = null;
      var i = 0;
      if (this.FSrcMapBaseDir !== "") {
        BaseDir = this.FSrcMapBaseDir}
       else BaseDir = $lp7($lp7(SrcMap.LocalFilename));
      for (var $l = 0, $end = SrcMap.SourceCount() - 1; $l <= $end; $l++) {
        i = $l;
        LocalFilename = SrcMap.GetSourceFiles(i);
        if (LocalFilename === "") continue;
        if (this.GetSrcMapInclude() && this.FFS.FileExists(LocalFilename)) {
          aFile = this.LoadFile(LocalFilename,false);
          SrcMap.SetSourceContents(i,aFile.FSource);
        };
        MapFilename = LocalFilename;
        if ((BaseDir !== "") && !this.GetSrcMapFilenamesAbsolute()) {
          if (!this.FFS.TryCreateRelativePath(LocalFilename,BaseDir,true,false,{get: function () {
              return MapFilename;
            }, set: function (v) {
              MapFilename = v;
            }})) {
            if (!this.GetSrcMapInclude()) {
              this.FLog.Log(1,$lp11($mod.sUnableToTranslatePathToDir,$lp6(18,$lp8(LocalFilename,'"'),18,$lp8(BaseDir,'"'))),133,"",0,0,true);
              this.Terminate(7);
            };
            MapFilename = LocalFilename;
          };
        };
        if ($lp35(MapFilename) && $lp24(this.FSrcMapSourceRoot,"file://")) {
          MapFilename = "file://" + MapFilename;
        };
        if ($lm3.PathDelim !== "/") MapFilename = $lp36(MapFilename,$lm3.PathDelim,"/",rtl.createSet(0));
        if (LocalFilename !== MapFilename) SrcMap.SetSourceTranslatedFiles(i,MapFilename);
      };
    };
    this.WriteSingleJSFile = function (aFile, CombinedFileWriter) {
      var $Self = this;
      function WriteToStandardOutput(aFileWriter) {
        try {
          $Self.FLog.LogRaw(aFileWriter.GetAsString());
        } finally {
        };
      };
      function CheckOutputDir(DestFileName) {
        var DestDir = "";
        DestDir = $lp37($lp7(DestFileName));
        if ((DestDir !== "") && !$Self.FFS.DirectoryExists(DestDir)) {
          $Self.FLog.LogMsg(115,$lp6(18,$Self.FullFormatPath(DestDir)),"",0,0,true);
          $Self.Terminate(4);
        };
        if ($Self.FFS.DirectoryExists(DestFileName)) {
          $Self.FLog.LogMsg(111,$lp6(18,$Self.FullFormatPath(DestFileName)),"",0,0,true);
          $Self.Terminate(5);
        };
      };
      var aFileWriter = null;
      var isSingleFile = false;
      var JSFileWritten = false;
      var ResFileName = "";
      var MapFilename = "";
      aFileWriter = CombinedFileWriter;
      try {
        isSingleFile = aFileWriter === null;
        if (isSingleFile) {
          aFileWriter = this.CreateFileWriter(aFile,"");
          if (aFile.FIsMainFile && !this.FAllJSIntoMainJS) {
            this.InsertCustomJSFiles(aFileWriter);
            if (this.FResources.$class.OutputMode() === 3) aFileWriter.WriteFile(this.FResources.GetAsString(),this.GetResolvedMainJSFile());
          };
        };
        if (this.FResourceStringFile !== 0) this.AddUnitResourceStrings(aFile);
        this.FResources.DoneUnit(aFile.FIsMainFile);
        this.EmitJavaScript(aFile,aFileWriter);
        if (isSingleFile || aFile.FIsMainFile) {
          if (aFile.FIsMainFile) this.AppendCustomJSFiles(aFileWriter);
          if (this.FPostProcessorSupport != null) this.FPostProcessorSupport.CallPostProcessors(aFile.FJSFilename,aFileWriter);
          if (this.GetSrcMapEnable()) {
            MapFilename = aFileWriter.FDestFileName + ".map"}
           else MapFilename = "";
          CheckOutputDir(aFileWriter.FDestFileName);
          JSFileWritten = this.DoWriteJSFile(aFile.FJSFilename,MapFilename,aFileWriter);
          if ((aFile.FJSFilename === "") && (this.FMainJSFile === ".")) WriteToStandardOutput(aFileWriter);
          this.FLog.LogMsg(117,$lp6(18,this.FullFormatPath(aFileWriter.FDestFileName)),"",0,0,!(8 in this.FOptions));
          if (!JSFileWritten) this.WriteJSToFile(MapFilename,aFileWriter);
          if ((this.FResourceStringFile === 1) || (aFile.FIsMainFile && (this.FResourceStringFile !== 0))) if (this.FResourceStrings.GetStringsCount() > 0) this.WriteResourceStrings($lp18(aFileWriter.FDestFileName,".jrs"));
          if (aFile.FIsMainFile && (this.FResources.$class.OutputMode() === 2) && (this.FResources.GetResourceCount() > 0)) {
            ResFileName = this.FResourceOutputFile;
            if (ResFileName === "") ResFileName = $lp18(aFileWriter.FDestFileName,"-res" + this.FResources.$class.OutputFileExtension());
            this.WriteResources(ResFileName);
          };
          if (aFileWriter.FSrcMap !== null) this.WriteSrcMap(MapFilename,aFileWriter);
        };
      } finally {
        if (isSingleFile) aFileWriter = rtl.freeLoc(aFileWriter);
      };
    };
    this.WriteJSFiles = function (aFile, CombinedFileWriter, Checked) {
      var $Self = this;
      function CheckUsesClause(aFileWriter, UsesClause) {
        var i = 0;
        var UsedFile = null;
        var aModule = null;
        if (rtl.length(UsesClause) === 0) return;
        for (var $l = 0, $end = rtl.length(UsesClause) - 1; $l <= $end; $l++) {
          i = $l;
          aModule = rtl.as(UsesClause[i].Module,$lt36);
          UsedFile = $lt15.GetFile(aModule);
          if (UsedFile === null) $Self.RaiseInternalError(20171214121720,aModule.FName);
          $Self.WriteJSFiles(UsedFile,aFileWriter,Checked);
        };
      };
      var aFileWriter = null;
      if ((aFile.FJSModule === null) || !aFile.FNeedBuild) return;
      if (Checked.ContainsItem(aFile)) return;
      Checked.Add(aFile,true);
      aFileWriter = CombinedFileWriter;
      if (this.FAllJSIntoMainJS && (aFileWriter === null)) {
        aFileWriter = this.CreateFileWriter(aFile,this.GetResolvedMainJSFile());
        this.InsertCustomJSFiles(aFileWriter);
        if (this.GetTargetPlatform() in rtl.createSet(1,3)) this.InsertImportSection(aFileWriter);
        if (this.FResources.$class.OutputMode() === 3) aFileWriter.WriteFile(this.FResources.GetAsString(),this.GetResolvedMainJSFile());
      };
      try {
        CheckUsesClause(aFileWriter,aFile.GetPasMainUsesClause());
        CheckUsesClause(aFileWriter,aFile.GetPasImplUsesClause());
        this.WriteSingleJSFile(aFile,aFileWriter);
      } finally {
        if (aFileWriter !== CombinedFileWriter) aFileWriter = rtl.freeLoc(aFileWriter);
      };
    };
    this.InitParamMacros = function () {
      this.FParamMacros.AddValue("Pas2jsFullVersion","major.minor.release<extra>",this.$class.GetVersion(false));
      this.FParamMacros.AddValue("Pas2jsVersion","major.minor.release",this.$class.GetVersion(true));
      this.FParamMacros.AddFunction("CfgDir","Use within a config file. The directory of this config file",rtl.createCallback(this,"OnMacroCfgDir"),false);
    };
    this.ClearDefines = function () {
      var i = 0;
      var M = null;
      for (var $l = 0, $end = this.FDefines.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        M = this.FDefines.GetObject(i);
        M = rtl.freeLoc(M);
      };
      this.FDefines.Clear();
    };
    this.RaiseInternalError = function (id, Msg) {
      this.FLog.LogPlain("[" + $lp19(id) + "] " + Msg);
      throw $lt19.$create("Create$1",[Msg]);
    };
    this.HandleJSException = function (Msg, E, TerminateInternal) {
      var obj = null;
      var Exc = null;
      if (rtl.isObject(E)) {
        obj = E;
        if (rtl.isExt(obj,Error)) {
          if (obj["stack"]) $lp38(obj["stack"]);
          this.FLog.Log(0,Msg + ": " + ("" + obj["message"]),0,"",0,0,true);
        } else if (rtl.isExt(obj,$lt20)) {
          if ($lt19.isPrototypeOf(obj)) {
            Exc = obj;
            this.FLog.Log(0,Msg + ": (" + Exc.$classname + ") " + Exc.fMessage,0,"",0,0,true);
          } else {
            this.FLog.Log(0,Msg + ": (" + obj.$classname + ")",0,"",0,0,true);
          };
        } else this.FLog.Log(0,Msg + ": " + ("" + E),0,"",0,0,true);
      } else {
        this.FLog.Log(0,Msg + ": " + ("" + E),0,"",0,0,true);
      };
      if (TerminateInternal) this.Terminate(1);
    };
    this.GetExitCode = function () {
      var Result = 0;
      Result = rtl.exitcode;
      return Result;
    };
    this.SetExitCode = function (Value) {
      rtl.exitcode = Value;
    };
    this.SetWorkingDir = function (aDir) {
      if (aDir === "") ;
    };
    this.CreateResourceSupport = function () {
      $lp({p: this, get: function () {
          return this.p.FResources;
        }, set: function (v) {
          this.p.FResources = v;
        }});
      var $tmp = this.FResourceMode;
      if ($tmp === 1) {
        this.FResources = $lt54.$create("Create$1",[this.FFS])}
       else if ($tmp === 2) {
        this.FResources = $lt55.$create("Create$1",[this.FFS])}
       else if ($tmp === 3) this.FResources = $lt56.$create("Create$1",[this.FFS]);
    };
    this.Create$1 = function () {
      this.FOptions = rtl.refSet($mod.DefaultP2jsCompilerOptions);
      this.FConverterGlobals = $lt57.$create("Create$1",[this]);
      this.FResolverHub = $lt58.$create("Create$1",[this]);
      this.FNamespaces = $lt43.$create("Create$1");
      this.FDefines = $lt43.$create("Create$1");
      this.FInsertFilenames = $lt43.$create("Create$1");
      this.FAppendFilenames = $lt43.$create("Create$1");
      this.FImports = this.CreateImportList();
      this.FLog = this.CreateLog();
      this.FLog.FOnFormatPath = rtl.createCallback(this,"FormatPath");
      this.FParamMacros = this.CreateMacroEngine();
      this.RegisterMessages();
      this.SetFS(this.CreateFS());
      this.FOwnsFS = true;
      this.FFiles = this.CreateSetOfCompilerFiles(0);
      this.FUnits = this.CreateSetOfCompilerFiles(1);
      this.FResourceMode = $lt3.rmHTML;
      this.FResourceStrings = $lt59.$create("Create$1");
      this.FReadingModules = $lt30.$create("Create");
      this.InitParamMacros();
      this.Reset();
      return this;
    };
    this.Destroy = function () {
      var $Self = this;
      function FreeStuff() {
        $lp({p: $Self, get: function () {
            return this.p.FResources;
          }, set: function (v) {
            this.p.FResources = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FImports;
          }, set: function (v) {
            this.p.FImports = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FResourceStrings;
          }, set: function (v) {
            this.p.FResourceStrings = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FNamespaces;
          }, set: function (v) {
            this.p.FNamespaces = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FWPOAnalyzer;
          }, set: function (v) {
            this.p.FWPOAnalyzer = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FInsertFilenames;
          }, set: function (v) {
            this.p.FInsertFilenames = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FAppendFilenames;
          }, set: function (v) {
            this.p.FAppendFilenames = v;
          }});
        $Self.FMainFile = null;
        $lp({p: $Self, get: function () {
            return this.p.FUnits;
          }, set: function (v) {
            this.p.FUnits = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FReadingModules;
          }, set: function (v) {
            this.p.FReadingModules = v;
          }});
        $Self.FFiles.FreeItems();
        $lp({p: $Self, get: function () {
            return this.p.FFiles;
          }, set: function (v) {
            this.p.FFiles = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FPostProcessorSupport;
          }, set: function (v) {
            this.p.FPostProcessorSupport = v;
          }});
        $lp({p: $Self, get: function () {
            return this.p.FConfigSupport;
          }, set: function (v) {
            this.p.FConfigSupport = v;
          }});
        $Self.SetConverterGlobals(null);
        $lp({p: $Self, get: function () {
            return this.p.FResolverHub;
          }, set: function (v) {
            this.p.FResolverHub = v;
          }});
        $Self.ClearDefines();
        $lp({p: $Self, get: function () {
            return this.p.FDefines;
          }, set: function (v) {
            this.p.FDefines = v;
          }});
        $Self.FLog.FOnFormatPath = null;
        if ($Self.FOwnsFS) {
          $lp({p: $Self, get: function () {
              return this.p.FFS;
            }, set: function (v) {
              this.p.FFS = v;
            }})}
         else $Self.FFS = null;
        $lp({p: $Self, get: function () {
            return this.p.FParamMacros;
          }, set: function (v) {
            this.p.FParamMacros = v;
          }});
      };
      if (this.GetShowDebug()) {
        try {
          FreeStuff();
        } catch ($e) {
          if ($lt19.isPrototypeOf($e)) {
            var E = $e;
            this.FLog.LogExceptionBackTrace(E);
          } else {
            this.HandleJSException("[20181031190818] TPas2jsCompiler.Destroy",$e,true);
          }
        }}
       else FreeStuff();
      $lp({p: this, get: function () {
          return this.p.FLog;
        }, set: function (v) {
          this.p.FLog = v;
        }});
      $lt20.Destroy.call(this);
    };
    this.Reset = function () {
      this.SetExitCode(0);
      this.FResolverHub.Reset();
      $lp({p: this, get: function () {
          return this.p.FWPOAnalyzer;
        }, set: function (v) {
          this.p.FWPOAnalyzer = v;
        }});
      this.FPrecompileGUID.$assign($lt41.$new());
      this.FNamespaces.Clear();
      this.FNamespacesFromCmdLine = 0;
      this.FMainFile = null;
      this.FUnits.Clear();
      this.FReadingModules.Clear();
      this.FFiles.FreeItems();
      this.FInsertFilenames.Clear();
      this.FAppendFilenames.Clear();
      if (this.FPostProcessorSupport != null) this.FPostProcessorSupport.Clear();
      this.FCompilerExe = "";
      this.FSrcMapBaseDir = "";
      this.FMainSrcFile = "";
      this.FOptions = rtl.refSet($mod.DefaultP2jsCompilerOptions);
      this.FRTLVersionCheck = $lt1.rvcNone;
      this.FModeSwitches = rtl.refSet($mod.p2jsMode_SwitchSets[0]);
      this.FConverterGlobals.Reset();
      this.FConverterGlobals.RTLVersion = (((3 * 100) + 3) * 100) + 1;
      this.FConverterGlobals.TargetPlatform = 0;
      this.FConverterGlobals.TargetProcessor = 0;
      this.FMainJSFileIsResolved = false;
      this.FLog.Reset();
      this.FLog.FShowMsgTypes = rtl.refSet(this.GetShownMsgTypes());
      this.ClearDefines();
      this.FDefines.SetSorted(true);
      this.AddDefine("PAS2JS");
      this.AddDefine$1("PAS2JS_FULLVERSION",$lp19((((3 * 100) + 3) * 100) + 1));
      this.AddDefinesForTargetPlatform();
      this.AddDefinesForTargetProcessor();
      this.AddDefine("FPC_HAS_FEATURE_CLASSES");
      this.AddDefine("FPC_HAS_FEATURE_INIT");
      this.AddDefine("FPC_HAS_FEATURE_DYNARRAYS");
      this.AddDefine("FPC_HAS_FEATURE_EXCEPTIONS");
      this.AddDefine("FPC_HAS_FEATURE_EXITCODE");
      this.AddDefine("FPC_HAS_FEATURE_INITFINAL");
      this.AddDefine("FPC_HAS_FEATURE_RTTI");
      this.AddDefine("FPC_HAS_FEATURE_SUPPORT");
      this.AddDefine("FPC_HAS_FEATURE_UNICODESTRINGS");
      this.AddDefine("FPC_HAS_FEATURE_WIDESTRINGS");
      this.AddDefine("FPC_HAS_TYPE_DOUBLE");
      this.AddDefine("FPC_HAS_UNICODESTRING");
      this.AddDefine("FPC_UNICODESTRINGS");
      this.AddDefine("FPC_WIDESTRING_EQUAL_UNICODESTRING");
      this.AddDefine("STR_CONCAT_PROCS");
      this.AddDefine("UNICODE");
      if (this.FSubTarget !== "") {
        this.AddDefine$1("FPC_SUBTARGET",this.FSubTarget);
        this.AddDefine("FPC_SUBTARGET_" + $lp25(this.FSubTarget));
      };
      this.FHasShownLogo = false;
      this.FHasShownEncoding = false;
      this.FFS.Reset();
    };
    this.ParamFatal = function (Msg) {
      if (this.FCurParam !== "") Msg = "parameter " + this.FCurParam + ": " + Msg;
      if ((this.FConfigSupport != null) && (this.FConfigSupport.FCurrentCfgFilename !== "")) {
        this.FLog.Log(0,Msg,0,this.FConfigSupport.FCurrentCfgFilename,this.FConfigSupport.FCurrentCfgLineNumber,0,true)}
       else this.FLog.LogPlain$1($lp6(18,"Fatal: ",18,Msg));
      this.Terminate(2);
    };
    this.Run = function (aCompilerExe, aWorkingDir, ParamList, DoReset) {
      var i = 0;
      var StartTime = 0.0;
      StartTime = $lp32();
      if (DoReset) this.Reset();
      if (this.GetFileCount() > 0) this.RaiseInternalError(20170504161340,"internal error: TPas2jsCompiler.Run FileCount>0");
      try {
        this.SetWorkingDir(aWorkingDir);
        this.SetCompilerExe(aCompilerExe);
        for (var $l = 0, $end = ParamList.GetCount() - 1; $l <= $end; $l++) {
          i = $l;
          this.ReadParam(ParamList.Get(i),true,true);
        };
        if (this.GetWriteDebugLog()) this.FLog.OpenDebugLog();
        if (this.GetShowLogo()) this.WriteLogo();
        if ((this.FConfigSupport != null) && !this.GetSkipDefaultConfig()) this.FConfigSupport.LoadDefaultConfig();
        if ((this.FConfigSupport != null) && (this.FSubTarget !== "")) this.FConfigSupport.LoadSubTargetConfig(this.FSubTarget);
        this.ReadEnvironment();
        for (var $l1 = 0, $end1 = ParamList.GetCount() - 1; $l1 <= $end1; $l1++) {
          i = $l1;
          this.ReadParam(ParamList.Get(i),false,true);
        };
        this.CreateResourceSupport();
        if (this.GetShowLogo()) this.WriteLogo();
        if (this.GetShowDebug()) {
          this.WriteOptions();
          this.WriteDefines();
        };
        if (this.GetShowDebug() || this.GetShowUsedTools()) this.WriteUsedTools();
        if (this.GetShowDebug() || this.GetShowTriedUsedFiles()) this.WriteFoldersAndSearchPaths();
        if (this.FMainSrcFile === "") this.ParamFatal("No source file name in command line");
        if (!this.FFS.FileExists(this.FMainSrcFile)) this.ParamFatal('Pascal file not found: "' + this.FMainSrcFile + '"');
        this.Compile(StartTime);
      } catch ($e) {
        if ($lt8.isPrototypeOf($e)) {
          var E = $e;
        } else if ($lt19.isPrototypeOf($e)) {
          var E = $e;
          if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(E);
          this.FLog.Log(0,E.fMessage,0,"",0,0,true);
          throw $e;
        } else {
          if (this.GetShowDebug()) this.FLog.LogExceptionBackTrace(null);
          this.HandleJSException("[20181031190933] TPas2jsCompiler.Run",$e,false);
          throw $e;
        }
      };
    };
    this.Terminate = function (TheExitCode) {
      this.SetExitCode(TheExitCode);
      if (this.FLog !== null) this.FLog.Flush();
      throw $lt8.$create("Create$1",["TPas2jsCompiler.Terminate"]);
    };
    this.GetVersion = function (ShortVersion) {
      var Result = "";
      Result = $lp19(3) + "." + $lp19(3) + "." + $lp19(1);
      if (!ShortVersion) Result += $mod.VersionExtra;
      return Result;
    };
    this.WriteHelp = function () {
      var $Self = this;
      function w(s) {
        $Self.WriteHelpLine(s);
      };
      var i = 0;
      var ParamMacro = null;
      this.WriteLogo();
      this.FLog.LogLn();
      if (this.FCompilerExe !== "") {
        w("Usage: " + this.FCompilerExe + " <your.pas>");
      } else {
        w("Usage: pas2js <your.pas>");
      };
      this.FLog.LogLn();
      w("Options:");
      w("Put + after a boolean switch option to enable it, - to disable it");
      w("  @<x>   : Read compiler options from file <x> in addition to the default " + $mod.DefaultConfigFile);
      w("  -B     : Rebuild all");
      w("  -d<x>  : Defines the symbol <x>. Optional: -d<x>:=<value>");
      w("  -i<x>  : Write information and halt. <x> is a combination of the following:");
      w("    -iD  : Write compiler date");
      w("    -iSO : Write compiler OS");
      w("    -iSP : Write compiler host processor");
      w("    -iTO : Write target platform");
      w("    -iTP : Write target processor");
      w("    -iV  : Write short compiler version");
      w("    -iW  : Write full compiler version");
      w("    -ic  : Write list of supported JS processors usable by -P<x>");
      w("    -im  : Write list of supported modeswitches usable by -M<x>");
      w("    -io  : Write list of supported optimizations usable by -Oo<x>");
      w("    -it  : Write list of supported targets usable by -T<x>");
      w("    -iJ  : Write list of supported JavaScript identifiers -JoRTL-<x>");
      w("  -C<x>  : Code generation options. <x> is a combination of the following letters:");
      w("    o    : Overflow checking of integer operations");
      w("    r    : Range checking");
      w("    R    : Object checks. Verify method calls and object type casts.");
      w("  -F...   Set file names and paths:");
      w("   -Fe<x>: Redirect output to file <x>. UTF-8 encoded.");
      w("   -FE<x>: Set main output path to <x>");
      w("   -Fi<x>: Add <x> to include paths");
      w("   -FN<x>: add <x> to namespaces. Namespaces with trailing - are removed.");
      w('            Delphi calls this flag "unit scope names".');
      w("   -Fu<x>: Add <x> to unit paths");
      w("   -FU<x>: Set unit output path to <x>");
      w("  -I<x>  : Add <x> to include paths, same as -Fi");
      w("  -J...  Extra options of pas2js");
      w("   -Ja<x>: Append JS file <x> to main JS file. E.g. -Jamap.js. Can be given multiple times. To remove a file name append a minus, e.g. -Jamap.js-.");
      w("   -Jc   : Write all JavaScript concatenated into the output file");
      w("   -Je<x>: Encode messages as <x>.");
      w("     -Jeconsole: Console codepage. This is the default.");
      w("     -Jesystem : System codepage. On non Windows console and system are the same.");
      w("     -Jeutf-8  : Unicode UTF-8. Default when using -Fe.");
      w("     -JeJSON   : Output compiler messages as JSON. Logo etc are outputted as-is.");
      w("   -Ji<x>: Insert JS file <x> into main JS file. E.g. -Jirtl.js. Can be given multiple times. To remove a file name append a minus, e.g. -Jirtl.js-.");
      w("   -Jl   : lower case identifiers");
      w("   -Jm   : generate source maps");
      w('     -Jmsourceroot=<x>: use x as "sourceRoot", prefix URL for source file names.');
      w("     -Jmbasedir=<x>: write source file names relative to directory x, default is map file folder.");
      w("     -Jminclude: include Pascal sources in source map.");
      w("     -Jmabsolute: store absolute filenames, not relative.");
      w("     -Jmxssiheader: start source map with XSSI protection )]}', default.");
      w("     -Jm-: disable generating source maps");
      w("   -Jo<x>: Enable or disable extra option. The x is case insensitive:");
      w("     -JoSearchLikeFPC: search source files like FPC, default: search case insensitive.");
      w('     -JoUseStrict: add "use strict" to modules, default.');
      w("     -JoCheckVersion-: do not add rtl version check, default.");
      w("     -JoCheckVersion=main: insert rtl version check into main.");
      w("     -JoCheckVersion=system: insert rtl version check into system unit init.");
      w("     -JoCheckVersion=unit: insert rtl version check into every unit init.");
      w("     -JoRTL-<y>=<z>: set RTL identifier y to value z. See -iJ.");
      w("   -Jr<x> Control writing of resource string file");
      w("     -Jrnone: Do not write resource string file");
      w("     -Jrunit: Write resource string file per unit with all resource strings");
      w("     -Jrprogram: Write resource string file per program with all used resource strings in program");
      w("   -JR<x> Control writing of linked resources");
      w("     -JRnone: Skip resource directives");
      w("     -JRjs: Write resources in Javascript structure");
      w("     -JRhtml[=filename] : Write resources as preload links in HTML file (default is projectfile-res.html)");
      w("   -Jpcmd<command>: Run postprocessor. For each generated js execute command passing the js as stdin and read the new js from stdout. This option can be added multiple times to call several postprocessors in succession.");
      w("   -Ju<x>: Add <x> to foreign unit paths. Foreign units are not compiled.");
      this.WritePrecompiledFormats();
      w("  -l     : Write logo");
      w("  -M<x>  : Set language mode or enable/disable a modeswitch");
      w("    -MDelphi: Delphi 7 compatibility mode");
      w("    -MObjFPC: FPC's Object Pascal compatibility mode (default)");
      w("    -M<x>  : enable or disable modeswitch, see option -im");
      w("    Each mode (as listed above) enables its default set of modeswitches.");
      w("    Other modeswitches are disabled and need to be enabled one by another.");
      w("  -NS<x> : obsolete: add <x> to namespaces. Same as -FN<x>");
      w("  -n     : Do not read the default config files");
      w('  -o<x>  : Change main JavaScript file to <x>, "." means stdout');
      w("  -O<x>  : Optimizations:");
      w("    -O-  : Disable optimizations");
      w("    -O1  : Level 1 optimizations (quick and debugger friendly)");
      w("    -O2  : Level 2 optimizations (Level 1 + not debugger friendly)");
      w("    -Oo<x>: Enable or disable optimization. The x is case insensitive:");
      w("      -OoEnumNumbers[-]: write enum value as number instead of name. Default in -O1.");
      w("      -OoRemoveNotUsedPrivates[-]: Default is enabled");
      w("      -OoRemoveNotUsedDeclarations[-]: Default enabled for programs with -Jc");
      w("      -OoRemoveNotUsedPublished[-] : Default is disabled");
      w("      -OoShortRefGlobals[-]: Insert JS local var for types, modules and static functions. Default enabled in -O2");
      w("  -P<x>  : Set target processor. Case insensitive:");
      w("    -Pecmascript5: default");
      w("    -Pecmascript6");
      w("  -S<x>  : Syntax options. <x> is a combination of the following letters:");
      w("    2    : Same as -Mobjfpc (default)");
      w("    a    : Turn on assertions");
      w("    c    : Support operators like C (*=,+=,/= and -=)");
      w("    d    : Same as -Mdelphi");
      w("    j    : Allows typed constants to be writeable (default)");
      w("    m    : Enables macro replacements");
      w("  -SI<x>  : Set interface style to <x>");
      w("    -SIcom  : COM, reference counted interface (default)");
      w("    -SIcorba: CORBA interface");
      w("  -t<x>  : Set subtarget (searches for pas2js-<subtarget>.cfg");
      w("  -T<x>  : Set target platform");
      w("    -Tbrowser: default");
      w("    -Tnodejs : add pas.run(), includes -Jc");
      w("    -Telectron: experimental");
      w("    -Tmodule : add pas.run(), includes -Jc");
      w("  -u<x>  : Undefines the symbol <x>");
      w("  -v<x>  : Be verbose. <x> is a combination of the following letters:");
      w("    e    : Show errors (default)");
      w("    w    : Show warnings");
      w("    n    : Show notes");
      w("    h    : Show hints");
      w("    i    : Show info");
      w("    l    : Show line numbers, needs -vi");
      w("    a    : Show everything");
      w("    0    : Show nothing (except errors)");
      w("    b    : Show file names with full path");
      w("    c    : Show conditionals");
      w("    t    : Show tried/used files");
      w("    d    : Show debug notes and info, enables -vni");
      w("    q    : Show message numbers");
      w("    x    : Show used tools");
      w("    v    : Write pas2jsdebug.log with lots of debugging info");
      w("    z    : Write messages to stderr, -o. still uses stdout.");
      w("  -vm<x>,<y>: Do not show messages numbered <x> and <y>.");
      w("  -?     : Show this help");
      w("  -h     : Show this help");
      this.FLog.LogLn();
      w("Environment variable PAS2JS_OPTS is parsed after default config and before command line parameters.");
      this.FLog.LogLn();
      w("Macros: Format is $Name, $Name$ or $Name()");
      for (var $l = 0, $end = this.FParamMacros.Count() - 1; $l <= $end; $l++) {
        i = $l;
        ParamMacro = this.FParamMacros.GetMacros(i);
        this.FLog.LogRaw$1($lp6(18,"  $",18,ParamMacro.Name,18,$lp39(ParamMacro.CanHaveParams,"()",""),18,": ",18,ParamMacro.Description));
      };
    };
    this.WriteLogo = function () {
      if (this.FHasShownLogo) return;
      this.FHasShownLogo = true;
      this.WriteVersionLine();
      this.FLog.LogPlain("Copyright (c) 2025 Free Pascal team.");
      if (7 in this.FOptions) this.WriteEncoding();
    };
    this.WriteEncoding = function () {
      if (this.FHasShownEncoding) return;
      this.FHasShownEncoding = true;
      this.FLog.LogMsgIgnoreFilter(132,$lp6(18,this.FLog.GetEncodingCaption()));
    };
    this.WriteVersionLine = function () {
      var s = "";
      s = "Pas2JS Compiler version " + this.$class.GetVersion(false);
      s = s + " [" + "2025/12/7" + "] for " + "Browser" + " " + "ECMAScript5";
      this.FLog.LogPlain(s);
      if (7 in this.FOptions) this.WriteEncoding();
    };
    this.WriteOptions = function () {
      var co = 0;
      var fco = 0;
      var ms = 0;
      this.WriteEncoding();
      this.FLog.LogMsgIgnoreFilter(130,$lp6(18,$lm1.PasToJsPlatformNames[this.GetTargetPlatform()]));
      this.FLog.LogMsgIgnoreFilter(131,$lp6(18,$lm1.PasToJsProcessorNames[this.GetTargetProcessor()]));
      for (ms in $lm1.msAllPas2jsModeSwitches) {
        var $tmp = ms;
        if ($tmp === 2) {
          if (ms in this.FModeSwitches) this.FLog.LogMsgIgnoreFilter(102,$lp6(18,$mod.p2jscModeNames[0]))}
         else if ($tmp === 3) {
          if (ms in this.FModeSwitches) this.FLog.LogMsgIgnoreFilter(102,$lp6(18,$mod.p2jscModeNames[1]))}
         else {
          this.FLog.LogMsgIgnoreFilter(103,$lp6(18,$lm.SModeSwitchNames[ms],18,$lp39(ms in this.FModeSwitches,"on","off")));
        };
      };
      this.FLog.LogMsgIgnoreFilter(137,$lp6(18,$lm11.InterfaceTypeNames[this.FInterfaceType]));
      for (var $l = 0; $l <= 34; $l++) {
        co = $l;
        this.FLog.LogMsgIgnoreFilter(101,$lp6(18,$mod.p2jscoCaption[co],18,$lp39(co in this.FOptions,"enabled","disabled")));
      };
      for (var $l1 = 0; $l1 <= 3; $l1++) {
        fco = $l1;
        this.FLog.LogMsgIgnoreFilter(101,$lp6(18,$lm7.p2jsfcoCaption[fco],18,$lp39(fco in this.FFS.FOptions,"enabled","disabled")));
      };
      if (this.GetSrcMapEnable()) {
        this.FLog.LogMsgIgnoreFilter(134,$lp6(18,$lp8(this.FSrcMapSourceRoot,'"')));
        this.FLog.LogMsgIgnoreFilter(135,$lp6(18,$lp8(this.FSrcMapBaseDir,'"')));
      };
    };
    this.WriteDefines = function () {
      var i = 0;
      var S = "";
      var M = null;
      var pbi = 0;
      for (var $l = 0, $end = this.FDefines.GetCount() - 1; $l <= $end; $l++) {
        i = $l;
        S = this.FDefines.Get(i);
        M = this.FDefines.GetObject(i);
        if (M !== null) {
          this.FLog.Log(5,$lp11(rtl.getResStr($lm,"SLogMacroXSetToY"),$lp6(18,S,18,$lp8(M.FValue,'"'))),1030,"",0,0,false)}
         else this.FLog.Log(5,$lp11(rtl.getResStr($lm,"SLogMacroDefined"),$lp6(18,S)),1026,"",0,0,false);
      };
      for (var $l1 = 0; $l1 <= 188; $l1++) {
        pbi = $l1;
        if ($lm1.Pas2JSBuiltInNames[pbi] !== this.FConverterGlobals.BuiltInNames[pbi]) {
          S = $lt53[pbi];
          S = $lp3(S,4,255);
          this.FLog.LogMsgIgnoreFilter(144,$lp6(18,$lp8(S,'"'),18,$lp8($lm1.Pas2JSBuiltInNames[pbi],'"'),18,$lp8(this.FConverterGlobals.BuiltInNames[pbi],'"')));
        };
      };
    };
    this.WriteUsedTools = function () {
      if (this.FPostProcessorSupport != null) this.FPostProcessorSupport.WriteUsedTools();
    };
    this.WriteFoldersAndSearchPaths = function () {
      var I = 0;
      this.FLog.LogMsgIgnoreFilter(106,$lp6(18,"Compiler exe",18,$lp8(this.FCompilerExe,'"')));
      this.FFS.WriteFoldersAndSearchPaths();
      for (var $l = 0, $end = this.FNamespaces.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        this.FLog.LogMsgIgnoreFilter(104,$lp6(18,"Unit scope",18,this.FNamespaces.Get(I)));
      };
      this.FLog.LogMsgIgnoreFilter(106,$lp6(18,"Output file",18,$lp8(this.FMainJSFile,'"')));
    };
    this.WriteInfo = function () {
      var $Self = this;
      var Flags = "";
      function AppendFlag(s) {
        if (s === "") return;
        if (Flags === "") {
          Flags = $lp26(" ",$Self.FLog.FIndent)}
         else Flags = Flags + ",";
        if ((Flags.length + s.length) > $Self.FLog.FLineLen) {
          $Self.FLog.LogPlain(Flags);
          Flags = $lp26(" ",$Self.FLog.FIndent);
        };
        Flags = Flags + s;
      };
      function FlushFlags() {
        if (Flags === "") return;
        $Self.FLog.LogPlain(Flags);
        Flags = "";
      };
      var ms = 0;
      this.WriteVersionLine();
      this.FLog.LogLn();
      this.FLog.LogPlain("Compiler date      : " + $mod.GetCompiledDate());
      this.FLog.LogPlain("Compiler CPU target: " + $mod.GetCompiledTargetCPU());
      this.FLog.LogLn();
      this.FLog.LogPlain("Supported targets (targets marked with '{*}' are under development):");
      this.FLog.LogPlain$1($lp6(18,"  ",18,$lm1.PasToJsPlatformNames[0],18,": webbrowser"));
      this.FLog.LogPlain$1($lp6(18,"  ",18,$lm1.PasToJsPlatformNames[1],18,": Node.js"));
      this.FLog.LogPlain$1($lp6(18,"  ",18,$lm1.PasToJsPlatformNames[2],18,": Electron app"));
      this.FLog.LogLn();
      this.FLog.LogPlain("Supported CPU instruction sets:");
      this.FLog.LogPlain("  ECMAScript5, ECMAScript6");
      this.FLog.LogLn();
      this.FLog.LogPlain("Recognized compiler and RTL features:");
      Flags = "";
      AppendFlag("INITFINAL");
      AppendFlag("RTTI");
      AppendFlag("CLASSES");
      AppendFlag("EXCEPTIONS");
      AppendFlag("EXITCODE");
      AppendFlag("WIDESTRINGS");
      AppendFlag("RANDOM");
      AppendFlag("DYNARRAYS");
      AppendFlag("COMMANDARGS");
      AppendFlag("RESOURCES");
      AppendFlag("UNICODESTRINGS");
      FlushFlags();
      this.FLog.LogLn();
      this.FLog.LogPlain("Recognized modeswitches:");
      Flags = "";
      for (ms in rtl.diffSet($lm1.msAllPas2jsModeSwitches,$lm.AllLanguageModes)) AppendFlag($lm.SModeSwitchNames[ms]);
      FlushFlags();
      this.FLog.LogLn();
      this.FLog.LogPlain("Supported Optimizations:");
      this.FLog.LogPlain("  EnumNumbers");
      this.FLog.LogPlain("  RemoveNotUsedPrivates");
      this.FLog.LogPlain("  ShortRefGlobals");
      this.FLog.LogLn();
      this.FLog.LogPlain("Supported Whole Program Optimizations:");
      this.FLog.LogPlain("  RemoveNotUsedDeclarations");
      this.FLog.LogLn();
      this.FLog.LogPlain("This program comes under the Library GNU General Public License");
      this.FLog.LogPlain("For more information read COPYING.FPC, included in this distribution");
      this.FLog.LogLn();
      this.FLog.LogPlain("Please report bugs in our bug tracker on:");
      this.FLog.LogPlain("                 http://bugs.freepascal.org");
      this.FLog.LogLn();
      this.FLog.LogPlain("More information may be found on our WWW pages (including directions");
      this.FLog.LogPlain("for mailing lists useful for asking questions or discussing potential");
      this.FLog.LogPlain("new features, etc.):");
      this.FLog.LogPlain("                 http://www.freepascal.org");
    };
    this.GetShownMsgTypes = function () {
      var Result = {};
      Result = rtl.createSet(0);
      if (3 in this.FOptions) Result = rtl.includeSet(Result,1);
      if (4 in this.FOptions) Result = rtl.includeSet(Result,2);
      if (5 in this.FOptions) Result = rtl.includeSet(Result,3);
      if (6 in this.FOptions) Result = rtl.includeSet(Result,4);
      if (7 in this.FOptions) Result = rtl.includeSet(Result,5);
      if (12 in this.FOptions) Result = rtl.includeSet(Result,6);
      return Result;
    };
    this.AddDefine = function (aName) {
      if (this.FDefines.IndexOf(aName) >= 0) return;
      this.FDefines.Add(aName);
    };
    this.AddDefine$1 = function (aName, Value) {
      var Index = 0;
      var M = null;
      Index = this.FDefines.IndexOf(aName);
      if (Index < 0) {
        this.FDefines.AddObject(aName,$lt60.$create("Create$1",[aName,Value]))}
       else {
        M = this.FDefines.GetObject(Index);
        if (M === null) {
          this.FDefines.PutObject(Index,$lt60.$create("Create$1",[aName,Value]))}
         else M.FValue = Value;
      };
    };
    this.RemoveDefine = function (aName) {
      var i = 0;
      var M = null;
      i = this.FDefines.IndexOf(aName);
      if (i !== -1) {
        M = this.FDefines.GetObject(i);
        M = rtl.freeLoc(M);
        this.FDefines.Delete(i);
      };
    };
    this.IsDefined = function (aName) {
      var Result = false;
      Result = this.FDefines.IndexOf(aName) >= 0;
      return Result;
    };
    this.SetOption = function (Flag, Enable) {
      if (Enable) {
        this.SetOptions(rtl.unionSet(this.FOptions,rtl.createSet(Flag)))}
       else this.SetOptions(rtl.diffSet(this.FOptions,rtl.createSet(Flag)));
    };
    this.GetUnitInfo = function (UseUnitName, InFileName, ModuleDir, PCUSupport) {
      var $Self = this;
      var Result = $lt12.$new();
      var FoundPasFilename = "";
      var FoundPasUnitName = "";
      var FoundPasIsForeign = false;
      var FoundPCUFilename = "";
      var FoundPCUUnitName = "";
      function TryUnitName(TestUnitName) {
        var Result = false;
        var aFile = null;
        if (FoundPasFilename === "") {
          aFile = $Self.FindLoadedUnit(TestUnitName);
          if (aFile !== null) {
            if (aFile.FPasFileName !== "") {
              FoundPasFilename = aFile.FPasFileName;
              FoundPasUnitName = TestUnitName;
            } else if ((PCUSupport != null) && (aFile.FPCUFilename !== "") && (FoundPCUFilename === "")) {
              FoundPCUFilename = aFile.FPCUFilename;
              FoundPCUUnitName = TestUnitName;
            };
          } else {
            FoundPasFilename = $Self.FFS.FindUnitFileName(TestUnitName,"",ModuleDir,{get: function () {
                return FoundPasIsForeign;
              }, set: function (v) {
                FoundPasIsForeign = v;
              }});
            if (FoundPasFilename !== "") FoundPasUnitName = TestUnitName;
          };
        };
        if ((PCUSupport != null) && (FoundPCUFilename === "") && (FoundPasFilename === "")) {
          FoundPCUFilename = PCUSupport.FindPCU(TestUnitName);
          if (FoundPCUFilename !== "") FoundPCUUnitName = TestUnitName;
        };
        Result = (FoundPasFilename !== "") && (!(PCUSupport != null) || (FoundPCUFilename !== ""));
        return Result;
      };
      var aNameSpace = "";
      var DefNameSpace = "";
      var i = 0;
      Result.$assign($lt12.$new());
      FoundPasFilename = "";
      FoundPasIsForeign = false;
      FoundPasUnitName = "";
      FoundPCUFilename = "";
      FoundPCUUnitName = "";
      if (InFileName === "") {
        this.CheckUnitAlias({get: function () {
            return UseUnitName;
          }, set: function (v) {
            UseUnitName = v;
          }});
        if (!TryUnitName(UseUnitName)) {
          if ($lp23(".",UseUnitName) < 1) {
            for (var $l = 0, $end = this.FNamespaces.GetCount() - 1; $l <= $end; $l++) {
              i = $l;
              aNameSpace = this.FNamespaces.Get(i);
              if (aNameSpace === "") continue;
              if (TryUnitName(aNameSpace + "." + UseUnitName)) break;
            };
            if ((FoundPasFilename === "") || (FoundPCUFilename === "")) {
              DefNameSpace = this.GetDefaultNamespace();
              if (DefNameSpace !== "") {
                i = this.FNamespaces.GetCount() - 1;
                while ((i >= 0) && !$lp24(this.FNamespaces.Get(i),DefNameSpace)) i -= 1;
                if (i < 0) TryUnitName(DefNameSpace + "." + UseUnitName);
              };
            };
          };
        };
      } else {
        FoundPasFilename = this.FFS.FindUnitFileName(UseUnitName,InFileName,ModuleDir,{get: function () {
            return FoundPasIsForeign;
          }, set: function (v) {
            FoundPasIsForeign = v;
          }});
        if (FoundPasFilename !== "") FoundPasUnitName = $lp5(InFileName);
        if ((FoundPasFilename === "") && (PCUSupport != null) && (FoundPCUFilename === "")) {
          FoundPCUFilename = PCUSupport.FindPCU(UseUnitName);
          if (FoundPCUFilename !== "") {
            FoundPCUUnitName = UseUnitName;
          };
        };
      };
      if ((FoundPasFilename === "") && (FoundPCUFilename !== "")) {
        Result.FileName = FoundPCUFilename;
        Result.UnitName = FoundPCUUnitName;
        Result.isPCU = true;
        Result.isForeign = false;
      } else if (FoundPasFilename !== "") {
        Result.FileName = FoundPasFilename;
        Result.UnitName = FoundPasUnitName;
        Result.isPCU = false;
        Result.isForeign = FoundPasIsForeign;
      };
      return Result;
    };
    this.CheckUnitAlias = function (UseUnitName) {
      if (UseUnitName.get() === "") ;
    };
    this.FindFileWithUnitFilename = function (UnitFilename) {
      var Result = null;
      if (UnitFilename === "") return null;
      Result = this.FFiles.FindKey(UnitFilename);
      return Result;
    };
    this.LoadModuleFile = function (UnitFilename, UseUnitName, aFile, isPCU) {
      var aPasTree = null;
      var ExpUnitFilename = "";
      aFile.set(null);
      this.FLog.LogMsg(126,$lp6(18,this.FormatPath(UnitFilename)),"",0,0,!(8 in this.FOptions));
      ExpUnitFilename = UnitFilename;
      if (ExpUnitFilename !== "") ExpUnitFilename = this.ExpandFileName(ExpUnitFilename);
      aFile.set(this.FindFileWithUnitFilename(ExpUnitFilename));
      if (aFile.get() !== null) return;
      if ((ExpUnitFilename === "") || !this.FFS.FileExists(ExpUnitFilename)) {
        if (isPCU) {
          this.FLog.LogMsg(136,$lp6(18,$lp8(UnitFilename,'"')),"",0,0,true)}
         else this.FLog.LogMsg(110,$lp6(18,$lp8(UnitFilename,'"')),"",0,0,true);
        this.Terminate(4);
      };
      if (this.FFS.DirectoryExists(ExpUnitFilename)) {
        this.FLog.LogMsg(111,$lp6(18,$lp8(UnitFilename,'"')),"",0,0,true);
        this.Terminate(4);
      };
      if (isPCU) {
        aFile.set(this.CreateCompilerFile("",ExpUnitFilename))}
       else aFile.set(this.CreateCompilerFile(ExpUnitFilename,""));
      if (UseUnitName !== "") {
        if ($lp2($lp5(UnitFilename),UseUnitName) === 0) {
          aFile.get().FPasUnitName = UseUnitName}
         else aFile.get().FPasUnitName = $lp5(UnitFilename);
      };
      this.FFiles.Add(aFile.get(),true);
      aFile.get().FShowDebug = this.GetShowDebug();
      if (aFile.get().FIsMainFile) aFile.get().FJSFilename = this.GetResolvedMainJSFile();
      aPasTree = aFile.get().FPasResolver;
      if (8 in this.FOptions) aPasTree.FScannerLogEvents = rtl.unionSet(aPasTree.FScannerLogEvents,rtl.createSet(1));
      if (10 in this.FOptions) aPasTree.FScannerLogEvents = rtl.unionSet(aPasTree.FScannerLogEvents,rtl.createSet(2));
      if (rtl.neSet(rtl.intersectSet(rtl.createSet(8,7,12),this.FOptions),{})) aPasTree.FPParserLogEvents = rtl.unionSet(aPasTree.FPParserLogEvents,rtl.createSet(0,1));
      aFile.get().FResourceHandler = this.FResources;
      aFile.get().CreateScannerAndParser(this.FFS.CreateResolver());
      aFile.get().FScanner.FOnLinkLib = rtl.createCallback(this,"HandleLinkLibStatement");
      if (this.GetShowDebug()) this.FLog.LogPlain$1($lp6(18,'Debug: Opening file "',18,UnitFilename,18,'"...'));
      if (isPCU) {
        aFile.get().FFileResolver.SetBaseDirectory($lp7(UnitFilename));
        aFile.get().FPCUSupport.CreatePCUReader();
      } else {
        aFile.get().OpenFile(UnitFilename);
      };
    };
    this.FindUnitJSFileName = function (aFileName) {
      var Result = "";
      if (this.FAllJSIntoMainJS) {
        Result = this.GetResolvedMainJSFile()}
       else Result = this.FFS.FindUnitJSFileName(aFileName);
      return Result;
    };
    this.FindLoadedUnit = function (TheUnitName) {
      var Result = null;
      if (!$lp1(TheUnitName,true,false)) return null;
      Result = this.FUnits.FindKey(TheUnitName);
      return Result;
    };
    this.AddUsedUnit = function (aFile) {
      var OldFile = null;
      if (aFile.FPasUnitName === "") this.RaiseInternalError(20170504161347,'missing PasUnitName "' + aFile.FUnitFilename + '"');
      OldFile = this.FindLoadedUnit(aFile.FPasUnitName);
      if (OldFile !== null) {
        if (OldFile !== aFile) this.RaiseInternalError(20170504161354,'duplicate unit "' + OldFile.FPasUnitName + '" "' + aFile.FUnitFilename + '" "' + OldFile.FUnitFilename + '"');
      } else {
        this.FUnits.Add(aFile,true);
      };
    };
    this.ExpandFileName = function (Filename) {
      var Result = "";
      Result = this.FFS.ExpandFileName(Filename);
      return Result;
    };
  });
  this.GetCompiledDate = function () {
    var Result = "";
    Result = "2025/12/7";
    return Result;
  };
  this.GetCompiledTargetOS = function () {
    var Result = "";
    Result = $lp12("Browser");
    return Result;
  };
  this.GetCompiledTargetCPU = function () {
    var Result = "";
    Result = $lp12("ECMAScript5");
    return Result;
  };
});
rtl.module("pas2jswebcompiler",["System","Classes","SysUtils","Pas2JSFS","PasUseAnalyzer","Pas2jsCompiler","FPPJsSrcMap","webfilecache"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lt = null;
  var $lm = pas.Pas2jsCompiler;
  var $lt1 = $lm.TPas2jsCompiler;
  var $lm1 = pas.PasUseAnalyzer;
  var $lt2 = $lm1.TPasAnalyzerKeySet;
  var $lm2 = pas.Pas2JSFS;
  var $lt3 = $lm2.EPas2jsFS;
  var $lm3 = pas.System;
  var $lp = $lm3.VarRecs;
  var $lm4 = pas.webfilecache;
  var $lt4 = $lm4.TPas2jsWebFS;
  var $lm5 = pas.SysUtils;
  var $lp1 = $lm5.LowerCase;
  rtl.createClass(this,"TPas2JSWebcompiler",$lt1,function () {
    $lt = this;
    this.GetWebFS = function () {
      var Result = null;
      Result = this.FFS;
      return Result;
    };
    this.DoWriteJSFile = function (DestFilename, DestMapFile, aWriter) {
      var Result = false;
      var S = "";
      S = aWriter.FBuffer.join("");
      this.GetWebFS().SetFileContent(DestFilename,S);
      Result = true;
      return Result;
    };
    this.CreateSetOfCompilerFiles = function (keyType) {
      var Result = null;
      var $tmp = keyType;
      if ($tmp === 0) {
        Result = $lt2.$create("Create$1",[$impl.Pas2jsCompilerFile_FilenameToKeyName,$impl.PtrFilenameToKeyName])}
       else if ($tmp === 1) {
        Result = $lt2.$create("Create$1",[$impl.Pas2jsCompilerFile_UnitnameToKeyName,$impl.PtrUnitnameToKeyName])}
       else {
        throw $lt3.$create("CreateFmt",["Internal Unknown key type: %d",$lp(0,keyType)]);
      };
      return Result;
    };
    this.CreateFS = function () {
      var Result = null;
      Result = $lt4.$create("Create$1");
      return Result;
    };
  });
  $mod.$implcode = function () {
    $impl.Pas2jsCompilerFile_FilenameToKeyName = function (Item) {
      var Result = "";
      Result = $lp1(Item.FPasFileName);
      return Result;
    };
    $impl.PtrUnitnameToKeyName = function (Item) {
      var Result = "";
      Result = $lp1(Item);
      return Result;
    };
    $impl.Pas2jsCompilerFile_UnitnameToKeyName = function (Item) {
      var Result = "";
      Result = $lp1(Item.FPasUnitName);
      return Result;
    };
    $impl.PtrFilenameToKeyName = function (FilenameAsPtr) {
      var Result = "";
      Result = $lp1(FilenameAsPtr);
      return Result;
    };
  };
},["JS"]);
rtl.module("Rtl.BrowserLoadHelper",["System","Classes","SysUtils","JS","Web"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lm = pas.Classes;
  var $lt1 = $lm.TLoadHelper;
  var $lp = $lm.SetLoadHelperClass;
  rtl.createClass(this,"TBrowserLoadHelper",$lt1,function () {
    $lt = this;
  });
  $mod.$init = function () {
    $lp($lt);
  };
});
rtl.module("browserconsole",["System","JS","Web","Rtl.BrowserLoadHelper","SysUtils"],function () {
  "use strict";
  var $mod = this;
  var $impl = $mod.$impl;
  var $lm = pas.System;
  var $lp = $lm.SetWriteCallBack;
  var $lm1 = pas.SysUtils;
  var $lp1 = $lm1.StringReplace;
  this.BrowserLineBreak = "\n";
  this.DefaultMaxConsoleLines = 25;
  this.DefaultConsoleStyle = ".pasconsole { " + this.BrowserLineBreak + "font-family: courier;" + this.BrowserLineBreak + "font-size: 14px;" + this.BrowserLineBreak + "background: #FFFFFF;" + this.BrowserLineBreak + "color: #000000;" + this.BrowserLineBreak + "display: block;" + this.BrowserLineBreak + "}";
  this.ConsoleElementID = "";
  this.ConsoleStyle = "";
  this.MaxConsoleLines = 0;
  this.ConsoleLinesToBrowserLog = false;
  this.ResetConsole = function () {
    if ($impl.LinesParent === null) return;
    while ($impl.LinesParent.firstElementChild !== null) $impl.LinesParent.removeChild($impl.LinesParent.firstElementChild);
    $impl.AppendLine();
  };
  this.InitConsole = function () {
    if ($impl.ConsoleElement === null) return;
    if ($impl.ConsoleElement.nodeName.toLowerCase() !== "body") {
      while ($impl.ConsoleElement.firstElementChild !== null) $impl.ConsoleElement.removeChild($impl.ConsoleElement.firstElementChild);
    };
    $impl.StyleElement = document.createElement("style");
    $impl.StyleElement.innerText = $mod.ConsoleStyle;
    $impl.ConsoleElement.appendChild($impl.StyleElement);
    $impl.LinesParent = document.createElement("div");
    $impl.ConsoleElement.appendChild($impl.LinesParent);
  };
  this.HookConsole = function () {
    $impl.ConsoleElement = null;
    if ($mod.ConsoleElementID !== "") $impl.ConsoleElement = document.getElementById($mod.ConsoleElementID);
    if ($impl.ConsoleElement === null) $impl.ConsoleElement = document.body;
    if ($impl.ConsoleElement === null) return;
    $mod.InitConsole();
    $mod.ResetConsole();
    $lp($impl.WriteConsole);
  };
  $mod.$implcode = function () {
    $impl.LastLine = null;
    $impl.StyleElement = null;
    $impl.LinesParent = null;
    $impl.ConsoleElement = null;
    $impl.AppendLine = function () {
      var CurrentCount = 0;
      var S = null;
      CurrentCount = 0;
      S = $impl.LinesParent.firstChild;
      while (S != null) {
        CurrentCount += 1;
        S = S.nextSibling;
      };
      while (CurrentCount > $mod.MaxConsoleLines) {
        CurrentCount -= 1;
        $impl.LinesParent.removeChild($impl.LinesParent.firstChild);
      };
      $impl.LastLine = document.createElement("div");
      $impl.LastLine.className = "pasconsole";
      $impl.LinesParent.appendChild($impl.LastLine);
    };
    $impl.EscapeString = function (S) {
      var Result = "";
      var CL = "";
      CL = $lp1(S,"<","&lt;",rtl.createSet(0));
      CL = $lp1(CL,">","&gt;",rtl.createSet(0));
      CL = $lp1(CL," ","&nbsp;",rtl.createSet(0));
      CL = $lp1(CL,"\r\n","<br>",rtl.createSet(0));
      CL = $lp1(CL,"\n","<br>",rtl.createSet(0));
      CL = $lp1(CL,"\r","<br>",rtl.createSet(0));
      Result = CL;
      return Result;
    };
    $impl.WriteConsole = function (S, NewLine) {
      var CL = "";
      CL = $impl.LastLine.innerHTML;
      CL = CL + $impl.EscapeString("" + S);
      $impl.LastLine.innerHTML = CL;
      if (NewLine) {
        if ($mod.ConsoleLinesToBrowserLog) window.console.log($impl.LastLine.innerText);
        $impl.AppendLine();
      };
    };
  };
  $mod.$init = function () {
    $mod.ConsoleLinesToBrowserLog = true;
    $mod.ConsoleElementID = "pasjsconsole";
    $mod.ConsoleStyle = $mod.DefaultConsoleStyle;
    $mod.MaxConsoleLines = 25;
    $mod.HookConsole();
  };
},[]);
rtl.module("program",["System","Classes","SysUtils","Web","JS","Types","webfilecache","pas2jswebcompiler","browserconsole"],function () {
  "use strict";
  var $mod = this;
  var $lt = null;
  var $lm = pas.Classes;
  var $lt1 = $lm.TComponent;
  var $lm1 = pas.System;
  var $lp = $lm1.Pos;
  var $lp1 = $lm1.Copy;
  var $lm2 = pas.SysUtils;
  var $lp2 = $lm2.StrToIntDef;
  var $lt2 = $lm.TStringList;
  var $lt3 = $lm2.Exception;
  var $lp3 = $lm2.IntToStr;
  var $lm3 = pas.pas2jswebcompiler;
  var $lt4 = $lm3.TPas2JSWebcompiler;
  var $lm4 = pas.browserconsole;
  var $lm5 = pas.JS;
  rtl.createClass(this,"TWebCompiler",$lt1,function () {
    $lt = this;
    this.$init = function () {
      $lt1.$init.call(this);
      this.BRun = null;
      this.MSource = null;
      this.MLog = null;
      this.RFrame = null;
      this.PResult = null;
      this.FCompiler = null;
      this.FKnownFiles = null;
    };
    this.$final = function () {
      this.BRun = undefined;
      this.MSource = undefined;
      this.MLog = undefined;
      this.RFrame = undefined;
      this.PResult = undefined;
      this.FCompiler = undefined;
      this.FKnownFiles = undefined;
      $lt1.$final.call(this);
    };
    this.DoLog = function (Sender, Msg) {
      var P1 = 0;
      var P2 = 0;
      var P3 = 0;
      var Line = 0;
      var S = "";
      var TypeName = "";
      this.MLog.value = this.MLog.value + $lm1.sLineBreak + Msg;
      if ($lp("main.pp(",Msg) === 1) {
        P1 = $lp("(",Msg);
        P2 = $lp(",",Msg);
        P3 = $lp(")",Msg);
        if ((P1 > 0) && (P2 > P1) && (P3 > P2)) {
          S = $lp1(Msg,P1 + 1,P2 - P1 - 1);
          Line = $lp2(S,0);
          S = $lp1(Msg,P3 + 2,Msg.length);
          if ($lp("Error:",S) === 1) {
            TypeName = "error"}
           else if ($lp("Fatal:",S) === 1) {
            TypeName = "error"}
           else if ($lp("Warning:",S) === 1) {
            TypeName = "warning"}
           else if ($lp("Hint:",S) === 1) {
            TypeName = "hint"}
           else if ($lp("Note:",S) === 1) {
            TypeName = "hint"}
           else TypeName = "";
          if ((Line > 0) && (TypeName !== "")) window.addMarker(Line,TypeName,Msg);
        };
      };
    };
    this.LoadDefaults = function () {
      var $Self = this;
      function DoText(Res) {
        var Result = undefined;
        Result = Res.text();
        return Result;
      };
      function DoLoad(Val) {
        var Result = undefined;
        var Arr = [];
        var I = 0;
        Arr = JSON.parse("" + Val);
        for (var $l = 0, $end = rtl.length(Arr) - 1; $l <= $end; $l++) {
          I = $l;
          $Self.FKnownFiles.Add(Arr[I]);
        };
        $Self.FCompiler.GetWebFS().LoadFiles$1(Arr,rtl.createCallback($Self,"OnUnitLoaded"));
        Result = null;
        window.appReady();
        return Result;
      };
      window.fetch("files.json").then(DoText).then(DoLoad);
    };
    this.OnUnitLoaded = function (Sender, aFileName, aError) {
      if (aError !== "") {
        this.MLog.value = this.MLog.value + $lm1.sLineBreak + 'Error Loading "' + aFileName + '": ' + aError}
       else if (window.fileLoaded) window.fileLoaded(aFileName);
    };
    this.RunClick = function (aEvent) {
      var $Self = this;
      var Result = false;
      function ShowResult(success) {
        var E = null;
        while ($Self.PResult.firstElementChild !== null) $Self.PResult.removeChild($Self.PResult.firstElementChild);
        E = document.createElement("div");
        if (success) {
          E.setAttribute("class","alert alert-success alert-dismissible fade show m-0");
          E.innerHTML = "<strong>Success!</strong> Program compiled and running.";
          if (window.showRunTab) window.showRunTab();
        } else {
          E.setAttribute("class","alert alert-danger alert-dismissible fade show m-0");
          E.innerHTML = "<strong>Failure</strong> Compilation failed. Check logs.";
          if (window.showCompilerTab) window.showCompilerTab();
        };
        $Self.PResult.appendChild(E);
      };
      var args = null;
      var Res = false;
      var Src = "";
      Result = false;
      this.MLog.value = "";
      window.clearMarkers();
      this.FCompiler.GetWebFS().SetFileContent("main.pp",this.MSource.value);
      args = $lt2.$create("Create$1");
      try {
        args.Add("-Tbrowser");
        args.Add("-Jc");
        args.Add("-Jirtl.js");
        args.Add("-O1");
        args.Add("main.pp");
        try {
          this.FCompiler.Run("","",args,true);
        } catch ($e) {
          if ($lt3.isPrototypeOf($e)) {
            var E = $e;
            this.MLog.value = this.MLog.value + $lm1.sLineBreak + "Exception during compile: " + E.fMessage;
          } else throw $e
        };
        this.MLog.value = this.MLog.value + $lm1.sLineBreak + "Exit Code: " + $lp3(this.FCompiler.GetExitCode());
        Res = this.FCompiler.GetExitCode() === 0;
        ShowResult(Res);
        if (Res) {
          Src = this.FCompiler.GetWebFS().GetFileContent("main.js");
          if (Src === "") {
            window.alert("No source available");
            return Result;
          };
          Src = $mod.SHTMLHead + Src + $lm1.LineEnding + $mod.SHTMLTail;
          this.RFrame.setAttribute("srcdoc",Src);
        };
      } finally {
        args = rtl.freeLoc(args);
      };
      return Result;
    };
    this.LinkElements = function () {
      this.BRun = document.getElementById("btn-run");
      this.BRun.onclick = rtl.createSafeCallback(this,"RunClick");
      this.MSource = document.getElementById("memo-program-src");
      this.MLog = document.getElementById("memo-compiler-output");
      this.RFrame = document.getElementById("runarea");
      this.PResult = document.getElementById("compile-result");
    };
    this.Create$1 = function (aOwner) {
      $lt1.Create$1.apply(this,arguments);
      this.FKnownFiles = $lt2.$create("Create$1");
      this.FKnownFiles.SetSorted(true);
      this.FKnownFiles.FDuplicates = 0;
      this.FCompiler = $lt4.$create("Create$1");
      this.FCompiler.FLog.FOnLog = rtl.createCallback(this,"DoLog");
      this.FCompiler.GetWebFS().FLoadBaseURL = "sources";
      $lm4.ConsoleStyle = "";
      window.webCompilerApp = this;
      return this;
    };
    this.Destroy = function () {
      rtl.free(this,"FKnownFiles");
      $lt1.Destroy.call(this);
    };
    this.Execute = function () {
      this.LinkElements();
      this.LoadDefaults();
    };
    this.AddSourceFile = function (AFileName, AContent) {
      var Result = false;
      Result = this.FCompiler.GetWebFS().SetFileContent(AFileName,AContent);
      if (Result) {
        if (this.FKnownFiles.IndexOf(AFileName) < 0) this.FKnownFiles.Add(AFileName);
      };
      return Result;
    };
    this.LoadSourceFile = function (AURL, AFileName) {
      var $Self = this;
      function DoText(Res) {
        var Result = undefined;
        Result = Res.text();
        return Result;
      };
      function DoLoad(Val) {
        var Result = undefined;
        $Self.AddSourceFile(AFileName,"" + Val);
        Result = null;
        return Result;
      };
      function DoError(Err) {
        var Result = undefined;
        $Self.MLog.value = $Self.MLog.value + $lm1.sLineBreak + "Error loading " + AURL + ": " + ("" + Err);
        Result = null;
        return Result;
      };
      window.fetch(AURL).then(DoText).then(DoLoad).catch(DoError);
    };
    this.GetFileContent = function (AFileName) {
      var Result = "";
      try {
        Result = this.FCompiler.GetWebFS().GetFileContent(AFileName);
      } catch ($e) {
        Result = "";
      };
      return Result;
    };
    this.GetFileList = function () {
      var Result = [];
      var I = 0;
      Result = rtl.arraySetLength(Result,"",this.FKnownFiles.GetCount());
      for (var $l = 0, $end = this.FKnownFiles.GetCount() - 1; $l <= $end; $l++) {
        I = $l;
        Result[I] = this.FKnownFiles.Get(I);
      };
      return Result;
    };
    var $r = this.$rtti;
    $r.addMethod("AddSourceFile",1,[["AFileName",rtl.string],["AContent",rtl.string]],4,rtl.boolean);
    $r.addMethod("LoadSourceFile",0,[["AURL",rtl.string],["AFileName",rtl.string]],4);
    $r.addMethod("GetFileContent",1,[["AFileName",rtl.string]],4,rtl.string);
    $r.addMethod("GetFileList",1,[],4,$lm5.$rtti["TJSStringDynArray"]);
  });
  this.SHTMLHead = "<HTML>" + $lm1.LineEnding + "<head>" + $lm1.LineEnding + '  <meta charset="UTF-8">' + $lm1.LineEnding + "  <Title>Pas2JS web compiler Program output</Title>" + $lm1.LineEnding + '  <script type="application/javascript">' + $lm1.LineEnding;
  this.SHTMLTail = "   </script>" + $lm1.LineEnding + "  <style>" + $lm1.LineEnding + "    :root { --bg-color: #ffffff; --text-color: #000000; --header-color: #0056b3; --border-color: #eee; }" + $lm1.LineEnding + "    @media (prefers-color-scheme: dark) { :root { --bg-color: #282a36; --text-color: #f8f8f2; --header-color: #bd93f9; --border-color: #44475a; } }" + $lm1.LineEnding + '    body { background-color: var(--bg-color); color: var(--text-color); font-family: "Segoe UI", sans-serif; margin: 0; padding: 0; }' + $lm1.LineEnding + "    .console-container { padding: 10px; min-height: 100vh; box-sizing: border-box; }" + $lm1.LineEnding + "    .log-header { font-size: 0.8rem; color: var(--header-color); margin-bottom: 10px; border-bottom: 1px solid var(--border-color); padding-bottom: 5px; font-weight: bold; text-transform: uppercase; }" + $lm1.LineEnding + '    #pasjsconsole { font-family: "Consolas", "Monaco", monospace; white-space: pre-wrap; }' + $lm1.LineEnding + '    .pasconsole { font-family: "Consolas", "Monaco", monospace; font-size: 14px; background: transparent; color: var(--text-color); display: block; line-height: 1.4; border-bottom: 1px solid var(--border-color); }' + $lm1.LineEnding + "  </style>" + $lm1.LineEnding + "</head>" + $lm1.LineEnding + "<body>" + $lm1.LineEnding + '  <div class="console-container">' + $lm1.LineEnding + '    <div class="log-header">Program Output</div>' + $lm1.LineEnding + '    <div id="pasjsconsole"></div>' + $lm1.LineEnding + "  </div>" + $lm1.LineEnding + "<script>" + $lm1.LineEnding + "  rtl.run();" + $lm1.LineEnding + "</script>" + $lm1.LineEnding + "</body>" + $lm1.LineEnding + "</HTML>";
  $mod.$main = function () {
    var $with = $lt.$create("Create$1",[null]);
    $with.Execute();
  };
});
